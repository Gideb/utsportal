<?php
session_start();
if (!isset($_SESSION['loggedin']) || $_SESSION['loggedin'] !== true) {
    header("Location: index.php");
    exit;
}
?>

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Software Development Portal | Tutor Assist</title>
    <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"> -->
    <script src="https://kit.fontawesome.com/192436698a.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="css/style.css">
    <link rel="icon" href="assets/logo.png" type="image/png">

</head>

<body class="portal-body">

    <header class="portal-header">
        <div>
            <a href="landing.php" class="back-btn"><i class="fa-solid fa-arrow-left"></i> Catalog</a>
            <strong>Software Development</strong> | Instructor Guide
        </div>
        <div style="display: flex; gap: 15px; align-items: center;">
            <div onclick="showDashboard()" style="cursor:pointer"><i class="fa-solid fa-table-cells"></i> Dashboard View</div>
            <a href="logout.php" class="back-btn" style="background: #c0392b; border: none;">
                <i class="fa-solid fa-power-off"></i> Logout
            </a>
        </div>
    </header>

    <div class="portal-container">
        <div class="sidebar">
            <h3>Phase 1: Foundations of Logic (Weeks 1-5)</h3>
            <div class="nav-item" id="nav-1-1" onclick="loadContent(1,1)">W1 D1: Introduction to Software Development</div>
            <div class="nav-item" id="nav-1-2" onclick="loadContent(1,2)">W1 D2: Variables and Data Types</div>
            <div class="nav-item" id="nav-1-3" onclick="loadContent(1,3)">W1 D3: Operators (Math and Logic)</div>
            <div class="nav-item" id="nav-1-4" onclick="loadContent(1,4)">W1 D4: Basic Input/Output in Python</div>

            <div class="nav-item" id="nav-2-1" onclick="loadContent(2,1)">W2 D1: If/Else Statements</div>
            <div class="nav-item" id="nav-2-2" onclick="loadContent(2,2)">W2 D2: Nested Conditionals</div>
            <div class="nav-item" id="nav-2-3" onclick="loadContent(2,3)">W2 D3: For Loops </div>
            <div class="nav-item" id="nav-2-4" onclick="loadContent(2,4)">W2 D4: While Loops </div>

            <div class="nav-item" id="nav-3-1" onclick="loadContent(3,1)">W3 D1: Lists and Arrays</div>
            <div class="nav-item" id="nav-3-2" onclick="loadContent(3,2)">W3 D2: Dictionaries and Maps</div>
            <div class="nav-item" id="nav-3-3" onclick="loadContent(3,3)">W3 D3: List Manipulation</div>
            <div class="nav-item" id="nav-3-4" onclick="loadContent(3,4)">W3 D4: Iterating through complex data</div>

            <div class="nav-item" id="nav-4-1" onclick="loadContent(4,1)">W4 D1: Defining Functions (Reusable code)</div>
            <div class="nav-item" id="nav-4-2" onclick="loadContent(4,2)">W4 D2: Parameters and Return Values</div>
            <div class="nav-item" id="nav-4-3" onclick="loadContent(4,3)">W4 D3: Local vs. Global Scope</div>
            <div class="nav-item" id="nav-4-4" onclick="loadContent(4,4)">W4 D4: Recursive Functions (Functions that call themselves)</div>

            <h3>Level 1: Project Work</h3>
            <div class="nav-item" id="nav-5-1" onclick="loadContent(5,1)">W5 D1: Project - Build a "Banking System Console"</div>
            <div class="nav-item" id="nav-5-2" onclick="loadContent(5,2)">W5 D2: Project - Project Work</div>
            <div class="nav-item" id="nav-5-3" onclick="loadContent(5,3)">W5 D3: Project - Project Work</div>
            <div class="nav-item" id="nav-5-4" onclick="loadContent(5,4)">W5 D4: Project - Project Work</div>

            <h3>Phase 2: Object-Oriented Programming (Weeks 6-9)</h3>
            <div class="nav-item" id="nav-6-1" onclick="loadContent(6,1)">W6 D1: Classes and Objects</div>
            <div class="nav-item" id="nav-6-2" onclick="loadContent(6,2)">W6 D2: Attributes and Methods</div>
            <div class="nav-item" id="nav-6-3" onclick="loadContent(6,3)">W6 D3: The __init__ constructor</div>
            <div class="nav-item" id="nav-6-4" onclick="loadContent(6,4)">W6 D4: Practice: Modeling a "Car" class</div>

            <div class="nav-item" id="nav-7-1" onclick="loadContent(7,1)">W7 D1: Inheritance (Child classes)</div>
            <div class="nav-item" id="nav-7-2" onclick="loadContent(7,2)">W7 D2: Encapsulation (Private vs. Public data)</div>
            <div class="nav-item" id="nav-7-3" onclick="loadContent(7,3)">W7 D3: Polymorphism (One interface, many forms)</div>
            <div class="nav-item" id="nav-7-4" onclick="loadContent(7,4)">W7 D4: Abstraction (Hiding complexity)</div>

            <div class="nav-item" id="nav-8-1" onclick="loadContent(8,1)">W8 D1: Try/Except blocks (Preventing crashes)</div>
            <div class="nav-item" id="nav-8-2" onclick="loadContent(8,2)">W8 D2: Logging errors</div>
            <div class="nav-item" id="nav-8-3" onclick="loadContent(8,3)">W8 D3: Reading from Text and CSV files</div>
            <div class="nav-item" id="nav-8-4" onclick="loadContent(8,4)">W8 D4: Writing and Saving data to files</div>

            <h3>Level 2: Project Work</h3>
            <div class="nav-item" id="nav-9-1" onclick="loadContent(9,1)">W9 D1: Build a "Student Management System"</div>
            <div class="nav-item" id="nav-9-2" onclick="loadContent(9,2)">W9 D2: Project Work</div>
            <div class="nav-item" id="nav-9-3" onclick="loadContent(9,3)">W9 D3: Project Work</div>
            <div class="nav-item" id="nav-9-4" onclick="loadContent(9,4)">W9 D4: Project Work</div>

            <h3>Phase 3: GUI Development & Deployment (Weeks 10-14)</h3>
            <div class="nav-item" id="nav-10-1" onclick="loadContent(10,1)">W10 D1: Windows, Frames, and Labels</div>
            <div class="nav-item" id="nav-10-2" onclick="loadContent(10,2)">W10 D2: Buttons and Event Handlers</div>
            <div class="nav-item" id="nav-10-3" onclick="loadContent(10,3)">W10 D3: Entry fields and Text areas</div>
            <div class="nav-item" id="nav-10-4" onclick="loadContent(10,4)">W10 D4: Layout management (Grid vs. Pack)</div>

            <div class="nav-item" id="nav-11-1" onclick="loadContent(11,1)">W11 D1: Menus and Navbars</div>
            <div class="nav-item" id="nav-11-2" onclick="loadContent(11,2)">W11 D2: Pop-ups and Message Boxes</div>
            <div class="nav-item" id="nav-11-3" onclick="loadContent(11,3)">W11 D3: Working with Canvas and Images</div>
            <div class="nav-item" id="nav-11-4" onclick="loadContent(11,4)">W11 D4: Binding Keyboard keys to actions</div>

            <div class="nav-item" id="nav-12-1" onclick="loadContent(12,1)">W12 D1: Connecting your App to SQLite</div>
            <div class="nav-item" id="nav-12-2" onclick="loadContent(12,2)">W12 D2: Executing SQL commands from the App</div>
            <div class="nav-item" id="nav-12-3" onclick="loadContent(12,3)">W12 D3: Displaying Database records in a GUI table</div>
            <div class="nav-item" id="nav-12-4" onclick="loadContent(12,4)">W12 D4: Building a "Search" feature</div>

            <div class="nav-item" id="nav-13-1" onclick="loadContent(13,1)">W13 D1: Introduction to Git & GitHub</div>
            <div class="nav-item" id="nav-13-2" onclick="loadContent(13,2)">W13 D2: Committing code and Branching</div>
            <div class="nav-item" id="nav-13-3" onclick="loadContent(13,3)">W13 D3: The SDLC (Software Development Life Cycle)</div>
            <div class="nav-item" id="nav-13-4" onclick="loadContent(13,4)">W13 D4: Unit Testing </div>

            <div class="nav-item" id="nav-14-1" onclick="loadContent(14,1)">W14 D1: Finalizing a Desktop Application</div>
            <div class="nav-item" id="nav-14-2" onclick="loadContent(14,2)">W14 D2: Finalizing a Desktop Application</div>
            <div class="nav-item" id="nav-14-3" onclick="loadContent(14,3)">W14 D3: Finalizing a Desktop Application</div>
            <div class="nav-item" id="nav-14-4" onclick="loadContent(14,4)">W14 D4: Compiling to .EXE</div>
        </div>

        <div class="content" id="main-content">
        </div>
    </div>

    <footer>
        <div><i class="fa-brands fa-whatsapp me-1"></i> Support: UTS IT Academy</div>
        <div>&copy; 2026 Software Development Module (14-Week Curriculum)</div>
    </footer>

    <script>
        const contentData = {

            "1-1": {
    icon: "fa-terminal",
    title: "Introduction to Software Development",
    html: `<h1>Week 1, Day 1: Introduction to Software Development</h1>
<p>Welcome to the world of coding! Today we explore what software is, how programs run, and the difference between compilers and interpreters.</p>

<div class="analogy-box">
    <b>Analogy: Building a Recipe vs. Cooking Live üç≥</b><br/>
    
    Compiler: Write a recipe ‚Üí Translate to another language ‚Üí Give to someone else to cook<br/>
    Interpreter: Speak instructions one step at a time ‚Üí Chef cooks immediately<br/>
    Source Code: Your recipe in English<br/>
    Machine Code: Recipe in the chef's native language<br/>
    Execution: The cooking process
</div>

<h3>What is Software Development?</h3>
<div style="background-color: #f0f8ff; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h4>üìä Software Development Process</h4>
    
    <table style="width: 100%; border-collapse: collapse; margin: 15px 0;">
        <tr style="background: #4A90E2; color: white;">
            <th style="padding: 10px; text-align: left;">Step</th>
            <th style="padding: 10px; text-align: left;">Description</th>
            <th style="padding: 10px; text-align: left;">Analogy</th>
        </tr>
        <tr style="background: #f8f9fa;">
            <td style="padding: 8px; border: 1px solid #ddd;">1. Planning</td>
            <td style="padding: 8px; border: 1px solid #ddd;">Define what the program should do</td>
            <td style="padding: 8px; border: 1px solid #ddd;">Writing a recipe outline</td>
        </tr>
        <tr style="background: white;">
            <td style="padding: 8px; border: 1px solid #ddd;">2. Coding</td>
            <td style="padding: 8px; border: 1px solid #ddd;">Writing instructions in a programming language</td>
            <td style="padding: 8px; border: 1px solid #ddd;">Writing detailed cooking steps</td>
        </tr>
        <tr style="background: #f8f9fa;">
            <td style="padding: 8px; border: 1px solid #ddd;">3. Compiling/Interpreting</td>
            <td style="padding: 8px; border: 1px solid #ddd;">Converting code to machine language</td>
            <td style="padding: 8px; border: 1px solid #ddd;">Translating recipe for chef</td>
        </tr>
        <tr style="background: white;">
            <td style="padding: 8px; border: 1px solid #ddd;">4. Executing</td>
            <td style="padding: 8px; border: 1px solid #ddd;">Running the program</td>
            <td style="padding: 8px; border: 1px solid #ddd;">Cooking the meal</td>
        </tr>
        <tr style="background: #f8f9fa;">
            <td style="padding: 8px; border: 1px solid #ddd;">5. Testing</td>
            <td style="padding: 8px; border: 1px solid #ddd;">Checking if it works correctly</td>
            <td style="padding: 8px; border: 1px solid #ddd;">Tasting the food</td>
        </tr>
    </table>
</div>

<h3>Compilers vs. Interpreters</h3>
<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">
    <div style="background: #e3f2fd; padding: 15px; border-radius: 10px;">
        <h4>üîÑ Compiler (Like C#, Java)</h4>
        <img src="https://img.icons8.com/color/96/000000/compiler.png" style="float: left; margin-right: 15px;"/>
        <p><b>Process:</b> Code ‚Üí Compile (once) ‚Üí Executable File ‚Üí Run</p>
        <ul>
            <li><b>Advantages:</b> Faster execution, standalone program</li>
            <li><b>Disadvantages:</b> Slower development, platform-specific</li>
            <li><b>Example:</b> Visual Studio compiling C# to .exe</li>
        </ul>
        <pre style="background: #fff; padding: 10px; margin-top: 10px;">
// C# Example
using System;
class Program {
    static void Main() {
        Console.WriteLine("Hello World!");
    }
}
// Compiled to HelloWorld.exe</pre>
    </div>
    
    <div style="background: #f3e5f5; padding: 15px; border-radius: 10px;">
        <h4>‚ö° Interpreter (Like Python, JavaScript)</h4>
        <img src="https://img.icons8.com/color/96/000000/interpreter.png" style="float: left; margin-right: 15px;"/>
        <p><b>Process:</b> Code ‚Üí Interpret (line by line) ‚Üí Execute immediately</p>
        <ul>
            <li><b>Advantages:</b> Faster development, cross-platform</li>
            <li><b>Disadvantages:</b> Slower execution, needs interpreter</li>
            <li><b>Example:</b> Python running script directly</li>
        </ul>
        <pre style="background: #fff; padding: 10px; margin-top: 10px;">
# Python Example
print("Hello World!")
# Runs immediately with: python hello.py</pre>
    </div>
</div>

<h3>Setting Up Your Development Environment</h3>
<div style="background-color: #fff8e1; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h4>üß∞ Tools You'll Need</h4>
    
    <table style="width: 100%; border-collapse: collapse; margin: 15px 0;">
        <tr style="background: #ffb74d; color: white;">
            <th style="padding: 10px; text-align: left;">Tool</th>
            <th style="padding: 10px; text-align: left;">Purpose</th>
            <th style="padding: 10px; text-align: left;">Installation</th>
        </tr>
        <tr style="background: #fffde7;">
            <td style="padding: 8px; border: 1px solid #ddd;">Python 3.x</td>
            <td style="padding: 8px; border: 1px solid #ddd;">Programming language</td>
            <td style="padding: 8px; border: 1px solid #ddd;">python.org</td>
        </tr>
        <tr style="background: white;">
            <td style="padding: 8px; border: 1px solid #ddd;">VS Code</td>
            <td style="padding: 8px; border: 1px solid #ddd;">Code editor</td>
            <td style="padding: 8px; border: 1px solid #ddd;">code.visualstudio.com</td>
        </tr>
        <tr style="background: #fffde7;">
            <td style="padding: 8px; border: 1px solid #ddd;">Git</td>
            <td style="padding: 8px; border: 1px solid #ddd;">Version control</td>
            <td style="padding: 8px; border: 1px solid #ddd;">git-scm.com</td>
        </tr>
    </table>
    
    <h5>üìù Step-by-Step Python Installation Check:</h5>
    <pre style="background: #f5f5f5; padding: 10px; margin: 10px 0;">
# Open Terminal/Command Prompt and type:
python --version
# Should show: Python 3.x.x

# Test Python interpreter:
python
>>> print("Hello, World!")
Hello, World!
>>> exit()</pre>
</div>

<h3>Your First Program</h3>
<div style="background-color: #e8f5e8; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h4>‚ú® Hello World in Python</h4>
    
    <pre style="background: #fff; padding: 15px; margin: 15px 0;">
# ============ FIRST_PROGRAM.PY ============
# This is a comment - Python ignores this
# Comments help humans understand code

print("=" * 40)
print("        MY FIRST PYTHON PROGRAM")
print("=" * 40)

# Print text to screen
print("Hello, World!")
print("Welcome to Software Development!")

# Print with multiple items
name = "Student"
print("Hello,", name)

# Print with f-string (modern way)
print(f"Good luck, {name}!")

# Print on same line
print("Loading", end="... ")
print("Complete!")

# ============ OUTPUT ============
# ========================================
#         MY FIRST PYTHON PROGRAM
# ========================================
# Hello, World!
# Welcome to Software Development!
# Hello, Student
# Good luck, Student!
# Loading... Complete!</pre>
</div>

<h3>Today's Hands-On Exercise</h3>
<div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <b>Task 1: Environment Setup (30 minutes)</b>
    <p>Install and verify:</p>
    <ul>
        <li>Python 3.x</li>
        <li>VS Code with Python extension</li>
        <li>Create a folder: C:\Code\Week1 (or ~/Code/Week1)</li>
        <li>Test installation with hello.py</li>
    </ul>
    
    <b>Task 2: Personal Introduction Program (60 minutes)</b>
    <p>Create a program that introduces yourself:</p>
    <pre style="background: #f5f5f5; padding: 10px; margin: 10px 0;">
# Requirements:
# 1. Print your name, age, and favorite programming language
# 2. Print a fun fact about yourself
# 3. Print ASCII art (use print statements)
# 4. Use at least 5 different print() variations
# 5. Add comments explaining each section

# Example output:
# ==================================
#       PERSONAL PROFILE
# ==================================
# Name: Alex Johnson
# Age: 25
# Language: Python
# 
# Fun Fact: I love solving puzzles!
# 
#     /_/  _   _/ _   _   _/ 
#   /   \/ / / / / / / / /  
#  /____/_/_/_/_/_/_/_/_/   
#                           
# ==================================</pre>
    
    <b>Task 3: Compiler vs Interpreter Research (30 minutes)</b>
    <p>Research and list:</p>
    <ul>
        <li>3 compiled languages and their uses</li>
        <li>3 interpreted languages and their uses</li>
        <li>When would you choose compiled vs interpreted?</li>
    </ul>
</div>

<h3>Homework Assignment</h3>
<div style="background-color: #fff0e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <b>Build a "Software Development Quiz" Program</b>
    
    <b>Requirements:</b>
    <ul>
        <li>Create a 5-question quiz about today's topics</li>
        <li>Questions should cover:
            <ul>
                <li>Compilers vs Interpreters</li>
                <li>Programming languages</li>
                <li>Development process</li>
            </ul>
        </li>
        <li>Track user's score</li>
        <li>Display final results with percentage</li>
        <li>Add encouraging messages based on score</li>
    </ul>
    
    <b>Example Structure:</b>
    <pre style="background: #f5f5f5; padding: 10px;">
# ===== QUIZ STARTS HERE =====
print("Welcome to Software Development Quiz!")
print("Answer with True/False or A/B/C")

# Question 1
print(" 1. Python is a compiled language. (True/False)")
answer1 = input("Your answer: ").strip().lower()
if answer1 == "false":
    score += 1
    print("Correct!")
else:
    print("Incorrect! Python is interpreted.")

# ... more questions ...

# Final Results
print(f" Final Score: {score}/5 ({score/5*100}%)")
if score == 5:
    print("Excellent! You're a natural!")
elif score >= 3:
    print("Good job! Keep learning!")
else:
    print("Review the material and try again!")</pre>
</div>

<h3>Key Learning Points:</h3>
<ol>
    <li><b>Software Development:</b> The process of creating computer programs</li>
    <li><b>Compiler:</b> Translates entire program before execution</li>
    <li><b>Interpreter:</b> Translates and executes line by line</li>
    <li><b>Python Setup:</b> How to install and test Python</li>
    <li><b>Basic Output:</b> Using print() to display information</li>
    <li><b>Comments:</b> Adding explanations to code</li>
</ol>

<div style="background-color: #e8f5e8; padding: 15px; margin: 20px 0; border-radius: 5px;">
    <h3>üí° Pro Tips for Beginners:</h3>
    <ul>
        <li><b>Start Simple:</b> Don't try to learn everything at once</li>
        <li><b>Practice Daily:</b> Code something every day, even if small</li>
        <li><b>Read Error Messages:</b> They tell you exactly what's wrong</li>
        <li><b>Google is Your Friend:</b> Every developer searches for answers</li>
        <li><b>Save Your Work:</b> Use version control (we'll learn Git later)</li>
        <li><b>Join Communities:</b> Stack Overflow, Reddit, Discord groups</li>
    </ul>
</div>

<div style="background-color: #e3f2fd; padding: 15px; margin: 20px 0; border-radius: 5px;">
    <h3>üîó Resources for Further Learning:</h3>
    <ul>
        <li><a href="https://www.python.org/">Python Official Website</a></li>
        <li><a href="https://code.visualstudio.com/">VS Code Download</a></li>
        <li><a href="https://www.w3schools.com/python/">W3Schools Python Tutorial</a></li>
        <li><a href="https://automatetheboringstuff.com/">Automate the Boring Stuff with Python</a></li>
        <li><a href="https://realpython.com/">Real Python Tutorials</a></li>
    </ul>
</div>
`
},
            "1-2": {
    icon: "fa-box",
    title: "Variables and Data Types",
    html: `<h1>Week 1, Day 2: Variables and Data Types</h1>
<p>Today we learn how to store and organize information in computer programs using variables and data types.</p>

<div class="analogy-box">
    <b>Analogy: The Digital Storage Warehouse üì¶</b><br/>
    
    Variables: Labeled storage boxes<br/>
    Data Types: Different box sizes/shapes for different items<br/>
    Integers: Small boxes for whole numbers<br/>
    Strings: Long boxes for text<br/>
    Booleans: On/Off switches<br/>
    Assignment: Putting items in boxes<br/>
    Memory: The warehouse shelves
</div>

<h3>Understanding Variables</h3>
<div style="background-color: #f0f8ff; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h4>üìä Variable Declaration & Assignment</h4>
    
    <table style="width: 100%; border-collapse: collapse; margin: 15px 0;">
        <tr style="background: #4A90E2; color: white;">
            <th style="padding: 10px; text-align: left;">Concept</th>
            <th style="padding: 10px; text-align: left;">Python Example</th>
            <th style="padding: 10px; text-align: left;">Explanation</th>
            <th style="padding: 10px; text-align: left;">Memory View</th>
        </tr>
        <tr style="background: #f8f9fa;">
            <td style="padding: 8px; border: 1px solid #ddd;">Variable Creation</td>
            <td style="padding: 8px; border: 1px solid #ddd;"><code>age = 25</code></td>
            <td style="padding: 8px; border: 1px solid #ddd;">Create box "age", put 25 inside</td>
            <td style="padding: 8px; border: 1px solid #ddd;">age ‚Üí 25</td>
        </tr>
        <tr style="background: white;">
            <td style="padding: 8px; border: 1px solid #ddd;">Reassignment</td>
            <td style="padding: 8px; border: 1px solid #ddd;"><code>age = 26</code></td>
            <td style="padding: 8px; border: 1px solid #ddd;">Replace 25 with 26</td>
            <td style="padding: 8px; border: 1px solid #ddd;">age ‚Üí 26</td>
        </tr>
        <tr style="background: #f8f9fa;">
            <td style="padding: 8px; border: 1px solid #ddd;">Multiple Variables</td>
            <td style="padding: 8px; border: 1px solid #ddd;"><code>x, y = 10, 20</code></td>
            <td style="padding: 8px; border: 1px solid #ddd;">Create two boxes at once</td>
            <td style="padding: 8px; border: 1px solid #ddd;">x ‚Üí 10, y ‚Üí 20</td>
        </tr>
        <tr style="background: white;">
            <td style="padding: 8px; border: 1px solid #ddd;">Swap Values</td>
            <td style="padding: 8px; border: 1px solid #ddd;"><code>x, y = y, x</code></td>
            <td style="padding: 8px; border: 1px solid #ddd;">Exchange box contents</td>
            <td style="padding: 8px; border: 1px solid #ddd;">x ‚Üí 20, y ‚Üí 10</td>
        </tr>
    </table>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px;">
        <div style="background: #e8f5e8; padding: 15px; border-radius: 8px;">
            <h5>‚úÖ Good Variable Names</h5>
            <pre style="background: white; padding: 10px;">
# Descriptive and clear
user_age = 25
player_score = 100
is_logged_in = True
first_name = "John"
shipping_address = "123 Main St"

# Camel Case (common in Python)
hourlyWage = 15.50
maxConnections = 10</pre>
        </div>
        
        <div style="background: #ffebee; padding: 15px; border-radius: 8px;">
            <h5>‚ùå Bad Variable Names</h5>
            <pre style="background: white; padding: 10px;">
# Vague or confusing
a = 25              # What does 'a' mean?
temp = "John"       # Temporary what?
x1 = 100            # Meaningless
data = True         # Too generic

# Reserved words (will cause errors)
class = "Math"      # 'class' is reserved
if = 10             # 'if' is reserved
import = "module"   # 'import' is reserved</pre>
        </div>
    </div>
</div>

<h3>Python Data Types</h3>
<div style="background-color: #fff8e1; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h4>üß± Fundamental Data Types</h4>
    
    <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; margin: 20px 0;">
        <div style="background: #bbdefb; padding: 15px; border-radius: 8px; text-align: center;">
            <h5>üî¢ Integers</h5>
            <p>Whole numbers</p>
            <pre style="background: white; padding: 10px;">
age = 25
score = -100
population = 7_800_000_000
binary = 0b1010     # 10 in binary
hex_num = 0xFF      # 255 in hex</pre>
        </div>
        
        <div style="background: #c8e6c9; padding: 15px; border-radius: 8px; text-align: center;">
            <h5>üìù Strings</h5>
            <p>Text data</p>
            <pre style="background: white; padding: 10px;">
name = "Alice"
message = 'Hello'
multiline = """Line 1
Line 2"""
path = r"C:\\Users" # raw string
fstring = f"Hello {name}"</pre>
        </div>
        
        <div style="background: #f0f4c3; padding: 15px; border-radius: 8px; text-align: center;">
            <h5>‚öñÔ∏è Floats</h5>
            <p>Decimal numbers</p>
            <pre style="background: white; padding: 10px;">
price = 19.99
pi = 3.14159
scientific = 6.02e23
negative = -273.15
large = 1_000_000.50</pre>
        </div>
        
        <div style="background: #e1bee7; padding: 15px; border-radius: 8px; text-align: center;">
            <h5>‚úÖ‚ùå Booleans</h5>
            <p>True/False values</p>
            <pre style="background: white; padding: 10px;">
is_active = True
is_logged_in = False
has_permission = True
is_empty = False</pre>
        </div>
    </div>
    
    <h5>üîç Type Checking & Conversion</h5>
    <pre style="background: #f5f5f5; padding: 15px; margin: 15px 0;">
# =========== TYPE CHECKING ===========
age = 25
name = "Alice"
price = 19.99
is_student = True

print("Type checking:")
print(f"Type of age: {type(age)}")           # <class 'int'>
print(f"Type of name: {type(name)}")         # <class 'str'>
print(f"Type of price: {type(price)}")       # <class 'float'>
print(f"Type of is_student: {type(is_student)}") # <class 'bool'>

# =========== TYPE CONVERSION ===========
# String to Integer
num_str = "123"
num_int = int(num_str)           # 123
print(f"String '123' to int: {num_int}")

# Integer to String
age = 25
age_str = str(age)               # "25"
print(f"Integer 25 to string: '{age_str}'")

# Float to Integer
price = 19.99
price_int = int(price)           # 19 (truncates, not rounds!)
print(f"Float 19.99 to int: {price_int}")

# Boolean conversion
print(f"bool(0): {bool(0)}")     # False
print(f"bool(1): {bool(1)}")     # True
print(f"bool(''): {bool('')}")   # False
print(f"bool('hello'): {bool('hello')}") # True

# String to Float
weight = "68.5"
weight_float = float(weight)     # 68.5
print(f"String '68.5' to float: {weight_float}")</pre>
</div>

<h3>String Operations in Depth</h3>
<div style="background-color: #e8f5e8; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h4>üìù Working with Text Data</h4>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">
        <div>
            <h5>String Methods</h5>
            <pre style="background: white; padding: 15px;">
text = "  Hello World!  "

# Case manipulation
print(text.upper())          # "  HELLO WORLD!  "
print(text.lower())          # "  hello world!  "
print(text.title())          # "  Hello World!  "
print(text.capitalize())     # "  hello world!  "

# Whitespace handling
print(text.strip())          # "Hello World!"
print(text.lstrip())         # "Hello World!  "
print(text.rstrip())         # "  Hello World!"

# Searching
print(text.find("World"))    # 8
print(text.count("l"))       # 3
print("Hello" in text)       # True
print(text.startswith("  ")) # True
print(text.endswith("!  "))  # True

# Replacement
print(text.replace("World", "Python")) # "  Hello Python!  "</pre>
        </div>
        
        <div>
            <h5>String Formatting</h5>
            <pre style="background: white; padding: 15px;">
name = "Alice"
age = 25
score = 95.5

# Old style (%)
print("Name: %s, Age: %d" % (name, age))

# str.format() method
print("Name: {}, Age: {}".format(name, age))
print("Score: {:.1f}".format(score))
print("Name: {1}, Age: {0}".format(age, name))

# f-strings (Python 3.6+ - recommended!)
print(f"Name: {name}, Age: {age}")
print(f"Score: {score:.1f}")
print(f"Next year: {age + 1}")
print(f"Uppercase name: {name.upper()}")

# Multiline f-strings
message = f"""
Hello {name},
You are {age} years old.
Your score is {score:.1f}/100.
"""
print(message)</pre>
        </div>
    </div>
    
    <h5>String Indexing & Slicing</h5>
    <pre style="background: #f5f5f5; padding: 15px; margin: 15px 0;">
text = "Python Programming"

# Indexing (positive and negative)
print(text[0])      # 'P' (first character)
print(text[6])      # ' ' (space)
print(text[-1])     # 'g' (last character)
print(text[-3])     # 'i' (third from end)

# Slicing [start:end:step]
print(text[0:6])    # 'Python' (0 to 5)
print(text[7:])     # 'Programming' (7 to end)
print(text[:6])     # 'Python' (start to 5)
print(text[::2])    # 'Pto rgamn' (every 2nd char)
print(text[::-1])   # 'gnimmargorP nohtyP' (reverse)

# String length
print(len(text))    # 18 characters

# Iterating through string
for char in text[:6]:
    print(char, end=' ')  # P y t h o n</pre>
</div>

<h3>Today's Hands-On Exercise</h3>
<div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <b>Task 1: Player Profile System (45 minutes)</b>
    <p>Create a player profile with:</p>
    <pre style="background: #f5f5f5; padding: 10px;">
# Requirements:
# 1. Ask user for: name, age, favorite game, high score
# 2. Store each in appropriate variable types
# 3. Calculate years until retirement (assume 65)
# 4. Format and display profile card:
#    ============================
#    PLAYER PROFILE
#    ============================
#    Name: John Doe
#    Age: 25 (Retires in 40 years)
#    Favorite Game: Chess
#    High Score: 1,250
#    Status: ACTIVE
#    ============================

# Bonus:
# - Add health points (0-100)
# - Add experience level
# - Calculate level based on score
# - Add ASCII art border</pre>
    
    <b>Task 2: Data Type Converter (45 minutes)</b>
    <p>Create a program that:</p>
    <ul>
        <li>Converts between different data types</li>
        <li>Handles invalid conversions gracefully</li>
        <li>Includes: int ‚Üî str ‚Üî float ‚Üî bool</li>
        <li>Adds unit conversions (meters to feet, etc.)</li>
    </ul>
    
    <b>Task 3: String Manipulation Challenge (30 minutes)</b>
    <p>Given the string: "The quick brown fox jumps over the lazy dog"</p>
    <ul>
        <li>Count vowels and consonants</li>
        <li>Reverse the string</li>
        <li>Convert to pig latin</li>
        <li>Create acronym (TQBFJOTLD)</li>
        <li>Find longest word</li>
    </ul>
</div>

<h3>Homework Assignment</h3>
<div style="background-color: #fff0e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <b>Build a "Personal Finance Tracker"</b>
    
    <b>Requirements:</b>
    <ul>
        <li>Track income, expenses, savings</li>
        <li>Use appropriate data types for each value</li>
        <li>Calculate:
            <ul>
                <li>Monthly balance</li>
                <li>Savings rate (%)</li>
                <li>Projected yearly savings</li>
            </ul>
        </li>
        <li>Format currency properly ($1,234.56)</li>
        <li>Create summary report with:</li>
    </ul>
    
    <pre style="background: #f5f5f5; padding: 10px;">
================================
    FINANCIAL SNAPSHOT
================================
Income: $4,500.00
Expenses: $3,200.00
Savings: $1,300.00
Savings Rate: 28.9%
Monthly Projection: $1,300.00
Yearly Projection: $15,600.00
================================
CATEGORIES:
- Rent: $1,200.00
- Food: $600.00
- Transportation: $300.00
- Entertainment: $400.00
- Utilities: $250.00
- Other: $450.00
================================</pre>
    
    <b>Features to Implement:</b>
    <ul>
        <li>Input validation (positive numbers only)</li>
        <li>Category management</li>
        <li>Percentage calculations</li>
        <li>Formatted output with alignment</li>
        <li>Save/Load data (basic file handling)</li>
    </ul>
</div>

<h3>Key Learning Points:</h3>
<ol>
    <li><b>Variables:</b> Named containers for storing data</li>
    <li><b>Data Types:</b> Integer, Float, String, Boolean</li>
    <li><b>Type Conversion:</b> Converting between types with int(), str(), float(), bool()</li>
    <li><b>String Operations:</b> Methods, formatting, indexing, slicing</li>
    <li><b>Naming Conventions:</b> Descriptive, readable variable names</li>
    <li><b>Memory Concepts:</b> How variables store and reference data</li>
</ol>

<div style="background-color: #e8f5e8; padding: 15px; margin: 20px 0; border-radius: 5px;">
    <h3>üí° Best Practices for Variables & Data Types:</h3>
    <ul>
        <li><b>Choose Descriptive Names:</b> <code>user_age</code> not <code>a</code></li>
        <li><b>Use Appropriate Types:</b> Don't store numbers as strings</li>
        <li><b>Initialize Variables:</b> Give them starting values</li>
        <li><b>Check Types:</b> Use <code>type()</code> when unsure</li>
        <li><b>Handle Conversions:</b> Validate before converting</li>
        <li><b>Use f-strings:</b> Most readable string formatting</li>
        <li><b>Avoid Magic Numbers:</b> Use named constants</li>
    </ul>
    
    <pre style="background: white; padding: 10px; margin-top: 10px;">
# Good: Named constants
MAX_USERS = 100
TAX_RATE = 0.15
DEFAULT_NAME = "Guest"

# Bad: Magic numbers
if len(users) > 100:          # What's 100?
    charge = price * 0.15     # What's 0.15?</pre>
</div>

<div style="background-color: #e3f2fd; padding: 15px; margin: 20px 0; border-radius: 5px;">
    <h3>üß† Memory Challenge:</h3>
    <p>Predict the output of this code:</p>
    <pre style="background: white; padding: 10px;">
a = 10
b = a
a = 20
print(f"a: {a}, b: {b}")  # What will this print?

x = "Hello"
y = x
x = "World"
print(f"x: {x}, y: {y}")  # What about this?

# Bonus: What's the difference between these?
num1 = 100
num2 = 100
print(num1 is num2)       # True or False?

str1 = "hello"
str2 = "hello"
print(str1 is str2)       # True or False?</pre>
    <p><i>Hint: Think about value vs reference, and Python's memory optimization for small integers/strings!</i></p>
</div>
`
},
            "1-3": {
    icon: "fa-calculator",
    title: "Mathematical & Logical Operations",
    html: `<h1>Week 1, Day 3: Mathematical & Logical Operations</h1>
<p>Today we master mathematical operations, learn operator precedence, and build complex logical expressions.</p>

<div class="analogy-box">
    <b>Analogy: The Math Chef's Kitchen üßÆ</b><br/>
    
    Variables: Ingredients in bowls<br/>
    Operators: Cooking tools (mixer, oven, blender)<br/>
    Expressions: Recipe steps<br/>
    Precedence: Order of operations (chop before mixing)<br/>
    Results: The finished dish<br/>
    Debugging: Taste testing and adjusting
</div>

<h3>Operator Precedence (PEMDAS in Python)</h3>
<div style="background-color: #f0f8ff; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h4>üìä Python Operator Precedence Table</h4>
    
    <table style="width: 100%; border-collapse: collapse; margin: 15px 0;">
        <tr style="background: #4A90E2; color: white;">
            <th style="padding: 10px; text-align: left;">Precedence</th>
            <th style="padding: 10px; text-align: left;">Operator</th>
            <th style="padding: 10px; text-align: left;">Description</th>
            <th style="padding: 10px; text-align: left;">Example</th>
        </tr>
        <tr style="background: #f8f9fa;">
            <td style="padding: 8px; border: 1px solid #ddd;">Highest</td>
            <td style="padding: 8px; border: 1px solid #ddd;">()</td>
            <td style="padding: 8px; border: 1px solid #ddd;">Parentheses</td>
            <td style="padding: 8px; border: 1px solid #ddd;">(2 + 3) * 4</td>
        </tr>
        <tr style="background: white;">
            <td style="padding: 8px; border: 1px solid #ddd;">2</td>
            <td style="padding: 8px; border: 1px solid #ddd;">**</td>
            <td style="padding: 8px; border: 1px solid #ddd;">Exponentiation</td>
            <td style="padding: 8px; border: 1px solid #ddd;">2 ** 3 = 8</td>
        </tr>
        <tr style="background: #f8f9fa;">
            <td style="padding: 8px; border: 1px solid #ddd;">3</td>
            <td style="padding: 8px; border: 1px solid #ddd;">+x, -x</td>
            <td style="padding: 8px; border: 1px solid #ddd;">Unary plus/minus</td>
            <td style="padding: 8px; border: 1px solid #ddd;">-5, +3</td>
        </tr>
        <tr style="background: white;">
            <td style="padding: 8px; border: 1px solid #ddd;">4</td>
            <td style="padding: 8px; border: 1px solid #ddd;">*, /, //, %</td>
            <td style="padding: 8px; border: 1px solid #ddd;">Multiplication/Division</td>
            <td style="padding: 8px; border: 1px solid #ddd;">6 * 3 = 18</td>
        </tr>
        <tr style="background: #f8f9fa;">
            <td style="padding: 8px; border: 1px solid #ddd;">5</td>
            <td style="padding: 8px; border: 1px solid #ddd;">+, -</td>
            <td style="padding: 8px; border: 1px solid #ddd;">Addition/Subtraction</td>
            <td style="padding: 8px; border: 1px solid #ddd;">5 + 3 = 8</td>
        </tr>
        <tr style="background: white;">
            <td style="padding: 8px; border: 1px solid #ddd;">6</td>
            <td style="padding: 8px; border: 1px solid #ddd;"><, <=, >, >=</td>
            <td style="padding: 8px; border: 1px solid #ddd;">Comparison</td>
            <td style="padding: 8px; border: 1px solid #ddd;">5 > 3 = True</td>
        </tr>
        <tr style="background: #f8f9fa;">
            <td style="padding: 8px; border: 1px solid #ddd;">7</td>
            <td style="padding: 8px; border: 1px solid #ddd;">==, !=</td>
            <td style="padding: 8px; border: 1px solid #ddd;">Equality</td>
            <td style="padding: 8px; border: 1px solid #ddd;">5 == 5 = True</td>
        </tr>
        <tr style="background: white;">
            <td style="padding: 8px; border: 1px solid #ddd;">8</td>
            <td style="padding: 8px; border: 1px solid #ddd;">not</td>
            <td style="padding: 8px; border: 1px solid #ddd;">Boolean NOT</td>
            <td style="padding: 8px; border: 1px solid #ddd;">not True = False</td>
        </tr>
        <tr style="background: #f8f9fa;">
            <td style="padding: 8px; border: 1px solid #ddd;">9</td>
            <td style="padding: 8px; border: 1px solid #ddd;">and</td>
            <td style="padding: 8px; border: 1px solid #ddd;">Boolean AND</td>
            <td style="padding: 8px; border: 1px solid #ddd;">True and False = False</td>
        </tr>
        <tr style="background: white;">
            <td style="padding: 8px; border: 1px solid #ddd;">Lowest</td>
            <td style="padding: 8px; border: 1px solid #ddd;">or</td>
            <td style="padding: 8px; border: 1px solid #ddd;">Boolean OR</td>
            <td style="padding: 8px; border: 1px solid #ddd;">True or False = True</td>
        </tr>
    </table>
    
    
    <div style="margin-top: 20px; padding: 15px; background: #fff3cd; border-radius: 5px;">
        <h5>üéØ Remember: PEMDAS with Python Twist</h5>
        <p><b>P</b>arentheses ‚Üí <b>E</b>xponents ‚Üí <b>M</b>ultiplication/<b>D</b>ivision ‚Üí <b>A</b>ddition/<b>S</b>ubtraction</p>
        <p>Multiplication/Division have same precedence (left to right)<br>
        Addition/Subtraction have same precedence (left to right)</p>
    </div>
</div>

<h3>Complex Mathematical Expressions</h3>
<b>Practice with Operator Precedence:</b>
<div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
<pre style='background-color: #f1f1f1; border-radius: 5px;  padding: 10px; margin: 8px;'>

                # =========== PRECEDENCE EXAMPLES ===========
    print("Example 1: 2 + 3 * 4 =", 2 + 3 * 4)                                                   #14 (not 20!)
    print("Example 2: (2 + 3) * 4 =", (2 + 3) * 4)                                               #20

    print("Example 3: 10 - 3 ** 2 =", 10 - 3 ** 2)                                               #1 (10 - 9)
    print("Example 4: (10 - 3) ** 2 =", (10 - 3) ** 2)                                           #49 (7^2)

    print("Example 5: 12 / 3 * 2 =", 12 / 3 * 2)                                                 #8.0 (left to right)
    print("Example 6: 12 / (3 * 2) =", 12 / (3 * 2))                                             #2.0

    print("Example 7: 5 + 4 * 3 / 2 =", 5 + 4 * 3 / 2)                                           #11.0

                # Step-by-step: 4*3=12 ‚Üí 12/2=6 ‚Üí 5+6=11
</pre>
<pre style='background-color: #36454f; color: #fff; border-radius: 5px;  padding: 10px; margin: 8px;'>

            # =========== COMPLEX REAL-WORLD EXAMPLES ===========
            # Calculate area of a circle
            radius = 5
            pi = 3.14159
            area = pi * radius ** 2
            print(f"Area of circle with radius {radius}: {area:.2f}")

            # Calculate compound interest
            principal = 1000
            rate = 0.05             # 5%
            time = 3                # years
            amount = principal * (1 + rate) ** time
            print(f"Compound interest after {time} years: \\\${amount:.2f}")

            # Convert Fahrenheit to Celsius
            fahrenheit = 98.6
            celsius = (fahrenheit - 32) * 5 / 9
            print(f"{fahrenheit}¬∞F = {celsius:.1f}¬∞C")

            # Calculate BMI (Body Mass Index)
            weight_kg = 70
            height_m = 1.75
            bmi = weight_kg / (height_m ** 2)
            print(f"BMI: {bmi:.1f}")
</pre>
<pre style='background-color: #f1f1f1; border-radius: 5px;  padding: 10px; margin: 8px;'>

                # =========== USING MATH MODULE ===========
                import math

                # Quadratic formula: x = [-b ¬± sqrt(b¬≤ - 4ac)] / 2a
                a = 1
                b = -5
                c = 6

                discriminant = b ** 2 - 4 * a * c
                if discriminant >= 0:
                    x1 = (-b + math.sqrt(discriminant)) / (2 * a)
                    x2 = (-b - math.sqrt(discriminant)) / (2 * a)
                    print(f"Quadratic roots: x1 = {x1}, x2 = {x2}")
                else:
                    print("No real roots")

                # Trigonometric calculations
                angle_degrees = 45
                angle_radians = math.radians(angle_degrees)
                print(f"sin({angle_degrees}¬∞) = {math.sin(angle_radians):.3f}")
                print(f"cos({angle_degrees}¬∞) = {math.cos(angle_radians):.3f}")
                print(f"tan({angle_degrees}¬∞) = {math.tan(angle_radians):.3f}")
</pre>

    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 15px;">

<pre style='background-color: #36454f; color: #fff; border-radius: 5px;  padding: 10px; margin: 8px;'>

            <h3>üîÅ ROUNDING AND PRECISION </h3>
            price = 19.987654321

            print("Original:", price)
            print("Round to 2 decimals:", round(price, 2))                                   # 19.99
            print("Round to integer:", round(price))                                         # 20
            print("Floor (round down):", math.floor(price))                                  # 19
            print("Ceil (round up):", math.ceil(price))                                      # 20
            print("Truncate:", math.trunc(price))                                            # 19

            # Formatting with f-strings
            print(f"Price: \\\${price:.2f}")                                                  # $19.99
            print(f"Price: \\\${price:.0f}")                                                  # $20
            print(f"Percentage: {price:.1f}%")                                                # 20.0%
</pre>
<pre style='background-color: #36454f; color: #fff; border-radius: 5px;  padding: 10px; margin: 8px;'>

            <h3>üí™üèΩ WORKING WITH LARGE NUMBERS </h3>
            # Scientific notation
            avogadro = 6.02214076e23  # 6.02214076 √ó 10^23
            print(f"Avogadro's number: {avogadro:.2e}")

            # Underscores for readability (Python 3.6+)
            million = 1_000_000
            large_number = 123_456_789.123_456
            print(f"One million: {million}")
            print(f"Large number: {large_number:,.2f}")

</pre>
</div>
<pre style='background-color: #f1f1f1; border-radius: 5px;  padding: 10px; margin: 8px;'>

                                # =========== MODULO OPERATOR USES ===========
                                # Check if number is even or odd
                                number = 7
                                if number % 2 == 0:
                                    print(f"{number} is even")
                                else:
                                    print(f"{number} is odd")

                                # Convert seconds to hours, minutes, seconds
                                total_seconds = 3665
                                hours = total_seconds                           // 3600
                                minutes = (total_seconds % 3600)                // 60
                                seconds = total_seconds % 60
                                print(f"{total_seconds} seconds = {hours}h {minutes}m {seconds}s")

                                # Check divisibility
                                for i in range(1, 21):
                                    if i % 3 == 0 and i % 5 == 0:
                                        print(f"{i}: FizzBuzz")
                                    elif i % 3 == 0:
                                        print(f"{i}: Fizz")
                                    elif i % 5 == 0:
                                        print(f"{i}: Buzz")
                                    else:
                                        print(i)
</pre>
</div>

<h3>Logical Operations in Depth</h3>
<b>Mastering Boolean Logic:</b>
<div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">

    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 15px;">

<pre style='background-color: #f1f1f1; border-radius: 5px;  padding: 10px; margin: 8px;'>

             <h3> BOOLEAN BASICS </h3>
            # All Python values have truthiness
            true_values = [True, 1, 3.14, "hello", [1, 2], {"key": "value"}]
            false_values = [False, 0, 0.0, "", [], {}, None]

            print("Truthy values:")
            for val in true_values:
                print(f" bool({repr(val)}) = {bool(val)}")

            print("Falsy values:")
            for val in false_values:
                print(f" bool({repr(val)}) = {bool(val)}")

                </pre>
<pre style='background-color: #f1f1f1; border-radius: 5px;  padding: 10px; margin: 8px;'>

            <h3> COMPLEX LOGICAL EXPRESSIONS </h3>
            age = 25
            has_license = True
            has_car = False
            has_money = True
            is_weekend = False

            # Driving eligibility
            can_drive = (age >= 18) and has_license
            print(f"Can drive: {can_drive}")

            # Can go to movies
            can_watch_movie = (age >= 13) and (has_money or (is_weekend and not has_money))
            print(f"Can watch movie: {can_watch_movie}")

            # Compound conditions
            if (age >= 18 and has_license) or (age >= 21 and has_car):
                print("Can rent a car")
            else:
                print("Cannot rent a car")
</pre>
</div>
<pre style='background-color: #36454f; color: #fff; border-radius: 5px;  padding: 10px; margin: 8px;'>

                    # =========== SHORT-CIRCUIT EVALUATION ===========
                    # Python stops evaluating as soon as result is known

                    def expensive_operation():
                        print("Running expensive operation...")
                        return True

                    # With short-circuit, expensive_operation() never runs
                    result = False and expensive_operation()                # False
                    print(f"Result: {result}")

                    # This one runs it
                    result = True and expensive_operation()                 # Runs and prints
                    print(f"Result: {result}")

                    # Practical use: avoid errors
                    name = ""
                    # This is safe because of short-circuit
                    if name and name[0].isupper():
                        print("Name starts with uppercase")
                    else:
                        print("Name is empty or doesn't start with uppercase")

                        
                    # =========== DE MORGAN'S LAWS ===========
                    # not (A and B) == (not A) or (not B)
                    # not (A or B) == (not A) and (not B)

                    A = True
                    B = False

                    print("De Morgan's Laws:")
                    print(f"not ({A} and {B}) = {not (A and B)}")
                    print(f"(not {A}) or (not {B}) = {(not A) or (not B)}")
                    print("Are they equal?", not (A and B) == ((not A) or (not B)))

                    print(f"not ({A} or {B}) = {not (A or B)}")
                    print(f"(not {A}) and (not {B}) = {(not A) and (not B)}")
                    print("Are they equal?", not (A or B) == ((not A) and (not B)))
</pre>

    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 15px;">

<pre style='background-color: #f1f1f1; border-radius: 5px;  padding: 10px; margin: 8px;'>

                    <h3> üëçüèΩüëéüèΩ BOOLEAN ALGEBRA PRACTICE </h3>
            x = 10
            y = 5
            z = 7

            # Expression 1
            expr1 = (x > y) and (y < z) or (x == z)
            print(f"Expression 1: ({x} > {y}) and ({y} < {z}) or ({x} == {z})")
            print(f"Result: {expr1}")

            # Expression 2
            expr2 = not (x <= y) and (y != z)
            print(f"Expression 2: not ({x} <= {y}) and ({y} != {z})")
            print(f"Result: {expr2}")

            # Expression 3
            expr3 = (x > y) and not (y > z) or (z == x)
            print(f"Expression 3: ({x} > {y}) and not ({y} > {z}) or ({z} == {x})")
            print(f"Result: {expr3}")
</pre>
<pre style='background-color: #f1f1f1; border-radius: 5px;  padding: 10px; margin: 8px;'>

                    <h3>üåç REAL-WORLD LOGICAL PROBLEMS </h3>
            # Password validation
            password = "SecurePass123"
            has_upper = any(c.isupper() for c in password)
            has_lower = any(c.islower() for c in password)
            has_digit = any(c.isdigit() for c in password)
            has_special = any(not c.isalnum() for c in password)

            is_valid = (len(password) >= 8) and has_upper and has_lower and has_digit
            print(f"Password '{password}' is valid: {is_valid}")

            # Age group classification
            age = 35
            is_child = age < 13
            is_teen = 13 <= age < 20
            is_adult = 20 <= age < 65
            is_senior = age >= 65

            print(f" Age {age}:")
            print(f" Child: {is_child}")
            print(f" Teen: {is_teen}")
            print(f" Adult: {is_adult}")
            print(f" Senior: {is_senior}")

            # Shipping eligibility
            order_amount = 150
            is_member = True
            has_coupon = False

            free_shipping = (order_amount >= 100) or (is_member and order_amount >= 50)
            print(f"Free shipping eligible: {free_shipping}")
</pre>
</div>
</div>
<h3>Today's Hands-On Exercise</h3>
<div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <b>Task 1: Scientific Calculator (60 minutes)</b>
    <p>Create a scientific calculator with:</p>
    <ul>
        <li>Basic operations (+, -, *, /)</li>
        <li>Advanced operations (^, ‚àö, %, !)</li>
        <li>Trigonometric functions (sin, cos, tan)</li>
        <li>Logarithmic functions (log, ln)</li>
        <li>Memory functions (M+, M-, MR, MC)</li>
        <li>Parentheses support for complex expressions</li>
    </ul>
    
    <b>Task 2: Loan Calculator (45 minutes)</b>
    <p>Create a loan calculator that:</p>
    <ul>
        <li>Calculates monthly payments</li>
        <li>Shows total interest paid</li>
        <li>Creates amortization schedule</li>
        <li>Compares different loan terms</li>
        <li>Handles compound interest calculations</li>
    </ul>
    
    <b>Task 3: Logic Puzzle Solver (45 minutes)</b>
    <p>Create a program that solves logic puzzles:</p>
    <ul>
        <li>Truth table generator for any logical expression</li>
        <li>Check if two expressions are logically equivalent</li>
        <li>Simplify boolean expressions</li>
        <li>Solve basic logic puzzles (who owns the fish?)</li>
    </ul>
</div>

<h3>Homework Assignment</h3>
<div style="background-color: #fff0e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <b>Build a "Financial Calculator Suite"</b>
    
    <b>Requirements:</b>
    <ul>
        <li><b>Mortgage Calculator:</b> Calculate monthly payments with taxes and insurance</li>
        <li><b>Investment Calculator:</b> Future value with compound interest</li>
        <li><b>Retirement Planner:</b> How much to save monthly for retirement goal</li>
        <li><b>Debt Payoff Calculator:</b> Snowball vs avalanche methods</li>
        <li><b>Currency Converter:</b> With live exchange rates (use fixed rates)</li>
    </ul>
    
    <b>Formulas to Implement:</b>
    <pre style="background: #f5f5f5; padding: 10px;">
1. Monthly Mortgage Payment:
   M = P[r(1+r)^n]/[(1+r)^n-1]
   
2. Compound Interest:
   A = P(1 + r/n)^(nt)
   
3. Future Value of Annuity:
   FV = PMT * [((1 + r)^n - 1) / r]
   
4. Loan Payoff Time:
   n = -log(1 - (r * P) / PMT) / log(1 + r)
    </pre>
    
    <b>Features:</b>
    <ul>
        <li>Graphical output using ASCII or simple text graphs</li>
        <li>Save calculations to file</li>
        <li>Compare multiple scenarios</li>
        <li>Input validation and error handling</li>
        <li>Unit conversion (years to months, etc.)</li>
    </ul>
</div>

<h3>Key Learning Points:</h3>
<ol>
    <li><b>Operator Precedence:</b> Understanding PEMDAS in Python</li>
    <li><b>Complex Expressions:</b> Building and evaluating multi-operation expressions</li>
    <li><b>Boolean Logic:</b> Mastering and, or, not operations</li>
    <li><b>Short-Circuit Evaluation:</b> How Python optimizes logical expressions</li>
    <li><b>Real-world Math:</b> Applying operations to practical problems</li>
    <li><b>Error Prevention:</b> Using parentheses to ensure correct evaluation</li>
</ol>

<div style="background-color: #e8f5e8; padding: 15px; margin: 20px 0; border-radius: 5px;">
    <h3>üí° Math & Logic Best Practices:</h3>
    <ul>
        <li><b>Use Parentheses Liberally:</b> Makes intent clear, prevents errors</li>
        <li><b>Break Complex Expressions:</b> Use intermediate variables for readability</li>
        <li><b>Test Edge Cases:</b> What happens with zero, negative numbers, large values?</li>
        <li><b>Document Formulas:</b> Comment complex mathematical operations</li>
        <li><b>Check Division by Zero:</b> Always validate before division operations</li>
        <li><b>Use Math Module:</b> Don't reinvent trigonometric/logarithmic functions</li>
        <li><b>Consider Precision:</b> Floating-point math can have rounding errors</li>
    </ul>
</div>
`
},
            "1-4": {
    icon: "fa-exchange-alt",
    title: "Basic Input/Output in Python",
    html: `<h1>Week 1, Day 4: Basic Input/Output in Python</h1>
<p>Today we learn how to communicate with users through input and output operations, making our programs interactive.</p>

<div class="analogy-box">
    <b>Analogy: Restaurant Conversation üçΩÔ∏è</b><br/>
    
    Program: Restaurant<br/>
    Output (print): Waiter speaking to customer<br/>
    Input (input): Customer placing order<br/>
    Variables: Kitchen tickets<br/>
    Processing: Cooking the food<br/>
    Return: Serving the meal
</div>

<h3>Output Operations: Printing to Screen</h3>
<div style="background-color: #f0f8ff; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h4>üìä print() Function Variations</h4>
    
    <table style="width: 100%; border-collapse: collapse; margin: 15px 0;">
        <tr style="background: #4A90E2; color: white;">
            <th style="padding: 10px; text-align: left;">Feature</th>
            <th style="padding: 10px; text-align: left;">Syntax</th>
            <th style="padding: 10px; text-align: left;">Output</th>
            <th style="padding: 10px; text-align: left;">Use Case</th>
        </tr>
        <tr style="background: #f8f9fa;">
            <td style="padding: 8px; border: 1px solid #ddd;">Basic Print</td>
            <td style="padding: 8px; border: 1px solid #ddd;"><code>print("Hello")</code></td>
            <td style="padding: 8px; border: 1px solid #ddd;">Hello</td>
            <td style="padding: 8px; border: 1px solid #ddd;">Simple messages</td>
        </tr>
        <tr style="background: white;">
            <td style="padding: 8px; border: 1px solid #ddd;">Multiple Items</td>
            <td style="padding: 8px; border: 1px solid #ddd;"><code>print("Age:", 25)</code></td>
            <td style="padding: 8px; border: 1px solid #ddd;">Age: 25</td>
            <td style="padding: 8px; border: 1px solid #ddd;">Combining text & variables</td>
        </tr>
        <tr style="background: #f8f9fa;">
            <td style="padding: 8px; border: 1px solid #ddd;">Separator</td>
            <td style="padding: 8px; border: 1px solid #ddd;"><code>print(1,2,3, sep="-")</code></td>
            <td style="padding: 8px; border: 1px solid #ddd;">1-2-3</td>
            <td style="padding: 8px; border: 1px solid #ddd;">Custom separators</td>
        </tr>
        <tr style="background: white;">
            <td style="padding: 8px; border: 1px solid #ddd;">End Character</td>
            <td style="padding: 8px; border: 1px solid #ddd;"><code>print("Hello", end="! ")</code></td>
            <td style="padding: 8px; border: 1px solid #ddd;">Hello! (no newline)</td>
            <td style="padding: 8px; border: 1px solid #ddd;">Same line output</td>
        </tr>
        <tr style="background: #f8f9fa;">
            <td style="padding: 8px; border: 1px solid #ddd;">File Output</td>
            <td style="padding: 8px; border: 1px solid #ddd;"><code>print("data", file=f)</code></td>
            <td style="padding: 8px; border: 1px solid #ddd;">Writes to file</td>
            <td style="padding: 8px; border: 1px solid #ddd;">Logging, saving data</td>
        </tr>
    </table>
    
    <div style="margin-top: 20px;">
        <h5>üé® Advanced Output Formatting</h5>
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
            <pre style="background: white; padding: 15px; border-radius: 5px;">
# Text Alignment
name = "Alice"
score = 95.5

# Left aligned (default)
print(f"{name:<10} {score:<10}")
# Alice      95.5      

# Right aligned
print(f"{name:>10} {score:>10}")
#      Alice       95.5

# Center aligned
print(f"{name:^10} {score:^10}")
#   Alice     95.5   

# With formatting
print(f"{name:^10} \${score:>8.2f}")
#   Alice     $  95.50</pre>
            
            <pre style="background: white; padding: 15px; border-radius: 5px;">
# Multi-line and special characters
print("=" * 40)           # Line of 40 equals signs
print("\tIndented text")  # Tab character
print("Line 1\nLine 2")   # Newline character
print("Path: C:\\Users")   # Escaped backslash
print("Quotes: \"Hello\"") # Escaped quotes

# Progress bar example
import time
for i in range(101):
    print(f"\\rProgress: [{'>'*(i//2)}{' '*(50-i//2)}] {i}%", end="")
    time.sleep(0.05)
print()  # Final newline</pre>
        </div>
    </div>
</div>

<h3>Input Operations: Getting User Data</h3>
<div style="background-color: #fff8e1; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h4>üìù input() Function Mastery</h4>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">
        <div>
            <h5>Basic Input Patterns</h5>
            <pre style="background: white; padding: 15px;">
# =========== BASIC INPUT ===========
# Simple text input
name = input("Enter your name: ")
print(f"Hello, {name}!")

# Numerical input (requires conversion)
age = input("Enter your age: ")
age_int = int(age)  # Convert to integer
print(f"Next year you'll be {age_int + 1}")

# Float input
price = float(input("Enter price: $"))
print(f"Price with tax: \${price * 1.15:.2f}")

# Multiple inputs on one line
values = input("Enter three numbers (space separated): ")
a, b, c = map(int, values.split())
print(f"Sum: {a + b + c}")

# Input with validation
while True:
    try:
        num = int(input("Enter a number: "))
        break
    except ValueError:
        print("Invalid input! Please enter a number.")</pre>
        </div>
        
        <div>
            <h5>Advanced Input Techniques</h5>
            <pre style="background: white; padding: 15px;">
# =========== ADVANCED INPUT ===========
# Password input (hidden)
import getpass
password = getpass.getpass("Enter password: ")
print("Password accepted!" if password else "No password entered")

# Menu selection
print(" === MENU ===")
print("1. Add item")
print("2. Remove item")
print("3. View items")
choice = input("Select option (1-3): ")

if choice == "1":
    print("Adding item...")
elif choice == "2":
    print("Removing item...")
elif choice == "3":
    print("Viewing items...")
else:
    print("Invalid choice!")

# Yes/No confirmation
response = input("Continue? (y/n): ").lower()
if response in ['y', 'yes']:
    print("Continuing...")
elif response in ['n', 'no']:
    print("Exiting...")
else:
    print("Please answer yes or no")</pre>
        </div>
    </div>
    
    <h5>üîß Input Validation Patterns</h5>
    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin: 20px 0;">
        <div style="background: #e8f5e8; padding: 15px; border-radius: 8px;">
            <h6>Range Validation</h6>
            <pre style="background: white; padding: 10px; font-size: 12px;">
while True:
    age = int(input("Age (0-120): "))
    if 0 <= age <= 120:
        break
    print("Invalid age!")</pre>
        </div>
        
        <div style="background: #e3f2fd; padding: 15px; border-radius: 8px;">
            <h6>Type Validation</h6>
            <pre style="background: white; padding: 10px; font-size: 12px;">
def get_number(prompt):
    while True:
        try:
            return float(input(prompt))
        except ValueError:
            print("Please enter a number!")

price = get_number("Price: $")</pre>
        </div>
        
        <div style="background: #f3e5f5; padding: 15px; border-radius: 8px;">
            <h6>Pattern Validation</h6>
            <pre style="background: white; padding: 10px; font-size: 12px;">
import re
while True:
    email = input("Email: ")
    pattern = r'^[\\w\\.-]+@[\\w\\.-]+\\.\\w+$'
    if re.match(pattern, email):
        break
    print("Invalid email!")</pre>
        </div>
    </div>
</div>

<h3>Complete I/O Examples</h3>
<div style="background-color: #e8f5e8; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h4>üìã Practical Application Examples</h4>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">
        <div>
            <h5>Example 1: Registration System</h5>
            <pre style="background: white; padding: 15px;">
# =========== USER REGISTRATION ===========
print("=" * 40)
print("        USER REGISTRATION")
print("=" * 40)

# Collect user information
username = input("Choose username: ")
password = input("Choose password: ")
email = input("Enter email: ")
age = int(input("Enter age: "))

# Validate inputs
if len(password) < 8:
    print("Password too short!")
elif age < 13:
    print("Must be 13 or older!")
else:
    # Display summary
    print(" " + "=" * 40)
    print("REGISTRATION SUCCESSFUL!")
    print("=" * 40)
    print(f"Username: {username}")
    print(f"Email: {email}")
    print(f"Age: {age}")
    print("=" * 40)
    
    # Save to file
    with open("users.txt", "a") as f:
        f.write(f"{username},{email},{age}")
    print("Profile saved to users.txt")</pre>
        </div>
        
        <div>
            <h5>Example 2: Shopping Cart</h5>
            <pre style="background: white; padding: 15px;">
# =========== SHOPPING CART ===========
cart = []
total = 0.0

print("üõí SHOPPING CART SYSTEM")
print("-" * 30)

while True:
    print(" Options:")
    print("1. Add item")
    print("2. View cart")
    print("3. Checkout")
    print("4. Exit")
    
    choice = input("Select option: ")
    
    if choice == "1":
        item = input("Item name: ")
        price = float(input("Price: $"))
        cart.append((item, price))
        total += price
        print(f"Added {item} for \${price:.2f}")
        
    elif choice == "2":
        print(" " + "-" * 30)
        print("YOUR CART:")
        for i, (item, price) in enumerate(cart, 1):
            print(f"{i}. {item:20} \${price:6.2f}")
        print("-" * 30)
        print(f"TOTAL: \${total:.2f}")
        
    elif choice == "3":
        print(f" Total: \${total:.2f}")
        payment = float(input("Enter payment: $"))
        change = payment - total
        if change >= 0:
            print(f"Change: \${change:.2f}")
            print("Thank you for shopping!")
            break
        else:
            print("Insufficient payment!")
            
    elif choice == "4":
        print("Goodbye!")
        break
        
    else:
        print("Invalid option!")</pre>
        </div>
    </div>
</div>

<h3>Today's Hands-On Exercise</h3>
<div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <b>Task 1: Interactive Quiz Game (60 minutes)</b>
    <p>Create a quiz game with:</p>
    <ul>
        <li>10 multiple-choice questions</li>
        <li>Score tracking</li>
        <li>Timer for each question</li>
        <li>Difficulty levels</li>
        <li>Save high scores to file</li>
        <li>Progress bar showing completion</li>
    </ul>
    
    <b>Task 2: Contact Management System (60 minutes)</b>
    <p>Create a system that:</p>
    <ul>
        <li>Adds new contacts (name, phone, email)</li>
        <li>Views all contacts</li>
        <li>Searches contacts by name</li>
        <li>Updates contact information</li>
        <li>Deletes contacts</li>
        <li>Saves contacts to CSV file</li>
    </ul>
    
    <b>Task 3: ATM Simulator (60 minutes)</b>
    <p>Simulate an ATM with:</p>
    <ul>
        <li>PIN verification (3 attempts)</li>
        <li>Balance inquiry</li>
        <li>Cash withdrawal (with limits)</li>
        <li>Deposit</li>
        <li>Mini-statement (last 5 transactions)</li>
        <li>Change PIN</li>
    </ul>
</div>

<h3>Homework Assignment</h3>
<div style="background-color: #fff0e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <b>Build a "Restaurant Ordering System"</b>
    
    <b>Requirements:</b>
    <ul>
        <li><b>Menu Display:</b> Show food items with prices</li>
        <li><b>Order Taking:</b> Select items and quantities</li>
        <li><b>Calculations:</b> Subtotal, tax (15%), total</li>
        <li><b>Special Requests:</b> Add notes to orders</li>
        <li><b>Receipt Generation:</b> Printable receipt format</li>
        <li><b>Order History:</b> Save orders to file</li>
    </ul>
    
    <b>Sample Menu:</b>
    <pre style="background: #f5f5f5; padding: 10px;">
================================
        RESTAURANT MENU
================================
APPETIZERS
1. Garlic Bread ........ $4.99
2. Soup of the Day ..... $5.99
3. Caesar Salad ........ $7.99

MAIN COURSES
4. Spaghetti Bolognese . $12.99
5. Grilled Salmon ...... $16.99
6. Vegetable Stir-fry .. $11.99

DESSERTS
7. Chocolate Cake ...... $6.99
8. Ice Cream ........... $4.99
9. Fruit Salad ......... $5.99

DRINKS
10. Coffee ............ $2.99
11. Juice ............. $3.99
12. Soda .............. $1.99
================================</pre>
    
    <b>Features to Implement:</b>
    <ul>
        <li>Table number assignment</li>
        <li>Wait time estimation</li>
        <li>Split bill functionality</li>
        <li>Discount codes</li>
        <li>Kitchen ticket printing simulation</li>
        <li>Daily sales report</li>
    </ul>
</div>

<h3>Key Learning Points:</h3>
<ol>
    <li><b>print() Function:</b> Output formatting with separators and end characters</li>
    <li><b>input() Function:</b> Getting user input and type conversion</li>
    <li><b>Input Validation:</b> Ensuring correct and safe user input</li>
    <li><b>Interactive Programs:</b> Creating programs that communicate with users</li>
    <li><b>File I/O Basics:</b> Saving and loading data from files</li>
    <li><b>Error Handling:</b> Preventing crashes from invalid input</li>
</ol>

<div style="background-color: #e8f5e8; padding: 15px; margin: 20px 0; border-radius: 5px;">
    <h3>üí° I/O Best Practices:</h3>
    <ul>
        <li><b>Always Validate Input:</b> Never trust user input blindly</li>
        <li><b>Clear Prompts:</b> Tell users exactly what you expect</li>
        <li><b>Handle Errors Gracefully:</b> Use try-except for conversions</li>
        <li><b>Format Output Readably:</b> Use alignment and spacing</li>
        <li><b>Provide Feedback:</b> Let users know their input was received</li>
        <li><b>Use Constants:</b> Store messages and formats as constants</li>
        <li><b>Test Edge Cases:</b> Empty input, very long input, special characters</li>
    </ul>
    
    <pre style="background: white; padding: 10px; margin-top: 10px;">
# Good practice example
PROMPT = "Enter your age (0-120): "
ERROR_MSG = "Invalid age! Please enter a number between 0 and 120."

def get_age():
    while True:
        try:
            age = int(input(PROMPT))
            if 0 <= age <= 120:
                return age
            print(ERROR_MSG)
        except ValueError:
            print(ERROR_MSG)

# Usage
user_age = get_age()
print(f"Age registered: {user_age}")</pre>
</div>

<div style="background-color: #e3f2fd; padding: 15px; margin: 20px 0; border-radius: 5px;">
    <h3>üéØ Week 1 Review Challenge:</h3>
    <p>Create a "Personal Assistant" program that combines everything learned this week:</p>
    <ul>
        <li>Variables to store user data</li>
        <li>Mathematical calculations (BMI, age in days, etc.)</li>
        <li>Logical operations for decision making</li>
        <li>Interactive input/output with validation</li>
        <li>Formatted output with ASCII art</li>
        <li>File operations to save user preferences</li>
    </ul>
    
    <pre style="background: white; padding: 10px;">
# Sample functionality
1. Store personal information (name, birthdate, height, weight)
2. Calculate and display:
   - Age in years, months, days
   - BMI and health category
   - Days until next birthday
3. Set and display daily reminders
4. Simple calculator for quick math
5. Save all data to a profile file
6. Load profile on next startup</pre>
    
    <p><b>Bonus:</b> Add a text-based GUI with boxes and borders using only print statements!</p>
</div>
`
},

            "2-1": {
    icon: "fa-code-branch",
    title: "If/Else Statements (Decision Making)",
    html: `<h1>Week 2, Day 1: If/Else Statements (Decision Making)</h1>
<p>Today we learn how to make programs that can think and make decisions based on conditions.</p>

<div class="analogy-box">
    <b>Analogy: The Smart Traffic Light System üö¶</b><br/>
    
    Conditions: Traffic sensors detecting cars<br/>
    If/Else: Decision rules for light changes<br/>
    Actions: Red, Yellow, Green lights<br/>
    Flow: Sequence of decisions<br/>
    Outcomes: Smooth or congested traffic
</div>

<h3>Understanding Conditional Logic</h3>
<div style="background-color: #f0f8ff; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h4>üìä Decision-Making Flow Chart</h4>
    
    <div style="text-align: center; margin: 20px 0;">
        <div style="display: inline-block; text-align: left; background: white; padding: 20px; border-radius: 10px; border: 2px solid #4A90E2;">
            <div style="background: #4A90E2; color: white; padding: 10px; border-radius: 5px; margin-bottom: 10px; text-align: center;">
                <b>START: Check Condition</b>
            </div>
            <div style="text-align: center; margin: 10px 0;">‚Üì</div>
            <div style="background: #f8f9fa; padding: 10px; border-radius: 5px; border: 1px solid #ddd; margin-bottom: 10px;">
                <b>IF condition is TRUE</b><br/>
                Execute code block 1
            </div>
            <div style="text-align: center; margin: 10px 0;">‚Üì</div>
            <div style="background: #f8f9fa; padding: 10px; border-radius: 5px; border: 1px solid #ddd; margin-bottom: 10px;">
                <b>ELSE (condition is FALSE)</b><br/>
                Execute code block 2
            </div>
            <div style="text-align: center; margin: 10px 0;">‚Üì</div>
            <div style="background: #e8f5e8; color: #2e7d32; padding: 10px; border-radius: 5px; margin-bottom: 10px; text-align: center;">
                <b>CONTINUE with rest of program</b>
            </div>
        </div>
    </div>
    
    <h5>Basic If/Else Syntax</h5>
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px;">
        <div style="background: #e8f5e8; padding: 15px; border-radius: 8px;">
            <h6>‚úÖ Correct Structure</h6>
            <pre style="background: white; padding: 10px;">
# Basic if statement
age = 18
if age >= 18:
    print("You can vote!")
    
# If-else statement
temperature = 25
if temperature > 30:
    print("It's hot outside!")
else:
    print("It's cool outside!")
    
# Multiple conditions
score = 85
if score >= 90:
    grade = "A"
elif score >= 80:
    grade = "B"
elif score >= 70:
    grade = "C"
else:
    grade = "F"
print(f"Grade: {grade}")</pre>
        </div>
        
        <div style="background: #ffebee; padding: 15px; border-radius: 8px;">
            <h6>‚ùå Common Mistakes</h6>
            <pre style="background: white; padding: 10px;">
# Wrong: Missing colon
if age >= 18  # ERROR!
    print("Can vote")

# Wrong: Incorrect indentation
if age >= 18:
print("Can vote")  # ERROR!

# Wrong: Using = instead of ==
if age = 18:  # ERROR! (assignment)
    print("Exactly 18")

# Wrong: Else without if
else:  # ERROR!
    print("This won't work")</pre>
        </div>
    </div>
</div>

<h3>Comparison Operators in Depth</h3>
<div style="background-color: #fff8e1; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h4>‚öñÔ∏è Complete Comparison Guide</h4>
    
    <table style="width: 100%; border-collapse: collapse; margin: 15px 0;">
        <tr style="background: #ff9800; color: white;">
            <th style="padding: 10px; text-align: left;">Operator</th>
            <th style="padding: 10px; text-align: left;">Meaning</th>
            <th style="padding: 10px; text-align: left;">Example</th>
            <th style="padding: 10px; text-align: left;">Result</th>
        </tr>
        <tr style="background: #fffde7;">
            <td style="padding: 8px; border: 1px solid #ddd;">==</td>
            <td style="padding: 8px; border: 1px solid #ddd;">Equal to</td>
            <td style="padding: 8px; border: 1px solid #ddd;">5 == 5</td>
            <td style="padding: 8px; border: 1px solid #ddd;">True</td>
        </tr>
        <tr style="background: white;">
            <td style="padding: 8px; border: 1px solid #ddd;">!=</td>
            <td style="padding: 8px; border: 1px solid #ddd;">Not equal to</td>
            <td style="padding: 8px; border: 1px solid #ddd;">5 != 3</td>
            <td style="padding: 8px; border: 1px solid #ddd;">True</td>
        </tr>
        <tr style="background: #fffde7;">
            <td style="padding: 8px; border: 1px solid #ddd;">></td>
            <td style="padding: 8px; border: 1px solid #ddd;">Greater than</td>
            <td style="padding: 8px; border: 1px solid #ddd;">10 > 5</td>
            <td style="padding: 8px; border: 1px solid #ddd;">True</td>
        </tr>
        <tr style="background: white;">
            <td style="padding: 8px; border: 1px solid #ddd;"><</td>
            <td style="padding: 8px; border: 1px solid #ddd;">Less than</td>
            <td style="padding: 8px; border: 1px solid #ddd;">3 < 7</td>
            <td style="padding: 8px; border: 1px solid #ddd;">True</td>
        </tr>
        <tr style="background: #fffde7;">
            <td style="padding: 8px; border: 1px solid #ddd;">>=</td>
            <td style="padding: 8px; border: 1px solid #ddd;">Greater than or equal</td>
            <td style="padding: 8px; border: 1px solid #ddd;">5 >= 5</td>
            <td style="padding: 8px; border: 1px solid #ddd;">True</td>
        </tr>
        <tr style="background: white;">
            <td style="padding: 8px; border: 1px solid #ddd;"><=</td>
            <td style="padding: 8px; border: 1px solid #ddd;">Less than or equal</td>
            <td style="padding: 8px; border: 1px solid #ddd;">4 <= 4</td>
            <td style="padding: 8px; border: 1px solid #ddd;">True</td>
        </tr>
    </table>
    
    <h5>Real-World Comparison Examples</h5>
    <pre style="background: #f5f5f5; padding: 15px; margin: 15px 0;">
# =========== REAL-WORLD COMPARISONS ===========

# Age verification for different services
age = 21

print("Age-based permissions:")
if age >= 21:
    print("‚úì Can drink alcohol (US)")
if age >= 18:
    print("‚úì Can vote")
    print("‚úì Can get driving license")
if age >= 16:
    print("‚úì Can work with restrictions")
if age >= 13:
    print("‚úì Can use social media (with parental consent)")

# Grade classification
score = 78.5
if score >= 90:
    grade = "A"
elif score >= 80:
    grade = "B"
elif score >= 70:
    grade = "C"
elif score >= 60:
    grade = "D"
else:
    grade = "F"

print(f" Score: {score} ‚Üí Grade: {grade}")

# Weather clothing advice
temperature = 15  # Celsius
is_raining = False

print(" Weather advice:")
if temperature < 0:
    print("‚ùÑÔ∏è Wear heavy winter coat")
elif temperature < 10:
    print("üß• Wear jacket")
elif temperature < 20:
    print("üëï Light sweater is enough")
else:
    print("‚òÄÔ∏è T-shirt weather!")

if is_raining:
    print("üåßÔ∏è Don't forget your umbrella!")

# Discount eligibility
purchase_amount = 150
is_member = True

print(" Discount calculation:")
if purchase_amount > 100 and is_member:
    discount = 20
elif purchase_amount > 100:
    discount = 10
elif is_member:
    discount = 5
else:
    discount = 0

final_price = purchase_amount * (1 - discount/100)
print(f"Original: \${purchase_amount}")
print(f"Discount: {discount}%")
print(f"Final price: \${final_price:.2f}")</pre>
</div>

<h3>Advanced Conditional Patterns</h3>
<div style="background-color: #e8f5e8; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h4>üéØ Professional Decision-Making Patterns</h4>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">
        <div>
            <h5>Pattern 1: Ternary Operator</h5>
            <pre style="background: white; padding: 15px;">
# Traditional if-else
age = 20
if age >= 18:
    status = "Adult"
else:
    status = "Minor"

# Ternary operator (one-liner)
status = "Adult" if age >= 18 else "Minor"

# Multiple ternary (caution: readability)
score = 85
grade = "A" if score >= 90 else "B" if score >= 80 else "C" if score >= 70 else "F"

# Practical examples
# User role assignment
is_admin = True
role = "Administrator" if is_admin else "Regular User"

# Price calculation with discount
quantity = 50
unit_price = 10.0
price = unit_price * 0.9 if quantity > 100 else unit_price * 0.95 if quantity > 50 else unit_price

# Even/odd check
number = 7
parity = "Even" if number % 2 == 0 else "Odd"

print(f"Number {number} is {parity}")</pre>
        </div>
        
        <div>
            <h5>Pattern 2: Early Returns</h5>
            <pre style="background: white; padding: 15px;">
def check_password(password):
    # Early return for invalid cases
    if not password:
        return "Password cannot be empty"
    
    if len(password) < 8:
        return "Password too short"
    
    if not any(c.isupper() for c in password):
        return "Password needs uppercase"
    
    if not any(c.isdigit() for c in password):
        return "Password needs digit"
    
    # If all checks pass
    return "Password is valid"

# Test the function
passwords = ["", "abc", "abcdefg", "Password", "Password123"]
for pwd in passwords:
    result = check_password(pwd)
    print(f"'{pwd}': {result}")

# Another example: Age verification
def can_watch_movie(age, is_accompanied=False):
    if age < 0:
        return "Invalid age"
    
    if age >= 18:
        return "Allowed (Adult)"
    
    if 13 <= age < 18:
        return "Allowed (Teen)"
    
    if age < 13 and is_accompanied:
        return "Allowed with adult"
    
    return "Not allowed"

# Test cases
print(" Movie theater access:")
print(can_watch_movie(25))           # Adult
print(can_watch_movie(15))           # Teen
print(can_watch_movie(10, True))     # Child with adult
print(can_watch_movie(10, False))    # Child alone
print(can_watch_movie(-5))           # Invalid</pre>
        </div>
    </div>
    
    <h5>Pattern 3: Switch-like Statements (Python 3.10+)</h5>
    <pre style="background: #f5f5f5; padding: 15px; margin: 15px 0;">
# Traditional approach (before Python 3.10)
def get_day_type(day):
    if day == "Monday":
        return "Start of work week"
    elif day == "Friday":
        return "TGIF!"
    elif day == "Saturday" or day == "Sunday":
        return "Weekend"
    else:
        return "Regular work day"

# Python 3.10+ match-case (like switch)
def get_day_type_match(day):
    match day.lower():
        case "monday":
            return "Start of work week"
        case "tuesday" | "wednesday" | "thursday":
            return "Regular work day"
        case "friday":
            return "TGIF!"
        case "saturday" | "sunday":
            return "Weekend"
        case _:
            return "Invalid day"

# Example with patterns
def process_command(command):
    match command.split():
        case ["login", username, password]:
            return f"Logging in {username}"
        case ["search", *keywords]:
            return f"Searching for: {', '.join(keywords)}"
        case ["download", filename, "as", new_name]:
            return f"Downloading {filename} as {new_name}"
        case ["quit"]:
            return "Goodbye!"
        case _:
            return "Unknown command"

# Test match-case
commands = [
    "login admin password123",
    "search python tutorial",
    "download file.txt as document.txt",
    "quit",
    "invalid command"
]

for cmd in commands:
    print(f"{cmd:30} ‚Üí {process_command(cmd)}")</pre>
</div>

<h3>Today's Hands-On Exercise</h3>
<div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <b>Task 1: Smart Home Automation System (60 minutes)</b>
    <p>Create a program that controls a smart home:</p>
    <ul>
        <li>Monitor temperature and adjust AC/heating</li>
        <li>Control lights based on time of day and motion</li>
        <li>Manage security system (alarm states)</li>
        <li>Optimize energy usage</li>
        <li>Handle emergency scenarios (fire, intrusion)</li>
    </ul>
    
    <pre style="background: #f5f5f5; padding: 10px; margin: 10px 0;">
# Sample variables to work with
temperature = 22  # Celsius
time_of_day = "20:30"  # 24-hour format
is_occupied = True
door_locked = False
windows_closed = True
smoke_detected = False

# Your logic here
if temperature > 25:
    # Turn on AC
    pass
elif temperature < 18:
    # Turn on heating
    pass</pre>
    
    <b>Task 2: Loan Approval System (45 minutes)</b>
    <p>Create a bank loan approval system:</p>
    <ul>
        <li>Check credit score</li>
        <li>Verify income level</li>
        <li>Calculate debt-to-income ratio</li>
        <li>Check employment status</li>
        <li>Determine loan amount and interest rate</li>
        <li>Provide reasons for rejection</li>
    </ul>
    
    <b>Task 3: Game Character Decision System (45 minutes)</b>
    <p>Create decision logic for a game character:</p>
    <ul>
        <li>Health-based actions (fight/run/heal)</li>
        <li>Inventory management decisions</li>
        <li>Enemy encounter responses</li>
        <li>Quest completion checks</li>
        <li>Experience and level-up logic</li>
    </ul>
</div>

<h3>Homework Assignment</h3>
<div style="background-color: #fff0e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <b>Build a "University Admission System"</b>
    
    <b>Requirements:</b>
    <ul>
        <li><b>Input:</b> Student grades, test scores, extracurriculars</li>
        <li><b>Decision Factors:</b>
            <ul>
                <li>GPA (out of 4.0)</li>
                <li>SAT/ACT scores</li>
                <li>Recommendation letters (0-3)</li>
                <li>Extracurricular activities</li>
                <li>Personal essay quality (1-10)</li>
            </ul>
        </li>
        <li><b>Output:</b> Admission decision with reasons</li>
    </ul>
    
    <b>Decision Logic:</b>
    <pre style="background: #f5f5f5; padding: 10px;">
ADMISSION RULES:
1. Automatic acceptance:
   - GPA ‚â• 3.8 AND SAT ‚â• 1400
   - GPA ‚â• 3.5 AND SAT ‚â• 1500
   - Outstanding athlete (special flag)

2. Probationary acceptance:
   - GPA between 3.0-3.5 AND good recommendations
   - Lower test scores but strong extracurriculars

3. Rejection:
   - GPA < 2.5
   - No recommendations
   - Poor essay quality (< 5)

4. Waitlist:
   - All other cases</pre>
    
    <b>Features to Implement:</b>
    <ul>
        <li>Calculate admission score (weighted formula)</li>
        <li>Provide specific feedback for improvement</li>
        <li>Handle special cases (legacy, athletes)</li>
        <li>Generate admission letter</li>
        <li>Save applicant data to file</li>
        <li>Statistics reporting (acceptance rate, etc.)</li>
    </ul>
</div>

<h3>Key Learning Points:</h3>
<ol>
    <li><b>Conditional Logic:</b> Making decisions based on conditions</li>
    <li><b>Comparison Operators:</b> ==, !=, >, <, >=, <=</li>
    <li><b>If-Elif-Else Structure:</b> Handling multiple conditions</li>
    <li><b>Ternary Operator:</b> One-line conditional assignments</li>
    <li><b>Early Returns:</b> Simplifying complex condition chains</li>
    <li><b>Match-Case:</b> Modern pattern matching (Python 3.10+)</li>
</ol>

<div style="background-color: #e8f5e8; padding: 15px; margin: 20px 0; border-radius: 5px;">
    <h3>üí° Decision-Making Best Practices:</h3>
    <ul>
        <li><b>Keep Conditions Simple:</b> Break complex conditions into variables</li>
        <li><b>Use Descriptive Variable Names:</b> <code>is_eligible</code> not <code>e</code></li>
        <li><b>Avoid Deep Nesting:</b> Use early returns to flatten code</li>
        <li><b>Handle Edge Cases:</b> What happens with boundary values?</li>
        <li><b>Test All Paths:</b> Ensure every condition branch is tested</li>
        <li><b>Comment Complex Logic:</b> Explain why decisions are made</li>
        <li><b>Use Constants:</b> Magic numbers in conditions are confusing</li>
    </ul>
    
    <pre style="background: white; padding: 10px; margin-top: 10px;">
# Good practice example
MIN_AGE_FOR_LICENSE = 16
MAX_AGE_FOR_SENIOR_DISCOUNT = 65

def check_driver_eligibility(age, has_vision_test):
    # Early return for clear cases
    if age < MIN_AGE_FOR_LICENSE:
        return False, "Too young for license"
    
    if age > 90 and not has_vision_test:
        return False, "Vision test required for seniors"
    
    # Main eligibility
    is_eligible = (MIN_AGE_FOR_LICENSE <= age <= 90) or (age > 90 and has_vision_test)
    
    if is_eligible:
        message = "Eligible for license"
        if age >= MAX_AGE_FOR_SENIOR_DISCOUNT:
            message += " (senior discount available)"
        return True, message
    else:
        return False, "Not eligible"</pre>
</div>

<div style="background-color: #e3f2fd; padding: 15px; margin: 20px 0; border-radius: 5px;">
    <h3>üß† Logic Puzzle Challenge:</h3>
    <p>Solve this classic programming logic puzzle:</p>
    
    <div style="background: white; padding: 15px; border-radius: 8px; border: 2px solid #4A90E2;">
        <h4>The Bridge Crossing Problem</h4>
        <p>Four people need to cross a bridge at night:</p>
        <ul>
            <li>Person A: Crosses in 1 minute</li>
            <li>Person B: Crosses in 2 minutes</li>
            <li>Person C: Crosses in 5 minutes</li>
            <li>Person D: Crosses in 10 minutes</li>
        </ul>
        <p><b>Constraints:</b></p>
        <ol>
            <li>The bridge only holds 2 people at a time</li>
            <li>They have only one flashlight</li>
            <li>The flashlight must be carried when crossing</li>
            <li>People cross at the speed of the slower person</li>
        </ol>
        <p><b>Challenge:</b> Write a program that finds the minimum time to get all four across.</p>
        
        <details>
            <summary>Hint (click to reveal)</summary>
            <div style="background: #f5f5f5; padding: 10px; margin-top: 10px; border-radius: 5px;">
                Think about who should carry the flashlight back after each crossing...
            </div>
        </details>
    </div>
    
    <p style="margin-top: 15px;"><b>Bonus:</b> Make your solution work for any number of people with different crossing times!</p>
</div>
`
},
            "2-2": {
    icon: "fa-sitemap",
    title: "Nested Conditionals",
    html: `<h1>Week 2, Day 2: Nested Conditionals</h1>
<p>Today we learn how to create complex decision trees using nested conditionals for sophisticated program logic.</p>

<div class="analogy-box">
    <b>Analogy: The Airport Security Checkpoint ‚úàÔ∏è</b><br/>
    
    Outer condition: Domestic or International flight?<br/>
    Inner condition 1: Check passport/ID<br/>
    Inner condition 2: Security screening level<br/>
    Inner condition 3: Luggage restrictions<br/>
    Final decision: Boarding permission<br/>
    Flow: Multi-layered verification
</div>

<h3>Understanding Nested Conditionals</h3>
<div style="background-color: #f0f8ff; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h4>üìä Nested Decision Tree Structure</h4>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">
        <div style="background: white; padding: 15px; border-radius: 8px; border: 1px solid #ddd;">
            <h5>Basic Nested Structure</h5>
            <pre style="background: #f5f5f5; padding: 10px;">
# Level 1: Check if user is logged in
is_logged_in = True

if is_logged_in:
    # Level 2: Check user role
    user_role = "admin"
    
    if user_role == "admin":
        # Level 3: Check admin permissions
        has_full_access = True
        
        if has_full_access:
            print("Welcome, System Administrator!")
        else:
            print("Welcome, Limited Admin!")
    
    elif user_role == "moderator":
        print("Welcome, Moderator!")
    
    else:
        print("Welcome, User!")

else:
    print("Please log in first.")</pre>
        </div>
        
        <div style="background: white; padding: 15px; border-radius: 8px; border: 1px solid #ddd;">
            <h5>Visual Representation</h5>
            <div style="font-family: monospace; line-height: 1.6;">
                <div style="margin-left: 0px;">if is_logged_in:</div>
                <div style="margin-left: 20px;">‚îÇ</div>
                <div style="margin-left: 20px;">‚îú‚îÄ‚îÄ if user_role == "admin":</div>
                <div style="margin-left: 40px;">‚îÇ   ‚îÇ</div>
                <div style="margin-left: 40px;">‚îÇ   ‚îú‚îÄ‚îÄ if has_full_access:</div>
                <div style="margin-left: 60px;">‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ "System Admin"</div>
                <div style="margin-left: 40px;">‚îÇ   ‚îî‚îÄ‚îÄ else:</div>
                <div style="margin-left: 60px;">‚îÇ       ‚îî‚îÄ‚îÄ "Limited Admin"</div>
                <div style="margin-left: 20px;">‚îÇ</div>
                <div style="margin-left: 20px;">‚îú‚îÄ‚îÄ elif user_role == "moderator":</div>
                <div style="margin-left: 40px;">‚îÇ   ‚îî‚îÄ‚îÄ "Moderator"</div>
                <div style="margin-left: 20px;">‚îÇ</div>
                <div style="margin-left: 20px;">‚îî‚îÄ‚îÄ else:</div>
                <div style="margin-left: 40px;">    ‚îî‚îÄ‚îÄ "User"</div>
                <div style="margin-left: 0px;">else:</div>
                <div style="margin-left: 20px;">‚îî‚îÄ‚îÄ "Please log in"</div>
            </div>
            
            <div style="margin-top: 15px; padding: 10px; background: #e8f5e8; border-radius: 5px;">
                <b>Key Concept:</b> Each level adds another layer of decision-making. The inner conditions only execute if the outer conditions are True.
            </div>
        </div>
    </div>
    
    <h5>When to Use Nested Conditionals</h5>
    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin: 20px 0;">
        <div style="background: #bbdefb; padding: 15px; border-radius: 8px;">
            <h6>‚úÖ Good Use Cases</h6>
            <ul style="font-size: 14px;">
                <li>Multi-level security checks</li>
                <li>Complex business rules</li>
                <li>Game decision trees</li>
                <li>Workflow approvals</li>
                <li>Diagnostic systems</li>
            </ul>
        </div>
        
        <div style="background: #ffcc80; padding: 15px; border-radius: 8px;">
            <h6>‚ö†Ô∏è Use with Caution</h6>
            <ul style="font-size: 14px;">
                <li>3+ levels deep</li>
                <li>Similar logic repeated</li>
                <li>Hard to read/test</li>
                <li>Many edge cases</li>
            </ul>
        </div>
        
        <div style="background: #ef9a9a; padding: 15px; border-radius: 8px;">
            <h6>‚ùå Avoid When</h6>
            <ul style="font-size: 14px;">
                <li>Can use logical operators</li>
                <li>Can flatten with early returns</li>
                <li>Better as separate functions</li>
                <li>Simple switch-case works</li>
            </ul>
        </div>
    </div>
</div>

<h3>Practical Nested Conditional Examples</h3>
<div style="background-color: #fff8e1; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h4>üîß Real-World Application Examples</h4>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">
        <div>
            <h5>Example 1: E-commerce Shipping</h5>
            <pre style="background: white; padding: 15px;">
def calculate_shipping(country, weight, order_value, is_express):
    """Calculate shipping cost with nested rules"""
    
    # Level 1: Domestic vs International
    if country == "USA":
        # Level 2: Weight-based pricing
        if weight <= 1:
            base_cost = 5.00
        elif weight <= 5:
            base_cost = 10.00
        elif weight <= 20:
            base_cost = 20.00
        else:
            base_cost = 50.00
        
        # Level 3: Free shipping conditions
        if order_value > 50:
            base_cost = 0  # Free shipping for orders over $50
        
    else:  # International
        # Level 2: Continent-based pricing
        if country in ["Canada", "Mexico"]:
            base_cost = 25.00
        elif country in ["UK", "Germany", "France"]:
            base_cost = 35.00
        else:
            base_cost = 50.00
        
        # Level 3: Weight adjustments
        if weight > 10:
            base_cost *= 1.5
    
    # Level 4: Express shipping premium
    if is_express:
        if country == "USA":
            base_cost += 15.00
        else:
            base_cost += 30.00
    
    return base_cost

# Test cases
test_cases = [
    ("USA", 0.5, 30, False),     # Small domestic
    ("USA", 15, 75, False),      # Heavy domestic with free shipping
    ("Canada", 8, 100, True),    # Express to Canada
    ("Japan", 25, 200, False),   # Heavy international
]

for country, weight, value, express in test_cases:
    cost = calculate_shipping(country, weight, value, express)
    print(f"{country:10} {weight:4}kg \${value:6} Express:{express:5} ‚Üí \${cost:.2f}")</pre>
        </div>
        
        <div>
            <h5>Example 2: Game Combat System</h5>
            <pre style="background: white; padding: 15px;">
def combat_resolution(attacker, defender, terrain, weather):
    """Determine combat outcome with nested conditions"""
    
    damage = attacker["attack_power"]
    
    # Level 1: Check if attack hits
    hit_chance = 80  # base chance
    
    # Level 2: Terrain modifiers
    if terrain == "forest":
        hit_chance -= 10  # harder to aim in forest
        if attacker["type"] == "archer":
            hit_chance += 5  # archers good in forest
    
    # Level 3: Weather modifiers
    if weather == "rain":
        hit_chance -= 15
        if attacker["weapon"] == "bow":
            hit_chance -= 10  # bows ineffective in rain
    
    elif weather == "fog":
        hit_chance -= 25
    
    # Level 4: Special abilities
    if attacker.get("eagle_eye", False):
        hit_chance += 20  # eagle eye ability
    
    # Determine if hit
    import random
    hit_roll = random.randint(1, 100)
    
    if hit_roll <= hit_chance:
        # Level 5: Calculate damage if hit
        damage_multiplier = 1.0
        
        # Level 6: Type effectiveness
        if (attacker["type"] == "fire" and defender["type"] == "ice"):
            damage_multiplier = 2.0
            print("It's super effective!")
        
        elif (attacker["type"] == "water" and defender["type"] == "fire"):
            damage_multiplier = 2.0
            print("It's super effective!")
        
        # Level 7: Critical hit chance
        if hit_roll <= 5:  # natural 1-5 is critical
            damage_multiplier *= 2
            print("Critical hit!")
        
        final_damage = damage * damage_multiplier
        
        # Level 8: Defender defense
        if defender.get("shield", False):
            final_damage *= 0.5
            print("Damage reduced by shield!")
        
        return f"HIT! {final_damage:.1f} damage dealt"
    
    else:
        # Miss scenarios
        if hit_roll >= 95:
            return "CRITICAL MISS! Attacker hurts themselves"
        else:
            return "MISS!"</pre>
        </div>
    </div>
</div>

<h3>Flattening Nested Conditionals</h3>
<div style="background-color: #e8f5e8; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h4>üîÑ Techniques to Simplify Complex Logic</h4>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">
        <div>
            <h5>Technique 1: Early Returns</h5>
            <pre style="background: white; padding: 15px;">
# ‚ùå Deeply nested (hard to read)
def process_order_old(order):
    if order:
        if order["status"] == "pending":
            if order["items"]:
                if order["payment"] == "received":
                    if order["shipping_address"]:
                        return "Processing order"
                    else:
                        return "Missing address"
                else:
                    return "Payment pending"
            else:
                return "Empty order"
        else:
            return "Order already processed"
    else:
        return "Invalid order"

# ‚úÖ Flattened with early returns
def process_order_new(order):
    # Check each condition sequentially
    if not order:
        return "Invalid order"
    
    if order["status"] != "pending":
        return "Order already processed"
    
    if not order["items"]:
        return "Empty order"
    
    if order["payment"] != "received":
        return "Payment pending"
    
    if not order["shipping_address"]:
        return "Missing address"
    
    # All checks passed
    return "Processing order"

# Test
sample_order = {
    "status": "pending",
    "items": ["item1", "item2"],
    "payment": "received",
    "shipping_address": "123 Main St"
}

print("Old approach:", process_order_old(sample_order))
print("New approach:", process_order_new(sample_order))</pre>
        </div>
        
        <div>
            <h5>Technique 2: Boolean Variables</h5>
            <pre style="background: white; padding: 15px;">
# ‚ùå Complex nested conditions
def can_access_resource(user, resource, time):
    if user["role"] == "admin":
        return True
    else:
        if user["department"] == resource["department"]:
            if time["hour"] >= 9 and time["hour"] <= 17:
                if resource["security_level"] <= user["clearance"]:
                    if not resource["maintenance_mode"]:
                        return True
    return False

# ‚úÖ Simplified with boolean variables
def can_access_resource_simple(user, resource, time):
    # Create descriptive boolean variables
    is_admin = user["role"] == "admin"
    same_department = user["department"] == resource["department"]
    within_working_hours = 9 <= time["hour"] <= 17
    has_clearance = resource["security_level"] <= user["clearance"]
    resource_available = not resource["maintenance_mode"]
    
    # Combine with logical operators
    return (is_admin or 
            (same_department and 
             within_working_hours and 
             has_clearance and 
             resource_available))

# Test data
test_user = {"role": "employee", "department": "IT", "clearance": 3}
test_resource = {"department": "IT", "security_level": 2, "maintenance_mode": False}
test_time = {"hour": 14}

print("Access granted:", can_access_resource_simple(test_user, test_resource, test_time))</pre>
        </div>
    </div>
    
    <h5>Technique 3: Lookup Tables</h5>
    <pre style="background: #f5f5f5; padding: 15px; margin: 15px 0;">
# ‚ùå Nested if-elif for category mapping
def get_product_category_old(product_type, price):
    if product_type == "electronics":
        if price > 1000:
            return "Premium Electronics"
        else:
            return "Standard Electronics"
    elif product_type == "clothing":
        if price > 200:
            return "Designer Clothing"
        else:
            return "Basic Clothing"
    elif product_type == "books":
        if price > 50:
            return "Special Edition Books"
        else:
            return "Regular Books"
    else:
        return "Other"

# ‚úÖ Using lookup tables
def get_product_category_new(product_type, price):
    # Define category rules in a dictionary
    category_rules = {
        "electronics": {
            "threshold": 1000,
            "premium": "Premium Electronics",
            "standard": "Standard Electronics"
        },
        "clothing": {
            "threshold": 200,
            "premium": "Designer Clothing",
            "standard": "Basic Clothing"
        },
        "books": {
            "threshold": 50,
            "premium": "Special Edition Books",
            "standard": "Regular Books"
        }
    }
    
    # Look up rules for this product type
    rules = category_rules.get(product_type)
    
    if rules:
        # Simple if-else based on price threshold
        if price > rules["threshold"]:
            return rules["premium"]
        else:
            return rules["standard"]
    else:
        return "Other"

# Test
products = [("electronics", 1500), ("clothing", 150), ("books", 75), ("food", 10)]
for p_type, price in products:
    cat_old = get_product_category_old(p_type, price)
    cat_new = get_product_category_new(p_type, price)
    print(f"{p_type:12} \${price:6} ‚Üí {cat_old:25} | {cat_new:25}")</pre>
</div>

<h3>Today's Hands-On Exercise</h3>
<div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <b>Task 1: Tax Calculation System (60 minutes)</b>
    <p>Create a comprehensive tax calculator:</p>
    <ul>
        <li>Handle different filing statuses (single, married, head of household)</li>
        <li>Calculate federal, state, and local taxes</li>
        <li>Apply deductions and credits</li>
        <li>Handle special cases (self-employment, investments)</li>
        <li>Consider tax brackets and progressive taxation</li>
    </ul>
    
    <pre style="background: #f5f5f5; padding: 10px; margin: 10px 0;">
# Sample tax brackets (2023 US Federal)
TAX_BRACKETS = {
    "single": [
        (0, 11000, 0.10),
        (11001, 44725, 0.12),
        (44726, 95375, 0.22),
        (95376, 182100, 0.24),
        (182101, 231250, 0.32),
        (231251, 578125, 0.35),
        (578126, float('inf'), 0.37)
    ],
    "married": [
        # Define married brackets
    ]
}

def calculate_tax(income, filing_status, deductions=0):
    # Your nested conditional logic here
    pass</pre>
    
    <b>Task 2: Healthcare Triage System (60 minutes)</b>
    <p>Create a medical triage system:</p>
    <ul>
        <li>Assess patient symptoms (fever, pain level, breathing)</li>
        <li>Check vital signs (heart rate, blood pressure, temperature)</li>
        <li>Determine urgency level (emergency, urgent, non-urgent)</li>
        <li>Recommend department (ER, ICU, general ward, discharge)</li>
        <li>Handle pediatric vs adult cases differently</li>
    </ul>
    
    <b>Task 3: Insurance Claim Processor (60 minutes)</b>
    <p>Create an insurance claim evaluation system:</p>
    <ul>
        <li>Validate claim documentation</li>
        <li>Check policy coverage and limits</li>
        <li>Assess damage/injury severity</li>
        <li>Calculate payout amount</li>
        <li>Flag suspicious claims for investigation</li>
        <li>Handle different insurance types (auto, health, home)</li>
    </ul>
</div>

<h3>Homework Assignment</h3>
<div style="background-color: #fff0e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <b>Build a "Flight Booking System"</b>
    
    <b>Requirements:</b>
    <ul>
        <li><b>Input:</b> Origin, destination, dates, passengers, class</li>
        <li><b>Multi-level Decision Logic:</b>
            <ul>
                <li><b>Level 1:</b> Route availability and restrictions</li>
                <li><b>Level 2:</b> Seat availability by class</li>
                <li><b>Level 3:</b> Pricing based on demand and timing</li>
                <li><b>Level 4:</b> Passenger requirements (infants, disabilities)</li>
                <li><b>Level 5:</b> Baggage rules and fees</li>
                <li><b>Level 6:</b> Special requests (meals, seating)</li>
            </ul>
        </li>
    </ul>
    
    <b>Complex Rules to Implement:</b>
    <pre style="background: #f5f5f5; padding: 10px;">
PRICING LOGIC:
1. Base fare √ó number of passengers
2. Season multiplier (holiday = √ó1.5, off-season = √ó0.8)
3. Booking time multiplier (last-minute = √ó2.0, 60+ days = √ó0.7)
4. Class multiplier (economy = 1.0, business = 2.5, first = 5.0)
5. Passenger age adjustments (child = 0.75, infant = 0.1)

BAGGAGE RULES:
- Economy: 1 checked bag (23kg) included
- Business: 2 checked bags (32kg each) included
- First: 3 checked bags (32kg each) included
- Overweight fees: $50 per 5kg over limit
- Extra bags: $100 each for economy, free for business/first

SPECIAL CASES:
- Unaccompanied minors: +$150 service fee
- Pets in cabin: +$200, subject to approval
- Medical equipment: Free, requires documentation
- Sports equipment: +$75 for oversized items</pre>
    
    <b>Features to Implement:</b>
    <ul>
        <li>Real-time seat map display (ASCII art)</li>
        <li>Multiple flight options comparison</li>
        <li>Fare rules explanation</li>
        <li>Booking confirmation with all details</li>
        <li>Save/Load booking drafts</li>
        <li>Cancel/change booking logic</li>
    </ul>
</div>

<h3>Key Learning Points:</h3>
<ol>
    <li><b>Nested Structure:</b> Conditionals inside other conditionals</li>
    <li><b>Logical Flow:</b> Understanding execution order in nested logic</li>
    <li><b>Code Readability:</b> Balancing complexity with clarity</li>
    <li><b>Flattening Techniques:</b> Early returns, boolean variables, lookup tables</li>
    <li><b>Decision Trees:</b> Mapping complex business rules</li>
    <li><b>Debugging Nested Code:</b> Tracing execution paths</li>
</ol>

<div style="background-color: #e8f5e8; padding: 15px; margin: 20px 0; border-radius: 5px;">
    <h3>üí° Nested Conditional Best Practices:</h3>
    <ul>
        <li><b>Limit Nesting Depth:</b> Try to keep it to 3 levels maximum</li>
        <li><b>Use Early Returns:</b> Exit early to reduce nesting</li>
        <li><b>Extract Complex Logic:</b> Move nested logic to separate functions</li>
        <li><b>Add Comments:</b> Explain why nesting is necessary</li>
        <li><b>Test Each Branch:</b> Ensure all nested paths work correctly</li>
        <li><b>Consider Alternatives:</b> Sometimes match-case or dictionaries are better</li>
        <li><b>Use Guard Clauses:</b> Check and return early for invalid cases</li>
    </ul>
    
    <pre style="background: white; padding: 10px; margin-top: 10px;">
# Guard clause pattern
def process_transaction(amount, account, merchant):
    # Guard clauses (early returns for invalid cases)
    if amount <= 0:
        return "Invalid amount"
    
    if not account["active"]:
        return "Account inactive"
    
    if account["balance"] < amount:
        return "Insufficient funds"
    
    if merchant["blocked"]:
        return "Merchant blocked"
    
    if amount > 10000 and not account["verified"]:
        return "Large transaction requires verification"
    
    # Main processing logic (no nesting needed)
    account["balance"] -= amount
    log_transaction(amount, account, merchant)
    return "Transaction successful"

# Without guard clauses (nested mess)
def process_transaction_bad(amount, account, merchant):
    if amount > 0:
        if account["active"]:
            if account["balance"] >= amount:
                if not merchant["blocked"]:
                    if not (amount > 10000 and not account["verified"]):
                        account["balance"] -= amount
                        return "Transaction successful"
                    else:
                        return "Large transaction requires verification"
                else:
                    return "Merchant blocked"
            else:
                return "Insufficient funds"
        else:
            return "Account inactive"
    else:
        return "Invalid amount"</pre>
</div>

<div style="background-color: #e3f2fd; padding: 15px; margin: 20px 0; border-radius: 5px;">
    <h3>üßÆ Complexity Analysis Challenge:</h3>
    <p>Analyze this nested conditional code and improve it:</p>
    
    <pre style="background: white; padding: 15px; border-radius: 5px; border: 2px solid #4A90E2;">
def calculate_discount(customer_type, order_amount, items, is_holiday):
    if customer_type == "regular":
        if order_amount > 100:
            if len(items) > 5:
                if is_holiday:
                    return 0.20
                else:
                    return 0.15
            else:
                if is_holiday:
                    return 0.15
                else:
                    return 0.10
        else:
            if len(items) > 5:
                if is_holiday:
                    return 0.10
                else:
                    return 0.05
            else:
                if is_holiday:
                    return 0.05
                else:
                    return 0.00
    elif customer_type == "premium":
        if order_amount > 100:
            if len(items) > 5:
                if is_holiday:
                    return 0.30
                else:
                    return 0.25
            else:
                if is_holiday:
                    return 0.25
                else:
                    return 0.20
        else:
            if len(items) > 5:
                if is_holiday:
                    return 0.20
                else:
                    return 0.15
            else:
                if is_holiday:
                    return 0.15
                else:
                    return 0.10
    else:
        return 0.00</pre>
    
    <p><b>Your Task:</b></p>
    <ol>
        <li>How many different execution paths are there?</li>
        <li>What's the maximum nesting depth?</li>
        <li>Rewrite this function using better practices</li>
        <li>Add test cases to verify all discount calculations</li>
    </ol>
    
    <details>
        <summary>Solution Approach (click to reveal)</summary>
        <div style="background: #f5f5f5; padding: 15px; margin-top: 10px; border-radius: 5px;">
            <p><b>Hint:</b> Use a lookup table or calculate discount based on additive factors:</p>
            <pre style="background: white; padding: 10px;">
base_discounts = {
    "regular": 0.00,
    "premium": 0.10,
    "vip": 0.20
}

def calculate_discount_better(customer_type, order_amount, items, is_holiday):
    discount = base_discounts.get(customer_type, 0.00)
    
    # Additive factors
    if order_amount > 100:
        discount += 0.10
    
    if len(items) > 5:
        discount += 0.05
    
    if is_holiday:
        discount += 0.05
    
    # Cap at reasonable maximum
    return min(discount, 0.50)</pre>
        </div>
    </details>
</div>
`
},
            "2-3": {
    icon: "fa-redo",
    title: "For Loops (Repeat for specific time)",
    html: `<h1>Week 2, Day 3: For Loops (Repeat for Specific Time)</h1>
<p>Today we learn how to automate repetitive tasks using for loops - one of programming's most powerful tools.</p>

<div class="analogy-box">
    <b>Analogy: The Assembly Line Factory üè≠</b><br/>
    
    Loop: The conveyor belt moving continuously<br/>
    Iteration: Each product on the belt<br/>
    Range: Number of products to manufacture<br/>
    Loop variable: Product ID/counter<br/>
    Loop body: Manufacturing steps for each product<br/>
    Break: Emergency stop button
</div>

<h3>Understanding For Loops</h3>
<div style="background-color: #f0f8ff; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h4>üìä For Loop Anatomy</h4>
    
    <div style="text-align: center; margin: 20px 0;">
        <div style="display: inline-block; text-align: left; background: white; padding: 20px; border-radius: 10px; border: 2px solid #4A90E2; width: 100%; max-width: 600px;">
            <div style="display: grid; grid-template-columns: 100px 1fr; gap: 10px; align-items: start;">
                <div style="background: #4A90E2; color: white; padding: 10px; border-radius: 5px; text-align: center;">
                    <b>Keyword</b>
                </div>
                <div style="padding: 10px;">
                    <code style="background: #f5f5f5; padding: 5px; border-radius: 3px;">for</code> - Starts the loop
                </div>
                
                <div style="background: #2196F3; color: white; padding: 10px; border-radius: 5px; text-align: center;">
                    <b>Variable</b>
                </div>
                <div style="padding: 10px;">
                    <code style="background: #f5f5f5; padding: 5px; border-radius: 3px;">item</code> - Changes each iteration
                </div>
                
                <div style="background: #03A9F4; color: white; padding: 10px; border-radius: 5px; text-align: center;">
                    <b>Keyword</b>
                </div>
                <div style="padding: 10px;">
                    <code style="background: #f5f5f5; padding: 5px; border-radius: 3px;">in</code> - "For each item in"
                </div>
                
                <div style="background: #00BCD4; color: white; padding: 10px; border-radius: 5px; text-align: center;">
                    <b>Iterable</b>
                </div>
                <div style="padding: 10px;">
                    <code style="background: #f5f5f5; padding: 5px; border-radius: 3px;">sequence</code> - Collection to loop through
                </div>
                
                <div style="background: #009688; color: white; padding: 10px; border-radius: 5px; text-align: center;">
                    <b>Colon</b>
                </div>
                <div style="padding: 10px;">
                    <code style="background: #f5f5f5; padding: 5px; border-radius: 3px;">:</code> - Required syntax
                </div>
                
                <div style="background: #4CAF50; color: white; padding: 10px; border-radius: 5px; text-align: center;">
                    <b>Body</b>
                </div>
                <div style="padding: 10px;">
                    <code style="background: #f5f5f5; padding: 5px; border-radius: 3px;">indented code</code> - Executes each iteration
                </div>
            </div>
            
            <div style="margin-top: 20px; padding: 15px; background: #e8f5e8; border-radius: 5px;">
                <b>Basic Syntax:</b>
                <pre style="background: white; padding: 10px; margin: 10px 0;">
for variable in iterable:
    # Code to repeat
    # Indented block
    print(variable)</pre>
            </div>
        </div>
    </div>
    
    <h5>Basic For Loop Examples</h5>
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px;">
        <div style="background: #e8f5e8; padding: 15px; border-radius: 8px;">
            <h6>Looping through Sequences</h6>
            <pre style="background: white; padding: 10px;">
# Loop through a list
fruits = ["apple", "banana", "cherry"]
for fruit in fruits:
    print(f"I like {fruit}s")

# Loop through a string
word = "Python"
for letter in word:
    print(letter.upper())

# Loop through a tuple
coordinates = (10, 20, 30)
for coord in coordinates:
    print(f"Coordinate: {coord}")

# Loop with index using enumerate
colors = ["red", "green", "blue"]
for index, color in enumerate(colors):
    print(f"Color {index + 1}: {color}")</pre>
        </div>
        
        <div style="background: #e3f2fd; padding: 15px; border-radius: 8px;">
            <h6>Using range() function</h6>
            <pre style="background: white; padding: 10px;">
# Basic range: 0 to 4
for i in range(5):
    print(i)  # 0, 1, 2, 3, 4

# Range with start and end
for i in range(2, 6):
    print(i)  # 2, 3, 4, 5

# Range with step
for i in range(0, 10, 2):
    print(i)  # 0, 2, 4, 6, 8

# Counting backwards
for i in range(5, 0, -1):
    print(i)  # 5, 4, 3, 2, 1

# Practical: Multiplication table
for i in range(1, 11):
    print(f"7 √ó {i:2} = {7*i:3}")</pre>
        </div>
    </div>
</div>

<h3>The range() Function in Depth</h3>
<div style="background-color: #fff8e1; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h4>üî¢ Mastering Range Generation</h4>
    
    <table style="width: 100%; border-collapse: collapse; margin: 15px 0;">
        <tr style="background: #ff9800; color: white;">
            <th style="padding: 10px; text-align: left;">Syntax</th>
            <th style="padding: 10px; text-align: left;">Description</th>
            <th style="padding: 10px; text-align: left;">Generated Sequence</th>
            <th style="padding: 10px; text-align: left;">Common Use</th>
        </tr>
        <tr style="background: #fffde7;">
            <td style="padding: 8px; border: 1px solid #ddd;"><code>range(stop)</code></td>
            <td style="padding: 8px; border: 1px solid #ddd;">0 to stop-1</td>
            <td style="padding: 8px; border: 1px solid #ddd;"><code>0, 1, 2, ..., stop-1</code></td>
            <td style="padding: 8px; border: 1px solid #ddd;">Simple counting</td>
        </tr>
        <tr style="background: white;">
            <td style="padding: 8px; border: 1px solid #ddd;"><code>range(start, stop)</code></td>
            <td style="padding: 8px; border: 1px solid #ddd;">start to stop-1</td>
            <td style="padding: 8px; border: 1px solid #ddd;"><code>start, start+1, ..., stop-1</code></td>
            <td style="padding: 8px; border: 1px solid #ddd;">Custom starting point</td>
        </tr>
        <tr style="background: #fffde7;">
            <td style="padding: 8px; border: 1px solid #ddd;"><code>range(start, stop, step)</code></td>
            <td style="padding: 8px; border: 1px solid #ddd;">start to stop-1 by step</td>
            <td style="padding: 8px; border: 1px solid #ddd;"><code>start, start+step, ...</code></td>
            <td style="padding: 8px; border: 1px solid #ddd;">Skip values, count backwards</td>
        </tr>
        <tr style="background: white;">
            <td style="padding: 8px; border: 1px solid #ddd;"><code>range(stop-1, -1, -1)</code></td>
            <td style="padding: 8px; border: 1px solid #ddd;">stop-1 down to 0</td>
            <td style="padding: 8px; border: 1px solid #ddd;"><code>stop-1, stop-2, ..., 0</code></td>
            <td style="padding: 8px; border: 1px solid #ddd;">Reverse iteration</td>
        </tr>
    </table>
    
    <h5>Practical Range Examples</h5>
    <pre style="background: #f5f5f5; padding: 15px; margin: 15px 0;">
# =========== RANGE FUNCTION MASTERY ===========

# 1. Basic counting patterns
print("Counting 1-10:")
for i in range(1, 11):
    print(i, end=' ')
print()  # New line

print(" Even numbers 0-20:")
for i in range(0, 21, 2):
    print(i, end=' ')
print()

print(" Odd numbers 1-19:")
for i in range(1, 20, 2):
    print(i, end=' ')
print()

# 2. Mathematical sequences
print(" Multiples of 5 (0-50):")
for i in range(0, 51, 5):
    print(i, end=' ')
print()

print(" Powers of 2 (2^0 to 2^8):")
for exponent in range(0, 9):
    power = 2 ** exponent
    print(f"2^{exponent} = {power}")

# 3. Decimal sequences (using division)
print(" Decimal sequence (0.0 to 1.0 by 0.1):")
for i in range(0, 11):
    value = i / 10
    print(f"{value:.1f}", end=' ')
print()

# 4. Calendar and date patterns
print(" Days of month (assuming 30 days):")
for day in range(1, 31):
    if day % 7 == 0:
        print(f"{day:3}")  # New line every week
    else:
        print(f"{day:3}", end=' ')
print()

# 5. ASCII art with loops
print(" Right triangle pattern:")
for i in range(1, 6):
    print('*' * i)

print(" Pyramid pattern:")
height = 5
for i in range(1, height + 1):
    spaces = ' ' * (height - i)
    stars = '*' * (2 * i - 1)
    print(spaces + stars)

# 6. Temperature conversion table
print(" Celsius to Fahrenheit Conversion:")
print("Celsius   Fahrenheit")
print("====================")
for celsius in range(0, 101, 10):
    fahrenheit = celsius * 9/5 + 32
    print(f"{celsius:4}¬∞C   {fahrenheit:6.1f}¬∞F")</pre>
    
    <h5>Range as List (for debugging)</h5>
    <pre style="background: white; padding: 15px; margin: 15px 0; border-left: 4px solid #4CAF50;">
# Sometimes it's helpful to see what range generates
print("range(5):", list(range(5)))          # [0, 1, 2, 3, 4]
print("range(2, 8):", list(range(2, 8)))    # [2, 3, 4, 5, 6, 7]
print("range(0, 10, 3):", list(range(0, 10, 3)))  # [0, 3, 6, 9]
print("range(5, 0, -1):", list(range(5, 0, -1)))  # [5, 4, 3, 2, 1]

# This helps understand loop behavior
for i in range(3, 15, 4):
    print(f"i = {i}")  # 3, 7, 11</pre>
</div>

<h3>Advanced For Loop Techniques</h3>
<div style="background-color: #e8f5e8; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h4>üéØ Professional Loop Patterns</h4>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">
        <div>
            <h5>Pattern 1: Nested Loops</h5>
            <pre style="background: white; padding: 15px;">
# Multiplication table
print("Multiplication Table (1-5):")
print("   ", end="")
for i in range(1, 6):
    print(f"{i:4}", end="")
print()
print("   " + "-" * 20)

for i in range(1, 6):
    print(f"{i:2} |", end="")
    for j in range(1, 6):
        print(f"{i*j:4}", end="")
    print()

# Coordinate grid
print(" Coordinate Grid (3x3):")
for x in range(3):
    for y in range(3):
        print(f"({x},{y})", end=" ")
    print()

# Pattern generation
print(" Checkerboard Pattern:")
for row in range(8):
    for col in range(8):
        if (row + col) % 2 == 0:
            print("‚ñà", end="")
        else:
            print(" ", end="")
    print()

# Matrix operations
matrix1 = [[1, 2, 3], [4, 5, 6], [7, 8, 9]]
matrix2 = [[9, 8, 7], [6, 5, 4], [3, 2, 1]]
result = [[0, 0, 0], [0, 0, 0], [0, 0, 0]]

print(" Matrix Addition:")
for i in range(3):
    for j in range(3):
        result[i][j] = matrix1[i][j] + matrix2[i][j]
    
for row in result:
    print(row)</pre>
        </div>
        
        <div>
            <h5>Pattern 2: Loop Control Statements</h5>
            <pre style="background: white; padding: 15px;">
# break - exit loop immediately
print("Searching for number 7:")
for i in range(1, 11):
    if i == 7:
        print("Found 7!")
        break
    print(f"Checking {i}...")
print("Search complete.")

# continue - skip to next iteration
print(" Odd numbers only:")
for i in range(1, 11):
    if i % 2 == 0:
        continue  # Skip even numbers
    print(i, end=' ')
print()

# else with for loops
print(" Prime number check:")
for num in range(2, 10):
    for i in range(2, num):
        if num % i == 0:
            print(f"{num} is not prime (divisible by {i})")
            break
    else:
        # This else executes if loop completes without break
        print(f"{num} is prime!")

# pass - placeholder
print(" Placeholder implementation:")
for i in range(5):
    # TODO: Add actual implementation later
    pass  # Does nothing, but keeps syntax valid

# Using enumerate for index and value
print(" List with indices:")
fruits = ["apple", "banana", "cherry", "date"]
for index, fruit in enumerate(fruits, start=1):
    print(f"{index}. {fruit}")

# Using zip to loop through multiple lists
print(" Student grades:")
students = ["Alice", "Bob", "Charlie"]
grades = [85, 92, 78]
subjects = ["Math", "Science", "English"]

for student, grade, subject in zip(students, grades, subjects):
    print(f"{student:10} got {grade:3} in {subject}")</pre>
        </div>
    </div>
    
    <h5>Pattern 3: List Comprehensions (Advanced)</h5>
    <pre style="background: #f5f5f5; padding: 15px; margin: 15px 0;">
# Traditional for loop
squares = []
for i in range(1, 11):
    squares.append(i ** 2)
print("Traditional:", squares)

# List comprehension (one line!)
squares_comprehension = [i ** 2 for i in range(1, 11)]
print("Comprehension:", squares_comprehension)

# More complex examples
print(" Advanced comprehensions:")

# With condition
even_squares = [i ** 2 for i in range(1, 11) if i % 2 == 0]
print("Even squares:", even_squares)

# Nested comprehension
matrix = [[i * j for j in range(1, 4)] for i in range(1, 4)]
print("3x3 Multiplication matrix:", matrix)

# Dictionary comprehension
square_dict = {i: i ** 2 for i in range(1, 6)}
print("Square dictionary:", square_dict)

# Set comprehension
unique_chars = {char for char in "programming" if char in "aeiou"}
print("Unique vowels in 'programming':", unique_chars)

# Generator expression (memory efficient)
large_sum = sum(i for i in range(1000000) if i % 3 == 0 or i % 5 == 0)
print("Sum of multiples of 3 or 5 below 1M:", large_sum)</pre>
</div>

<h3>Today's Hands-On Exercise</h3>
<div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <b>Task 1: Data Analysis System (60 minutes)</b>
    <p>Create a data processing system:</p>
    <ul>
        <li>Generate synthetic data (sales, temperatures, etc.)</li>
        <li>Calculate statistics: mean, median, mode, standard deviation</li>
        <li>Find min, max, and range</li>
        <li>Create frequency distributions</li>
        <li>Generate histograms using ASCII art</li>
    </ul>
    
    <pre style="background: #f5f5f5; padding: 10px; margin: 10px 0;">
# Sample data generation
import random
data = [random.randint(50, 100) for _ in range(100)]  # 100 random scores

# Your analysis code here
print(f"Data points: {len(data)}")
print(f"Min: {min(data)}")
print(f"Max: {max(data)}")

# Create histogram
print(" Histogram:")
for value in range(50, 101, 10):
    count = sum(1 for x in data if value <= x < value + 10)
    bar = '‚ñà' * (count // 2)  # Scale for display
    print(f"{value:3}-{value+9:3}: {bar} ({count})")</pre>
    
    <b>Task 2: Simulation Systems (60 minutes)</b>
    <p>Create simulation programs:</p>
    <ul>
        <li><b>Coin Toss:</b> Simulate 1000 coin tosses, calculate probability</li>
        <li><b>Dice Roll:</b> Simulate rolling 2 dice 1000 times, track results</li>
        <li><b>Monty Hall Problem:</b> Simulate the game show problem</li>
        <li><b>Random Walk:</b> Simulate particle movement in 2D space</li>
    </ul>
    
    <b>Task 3: Pattern Generator (60 minutes)</b>
    <p>Create artistic patterns using nested loops:</p>
    <ul>
        <li>Geometric patterns (triangles, diamonds, circles)</li>
        <li>Text-based animations (spinning wheel, progress bars)</li>
        <li>Fractal patterns (Sierpinski triangle, tree)</li>
        <li>Chessboard with piece placement</li>
        <li>Calendar display for any month/year</li>
    </ul>
</div>

<h3>Homework Assignment</h3>
<div style="background-color: #fff0e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <b>Build a "Bank Transaction Processor"</b>
    
    <b>Requirements:</b>
    <ul>
        <li><b>Input:</b> List of transactions (amount, type, date, description)</li>
        <li><b>Processing:</b> Multiple loops for different analyses</li>
        <li><b>Output:</b> Comprehensive financial report</li>
    </ul>
    
    <b>Analysis Loops to Implement:</b>
    <pre style="background: #f5f5f5; padding: 10px;">
TRANSACTION ANALYSIS:
1. Categorization Loop: Group by type (food, rent, entertainment, etc.)
2. Monthly Summary Loop: Aggregate by month
3. Pattern Detection Loop: Find recurring payments
4. Anomaly Detection Loop: Flag unusual transactions
5. Budget Comparison Loop: Compare against budget limits
6. Cash Flow Loop: Calculate daily/weekly balances
7. Tax Preparation Loop: Identify deductible expenses

SAMPLE TRANSACTIONS:
transactions = [
    {"amount": -50.00, "type": "food", "date": "2024-01-15", "desc": "Grocery"},
    {"amount": -1200.00, "type": "rent", "date": "2024-01-01", "desc": "Monthly rent"},
    {"amount": 3000.00, "type": "income", "date": "2024-01-05", "desc": "Salary"},
    {"amount": -75.00, "type": "entertainment", "date": "2024-01-20", "desc": "Movies"},
    # ... more transactions
]</pre>
    
    <b>Report Features:</b>
    <ul>
        <li>Total income and expenses</li>
        <li>Net balance over time</li>
        <li>Category breakdown with percentages</li>
        <li>Largest transactions</li>
        <li>Spending trends (increasing/decreasing)</li>
        <li>Budget status (over/under budget)</li>
        <li>Savings rate calculation</li>
        <li>Projected future balance</li>
    </ul>
    
    <b>Advanced Features:</b>
    <ul>
        <li>Export reports to CSV file</li>
        <li>Generate ASCII charts for visualization</li>
        <li>Search/filter transactions</li>
        <li>Recurring transaction identification</li>
        <li>Tax season summary</li>
        <li>Custom report periods</li>
    </ul>
</div>

<h3>Key Learning Points:</h3>
<ol>
    <li><b>For Loop Syntax:</b> <code>for variable in sequence:</code></li>
    <li><b>range() Function:</b> Generating number sequences</li>
    <li><b>Loop Control:</b> break, continue, pass, else</li>
    <li><b>Nested Loops:</b> Loops within loops for multi-dimensional processing</li>
    <li><b>Enumerate & Zip:</b> Advanced iteration techniques</li>
    <li><b>List Comprehensions:</b> Concise loop syntax for transformations</li>
</ol>

<div style="background-color: #e8f5e8; padding: 15px; margin: 20px 0; border-radius: 5px;">
    <h3>üí° For Loop Best Practices:</h3>
    <ul>
        <li><b>Use Descriptive Variable Names:</b> <code>for student in students:</code> not <code>for x in y:</code></li>
        <li><b>Keep Loops Short:</b> Extract complex logic into functions</li>
        <li><b>Avoid Modifying List During Iteration:</b> Create a copy if needed</li>
        <li><b>Use enumerate() for Index:</b> Better than <code>range(len(list))</code></li>
        <li><b>Consider List Comprehensions:</b> More readable for simple transformations</li>
        <li><b>Use break Early:</b> Exit loops as soon as condition is met</li>
        <li><b>Watch for Infinite Loops:</b> Ensure termination condition exists</li>
    </ul>
    
    <pre style="background: white; padding: 10px; margin-top: 10px;">
# Good practices example
def process_student_grades(students, grades):
    """Process student grades with good loop practices"""
    
    # Use enumerate for index and value
    for index, student in enumerate(students, start=1):
        grade = grades[index - 1]  # Adjust for 0-based index
        
        # Early continue for invalid cases
        if grade is None:
            continue
        
        # Calculate letter grade
        if grade >= 90:
            letter = 'A'
        elif grade >= 80:
            letter = 'B'
        elif grade >= 70:
            letter = 'C'
        elif grade >= 60:
            letter = 'D'
        else:
            letter = 'F'
        
        # Format output
        print(f"{index:3}. {student:20} {grade:3}/100 ({letter})")
        
        # Early break if we found failing student for special attention
        if letter == 'F':
            print("  ‚ö†Ô∏è This student needs special attention!")
            # Don't break if we need to process all students
            # break  # Uncomment if we only need to find first failure
    
    # Optional: Return summary statistics
    average = sum(grades) / len(grades) if grades else 0
    return average</pre>
</div>

<div style="background-color: #e3f2fd; padding: 15px; margin: 20px 0; border-radius: 5px;">
    <h3>‚ö° Performance Challenge:</h3>
    <p>Compare these three ways to create a list of squares:</p>
    
    <pre style="background: white; padding: 15px; border-radius: 5px; border: 2px solid #4A90E2;">
import time

# Method 1: Traditional for loop
def method1(n):
    result = []
    for i in range(n):
        result.append(i ** 2)
    return result

# Method 2: List comprehension
def method2(n):
    return [i ** 2 for i in range(n)]

# Method 3: Generator with list conversion
def method3(n):
    return list(i ** 2 for i in range(n))

# Test performance
n = 1000000
print(f"Testing with n = {n:,}")

for i, method in enumerate([method1, method2, method3], 1):
    start = time.time()
    result = method(n)
    end = time.time()
    print(f"Method {i}: {end - start:.4f} seconds")</pre>
    
    <p><b>Your Tasks:</b></p>
    <ol>
        <li>Run this code and note the performance differences</li>
        <li>Explain why one method is faster than others</li>
        <li>Create a fourth method using <code>map()</code> function</li>
        <li>Test with different values of n (10, 1000, 1000000)</li>
        <li>When would you choose each method?</li>
    </ol>
    
    <details>
        <summary>Expected Results (click to reveal)</summary>
        <div style="background: #f5f5f5; padding: 15px; margin-top: 10px; border-radius: 5px;">
            <p>Typically, list comprehensions (Method 2) are fastest because they're optimized at the C level in Python. Traditional loops (Method 1) are slower due to Python-level function calls. Generators (Method 3) add overhead for creating the generator object.</p>
            <p><b>Memory Consideration:</b> For very large n, consider using a generator expression without converting to list if you only need to iterate once:</p>
            <pre style="background: white; padding: 10px;">
# Memory efficient for large data
def process_large_data(n):
    total = 0
    for square in (i ** 2 for i in range(n)):
        total += square
        if total > 1000000:
            break  # Can stop early
    return total</pre>
        </div>
    </details>
</div>
`
},
            "2-4": {
    icon: "fa-infinity",
    title: "While Loops (Repeat until condition changes)",
    html: `<h1>Week 2, Day 4: While Loops (Repeat Until Condition Changes)</h1>
<p>Today we learn about while loops - the flexible looping structure that continues until a condition becomes false.</p>

<div class="analogy-box">
    <b>Analogy: The Persistent Doorbell üîî</b><br/>
    
    While condition: Someone is at the door<br/>
    Loop body: Ring the bell, wait, check again<br/>
    Condition change: Person leaves or door opens<br/>
    Loop end: No one at the door anymore<br/>
    Infinite loop: Stuck with constant ringing<br/>
    Break statement: Emergency stop button
</div>

<h3>Understanding While Loops</h3>
<div style="background-color: #f0f8ff; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h4>üìä While Loop Anatomy</h4>
    
    <div style="text-align: center; margin: 20px 0;">
        <div style="display: inline-block; text-align: left; background: white; padding: 20px; border-radius: 10px; border: 2px solid #4A90E2; width: 100%; max-width: 600px;">
            <div style="display: grid; grid-template-columns: 100px 1fr; gap: 10px; align-items: start;">
                <div style="background: #4A90E2; color: white; padding: 10px; border-radius: 5px; text-align: center;">
                    <b>Keyword</b>
                </div>
                <div style="padding: 10px;">
                    <code style="background: #f5f5f5; padding: 5px; border-radius: 3px;">while</code> - Starts the loop
                </div>
                
                <div style="background: #2196F3; color: white; padding: 10px; border-radius: 5px; text-align: center;">
                    <b>Condition</b>
                </div>
                <div style="padding: 10px;">
                    <code style="background: #f5f5f5; padding: 5px; border-radius: 3px;">condition</code> - Boolean expression
                </div>
                
                <div style="background: #03A9F4; color: white; padding: 10px; border-radius: 5px; text-align: center;">
                    <b>Colon</b>
                </div>
                <div style="padding: 10px;">
                    <code style="background: #f5f5f5; padding: 5px; border-radius: 3px;">:</code> - Required syntax
                </div>
                
                <div style="background: #00BCD4; color: white; padding: 10px; border-radius: 5px; text-align: center;">
                    <b>Body</b>
                </div>
                <div style="padding: 10px;">
                    <code style="background: #f5f5f5; padding: 5px; border-radius: 3px;">indented code</code> - Executes while condition is True
                </div>
                
                <div style="background: #009688; color: white; padding: 10px; border-radius: 5px; text-align: center;">
                    <b>Update</b>
                </div>
                <div style="padding: 10px;">
                    <code style="background: #f5f5f5; padding: 5px; border-radius: 3px;">condition change</code> - Must happen inside loop
                </div>
            </div>
            
            <div style="margin-top: 20px; padding: 15px; background: #e8f5e8; border-radius: 5px;">
                <b>Basic Syntax:</b>
                <pre style="background: white; padding: 10px; margin: 10px 0;">
# Initialize control variable
counter = 0

# While loop
while counter < 5:
    # Loop body
    print(f"Counter: {counter}")
    
    # Update control variable
    counter += 1

print("Loop finished!")</pre>
            </div>
        </div>
    </div>
    
    <h5>For Loop vs While Loop Comparison</h5>
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px;">
        <div style="background: #e8f5e8; padding: 15px; border-radius: 8px;">
            <h6>‚úÖ For Loop (Definite Iteration)</h6>
            <pre style="background: white; padding: 10px;">
# Use when you know exactly how many iterations
print("Counting with for loop:")
for i in range(5):
    print(f"Iteration {i}")

# Iterating over known sequence
fruits = ["apple", "banana", "cherry"]
for fruit in fruits:
    print(fruit)

# When you need index and value
for index, value in enumerate(fruits):
    print(f"{index}: {value}")

# When you want to skip/break based on value
for i in range(10):
    if i == 3:
        continue
    if i == 7:
        break
    print(i)</pre>
            <p><b>Best for:</b> Known number of iterations, sequence processing</p>
        </div>
        
        <div style="background: #e3f2fd; padding: 15px; border-radius: 8px;">
            <h6>üîÅ While Loop (Indefinite Iteration)</h6>
            <pre style="background: white; padding: 10px;">
# Use when iterations depend on condition
print("Counting with while loop:")
counter = 0
while counter < 5:
    print(f"Counter: {counter}")
    counter += 1

# Waiting for user input
user_input = ""
while user_input.lower() != "quit":
    user_input = input("Enter command (type 'quit' to exit): ")
    print(f"You entered: {user_input}")

# Processing until condition met
import random
target = random.randint(1, 100)
guess = 0
attempts = 0

while guess != target:
    guess = int(input("Guess the number (1-100): "))
    attempts += 1
    if guess < target:
        print("Too low!")
    elif guess > target:
        print("Too high!")

print(f"Correct! It took you {attempts} attempts.")</pre>
            <p><b>Best for:</b> Unknown iterations, event-driven loops, waiting for conditions</p>
        </div>
    </div>
</div>

<h3>Common While Loop Patterns</h3>
<div style="background-color: #fff8e1; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h4>üîÅ Essential While Loop Templates</h4>
    
    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; margin: 20px 0;">
        <div style="background: #ffecb3; padding: 15px; border-radius: 8px;">
            <h5>Pattern 1: Counter Loop</h5>
            <pre style="background: white; padding: 10px; font-size: 13px;">
# Basic counting
count = 0
while count < 10:
    print(f"Count: {count}")
    count += 1  # CRITICAL: Don't forget this!

# Counting down
timer = 10
while timer > 0:
    print(f"Time remaining: {timer}")
    timer -= 1
print("Blast off!")

# Skip counting
num = 0
while num < 100:
    print(num, end=' ')
    num += 5  # Count by 5s
print()

# With break condition
counter = 0
while True:  # Infinite loop structure
    print(f"Processing item {counter}")
    counter += 1
    
    if counter >= 10:
        print("Limit reached!")
        break  # Exit loop</pre>
        </div>
        
        <div style="background: #dcedc8; padding: 15px; border-radius: 8px;">
            <h5>Pattern 2: Input Validation</h5>
            <pre style="background: white; padding: 10px; font-size: 13px;">
# Basic input validation
age = -1
while age < 0 or age > 120:
    try:
        age = int(input("Enter age (0-120): "))
        if age < 0 or age > 120:
            print("Age must be between 0 and 120!")
    except ValueError:
        print("Please enter a valid number!")

print(f"Age registered: {age}")

# Menu system
choice = ""
while choice != "4":
    print(" === MENU ===")
    print("1. Add item")
    print("2. Remove item")
    print("3. View items")
    print("4. Exit")
    
    choice = input("Enter choice: ")
    
    if choice == "1":
        print("Adding item...")
    elif choice == "2":
        print("Removing item...")
    elif choice == "3":
        print("Viewing items...")
    elif choice == "4":
        print("Goodbye!")
    else:
        print("Invalid choice!")</pre>
        </div>
        
        <div style="background: #bbdefb; padding: 15px; border-radius: 8px;">
            <h5>Pattern 3: Sentinel Value</h5>
            <pre style="background: white; padding: 10px; font-size: 13px;">
# Sentinel value pattern
total = 0
count = 0
print("Enter numbers (0 to finish):")

while True:
    try:
        number = float(input("Enter a number: "))
        
        if number == 0:  # Sentinel value
            break
        
        total += number
        count += 1
    except ValueError:
        print("Please enter a valid number!")

if count > 0:
    average = total / count
    print(f" Total: {total}")
    print(f"Count: {count}")
    print(f"Average: {average:.2f}")
else:
    print("No numbers entered.")

# Multiple sentinel values
data = []
print(" Enter student names (type 'done' to finish):")

while True:
    name = input("Student name: ").strip()
    
    if name.lower() in ['done', 'exit', 'quit', '']:
        break
    
    data.append(name)

print(f" Registered {len(data)} students: {', '.join(data)}")</pre>
        </div>
        
        <div style="background: #e1bee7; padding: 15px; border-radius: 8px;">
            <h5>Pattern 4: Condition Monitoring</h5>
            <pre style="background: white; padding: 10px; font-size: 13px;">
# Monitor system status
import time
import random

battery_level = 100
is_charging = False

print("Battery Monitor Starting...")
while battery_level > 0:
    # Simulate battery drain/charge
    if is_charging:
        battery_level = min(100, battery_level + 5)
        status = "Charging"
    else:
        battery_level = max(0, battery_level - 2)
        status = "Discharging"
    
    # Random charging events
    if random.random() < 0.1:  # 10% chance
        is_charging = not is_charging
    
    # Display status
    bar = '‚ñà' * (battery_level // 5) + '‚ñë' * (20 - battery_level // 5)
    print(f"Battery: [{bar}] {battery_level:3}% ({status})")
    
    time.sleep(0.5)  # Wait half second

print("Battery depleted! Shutting down...")

# Temperature monitoring
temperature = 20.0
target_temp = 22.0
heater_on = False

print(" Thermostat Control:")
while True:
    # Simulate temperature changes
    if heater_on:
        temperature += 0.5
    else:
        temperature -= 0.2
    
    # Control logic
    if temperature < target_temp - 0.5:
        heater_on = True
        action = "Heater ON"
    elif temperature > target_temp + 0.5:
        heater_on = False
        action = "Heater OFF"
    else:
        action = "Maintaining"
    
    print(f"Temp: {temperature:.1f}¬∞C | Target: {target_temp}¬∞C | {action}")
    time.sleep(1)</pre>
        </div>
    </div>
</div>

<h3>Preventing Infinite Loops</h3>
<div style="background-color: #ffebee; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h4>‚ö†Ô∏è The Dangers of Infinite Loops</h4>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">
        <div>
            <h5>Common Infinite Loop Mistakes</h5>
            <pre style="background: white; padding: 15px;">
# ‚ùå Forgetting to update counter
count = 0
while count < 10:
    print("This will print forever!")
    # count += 1  # MISSING! Loop never ends

# ‚ùå Using wrong comparison
num = 10
while num > 0:
    print(num)
    num += 1  # Should be -= 1, so num never becomes <= 0

# ‚ùå Condition always true
while True:
    print("Infinite loop!")
    # No break statement

# ‚ùå User input not changing condition
password = ""
while password != "secret":
    print("Access denied")
    # Forgot to ask for input again!

# ‚ùå Complex condition error
x = 0
y = 10
while x < 10 and y > 0:
    x += 1
    # y never decreases, so y > 0 always true
    print(f"x={x}, y={y}")</pre>
        </div>
        
        <div>
            <h5>Debugging Infinite Loops</h5>
            <pre style="background: white; padding: 15px;">
# ‚úÖ Add debugging prints
counter = 0
max_iterations = 1000  # Safety limit

while counter < 10:
    print(f"DEBUG: counter = {counter}")  # Track value
    # ... some code ...
    counter += 1  # Ensure this happens

# ‚úÖ Use iteration limits
attempts = 0
max_attempts = 100
user_input = ""

while user_input != "quit" and attempts < max_attempts:
    user_input = input("Enter command: ")
    attempts += 1
    print(f"Attempt {attempts}/{max_attempts}")

if attempts >= max_attempts:
    print("Maximum attempts reached!")

# ‚úÖ Add timeout mechanism
import time
start_time = time.time()
timeout = 5  # seconds

while True:
    current_time = time.time()
    if current_time - start_time > timeout:
        print("Timeout reached!")
        break
    
    # Your loop logic here
    time.sleep(0.1)  # Prevent CPU overload

# ‚úÖ Use Ctrl+C detection
try:
    while True:
        user_input = input("Type 'stop' to end: ")
        if user_input == "stop":
            break
        print(f"You typed: {user_input}")
except KeyboardInterrupt:
    print(" Program interrupted by user")</pre>
        </div>
    </div>
    
    <h5>Safe While Loop Template</h5>
    <pre style="background: #f5f5f5; padding: 15px; margin: 15px 0;">
def safe_while_loop(max_iterations=1000, timeout=30):
    """Template for safe while loop implementation"""
    import time
    
    iteration = 0
    start_time = time.time()
    condition = True  # Your actual condition
    
    while condition:
        # Safety checks
        iteration += 1
        if iteration > max_iterations:
            print(f"‚ö†Ô∏è Maximum iterations ({max_iterations}) reached")
            break
        
        current_time = time.time()
        if current_time - start_time > timeout:
            print(f"‚ö†Ô∏è Timeout ({timeout}s) reached")
            break
        
        try:
            # Your main loop logic here
            # 1. Check condition
            # 2. Perform actions
            # 3. Update variables that affect condition
            
            # Example: Process until queue is empty
            if not queue:
                condition = False  # This ends the loop
            else:
                item = queue.pop(0)
                process_item(item)
                
        except KeyboardInterrupt:
            print(" ‚èπÔ∏è Loop interrupted by user")
            break
        except Exception as e:
            print(f"‚ö†Ô∏è Error in loop: {e}")
            # Decide whether to break or continue
            
        # Optional: Add small delay for CPU friendliness
        time.sleep(0.001)
    
    print(f"Loop completed in {iteration} iterations")</pre>
</div>

<h3>Advanced While Loop Applications</h3>
<div style="background-color: #e8f5e8; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h4>üéÆ Real-World Complex Applications</h4>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">
        <div>
            <h5>Application 1: Game Loop</h5>
            <pre style="background: white; padding: 15px;">
class SimpleGame:
    def __init__(self):
        self.player_health = 100
        self.enemy_health = 100
        self.game_over = False
        
    def game_loop(self):
        """Main game loop using while"""
        round_number = 1
        
        print("üéÆ BATTLE GAME START!")
        print("=" * 40)
        
        while not self.game_over:
            print(f" === ROUND {round_number} ===")
            print(f"Your health: {self.player_health}")
            print(f"Enemy health: {self.enemy_health}")
            
            # Player turn
            print(" Your turn:")
            print("1. Attack (20 damage)")
            print("2. Heal (30 health)")
            print("3. Defend (reduces next damage)")
            
            choice = input("Choose action (1-3): ")
            
            if choice == "1":
                damage = 20
                self.enemy_health -= damage
                print(f"You attack for {damage} damage!")
            elif choice == "2":
                heal = 30
                self.player_health = min(100, self.player_health + heal)
                print(f"You heal for {heal} health!")
            elif choice == "3":
                print("You defend! Next enemy attack reduced by 50%")
                defend_bonus = True
            else:
                print("Invalid choice! You hesitate and lose your turn.")
            
            # Check win condition
            if self.enemy_health <= 0:
                print(" üéâ VICTORY! You defeated the enemy!")
                self.game_over = True
                break
            
            # Enemy turn (simplified)
            print(" Enemy turn:")
            enemy_damage = 15
            self.player_health -= enemy_damage
            print(f"Enemy attacks for {enemy_damage} damage!")
            
            # Check lose condition
            if self.player_health <= 0:
                print(" üíÄ DEFEAT! You were defeated by the enemy.")
                self.game_over = True
                break
            
            round_number += 1
        
        print(" " + "=" * 40)
        print("GAME OVER")
        print(f"Rounds survived: {round_number - 1}")

# Run the game
if __name__ == "__main__":
    game = SimpleGame()
    game.game_loop()</pre>
        </div>
        
        <div>
            <h5>Application 2: Server/Client Simulation</h5>
            <pre style="background: white; padding: 15px;">
import random
import time

class SimpleServer:
    def __init__(self):
        self.clients = []
        self.running = True
        self.request_count = 0
        
    def handle_client(self, client_id):
        """Simulate handling a client request"""
        self.request_count += 1
        processing_time = random.uniform(0.1, 1.0)
        
        print(f"Request #{self.request_count:04d} from Client {client_id}: "
              f"Processing for {processing_time:.2f}s")
        
        time.sleep(processing_time)  # Simulate work
        
        # Random chance of error
        if random.random() < 0.1:  # 10% error rate
            print(f"  ‚ö†Ô∏è Error processing request from Client {client_id}")
            return False
        
        print(f"  ‚úì Request from Client {client_id} completed successfully")
        return True
    
    def run_server(self):
        """Main server loop"""
        print("üöÄ Server starting...")
        print("Press Ctrl+C to stop server")
        
        client_id = 1
        successful_requests = 0
        failed_requests = 0
        
        try:
            while self.running:
                # Simulate new clients connecting
                if random.random() < 0.3:  # 30% chance per iteration
                    self.clients.append(client_id)
                    print(f"Client {client_id} connected. Total clients: {len(self.clients)}")
                    client_id += 1
                
                # Process client requests
                if self.clients:
                    # Get next client (FIFO)
                    current_client = self.clients.pop(0)
                    
                    # Handle request
                    success = self.handle_client(current_client)
                    
                    if success:
                        successful_requests += 1
                        # Client stays connected (goes back to end of queue)
                        self.clients.append(current_client)
                    else:
                        failed_requests += 1
                        print(f"Client {current_client} disconnected due to error")
                
                # Random server events
                if random.random() < 0.05:  # 5% chance
                    print("‚ö†Ô∏è Server maintenance in progress...")
                    time.sleep(2)
                
                # Small delay to prevent CPU overload
                time.sleep(0.5)
                
        except KeyboardInterrupt:
            print(" üõë Server shutting down...")
        
        finally:
            # Statistics
            print(" " + "=" * 50)
            print("SERVER STATISTICS")
            print("=" * 50)
            print(f"Total requests processed: {self.request_count}")
            print(f"Successful requests: {successful_requests}")
            print(f"Failed requests: {failed_requests}")
            print(f"Success rate: {successful_requests/max(self.request_count,1)*100:.1f}%")
            print(f"Clients still connected: {len(self.clients)}")
            print("=" * 50)

# Run server simulation
if __name__ == "__main__":
    server = SimpleServer()
    server.run_server()</pre>
        </div>
    </div>
    
    <h5>Application 3: Scientific Simulation</h5>
    <pre style="background: #f5f5f5; padding: 15px; margin: 15px 0;">
def simulate_population_growth():
    """Simulate population growth with carrying capacity"""
    import math
    
    # Initial conditions
    population = 1000
    growth_rate = 0.02  # 2% per year
    carrying_capacity = 10000  # Maximum sustainable population
    years = 0
    
    print("üåç POPULATION GROWTH SIMULATION")
    print("=" * 60)
    print(f"Initial population: {population:,}")
    print(f"Growth rate: {growth_rate*100:.1f}% per year")
    print(f"Carrying capacity: {carrying_capacity:,}")
    print("=" * 60)
    
    # Headers for output table
    print(f"{'Year':>6} {'Population':>12} {'Growth':>10} {'% of Capacity':>14}")
    print("-" * 60)
    
    # Simulation loop
    while population < carrying_capacity * 0.99:  # Stop at 99% capacity
        years += 1
        
        # Logistic growth formula
        # dP/dt = r * P * (1 - P/K)
        growth = growth_rate * population * (1 - population / carrying_capacity)
        population += growth
        
        # Ensure population doesn't exceed capacity
        population = min(population, carrying_capacity)
        
        # Print yearly stats
        if years <= 10 or years % 10 == 0 or population >= carrying_capacity * 0.95:
            percent_full = population / carrying_capacity * 100
            print(f"{years:6} {population:12,.0f} {growth:10,.0f} {percent_full:13.1f}%")
            
            # Visual indicator
            bars = int(percent_full / 5)  # Each bar = 5%
            visual = '‚ñà' * bars + '‚ñë' * (20 - bars)
            print(f"       [{visual}]")
        
        # Check for stabilization
        if growth < 1:
            print(f" üìä Stabilization reached after {years} years")
            print(f"   Final population: {population:,.0f}")
            print(f"   Growth has effectively stopped (<1 per year)")
            break
        
        # Safety limit
        if years > 500:
            print(" ‚ö†Ô∏è Simulation limit reached (500 years)")
            break
    
    print("=" * 60)
    print(f"Simulation complete in {years} years")
    print(f"Final population: {population:,.0f} ({population/carrying_capacity*100:.1f}% of capacity)")
    
    return years, population

# Run simulation
if __name__ == "__main__":
    simulate_population_growth()</pre>
</div>

<h3>Today's Hands-On Exercise</h3>
<div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <b>Task 1: Interactive Text Adventure Game (60 minutes)</b>
    <p>Create a text-based adventure game:</p>
    <ul>
        <li>Multiple rooms/locations with descriptions</li>
        <li>Inventory system for collecting items</li>
        <li>Puzzle solving mechanics</li>
        <li>Enemy encounters and combat</li>
        <li>Save/load game functionality</li>
        <li>Multiple endings based on choices</li>
    </ul>
    
    <pre style="background: #f5f5f5; padding: 10px; margin: 10px 0;">
# Game structure template
game_active = True
current_room = "start"
inventory = []
health = 100

while game_active:
    # Display room description
    # Show available actions
    # Get player input
    # Process commands
    # Update game state
    # Check win/lose conditions
    
    if health <= 0:
        print("üíÄ You have died!")
        game_active = False
    
    if current_room == "treasure_chamber" and "golden_key" in inventory:
        print("üéâ You found the treasure! You win!")
        game_active = False</pre>
    
    <b>Task 2: Real-time Data Monitor (60 minutes)</b>
    <p>Create a monitoring system:</p>
    <ul>
        <li>Simulate sensor data (temperature, pressure, humidity)</li>
        <li>Alert system for threshold violations</li>
        <li>Data logging to file</li>
        <li>Real-time display with updating values</li>
        <li>Historical data analysis</li>
        <li>Configurable monitoring parameters</li>
    </ul>
    
    <b>Task 3: Algorithm Implementation (60 minutes)</b>
    <p>Implement classic algorithms using while loops:</p>
    <ul>
        <li><b>Collatz Conjecture:</b> Given a number, repeatedly apply: if even ‚Üí n/2, if odd ‚Üí 3n+1</li>
        <li><b>Euclidean Algorithm:</b> Find greatest common divisor (GCD)</li>
        <li><b>Binary Search:</b> Search sorted list efficiently</li>
        <li><b>Newton's Method:</b> Find square roots</li>
        <li><b>Bubble Sort:</b> Simple sorting algorithm</li>
    </ul>
</div>

<h3>Homework Assignment</h3>
<div style="background-color: #fff0e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <b>Build a "ATM Banking System"</b>
    
    <b>Requirements:</b>
    <ul>
        <li><b>Authentication Loop:</b> PIN verification with limited attempts</li>
        <li><b>Main Menu Loop:</b> Continuous operation until logout</li>
        <li><b>Transaction Processing:</b> Deposit, withdrawal, transfer loops</li>
        <li><b>Balance Management:</b> Real-time account updates</li>
        <li><b>Security Features:</b> Suspicious activity detection</li>
    </ul>
    
    <b>System Components:</b>
    <pre style="background: #f5f5f5; padding: 10px;">
ATM SYSTEM ARCHITECTURE:
1. Authentication System (while attempts < 3)
   - PIN entry and validation
   - Account lock after failed attempts
   - Session timeout

2. Main Service Loop (while logged_in)
   - Display balance
   - Transaction menu
   - Receipt printing
   - Session management

3. Transaction Processing (nested while loops)
   - Withdrawal amount validation
   - Deposit verification
   - Transfer confirmation
   - Cash dispensing simulation

4. Administrative Functions
   - Cash replenishment
   - Transaction logging
   - System diagnostics
   - Daily report generation</pre>
    
    <b>Features to Implement:</b>
    <ul>
        <li>Multiple account support (checking, savings)</li>
        <li>Transaction history with timestamps</li>
        <li>Daily withdrawal limits</li>
        <li>Receipt generation (text file)</li>
        <li>Error handling for invalid inputs</li>
        <li>Balance inquiry without fees</li>
        <li>Fast cash options ($20, $40, $60, $100, $200)</li>
        <li>Language selection menu</li>
    </ul>
    
    <b>Advanced Features:</b>
    <ul>
        <li>Card retention simulation (swallowed card)</li>
        <li>Cash deposit envelope acceptance</li>
        <li>Check deposit (simplified)</li>
        <li>Bill payment functionality</li>
        <li>Mobile top-up</li>
        <li>Currency exchange (simulated rates)</li>
        <li>ATM locator service (mock data)</li>
    </ul>
</div>

<h3>Key Learning Points:</h3>
<ol>
    <li><b>While Loop Syntax:</b> <code>while condition:</code></li>
    <li><b>Condition Updates:</b> Must modify loop variable inside loop</li>
    <li><b>Infinite Loop Prevention:</b> Always ensure termination condition</li>
    <li><b>Break & Continue:</b> Control flow within loops</li>
    <li><b>Sentinel Values:</b> Special values that terminate loops</li>
    <li><b>Loop Patterns:</b> Counter, validation, monitoring, game loops</li>
</ol>

<div style="background-color: #e8f5e8; padding: 15px; margin: 20px 0; border-radius: 5px;">
    <h3>üí° While Loop Best Practices:</h3>
    <ul>
        <li><b>Initialize Before Loop:</b> Set loop control variables before while</li>
        <li><b>Update Inside Loop:</b> Ensure condition can become False</li>
        <li><b>Use Clear Conditions:</b> Make termination condition obvious</li>
        <li><b>Add Safety Limits:</b> Maximum iterations or timeout</li>
        <li><b>Consider Do-While Alternative:</b> Use <code>while True</code> with <code>break</code></li>
        <li><b>Handle User Interrupts:</b> Catch KeyboardInterrupt for clean exit</li>
        <li><b>Avoid Complex Conditions:</b> Use break statements for clarity</li>
    </ul>
    
    <pre style="background: white; padding: 10px; margin-top: 10px;">
# Good practice: Clear structure with safety
def process_user_requests():
    """Example of well-structured while loop"""
    max_attempts = 3
    timeout_seconds = 30
    requests_processed = 0
    
    import time
    start_time = time.time()
    
    print("Starting request processor...")
    
    while True:  # Infinite loop structure with clear break conditions
        # Safety check: Timeout
        if time.time() - start_time > timeout_seconds:
            print("‚ö†Ô∏è Processor timeout reached")
            break
        
        # Get user request
        request = input("Enter request (or 'quit' to exit): ")
        
        if request.lower() == 'quit':
            print("Exiting by user request")
            break
        
        if not request.strip():
            print("Empty request, skipping...")
            continue
        
        # Process request
        try:
            result = handle_request(request)
            requests_processed += 1
            print(f"‚úì Request processed: {result}")
            
        except Exception as e:
            print(f"‚úó Error processing request: {e}")
            max_attempts -= 1
            
            if max_attempts <= 0:
                print("‚ö†Ô∏è Too many errors, stopping processor")
                break
        
        # Optional: Add small delay
        time.sleep(0.1)
    
    # Cleanup and reporting
    print(f" Processor finished. Requests processed: {requests_processed}")
    print(f"Run time: {time.time() - start_time:.1f} seconds")
    
    return requests_processed</pre>
</div>

<div style="background-color: #e3f2fd; padding: 15px; margin: 20px 0; border-radius: 5px;">
    <h3>üéØ Loop Selection Challenge:</h3>
    <p>For each scenario, choose whether to use a for loop or while loop:</p>
    
    <div style="background: white; padding: 15px; border-radius: 8px; border: 2px solid #4A90E2;">
        <ol>
            <li>Processing each item in a shopping cart</li>
            <li>Waiting for a server response (timeout after 30 seconds)</li>
            <li>Generating multiplication table 1-10</li>
            <li>Reading lines from a file until EOF</li>
            <li>Validating user password (max 3 attempts)</li>
            <li>Iterating through dictionary keys and values</li>
            <li>Running a game until player wins or loses</li>
            <li>Counting from 1 to 100</li>
            <li>Monitoring system temperature until it stabilizes</li>
            <li>Processing a batch of 1000 images</li>
        </ol>
    </div>
    
    <details>
        <summary>Answers (click to reveal)</summary>
        <div style="background: #f5f5f5; padding: 15px; margin-top: 10px; border-radius: 5px;">
            <table style="width: 100%; border-collapse: collapse;">
                <tr style="background: #4A90E2; color: white;">
                    <th style="padding: 8px;">Scenario</th>
                    <th style="padding: 8px;">Recommended Loop</th>
                    <th style="padding: 8px;">Reason</th>
                </tr>
                <tr style="background: #f8f9fa;">
                    <td style="padding: 8px; border: 1px solid #ddd;">1. Shopping cart</td>
                    <td style="padding: 8px; border: 1px solid #ddd;"><b>For loop</b></td>
                    <td style="padding: 8px; border: 1px solid #ddd;">Known number of items</td>
                </tr>
                <tr style="background: white;">
                    <td style="padding: 8px; border: 1px solid #ddd;">2. Server response</td>
                    <td style="padding: 8px; border: 1px solid #ddd;"><b>While loop</b></td>
                    <td style="padding: 8px; border: 1px solid #ddd;">Unknown wait time, timeout condition</td>
                </tr>
                <tr style="background: #f8f9fa;">
                    <td style="padding: 8px; border: 1px solid #ddd;">3. Multiplication table</td>
                    <td style="padding: 8px; border: 1px solid #ddd;"><b>For loop</b></td>
                    <td style="padding: 8px; border: 1px solid #ddd;">Fixed range (1-10)</td>
                </tr>
                <tr style="background: white;">
                    <td style="padding: 8px; border: 1px solid #ddd;">4. Reading file</td>
                    <td style="padding: 8px; border: 1px solid #ddd;"><b>While loop</b></td>
                    <td style="padding: 8px; border: 1px solid #ddd;">Until EOF (unknown lines)</td>
                </tr>
                <tr style="background: #f8f9fa;">
                    <td style="padding: 8px; border: 1px solid #ddd;">5. Password validation</td>
                    <td style="padding: 8px; border: 1px solid #ddd;"><b>While loop</b></td>
                    <td style="padding: 8px; border: 1px solid #ddd;">Max attempts condition</td>
                </tr>
                <tr style="background: white;">
                    <td style="padding: 8px; border: 1px solid #ddd;">6. Dictionary iteration</td>
                    <td style="padding: 8px; border: 1px solid #ddd;"><b>For loop</b></td>
                    <td style="padding: 8px; border: 1px solid #ddd;">Known items (dict items)</td>
                </tr>
                <tr style="background: #f8f9fa;">
                    <td style="padding: 8px; border: 1px solid #ddd;">7. Game loop</td>
                    <td style="padding: 8px; border: 1px solid #ddd;"><b>While loop</b></td>
                    <td style="padding: 8px; border: 1px solid #ddd;">Until win/lose condition</td>
                </tr>
                <tr style="background: white;">
                    <td style="padding: 8px; border: 1px solid #ddd;">8. Counting 1-100</td>
                    <td style="padding: 8px; border: 1px solid #ddd;"><b>For loop</b></td>
                    <td style="padding: 8px; border: 1px solid #ddd;">Fixed range</td>
                </tr>
                <tr style="background: #f8f9fa;">
                    <td style="padding: 8px; border: 1px solid #ddd;">9. Temperature monitor</td>
                    <td style="padding: 8px; border: 1px solid #ddd;"><b>While loop</b></td>
                    <td style="padding: 8px; border: 1px solid #ddd;">Until stabilization (unknown time)</td>
                </tr>
                <tr style="background: white;">
                    <td style="padding: 8px; border: 1px solid #ddd;">10. Batch processing</td>
                    <td style="padding: 8px; border: 1px solid #ddd;"><b>For loop</b></td>
                    <td style="padding: 8px; border: 1px solid #ddd;">Known count (1000 images)</td>
                </tr>
            </table>
        </div>
    </details>
    
    <p style="margin-top: 15px;"><b>Rule of Thumb:</b> Use <b>for loops</b> when you know how many iterations, and <b>while loops</b> when iterations depend on changing conditions.</p>
</div>
`
},

            "3-1": {
    icon: "fa-list",
    title: "Lists and Arrays (Storing groups of items)",
    html: `<h1>Week 3, Day 1: Lists and Arrays</h1>
<p>Today we learn about Python lists - the fundamental data structure for storing collections of items.</p>

<div class="analogy-box">
    <b>Analogy: The Train with Multiple Cars üöÇ</b><br/>
    
    List: The entire train<br/>
    Elements: Individual train cars<br/>
    Index: Car number/position<br/>
    Append: Add new car at the end<br/>
    Insert: Add car at specific position<br/>
    Remove: Detach a car<br/>
    Length: Total number of cars
</div>

<h3>Understanding Python Lists</h3>
<div style="background-color: #f0f8ff; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h4>üìä List Characteristics</h4>
    
    <table style="width: 100%; border-collapse: collapse; margin: 15px 0;">
        <tr style="background: #4A90E2; color: white;">
            <th style="padding: 10px; text-align: left;">Feature</th>
            <th style="padding: 10px; text-align: left;">Description</th>
            <th style="padding: 10px; text-align: left;">Python Example</th>
            <th style="padding: 10px; text-align: left;">Result</th>
        </tr>
        <tr style="background: #f8f9fa;">
            <td style="padding: 8px; border: 1px solid #ddd;">Ordered</td>
            <td style="padding: 8px; border: 1px solid #ddd;">Elements maintain position</td>
            <td style="padding: 8px; border: 1px solid #ddd;"><code>[1, 2, 3] == [3, 2, 1]</code></td>
            <td style="padding: 8px; border: 1px solid #ddd;">False</td>
        </tr>
        <tr style="background: white;">
            <td style="padding: 8px; border: 1px solid #ddd;">Mutable</td>
            <td style="padding: 8px; border: 1px solid #ddd;">Can change elements</td>
            <td style="padding: 8px; border: 1px solid #ddd;"><code>nums[0] = 100</code></td>
            <td style="padding: 8px; border: 1px solid #ddd;">Changes list</td>
        </tr>
        <tr style="background: #f8f9fa;">
            <td style="padding: 8px; border: 1px solid #ddd;">Heterogeneous</td>
            <td style="padding: 8px; border: 1px solid #ddd;">Can mix data types</td>
            <td style="padding: 8px; border: 1px solid #ddd;"><code>[1, "hello", 3.14]</code></td>
            <td style="padding: 8px; border: 1px solid #ddd;">Valid list</td>
        </tr>
        <tr style="background: white;">
            <td style="padding: 8px; border: 1px solid #ddd;">Indexed</td>
            <td style="padding: 8px; border: 1px solid #ddd;">Access by position (0-based)</td>
            <td style="padding: 8px; border: 1px solid #ddd;"><code>lst[0]</code></td>
            <td style="padding: 8px; border: 1px solid #ddd;">First element</td>
        </tr>
        <tr style="background: #f8f9fa;">
            <td style="padding: 8px; border: 1px solid #ddd;">Dynamic</td>
            <td style="padding: 8px; border: 1px solid #ddd;">Grows/shrinks automatically</td>
            <td style="padding: 8px; border: 1px solid #ddd;"><code>lst.append(5)</code></td>
            <td style="padding: 8px; border: 1px solid #ddd;">Adds element</td>
        </tr>
    </table>
    
    <h5>Creating Lists - Different Methods</h5>
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px;">
        <div style="background: #e8f5e8; padding: 15px; border-radius: 8px;">
            <h6>Basic Creation Methods</h6>
            <pre style="background: white; padding: 10px;">
# 1. Square brackets (most common)
empty_list = []
numbers = [1, 2, 3, 4, 5]
mixed = [1, "two", 3.0, True]
nested = [[1, 2], [3, 4]]

# 2. list() constructor
from_string = list("hello")      # ['h', 'e', 'l', 'l', 'o']
from_tuple = list((1, 2, 3))     # [1, 2, 3]
from_range = list(range(5))      # [0, 1, 2, 3, 4]

# 3. List comprehension
squares = [x**2 for x in range(10)]
evens = [x for x in range(20) if x % 2 == 0]

# 4. Multiplication (repeating)
zeros = [0] * 10                 # [0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
pattern = ["a", "b"] * 3         # ['a', 'b', 'a', 'b', 'a', 'b']

print("Empty list:", empty_list)
print("Numbers:", numbers)
print("Mixed:", mixed)
print("From string:", from_string)
print("Squares:", squares[:5])  # First 5 elements</pre>
        </div>
        
        <div style="background: #e3f2fd; padding: 15px; border-radius: 8px;">
            <h6>Visualizing List Structure</h6>
            <div style="text-align: center; margin: 10px 0;">
                <div style="display: inline-block; background: #f5f5f5; padding: 15px; border-radius: 8px; border: 2px solid #4A90E2;">
                    <div style="font-weight: bold; margin-bottom: 10px;">List: fruits = ["apple", "banana", "cherry"]</div>
                    <div style="display: flex; gap: 5px; justify-content: center;">
                        <div style="background: #4CAF50; color: white; padding: 15px; border-radius: 5px; min-width: 80px; text-align: center;">
                            Index 0<br/><b>"apple"</b>
                        </div>
                        <div style="background: #FF9800; color: white; padding: 15px; border-radius: 5px; min-width: 80px; text-align: center;">
                            Index 1<br/><b>"banana"</b>
                        </div>
                        <div style="background: #E91E63; color: white; padding: 15px; border-radius: 5px; min-width: 80px; text-align: center;">
                            Index 2<br/><b>"cherry"</b>
                        </div>
                    </div>
                    <div style="display: flex; gap: 5px; justify-content: center; margin-top: 10px;">
                        <div style="padding: 5px; min-width: 80px; text-align: center;">
                            fruits[0]
                        </div>
                        <div style="padding: 5px; min-width: 80px; text-align: center;">
                            fruits[1]
                        </div>
                        <div style="padding: 5px; min-width: 80px; text-align: center;">
                            fruits[2]
                        </div>
                    </div>
                    <div style="margin-top: 15px; font-size: 14px;">
                        <b>Memory Address:</b> 0x7f8c1234<br/>
                        <b>Length:</b> 3 elements<br/>
                        <b>Negative Indexing:</b> fruits[-1] = "cherry"
                    </div>
                </div>
            </div>
            
            <div style="margin-top: 15px; background: #fff3cd; padding: 10px; border-radius: 5px;">
                <b>Key Concept:</b> Lists store references to objects in memory. When you access <code>fruits[0]</code>, Python follows the reference to get "apple".
            </div>
        </div>
    </div>
</div>

<h3>List Operations and Methods</h3>
<div style="background-color: #fff8e1; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h4>üîß Essential List Operations</h4>
    
    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; margin: 20px 0;">
        <div style="background: #ffecb3; padding: 15px; border-radius: 8px;">
            <h5>Accessing Elements</h5>
            <pre style="background: white; padding: 10px; font-size: 13px;">
# Create a sample list
fruits = ["apple", "banana", "cherry", "date", "elderberry"]

# Positive indexing (0-based)
print("Positive indexing:")
print(f"fruits[0] = {fruits[0]}")      # apple
print(f"fruits[2] = {fruits[2]}")      # cherry
print(f"fruits[4] = {fruits[4]}")      # elderberry

# Negative indexing (from end)
print(" Negative indexing:")
print(f"fruits[-1] = {fruits[-1]}")    # elderberry (last)
print(f"fruits[-2] = {fruits[-2]}")    # date (second last)
print(f"fruits[-5] = {fruits[-5]}")    # apple (first)

# Length of list
length = len(fruits)
print(f" Length of list: {length}")  # 5

# Check if element exists
print(" Membership check:")
print(f"'banana' in fruits: {'banana' in fruits}")      # True
print(f"'grape' in fruits: {'grape' in fruits}")        # False
print(f"'date' not in fruits: {'date' not in fruits}")  # False

# Index method (find position)
print(" Finding positions:")
print(f"Index of 'cherry': {fruits.index('cherry')}")   # 2
print(f"Count of 'apple': {fruits.count('apple')}")     # 1

# Handling errors
try:
    print(fruits[10])  # IndexError
except IndexError as e:
    print(f" Error accessing index 10: {e}")

try:
    print(fruits.index('grape'))  # ValueError
except ValueError as e:
    print(f"Error finding 'grape': {e}")</pre>
        </div>
        
        <div style="background: #dcedc8; padding: 15px; border-radius: 8px;">
            <h5>Modifying Lists</h5>
            <pre style="background: white; padding: 10px; font-size: 13px;">
# Starting list
numbers = [10, 20, 30, 40, 50]
print("Original:", numbers)

# Change element by index
numbers[1] = 25
print("After numbers[1] = 25:", numbers)  # [10, 25, 30, 40, 50]

# Add elements
numbers.append(60)          # Add to end
print("After append(60):", numbers)

numbers.insert(2, 35)       # Insert at index 2
print("After insert(2, 35):", numbers)

# Extend list (add multiple)
numbers.extend([70, 80, 90])
print("After extend([70,80,90]):", numbers)

# Remove elements
numbers.remove(35)          # Remove first occurrence of 35
print("After remove(35):", numbers)

popped = numbers.pop()      # Remove and return last element
print(f"After pop(): {numbers}, popped: {popped}")

popped = numbers.pop(2)     # Remove element at index 2
print(f"After pop(2): {numbers}, popped: {popped}")

# Clear list
numbers_copy = numbers.copy()  # Make copy first
numbers.clear()
print(f"After clear(): {numbers}")
print(f"Copy preserved: {numbers_copy}")

# List concatenation
list1 = [1, 2, 3]
list2 = [4, 5, 6]
combined = list1 + list2    # New list
print(f" Concatenation: {list1} + {list2} = {combined}")

# List repetition
repeated = list1 * 3
print(f"Repetition: {list1} * 3 = {repeated}")

# In-place modification
list1 += [7, 8, 9]          # Same as list1.extend([7,8,9])
print(f"In-place extend: {list1}")</pre>
        </div>
        
        <div style="background: #bbdefb; padding: 15px; border-radius: 8px;">
            <h5>Sorting and Reversing</h5>
            <pre style="background: white; padding: 10px; font-size: 13px;">
# Sorting examples
numbers = [42, 17, 89, 5, 23, 56]
print("Original numbers:", numbers)

# Sort in-place (modifies original)
numbers.sort()
print("After sort():", numbers)

# Sort in reverse order
numbers.sort(reverse=True)
print("After sort(reverse=True):", numbers)

# Create sorted copy (original unchanged)
unsorted = [42, 17, 89, 5, 23, 56]
sorted_copy = sorted(unsorted)
print(f" Original: {unsorted}")
print(f"Sorted copy: {sorted_copy}")
print(f"Original unchanged: {unsorted}")

# String sorting
fruits = ["banana", "Apple", "cherry", "date"]
fruits.sort()  # Case-sensitive
print(" Case-sensitive sort:", fruits)

fruits.sort(key=str.lower)  # Case-insensitive
print("Case-insensitive sort:", fruits)

# Custom sorting
students = [
    {"name": "Alice", "grade": 85},
    {"name": "Bob", "grade": 92},
    {"name": "Charlie", "grade": 78}
]

# Sort by grade
students.sort(key=lambda x: x["grade"])
print(" Students sorted by grade:")
for student in students:
    print(f"  {student['name']}: {student['grade']}")

# Reverse lists
colors = ["red", "green", "blue", "yellow"]
print(f" Original colors: {colors}")

colors.reverse()  # In-place reversal
print(f"After reverse(): {colors}")

reversed_copy = list(reversed(colors))  # Create reversed copy
print(f"Reversed copy: {reversed_copy}")
print(f"Original after reversal: {colors}")</pre>
        </div>
        
        <div style="background: #e1bee7; padding: 15px; border-radius: 8px;">
            <h5>List Slicing</h5>
            <pre style="background: white; padding: 10px; font-size: 13px;">
# Basic list for slicing
numbers = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
print("Original:", numbers)

# Basic slice: list[start:stop]
slice1 = numbers[2:6]       # Elements 2 through 5
print("numbers[2:6]:", slice1)  # [2, 3, 4, 5]

# Omitting start (defaults to 0)
slice2 = numbers[:4]        # First 4 elements
print("numbers[:4]:", slice2)   # [0, 1, 2, 3]

# Omitting stop (defaults to end)
slice3 = numbers[6:]        # From index 6 to end
print("numbers[6:]:", slice3)   # [6, 7, 8, 9]

# Step parameter: list[start:stop:step]
slice4 = numbers[::2]       # Every 2nd element
print("numbers[::2]:", slice4)  # [0, 2, 4, 6, 8]

slice5 = numbers[1::2]      # Every 2nd element starting at 1
print("numbers[1::2]:", slice5) # [1, 3, 5, 7, 9]

slice6 = numbers[2:8:3]     # From index 2 to 7, every 3rd
print("numbers[2:8:3]:", slice6) # [2, 5]

# Negative step (reverse)
slice7 = numbers[::-1]      # Reverse the list
print("numbers[::-1]:", slice7) # [9, 8, 7, 6, 5, 4, 3, 2, 1, 0]

slice8 = numbers[8:2:-2]    # From 8 down to 3, every 2nd
print("numbers[8:2:-2]:", slice8) # [8, 6, 4]

# Negative indices in slices
slice9 = numbers[-5:-2]     # From 5th last to 3rd last
print("numbers[-5:-2]:", slice9)  # [5, 6, 7]

# Modifying slices (changes original list!)
print(" Modifying slices:")
numbers[2:5] = [20, 30, 40]  # Replace elements 2-4
print("After numbers[2:5] = [20,30,40]:", numbers)

# Deleting slices
numbers[6:8] = []           # Delete elements 6-7
print("After numbers[6:8] = []:", numbers)

# Inserting with slices
numbers[3:3] = [25, 26]     # Insert at index 3
print("After numbers[3:3] = [25,26]:", numbers)

# Practical example: Get first and last halves
data = list(range(20))
mid = len(data) // 2
first_half = data[:mid]
second_half = data[mid:]
print(f" First half of 0-19: {first_half}")
print(f"Second half of 0-19: {second_half}")</pre>
        </div>
    </div>
</div>

<h3>Practical List Applications</h3>
<div style="background-color: #e8f5e8; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h4>üìã Real-World List Examples</h4>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">
        <div>
            <h5>Example 1: Student Grade Management</h5>
            <pre style="background: white; padding: 15px;">
class Gradebook:
    def __init__(self):
        self.students = []
        self.grades = []
    
    def add_student(self, name, grade):
        """Add a student and their grade"""
        self.students.append(name)
        self.grades.append(grade)
        print(f"Added student: {name} with grade {grade}")
    
    def calculate_statistics(self):
        """Calculate grade statistics"""
        if not self.grades:
            return "No grades available"
        
        avg = sum(self.grades) / len(self.grades)
        highest = max(self.grades)
        lowest = min(self.grades)
        
        # Find students with highest grade
        top_students = []
        for i, grade in enumerate(self.grades):
            if grade == highest:
                top_students.append(self.students[i])
        
        return {
            "average": avg,
            "highest": highest,
            "lowest": lowest,
            "top_students": top_students,
            "count": len(self.grades)
        }
    
    def get_student_rank(self, student_name):
        """Get student's rank based on grade"""
        if student_name not in self.students:
            return "Student not found"
        
        # Create list of (grade, name) pairs
        grade_pairs = list(zip(self.grades, self.students))
        
        # Sort by grade descending
        grade_pairs.sort(reverse=True)
        
        # Find rank (1-indexed)
        for rank, (grade, name) in enumerate(grade_pairs, 1):
            if name == student_name:
                return rank
        
        return "Student not found"
    
    def display_grade_report(self):
        """Display formatted grade report"""
        if not self.students:
            print("No students in gradebook")
            return
        
        print("=" * 50)
        print("GRADE REPORT")
        print("=" * 50)
        
        # Display all students and grades
        for i, (name, grade) in enumerate(zip(self.students, self.grades), 1):
            print(f"{i:3}. {name:20} {grade:5.1f}")
        
        # Display statistics
        stats = self.calculate_statistics()
        print("-" * 50)
        print(f"Total students: {stats['count']}")
        print(f"Average grade: {stats['average']:.1f}")
        print(f"Highest grade: {stats['highest']:.1f}")
        print(f"Lowest grade: {stats['lowest']:.1f}")
        print(f"Top student(s): {', '.join(stats['top_students'])}")
        print("=" * 50)

# Usage example
if __name__ == "__main__":
    gb = Gradebook()
    
    # Add some students
    gb.add_student("Alice Johnson", 92.5)
    gb.add_student("Bob Smith", 85.0)
    gb.add_student("Charlie Brown", 78.5)
    gb.add_student("Diana Prince", 95.0)
    gb.add_student("Edward Norton", 88.0)
    
    # Display report
    gb.display_grade_report()
    
    # Get specific student rank
    print(f" Alice's rank: {gb.get_student_rank('Alice Johnson')}")
    print(f"Diana's rank: {gb.get_student_rank('Diana Prince')}")</pre>
        </div>
        
        <div>
            <h5>Example 2: Inventory Management System</h5>
            <pre style="background: white; padding: 15px;">
class InventorySystem:
    def __init__(self):
        self.products = []
        self.quantities = []
        self.prices = []
    
    def add_product(self, name, quantity, price):
        """Add or update product in inventory"""
        if name in self.products:
            # Update existing product
            index = self.products.index(name)
            self.quantities[index] += quantity
            print(f"Updated {name}: +{quantity} units")
        else:
            # Add new product
            self.products.append(name)
            self.quantities.append(quantity)
            self.prices.append(price)
            print(f"Added new product: {name}")
    
    def sell_product(self, name, quantity):
        """Sell product from inventory"""
        if name not in self.products:
            print(f"Product '{name}' not found")
            return False
        
        index = self.products.index(name)
        
        if self.quantities[index] < quantity:
            print(f"Insufficient stock. Available: {self.quantities[index]}")
            return False
        
        # Update quantity
        self.quantities[index] -= quantity
        
        # Calculate revenue
        revenue = quantity * self.prices[index]
        print(f"Sold {quantity} of {name} for \${revenue:.2f}")
        
        # Remove if quantity reaches zero
        if self.quantities[index] == 0:
            self.remove_product(name)
        
        return True
    
    def remove_product(self, name):
        """Remove product completely from inventory"""
        if name not in self.products:
            print(f"Product '{name}' not found")
            return
        
        index = self.products.index(name)
        
        # Remove from all lists
        self.products.pop(index)
        self.quantities.pop(index)
        self.prices.pop(index)
        
        print(f"Removed product: {name}")
    
    def restock_low_inventory(self, threshold=10):
        """Identify products needing restock"""
        low_stock = []
        
        for i, quantity in enumerate(self.quantities):
            if quantity < threshold:
                low_stock.append((self.products[i], quantity))
        
        if low_stock:
            print(f" ‚ö†Ô∏è  Products needing restock (below {threshold}):")
            for product, qty in low_stock:
                print(f"  {product}: {qty} units")
        else:
            print(f"All products have sufficient stock (‚â• {threshold} units)")
        
        return low_stock
    
    def calculate_inventory_value(self):
        """Calculate total value of inventory"""
        total_value = 0
        
        for i in range(len(self.products)):
            product_value = self.quantities[i] * self.prices[i]
            total_value += product_value
        
        return total_value
    
    def display_inventory(self):
        """Display formatted inventory report"""
        if not self.products:
            print("Inventory is empty")
            return
        
        print("=" * 60)
        print("INVENTORY REPORT")
        print("=" * 60)
        print(f"{'Product':20} {'Quantity':10} {'Price':10} {'Value':12}")
        print("-" * 60)
        
        for i in range(len(self.products)):
            value = self.quantities[i] * self.prices[i]
            print(f"{self.products[i]:20} {self.quantities[i]:10} "
                  f"\${self.prices[i]:9.2f} \${value:11.2f}")
        
        total_value = self.calculate_inventory_value()
        print("-" * 60)
        print(f"{'TOTAL VALUE':50} \${total_value:11.2f}")
        print("=" * 60)

# Usage example
if __name__ == "__main__":
    inv = InventorySystem()
    
    # Add initial inventory
    inv.add_product("Laptop", 25, 899.99)
    inv.add_product("Mouse", 100, 24.99)
    inv.add_product("Keyboard", 50, 79.99)
    inv.add_product("Monitor", 15, 299.99)
    
    # Display inventory
    inv.display_inventory()
    
    # Process sales
    print(" Processing sales...")
    inv.sell_product("Laptop", 3)
    inv.sell_product("Mouse", 25)
    inv.sell_product("Monitor", 2)
    
    # Add more stock
    print(" Restocking...")
    inv.add_product("Mouse", 50, 24.99)
    
    # Check low inventory
    inv.restock_low_inventory(20)
    
    # Final inventory
    print(" Final inventory:")
    inv.display_inventory()</pre>
        </div>
    </div>
    
    <h5>Example 3: Task Management System</h5>
    <pre style="background: #f5f5f5; padding: 15px; margin: 15px 0;">
class TaskManager:
    def __init__(self):
        self.tasks = []
        self.priorities = []  # 1=High, 2=Medium, 3=Low
        self.completed = []
    
    def add_task(self, description, priority=2):
        """Add a new task with priority"""
        self.tasks.append(description)
        self.priorities.append(priority)
        self.completed.append(False)
        
        priority_names = {1: "High", 2: "Medium", 3: "Low"}
        print(f"Added task: {description} [{priority_names[priority]} priority]")
    
    def complete_task(self, task_index):
        """Mark task as completed"""
        if 0 <= task_index < len(self.tasks):
            if not self.completed[task_index]:
                self.completed[task_index] = True
                print(f"Completed: {self.tasks[task_index]}")
            else:
                print(f"Task already completed: {self.tasks[task_index]}")
        else:
            print(f"Invalid task index: {task_index}")
    
    def remove_task(self, task_index):
        """Remove a task by index"""
        if 0 <= task_index < len(self.tasks):
            removed = self.tasks.pop(task_index)
            self.priorities.pop(task_index)
            self.completed.pop(task_index)
            print(f"Removed task: {removed}")
        else:
            print(f"Invalid task index: {task_index}")
    
    def get_priority_tasks(self, priority_level):
        """Get all tasks with specific priority"""
        priority_tasks = []
        
        for i in range(len(self.tasks)):
            if self.priorities[i] == priority_level and not self.completed[i]:
                priority_tasks.append((i, self.tasks[i]))
        
        return priority_tasks
    
    def reorder_by_priority(self):
        """Reorder tasks by priority (High to Low)"""
        # Combine all data
        combined = list(zip(self.priorities, self.tasks, self.completed, range(len(self.tasks))))
        
        # Sort by priority (1=High first), then by original order
        combined.sort(key=lambda x: (x[0], x[3]))
        
        # Unzip back to separate lists
        self.priorities = [item[0] for item in combined]
        self.tasks = [item[1] for item in combined]
        self.completed = [item[2] for item in combined]
        
        print("Tasks reordered by priority")
    
    def display_tasks(self, show_completed=False):
        """Display all tasks with status"""
        if not self.tasks:
            print("No tasks available")
            return
        
        print("=" * 70)
        print("TASK LIST")
        print("=" * 70)
        
        pending_count = 0
        completed_count = 0
        
        for i in range(len(self.tasks)):
            # Skip completed tasks if not showing them
            if self.completed[i] and not show_completed:
                completed_count += 1
                continue
            
            # Priority indicator
            priority_indicator = {1: "üî¥ HIGH", 2: "üü° MEDIUM", 3: "üü¢ LOW"}
            priority = priority_indicator[self.priorities[i]]
            
            # Completion indicator
            status = "‚úì" if self.completed[i] else "‚óª"
            
            print(f"{i:3}. [{status}] {priority:10} - {self.tasks[i]}")
            
            if self.completed[i]:
                completed_count += 1
            else:
                pending_count += 1
        
        print("-" * 70)
        print(f"Pending: {pending_count} | Completed: {completed_count} | Total: {len(self.tasks)}")
        
        # Show priority breakdown
        if pending_count > 0:
            high = len([p for p in self.priorities if p == 1])
            medium = len([p for p in self.priorities if p == 2])
            low = len([p for p in self.priorities if p == 3])
            print(f"Priority: High={high} | Medium={medium} | Low={low}")
        
        print("=" * 70)

# Usage example
if __name__ == "__main__":
    tm = TaskManager()
    
    # Add tasks
    tm.add_task("Finish project report", priority=1)
    tm.add_task("Buy groceries", priority=2)
    tm.add_task("Call dentist", priority=1)
    tm.add_task("Read book", priority=3)
    tm.add_task("Plan weekend trip", priority=2)
    
    # Display tasks
    tm.display_tasks()
    
    # Complete some tasks
    print(" Completing tasks...")
    tm.complete_task(1)  # Buy groceries
    tm.complete_task(2)  # Call dentist
    
    # Reorder by priority
    tm.reorder_by_priority()
    
    # Display with completed tasks
    print(" All tasks (including completed):")
    tm.display_tasks(show_completed=True)
    
    # Show high priority tasks
    print(" High priority tasks:")
    high_tasks = tm.get_priority_tasks(1)
    for idx, task in high_tasks:
        print(f"  {idx}. {task}")</pre>
</div>

<h3>Today's Hands-On Exercise</h3>
<div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <b>Task 1: Shopping Cart System (60 minutes)</b>
    <p>Create a shopping cart with:</p>
    <ul>
        <li>Add/remove items with quantities</li>
        <li>Calculate total cost with tax</li>
        <li>Apply discounts and coupons</li>
        <li>Track inventory levels</li>
        <li>Generate itemized receipt</li>
        <li>Save/Load cart from file</li>
    </ul>
    
    <pre style="background: #f5f5f5; padding: 10px; margin: 10px 0;">
# Starter structure
class ShoppingCart:
    def __init__(self):
        self.items = []      # Product names
        self.prices = []     # Unit prices
        self.quantities = [] # Quantities
        self.inventory = {}  # Available stock
    
    def add_item(self, product, price, quantity=1):
        # Check inventory
        # Update quantities
        # Calculate running total
        pass
    
    def remove_item(self, product, quantity=1):
        # Reduce quantity or remove completely
        # Restore inventory
        pass
    
    def calculate_total(self, tax_rate=0.08):
        # Sum all items
        # Apply tax
        # Apply discounts
        pass
    
    def display_receipt(self):
        # Format and print receipt
        pass</pre>
    
    <b>Task 2: Data Analysis Tool (60 minutes)</b>
    <p>Create a data analysis tool that:</p>
    <ul>
        <li>Accepts numerical data from user input or file</li>
        <li>Calculates: mean, median, mode, standard deviation</li>
        <li>Finds min, max, range, and quartiles</li>
        <li>Creates frequency distribution tables</li>
        <li>Generates simple ASCII histograms</li>
        <li>Detects outliers using statistical methods</li>
    </ul>
    
    <b>Task 3: Game Leaderboard System (60 minutes)</b>
    <p>Create a game leaderboard:</p>
    <ul>
        <li>Store player names and scores</li>
        <li>Sort by score (descending)</li>
        <li>Display top N players</li>
        <li>Calculate player ranks</li>
        <li>Track high scores per player</li>
        <li>Save/Load leaderboard to file</li>
        <li>Add timestamps for scores</li>
    </ul>
</div>

<h3>Homework Assignment</h3>
<div style="background-color: #fff0e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <b>Build a "Library Management System"</b>
    
    <b>Requirements:</b>
    <ul>
        <li><b>Book Storage:</b> Multiple lists for book attributes</li>
        <li><b>Patron Management:</b> Track library members</li>
        <li><b>Check-in/Check-out:</b> Loan tracking system</li>
        <li><b>Search Functions:</b> Find books by various criteria</li>
        <li><b>Reporting:</b> Generate library statistics</li>
    </ul>
    
    <b>Data Structures Needed:</b>
    <pre style="background: #f5f5f5; padding: 10px;">
LIBRARY DATA STRUCTURE:
1. Books Information:
   - titles = ["Book1", "Book2", ...]
   - authors = ["Author1", "Author2", ...]
   - isbns = ["123456", "789012", ...]
   - genres = ["Fiction", "Non-fiction", ...]
   - quantities = [5, 3, ...]  # Total copies
   - available = [3, 1, ...]   # Available copies

2. Patrons Information:
   - patron_ids = ["P001", "P002", ...]
   - patron_names = ["Name1", "Name2", ...]
   - borrowed_books = [[isbn1, isbn2], [], ...]  # List of lists

3. Loans Tracking:
   - loan_records = []  # Each record: (patron_id, isbn, checkout_date, due_date, returned)</pre>
    
    <b>Features to Implement:</b>
    <ul>
        <li>Add new books to library collection</li>
        <li>Register new library patrons</li>
        <li>Check out books (update availability)</li>
        <li>Return books and calculate late fees</li>
        <li>Search books by title, author, or genre</li>
        <li>View patron's borrowed books</li>
        <li>Generate overdue book reports</li>
        <li>Display library statistics</li>
    </ul>
    
    <b>Advanced Features:</b>
    <ul>
        <li>Book reservations system</li>
        <li>Renewal functionality</li>
        <li>Popular books ranking</li>
        <li>Fine calculation system</li>
        <li>Export reports to text files</li>
        <li>Data persistence (save/load from files)</li>
        <li>Multiple library branches support</li>
    </ul>
</div>

<h3>Key Learning Points:</h3>
<ol>
    <li><b>List Creation:</b> Square brackets, list(), comprehensions</li>
    <li><b>Indexing:</b> Positive (0-based) and negative indexing</li>
    <li><b>Slicing:</b> Accessing sublists with [start:stop:step]</li>
    <li><b>List Methods:</b> append(), insert(), remove(), pop(), sort(), reverse()</li>
    <li><b>List Operations:</b> + (concatenation), * (repetition), in (membership)</li>
    <li><b>Practical Applications:</b> Multiple parallel lists for related data</li>
</ol>

<div style="background-color: #e8f5e8; padding: 15px; margin: 20px 0; border-radius: 5px;">
    <h3>üí° List Best Practices:</h3>
    <ul>
        <li><b>Use List Comprehensions:</b> Cleaner than loops for simple transformations</li>
        <li><b>Pre-allocate Lists:</b> Use <code>[None] * n</code> for fixed-size lists</li>
        <li><b>Copy Lists Properly:</b> Use <code>list.copy()</code> or <code>list[:]</code> for shallow copies</li>
        <li><b>Use enumerate()</b> When you need both index and value</li>
        <li><b>Avoid Modifying While Iterating:</b> Create a copy or use list comprehension</li>
        <li><b>Use Slicing for Subsets:</b> More readable than loops for getting parts of list</li>
        <li><b>Consider Data Class:</b> For complex data, consider using classes instead of parallel lists</li>
    </ul>
    
    <pre style="background: white; padding: 10px; margin-top: 10px;">
# Good practices examples

# 1. List comprehension vs loop
# Instead of:
squares = []
for i in range(10):
    squares.append(i**2)

# Use:
squares = [i**2 for i in range(10)]

# 2. Pre-allocate when size is known
# Instead of appending in loop:
results = []
for _ in range(1000):
    results.append(0)

# Use:
results = [0] * 1000

# 3. Proper copying
original = [1, 2, 3, [4, 5]]

# Shallow copy (nested lists still shared)
shallow = original.copy()  # or original[:]

# Deep copy for nested structures
import copy
deep = copy.deepcopy(original)

# 4. Using enumerate
fruits = ['apple', 'banana', 'cherry']
# Instead of:
for i in range(len(fruits)):
    print(i, fruits[i])

# Use:
for i, fruit in enumerate(fruits):
    print(i, fruit)

# 5. Safe modification while iterating
# Instead of modifying while iterating:
numbers = [1, 2, 3, 4, 5]
# for i, num in enumerate(numbers):  # DANGEROUS!
#     if num % 2 == 0:
#         numbers.pop(i)

# Create new list:
numbers = [num for num in numbers if num % 2 != 0]

# Or iterate over copy:
for num in numbers[:]:  # Iterate over copy
    if num % 2 == 0:
        numbers.remove(num)</pre>
</div>

<div style="background-color: #e3f2fd; padding: 15px; margin: 20px 0; border-radius: 5px;">
    <h3>üß† List Challenges:</h3>
    
    <div style="background: white; padding: 15px; border-radius: 8px; border: 2px solid #4A90E2; margin-bottom: 15px;">
        <h4>Challenge 1: List Rotation</h4>
        <p>Write a function that rotates a list by k positions. For example:</p>
        <pre style="background: #f5f5f5; padding: 10px;">
rotate_list([1, 2, 3, 4, 5], 2) ‚Üí [4, 5, 1, 2, 3]
rotate_list([1, 2, 3, 4, 5], -1) ‚Üí [2, 3, 4, 5, 1]</pre>
    </div>
    
    <div style="background: white; padding: 15px; border-radius: 8px; border: 2px solid #4A90E2; margin-bottom: 15px;">
        <h4>Challenge 2: Matrix Operations</h4>
        <p>Implement basic matrix operations using nested lists:</p>
        <ul>
            <li>Matrix addition and subtraction</li>
            <li>Matrix multiplication</li>
            <li>Transpose a matrix</li>
            <li>Find determinant of 2x2 or 3x3 matrix</li>
        </ul>
    </div>
    
    <div style="background: white; padding: 15px; border-radius: 8px; border: 2px solid #4A90E2;">
        <h4>Challenge 3: List Flattening</h4>
        <p>Write a function that flattens arbitrarily nested lists:</p>
        <pre style="background: #f5f5f5; padding: 10px;">
flatten([1, [2, [3, 4], 5], 6]) ‚Üí [1, 2, 3, 4, 5, 6]
flatten([[1, 2], [3, 4], [5, 6]]) ‚Üí [1, 2, 3, 4, 5, 6]</pre>
        <p><b>Bonus:</b> Handle mixed types and preserve order.</p>
    </div>
    
    <details>
        <summary>Hint for Challenge 1</summary>
        <div style="background: #f5f5f5; padding: 15px; margin-top: 10px; border-radius: 5px;">
            <p>Think about using slicing: <code>lst[-k:] + lst[:-k]</code> for positive rotation, and <code>lst[k:] + lst[:k]</code> for negative rotation.</p>
            <p>Don't forget to handle cases where k is larger than the list length!</p>
        </div>
    </details>
</div>
`
},
            "3-2": {
    icon: "fa-book",
    title: "Dictionaries and Maps (Key-Value pairs)",
    html: `<h1>Week 3, Day 2: Dictionaries and Maps (Key-Value Pairs)</h1>
<p>Today we learn about Python dictionaries - the powerful data structure for storing key-value pairs, perfect for lookups and mappings.</p>

<div class="analogy-box">
    <b>Analogy: The Phone Book/Contact List üì±</b><br/>
    
    Dictionary: Entire phone book<br/>
    Keys: People's names<br/>
    Values: Phone numbers<br/>
    Lookup: Find number by name<br/>
    Update: Change someone's number<br/>
    Add: Add new contact<br/>
    Remove: Delete contact
</div>

<h3>Understanding Python Dictionaries</h3>
<div style="background-color: #f0f8ff; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h4>üìä Dictionary Characteristics</h4>
    
    <table style="width: 100%; border-collapse: collapse; margin: 15px 0;">
        <tr style="background: #4A90E2; color: white;">
            <th style="padding: 10px; text-align: left;">Feature</th>
            <th style="padding: 10px; text-align: left;">Description</th>
            <th style="padding: 10px; text-align: left;">Python Example</th>
            <th style="padding: 10px; text-align: left;">Notes</th>
        </tr>
        <tr style="background: #f8f9fa;">
            <td style="padding: 8px; border: 1px solid #ddd;">Key-Value Pairs</td>
            <td style="padding: 8px; border: 1px solid #ddd;">Store data as pairs: key ‚Üí value</td>
            <td style="padding: 8px; border: 1px solid #ddd;"><code>{"name": "Alice", "age": 30}</code></td>
            <td style="padding: 8px; border: 1px solid #ddd;">Keys must be unique</td>
        </tr>
        <tr style="background: white;">
            <td style="padding: 8px; border: 1px solid #ddd;">Unordered (Python 3.6+)</td>
            <td style="padding: 8px; border: 1px solid #ddd;">Insertion order preserved in 3.7+</td>
            <td style="padding: 8px; border: 1px solid #ddd;"><code>dict1 == dict2</code></td>
            <td style="padding: 8px; border: 1px solid #ddd;">Order doesn't matter for equality</td>
        </tr>
        <tr style="background: #f8f9fa;">
            <td style="padding: 8px; border: 1px solid #ddd;">Mutable</td>
            <td style="padding: 8px; border: 1px solid #ddd;">Can change values, add/remove keys</td>
            <td style="padding: 8px; border: 1px solid #ddd;"><code>d["key"] = "new value"</code></td>
            <td style="padding: 8px; border: 1px solid #ddd;">Keys themselves immutable</td>
        </tr>
        <tr style="background: white;">
            <td style="padding: 8px; border: 1px solid #ddd;">Fast Lookups</td>
            <td style="padding: 8px; border: 1px solid #ddd;">O(1) average time complexity</td>
            <td style="padding: 8px; border: 1px solid #ddd;"><code>value = d["key"]</code></td>
            <td style="padding: 8px; border: 1px solid #ddd;">Much faster than list search</td>
        </tr>
        <tr style="background: #f8f9fa;">
            <td style="padding: 8px; border: 1px solid #ddd;">Heterogeneous</td>
            <td style="padding: 8px; border: 1px solid #ddd;">Keys and values can be any type</td>
            <td style="padding: 8px; border: 1px solid #ddd;"><code>{1: "one", "two": 2}</code></td>
            <td style="padding: 8px; border: 1px solid #ddd;">Keys must be hashable</td>
        </tr>
        <tr style="background: white;">
            <td style="padding: 8px; border: 1px solid #ddd;">Dynamic</td>
            <td style="padding: 8px; border: 1px solid #ddd;">Grows/shrinks automatically</td>
            <td style="padding: 8px; border: 1px solid #ddd;"><code>d["new"] = "value"</code></td>
            <td style="padding: 8px; border: 1px solid #ddd;">No fixed size</td>
        </tr>
    </table>
    
    <h5>Creating Dictionaries - Different Methods</h5>
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px;">
        <div style="background: #e8f5e8; padding: 15px; border-radius: 8px;">
            <h6>Basic Creation Methods</h6>
            <pre style="background: white; padding: 10px;">
# 1. Curly braces (most common)
empty_dict = {}
person = {"name": "Alice", "age": 30, "city": "New York"}

# 2. dict() constructor
from_pairs = dict([("name", "Bob"), ("age", 25)])  # List of tuples
from_kwargs = dict(name="Charlie", age=35)         # Keyword arguments

# 3. Dictionary comprehension
squares = {x: x**2 for x in range(1, 6)}
even_squares = {x: x**2 for x in range(10) if x % 2 == 0}

# 4. From two lists (using zip)
keys = ["name", "age", "city"]
values = ["David", 28, "London"]
from_lists = dict(zip(keys, values))

# 5. Using fromkeys() for default values
default_dict = dict.fromkeys(["a", "b", "c"], 0)  # {'a': 0, 'b': 0, 'c': 0}

print("Empty dict:", empty_dict)
print("Person:", person)
print("From pairs:", from_pairs)
print("Squares:", squares)
print("From lists:", from_lists)
print("Default dict:", default_dict)

# 6. Nested dictionaries
employees = {
    "emp1": {"name": "Alice", "position": "Manager", "salary": 75000},
    "emp2": {"name": "Bob", "position": "Developer", "salary": 65000},
    "emp3": {"name": "Charlie", "position": "Designer", "salary": 60000}
}
print(" Nested dict - Employee 1:", employees["emp1"])</pre>
        </div>
        
        <div style="background: #e3f2fd; padding: 15px; border-radius: 8px;">
            <h6>Visualizing Dictionary Structure</h6>
            <div style="text-align: center; margin: 10px 0;">
                <div style="display: inline-block; background: #f5f5f5; padding: 15px; border-radius: 8px; border: 2px solid #4A90E2; width: 100%;">
                    <div style="font-weight: bold; margin-bottom: 15px; font-size: 16px;">Dictionary: student = {"name": "Alice", "age": 20, "major": "CS", "gpa": 3.8}</div>
                    
                    <div style="display: grid; grid-template-columns: 1fr 2fr; gap: 10px; margin-bottom: 20px;">
                        <div style="background: #4CAF50; color: white; padding: 10px; border-radius: 5px; text-align: center; font-weight: bold;">
                            Hash Table<br/>(Internal Structure)
                        </div>
                        <div style="background: #f8f9fa; padding: 10px; border-radius: 5px; border: 1px solid #ddd;">
                            <div style="font-family: monospace; font-size: 14px;">
                                <div>Bucket 0: ‚Üí</div>
                                <div>Bucket 1: "name" ‚Üí "Alice"</div>
                                <div>Bucket 2: "age" ‚Üí 20</div>
                                <div>Bucket 3: "major" ‚Üí "CS"</div>
                                <div>Bucket 4: "gpa" ‚Üí 3.8</div>
                                <div>Bucket 5: ‚Üí</div>
                            </div>
                        </div>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin-bottom: 20px;">
                        <div style="background: #FF9800; color: white; padding: 15px; border-radius: 5px; text-align: center;">
                            <div style="font-size: 12px;">Key</div>
                            <div style="font-weight: bold;">"name"</div>
                            <div style="font-size: 12px; margin-top: 5px;">Hash: 0x7f...</div>
                        </div>
                        <div style="background: #2196F3; color: white; padding: 15px; border-radius: 5px; text-align: center;">
                            <div style="font-size: 12px;">Value</div>
                            <div style="font-weight: bold;">"Alice"</div>
                            <div style="font-size: 12px; margin-top: 5px;">Memory: 0x8a...</div>
                        </div>
                        <div style="background: #FF9800; color: white; padding: 15px; border-radius: 5px; text-align: center;">
                            <div style="font-size: 12px;">Key</div>
                            <div style="font-weight: bold;">"age"</div>
                            <div style="font-size: 12px; margin-top: 5px;">Hash: 0x3c...</div>
                        </div>
                        <div style="background: #2196F3; color: white; padding: 15px; border-radius: 5px; text-align: center;">
                            <div style="font-size: 12px;">Value</div>
                            <div style="font-weight: bold;">20</div>
                            <div style="font-size: 12px; margin-top: 5px;">Memory: 0x5d...</div>
                        </div>
                    </div>
                    
                    <div style="background: #fff3cd; padding: 10px; border-radius: 5px; font-size: 14px;">
                        <b>Key Concept:</b> Dictionaries use hash tables internally. When you access <code>student["name"]</code>, Python:
                        <ol style="margin: 5px 0 0 20px; font-size: 13px;">
                            <li>Calculates hash of "name"</li>
                            <li>Finds corresponding bucket in hash table</li>
                            <li>Returns the value "Alice"</li>
                        </ol>
                    </div>
                </div>
            </div>
            
            <div style="margin-top: 15px; background: #e8f5e8; padding: 10px; border-radius: 5px;">
                <b>Valid Key Types:</b> Strings, numbers, tuples (if all elements immutable)<br/>
                <b>Invalid Key Types:</b> Lists, dictionaries, sets (mutable)<br/>
                <b>Value Types:</b> Any Python object (including lists, dicts, functions)
            </div>
        </div>
    </div>
</div>

<h3>Dictionary Operations and Methods</h3>
<div style="background-color: #fff8e1; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h4>üîß Essential Dictionary Operations</h4>
    
    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; margin: 20px 0;">
        <div style="background: #ffecb3; padding: 15px; border-radius: 8px;">
            <h5>Accessing and Modifying</h5>
            <pre style="background: white; padding: 10px; font-size: 13px;">
# Create a sample dictionary
student = {
    "name": "Alice",
    "age": 20,
    "major": "Computer Science",
    "gpa": 3.8,
    "courses": ["Math", "Programming", "Physics"]
}

# Accessing values
print("Accessing values:")
print(f"student['name'] = {student['name']}")        # Alice
print(f"student.get('age') = {student.get('age')}")  # 20

# Safe access with get()
print(" Safe access with get():")
print(f"student.get('address') = {student.get('address')}")          # None
print(f"student.get('address', 'N/A') = {student.get('address', 'N/A')}")  # N/A

# Check if key exists
print(" Key existence checks:")
print(f"'name' in student: {'name' in student}")        # True
print(f"'address' in student: {'address' in student}")  # False
print(f"'Alice' in student.values(): {'Alice' in student.values()}")  # True

# Adding/Updating values
print(" Adding/Updating:")
student["year"] = "Junior"          # Add new key
print(f"After adding 'year': {student['year']}")

student["gpa"] = 3.9               # Update existing key
print(f"Updated GPA: {student['gpa']}")

student.update({"minor": "Math", "age": 21})  # Multiple updates
print(f"After update: age={student['age']}, minor={student['minor']}")

# Removing elements
print(" Removing elements:")
removed_gpa = student.pop("gpa")    # Remove and return value
print(f"Removed GPA: {removed_gpa}")
print(f"Dictionary after pop('gpa'): {list(student.keys())}")

last_item = student.popitem()       # Remove last inserted (Python 3.7+)
print(f"Removed last item: {last_item}")

del student["minor"]                # Delete key
print(f"After del student['minor']: {'minor' in student}")  # False

# Clear dictionary
student_copy = student.copy()
student.clear()
print(f" After clear(): {student}")                     # {}
print(f"Copy preserved: {student_copy}")</pre>
        </div>
        
        <div style="background: #dcedc8; padding: 15px; border-radius: 8px;">
            <h5>Iterating and View Objects</h5>
            <pre style="background: white; padding: 10px; font-size: 13px;">
# Sample dictionary
inventory = {
    "apples": 50,
    "bananas": 30,
    "oranges": 40,
    "grapes": 25,
    "pears": 35
}

# Dictionary view objects
print("Dictionary view objects:")
keys_view = inventory.keys()
values_view = inventory.values()
items_view = inventory.items()

print(f"Keys view: {keys_view}")      # dict_keys(['apples', 'bananas', ...])
print(f"Values view: {values_view}")  # dict_values([50, 30, ...])
print(f"Items view: {items_view}")    # dict_items([('apples', 50), ...])

# Convert to lists
print(" Converted to lists:")
print(f"Keys list: {list(keys_view)}")
print(f"Values list: {list(values_view)}")
print(f"Items list: {list(items_view)}")

# Iterating through dictionary
print(" Iterating methods:")

print("1. Iterate keys (default):")
for key in inventory:
    print(f"  {key}: {inventory[key]}")

print(" 2. Iterate keys explicitly:")
for key in inventory.keys():
    print(f"  {key}")

print(" 3. Iterate values:")
for value in inventory.values():
    print(f"  {value}")

print(" 4. Iterate key-value pairs:")
for key, value in inventory.items():
    print(f"  {key}: {value}")

print(" 5. Iterate with index (enumerate):")
for i, (key, value) in enumerate(inventory.items(), 1):
    print(f"  {i}. {key}: {value}")

# Dictionary comprehensions
print(" Dictionary comprehensions:")

# Create new dict with modified values
discounted = {item: price * 0.9 for item, price in inventory.items()}
print(f"10%% discount: {discounted}")

# Filter dictionary
high_stock = {item: qty for item, qty in inventory.items() if qty > 30}
print(f"High stock items (>30): {high_stock}")

# Transform keys and values
uppercase_items = {item.upper(): qty*2 for item, qty in inventory.items()}
print(f"Uppercase keys, doubled quantities: {uppercase_items}")

# Merge dictionaries
print(" Merging dictionaries:")
dict1 = {"a": 1, "b": 2}
dict2 = {"b": 3, "c": 4}  # Note: 'b' exists in both

# Python 3.9+ merge operator
merged = dict1 | dict2  # dict2 values take precedence
print(f"dict1 | dict2: {merged}")

# Update method (in-place)
dict1.update(dict2)
print(f"dict1.update(dict2): {dict1}")

# Using dictionary unpacking
merged2 = {**dict1, **dict2}
print(f"{{**dict1, **dict2}}: {merged2}")</pre>
        </div>
        
        <div style="background: #bbdefb; padding: 15px; border-radius: 8px;">
            <h5>Advanced Dictionary Methods</h5>
            <pre style="background: white; padding: 10px; font-size: 13px;">
# Working with nested dictionaries
company = {
    "employees": {
        "e001": {"name": "Alice", "position": "Manager", "salary": 75000},
        "e002": {"name": "Bob", "position": "Developer", "salary": 65000}
    },
    "departments": {
        "IT": {"head": "e001", "budget": 500000},
        "HR": {"head": "e003", "budget": 300000}
    }
}

# Accessing nested values
print("Accessing nested values:")
print(f"Alice's position: {company['employees']['e001']['position']}")
print(f"IT department budget: {company['departments']['IT']['budget']:,}")

# Using setdefault() - get or set with default
print(" Using setdefault():")
# Get existing value
position = company['employees']['e001'].setdefault('position', 'Unknown')
print(f"Alice's position (existing): {position}")

# Set default if key doesn't exist
bonus = company['employees']['e001'].setdefault('bonus', 5000)
print(f"Alice's bonus (new): {bonus}")
print(f"Updated employee record: {company['employees']['e001']}")

# Using defaultdict for automatic defaults
from collections import defaultdict

print(" Using defaultdict:")

# Default list
word_counts = defaultdict(list)
words = ["apple", "banana", "apple", "orange", "banana", "apple"]

for word in words:
    word_counts[word].append(1)  # Automatically creates list if needed

print(f"Word counts: {dict(word_counts)}")

# Default int (for counting)
counter = defaultdict(int)
for word in words:
    counter[word] += 1  # Starts at 0 automatically

print(f"Word frequencies: {dict(counter)}")

# Default dict (for nested structures)
nested_dict = defaultdict(lambda: defaultdict(dict))
nested_dict['department']['IT']['manager'] = 'Alice'
print(f"Nested defaultdict: {dict(nested_dict)}")

# Dictionary sorting
print(" Dictionary sorting:")
student_scores = {"Alice": 85, "Bob": 92, "Charlie": 78, "Diana": 95}

# Sort by key
sorted_by_name = dict(sorted(student_scores.items()))
print(f"Sorted by name: {sorted_by_name}")

# Sort by value (descending)
sorted_by_score = dict(sorted(student_scores.items(), key=lambda x: x[1], reverse=True))
print(f"Sorted by score (descending): {sorted_by_score}")

# Sort by value length (for string values)
word_lengths = {"apple": 5, "banana": 6, "cherry": 6, "date": 4}
sorted_by_length = dict(sorted(word_lengths.items(), key=lambda x: (x[1], x[0])))
print(f"Sorted by length, then name: {sorted_by_length}")</pre>
        </div>
        
        <div style="background: #e1bee7; padding: 15px; border-radius: 8px;">
            <h5>Dictionary Performance & Memory</h5>
            <pre style="background: white; padding: 10px; font-size: 13px;">
# Performance comparison: List vs Dictionary
import time

print("Performance Comparison: List vs Dictionary")
print("=" * 50)

# Create large datasets
size = 100000
print(f"Testing with {size:,} elements")

# List of tuples (key-value pairs)
list_data = [(f"key{i}", i) for i in range(size)]

# Dictionary
dict_data = {f"key{i}": i for i in range(size)}

# Test 1: Lookup by key
print(" 1. Lookup by key:")
test_key = f"key{size-1}"  # Last element

# List lookup (linear search O(n))
start = time.time()
for key, value in list_data:
    if key == test_key:
        found_value = value
        break
list_time = time.time() - start
print(f"  List lookup: {list_time:.6f} seconds")

# Dictionary lookup (hash table O(1))
start = time.time()
found_value = dict_data.get(test_key)
dict_time = time.time() - start
print(f"  Dictionary lookup: {dict_time:.6f} seconds")
print(f"  Dictionary is {list_time/max(dict_time, 0.000001):.0f}x faster!")

# Test 2: Check membership
print(" 2. Check if key exists:")
test_key = "key_not_found"

start = time.time()
exists = any(key == test_key for key, _ in list_data)
list_time = time.time() - start
print(f"  List membership: {list_time:.6f} seconds")

start = time.time()
exists = test_key in dict_data
dict_time = time.time() - start
print(f"  Dictionary membership: {dict_time:.6f} seconds")

# Test 3: Memory usage
print(" 3. Memory usage:")
import sys

list_memory = sys.getsizeof(list_data)
dict_memory = sys.getsizeof(dict_data)

print(f"  List memory: {list_memory:,} bytes")
print(f"  Dictionary memory: {dict_memory:,} bytes")
print(f"  Dictionary uses {dict_memory/list_memory:.1f}x more memory")

# Practical implications
print(" " + "=" * 50)
print("When to use Dictionary vs List:")
print("-" * 50)
print("‚úì Use Dictionary when:")
print("  ‚Ä¢ Need fast lookups by key")
print("  ‚Ä¢ Data has natural key-value relationships")
print("  ‚Ä¢ Keys are unique and hashable")
print("  ‚Ä¢ Order doesn't matter (or need insertion order)")

print(" ‚úì Use List when:")
print("  ‚Ä¢ Need ordered collection")
print("  ‚Ä¢ Will iterate through all elements")
print("  ‚Ä¢ Need to maintain duplicates")
print("  ‚Ä¢ Using numerical indices (0, 1, 2, ...)")

print(" ‚úì Use NamedTuple or Dataclass when:")
print("  ‚Ä¢ Have fixed set of attributes")
print("  ‚Ä¢ Need type hints and validation")
print("  ‚Ä¢ Want immutability")

# Real-world example: Configuration settings
config = {
    "database": {
        "host": "localhost",
        "port": 5432,
        "name": "mydb",
        "user": "admin"
    },
    "server": {
        "host": "0.0.0.0",
        "port": 8080,
        "debug": True
    },
    "features": {
        "caching": True,
        "logging": "verbose",
        "max_connections": 100
    }
}

print(" Example: Configuration dictionary")
print(f"Database host: {config['database']['host']}")
print(f"Server port: {config['server']['port']}")
print(f"Max connections: {config['features']['max_connections']}")</pre>
        </div>
    </div>
</div>

<h3>Practical Dictionary Applications</h3>
<div style="background-color: #e8f5e8; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h4>üìã Real-World Dictionary Examples</h4>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">
        <div>
            <h5>Example 1: Word Frequency Counter</h5>
            <pre style="background: white; padding: 15px;">
class WordFrequencyAnalyzer:
    def __init__(self):
        self.word_counts = {}
        self.total_words = 0
    
    def process_text(self, text):
        """Process text and count word frequencies"""
        # Clean and split text
        import re
        words = re.findall(r'\\b\\w+\\b', text.lower())
        
        # Count frequencies
        for word in words:
            self.word_counts[word] = self.word_counts.get(word, 0) + 1
            self.total_words += 1
    
    def get_most_common(self, n=10):
        """Get n most common words"""
        sorted_words = sorted(self.word_counts.items(), 
                             key=lambda x: x[1], 
                             reverse=True)
        return sorted_words[:n]
    
    def get_word_frequency(self, word):
        """Get frequency of specific word"""
        count = self.word_counts.get(word.lower(), 0)
        if self.total_words > 0:
            frequency = count / self.total_words * 100
            return count, frequency
        return count, 0.0
    
    def get_vocabulary_size(self):
        """Get number of unique words"""
        return len(self.word_counts)
    
    def get_word_density(self):
        """Calculate word density (unique/total)"""
        if self.total_words > 0:
            return len(self.word_counts) / self.total_words
        return 0.0
    
    def generate_report(self):
        """Generate comprehensive word analysis report"""
        if self.total_words == 0:
            return "No text processed yet."
        
        report = []
        report.append("=" * 60)
        report.append("WORD FREQUENCY ANALYSIS REPORT")
        report.append("=" * 60)
        report.append(f"Total words: {self.total_words:,}")
        report.append(f"Unique words: {self.get_vocabulary_size():,}")
        report.append(f"Word density: {self.get_word_density():.3f}")
        report.append("-" * 60)
        
        # Most common words
        report.append("MOST COMMON WORDS:")
        for i, (word, count) in enumerate(self.get_most_common(15), 1):
            frequency = count / self.total_words * 100
            report.append(f"{i:3}. {word:15} {count:6} ({frequency:.2f}%)")
        
        # Word length distribution
        report.append("-" * 60)
        report.append("WORD LENGTH DISTRIBUTION:")
        length_dist = {}
        for word in self.word_counts:
            length = len(word)
            length_dist[length] = length_dist.get(length, 0) + 1
        
        for length in sorted(length_dist.keys()):
            count = length_dist[length]
            percentage = count / len(self.word_counts) * 100
            bar = '‚ñà' * int(percentage / 2)
            report.append(f"  {length:2} letters: {count:4} words {bar} ({percentage:.1f}%)")
        
        report.append("=" * 60)
        return " ".join(report)

# Usage example
if __name__ == "__main__":
    analyzer = WordFrequencyAnalyzer()
    
    # Sample text (could be loaded from file)
    sample_text = """
    Python is an interpreted, high-level, general-purpose programming language. 
    Created by Guido van Rossum and first released in 1991, Python's design 
    philosophy emphasizes code readability with its notable use of significant 
    whitespace. Its language constructs and object-oriented approach aim to 
    help programmers write clear, logical code for small and large-scale projects.
    
    Python is dynamically typed and garbage-collected. It supports multiple 
    programming paradigms, including structured, object-oriented, and functional 
    programming. Python is often described as a "batteries included" language 
    due to its comprehensive standard library.
    """
    
    # Process text
    analyzer.process_text(sample_text)
    
    # Generate report
    print(analyzer.generate_report())
    
    # Specific queries
    print(" Specific word analysis:")
    for word in ["python", "programming", "language", "code"]:
        count, freq = analyzer.get_word_frequency(word)
        print(f"  '{word}': {count} occurrences ({freq:.2f}%)")</pre>
        </div>
        
        <div>
            <h5>Example 2: Cache System with TTL</h5>
            <pre style="background: white; padding: 15px;">
import time
from collections import OrderedDict

class TTLCache:
    """Time-To-Live Cache with expiration"""
    
    def __init__(self, max_size=100, default_ttl=300):
        """
        Initialize cache
        :param max_size: Maximum number of items in cache
        :param default_ttl: Default time-to-live in seconds
        """
        self.cache = OrderedDict()
        self.max_size = max_size
        self.default_ttl = default_ttl
        self.hits = 0
        self.misses = 0
    
    def _clean_expired(self):
        """Remove expired items from cache"""
        current_time = time.time()
        expired_keys = []
        
        for key, (value, expiry) in self.cache.items():
            if expiry < current_time:
                expired_keys.append(key)
        
        for key in expired_keys:
            del self.cache[key]
    
    def set(self, key, value, ttl=None):
        """Add or update item in cache"""
        self._clean_expired()
        
        # If cache is full, remove oldest item
        if len(self.cache) >= self.max_size and key not in self.cache:
            self.cache.popitem(last=False)  # Remove first (oldest) item
        
        # Set expiry time
        expiry = time.time() + (ttl if ttl is not None else self.default_ttl)
        self.cache[key] = (value, expiry)
        self.cache.move_to_end(key)  # Move to end (most recent)
    
    def get(self, key):
        """Retrieve item from cache"""
        self._clean_expired()
        
        if key in self.cache:
            value, expiry = self.cache[key]
            # Check if still valid (though _clean_expired should handle this)
            if expiry >= time.time():
                self.hits += 1
                self.cache.move_to_end(key)  # Mark as recently used
                return value
        
        self.misses += 1
        return None
    
    def delete(self, key):
        """Remove item from cache"""
        if key in self.cache:
            del self.cache[key]
            return True
        return False
    
    def clear(self):
        """Clear all items from cache"""
        self.cache.clear()
        self.hits = 0
        self.misses = 0
    
    def get_stats(self):
        """Get cache statistics"""
        self._clean_expired()
        
        return {
            "size": len(self.cache),
            "max_size": self.max_size,
            "hits": self.hits,
            "misses": self.misses,
            "hit_rate": self.hits / max(self.hits + self.misses, 1),
            "utilization": len(self.cache) / self.max_size
        }
    
    def keys(self):
        """Get all valid cache keys"""
        self._clean_expired()
        return list(self.cache.keys())
    
    def items(self):
        """Get all valid cache items (without expiry)"""
        self._clean_expired()
        return [(key, value) for key, (value, _) in self.cache.items()]
    
    def display_cache(self):
        """Display cache contents"""
        self._clean_expired()
        
        if not self.cache:
            print("Cache is empty")
            return
        
        current_time = time.time()
        print("=" * 70)
        print("CACHE CONTENTS")
        print("=" * 70)
        print(f"{'Key':20} {'Value':25} {'Expires In':15}")
        print("-" * 70)
        
        for key, (value, expiry) in self.cache.items():
            ttl = expiry - current_time
            if ttl > 0:
                expires_in = f"{ttl:.1f}s"
            else:
                expires_in = "EXPIRED"
            
            # Truncate long values for display
            display_value = str(value)
            if len(display_value) > 22:
                display_value = display_value[:19] + "..."
            
            print(f"{key:20} {display_value:25} {expires_in:15}")
        
        stats = self.get_stats()
        print("-" * 70)
        print(f"Items: {stats['size']}/{stats['max_size']} | "
              f"Hit Rate: {stats['hit_rate']:.1%} | "
              f"Hits: {stats['hits']} | Misses: {stats['misses']}")
        print("=" * 70)

# Usage example
if __name__ == "__main__":
    # Create cache with max 5 items, default TTL 10 seconds
    cache = TTLCache(max_size=5, default_ttl=10)
    
    print("Adding items to cache...")
    cache.set("user:1001", {"name": "Alice", "email": "alice@example.com"})
    cache.set("user:1002", {"name": "Bob", "email": "bob@example.com"}, ttl=5)  # 5 second TTL
    cache.set("product:2001", {"name": "Laptop", "price": 999.99})
    cache.set("config:site", {"title": "My Site", "theme": "dark"})
    cache.set("api:token", "abc123xyz", ttl=30)  # 30 second TTL
    
    # Display cache
    cache.display_cache()
    
    # Test cache hits
    print(" Testing cache retrieval...")
    print(f"Get user:1001: {cache.get('user:1001')}")
    print(f"Get non-existent key: {cache.get('user:9999')}")
    
    # Add more items (should trigger eviction)
    print(" Adding more items (triggering eviction)...")
    cache.set("product:2002", {"name": "Mouse", "price": 29.99})
    cache.set("product:2003", {"name": "Keyboard", "price": 79.99})
    
    cache.display_cache()
    
    # Wait for some items to expire
    print(" Waiting 6 seconds for some items to expire...")
    time.sleep(6)
    
    cache.display_cache()
    
    # Get statistics
    stats = cache.get_stats()
    print(" Cache Statistics:")
    for key, value in stats.items():
        if isinstance(value, float):
            print(f"  {key}: {value:.3f}")
        else:
            print(f"  {key}: {value}")</pre>
        </div>
    </div>
    
    <h5>Example 3: Configuration Management System</h5>
    <pre style="background: #f5f5f5; padding: 15px; margin: 15px 0;">
class ConfigManager:
    """Hierarchical configuration management system"""
    
    def __init__(self):
        self.config = {
            "default": {
                "app": {
                    "name": "MyApp",
                    "version": "1.0.0",
                    "debug": False,
                    "log_level": "INFO"
                },
                "database": {
                    "host": "localhost",
                    "port": 5432,
                    "name": "app_db",
                    "user": "admin",
                    "password": "secret"
                },
                "server": {
                    "host": "0.0.0.0",
                    "port": 8080,
                    "workers": 4,
                    "timeout": 30
                },
                "features": {
                    "cache_enabled": True,
                    "max_cache_size": 1000,
                    "enable_api": True,
                    "enable_ui": True
                }
            },
            "development": {
                "app": {"debug": True, "log_level": "DEBUG"},
                "database": {"name": "app_dev"}
            },
            "production": {
                "app": {"debug": False},
                "database": {
                    "host": "db.production.com",
                    "user": "prod_user",
                    "password": "prod_secret123"
                },
                "server": {"workers": 8},
                "features": {"max_cache_size": 10000}
            },
            "testing": {
                "app": {"debug": True},
                "database": {"name": "app_test"},
                "features": {"enable_ui": False}
            }
        }
        
        self.environment = "default"
        self.overrides = {}
    
    def set_environment(self, env):
        """Set current environment"""
        if env in self.config:
            self.environment = env
            print(f"Environment set to: {env}")
        else:
            print(f"Unknown environment: {env}. Using default.")
    
    def get(self, key_path, default=None):
        """Get configuration value using dot notation"""
        # Check overrides first
        if key_path in self.overrides:
            return self.overrides[key_path]
        
        # Split key path (e.g., "app.name" -> ["app", "name"])
        keys = key_path.split(".")
        
        # Start with current environment config
        env_config = self.config.get(self.environment, {})
        
        # Merge with default config (environment overrides defaults)
        current = self._merge_dicts(self.config["default"], env_config)
        
        # Navigate through keys
        for key in keys:
            if isinstance(current, dict) and key in current:
                current = current[key]
            else:
                return default
        
        return current
    
    def set_override(self, key_path, value):
        """Set temporary override for configuration"""
        self.overrides[key_path] = value
        print(f"Override set: {key_path} = {value}")
    
    def clear_overrides(self):
        """Clear all overrides"""
        self.overrides.clear()
        print("All overrides cleared")
    
    def _merge_dicts(self, base, override):
        """Recursively merge two dictionaries"""
        result = base.copy()
        
        for key, value in override.items():
            if key in result and isinstance(result[key], dict) and isinstance(value, dict):
                # Recursively merge nested dictionaries
                result[key] = self._merge_dicts(result[key], value)
            else:
                # Overwrite or add new key
                result[key] = value
        
        return result
    
    def validate_config(self):
        """Validate current configuration"""
        issues = []
        
        # Check required fields
        required = [
            "app.name",
            "app.version",
            "database.host",
            "database.port",
            "server.port"
        ]
        
        for req in required:
            if self.get(req) is None:
                issues.append(f"Missing required configuration: {req}")
        
        # Validate specific values
        port = self.get("server.port")
        if port and (port < 1 or port > 65535):
            issues.append(f"Invalid server port: {port}")
        
        log_level = self.get("app.log_level")
        valid_levels = ["DEBUG", "INFO", "WARNING", "ERROR", "CRITICAL"]
        if log_level and log_level.upper() not in valid_levels:
            issues.append(f"Invalid log level: {log_level}")
        
        return issues
    
    def export_config(self, format="dict"):
        """Export current configuration"""
        # Get merged config
        env_config = self.config.get(self.environment, {})
        merged = self._merge_dicts(self.config["default"], env_config)
        
        # Apply overrides
        for key_path, value in self.overrides.items():
            keys = key_path.split(".")
            target = merged
            
            # Navigate to parent
            for key in keys[:-1]:
                if key not in target:
                    target[key] = {}
                target = target[key]
            
            # Set value
            target[keys[-1]] = value
        
        if format == "dict":
            return merged
        elif format == "json":
            import json
            return json.dumps(merged, indent=2)
        else:
            return str(merged)
    
    def display_config(self, show_all=False):
        """Display current configuration"""
        config = self.export_config("dict")
        
        print("=" * 70)
        print(f"CONFIGURATION - Environment: {self.environment.upper()}")
        print("=" * 70)
        
        self._print_dict(config, show_all)
        
        # Show overrides
        if self.overrides:
            print(" OVERRIDES:")
            for key, value in self.overrides.items():
                print(f"  {key} = {value}")
        
        # Validation
        issues = self.validate_config()
        if issues:
            print(" ‚ö†Ô∏è  CONFIGURATION ISSUES:")
            for issue in issues:
                print(f"  ‚Ä¢ {issue}")
        
        print("=" * 70)
    
    def _print_dict(self, d, show_all, indent=0):
        """Recursively print dictionary"""
        for key, value in d.items():
            if isinstance(value, dict):
                if show_all or not self._is_sensitive_key(key):
                    print(" " * indent + f"{key}:")
                    self._print_dict(value, show_all, indent + 2)
            else:
                if show_all or not self._is_sensitive_key(key):
                    # Hide sensitive values
                    display_value = "******" if self._is_sensitive_key(key) else value
                    print(" " * indent + f"{key}: {display_value}")
    
    def _is_sensitive_key(self, key):
        """Check if key contains sensitive information"""
        sensitive = ["password", "secret", "token", "key", "auth"]
        return any(s in key.lower() for s in sensitive)

# Usage example
if __name__ == "__main__":
    config = ConfigManager()
    
    # Set environment
    config.set_environment("development")
    
    # Display config (hides sensitive data)
    print("Development configuration:")
    config.display_config()
    
    # Get specific values
    print(" Getting specific configuration values:")
    print(f"App name: {config.get('app.name')}")
    print(f"Database host: {config.get('database.host')}")
    print(f"Log level: {config.get('app.log_level')}")
    
    # Set override
    config.set_override("app.log_level", "DEBUG")
    config.set_override("server.port", 9000)
    
    # Switch to production
    print(" Switching to production environment...")
    config.set_environment("production")
    
    # Display with overrides
    config.display_config()
    
    # Export configuration
    print(" Exported configuration (JSON):")
    print(config.export_config("json")[:200] + "...")</pre>
</div>

<h3>Today's Hands-On Exercise</h3>
<div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <b>Task 1: Student Database System (60 minutes)</b>
    <p>Create a student database using dictionaries:</p>
    <ul>
        <li>Store student records with: ID, name, age, major, GPA, courses</li>
        <li>Implement CRUD operations: Create, Read, Update, Delete</li>
        <li>Search students by various criteria (name, major, GPA range)</li>
        <li>Calculate statistics: average GPA, most common major</li>
        <li>Export data to JSON format</li>
        <li>Import data from JSON file</li>
    </ul>
    
    <pre style="background: #f5f5f5; padding: 10px; margin: 10px 0;">
# Starter structure
class StudentDatabase:
    def __init__(self):
        self.students = {}  # student_id -> student_data
        
    def add_student(self, student_id, name, age, major, gpa):
        # Add new student
        pass
    
    def update_student(self, student_id, **updates):
        # Update student information
        pass
    
    def delete_student(self, student_id):
        # Remove student
        pass
    
    def find_students(self, criteria):
        # Find students matching criteria
        pass
    
    def calculate_statistics(self):
        # Calculate various statistics
        pass</pre>
    
    <b>Task 2: Shopping Cart with Product Catalog (60 minutes)</b>
    <p>Create an enhanced shopping cart:</p>
    <ul>
        <li>Product catalog dictionary with categories, prices, stock</li>
        <li>Shopping cart as dictionary of product_id ‚Üí quantity</li>
        <li>User accounts with purchase history</li>
        <li>Discount code system with validation</li>
        <li>Order processing with inventory updates</li>
        <li>Sales analytics and reporting</li>
    </ul>
    
    <b>Task 3: Game Character/Item System (60 minutes)</b>
    <p>Create a game system using dictionaries:</p>
    <ul>
        <li>Character attributes and inventory system</li>
        <li>Item database with stats and effects</li>
        <li>Skill tree and ability system</li>
        <li>Quest tracking and progress</li>
        <li>Save/Load game state to file</li>
        <li>Combat system with damage calculations</li>
    </ul>
</div>

<h3>Homework Assignment</h3>
<div style="background-color: #fff0e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <b>Build a "Social Media Analytics Dashboard"</b>
    
    <b>Requirements:</b>
    <ul>
        <li><b>User Profiles:</b> Store user information in dictionaries</li>
        <li><b>Posts Database:</b> Track posts with metadata</li>
        <li><b>Friends/Followers:</b> Relationship mapping</li>
        <li><b>Analytics:</b> Calculate engagement metrics</li>
        <li><b>Recommendations:</b> Suggest connections/content</li>
    </ul>
    
    <b>Data Structures:</b>
    <pre style="background: #f5f5f5; padding: 10px;">
SOCIAL MEDIA DATA STRUCTURE:
1. Users Dictionary:
   users = {
       "user123": {
           "username": "alice",
           "name": "Alice Smith",
           "email": "alice@example.com",
           "joined": "2023-01-15",
           "bio": "Software developer",
           "followers": ["user456", "user789"],
           "following": ["user456"],
           "posts": ["post001", "post002"]
       },
       ...
   }

2. Posts Dictionary:
   posts = {
       "post001": {
           "user_id": "user123",
           "content": "Hello world!",
           "timestamp": "2024-01-20 10:30:00",
           "likes": ["user456", "user789"],
           "comments": ["comment001"],
           "shares": 5
       },
       ...
   }

3. Comments Dictionary:
   comments = {
       "comment001": {
           "post_id": "post001",
           "user_id": "user456",
           "content": "Great post!",
           "timestamp": "2024-01-20 11:00:00",
           "likes": 3
       },
       ...
   }</pre>
    
    <b>Features to Implement:</b>
    <ul>
        <li>User registration and profile management</li>
        <li>Create, edit, delete posts</li>
        <li>Follow/unfollow users</li>
        <li>Like/comment on posts</li>
        <li>News feed generation (posts from followed users)</li>
        <li>Search users and posts</li>
        <li>Calculate user engagement metrics</li>
        <li>Generate activity reports</li>
    </ul>
    
    <b>Advanced Features:</b>
    <ul>
        <li>Trending topics detection</li>
        <li>Sentiment analysis on posts</li>
        <li>Friend recommendations based on mutual connections</li>
        <li>Content recommendations based on interests</li>
        <li>Hashtag tracking and analysis</li>
        <li>Export analytics to CSV/JSON</li>
        <li>Real-time notifications simulation</li>
    </ul>
</div>

<h3>Key Learning Points:</h3>
<ol>
    <li><b>Dictionary Creation:</b> Curly braces, dict(), comprehensions</li>
    <li><b>Key-Value Access:</b> Using keys to retrieve values with [] and .get()</li>
    <li><b>Dictionary Methods:</b> keys(), values(), items(), update(), pop()</li>
    <li><b>Nested Dictionaries:</b> Dictionaries within dictionaries</li>
    <li><b>Dictionary Views:</b> Dynamic views of keys, values, items</li>
    <li><b>Performance:</b> O(1) lookups vs O(n) for lists</li>
</ol>

<div style="background-color: #e8f5e8; padding: 15px; margin: 20px 0; border-radius: 5px;">
    <h3>üí° Dictionary Best Practices:</h3>
    <ul>
        <li><b>Use .get() for Safe Access:</b> Avoid KeyError for missing keys</li>
        <li><b>Use Dictionary Comprehensions:</b> Cleaner than loops for transformations</li>
        <li><b>Leverage .setdefault():</b> For initializing missing keys with default values</li>
        <li><b>Consider collections.defaultdict:</b> When you need automatic defaults</li>
        <li><b>Use .items() for Iteration:</b> More efficient than iterating keys then accessing values</li>
        <li><b>Validate Keys:</b> Check key existence before access when needed</li>
        <li><b>Use Meaningful Keys:</b> Keys should be descriptive and consistent</li>
    </ul>
    
    <pre style="background: white; padding: 10px; margin-top: 10px;">
# Good practices examples

# 1. Use .get() for safe access
# Instead of:
if key in my_dict:
    value = my_dict[key]
else:
    value = default

# Use:
value = my_dict.get(key, default)

# 2. Dictionary comprehension vs loop
# Instead of:
squared = {}
for i in range(10):
    squared[i] = i**2

# Use:
squared = {i: i**2 for i in range(10)}

# 3. Using setdefault() for counting
word_counts = {}
words = ["apple", "banana", "apple", "orange"]

# Instead of:
for word in words:
    if word not in word_counts:
        word_counts[word] = 0
    word_counts[word] += 1

# Use:
for word in words:
    word_counts.setdefault(word, 0)
    word_counts[word] += 1

# Even better with defaultdict:
from collections import defaultdict
word_counts = defaultdict(int)
for word in words:
    word_counts[word] += 1

# 4. Efficient iteration
# Instead of:
for key in my_dict:
    value = my_dict[key]
    # process key and value

# Use:
for key, value in my_dict.items():
    # process key and value together

# 5. Merging dictionaries (Python 3.9+)
dict1 = {"a": 1, "b": 2}
dict2 = {"b": 3, "c": 4}

# Clean merge:
merged = dict1 | dict2  # dict2 values take precedence

# 6. Using dictionaries for switch-case patterns
def handle_case(case):
    handlers = {
        "case1": lambda: print("Handling case 1"),
        "case2": lambda: print("Handling case 2"),
        "case3": lambda: print("Handling case 3"),
    }
    
    handler = handlers.get(case)
    if handler:
        return handler()
    else:
        return print(f"Unknown case: {case}")</pre>
</div>

<div style="background-color: #e3f2fd; padding: 15px; margin: 20px 0; border-radius: 5px;">
    <h3>üß† Dictionary Challenges:</h3>
    
    <div style="background: white; padding: 15px; border-radius: 8px; border: 2px solid #4A90E2; margin-bottom: 15px;">
        <h4>Challenge 1: Inverted Dictionary</h4>
        <p>Write a function that inverts a dictionary (swaps keys and values):</p>
        <pre style="background: #f5f5f5; padding: 10px;">
invert_dict({"a": 1, "b": 2, "c": 3}) ‚Üí {1: "a", 2: "b", 3: "c"}</pre>
        <p><b>Bonus:</b> Handle duplicate values by storing lists of keys:</p>
        <pre style="background: #f5f5f5; padding: 10px;">
invert_dict({"a": 1, "b": 2, "c": 1}) ‚Üí {1: ["a", "c"], 2: ["b"]}</pre>
    </div>
    
    <div style="background: white; padding: 15px; border-radius: 8px; border: 2px solid #4A90E2; margin-bottom: 15px;">
        <h4>Challenge 2: Dictionary Diff</h4>
        <p>Write a function that compares two dictionaries and returns differences:</p>
        <pre style="background: #f5f5f5; padding: 10px;">
dict1 = {"a": 1, "b": 2, "c": 3}
dict2 = {"a": 1, "b": 4, "d": 5}

diff = dict_diff(dict1, dict2)
# Should return something like:
# {
#     "added": {"d": 5},
#     "removed": {"c": 3},
#     "changed": {"b": {"old": 2, "new": 4}}
# }</pre>
    </div>
    
    <div style="background: white; padding: 15px; border-radius: 8px; border: 2px solid #4A90E2;">
        <h4>Challenge 3: Nested Dictionary Access</h4>
        <p>Create a function that can access nested dictionary values using dot notation:</p>
        <pre style="background: #f5f5f5; padding: 10px;">
data = {
    "user": {
        "name": "Alice",
        "address": {
            "street": "123 Main St",
            "city": "Boston"
        }
    }
}

get_nested(data, "user.address.city") ‚Üí "Boston"
get_nested(data, "user.email", default="N/A") ‚Üí "N/A"</pre>
        <p><b>Bonus:</b> Create a corresponding <code>set_nested()</code> function to set values using dot notation.</p>
    </div>
    
    <details>
        <summary>Hint for Challenge 3</summary>
        <div style="background: #f5f5f5; padding: 15px; margin-top: 10px; border-radius: 5px;">
            <p>Split the path by dots, then iterate through the keys, checking if each level is a dictionary:</p>
            <pre style="background: white; padding: 10px;">
def get_nested(data, path, default=None):
    keys = path.split(".")
    current = data
    
    for key in keys:
        if isinstance(current, dict) and key in current:
            current = current[key]
        else:
            return default
    
    return current</pre>
        </div>
    </details>
</div>
`
},
            "3-3": {
    icon: "fa-cut",
    title: "List Manipulation (Slicing, Appending)",
    html: `<h1>Week 3, Day 3: List Manipulation (Slicing, Appending)</h1>
<p>Today we dive deep into advanced list manipulation techniques including slicing, appending, and various methods for modifying lists efficiently.</p>

<div class="analogy-box">
    <b>Analogy: The Swiss Army Knife for Lists üî™</b><br/>
    
    List: The knife handle<br/>
    Slicing: Cutting specific sections<br/>
    Appending: Adding new tools<br/>
    Inserting: Placing tools in specific spots<br/>
    Removing: Taking tools out<br/>
    Reversing: Flipping the order<br/>
    Sorting: Organizing tools neatly
</div>

<h3>Mastering List Slicing</h3>
<div style="background-color: #f0f8ff; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h4>üìä Complete Slicing Reference</h4>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">
        <div style="background: #e8f5e8; padding: 15px; border-radius: 8px;">
            <h5>Visual Slicing Guide</h5>
            <div style="text-align: center;">
                <div style="display: inline-block; background: white; padding: 20px; border-radius: 10px; border: 2px solid #4CAF50;">
                    <div style="font-weight: bold; margin-bottom: 15px; color: #2e7d32;">List: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]</div>
                    
                    <div style="display: flex; justify-content: center; margin-bottom: 15px;">
                        <div style="display: grid; grid-template-columns: repeat(10, 1fr); gap: 2px;">
                            <div style="background: #4CAF50; color: white; padding: 10px; text-align: center; border-radius: 3px;">0</div>
                            <div style="background: #4CAF50; color: white; padding: 10px; text-align: center; border-radius: 3px;">1</div>
                            <div style="background: #4CAF50; color: white; padding: 10px; text-align: center; border-radius: 3px;">2</div>
                            <div style="background: #4CAF50; color: white; padding: 10px; text-align: center; border-radius: 3px;">3</div>
                            <div style="background: #4CAF50; color: white; padding: 10px; text-align: center; border-radius: 3px;">4</div>
                            <div style="background: #4CAF50; color: white; padding: 10px; text-align: center; border-radius: 3px;">5</div>
                            <div style="background: #4CAF50; color: white; padding: 10px; text-align: center; border-radius: 3px;">6</div>
                            <div style="background: #4CAF50; color: white; padding: 10px; text-align: center; border-radius: 3px;">7</div>
                            <div style="background: #4CAF50; color: white; padding: 10px; text-align: center; border-radius: 3px;">8</div>
                            <div style="background: #4CAF50; color: white; padding: 10px; text-align: center; border-radius: 3px;">9</div>
                            
                            <div style="padding: 5px; text-align: center; font-size: 12px;">0</div>
                            <div style="padding: 5px; text-align: center; font-size: 12px;">1</div>
                            <div style="padding: 5px; text-align: center; font-size: 12px;">2</div>
                            <div style="padding: 5px; text-align: center; font-size: 12px;">3</div>
                            <div style="padding: 5px; text-align: center; font-size: 12px;">4</div>
                            <div style="padding: 5px; text-align: center; font-size: 12px;">5</div>
                            <div style="padding: 5px; text-align: center; font-size: 12px;">6</div>
                            <div style="padding: 5px; text-align: center; font-size: 12px;">7</div>
                            <div style="padding: 5px; text-align: center; font-size: 12px;">8</div>
                            <div style="padding: 5px; text-align: center; font-size: 12px;">9</div>
                            
                            <div style="padding: 5px; text-align: center; font-size: 12px;">-10</div>
                            <div style="padding: 5px; text-align: center; font-size: 12px;">-9</div>
                            <div style="padding: 5px; text-align: center; font-size: 12px;">-8</div>
                            <div style="padding: 5px; text-align: center; font-size: 12px;">-7</div>
                            <div style="padding: 5px; text-align: center; font-size: 12px;">-6</div>
                            <div style="padding: 5px; text-align: center; font-size: 12px;">-5</div>
                            <div style="padding: 5px; text-align: center; font-size: 12px;">-4</div>
                            <div style="padding: 5px; text-align: center; font-size: 12px;">-3</div>
                            <div style="padding: 5px; text-align: center; font-size: 12px;">-2</div>
                            <div style="padding: 5px; text-align: center; font-size: 12px;">-1</div>
                        </div>
                    </div>
                    
                    <div style="background: #f5f5f5; padding: 10px; border-radius: 5px; font-size: 14px;">
                        <div style="margin-bottom: 5px;"><b>Slicing Formula:</b> <code>list[start:stop:step]</code></div>
                        <div style="margin-bottom: 5px;"><b>Default Values:</b> start=0, stop=len(list), step=1</div>
                        <div><b>Negative Step:</b> Goes backwards, start > stop required</div>
                    </div>
                </div>
            </div>
        </div>
        
        <div style="background: #e3f2fd; padding: 15px; border-radius: 8px;">
            <h5>Slicing Patterns Cheat Sheet</h5>
            <pre style="background: white; padding: 15px; font-size: 13px;">
# Sample list for all examples
nums = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]

print("Original list:", nums)
print("Length:", len(nums))

print(" === BASIC SLICES ===")
print("nums[2:6]     ‚Üí", nums[2:6])      # [2, 3, 4, 5]
print("nums[:4]      ‚Üí", nums[:4])       # [0, 1, 2, 3]
print("nums[5:]      ‚Üí", nums[5:])       # [5, 6, 7, 8, 9]
print("nums[:]       ‚Üí", nums[:])        # Full copy [0, 1, ..., 9]

print(" === STEP SLICES ===")
print("nums[::2]     ‚Üí", nums[::2])      # [0, 2, 4, 6, 8]
print("nums[1::2]    ‚Üí", nums[1::2])     # [1, 3, 5, 7, 9]
print("nums[::3]     ‚Üí", nums[::3])      # [0, 3, 6, 9]
print("nums[2:8:2]   ‚Üí", nums[2:8:2])    # [2, 4, 6]

print(" === NEGATIVE SLICES ===")
print("nums[-3:]     ‚Üí", nums[-3:])      # [7, 8, 9]
print("nums[:-3]     ‚Üí", nums[:-3])      # [0, 1, 2, 3, 4, 5, 6]
print("nums[-5:-2]   ‚Üí", nums[-5:-2])    # [5, 6, 7]
print("nums[-2:-5:-1]‚Üí", nums[-2:-5:-1]) # [8, 7, 6]

print(" === REVERSING ===")
print("nums[::-1]    ‚Üí", nums[::-1])     # [9, 8, 7, 6, 5, 4, 3, 2, 1, 0]
print("nums[5:2:-1]  ‚Üí", nums[5:2:-1])   # [5, 4, 3]
print("nums[8:1:-2]  ‚Üí", nums[8:1:-2])   # [8, 6, 4, 2]

print(" === PRACTICAL EXAMPLES ===")
# Get first and last item
print("First & last:", nums[0], nums[-1])

# Get middle third
mid = len(nums) // 3
print("Middle third:", nums[mid:2*mid])

# Get every other item starting from second
print("Every other from index 1:", nums[1::2])

# Get last 3 items in reverse
print("Last 3 reversed:", nums[-1:-4:-1])

# Complex: Get items at even indices
print("Even indices:", nums[::2])

# Complex: Get items at odd indices in reverse
print("Odd indices reversed:", nums[-2::-2])</pre>
        </div>
    </div>
    
    <h5>Slicing with Assignment (Modifying Lists)</h5>
    <pre style="background: #f5f5f5; padding: 15px; margin: 15px 0;">
# =========== MODIFYING LISTS WITH SLICES ===========

print("MODIFYING LISTS USING SLICES")
print("=" * 60)

# 1. Replacing a slice
nums = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
print("Original:", nums)

nums[2:5] = [20, 30, 40]  # Replace elements 2-4
print("After nums[2:5] = [20,30,40]:", nums)

# 2. Replacing with different size
nums[3:6] = [300, 400]  # Replace 3 elements with 2
print("After nums[3:6] = [300,400]:", nums)

nums[1:3] = [100, 200, 300, 400]  # Replace 2 elements with 4
print("After nums[1:3] = [100,200,300,400]:", nums)

# 3. Deleting with slices
nums[4:7] = []  # Delete elements 4-6
print("After nums[4:7] = [] (delete):", nums)

# Equivalent to del nums[4:7]
del nums[2:5]
print("After del nums[2:5]:", nums)

# 4. Inserting with empty slices
nums[3:3] = [999, 888]  # Insert at index 3
print("After nums[3:3] = [999,888] (insert):", nums)

# 5. Multiple operations at once
letters = list("abcdefghij")
print(" Original letters:", letters)

# Reverse middle section
letters[3:7] = letters[6:2:-1]
print("After reversing middle:", letters)

# Move first two to end
letters = letters[2:] + letters[:2]
print("After moving first two to end:", letters)

# 6. Practical: Rotating list
def rotate_list(lst, k):
    """Rotate list by k positions (positive = right, negative = left)"""
    k = k % len(lst)  # Handle large k values
    return lst[-k:] + lst[:-k]

numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9]
print(" Rotation examples:")
print(f"Original: {numbers}")
print(f"Rotate right by 3: {rotate_list(numbers, 3)}")
print(f"Rotate left by 2: {rotate_list(numbers, -2)}")

# 7. Practical: Partitioning list
def partition_list(lst, condition):
    """Partition list based on condition"""
    true_items = [x for x in lst if condition(x)]
    false_items = [x for x in lst if not condition(x)]
    return true_items, false_items

numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
evens, odds = partition_list(numbers, lambda x: x % 2 == 0)
print(f" Partition numbers:")
print(f"Evens: {evens}")
print(f"Odds: {odds}")

# 8. Advanced: Window sliding
def sliding_window(lst, window_size):
    """Generate sliding windows of specified size"""
    for i in range(len(lst) - window_size + 1):
        yield lst[i:i + window_size]

data = [1, 2, 3, 4, 5, 6, 7]
print(" Sliding windows of size 3:")
for window in sliding_window(data, 3):
    print(f"  {window}")

# 9. Matrix operations with slicing
matrix = [
    [1, 2, 3, 4],
    [5, 6, 7, 8],
    [9, 10, 11, 12],
    [13, 14, 15, 16]
]

print(" Matrix operations:")
print("Original matrix:")
for row in matrix:
    print(f"  {row}")

# Extract sub-matrix
submatrix = [row[1:3] for row in matrix[1:3]]
print(" Sub-matrix rows 1-2, cols 1-2:")
for row in submatrix:
    print(f"  {row}")

# Get diagonal using slice stepping
diagonal = [matrix[i][i] for i in range(len(matrix))]
print(f" Main diagonal: {diagonal}")

# Get anti-diagonal
anti_diagonal = [matrix[i][-i-1] for i in range(len(matrix))]
print(f"Anti-diagonal: {anti_diagonal}")</pre>
</div>

<h3>Advanced List Modification Techniques</h3>
<div style="background-color: #fff8e1; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h4>üîß Comprehensive List Methods</h4>
    
    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; margin: 20px 0;">
        <div style="background: #ffecb3; padding: 15px; border-radius: 8px;">
            <h5>Adding Elements</h5>
            <pre style="background: white; padding: 10px; font-size: 13px;">
# =========== ADDING ELEMENTS TO LISTS ===========

# Starting list
fruits = ["apple", "banana"]
print("Original list:", fruits)

# 1. append() - Add single element to end
fruits.append("cherry")
print("After append('cherry'):", fruits)

# append() modifies in-place, returns None
result = fruits.append("date")
print(f"Result of append(): {result}")  # None
print("List after append returns None:", fruits)

# 2. extend() - Add multiple elements
fruits.extend(["elderberry", "fig"])
print("After extend(['elderberry','fig']):", fruits)

# extend() works with any iterable
fruits.extend("grape")  # Adds individual characters!
print("After extend('grape'):", fruits)

# 3. insert() - Insert at specific position
fruits.insert(2, "blueberry")  # Insert at index 2
print("After insert(2, 'blueberry'):", fruits)

# Insert at beginning
fruits.insert(0, "apricot")
print("After insert(0, 'apricot'):", fruits)

# Insert at end (same as append)
fruits.insert(len(fruits), "honeydew")
print("After insert(len(fruits), 'honeydew'):", fruits)

# Negative index insertion
fruits.insert(-2, "kiwi")  # Insert at second last position
print("After insert(-2, 'kiwi'):", fruits)

# 4. Using + operator (creates new list)
more_fruits = ["lemon", "mango"]
combined = fruits + more_fruits  # New list
print(" Using + operator (new list):")
print(f"  fruits: {fruits}")
print(f"  more_fruits: {more_fruits}")
print(f"  combined: {combined}")
print(f"  fruits unchanged: {fruits}")

# 5. Using += operator (modifies in-place)
fruits += ["nectarine", "orange"]
print(" After fruits += ['nectarine','orange']:", fruits)

# 6. Using * operator for repetition
repeated = ["hello"] * 3
print(f" Repetition: ['hello'] * 3 = {repeated}")

# Be careful with mutable objects!
problematic = [[]] * 3
print(f"Problematic: [[]] * 3 = {problematic}")
problematic[0].append(1)  # Affects all sublists!
print(f"After problematic[0].append(1): {problematic}")

# Correct way
correct = [[] for _ in range(3)]
correct[0].append(1)
print(f"Correct: {correct}")

# 7. Performance comparison
import time

print(" Performance comparison (adding 100,000 elements):")
n = 100000

# Method 1: append() in loop
start = time.time()
lst1 = []
for i in range(n):
    lst1.append(i)
time1 = time.time() - start
print(f"  append() in loop: {time1:.4f} seconds")

# Method 2: List comprehension
start = time.time()
lst2 = [i for i in range(n)]
time2 = time.time() - start
print(f"  List comprehension: {time2:.4f} seconds")

# Method 3: Using + in loop (BAD!)
start = time.time()
lst3 = []
for i in range(n):
    lst3 = lst3 + [i]  # Creates new list each time!
time3 = time.time() - start
print(f"  Using + in loop: {time3:.4f} seconds (SLOW!)")

print(f" append() is {time3/time1:.0f}x faster than using + in loop!")</pre>
        </div>
        
        <div style="background: #dcedc8; padding: 15px; border-radius: 8px;">
            <h5>Removing Elements</h5>
            <pre style="background: white; padding: 10px; font-size: 13px;">
# =========== REMOVING ELEMENTS FROM LISTS ===========

# Starting list with duplicates
numbers = [10, 20, 30, 40, 50, 20, 30, 20, 10, 60]
print("Original list:", numbers)

# 1. remove() - Remove first occurrence of value
numbers.remove(20)  # Remove first 20
print("After remove(20):", numbers)

# remove() raises ValueError if element not found
try:
    numbers.remove(99)
except ValueError as e:
    print(f"Error removing 99: {e}")

# 2. pop() - Remove and return element by index
popped = numbers.pop()  # Remove last element
print(f" After pop(): {numbers}, popped: {popped}")

popped = numbers.pop(2)  # Remove element at index 2
print(f"After pop(2): {numbers}, popped: {popped}")

# pop() with negative index
popped = numbers.pop(-2)  # Remove second last
print(f"After pop(-2): {numbers}, popped: {popped}")

# pop() raises IndexError if index out of range
try:
    numbers.pop(10)
except IndexError as e:
    print(f"Error popping index 10: {e}")

# 3. del statement - Delete by index or slice
del numbers[1]  # Delete element at index 1
print(f" After del numbers[1]: {numbers}")

del numbers[2:4]  # Delete slice
print(f"After del numbers[2:4]: {numbers}")

# Delete entire list
numbers_copy = numbers.copy()
del numbers[:]  # Clear list (same as numbers.clear())
print(f"After del numbers[:]: {numbers}")

# 4. clear() - Remove all elements
numbers_copy.clear()
print(f"After numbers_copy.clear(): {numbers_copy}")

# 5. Removing all occurrences of a value
data = [1, 2, 3, 2, 4, 2, 5, 2, 6]
print(f" Original data: {data}")

# Method 1: List comprehension
data_no_2s = [x for x in data if x != 2]
print(f"After removing all 2s (comprehension): {data_no_2s}")

# Method 2: Using while loop
data = [1, 2, 3, 2, 4, 2, 5, 2, 6]
while 2 in data:
    data.remove(2)
print(f"After removing all 2s (while loop): {data}")

# 6. Removing based on condition
numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]

# Remove odd numbers
numbers = [x for x in numbers if x % 2 == 0]
print(f" After keeping only even numbers: {numbers}")

# 7. Removing duplicates while preserving order
data = [3, 1, 2, 3, 4, 2, 5, 1, 6, 3]
print(f" Original with duplicates: {data}")

# Method 1: Using dict (Python 3.7+ preserves order)
unique_ordered = list(dict.fromkeys(data))
print(f"Unique (ordered) using dict: {unique_ordered}")

# Method 2: Using set (doesn't preserve order)
unique_unordered = list(set(data))
print(f"Unique (unordered) using set: {unique_unordered}")

# Method 3: Manual loop
unique_manual = []
for item in data:
    if item not in unique_manual:
        unique_manual.append(item)
print(f"Unique (ordered) manual: {unique_manual}")

# 8. Performance comparison
import time

print(" Performance comparison (removing from list of 10,000):")
n = 10000
test_list = list(range(n))

# Remove from beginning (inefficient for lists)
start = time.time()
while test_list:
    test_list.pop(0)  # O(n) each time!
time_pop0 = time.time() - start
print(f"  pop(0) from beginning: {time_pop0:.4f} seconds")

# Remove from end (efficient)
test_list = list(range(n))
start = time.time()
while test_list:
    test_list.pop()  # O(1) each time
time_pop_end = time.time() - start
print(f"  pop() from end: {time_pop_end:.4f} seconds")

print(f" pop() from end is {time_pop0/time_pop_end:.0f}x faster than pop(0)!")
print("Use collections.deque if you need efficient pop from both ends.")</pre>
        </div>
        
        <div style="background: #bbdefb; padding: 15px; border-radius: 8px;">
            <h5>Searching and Counting</h5>
            <pre style="background: white; padding: 10px; font-size: 13px;">
# =========== SEARCHING AND COUNTING IN LISTS ===========

# Sample list with duplicates
data = [10, 20, 30, 20, 40, 50, 20, 60, 30, 70]
print("Sample data:", data)

# 1. index() - Find position of first occurrence
position = data.index(20)
print(f" First occurrence of 20: index {position}")

# Find after specific position
position = data.index(20, 3)  # Start searching from index 3
print(f"First occurrence of 20 after index 3: index {position}")

# Find within range
position = data.index(20, 1, 5)  # Search indices 1-4
print(f"First occurrence of 20 between indices 1-4: index {position}")

# index() raises ValueError if not found
try:
    position = data.index(99)
except ValueError as e:
    print(f"Error finding 99: {e}")

# 2. count() - Count occurrences
count_20 = data.count(20)
count_30 = data.count(30)
count_99 = data.count(99)

print(f" Occurrences:")
print(f"  20 appears {count_20} times")
print(f"  30 appears {count_30} times")
print(f"  99 appears {count_99} times")

# 3. in operator - Check membership
print(" Membership checks:")
print(f"  20 in data: {20 in data}")
print(f"  99 in data: {99 in data}")
print(f"  20 not in data: {20 not in data}")

# 4. Manual search with loop
print(" Manual search for all positions of 20:")
positions = []
for i, value in enumerate(data):
    if value == 20:
        positions.append(i)
print(f"  All positions of 20: {positions}")

# 5. Finding min and max
print(" Min and max:")
print(f"  min(data): {min(data)}")
print(f"  max(data): {max(data)}")

# With custom key
words = ["apple", "banana", "cherry", "date", "elderberry"]
print(f" Words: {words}")
print(f"  Shortest word: {min(words, key=len)}")
print(f"  Longest word: {max(words, key=len)}")

# 6. Finding all occurrences of minimum/maximum
numbers = [3, 1, 4, 1, 5, 9, 2, 6, 5, 3, 5]
min_value = min(numbers)
max_value = max(numbers)

min_positions = [i for i, x in enumerate(numbers) if x == min_value]
max_positions = [i for i, x in enumerate(numbers) if x == max_value]

print(f" All occurrences:")
print(f"  Minimum value {min_value} at positions: {min_positions}")
print(f"  Maximum value {max_value} at positions: {max_positions}")

# 7. Finding first element matching condition
print(" First element matching condition:")
# First even number
first_even = next((x for x in data if x % 2 == 0), None)
print(f"  First even number: {first_even}")

# First number greater than 50
first_gt_50 = next((x for x in data if x > 50), None)
print(f"  First number > 50: {first_gt_50}")

# 8. Finding all elements matching condition
print(" All elements matching condition:")
even_numbers = [x for x in data if x % 2 == 0]
odd_numbers = [x for x in data if x % 2 != 0]
print(f"  Even numbers: {even_numbers}")
print(f"  Odd numbers: {odd_numbers}")

# 9. Binary search (for sorted lists)
def binary_search(lst, target):
    """Binary search - O(log n) for sorted lists"""
    left, right = 0, len(lst) - 1
    
    while left <= right:
        mid = (left + right) // 2
        if lst[mid] == target:
            return mid
        elif lst[mid] < target:
            left = mid + 1
        else:
            right = mid - 1
    
    return -1  # Not found

sorted_data = sorted(data)
print(f" Sorted data: {sorted_data}")
print(f"Binary search for 40: index {binary_search(sorted_data, 40)}")
print(f"Binary search for 99: index {binary_search(sorted_data, 99)}")

# Compare with index() performance
import time

large_list = list(range(1000000))
target = 999999

# Linear search (index())
start = time.time()
try:
    pos = large_list.index(target)
except ValueError:
    pos = -1
linear_time = time.time() - start

# Binary search
sorted_large = sorted(large_list)
start = time.time()
pos = binary_search(sorted_large, target)
binary_time = time.time() - start

print(f" Performance (1,000,000 elements):")
print(f"  Linear search (index()): {linear_time:.6f} seconds")
print(f"  Binary search: {binary_time:.6f} seconds")
print(f"  Binary search is {linear_time/binary_time:.0f}x faster!")</pre>
        </div>
        
        <div style="background: #e1bee7; padding: 15px; border-radius: 8px;">
            <h5>Sorting and Reversing</h5>
            <pre style="background: white; padding: 10px; font-size: 13px;">
# =========== SORTING AND REVERSING LISTS ===========

# Sample unsorted data
numbers = [42, 17, 89, 5, 23, 56, 91, 34, 8, 72]
print("Original numbers:", numbers)

# 1. sort() - In-place sorting
numbers.sort()
print("After sort():", numbers)

# Sort in reverse
numbers.sort(reverse=True)
print("After sort(reverse=True):", numbers)

# 2. sorted() - Return new sorted list
unsorted = [42, 17, 89, 5, 23, 56]
sorted_copy = sorted(unsorted)
print(f" Original: {unsorted}")
print(f"Sorted copy: {sorted_copy}")
print(f"Original unchanged: {unsorted}")

# 3. Sorting strings
words = ["banana", "Apple", "cherry", "date", "elderberry"]
print(f" Original words: {words}")

# Case-sensitive sort (uppercase first)
words.sort()
print("Case-sensitive sort:", words)

# Case-insensitive sort
words.sort(key=str.lower)
print("Case-insensitive sort:", words)

# Sort by length
words.sort(key=len)
print("Sort by length:", words)

# Sort by length, then alphabetically
words.sort(key=lambda x: (len(x), x.lower()))
print("Sort by length, then alphabetically:", words)

# 4. Custom sorting with objects
class Student:
    def __init__(self, name, grade, age):
        self.name = name
        self.grade = grade
        self.age = age
    
    def __repr__(self):
        return f"{self.name}(Grade:{self.grade}, Age:{self.age})"

students = [
    Student("Alice", 85, 20),
    Student("Bob", 92, 22),
    Student("Charlie", 78, 19),
    Student("Diana", 92, 21),
    Student("Edward", 85, 23)
]

print(" Original students:")
for student in students:
    print(f"  {student}")

# Sort by grade (descending), then by age (ascending)
students.sort(key=lambda s: (-s.grade, s.age))
print(" Sorted by grade (desc), age (asc):")
for student in students:
    print(f"  {student}")

# 5. Reverse list
colors = ["red", "green", "blue", "yellow", "purple"]
print(f" Original colors: {colors}")

# reverse() - In-place reversal
colors.reverse()
print("After reverse():", colors)

# reversed() - Returns iterator
reversed_colors = list(reversed(colors))
print("Reversed copy:", reversed_colors)
print("Original after reversal:", colors)

# Using slicing for reversal
colors = ["red", "green", "blue", "yellow", "purple"]
reversed_slice = colors[::-1]
print(f" Reversal using slicing: {reversed_slice}")
print(f"Original unchanged: {colors}")

# 6. Stable sort property
# Python's sort is stable - equal elements keep original order
items = [
    ("apple", 3),
    ("banana", 2),
    ("cherry", 3),
    ("date", 1),
    ("elderberry", 2)
]

# Sort by quantity (second element)
items.sort(key=lambda x: x[1])
print(" Stable sort example (sorted by quantity):")
for item, qty in items:
    print(f"  {item:12} {qty}")

# Note: apple and cherry both have quantity 3
# They keep their relative order from original list

# 7. Performance comparison
import time
import random

print(" Performance comparison (sorting 100,000 random numbers):")
large_list = [random.randint(1, 1000000) for _ in range(100000)]

# Time sort()
list1 = large_list.copy()
start = time.time()
list1.sort()
time_sort = time.time() - start

# Time sorted()
list2 = large_list.copy()
start = time.time()
sorted_list = sorted(list2)
time_sorted = time.time() - start

print(f"  sort() in-place: {time_sort:.4f} seconds")
print(f"  sorted() new list: {time_sorted:.4f} seconds")
print(f"  Difference: {(time_sorted-time_sort)/time_sort*100:.1f}%")

# 8. Advanced: Custom comparator using functools.cmp_to_key
from functools import cmp_to_key

def custom_compare(a, b):
    """Custom comparison: shorter strings first, then alphabetical"""
    if len(a) != len(b):
        return len(a) - len(b)  # Negative if a shorter
    else:
        return -1 if a < b else 1 if a > b else 0

words = ["banana", "apple", "cherry", "date", "fig", "grapefruit"]
words.sort(key=cmp_to_key(custom_compare))
print(" Custom sort (shorter first, then alphabetical):", words)

# 9. Partial sorting (getting top N items)
data = [random.randint(1, 1000) for _ in range(100)]
print(f" Top 10 largest numbers from 100 random numbers:")
top_10 = sorted(data, reverse=True)[:10]
print(f"  {top_10}")

print(f"Bottom 10 smallest numbers:")
bottom_10 = sorted(data)[:10]
print(f"  {bottom_10}")

# 10. Sorting with multiple criteria
products = [
    {"name": "Laptop", "price": 999, "rating": 4.5},
    {"name": "Mouse", "price": 25, "rating": 4.2},
    {"name": "Keyboard", "price": 79, "rating": 4.7},
    {"name": "Monitor", "price": 299, "rating": 4.5},
    {"name": "Tablet", "price": 499, "rating": 4.3}
]

# Sort by rating (descending), then price (ascending)
products.sort(key=lambda p: (-p["rating"], p["price"]))
print(" Products sorted by rating (desc), price (asc):")
for p in products:
    print(f"  {p['name']:10} \${p['price']:5} Rating: {p['rating']}")</pre>
        </div>
    </div>
</div>

<h3>Practical List Manipulation Applications</h3>
<div style="background-color: #e8f5e8; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h4>üìã Real-World Examples</h4>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">
        <div>
            <h5>Example 1: Data Processing Pipeline</h5>
            <pre style="background: white; padding: 15px;">
class DataProcessor:
    """Process and clean data using list manipulations"""
    
    def __init__(self, data):
        self.original = data.copy()
        self.processed = data.copy()
    
    def remove_outliers(self, method='iqr'):
        """Remove outliers using different methods"""
        if method == 'iqr':
            # Using IQR method
            sorted_data = sorted(self.processed)
            q1_index = len(sorted_data) // 4
            q3_index = (3 * len(sorted_data)) // 4
            q1 = sorted_data[q1_index]
            q3 = sorted_data[q3_index]
            iqr = q3 - q1
            
            lower_bound = q1 - 1.5 * iqr
            upper_bound = q3 + 1.5 * iqr
            
            # Filter data
            self.processed = [x for x in self.processed 
                            if lower_bound <= x <= upper_bound]
            
        elif method == 'zscore':
            # Using z-score method (simplified)
            import statistics
            mean = statistics.mean(self.processed)
            stdev = statistics.stdev(self.processed)
            
            self.processed = [x for x in self.processed 
                            if abs((x - mean) / stdev) < 3]
        
        return self
    
    def normalize(self, method='minmax'):
        """Normalize data to 0-1 range"""
        if not self.processed:
            return self
        
        if method == 'minmax':
            min_val = min(self.processed)
            max_val = max(self.processed)
            range_val = max_val - min_val
            
            if range_val > 0:
                self.processed = [(x - min_val) / range_val 
                                for x in self.processed]
        
        elif method == 'zscore':
            import statistics
            mean = statistics.mean(self.processed)
            stdev = statistics.stdev(self.processed)
            
            if stdev > 0:
                self.processed = [(x - mean) / stdev 
                                for x in self.processed]
        
        return self
    
    def smooth(self, window_size=3):
        """Apply moving average smoothing"""
        if len(self.processed) < window_size:
            return self
        
        smoothed = []
        for i in range(len(self.processed) - window_size + 1):
            window = self.processed[i:i + window_size]
            smoothed.append(sum(window) / window_size)
        
        self.processed = smoothed
        return self
    
    def resample(self, new_size):
        """Resample data to new size"""
        if len(self.processed) <= 1 or new_size <= 1:
            return self
        
        # Linear interpolation
        resampled = []
        step = (len(self.processed) - 1) / (new_size - 1)
        
        for i in range(new_size):
            pos = i * step
            idx = int(pos)
            frac = pos - idx
            
            if idx == len(self.processed) - 1:
                value = self.processed[idx]
            else:
                value = (self.processed[idx] * (1 - frac) + 
                        self.processed[idx + 1] * frac)
            
            resampled.append(value)
        
        self.processed = resampled
        return self
    
    def detect_peaks(self, threshold=0.5):
        """Detect peaks in data"""
        peaks = []
        
        for i in range(1, len(self.processed) - 1):
            if (self.processed[i] > self.processed[i-1] and 
                self.processed[i] > self.processed[i+1] and
                self.processed[i] > threshold):
                peaks.append((i, self.processed[i]))
        
        return peaks
    
    def get_statistics(self):
        """Get comprehensive statistics"""
        import statistics
        
        stats = {
            'original_size': len(self.original),
            'processed_size': len(self.processed),
            'min': min(self.processed) if self.processed else None,
            'max': max(self.processed) if self.processed else None,
            'mean': statistics.mean(self.processed) if self.processed else None,
            'median': statistics.median(self.processed) if self.processed else None,
            'stdev': statistics.stdev(self.processed) if len(self.processed) > 1 else None,
            'range': max(self.processed) - min(self.processed) if self.processed else None
        }
        
        return stats
    
    def visualize(self, width=60, height=20):
        """Create ASCII visualization"""
        if not self.processed:
            print("No data to visualize")
            return
        
        min_val = min(self.processed)
        max_val = max(self.processed)
        data_range = max_val - min_val
        
        if data_range == 0:
            print("Data range is zero")
            return
        
        # Create grid
        grid = [[' ' for _ in range(width)] for _ in range(height)]
        
        # Plot data points
        for i, value in enumerate(self.processed):
            x = int((i / (len(self.processed) - 1)) * (width - 1)) if len(self.processed) > 1 else 0
            y = int(((value - min_val) / data_range) * (height - 1))
            
            if 0 <= x < width and 0 <= y < height:
                grid[height - 1 - y][x] = '‚óè'
        
        # Add axes
        for y in range(height):
            grid[y][0] = '‚îÇ'
        
        for x in range(width):
            grid[height - 1][x] = '‚îÄ'
        
        grid[height - 1][0] = '‚îî'
        
        # Print visualization
        print("Data Visualization:")
        for row in grid:
            print(''.join(row))
        
        # Add scale
        print(f"Min: {min_val:.2f} | Max: {max_val:.2f} | Points: {len(self.processed)}")

# Usage example
if __name__ == "__main__":
    # Generate sample data with noise
    import random
    import math
    
    # Create sine wave with noise
    data = []
    for i in range(100):
        value = math.sin(i * 0.1) + random.uniform(-0.3, 0.3)
        data.append(value)
    
    print("Original data (first 10 points):", data[:10])
    
    # Process data
    processor = DataProcessor(data)
    
    print(" Processing pipeline:")
    print("1. Removing outliers...")
    processor.remove_outliers('iqr')
    
    print("2. Applying smoothing...")
    processor.smooth(window_size=5)
    
    print("3. Normalizing data...")
    processor.normalize('minmax')
    
    print("4. Resampling to 50 points...")
    processor.resample(50)
    
    # Get statistics
    stats = processor.get_statistics()
    print(" Statistics:")
    for key, value in stats.items():
        if isinstance(value, float):
            print(f"  {key}: {value:.4f}")
        else:
            print(f"  {key}: {value}")
    
    # Detect peaks
    peaks = processor.detect_peaks(threshold=0.5)
    print(f" Detected {len(peaks)} peaks:")
    for idx, value in peaks[:5]:  # Show first 5 peaks
        print(f"  Peak at index {idx}: {value:.4f}")
    
    # Visualize
    print(" Visualization:")
    processor.visualize(width=60, height=15)</pre>
        </div>
        
        <div>
            <h5>Example 2: Pagination System</h5>
            <pre style="background: white; padding: 15px;">
class Paginator:
    """Generic pagination system for lists"""
    
    def __init__(self, items, items_per_page=10):
        self.items = items
        self.items_per_page = items_per_page
        self.total_items = len(items)
        self.total_pages = (self.total_items + items_per_page - 1) // items_per_page
    
    def get_page(self, page_num):
        """Get items for specific page (1-indexed)"""
        if page_num < 1 or page_num > self.total_pages:
            return []
        
        start_idx = (page_num - 1) * self.items_per_page
        end_idx = min(start_idx + self.items_per_page, self.total_items)
        
        return self.items[start_idx:end_idx]
    
    def get_page_info(self, page_num):
        """Get metadata about a page"""
        if page_num < 1 or page_num > self.total_pages:
            return None
        
        start_idx = (page_num - 1) * self.items_per_page + 1
        end_idx = min(page_num * self.items_per_page, self.total_items)
        
        return {
            'page': page_num,
            'total_pages': self.total_pages,
            'total_items': self.total_items,
            'start': start_idx,
            'end': end_idx,
            'items_on_page': end_idx - start_idx + 1,
            'has_previous': page_num > 1,
            'has_next': page_num < self.total_pages
        }
    
    def get_page_numbers(self, current_page, window=2):
        """Get page numbers to display (with ellipsis)"""
        pages = []
        
        # Always include first page
        if current_page > window + 2:
            pages.append(1)
            pages.append('...')
        
        # Add pages around current
        start = max(1, current_page - window)
        end = min(self.total_pages, current_page + window)
        
        for page in range(start, end + 1):
            pages.append(page)
        
        # Always include last page
        if current_page < self.total_pages - window - 1:
            pages.append('...')
            pages.append(self.total_pages)
        
        return pages
    
    def display_page(self, page_num):
        """Display formatted page with navigation"""
        page_items = self.get_page(page_num)
        page_info = self.get_page_info(page_num)
        
        if not page_info:
            print("Invalid page number")
            return
        
        print("=" * 70)
        print(f"PAGE {page_info['page']} OF {page_info['total_pages']}")
        print(f"Showing items {page_info['start']}-{page_info['end']} of {page_info['total_items']}")
        print("=" * 70)
        
        # Display items
        for i, item in enumerate(page_items, page_info['start']):
            print(f"{i:4}. {item}")
        
        # Navigation
        print("-" * 70)
        
        # Previous/Next
        nav = []
        if page_info['has_previous']:
            nav.append(f"‚Üê Prev ({page_num-1})")
        
        # Page numbers
        page_numbers = self.get_page_numbers(page_num)
        for p in page_numbers:
            if p == '...':
                nav.append("...")
            elif p == page_num:
                nav.append(f"[{p}]")
            else:
                nav.append(str(p))
        
        if page_info['has_next']:
            nav.append(f"Next ({page_num+1}) ‚Üí")
        
        print(" ".join(nav))
        print("=" * 70)
    
    def search_and_paginate(self, query, key=None):
        """Search items and create new paginator for results"""
        if key is None:
            # Simple string search
            results = [item for item in self.items if query.lower() in str(item).lower()]
        else:
            # Search using key function
            results = [item for item in self.items if query.lower() in str(key(item)).lower()]
        
        return Paginator(results, self.items_per_page)
    
    def sort_and_paginate(self, key=None, reverse=False):
        """Sort items and create new paginator"""
        sorted_items = sorted(self.items, key=key, reverse=reverse)
        return Paginator(sorted_items, self.items_per_page)
    
    def filter_and_paginate(self, condition):
        """Filter items and create new paginator"""
        filtered_items = [item for item in self.items if condition(item)]
        return Paginator(filtered_items, self.items_per_page)

class Product:
    def __init__(self, id, name, category, price, rating):
        self.id = id
        self.name = name
        self.category = category
        self.price = price
        self.rating = rating
    
    def __str__(self):
        return f"{self.name:20} | {self.category:12} | \${self.price:6.2f} | ‚≠ê {self.rating:.1f}"

# Usage example
if __name__ == "__main__":
    # Create sample products
    import random
    
    categories = ["Electronics", "Clothing", "Books", "Home", "Sports", "Toys"]
    
    products = []
    for i in range(1, 101):
        product = Product(
            id=f"P{i:03d}",
            name=f"Product {i}",
            category=random.choice(categories),
            price=random.uniform(10, 1000),
            rating=random.uniform(1, 5)
        )
        products.append(product)
    
    # Create paginator
    paginator = Paginator(products, items_per_page=8)
    
    # Display first page
    print("Displaying first page:")
    paginator.display_page(1)
    
    # Display middle page
    print(" Displaying middle page:")
    paginator.display_page(6)
    
    # Search and paginate
    print(" Searching for 'Product 5':")
    search_results = paginator.search_and_paginate("Product 5")
    search_results.display_page(1)
    
    # Sort by price (descending) and paginate
    print(" Products sorted by price (highest first):")
    sorted_by_price = paginator.sort_and_paginate(
        key=lambda p: p.price, 
        reverse=True
    )
    sorted_by_price.display_page(1)
    
    # Filter by category and paginate
    print(" Filtering Electronics products:")
    electronics_only = paginator.filter_and_paginate(
        lambda p: p.category == "Electronics"
    )
    
    if electronics_only.total_items > 0:
        electronics_only.display_page(1)
    else:
        print("No electronics products found")
    
    # Advanced: Chain operations
    print(" Advanced: Electronics products sorted by rating:")
    filtered = paginator.filter_and_paginate(
        lambda p: p.category == "Electronics"
    )
    filtered_sorted = filtered.sort_and_paginate(
        key=lambda p: p.rating, 
        reverse=True
    )
    filtered_sorted.display_page(1)</pre>
        </div>
    </div>
    
    <h5>Example 3: Text Editor with Buffer</h5>
    <pre style="background: #f5f5f5; padding: 15px; margin: 15px 0;">
class TextBuffer:
    """Text editor buffer using list manipulation"""
    
    def __init__(self, text=""):
        # Store text as list of characters for efficient manipulation
        self.buffer = list(text)
        self.cursor = 0  # Position in buffer
        self.clipboard = []
        self.history = []  # For undo functionality
        self.save_state()
    
    def save_state(self):
        """Save current state to history"""
        # Save copy of buffer and cursor
        self.history.append((self.buffer.copy(), self.cursor))
        # Keep only last 50 states
        if len(self.history) > 50:
            self.history.pop(0)
    
    def insert(self, text):
        """Insert text at cursor position"""
        self.save_state()
        
        # Insert each character
        for char in text:
            self.buffer.insert(self.cursor, char)
            self.cursor += 1
    
    def delete(self, count=1):
        """Delete characters starting at cursor"""
        if count == 0:
            return
        
        self.save_state()
        
        if count > 0:
            # Delete forward
            end = min(self.cursor + count, len(self.buffer))
            del self.buffer[self.cursor:end]
        else:
            # Delete backward
            start = max(self.cursor + count, 0)
            del self.buffer[start:self.cursor]
            self.cursor = start
    
    def move_cursor(self, position):
        """Move cursor to absolute position"""
        self.cursor = max(0, min(position, len(self.buffer)))
    
    def move_cursor_relative(self, offset):
        """Move cursor by offset"""
        self.move_cursor(self.cursor + offset)
    
    def copy(self, start=None, end=None):
        """Copy text to clipboard"""
        if start is None:
            start = self.cursor
        if end is None:
            end = len(self.buffer)
        
        start = max(0, min(start, len(self.buffer)))
        end = max(start, min(end, len(self.buffer)))
        
        self.clipboard = self.buffer[start:end]
        return ''.join(self.clipboard)
    
    def cut(self, start=None, end=None):
        """Cut text to clipboard"""
        if start is None:
            start = self.cursor
        if end is None:
            end = len(self.buffer)
        
        copied = self.copy(start, end)
        self.save_state()
        del self.buffer[start:end]
        
        if self.cursor > start:
            self.cursor = max(start, self.cursor - (end - start))
        
        return copied
    
    def paste(self):
        """Paste from clipboard"""
        if not self.clipboard:
            return
        
        self.save_state()
        self.insert(''.join(self.clipboard))
    
    def undo(self):
        """Undo last operation"""
        if len(self.history) > 1:
            self.history.pop()  # Remove current state
            self.buffer, self.cursor = self.history[-1]
            return True
        return False
    
    def find(self, text, start=0):
        """Find text starting from position"""
        buffer_str = ''.join(self.buffer)
        position = buffer_str.find(text, start)
        return position
    
    def find_all(self, text):
        """Find all occurrences of text"""
        buffer_str = ''.join(self.buffer)
        positions = []
        start = 0
        
        while True:
            pos = buffer_str.find(text, start)
            if pos == -1:
                break
            positions.append(pos)
            start = pos + 1
        
        return positions
    
    def replace(self, old_text, new_text, count=None):
        """Replace occurrences of text"""
        positions = self.find_all(old_text)
        
        if count is not None:
            positions = positions[:count]
        
        if not positions:
            return 0
        
        self.save_state()
        
        # Work backwards to preserve positions
        for pos in reversed(positions):
            # Delete old text
            del self.buffer[pos:pos + len(old_text)]
            
            # Insert new text
            for i, char in enumerate(new_text):
                self.buffer.insert(pos + i, char)
        
        # Update cursor if it was affected
        for pos in positions:
            if self.cursor >= pos:
                if self.cursor < pos + len(old_text):
                    self.cursor = pos
                else:
                    self.cursor += len(new_text) - len(old_text)
        
        return len(positions)
    
    def select_word(self):
        """Select word at cursor"""
        if not self.buffer or self.cursor >= len(self.buffer):
            return None, None
        
        # Find word boundaries
        start = self.cursor
        end = self.cursor
        
        # Move left to word start
        while start > 0 and self.buffer[start - 1].isalnum():
            start -= 1
        
        # Move right to word end
        while end < len(self.buffer) and self.buffer[end].isalnum():
            end += 1
        
        if start == end:
            return None, None
        
        return start, end
    
    def get_line_info(self):
        """Get current line number and column"""
        buffer_str = ''.join(self.buffer)
        
        # Count lines before cursor
        lines = buffer_str[:self.cursor].split(' ')
        line_num = len(lines)
        column = len(lines[-1]) if lines else 0
        
        # Get current line
        remaining = buffer_str[self.cursor:]
        next_newline = remaining.find(' ')
        if next_newline == -1:
            current_line = remaining
        else:
            current_line = remaining[:next_newline]
        
        current_line = lines[-1] + current_line if lines else current_line
        
        return {
            'line': line_num,
            'column': column + 1,  # 1-indexed for display
            'current_line': current_line,
            'total_lines': buffer_str.count(' ') + 1
        }
    
    def display(self, context_lines=2):
        """Display buffer with cursor"""
        buffer_str = ''.join(self.buffer)
        lines = buffer_str.split(' ')
        
        line_info = self.get_line_info()
        current_line_idx = line_info['line'] - 1
        
        print("=" * 70)
        print(f"BUFFER (Line {line_info['line']}/{line_info['total_lines']}, "
              f"Col {line_info['column']})")
        print("=" * 70)
        
        # Show context around cursor
        start_line = max(0, current_line_idx - context_lines)
        end_line = min(len(lines), current_line_idx + context_lines + 1)
        
        for i in range(start_line, end_line):
            line_num = i + 1
            prefix = ">" if i == current_line_idx else " "
            print(f"{prefix}{line_num:4}: {lines[i]}")
            
            # Show cursor position on current line
            if i == current_line_idx:
                cursor_pos = line_info['column'] - 1
                cursor_line = " " * (6 + cursor_pos) + "^"
                print(cursor_line)
        
        print("=" * 70)
        print("Commands: i=insert, d=delete, m=move, f=find, r=replace, u=undo, q=quit")
        print("=" * 70)
    
    def get_text(self):
        """Get full text as string"""
        return ''.join(self.buffer)

# Interactive text editor example
def interactive_editor():
    """Run interactive text editor"""
    print("Simple Text Editor")
    print("Type 'help' for commands")
    print("-" * 50)
    
    buffer = TextBuffer("Welcome to the text editor!  "
                       "This is a simple text buffer implementation. "
                       "You can edit this text using various commands.")
    
    while True:
        buffer.display()
        
        command = input(" Command: ").strip().lower()
        
        if command == 'q' or command == 'quit':
            print("Exiting editor...")
            break
        
        elif command == 'i' or command.startswith('insert'):
            text = input("Text to insert: ")
            buffer.insert(text)
        
        elif command == 'd' or command.startswith('delete'):
            try:
                count = int(input("Characters to delete (negative for backward): "))
                buffer.delete(count)
            except ValueError:
                print("Invalid number")
        
        elif command == 'm' or command.startswith('move'):
            try:
                pos = input("Move to (absolute position or +- offset): ")
                
                if pos.startswith('+'):
                    offset = int(pos[1:])
                    buffer.move_cursor_relative(offset)
                elif pos.startswith('-'):
                    offset = -int(pos[1:])
                    buffer.move_cursor_relative(offset)
                else:
                    position = int(pos)
                    buffer.move_cursor(position)
            except ValueError:
                print("Invalid position")
        
        elif command == 'f' or command.startswith('find'):
            text = input("Text to find: ")
            positions = buffer.find_all(text)
            
            if positions:
                print(f"Found '{text}' at positions: {positions}")
                if len(positions) == 1:
                    buffer.move_cursor(positions[0])
            else:
                print(f"'{text}' not found")
        
        elif command == 'r' or command.startswith('replace'):
            old = input("Text to replace: ")
            new = input("Replace with: ")
            
            try:
                count = input("Max replacements (Enter for all): ")
                count = int(count) if count.strip() else None
            except ValueError:
                print("Invalid count, replacing all")
                count = None
            
            replaced = buffer.replace(old, new, count)
            print(f"Replaced {replaced} occurrence(s)")
        
        elif command == 'u' or command == 'undo':
            if buffer.undo():
                print("Undo successful")
            else:
                print("Nothing to undo")
        
        elif command == 'c' or command == 'copy':
            try:
                start = input("Start position (Enter for cursor): ")
                start = int(start) if start.strip() else None
                
                end = input("End position (Enter for end): ")
                end = int(end) if end.strip() else None
                
                copied = buffer.copy(start, end)
                print(f"Copied: '{copied}'")
            except ValueError:
                print("Invalid position")
        
        elif command == 'x' or command == 'cut':
            try:
                start = input("Start position (Enter for cursor): ")
                start = int(start) if start.strip() else None
                
                end = input("End position (Enter for end): ")
                end = int(end) if end.strip() else None
                
                cut = buffer.cut(start, end)
                print(f"Cut: '{cut}'")
            except ValueError:
                print("Invalid position")
        
        elif command == 'v' or command == 'paste':
            buffer.paste()
            print("Pasted from clipboard")
        
        elif command == 's' or command == 'select':
            start, end = buffer.select_word()
            if start is not None:
                print(f"Selected word: '{buffer.copy(start, end)}'")
                buffer.move_cursor(start)
            else:
                print("No word at cursor")
        
        elif command == 'help':
            print(" Available commands:")
            print("  i, insert    - Insert text at cursor")
            print("  d, delete    - Delete characters")
            print("  m, move      - Move cursor")
            print("  f, find      - Find text")
            print("  r, replace   - Replace text")
            print("  c, copy      - Copy to clipboard")
            print("  x, cut       - Cut to clipboard")
            print("  v, paste     - Paste from clipboard")
            print("  s, select    - Select word at cursor")
            print("  u, undo      - Undo last operation")
            print("  q, quit      - Exit editor")
            input(" Press Enter to continue...")
        
        else:
            print(f"Unknown command: {command}")
            print("Type 'help' for available commands")
    
    # Save final text
    print(" Final text:")
    print("-" * 50)
    print(buffer.get_text())
    print("-" * 50)

# Run editor
if __name__ == "__main__":
    interactive_editor()</pre>
</div>

<h3>Today's Hands-On Exercise</h3>
<div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <b>Task 1: Image Processing Simulation (60 minutes)</b>
    <p>Create a simple image processor using 2D lists:</p>
    <ul>
        <li>Create and manipulate 2D arrays (lists of lists) as images</li>
        <li>Implement filters: blur, sharpen, edge detection</li>
        <li>Apply transformations: rotate, flip, crop</li>
        <li>Convert to grayscale and adjust brightness/contrast</li>
        <li>Generate ASCII art from "images"</li>
    </ul>
    
    <pre style="background: #f5f5f5; padding: 10px; margin: 10px 0;">
# Starter code for image as 2D list
class SimpleImage:
    def __init__(self, width, height):
        self.width = width
        self.height = height
        # Create 2D list (height x width)
        self.pixels = [[0 for _ in range(width)] for _ in range(height)]
    
    def apply_filter(self, filter_type):
        # Apply different filters using list slicing and manipulation
        pass
    
    def rotate(self, degrees):
        # Rotate image by 90, 180, or 270 degrees
        pass
    
    def to_ascii(self):
        # Convert pixel values to ASCII characters
        pass</pre>
    
    <b>Task 2: Stock Market Analyzer (60 minutes)</b>
    <p>Create a stock analysis tool:</p>
    <ul>
        <li>Process historical price data (lists of prices)</li>
        <li>Calculate moving averages using slicing</li>
        <li>Identify support/resistance levels</li>
        <li>Detect trends and patterns</li>
        <li>Calculate risk metrics (volatility, drawdown)</li>
        <li>Generate trading signals</li>
    </ul>
    
    <b>Task 3: DNA Sequence Analyzer (60 minutes)</b>
    <p>Create a bioinformatics tool:</p>
    <ul>
        <li>Process DNA sequences (strings as lists of characters)</li>
        <li>Find patterns and motifs using slicing</li>
        <li>Calculate GC content and other statistics</li>
        <li>Find open reading frames</li>
        <li>Compare sequences for similarity</li>
        <li>Translate DNA to protein sequences</li>
    </ul>
</div>

<h3>Homework Assignment</h3>
<div style="background-color: #fff0e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <b>Build a "Music Playlist Manager"</b>
    
    <b>Requirements:</b>
    <ul>
        <li><b>Playlist Operations:</b> Create, edit, reorder, shuffle playlists</li>
        <li><b>Song Management:</b> Add, remove, search songs</li>
        <li><b>Playback Controls:</b> Play, pause, skip, repeat</li>
        <li><b>Statistics:</b> Most played songs, play counts</li>
        <li><b>Import/Export:</b> Save/Load playlists from files</li>
    </ul>
    
    <b>Data Structure:</b>
    <pre style="background: #f5f5f5; padding: 10px;">
PLAYLIST DATA STRUCTURE:
1. Songs List:
   songs = [
       {
           "id": "S001",
           "title": "Song Title",
           "artist": "Artist Name",
           "album": "Album Name",
           "duration": 180,  # seconds
           "genre": "Pop",
           "play_count": 0,
           "rating": 4.5
       },
       ...
   ]

2. Playlists List:
   playlists = [
       {
           "id": "P001",
           "name": "Workout Mix",
           "songs": ["S001", "S003", "S005"],  # List of song IDs
           "created": "2024-01-20",
           "play_count": 15
       },
       ...
   ]</pre>
    
    <b>Features to Implement:</b>
    <ul>
        <li>Create and manage multiple playlists</li>
        <li>Add/remove songs from playlists</li>
        <li>Reorder songs within playlists (using list manipulation)</li>
        <li>Shuffle playlists (randomize order)</li>
        <li>Playlist statistics (total duration, average rating)</li>
        <li>Search songs by title, artist, or genre</li>
        <li>Most played songs ranking</li>
        <li>Import/export playlists to CSV files</li>
        <li>Merge multiple playlists</li>
    </ul>
    
    <b>Advanced Features:</b>
    <li>Smart shuffle (avoid repeating same artist consecutively)</li>
    <li>Playlist recommendations based on listening history</li>
    <li>Crossfade between songs simulation</li>
    <li>Equalizer settings (simulated)</li>
    <li>Lyrics display (mock data)</li>
    <li>Radio station simulation (continuous playback with similar songs)</li>
</div>

<h3>Key Learning Points:</h3>
<ol>
    <li><b>Slicing Mastery:</b> <code>list[start:stop:step]</code> with all variations</li>
    <li><b>Efficient Modification:</b> Using slices to modify lists in-place</li>
    <li><b>Adding Elements:</b> append(), extend(), insert(), and concatenation</li>
    <li><b>Removing Elements:</b> remove(), pop(), del, and clear()</li>
    <li><b>Searching:</b> index(), count(), in operator, and manual search</li>
    <li><b>Sorting:</b> sort() vs sorted(), custom keys, stable sort property</li>
    <li><b>Performance:</b> Understanding time complexity of different operations</li>
</ol>

<div style="background-color: #e8f5e8; padding: 15px; margin: 20px 0; border-radius: 5px;">
    <h3>üí° List Manipulation Best Practices:</h3>
    <ul>
        <li><b>Use List Comprehensions:</b> For creating new lists from existing ones</li>
        <li><b>Prefer Slicing Over Loops:</b> When possible, for readability and performance</li>
        <li><b>Know When to Copy:</b> Use <code>list.copy()</code> or <code>list[:]</code> to avoid unintended mutations</li>
        <li><b>Use enumerate() for Index-Value Pairs:</b> Cleaner than <code>range(len(list))</code></li>
        <li><b>Avoid Modifying While Iterating:</b> Create a copy or use list comprehension</li>
        <li><b>Use Built-in Methods:</b> They're optimized and more readable</li>
        <li><b>Consider Collections.deque:</b> For efficient pops from both ends</li>
    </ul>
    
    <pre style="background: white; padding: 10px; margin-top: 10px;">
# Best practices in action

# 1. Creating new lists
# Instead of modifying original, create new list
original = [1, 2, 3, 4, 5]
# Instead of:
modified = original[:]
modified.append(6)

# Use list comprehension or other non-destructive methods:
modified = original + [6]
# or
modified = [*original, 6]

# 2. Efficient filtering
numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]

# Instead of modifying while iterating:
# i = 0
# while i < len(numbers):
#     if numbers[i] % 2 == 0:
#         numbers.pop(i)
#     else:
#         i += 1

# Use list comprehension:
odd_numbers = [x for x in numbers if x % 2 != 0]

# 3. Efficient rotation
def rotate_efficient(lst, k):
    """Efficient rotation using slicing"""
    k = k % len(lst)
    return lst[-k:] + lst[:-k]

# 4. Finding all indices of an element
def find_all_indices(lst, value):
    """Find all indices of value in list"""
    return [i for i, x in enumerate(lst) if x == value]

# 5. Partitioning list
def partition(lst, condition):
    """Partition list based on condition"""
    true_items = [x for x in lst if condition(x)]
    false_items = [x for x in lst if not condition(x)]
    return true_items, false_items

# 6. Chunking list
def chunk_list(lst, chunk_size):
    """Split list into chunks of specified size"""
    return [lst[i:i + chunk_size] for i in range(0, len(lst), chunk_size)]

# 7. Flattening nested lists
def flatten(nested_list):
    """Flatten arbitrarily nested lists"""
    result = []
    for item in nested_list:
        if isinstance(item, list):
            result.extend(flatten(item))
        else:
            result.append(item)
    return result

# 8. Removing duplicates while preserving order
def unique_ordered(lst):
    """Remove duplicates while preserving order"""
    seen = set()
    return [x for x in lst if not (x in seen or seen.add(x))]</pre>
</div>

<div style="background-color: #e3f2fd; padding: 15px; margin: 20px 0; border-radius: 5px;">
    <h3>‚ö° Performance Optimization Challenge:</h3>
    
    <div style="background: white; padding: 15px; border-radius: 8px; border: 2px solid #4A90E2; margin-bottom: 15px;">
        <h4>Challenge: Optimize List Operations</h4>
        <p>Given the following inefficient code, optimize it using proper list manipulation techniques:</p>
        <pre style="background: #f5f5f5; padding: 10px;">
# Inefficient code
def process_data_inefficient(data):
    result = []
    
    # 1. Remove negative numbers
    i = 0
    while i < len(data):
        if data[i] < 0:
            data.pop(i)
        else:
            i += 1
    
    # 2. Square remaining numbers
    for i in range(len(data)):
        data[i] = data[i] ** 2
    
    # 3. Keep only even results
    i = 0
    while i < len(data):
        if data[i] % 2 != 0:
            data.pop(i)
        else:
            i += 1
    
    # 4. Sort in descending order
    for i in range(len(data)):
        for j in range(i + 1, len(data)):
            if data[i] < data[j]:
                data[i], data[j] = data[j], data[i]
    
    return data</pre>
        
        <p><b>Your Tasks:</b></p>
        <ol>
            <li>Identify all performance issues in the code</li>
            <li>Rewrite the function to be more efficient</li>
            <li>Test with a list of 1,000,000 random numbers</li>
            <li>Compare execution times</li>
        </ol>
    </div>
    
    <details>
        <summary>Optimized Solution (click to reveal)</summary>
        <div style="background: #f5f5f5; padding: 15px; margin-top: 10px; border-radius: 5px;">
            <pre style="background: white; padding: 10px;">
def process_data_efficient(data):
    """Optimized version using list comprehension and built-in functions"""
    # Use list comprehension for filtering and transformation
    # This creates new lists but avoids expensive pop() operations
    result = [x ** 2 for x in data if x >= 0]  # Remove negatives and square
    result = [x for x in result if x % 2 == 0]  # Keep only even results
    result.sort(reverse=True)  # Use built-in sort (much faster than bubble sort)
    return result

# Even more memory efficient (single pass with generator)
def process_data_generator(data):
    """Memory efficient version using generator expression"""
    # Generator expression for lazy evaluation
    filtered = (x ** 2 for x in data if x >= 0)
    filtered = (x for x in filtered if x % 2 == 0)
    # Convert to list and sort
    result = list(filtered)
    result.sort(reverse=True)
    return result</pre>
            <p><b>Key Optimizations:</b></p>
            <ul>
                <li>Avoid <code>pop()</code> in loops (O(n) each time)</li>
                <li>Use list comprehensions for filtering and transformation</li>
                <li>Use built-in <code>sort()</code> instead of bubble sort (O(n log n) vs O(n¬≤))</li>
                <li>Consider generator expressions for memory efficiency with large data</li>
            </ul>
        </div>
    </details>
    
    <div style="background: white; padding: 15px; border-radius: 8px; border: 2px solid #4A90E2; margin-top: 15px;">
        <h4>Performance Testing Code</h4>
        <pre style="background: #f5f5f5; padding: 10px;">
import time
import random

def test_performance():
    # Generate test data
    data = [random.randint(-100, 100) for _ in range(10000)]
    
    # Test inefficient version
    start = time.time()
    result1 = process_data_inefficient(data.copy())
    time1 = time.time() - start
    
    # Test efficient version
    start = time.time()
    result2 = process_data_efficient(data.copy())
    time2 = time.time() - start
    
    # Test generator version
    start = time.time()
    result3 = process_data_generator(data.copy())
    time3 = time.time() - start
    
    print(f"Results equal: {result1 == result2 == result3}")
    print(f" Execution times:")
    print(f"  Inefficient: {time1:.4f} seconds")
    print(f"  Efficient: {time2:.4f} seconds")
    print(f"  Generator: {time3:.4f} seconds")
    print(f" Efficient version is {time1/time2:.1f}x faster!")
    print(f"Memory usage: Efficient uses more memory for intermediate lists")
    print(f"              Generator uses less memory but similar time")</pre>
    </div>
</div>
`
},
            "3-4": {
    icon: "fa-sync",
    title: "Iterating through Complex Data",
    html: `<h1>Week 3, Day 4: Iterating through Complex Data</h1>
<p>Today we master iteration techniques for complex data structures including nested lists, dictionaries, and custom objects.</p>

<div class="analogy-box">
    <b>Analogy: The Museum Tour Guide üèõÔ∏è</b><br/>
    
    Data Structure: The entire museum<br/>
    Rooms: Different sections/levels of data<br/>
    Artifacts: Individual data elements<br/>
    Tour Path: Iteration strategy<br/>
    Guide: Loop variables and logic<br/>
    Special Access: Advanced iteration techniques
</div>

<h3>Iteration Fundamentals Review</h3>
<div style="background-color: #f0f8ff; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h4>üìä Python Iteration Toolkit</h4>
    
    <table style="width: 100%; border-collapse: collapse; margin: 15px 0;">
        <tr style="background: #4A90E2; color: white;">
            <th style="padding: 10px; text-align: left;">Tool</th>
            <th style="padding: 10px; text-align: left;">Purpose</th>
            <th style="padding: 10px; text-align: left;">Syntax</th>
            <th style="padding: 10px; text-align: left;">Best For</th>
        </tr>
        <tr style="background: #f8f9fa;">
            <td style="padding: 8px; border: 1px solid #ddd;">for loop</td>
            <td style="padding: 8px; border: 1px solid #ddd;">Basic iteration</td>
            <td style="padding: 8px; border: 1px solid #ddd;"><code>for item in sequence:</code></td>
            <td style="padding: 8px; border: 1px solid #ddd;">Simple sequences</td>
        </tr>
        <tr style="background: white;">
            <td style="padding: 8px; border: 1px solid #ddd;">enumerate()</td>
            <td style="padding: 8px; border: 1px solid #ddd;">Index + Value</td>
            <td style="padding: 8px; border: 1px solid #ddd;"><code>for i, val in enumerate(seq):</code></td>
            <td style="padding: 8px; border: 1px solid #ddd;">When index needed</td>
        </tr>
        <tr style="background: #f8f9fa;">
            <td style="padding: 8px; border: 1px solid #ddd;">zip()</td>
            <td style="padding: 8px; border: 1px solid #ddd;">Parallel iteration</td>
            <td style="padding: 8px; border: 1px solid #ddd;"><code>for a, b in zip(seq1, seq2):</code></td>
            <td style="padding: 8px; border: 1px solid #ddd;">Multiple sequences</td>
        </tr>
        <tr style="background: white;">
            <td style="padding: 8px; border: 1px solid #ddd;">items()</td>
            <td style="padding: 8px; border: 1px solid #ddd;">Dictionary iteration</td>
            <td style="padding: 8px; border: 1px solid #ddd;"><code>for k, v in dict.items():</code></td>
            <td style="padding: 8px; border: 1px solid #ddd;">Key-value pairs</td>
        </tr>
        <tr style="background: #f8f9fa;">
            <td style="padding: 8px; border: 1px solid #ddd;">Comprehensions</td>
            <td style="padding: 8px; border: 1px solid #ddd;">Transform/filter</td>
            <td style="padding: 8px; border: 1px solid #ddd;"><code>[x*2 for x in seq]</code></td>
            <td style="padding: 8px; border: 1px solid #ddd;">Creating new collections</td>
        </tr>
        <tr style="background: white;">
            <td style="padding: 8px; border: 1px solid #ddd;">Generators</td>
            <td style="padding: 8px; border: 1px solid #ddd;">Lazy iteration</td>
            <td style="padding: 8px; border: 1px solid #ddd;"><code>(x for x in seq)</code></td>
            <td style="padding: 8px; border: 1px solid #ddd;">Memory efficiency</td>
        </tr>
    </table>
    
    <h5>Basic Iteration Patterns</h5>
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px;">
        <div style="background: #e8f5e8; padding: 15px; border-radius: 8px;">
            <h6>Standard Iteration Techniques</h6>
            <pre style="background: white; padding: 10px;">
# =========== BASIC ITERATION PATTERNS ===========

# 1. Simple for loop
fruits = ["apple", "banana", "cherry"]
print("Simple iteration:")
for fruit in fruits:
    print(f"  I like {fruit}")

# 2. Iterating with index (the wrong way)
print(" Iterating with index (inefficient):")
for i in range(len(fruits)):
    print(f"  {i}: {fruits[i]}")

# 3. Iterating with enumerate (the right way)
print(" Iterating with enumerate (efficient):")
for i, fruit in enumerate(fruits):
    print(f"  {i}: {fruit}")

# 4. Iterating with custom start index
print(" Enumerate with custom start:")
for i, fruit in enumerate(fruits, start=1):
    print(f"  {i}. {fruit}")

# 5. Iterating in reverse
print(" Iterating in reverse:")
for fruit in reversed(fruits):
    print(f"  {fruit}")

# 6. Iterating with slice
print(" Iterating with slice:")
for fruit in fruits[1:]:  # Skip first element
    print(f"  {fruit}")

# 7. Iterating with step
numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
print(" Iterating with step:")
for num in numbers[::2]:  # Every 2nd element
    print(f"  {num}")

# 8. Iterating dictionary
person = {"name": "Alice", "age": 30, "city": "New York"}
print(" Dictionary iteration:")

print("Keys only:")
for key in person:
    print(f"  {key}")

print(" Values only:")
for value in person.values():
    print(f"  {value}")

print(" Key-Value pairs:")
for key, value in person.items():
    print(f"  {key}: {value}")

# 9. Parallel iteration with zip
names = ["Alice", "Bob", "Charlie"]
ages = [25, 30, 35]
cities = ["NYC", "LA", "Chicago"]

print(" Parallel iteration with zip:")
for name, age, city in zip(names, ages, cities):
    print(f"  {name} is {age} years old and lives in {city}")

# 10. Iterating with condition
print(" Iterating with condition (even numbers only):")
for num in numbers:
    if num % 2 == 0:
        print(f"  {num}")</pre>
        </div>
        
        <div style="background: #e3f2fd; padding: 15px; border-radius: 8px;">
            <h6>Advanced Iteration Functions</h6>
            <pre style="background: white; padding: 10px;">
# =========== ADVANCED ITERATION FUNCTIONS ===========

# 1. itertools.islice - Iterate with slice without creating copy
from itertools import islice

large_data = list(range(1000000))
print("Using islice for memory efficiency:")
# Doesn't create new list, just iterates over slice
for num in islice(large_data, 100, 110):  # Elements 100-109
    print(f"  {num}", end=" ")
print()

# 2. itertools.chain - Iterate over multiple sequences
from itertools import chain

list1 = [1, 2, 3]
list2 = [4, 5, 6]
list3 = [7, 8, 9]

print(" Chaining multiple sequences:")
for num in chain(list1, list2, list3):
    print(f"  {num}", end=" ")
print()

# 3. itertools.cycle - Infinite iteration
from itertools import cycle

print(" Cycling through colors (first 10):")
colors = ["red", "green", "blue"]
for i, color in enumerate(cycle(colors)):
    if i >= 10:
        break
    print(f"  {color}", end=" ")
print()

# 4. itertools.repeat - Repeat value
from itertools import repeat

print(" Repeating value:")
for i, val in enumerate(repeat("hello", 5)):  # Repeat 5 times
    print(f"  {i}: {val}")

# 5. enumerate with unpacking nested tuples
data = [("Alice", 25, "NYC"), ("Bob", 30, "LA"), ("Charlie", 35, "Chicago")]

print(" Enumerate with unpacking:")
for i, (name, age, city) in enumerate(data, start=1):
    print(f"  {i}. {name}, {age}, {city}")

# 6. Using iter() with sentinel value
print(" Using iter() with sentinel:")
import random

def random_until(limit):
    """Generate random numbers until limit is reached"""
    while True:
        num = random.randint(1, 100)
        if num > limit:
            return
        yield num

# Create iterator
random_iter = random_until(90)

# Consume iterator
print("Random numbers until > 90:")
count = 0
for num in random_iter:
    print(f"  {num}", end=" ")
    count += 1
    if count % 10 == 0:
        print()
print()

# 7. Using next() with default
print(" Using next() with default:")
numbers = iter([1, 2, 3])

print(f"  First: {next(numbers, 'end')}")
print(f"  Second: {next(numbers, 'end')}")
print(f"  Third: {next(numbers, 'end')}")
print(f"  Fourth: {next(numbers, 'end')}")  # Returns 'end'

# 8. itertools.groupby - Group consecutive elements
from itertools import groupby

data = [1, 1, 2, 2, 2, 3, 1, 1, 2, 2, 3, 3, 3]
print(" Grouping consecutive elements:")
for key, group in groupby(data):
    print(f"  {key}: {list(group)}")

# 9. Sorting while iterating
print(" Iterating in sorted order:")
words = ["banana", "apple", "cherry", "date"]

print("  Alphabetical:")
for word in sorted(words):
    print(f"    {word}")

print("  By length:")
for word in sorted(words, key=len):
    print(f"    {word}")

print("  Reverse alphabetical:")
for word in sorted(words, reverse=True):
    print(f"    {word}")

# 10. Using any() and all() with iteration
print(" Using any() and all():")
numbers = [1, 3, 5, 7, 9]

print(f"  All odd? {all(n % 2 == 1 for n in numbers)}")
print(f"  Any even? {any(n % 2 == 0 for n in numbers)}")
print(f"  All positive? {all(n > 0 for n in numbers)}")

# Performance tip: any() and all() short-circuit
def expensive_check(x):
    print(f"    Checking {x}...")
    return x > 5

print("  Testing any() short-circuit:")
result = any(expensive_check(x) for x in [1, 2, 6, 8])
print(f"  Result: {result}")
print("  Note: expensive_check() not called for 8 due to short-circuit")</pre>
        </div>
    </div>
</div>

<h3>Iterating through Nested Structures</h3>
<div style="background-color: #fff8e1; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h4>üîç Navigating Complex Data Hierarchies</h4>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">
        <div>
            <h5>Nested Lists and Matrices</h5>
            <pre style="background: white; padding: 15px;">
# =========== ITERATING NESTED LISTS ===========

# 1. Simple 2D list (matrix)
matrix = [
    [1, 2, 3, 4],
    [5, 6, 7, 8],
    [9, 10, 11, 12]
]

print("Matrix iteration:")
print("Original matrix:")
for row in matrix:
    print(f"  {row}")

# 2. Row-major iteration (row by row)
print(" Row-major iteration:")
for row in matrix:
    for element in row:
        print(f"  {element}", end=" ")
    print()  # New line after each row

# 3. Column-major iteration (column by column)
print(" Column-major iteration:")
num_cols = len(matrix[0])
for col in range(num_cols):
    for row in matrix:
        print(f"  {row[col]}", end=" ")
    print()  # New line after each column

# 4. Iterating with indices
print(" Iterating with indices:")
for i, row in enumerate(matrix):
    for j, element in enumerate(row):
        print(f"  matrix[{i}][{j}] = {element}")

# 5. Iterating diagonal
print(" Main diagonal:")
for i in range(min(len(matrix), len(matrix[0]))):
    print(f"  matrix[{i}][{i}] = {matrix[i][i]}")

# 6. Iterating anti-diagonal
print(" Anti-diagonal:")
for i in range(min(len(matrix), len(matrix[0]))):
    j = len(matrix[0]) - 1 - i
    print(f"  matrix[{i}][{j}] = {matrix[i][j]}")

# 7. Complex nested structure
nested_data = [
    [1, 2, [3, 4]],
    [5, [6, 7, [8, 9]]],
    [[10, 11], 12, 13]
]

print(" Complex nested list structure:")
def print_nested(lst, indent=0):
    """Recursively print nested list structure"""
    for item in lst:
        if isinstance(item, list):
            print_nested(item, indent + 2)
        else:
            print(" " * indent + f"‚Ä¢ {item}")

print_nested(nested_data)

# 8. Flattening nested lists
def flatten_nested(lst):
    """Flatten arbitrarily nested list"""
    result = []
    for item in lst:
        if isinstance(item, list):
            result.extend(flatten_nested(item))
        else:
            result.append(item)
    return result

print(" Flattened nested list:")
flat = flatten_nested(nested_data)
print(f"  {flat}")

# 9. Matrix operations with iteration
def matrix_transpose(matrix):
    """Transpose a matrix"""
    return [[row[i] for row in matrix] for i in range(len(matrix[0]))]

print(" Matrix transpose:")
transposed = matrix_transpose(matrix)
for row in transposed:
    print(f"  {row}")

# 10. Finding maximum in nested list
def max_in_nested(lst):
    """Find maximum value in nested list"""
    max_val = float('-inf')
    for item in lst:
        if isinstance(item, list):
            max_val = max(max_val, max_in_nested(item))
        else:
            max_val = max(max_val, item)
    return max_val

print(f" Maximum in nested data: {max_in_nested(nested_data)}")

# 11. 3D list (cube)
cube = [
    [[1, 2], [3, 4]],
    [[5, 6], [7, 8]]
]

print(" 3D cube iteration:")
for i, layer in enumerate(cube):
    print(f"  Layer {i}:")
    for j, row in enumerate(layer):
        print(f"    Row {j}: {row}")

# 12. Iterating with itertools.product for coordinates
from itertools import product

print(" All coordinates in 2D matrix:")
for i, j in product(range(len(matrix)), range(len(matrix[0]))):
    print(f"  ({i},{j}): {matrix[i][j]}")</pre>
        </div>
        
        <div>
            <h5>Nested Dictionaries and JSON-like Data</h5>
            <pre style="background: white; padding: 15px;">
# =========== ITERATING NESTED DICTIONARIES ===========

# 1. Complex nested dictionary (like JSON)
company = {
    "name": "TechCorp",
    "founded": 2010,
    "departments": {
        "engineering": {
            "head": "Alice",
            "employees": 50,
            "projects": ["Project A", "Project B"]
        },
        "sales": {
            "head": "Bob",
            "employees": 20,
            "regions": {"north": 5, "south": 8, "east": 7}
        },
        "hr": {
            "head": "Charlie",
            "employees": 10,
            "policies": ["Policy 1", "Policy 2", "Policy 3"]
        }
    },
    "locations": ["HQ", "Branch 1", "Branch 2"],
    "financials": {
        "revenue": 1000000,
        "expenses": {
            "salaries": 600000,
            "rent": 100000,
            "equipment": 150000
        },
        "profit": 150000
    }
}

print("Company data structure:")

# 2. Simple iteration (first level)
print(" First level keys:")
for key in company:
    print(f"  {key}: {type(company[key])}")

# 3. Recursive dictionary iteration
def iterate_dict(d, indent=0):
    """Recursively iterate through nested dictionary"""
    for key, value in d.items():
        if isinstance(value, dict):
            print(" " * indent + f"{key}:")
            iterate_dict(value, indent + 2)
        elif isinstance(value, list):
            print(" " * indent + f"{key}:")
            for i, item in enumerate(value):
                if isinstance(item, dict):
                    print(" " * (indent + 2) + f"[{i}]:")
                    iterate_dict(item, indent + 4)
                else:
                    print(" " * (indent + 2) + f"‚Ä¢ {item}")
        else:
            print(" " * indent + f"{key}: {value}")

print(" Recursive dictionary iteration:")
iterate_dict(company)

# 4. Finding specific keys in nested dict
def find_keys(obj, target_key):
    """Find all occurrences of a key in nested dict"""
    results = []
    
    if isinstance(obj, dict):
        for key, value in obj.items():
            if key == target_key:
                results.append(value)
            if isinstance(value, (dict, list)):
                results.extend(find_keys(value, target_key))
    
    elif isinstance(obj, list):
        for item in obj:
            if isinstance(item, (dict, list)):
                results.extend(find_keys(item, target_key))
    
    return results

print(" Finding all 'employees' keys:")
all_employees = find_keys(company, "employees")
print(f"  Employee counts: {all_employees}")

# 5. Extracting all values of a certain type
def extract_values(obj, value_type):
    """Extract all values of certain type from nested structure"""
    results = []
    
    if isinstance(obj, dict):
        for value in obj.values():
            if isinstance(value, value_type):
                results.append(value)
            if isinstance(value, (dict, list)):
                results.extend(extract_values(value, value_type))
    
    elif isinstance(obj, list):
        for item in obj:
            if isinstance(item, value_type):
                results.append(item)
            if isinstance(item, (dict, list)):
                results.extend(extract_values(item, value_type))
    
    return results

print(" Extracting all strings:")
all_strings = extract_values(company, str)
print(f"  Found {len(all_strings)} strings")
print(f"  Sample: {all_strings[:5]}...")

print(" Extracting all numbers:")
all_numbers = extract_values(company, (int, float))
print(f"  Found {len(all_numbers)} numbers")
print(f"  Sum: {sum(all_numbers):,}")

# 6. Path-based access
def get_by_path(obj, path, separator="."):
    """Get value using dot notation path"""
    keys = path.split(separator)
    current = obj
    
    for key in keys:
        if isinstance(current, dict) and key in current:
            current = current[key]
        elif isinstance(current, list):
            try:
                idx = int(key)
                current = current[idx]
            except (ValueError, IndexError):
                return None
        else:
            return None
    
    return current

print(" Path-based access:")
paths = [
    "name",
    "departments.engineering.head",
    "departments.sales.regions.north",
    "financials.expenses.salaries",
    "locations.1"
]

for path in paths:
    value = get_by_path(company, path)
    print(f"  {path}: {value}")

# 7. Setting values by path
def set_by_path(obj, path, value, separator=".", create_missing=True):
    """Set value using dot notation path"""
    keys = path.split(separator)
    current = obj
    
    for i, key in enumerate(keys[:-1]):
        if isinstance(current, dict):
            if key not in current and create_missing:
                current[key] = {}
            current = current[key]
        elif isinstance(current, list):
            try:
                idx = int(key)
                if idx >= len(current) and create_missing:
                    current.append({})
                current = current[idx]
            except (ValueError, IndexError):
                return False
        else:
            return False
    
    # Set final value
    final_key = keys[-1]
    if isinstance(current, dict):
        current[final_key] = value
        return True
    elif isinstance(current, list):
        try:
            idx = int(final_key)
            if idx < len(current):
                current[idx] = value
                return True
        except ValueError:
            pass
    
    return False

print(" Setting values by path:")
set_by_path(company, "departments.engineering.employees", 55)
set_by_path(company, "financials.expenses.marketing", 50000)
print("  Engineering employees updated to:", 
      get_by_path(company, "departments.engineering.employees"))
print("  Marketing expense added:", 
      get_by_path(company, "financials.expenses.marketing"))

# 8. Iterating with context (breadcrumb)
def iterate_with_path(obj, current_path=""):
    """Iterate with full path context"""
    if isinstance(obj, dict):
        for key, value in obj.items():
            new_path = f"{current_path}.{key}" if current_path else key
            if isinstance(value, (dict, list)):
                yield from iterate_with_path(value, new_path)
            else:
                yield new_path, value
    elif isinstance(obj, list):
        for i, value in enumerate(obj):
            new_path = f"{current_path}[{i}]"
            if isinstance(value, (dict, list)):
                yield from iterate_with_path(value, new_path)
            else:
                yield new_path, value

print(" Iterating with full paths (first 5):")
for i, (path, value) in enumerate(iterate_with_path(company)):
    if i >= 5:
        break
    print(f"  {path}: {value}")</pre>
        </div>
    </div>
    
    <h5>Mixed Data Structures</h5>
    <pre style="background: #f5f5f5; padding: 15px; margin: 15px 0;">
# =========== MIXED DATA STRUCTURES ===========

# Real-world data: E-commerce order
order = {
    "order_id": "ORD123456",
    "customer": {
        "id": "CUST001",
        "name": "Alice Johnson",
        "email": "alice@example.com",
        "address": {
            "street": "123 Main St",
            "city": "Boston",
            "state": "MA",
            "zip": "02101"
        }
    },
    "items": [
        {
            "product_id": "PROD001",
            "name": "Laptop",
            "quantity": 1,
            "price": 999.99,
            "attributes": {"color": "silver", "storage": "512GB"}
        },
        {
            "product_id": "PROD002",
            "name": "Mouse",
            "quantity": 2,
            "price": 24.99,
            "attributes": {"color": "black", "wireless": True}
        },
        {
            "product_id": "PROD003",
            "name": "Keyboard",
            "quantity": 1,
            "price": 79.99,
            "attributes": {"color": "black", "mechanical": True}
        }
    ],
    "shipping": {
        "method": "express",
        "cost": 15.99,
        "tracking_number": "TRK789012",
        "status": "shipped"
    },
    "payment": {
        "method": "credit_card",
        "amount": 1145.95,
        "status": "paid",
        "transaction_id": "TX789012"
    },
    "timestamps": {
        "created": "2024-01-20 10:30:00",
        "paid": "2024-01-20 10:35:00",
        "shipped": "2024-01-20 14:00:00"
    }
}

print("E-commerce Order Analysis")
print("=" * 60)

# 1. Extract all product names
print(" 1. All products in order:")
product_names = []
for item in order["items"]:
    product_names.append(item["name"])
print(f"  {', '.join(product_names)}")

# 2. Calculate total quantity
total_quantity = sum(item["quantity"] for item in order["items"])
print(f" 2. Total quantity: {total_quantity}")

# 3. Calculate subtotal
subtotal = sum(item["quantity"] * item["price"] for item in order["items"])
print(f" 3. Subtotal: \${subtotal:.2f}")

# 4. Extract all attributes
print(" 4. All product attributes:")
all_attributes = []
for item in order["items"]:
    for attr_name, attr_value in item["attributes"].items():
        all_attributes.append(f"{attr_name}: {attr_value}")
print(f"  {', '.join(all_attributes)}")

# 5. Find expensive items (> $50)
print(" 5. Expensive items (> $50):")
expensive_items = []
for item in order["items"]:
    if item["price"] > 50:
        expensive_items.append(f"{item['name']} (\${item['price']})")
print(f"  {', '.join(expensive_items)}")

# 6. Extract all timestamps
print(" 6. Order timeline:")
for event, timestamp in order["timestamps"].items():
    print(f"  {event}: {timestamp}")

# 7. Customer information summary
print(" 7. Customer summary:")
customer = order["customer"]
address = customer["address"]
print(f"  Name: {customer['name']}")
print(f"  Email: {customer['email']}")
print(f"  Address: {address['street']}, {address['city']}, {address['state']} {address['zip']}")

# 8. Shipping information
print(" 8. Shipping information:")
shipping = order["shipping"]
print(f"  Method: {shipping['method']}")
print(f"  Cost: \${shipping['cost']:.2f}")
print(f"  Status: {shipping['status']}")
print(f"  Tracking: {shipping['tracking_number']}")

# 9. Payment summary
print(" 9. Payment summary:")
payment = order["payment"]
print(f"  Method: {payment['method']}")
print(f"  Amount: \${payment['amount']:.2f}")
print(f"  Status: {payment['status']}")

# 10. Generate order summary
print(" 10. Complete order summary:")
print("-" * 40)
print(f"Order ID: {order['order_id']}")
print(f"Customer: {order['customer']['name']}")
print(f"Total Items: {len(order['items'])}")
print(f"Order Total: \${order['payment']['amount']:.2f}")
print(f"Shipping: {order['shipping']['method']} (\${order['shipping']['cost']:.2f})")
print(f"Status: {order['shipping']['status'].upper()}")
print("-" * 40)

# 11. Advanced: Iterate with type checking
def process_value(path, value):
    """Process value based on type"""
    if isinstance(value, str):
        return f"String: '{value}'"
    elif isinstance(value, (int, float)):
        return f"Number: {value}"
    elif isinstance(value, bool):
        return f"Boolean: {value}"
    elif isinstance(value, list):
        return f"List with {len(value)} items"
    elif isinstance(value, dict):
        return f"Dict with {len(value)} keys"
    else:
        return f"Unknown: {type(value)}"

print(" 11. Type-based processing (sample):")
for i, (path, value) in enumerate(iterate_with_path(order)):
    if i >= 10:  # Show first 10
        break
    processed = process_value(path, value)
    print(f"  {path}: {processed}")

# 12. Create flattened report
print(" 12. Flattened order report:")
flattened = {}
for path, value in iterate_with_path(order):
    flattened[path] = value

print(f"Total flattened keys: {len(flattened)}")
print("Sample keys:")
for i, key in enumerate(list(flattened.keys())[:5]):
    print(f"  {key}")</pre>
</div>

<h3>Custom Iterators and Generators</h3>
<div style="background-color: #e8f5e8; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h4>‚öôÔ∏è Building Your Own Iteration Tools</h4>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">
        <div>
            <h5>Custom Iterator Classes</h5>
            <pre style="background: white; padding: 15px;">
# =========== CUSTOM ITERATOR CLASSES ===========

# 1. Basic iterator class
class CountDown:
    """Iterator that counts down from start to 0"""
    
    def __init__(self, start):
        self.current = start
        self.start = start
    
    def __iter__(self):
        """Return iterator object"""
        return self
    
    def __next__(self):
        """Return next value"""
        if self.current < 0:
            raise StopIteration
        else:
            value = self.current
            self.current -= 1
            return value

print("CountDown iterator:")
countdown = CountDown(5)
for num in countdown:
    print(f"  {num}", end=" ")
print()

# 2. Iterator with reset capability
class CyclicIterator:
    """Iterator that cycles through sequence indefinitely"""
    
    def __init__(self, sequence):
        self.sequence = sequence
        self.index = 0
    
    def __iter__(self):
        return self
    
    def __next__(self):
        if not self.sequence:
            raise StopIteration
        
        value = self.sequence[self.index]
        self.index = (self.index + 1) % len(self.sequence)
        return value
    
    def reset(self):
        """Reset iterator to beginning"""
        self.index = 0

print(" CyclicIterator (first 10 iterations):")
cyclic = CyclicIterator(["A", "B", "C"])
for i in range(10):
    print(f"  {next(cyclic)}", end=" ")
print()

# 3. Range-like iterator with custom step
class FlexibleRange:
    """Custom range iterator with flexible parameters"""
    
    def __init__(self, start, stop=None, step=1):
        if stop is None:
            self.start = 0
            self.stop = start
        else:
            self.start = start
            self.stop = stop
        self.step = step
        self.current = self.start
    
    def __iter__(self):
        self.current = self.start
        return self
    
    def __next__(self):
        if (self.step > 0 and self.current >= self.stop) or \
           (self.step < 0 and self.current <= self.stop):
            raise StopIteration
        
        value = self.current
        self.current += self.step
        return value

print(" FlexibleRange examples:")
print("  Range 0-5:", list(FlexibleRange(5)))
print("  Range 2-10 step 2:", list(FlexibleRange(2, 10, 2)))
print("  Range 10-0 step -2:", list(FlexibleRange(10, 0, -2)))

# 4. Tree iterator (depth-first search)
class TreeNode:
    """Tree node for tree iterator example"""
    
    def __init__(self, value):
        self.value = value
        self.children = []
    
    def add_child(self, node):
        self.children.append(node)
    
    def __repr__(self):
        return f"TreeNode({self.value})"

class TreeIterator:
    """Depth-first iterator for tree"""
    
    def __init__(self, root):
        self.stack = [root]
    
    def __iter__(self):
        return self
    
    def __next__(self):
        if not self.stack:
            raise StopIteration
        
        node = self.stack.pop()
        
        # Add children in reverse order for proper DFS
        for child in reversed(node.children):
            self.stack.append(child)
        
        return node.value

# Create a tree
print(" Tree iterator example:")
root = TreeNode("A")
b = TreeNode("B")
c = TreeNode("C")
d = TreeNode("D")
e = TreeNode("E")
f = TreeNode("F")

root.add_child(b)
root.add_child(c)
b.add_child(d)
b.add_child(e)
c.add_child(f)

print("  Tree structure:")
print("      A")
print("     / \\\\")
print("    B   C")
print("   / \\\\   \\\\")
print("  D   E   F")

print("  Depth-first traversal:")
tree_iter = TreeIterator(root)
for value in tree_iter:
    print(f"    {value}", end=" ")
print()

# 5. Matrix iterator (row-major)
class MatrixIterator:
    """Iterator for 2D matrix (row-major)"""
    
    def __init__(self, matrix):
        self.matrix = matrix
        self.row = 0
        self.col = 0
    
    def __iter__(self):
        self.row = 0
        self.col = 0
        return self
    
    def __next__(self):
        if self.row >= len(self.matrix):
            raise StopIteration
        
        value = self.matrix[self.row][self.col]
        
        # Move to next position
        self.col += 1
        if self.col >= len(self.matrix[self.row]):
            self.col = 0
            self.row += 1
        
        return value

print(" Matrix iterator (row-major):")
matrix = [[1, 2, 3], [4, 5, 6], [7, 8, 9]]
matrix_iter = MatrixIterator(matrix)
for value in matrix_iter:
    print(f"  {value}", end=" ")
print()

# 6. Iterator with filtering
class FilteredIterator:
    """Iterator that filters elements based on condition"""
    
    def __init__(self, iterable, condition):
        self.iterable = iterable
        self.condition = condition
        self.index = 0
    
    def __iter__(self):
        self.index = 0
        return self
    
    def __next__(self):
        while self.index < len(self.iterable):
            value = self.iterable[self.index]
            self.index += 1
            if self.condition(value):
                return value
        raise StopIteration

print(" FilteredIterator (even numbers only):")
numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
even_iter = FilteredIterator(numbers, lambda x: x % 2 == 0)
for num in even_iter:
    print(f"  {num}", end=" ")
print()

# 7. Combining multiple iterators
class CombinedIterator:
    """Iterator that combines multiple iterators"""
    
    def __init__(self, *iterables):
        self.iterables = iterables
        self.current_iter = 0
        self.current_iterator = iter(self.iterables[0]) if iterables else None
    
    def __iter__(self):
        self.current_iter = 0
        self.current_iterator = iter(self.iterables[0]) if self.iterables else None
        return self
    
    def __next__(self):
        if not self.current_iterator:
            raise StopIteration
        
        try:
            return next(self.current_iterator)
        except StopIteration:
            self.current_iter += 1
            if self.current_iter >= len(self.iterables):
                raise StopIteration
            
            self.current_iterator = iter(self.iterables[self.current_iter])
            return next(self.current_iterator)

print(" CombinedIterator (multiple sequences):")
list1 = [1, 2, 3]
list2 = [4, 5, 6]
list3 = [7, 8, 9]

combined = CombinedIterator(list1, list2, list3)
for num in combined:
    print(f"  {num}", end=" ")
print()

# 8. Pagination iterator
class PaginationIterator:
    """Iterator for paginating through large datasets"""
    
    def __init__(self, data, page_size=10):
        self.data = data
        self.page_size = page_size
        self.current_page = 0
        self.total_pages = (len(data) + page_size - 1) // page_size
    
    def __iter__(self):
        self.current_page = 0
        return self
    
    def __next__(self):
        if self.current_page >= self.total_pages:
            raise StopIteration
        
        start = self.current_page * self.page_size
        end = min(start + self.page_size, len(self.data))
        
        page_data = self.data[start:end]
        self.current_page += 1
        
        return page_data

print(" PaginationIterator (page size 3):")
data = list(range(1, 11))  # Numbers 1-10
paginator = PaginationIterator(data, page_size=3)

for page_num, page in enumerate(paginator, 1):
    print(f"  Page {page_num}: {page}")</pre>
        </div>
        
        <div>
            <h5>Generator Functions and Expressions</h5>
            <pre style="background: white; padding: 15px;">
# =========== GENERATOR FUNCTIONS ===========

# 1. Basic generator function
def count_up_to(n):
    """Generator that counts from 1 to n"""
    i = 1
    while i <= n:
        yield i
        i += 1

print("Basic generator (count 1-5):")
for num in count_up_to(5):
    print(f"  {num}", end=" ")
print()

# 2. Generator with multiple yields
def alternating_signs(n):
    """Generate 1, -1, 1, -1, ..."""
    for i in range(n):
        yield 1 if i % 2 == 0 else -1

print(" Alternating signs (first 8):")
for i, sign in enumerate(alternating_signs(8)):
    print(f"  {sign}", end=" ")
print()

# 3. Infinite generator
def fibonacci():
    """Infinite Fibonacci sequence generator"""
    a, b = 0, 1
    while True:
        yield a
        a, b = b, a + b

print(" Fibonacci sequence (first 10):")
fib = fibonacci()
for i in range(10):
    print(f"  {next(fib)}", end=" ")
print()

# 4. Generator expression
print(" Generator expression (squares of even numbers):")
numbers = range(10)
even_squares = (x**2 for x in numbers if x % 2 == 0)

for square in even_squares:
    print(f"  {square}", end=" ")
print()

# 5. Generator pipeline
def read_lines(file_path):
    """Generator to read file line by line"""
    with open(file_path, 'r') as file:
        for line in file:
            yield line.strip()

def filter_comments(lines):
    """Filter out comment lines"""
    for line in lines:
        if not line.startswith('#'):
            yield line

def parse_numbers(lines):
    """Parse numbers from lines"""
    for line in lines:
        try:
            yield float(line)
        except ValueError:
            continue

# Simulated file reading
def simulate_file_content():
    """Simulate file content for demonstration"""
    return [
        "# This is a comment",
        "10.5",
        "20.3",
        "# Another comment",
        "30.7",
        "not a number",
        "40.2"
    ]

print(" Generator pipeline example:")
lines = simulate_file_content()
pipeline = parse_numbers(filter_comments(lines))
for num in pipeline:
    print(f"  {num}")

# 6. Coroutine with send()
def running_average():
    """Coroutine that maintains running average"""
    total = 0
    count = 0
    average = None
    
    while True:
        value = yield average
        if value is None:
            break
        total += value
        count += 1
        average = total / count

print(" Coroutine with send():")
avg_coro = running_average()
next(avg_coro)  # Prime the coroutine

for num in [10, 20, 30, 40, 50]:
    current_avg = avg_coro.send(num)
    print(f"  Added {num}, running average: {current_avg:.1f}")

# 7. Generator for tree traversal
def dfs_traversal(node):
    """Depth-first traversal generator"""
    yield node.value
    for child in node.children:
        yield from dfs_traversal(child)

print(" DFS traversal using generator:")
for value in dfs_traversal(root):
    print(f"  {value}", end=" ")
print()

# 8. Generator for file-like streaming
def stream_data(chunk_size=1024):
    """Simulate streaming data"""
    data = "This is simulated streaming data. " * 1000
    total_size = len(data)
    position = 0
    
    while position < total_size:
        chunk = data[position:position + chunk_size]
        position += chunk_size
        yield chunk

print(" Simulated data streaming:")
stream = stream_data(50)  # 50 character chunks
for i, chunk in enumerate(stream):
    if i >= 3:  # Show first 3 chunks only
        break
    print(f"  Chunk {i+1}: '{chunk[:20]}...'")

# 9. Generator with context management
from contextlib import contextmanager

@contextmanager
def timer(label):
    """Context manager generator for timing"""
    import time
    start = time.time()
    try:
        yield
    finally:
        end = time.time()
        print(f"{label}: {end - start:.4f} seconds")

print(" Context manager generator:")
with timer("Calculation time"):
    # Simulate some work
    total = sum(range(1000000))
    print(f"  Sum of first 1M numbers: {total:,}")

# 10. Generator for batch processing
def batched(iterable, batch_size):
    """Batch items from iterable"""
    batch = []
    for item in iterable:
        batch.append(item)
        if len(batch) == batch_size:
            yield batch
            batch = []
    
    if batch:
        yield batch

print(" Batch processing generator:")
data = list(range(1, 21))  # Numbers 1-20
for i, batch in enumerate(batched(data, 5), 1):
    print(f"  Batch {i}: {batch}")

# 11. Generator with state
def stateful_generator():
    """Generator that maintains state"""
    history = []
    while True:
        value = yield history.copy()
        if value is None:
            break
        history.append(value)

print(" Stateful generator:")
stateful = stateful_generator()
next(stateful)  # Prime

for val in [1, 2, 3, 4, 5]:
    history = stateful.send(val)
    print(f"  Added {val}, history: {history}")

# 12. Generator for permutations
def permutations(items):
    """Generate all permutations of items"""
    if len(items) <= 1:
        yield items
    else:
        for i in range(len(items)):
            for perm in permutations(items[:i] + items[i+1:]):
                yield [items[i]] + perm

print(" Permutations generator (first 5 of 3 items):")
items = ['A', 'B', 'C']
for i, perm in enumerate(permutations(items)):
    if i >= 5:  # Limit output
        break
    print(f"  {perm}")

# 13. Generator for sliding window
def sliding_window(sequence, window_size):
    """Generate sliding windows over sequence"""
    for i in range(len(sequence) - window_size + 1):
        yield sequence[i:i + window_size]

print(" Sliding window generator:")
sequence = [1, 2, 3, 4, 5, 6]
for window in sliding_window(sequence, 3):
    print(f"  Window: {window}")

# 14. Memory efficient file processing
def process_large_file(file_path):
    """Process large file line by line without loading entire file"""
    with open(file_path, 'r') as file:
        for line_number, line in enumerate(file, 1):
            # Process line (example: count words)
            words = line.strip().split()
            yield line_number, len(words)

print(" Simulating large file processing:")
# Create a temporary file for demonstration
import tempfile
import os

with tempfile.NamedTemporaryFile(mode='w', delete=False, suffix='.txt') as f:
    for i in range(100):
        f.write(f"This is line {i+1} with some words. ")
    temp_file = f.name

try:
    print("  Processing file line by line...")
    total_words = 0
    for line_num, word_count in process_large_file(temp_file):
        if line_num <= 3:  # Show first 3 lines
            print(f"    Line {line_num}: {word_count} words")
        total_words += word_count
    
    print(f"  Total words in file: {total_words}")
finally:
    # Clean up temporary file
    os.unlink(temp_file)</pre>
        </div>
    </div>
</div>

<h3>Performance Considerations</h3>
<div style="background-color: #ffebee; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h4>‚ö° Optimizing Iteration Performance</h4>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">
        <div>
            <h5>Performance Patterns and Anti-patterns</h5>
            <pre style="background: white; padding: 15px;">
# =========== ITERATION PERFORMANCE ===========

import time
import random

# Generate test data
large_list = [random.randint(1, 1000) for _ in range(100000)]

print("Performance Comparison (100,000 elements)")
print("=" * 60)

# 1. List comprehension vs for loop
print(" 1. Creating new list with squares:")

# Method A: For loop with append
start = time.time()
result_a = []
for x in large_list:
    result_a.append(x ** 2)
time_a = time.time() - start

# Method B: List comprehension
start = time.time()
result_b = [x ** 2 for x in large_list]
time_b = time.time() - start

print(f"  For loop with append: {time_a:.4f} seconds")
print(f"  List comprehension: {time_b:.4f} seconds")
print(f"  Comprehension is {time_a/time_b:.1f}x faster")

# 2. Filtering with comprehension vs loop
print(" 2. Filtering even numbers:")

# Method A: For loop
start = time.time()
result_a = []
for x in large_list:
    if x % 2 == 0:
        result_a.append(x)
time_a = time.time() - start

# Method B: List comprehension
start = time.time()
result_b = [x for x in large_list if x % 2 == 0]
time_b = time.time() - start

print(f"  For loop with if: {time_a:.4f} seconds")
print(f"  Filter comprehension: {time_b:.4f} seconds")

# 3. Generator vs list for large data
print(" 3. Generator vs List (memory usage):")

# Create huge dataset
huge_data = range(10000000)  # 10 million numbers

# Method A: List (eager evaluation)
start = time.time()
try:
    list_squares = [x**2 for x in huge_data]
    # This would use massive memory, so we limit
    list_squares = [x**2 for x in range(1000000)]  # 1 million instead
    time_a = time.time() - start
    mem_a = "High (stores all results)"
except MemoryError:
    time_a = "MemoryError"
    mem_a = "Extremely high"

# Method B: Generator (lazy evaluation)
start = time.time()
gen_squares = (x**2 for x in huge_data)
# Process first 1 million
count = 0
for x in gen_squares:
    count += 1
    if count >= 1000000:
        break
time_b = time.time() - start
mem_b = "Low (one item at a time)"

print(f"  List comprehension: Time={time_a}, Memory={mem_a}")
print(f"  Generator expression: Time={time_b:.2f}s, Memory={mem_b}")

# 4. Enumerate vs range(len())
print(" 4. Enumerate vs range(len()):")

# Method A: range(len())
start = time.time()
for i in range(len(large_list)):
    val = large_list[i]
    # Do something with i and val
    _ = i + val
time_a = time.time() - start

# Method B: enumerate()
start = time.time()
for i, val in enumerate(large_list):
    # Do something with i and val
    _ = i + val
time_b = time.time() - start

print(f"  range(len()): {time_a:.4f} seconds")
print(f"  enumerate(): {time_b:.4f} seconds")
print(f"  enumerate() is {time_a/time_b:.1f}x faster")

# 5. Using built-in functions
print(" 5. Built-in vs manual iteration:")

# Method A: Manual sum
start = time.time()
total = 0
for x in large_list:
    total += x
time_a = time.time() - start

# Method B: Built-in sum()
start = time.time()
total = sum(large_list)
time_b = time.time() - start

print(f"  Manual sum loop: {time_a:.4f} seconds")
print(f"  Built-in sum(): {time_b:.4f} seconds")
print(f"  Built-in is {time_a/time_b:.1f}x faster")

# 6. Early exit patterns
print(" 6. Early exit optimization:")

# Find first number > 900
target = 900

# Method A: Complete iteration
start = time.time()
result_a = None
for x in large_list:
    if x > target:
        result_a = x
        # BUT NO BREAK - continues through entire list
time_a = time.time() - start

# Method B: Early exit
start = time.time()
result_b = None
for x in large_list:
    if x > target:
        result_b = x
        break  # Exit early
time_b = time.time() - start

print(f"  Complete iteration: {time_a:.4f} seconds")
print(f"  Early exit with break: {time_b:.4f} seconds")
print(f"  Early exit is {time_a/time_b:.1f}x faster")

# 7. Avoid repeated calculations in loops
print(" 7. Avoiding repeated calculations:")

# Method A: Calculation inside loop
start = time.time()
result_a = []
n = len(large_list)
for i in range(n):
    # Repeatedly calculating something expensive
    if i % 2 == 0 and i < n // 2:
        result_a.append(large_list[i])
time_a = time.time() - start

# Method B: Pre-calculate
start = time.time()
result_b = []
n = len(large_list)
half_n = n // 2
for i in range(n):
    if i % 2 == 0 and i < half_n:
        result_b.append(large_list[i])
time_b = time.time() - start

print(f"  Calculations in loop: {time_a:.4f} seconds")
print(f"  Pre-calculated: {time_b:.4f} seconds")
print(f"  Pre-calculation is {time_a/time_b:.1f}x faster")

# 8. Using local variables in loops
print(" 8. Local variable optimization:")

class Processor:
    def process(self, x):
        return x * 2

processor = Processor()

# Method A: Method lookup in loop
start = time.time()
result_a = []
for x in large_list[:10000]:  # Smaller sample
    result_a.append(processor.process(x))
time_a = time.time() - start

# Method B: Local variable reference
start = time.time()
result_b = []
process_method = processor.process  # Local reference
for x in large_list[:10000]:
    result_b.append(process_method(x))
time_b = time.time() - start

print(f"  Method lookup in loop: {time_a:.4f} seconds")
print(f"  Local method reference: {time_b:.4f} seconds")
print(f"  Local reference is {time_a/time_b:.1f}x faster")

print(" " + "=" * 60)
print("Performance Recommendations:")
print("  1. Use list comprehensions for simple transformations")
print("  2. Use generators for memory efficiency with large data")
print("  3. Prefer enumerate() over range(len())")
print("  4. Use built-in functions (sum(), max(), etc.) when possible")
print("  5. Exit loops early with break when appropriate")
print("  6. Pre-calculate values outside loops")
print("  7. Use local variable references in tight loops")
print("  8. Consider numpy for numerical operations on large arrays")</pre>
        </div>
        
        <div>
            <h5>Memory Efficient Iteration</h5>
            <pre style="background: white; padding: 15px;">
# =========== MEMORY EFFICIENT ITERATION ===========

import sys
import itertools

print("Memory Efficient Iteration Techniques")
print("=" * 60)

# 1. Generator expressions vs list comprehensions
print(" 1. Memory usage comparison:")

# Create a large dataset
large_range = range(1000000)  # 1 million numbers

# List comprehension (stores all results in memory)
print("  List comprehension memory usage:")
start_mem = sys.getsizeof([])
squares_list = [x**2 for x in range(10000)]  # Smaller for demonstration
list_mem = sys.getsizeof(squares_list) - start_mem
print(f"    10,000 squares: {list_mem:,} bytes")

# Generator expression (lazy evaluation)
print("  Generator expression memory usage:")
squares_gen = (x**2 for x in large_range)
gen_mem = sys.getsizeof(squares_gen)
print(f"    1,000,000 squares: {gen_mem:,} bytes")
print(f"    Generator uses {list_mem*100/gen_mem:.0f}x less memory for same operation!")

# 2. Processing large files line by line
print(" 2. File processing patterns:")

def process_file_inefficient(filepath):
    """Inefficient: loads entire file into memory"""
    with open(filepath, 'r') as f:
        lines = f.readlines()  # Reads all lines into memory
    return [len(line.strip()) for line in lines]

def process_file_efficient(filepath):
    """Efficient: processes line by line"""
    line_lengths = []
    with open(filepath, 'r') as f:
        for line in f:  # Reads one line at a time
            line_lengths.append(len(line.strip()))
    return line_lengths

def process_file_generator(filepath):
    """Most efficient: generator yields results"""
    with open(filepath, 'r') as f:
        for line in f:
            yield len(line.strip())

print("  For large files, use:")
print("    - for line in file: (line by line)")
print("    - Generators for pipeline processing")
print("    - Avoid readlines() for very large files")

# 3. Chunk processing for large datasets
print(" 3. Chunk processing pattern:")

def process_in_chunks(data, chunk_size, process_func):
    """Process data in chunks to reduce memory usage"""
    for i in range(0, len(data), chunk_size):
        chunk = data[i:i + chunk_size]
        yield from process_func(chunk)

# Example: Process large dataset in chunks
def expensive_operation(batch):
    """Simulate expensive operation"""
    return [x * 2 for x in batch]

large_data = list(range(1000000))  # 1 million items
chunk_size = 10000  # Process 10,000 at a time

print(f"  Processing {len(large_data):,} items in chunks of {chunk_size}")
print("  This allows processing datasets larger than available memory")

# 4. Using itertools for memory efficiency
print(" 4. itertools for memory efficiency:")

# islice: iterate over slice without creating new list
print("  itertools.islice example:")
data = range(1000000)
# Doesn't create list of 100,000 items, just iterates
slice_iter = itertools.islice(data, 100000, 200000)
print(f"    Type: {type(slice_iter)}")
print(f"    Memory: {sys.getsizeof(slice_iter):,} bytes")

# chain: iterate over multiple sequences without concatenating
print("     itertools.chain example:")
list1 = [1, 2, 3]
list2 = [4, 5, 6]
list3 = [7, 8, 9]

# Instead of list1 + list2 + list3 (creates new list)
chained = itertools.chain(list1, list2, list3)
print(f"    Chained memory: {sys.getsizeof(chained):,} bytes")
print(f"    Concatenated memory: {sys.getsizeof(list1 + list2 + list3):,} bytes")

# 5. Streaming data processing
print(" 5. Streaming pattern for infinite/continuous data:")

def data_stream():
    """Simulate infinite data stream"""
    import random
    while True:
        yield random.random()

def process_stream(stream, window_size=100):
    """Process streaming data with sliding window"""
    buffer = []
    
    for data_point in stream:
        buffer.append(data_point)
        
        if len(buffer) > window_size:
            buffer.pop(0)  # Remove oldest
        
        if len(buffer) == window_size:
            # Process complete window
            avg = sum(buffer) / len(buffer)
            yield avg

print("  Streaming allows processing data as it arrives")
print("  without storing entire dataset in memory")

# 6. Memory views for large arrays
print(" 6. Memory views for zero-copy slicing:")

# Create large byte array
large_bytes = bytearray(b'x' * 1000000)  # 1MB of data

# Regular slicing creates copy
start = time.time()
slice_copy = large_bytes[100000:200000]
time_copy = time.time() - start
mem_copy = sys.getsizeof(slice_copy)

# Memory view creates view, not copy
start = time.time()
mem_view = memoryview(large_bytes)[100000:200000]
time_view = time.time() - start
mem_view_size = sys.getsizeof(mem_view)

print(f"  Regular slice: {time_copy:.6f}s, {mem_copy:,} bytes")
print(f"  Memory view: {time_view:.6f}s, {mem_view_size:,} bytes")
print(f"  Memory view is {time_copy/time_view:.1f}x faster for slicing")

# 7. Lazy evaluation with functools
print(" 7. Lazy evaluation patterns:")

from functools import lru_cache

@lru_cache(maxsize=128)
def expensive_calculation(n):
    """Expensive calculation with caching"""
    print(f"    Calculating for {n}...")
    return sum(range(n))  # Simulate expensive operation

print("  Caching expensive calculations:")
# First call computes
result1 = expensive_calculation(1000000)
# Second call uses cache
result2 = expensive_calculation(1000000)
print("  Caching avoids recomputation of expensive operations")

# 8. Database-style cursor iteration
print(" 8. Cursor pattern for large datasets:")

class LargeDatasetCursor:
    """Simulate database cursor for large dataset"""
    
    def __init__(self, data, batch_size=1000):
        self.data = data
        self.batch_size = batch_size
        self.position = 0
    
    def __iter__(self):
        return self
    
    def __next__(self):
        if self.position >= len(self.data):
            raise StopIteration
        
        end = min(self.position + self.batch_size, len(self.data))
        batch = self.data[self.position:end]
        self.position = end
        
        return batch

# Simulate large dataset
dataset = list(range(1000000))
cursor = LargeDatasetCursor(dataset, batch_size=10000)

print("  Processing with cursor:")
total = 0
for i, batch in enumerate(cursor):
    total += sum(batch)
    if i < 3:  # Show first 3 batches
        print(f"    Batch {i}: processed {len(batch):,} items")

print(f"  Total sum: {total:,}")
print("  Cursor processes data in batches, not all at once")

print(" " + "=" * 60)
print("Memory Efficiency Guidelines:")
print("  1. Use generators for large or infinite sequences")
print("  2. Process files line by line, not all at once")
print("  3. Use itertools for memory-efficient operations")
print("  4. Implement chunk processing for very large datasets")
print("  5. Consider memory views for large binary data")
print("  6. Cache expensive computations")
print("  7. Use cursor pattern for database-like access")
print("  8. Delete references to large objects when done")</pre>
        </div>
    </div>
</div>

<h3>Today's Hands-On Exercise</h3>
<div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <b>Task 1: Social Network Analysis (60 minutes)</b>
    <p>Analyze a social network graph using iteration:</p>
    <ul>
        <li>Represent social network as dictionary of connections</li>
        <li>Find mutual friends between users</li>
        <li>Calculate degree of separation</li>
        <li>Find most connected users</li>
        <li>Detect communities/clusters</li>
        <li>Recommend friends based on mutual connections</li>
    </ul>
    
    <pre style="background: #f5f5f5; padding: 10px; margin: 10px 0;">
# Social network structure
social_network = {
    "Alice": ["Bob", "Charlie", "Diana"],
    "Bob": ["Alice", "Charlie", "Eve"],
    "Charlie": ["Alice", "Bob", "Diana", "Frank"],
    "Diana": ["Alice", "Charlie", "Eve"],
    "Eve": ["Bob", "Diana", "Frank"],
    "Frank": ["Charlie", "Eve", "Grace"],
    "Grace": ["Frank", "Henry"],
    "Henry": ["Grace"]
}

# Your tasks:
# 1. Find mutual friends between any two users
# 2. Calculate shortest path between users
# 3. Find users with most friends
# 4. Suggest friends based on mutual connections</pre>
    
    <b>Task 2: Data Warehouse Query Simulator (60 minutes)</b>
    <p>Create a simple query engine for nested data:</p>
    <ul>
        <li>Implement SELECT, WHERE, ORDER BY operations</li>
        <li>Handle JOIN operations between datasets</li>
        <li>Support GROUP BY with aggregation functions</li>
        <li>Implement pagination for large result sets</li>
        <li>Add query optimization features</li>
    </ul>
    
    <b>Task 3: Game World Traversal (60 minutes)</b>
    <p>Create a game world navigation system:</p>
    <ul>
        <li>Represent game world as graph of locations</li>
        <li>Implement pathfinding algorithms</li>
        <li>Find all reachable locations from start</li>
        <li>Calculate shortest routes considering terrain</li>
        <li>Implement fog of war and exploration</li>
        <li>Create quest navigation system</li>
    </ul>
</div>

<h3>Homework Assignment</h3>
<div style="background-color: #fff0e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <b>Build a "Business Intelligence Dashboard"</b>
    
    <b>Requirements:</b>
    <ul>
        <li><b>Data Import:</b> Load and parse complex JSON/CSV data</li>
        <li><b>Multi-level Analysis:</b> Drill down through hierarchical data</li>
        <li><b>Aggregation:</b> Calculate statistics at different levels</li>
        <li><b>Filtering:</b> Dynamic filtering of data based on criteria</li>
        <li><b>Visualization:</b> Generate ASCII charts and reports</li>
    </ul>
    
    <b>Sample Data Structure:</b>
    <pre style="background: #f5f5f5; padding: 10px;">
SALES DATA HIERARCHY:
1. Regions
2. Countries within regions
3. Cities within countries
4. Stores within cities
5. Products within stores
6. Daily sales for each product

Example structure:
data = {
    "North America": {
        "USA": {
            "New York": {
                "Store_001": {
                    "Electronics": {
                        "2024-01-01": 15000,
                        "2024-01-02": 18000,
                        ...
                    },
                    "Clothing": {...}
                },
                "Store_002": {...}
            },
            "Los Angeles": {...}
        },
        "Canada": {...}
    },
    "Europe": {...}
}</pre>
    
    <b>Analysis Features:</b>
    <ul>
        <li>Calculate total sales by region/country/city/store</li>
        <li>Find best/worst performing products</li>
        <li>Calculate growth rates and trends</li>
        <li>Compare performance across time periods</li>
        <li>Identify seasonal patterns</li>
        <li>Generate sales forecasts</li>
    </ul>
    
    <b>Advanced Features:</b>
    <li>Real-time data updates simulation</li>
    <li>Anomaly detection in sales data</li>
    <li>Customer segmentation analysis</li>
    <li>Inventory optimization suggestions</li>
    <li>Export reports in multiple formats</li>
    <li>Interactive query interface</li>
</div>

<h3>Key Learning Points:</h3>
<ol>
    <li><b>Iteration Tools:</b> for, enumerate, zip, items(), comprehensions, generators</li>
    <li><b>Nested Structures:</b> Iterating through lists of lists, nested dictionaries</li>
    <li><b>Custom Iterators:</b> Building iterator classes with __iter__ and __next__</li>
    <li><b>Generator Functions:</b> Using yield for memory-efficient iteration</li>
    <li><b>Performance Optimization:</b> Choosing right iteration pattern for the task</li>
    <li><b>Memory Efficiency:</b> Generators, itertools, and streaming patterns</li>
    <li><b>Real-world Patterns:</b> Tree traversal, graph iteration, data pipelines</li>
</ol>

<div style="background-color: #e8f5e8; padding: 15px; margin: 20px 0; border-radius: 5px;">
    <h3>üí° Iteration Best Practices:</h3>
    <ul>
        <li><b>Choose the Right Tool:</b> Simple loops for basic iteration, comprehensions for transformations</li>
        <li><b>Use Generators for Large Data:</b> Avoid memory issues with lazy evaluation</li>
        <li><b>Prefer Built-in Functions:</b> sum(), max(), any(), all() are optimized</li>
        <li><b>Exit Early:</b> Use break when you find what you're looking for</li>
        <li><b>Cache Expensive Operations:</b> Pre-calculate values outside loops</li>
        <li><b>Use Local Variables:</b> Store frequently accessed values in local variables</li>
        <li><b>Consider itertools:</b> For memory-efficient operations on large datasets</li>
        <li><b>Write Readable Code:</b> Complex iteration logic should be well-commented</li>
    </ul>
    
    <pre style="background: white; padding: 10px; margin-top: 10px;">
# Best practices summary

# 1. Use the right iteration pattern
data = [1, 2, 3, 4, 5]

# Good: Simple iteration
for item in data:
    process(item)

# Good: Need index
for i, item in enumerate(data):
    process(i, item)

# Good: Transformation
squared = [x**2 for x in data]

# Good: Filtering
evens = [x for x in data if x % 2 == 0]

# 2. Memory efficiency
# For large files
def process_large_file(filename):
    with open(filename) as f:
        for line in f:  # One line at a time
            process(line)

# For large datasets
def generate_data():
    for i in range(1000000):
        yield compute(i)  # Generate on demand

# 3. Performance optimization
# Pre-calculate outside loop
length = len(data)
half = length // 2

for i in range(length):
    if i < half:
        process(data[i])

# Use local references
process_func = expensive_processing
for item in data:
    result = process_func(item)  # Faster than expensive_processing(item)

# 4. Early exit
found = None
for item in data:
    if condition(item):
        found = item
        break  # Stop searching

# 5. Use built-in functions
total = sum(data)  # Faster than manual loop
maximum = max(data)
any_positive = any(x > 0 for x in data)
all_positive = all(x > 0 for x in data)

# 6. Chain operations efficiently
# Instead of multiple loops:
result = []
for x in data:
    if x > 0:
        result.append(x**2)

# Use generator pipeline:
result = (x**2 for x in data if x > 0)

# 7. Handle nested structures clearly
def process_nested(data):
    for outer in data:
        if isinstance(outer, list):
            for inner in outer:
                process(inner)
        else:
            process(outer)

# 8. Document complex iteration logic
def find_connections(graph, start, max_depth):
    """
    Find all connections within max_depth using BFS.
    
    Args:
        graph: Dict of node -> list of connected nodes
        start: Starting node
        max_depth: Maximum degrees of separation
    
    Returns:
        List of reachable nodes
    """
    visited = set()
    queue = [(start, 0)]  # (node, depth)
    
    while queue:
        node, depth = queue.pop(0)
        if node not in visited and depth <= max_depth:
            visited.add(node)
            # Add neighbors at next depth level
            for neighbor in graph.get(node, []):
                queue.append((neighbor, depth + 1))
    
    return list(visited)</pre>
</div>

<div style="background-color: #e3f2fd; padding: 15px; margin: 20px 0; border-radius: 5px;">
    <h3>üß† Iteration Challenges:</h3>
    
    <div style="background: white; padding: 15px; border-radius: 8px; border: 2px solid #4A90E2; margin-bottom: 15px;">
        <h4>Challenge 1: Matrix Spiral Traversal</h4>
        <p>Write a function that traverses a matrix in spiral order:</p>
        <pre style="background: #f5f5f5; padding: 10px;">
matrix = [
    [1, 2, 3, 4],
    [5, 6, 7, 8],
    [9, 10, 11, 12],
    [13, 14, 15, 16]
]

spiral_traversal(matrix) ‚Üí [1, 2, 3, 4, 8, 12, 16, 15, 14, 13, 9, 5, 6, 7, 11, 10]</pre>
        <p><b>Bonus:</b> Make it work for non-square matrices.</p>
    </div>
    
    <div style="background: white; padding: 15px; border-radius: 8px; border: 2px solid #4A90E2; margin-bottom: 15px;">
        <h4>Challenge 2: JSON Path Evaluator</h4>
        <p>Create a function that can evaluate JSONPath-like expressions on nested data:</p>
        <pre style="background: #f5f5f5; padding: 10px;">
data = {
    "store": {
        "book": [
            {"title": "Book 1", "price": 10},
            {"title": "Book 2", "price": 20},
            {"title": "Book 3", "price": 30}
        ],
        "bicycle": {"color": "red", "price": 100}
    }
}

evaluate_path(data, "$.store.book[*].title") ‚Üí ["Book 1", "Book 2", "Book 3"]
evaluate_path(data, "$.store.bicycle.price") ‚Üí [100]
evaluate_path(data, "$.store.book[?(@.price > 15)].title") ‚Üí ["Book 2", "Book 3"]</pre>
    </div>
    
    <div style="background: white; padding: 15px; border-radius: 8px; border: 2px solid #4A90E2;">
        <h4>Challenge 3: Data Pipeline Generator</h4>
        <p>Create a data processing pipeline using generators that:</p>
        <ol>
            <li>Reads data from a simulated source (can be infinite)</li>
            <li>Filters invalid records</li>
            <li>Transforms data (e.g., convert units, calculate derived values)</li>
            <li>Groups data by time windows</li>
            <li>Calculates aggregates for each window</li>
            <li>Writes results to output</li>
        </ol>
        <p><b>Requirements:</b> The pipeline should process data as it arrives (streaming), not load everything into memory.</p>
    </div>
    
    <details>
        <summary>Hint for Challenge 1</summary>
        <div style="background: #f5f5f5; padding: 15px; margin-top: 10px; border-radius: 5px;">
            <p>Think about maintaining four boundaries: top, bottom, left, right. Traverse right across the top row, then down the right column, then left across the bottom row, then up the left column. Adjust boundaries after each traversal and continue until all elements are visited.</p>
            <pre style="background: white; padding: 10px;">
def spiral_traversal(matrix):
    result = []
    if not matrix:
        return result
    
    top, bottom = 0, len(matrix) - 1
    left, right = 0, len(matrix[0]) - 1
    
    while top <= bottom and left <= right:
        # Traverse right
        for i in range(left, right + 1):
            result.append(matrix[top][i])
        top += 1
        
        # Traverse down
        for i in range(top, bottom + 1):
            result.append(matrix[i][right])
        right -= 1
        
        if top <= bottom:
            # Traverse left
            for i in range(right, left - 1, -1):
                result.append(matrix[bottom][i])
            bottom -= 1
        
        if left <= right:
            # Traverse up
            for i in range(bottom, top - 1, -1):
                result.append(matrix[i][left])
            left += 1
    
    return result</pre>
        </div>
    </details>
</div>
`
},

            "4-1": {
                icon: "fa-cogs",
                title: "Defining Functions",
                html: `<h1>Week 4, Day 1: Functions - Reusable Code Blocks</h1>
<p>Today we'll learn how to create reusable code using functions - one of the most important concepts in programming.</p>

<div class="analogy-box">
    <b>Analogy: Kitchen Appliances vs Recipes üç≥</b><br/>
    <ul style="margin-top: 10px;">
        <li><b>Function Definition</b> = Recipe card with instructions</li>
        <li><b>Function Call</b> = Using the appliance (toaster, blender)</li>
        <li><b>Parameters</b> = Ingredients needed</li>
        <li><b>Return Value</b> = Finished dish</li>
        <li><b>Built-in Functions</b> = Microwave (ready to use)</li>
    </ul>
</div>

<h3>Key Topics</h3>
<ul>
    <li>Function Syntax and Structure</li>
    <li>Defining and Calling Functions</li>
    <li>Built-in vs User-defined Functions</li>
    <li>Function Best Practices</li>
</ul>

<h3>In-Depth Explanation</h3>

<b>a. Basic Function Syntax</b>
<div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <pre>
        # Basic function definition
        def function_name(parameters):
            """Optional docstring - explains what function does"""
            # Function body (indented)
            statements
            return value  # Optional
        
        # Function call
        function_name(arguments)
        
        # Example: Simple greeting function
        def greet():
            print("Hello, welcome!")
        
        greet()  # Call the function
        # Output: Hello, welcome!
        
        # Function with parameters
        def greet_person(name):
            print(f"Hello, {name}!")
        
        greet_person("Alice")  # Hello, Alice!
        greet_person("Bob")    # Hello, Bob!
    </pre>
</div>

<b>b. Anatomy of a Function</b>
<div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <pre>
        def calculate_area(length, width):
            """
            Calculate the area of a rectangle.
            
            Parameters:
            length (float): Length of the rectangle
            width (float): Width of the rectangle
            
            Returns:
            float: Area of the rectangle
            """
            # Function body
            area = length * width
            return area
        
        # Parts explained:
        # 1. def - Keyword to define function
        # 2. calculate_area - Function name (should be descriptive)
        # 3. (length, width) - Parameters (inputs)
        # 4. """docstring""" - Documentation string
        # 5. area = length * width - Function logic
        # 6. return area - Return statement (output)
        
        # Calling the function
        result = calculate_area(5, 3)
        print(f"Area: {result}")  # Area: 15
        
        # Multiple return statements
        def check_number(num):
            if num > 0:
                return "Positive"
            elif num < 0:
                return "Negative"
            else:
                return "Zero"
        
        print(check_number(10))  # Positive
        print(check_number(-5))  # Negative
        print(check_number(0))   # Zero
    </pre>
</div>

<b>Visual Representation:</b>
<div style="background-color: #f9f9f9; padding: 15px; margin: 10px 0; border-radius: 5px; text-align: center;">
    <img src="https://via.placeholder.com/600x200/e0e0e0/333333?text=Function+Flow+Diagram" alt="Function Flow" style="width: 100%; border-radius: 5px;">
    <div style="margin-top: 10px;">
        <table style="margin: 0 auto; border-collapse: collapse; width: 80%;">
            <tr>
                <td style="border: 1px solid #ccc; padding: 8px; background-color: #d0e7ff;">Function Definition</td>
                <td style="border: 1px solid #ccc; padding: 8px;">‚Üí</td>
                <td style="border: 1px solid #ccc; padding: 8px; background-color: #d0ffd0;">Function Call</td>
                <td style="border: 1px solid #ccc; padding: 8px;">‚Üí</td>
                <td style="border: 1px solid #ccc; padding: 8px; background-color: #ffd0d0;">Execution</td>
                <td style="border: 1px solid #ccc; padding: 8px;">‚Üí</td>
                <td style="border: 1px solid #ccc; padding: 8px; background-color: #ffffd0;">Return Value</td>
            </tr>
        </table>
    </div>
</div>

<b>c. Built-in Functions vs User-defined Functions</b>
<div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <pre>
        # Built-in functions (Python provides these)
        print("Hello")           # Output to console
        len([1, 2, 3])          # Returns length: 3
        max(5, 10, 2)           # Returns maximum: 10
        min(5, 10, 2)           # Returns minimum: 2
        sum([1, 2, 3, 4])       # Returns sum: 10
        abs(-10)                # Returns absolute value: 10
        round(3.14159, 2)       # Returns: 3.14
        type(42)                # Returns: &lt;class 'int'&gt;
        str(42)                 # Converts to string: "42"
        int("42")               # Converts to integer: 42
        float("3.14")           # Converts to float: 3.14
        bool(1)                 # Converts to boolean: True
        
        # User-defined functions (We create these)
        def calculate_tip(bill_amount, tip_percentage=15):
            """Calculate tip amount"""
            tip = bill_amount * (tip_percentage / 100)
            return round(tip, 2)
        
        tip_amount = calculate_tip(50, 20)  # 10.0
        print(f"Tip: \${tip_amount}")
        
        # Common built-in functions for lists
        numbers = [3, 1, 4, 1, 5, 9]
        print(sorted(numbers))      # [1, 1, 3, 4, 5, 9]
        print(reversed(numbers))    # Reversed object
        print(list(enumerate(numbers)))  # [(0, 3), (1, 1), ...]
        
        # Math functions
        import math
        print(math.sqrt(16))        # 4.0
        print(math.pow(2, 3))       # 8.0
        print(math.pi)              # 3.141592653589793
    </pre>
</div>

<b>d. Function Types and Patterns</b>
<div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <pre>
        # 1. Void Functions (No return value)
        def display_menu():
            print("1. Option A")
            print("2. Option B")
            print("3. Option C")
        
        # Returns None implicitly
        result = display_menu()
        print(result)  # None
        
        # 2. Value-Returning Functions
        def calculate_discount(price, discount_percent):
            discount = price * (discount_percent / 100)
            return price - discount
        
        final_price = calculate_discount(100, 20)
        print(f"Final price: \\\${final_price}")  # $80.0
        
        # 3. Multiple Return Values (using tuple)
        def min_max(numbers):
            return min(numbers), max(numbers)
        
        minimum, maximum = min_max([5, 2, 8, 1, 9])
        print(f"Min: {minimum}, Max: {maximum}")  # Min: 1, Max: 9
        
        # 4. Function as a Calculator
        def calculator(a, b, operation):
            if operation == '+':
                return a + b
            elif operation == '-':
                return a - b
            elif operation == '*':
                return a * b
            elif operation == '/':
                if b != 0:
                    return a / b
                else:
                    return "Error: Division by zero"
            else:
                return "Error: Invalid operation"
        
        print(calculator(10, 5, '+'))  # 15
        print(calculator(10, 5, '/'))  # 2.0
        
        # 5. Function with Default Parameters
        def create_email(username, domain="company.com"):
            return f"{username}@{domain}"
        
        print(create_email("john.doe"))          # john.doe@company.com
        print(create_email("jane.smith", "gmail.com"))  # jane.smith@gmail.com
        
        # 6. Function with Variable Arguments (*args)
        def average(*numbers):
            if len(numbers) == 0:
                return 0
            return sum(numbers) / len(numbers)
        
        print(average(10, 20, 30))       # 20.0
        print(average(5, 15, 25, 35))    # 20.0
    </pre>
</div>

<b>e. Function Best Practices and Documentation</b>
<div style="background-color: #f9f9f9; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <pre>
        # Good function names
        def calculate_tax(amount):          # Verb-Noun pattern
        def is_valid_email(email):          # Boolean functions start with "is_"
        def get_user_by_id(user_id):        # get_ for retrieval functions
        def save_to_database(data):         # Action-oriented
        def find_max_value(numbers):        # Descriptive
        
        # Bad function names
        def func1():                        # Too vague
        def do_stuff():                     # Not specific
        def process():                      # What does it process?
        
        # Good documentation example
        def convert_temperature(value, from_unit, to_unit):
            """
            Convert temperature between Celsius, Fahrenheit, and Kelvin.
            
            Args:
                value (float): Temperature value to convert
                from_unit (str): Original unit ('C', 'F', or 'K')
                to_unit (str): Target unit ('C', 'F', or 'K')
            
            Returns:
                float: Converted temperature value
            
            Raises:
                ValueError: If invalid units are provided
            
            Examples:
                >>> convert_temperature(100, 'C', 'F')
                212.0
                >>> convert_temperature(32, 'F', 'C')
                0.0
            """
            # Validate input units
            valid_units = {'C', 'F', 'K'}
            if from_unit not in valid_units or to_unit not in valid_units:
                raise ValueError(f"Invalid unit. Use: {valid_units}")
            
            # Conversion logic
            if from_unit == to_unit:
                return value
            
            # Convert to Celsius first
            if from_unit == 'F':
                celsius = (value - 32) * 5/9
            elif from_unit == 'K':
                celsius = value - 273.15
            else:  # from_unit == 'C'
                celsius = value
            
            # Convert from Celsius to target unit
            if to_unit == 'F':
                return celsius * 9/5 + 32
            elif to_unit == 'K':
                return celsius + 273.15
            else:  # to_unit == 'C'
                return celsius
        
        # Single Responsibility Principle
        # GOOD: Each function does one thing
        def validate_email(email):
            # Check email format
            pass
        
        def send_email(to_address, subject, body):
            # Send email
            pass
        
        def log_email_activity(email_data):
            # Log to database
            pass
        
        # BAD: Function does too much
        def handle_email(email, subject, body):
            # Validates, sends, and logs - too many responsibilities!
            pass
    </pre>
</div>

<hr/>

<h3>Hands-On Exercise: Banking Operations System</h3>
<b>Task:</b> Create a banking system with reusable functions for different operations<br/><br/>

<b>Requirements:</b>
<div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
    1. Create functions for deposit, withdrawal, and balance check<br/>
    2. Implement transaction history tracking<br/>
    3. Add interest calculation<br/>
    4. Create account management functions<br/>
</div>

<b>Python Implementation:</b>
<div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <pre>
        # Global variables (simulating database)
        accounts = {
            "1001": {"name": "Alice Smith", "balance": 1500.00, "transactions": []},
            "1002": {"name": "Bob Johnson", "balance": 2500.00, "transactions": []},
            "1003": {"name": "Charlie Brown", "balance": 500.00, "transactions": []}
        }
        
        # 1. Account Balance Function
        def check_balance(account_number):
            """Check the balance of a given account"""
            if account_number in accounts:
                account = accounts[account_number]
                return account["balance"]
            else:
                return "Account not found"
        
        # 2. Deposit Function
        def make_deposit(account_number, amount):
            """Deposit money into account"""
            if account_number not in accounts:
                return "Error: Account not found"
            
            if amount <= 0:
                return "Error: Deposit amount must be positive"
            
            accounts[account_number]["balance"] += amount
            
            # Record transaction
            transaction = {
                "type": "DEPOSIT",
                "amount": amount,
                "balance_after": accounts[account_number]["balance"]
            }
            accounts[account_number]["transactions"].append(transaction)
            
            return f"Deposited \\\${amount:.2f}. New balance: \\\${accounts[account_number]['balance']:.2f}"
        
        # 3. Withdrawal Function
        def make_withdrawal(account_number, amount):
            """Withdraw money from account"""
            if account_number not in accounts:
                return "Error: Account not found"
            
            if amount <= 0:
                return "Error: Withdrawal amount must be positive"
            
            account = accounts[account_number]
            
            if amount > account["balance"]:
                return "Error: Insufficient funds"
            
            account["balance"] -= amount
            
            # Record transaction
            transaction = {
                "type": "WITHDRAWAL",
                "amount": amount,
                "balance_after": account["balance"]
            }
            account["transactions"].append(transaction)
            
            return f"Withdrew \\\${amount:.2f}. New balance: \\\${account['balance']:.2f}"
        
        # 4. Transfer Function
        def transfer_funds(from_account, to_account, amount):
            """Transfer money between accounts"""
            # Check if both accounts exist
            if from_account not in accounts:
                return "Error: Source account not found"
            if to_account not in accounts:
                return "Error: Destination account not found"
            
            # Check if same account
            if from_account == to_account:
                return "Error: Cannot transfer to same account"
            
            # Process withdrawal first
            withdrawal_result = make_withdrawal(from_account, amount)
            if "Error" in withdrawal_result:
                return withdrawal_result
            
            # Process deposit
            deposit_result = make_deposit(to_account, amount)
            
            # Record transfer as special transaction
            transfer_record = {
                "type": "TRANSFER",
                "from": from_account,
                "to": to_account,
                "amount": amount
            }
            accounts[from_account]["transactions"].append(transfer_record)
            accounts[to_account]["transactions"].append(transfer_record)
            
            return f"Transferred \\\${amount:.2f} from {from_account} to {to_account}"
        
        # 5. Transaction History Function
        def get_transaction_history(account_number, limit=5):
            """Get recent transactions for an account"""
            if account_number not in accounts:
                return "Error: Account not found"
            
            transactions = accounts[account_number]["transactions"]
            recent = transactions[-limit:] if limit > 0 else transactions
            
            if not recent:
                return "No transactions found"
            
            history = f"Recent transactions for account {account_number}:\n"
            for i, transaction in enumerate(recent, 1):
                if transaction["type"] == "TRANSFER":
                    history += f"{i}. {transaction['type']}: \\\${transaction['amount']:.2f} "
                    history += f"from {transaction['from']} to {transaction['to']}\n"
                else:
                    history += f"{i}. {transaction['type']}: \\\${transaction['amount']:.2f}\n"
            
            return history
        
        # Test the functions
        print("Initial balance for 1001:", check_balance("1001"))
        print(make_deposit("1001", 500))
        print(make_withdrawal("1001", 200))
        print(transfer_funds("1001", "1002", 300))
        print(get_transaction_history("1001"))
        print("\nFinal balance for 1001:", check_balance("1001"))
    </pre>
</div>

<b>Challenge: Advanced Banking Features</b>
<div style="background-color: #fff0e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <b>Step 1:</b> Add interest calculation function<br/>
    <b>Step 2:</b> Implement overdraft protection<br/>
    <b>Step 3:</b> Add account creation and closure functions<br/>
    <b>Step 4:</b> Create monthly statement generator<br/>
    
    <pre style="margin-top: 10px;">
        # Interest calculation
        def calculate_interest(account_number, annual_rate, days):
            """Calculate interest for given number of days"""
            if account_number not in accounts:
                return "Error: Account not found"
            
            balance = accounts[account_number]["balance"]
            daily_rate = annual_rate / 365 / 100
            interest = balance * daily_rate * days
            
            return round(interest, 2)
        
        # Overdraft protection
        def make_withdrawal_with_overdraft(account_number, amount, overdraft_limit=500):
            """Withdraw with overdraft protection"""
            if account_number not in accounts:
                return "Error: Account not found"
            
            account = accounts[account_number]
            available_balance = account["balance"] + overdraft_limit
            
            if amount > available_balance:
                return f"Error: Exceeds available balance (including \\\${overdraft_limit} overdraft)"
            
            # Process withdrawal (may go negative)
            account["balance"] -= amount
            return f"Withdrew \\\${amount:.2f}. New balance: \\\${account['balance']:.2f}"
        
        # Account creation
        def create_account(name, initial_deposit=0):
            """Create a new bank account"""
            import random
            # Generate unique account number
            account_number = str(random.randint(1000, 9999))
            while account_number in accounts:
                account_number = str(random.randint(1000, 9999))
            
            accounts[account_number] = {
                "name": name,
                "balance": initial_deposit,
                "transactions": []
            }
            
            if initial_deposit > 0:
                accounts[account_number]["transactions"].append({
                    "type": "INITIAL_DEPOSIT",
                    "amount": initial_deposit
                })
            
            return account_number
    </pre>
</div>

<hr/>

<h3>Common Mistakes</h3>

<b>Mistake 1: Forgetting return statement</b>
<div style="background-color: #ffe6e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <pre>
        # WRONG - no return value
        def calculate_total(prices):
            total = sum(prices)
            # Missing return statement!
        
        result = calculate_total([10, 20, 30])
        print(result)  # None
        
        # RIGHT
        def calculate_total(prices):
            total = sum(prices)
            return total
        
        # OR if function doesn't need to return anything
        def display_total(prices):
            total = sum(prices)
            print(f"Total: {total}")
            # No return needed - prints directly
    </pre>
</div>

<b>Mistake 2: Modifying mutable default arguments</b>
<div style="background-color: #ffe6e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <pre>
        # WRONG - unexpected behavior!
        def add_item(item, items=[]):
            items.append(item)
            return items
        
        print(add_item("apple"))   # ['apple']
        print(add_item("banana"))  # ['apple', 'banana'] - Oops!
        
        # RIGHT - use None as default
        def add_item(item, items=None):
            if items is None:
                items = []
            items.append(item)
            return items
        
        print(add_item("apple"))   # ['apple']
        print(add_item("banana"))  # ['banana'] - Correct!
    </pre>
</div>

<b>Mistake 3: Using print instead of return</b>
<div style="background-color: #ffe6e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <pre>
        # WRONG - can't use result in calculations
        def calculate_area(length, width):
            area = length * width
            print(f"Area: {area}")  # Prints but doesn't return
        
        total = calculate_area(5, 3) + calculate_area(2, 4)
        # TypeError: unsupported operand type(s) for +: 'NoneType' and 'NoneType'
        
        # RIGHT
        def calculate_area(length, width):
            area = length * width
            return area  # Returns value for further use
        
        # OR separate calculation and display
        def calculate_area(length, width):
            return length * width
        
        def display_area(length, width):
            area = calculate_area(length, width)
            print(f"Area: {area}")
    </pre>
</div>

<hr/>

<div class="assignment-box">
    <h4>Assignment: Library Management System with Functions</h4>
    <p>Create a complete library management system using well-structured functions:</p>
    
    <div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <b>Part 1: Book Management Functions</b><br/>
        - add_book(): Add new book to library<br/>
        - remove_book(): Remove book by ISBN<br/>
        - search_books(): Search by title, author, or genre<br/>
        - update_book_status(): Mark as available/borrowed<br/><br/>
        
        <b>Part 2: Member Management Functions</b><br/>
        - register_member(): Add new library member<br/>
        - update_member(): Update member information<br/>
        - check_member_status(): View borrowed books<br/>
        - calculate_fines(): Calculate overdue fines<br/><br/>
        
        <b>Part 3: Transaction Functions</b><br/>
        - borrow_book(): Check out book to member<br/>
        - return_book(): Return borrowed book<br/>
        - renew_book(): Extend due date<br/>
        - generate_receipt(): Print transaction receipt<br/><br/>
        
        <b>Part 4: Reporting Functions</b><br/>
        - generate_library_report(): Overall statistics<br/>
        - popular_books_report(): Most borrowed books<br/>
        - overdue_books_report(): Books past due date<br/>
        - member_activity_report(): Member borrowing patterns<br/><br/>
        
        <b>Technical Requirements:</b><br/>
        1. Each function should have proper docstrings<br/>
        2. Use meaningful function names following conventions<br/>
        3. Implement error handling in each function<br/>
        4. Functions should be focused and single-purpose<br/>
        5. Use default parameters where appropriate
    </div>
    
    <p><b>Bonus Challenge:</b> Create a command-line interface that uses all these functions with a menu system.</p>
    
    <div style="background-color: #e8f5e9; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <b>Example Function Structure:</b>
        <pre>
def borrow_book(isbn, member_id, borrow_date):
    """
    Borrow a book from the library.
    
    Args:
        isbn (str): ISBN of the book to borrow
        member_id (str): ID of borrowing member
        borrow_date (datetime): Date of borrowing
    
    Returns:
        dict: Transaction details or error message
    
    Raises:
        ValueError: If book not found or member not registered
    """
    # Check if book exists and is available
    # Check if member exists and can borrow
    # Update book status
    # Create transaction record
    # Return transaction details
        </pre>
    </div>
</div>`
            },
            "4-2": {
                icon: "fa-exchange-alt",
                title: "Parameters & Return Values",
                html: `<h1>Week 4, Day 2: Parameters and Return Values</h1>
<p>Today we'll dive deep into how functions receive data (parameters) and send data back (return values) - mastering function communication.</p>

<div class="analogy-box">
    <b>Analogy: Restaurant Order System üçΩÔ∏è</b><br/>
    <ul style="margin-top: 10px;">
        <li><b>Parameters</b> = Order form (what you want)</li>
        <li><b>Arguments</b> = Actual order details</li>
        <li><b>Return Value</b> = Prepared meal</li>
        <li><b>Default Parameters</b> = Standard options (default sides)</li>
        <li><b>Keyword Arguments</b> = Customized order (extra cheese, no onions)</li>
    </ul>
</div>

<h3>Key Topics</h3>
<ul>
    <li>Types of Parameters (Positional, Keyword, Default)</li>
    <li>Return Values and Multiple Returns</li>
    <li>Variable Arguments (*args, **kwargs)</li>
    <li>Parameter Passing Techniques</li>
</ul>

<h3>In-Depth Explanation</h3>

<b>a. Parameters vs Arguments - The Distinction</b>
<div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <pre>
        # PARAMETERS: Variables in function definition
        def greet(name, greeting="Hello"):  # name and greeting are PARAMETERS
            return f"{greeting}, {name}!"
        
        # ARGUMENTS: Actual values passed to function
        result = greet("Alice", "Hi")  # "Alice" and "Hi" are ARGUMENTS
        
        # Visual representation:
        # Parameters = Placeholders (empty boxes)
        # Arguments = Actual content (filled boxes)
        
        # Formal vs Actual Parameters
        def calculate_total(price, quantity, tax_rate):  # Formal parameters
            total = price * quantity
            tax = total * tax_rate
            return total + tax
        
        # Actual arguments (specific values)
        total_cost = calculate_total(10.99, 3, 0.08)
        
        # Parameter names matter for readability
        def calculate_rectangle_area(length, width):   # Good - descriptive
        def calculate_rectangle_area(x, y):           # OK - but less clear
        def calculate_rectangle_area(a, b):           # Bad - what do a and b mean?
    </pre>
</div>

<b>b. Types of Parameters</b>
<div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <pre>
        # 1. Positional Parameters (required, order matters)
        def describe_pet(animal_type, pet_name):
            return f"I have a {animal_type} named {pet_name}."
        
        print(describe_pet("dog", "Rex"))      # I have a dog named Rex.
        print(describe_pet("Rex", "dog"))      # I have a Rex named dog. (Wrong!)
        
        # 2. Keyword Arguments (specify by parameter name)
        print(describe_pet(pet_name="Rex", animal_type="dog"))
        # Order doesn't matter with keyword arguments
        
        # 3. Default Parameters (optional with default values)
        def describe_pet(pet_name, animal_type="dog"):
            return f"I have a {animal_type} named {pet_name}."
        
        print(describe_pet("Rex"))             # I have a dog named Rex.
        print(describe_pet("Whiskers", "cat")) # I have a cat named Whiskers.
        
        # Default parameters must come after non-default parameters
        def calculate_total(price, quantity=1, tax_rate=0.08):  # OK
        # def calculate_total(price=10, quantity, tax_rate=0.08):  # ERROR!
        
        # 4. Combining different types
        def order_food(item, quantity=1, size="regular", **extras):
            order = f"{quantity} {size} {item}"
            if extras:
                order += f" with {', '.join(extras.values())}"
            return order
        
        print(order_food("pizza", 2))  # 2 regular pizza
        print(order_food("burger", size="large", sauce="extra", cheese="double"))
        # 1 large burger with extra, double
    </pre>
</div>

<b>Visual Parameter Types:</b>
<div style="background-color: #f9f9f9; padding: 15px; margin: 10px 0; border-radius: 5px; text-align: center;">
    <table style="margin: 0 auto; border-collapse: collapse; width: 90%;">
        <tr>
            <th style="border: 2px solid #333; padding: 10px; background-color: #e0e0e0;">Parameter Type</th>
            <th style="border: 2px solid #333; padding: 10px; background-color: #e0e0e0;">Syntax</th>
            <th style="border: 2px solid #333; padding: 10px; background-color: #e0e0e0;">Example</th>
            <th style="border: 2px solid #333; padding: 10px; background-color: #e0e0e0;">When to Use</th>
        </tr>
        <tr>
            <td style="border: 1px solid #ccc; padding: 8px;">Positional</td>
            <td style="border: 1px solid #ccc; padding: 8px; font-family: monospace;">def func(a, b)</td>
            <td style="border: 1px solid #ccc; padding: 8px; font-family: monospace;">func(1, 2)</td>
            <td style="border: 1px solid #ccc; padding: 8px;">Required inputs, natural order</td>
        </tr>
        <tr>
            <td style="border: 1px solid #ccc; padding: 8px;">Keyword</td>
            <td style="border: 1px solid #ccc; padding: 8px; font-family: monospace;">def func(a, b)</td>
            <td style="border: 1px solid #ccc; padding: 8px; font-family: monospace;">func(b=2, a=1)</td>
            <td style="border: 1px solid #ccc; padding: 8px;">Clarity, optional reordering</td>
        </tr>
        <tr>
            <td style="border: 1px solid #ccc; padding: 8px;">Default</td>
            <td style="border: 1px solid #ccc; padding: 8px; font-family: monospace;">def func(a=1)</td>
            <td style="border: 1px solid #ccc; padding: 8px; font-family: monospace;">func() or func(5)</td>
            <td style="border: 1px solid #ccc; padding: 8px;">Optional parameters with sensible defaults</td>
        </tr>
        <tr>
            <td style="border: 1px solid #ccc; padding: 8px;">*args</td>
            <td style="border: 1px solid #ccc; padding: 8px; font-family: monospace;">def func(*args)</td>
            <td style="border: 1px solid #ccc; padding: 8px; font-family: monospace;">func(1, 2, 3)</td>
            <td style="border: 1px solid #ccc; padding: 8px;">Variable number of positional args</td>
        </tr>
        <tr>
            <td style="border: 1px solid #ccc; padding: 8px;">**kwargs</td>
            <td style="border: 1px solid #ccc; padding: 8px; font-family: monospace;">def func(**kwargs)</td>
            <td style="border: 1px solid #ccc; padding: 8px; font-family: monospace;">func(a=1, b=2)</td>
            <td style="border: 1px solid #ccc; padding: 8px;">Variable number of keyword args</td>
        </tr>
    </table>
</div>

<b>c. Return Values Deep Dive</b>
<div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <pre>
        # 1. Single Return Value
        def square(number):
            return number * number
        
        result = square(5)  # 25
        
        # 2. Multiple Return Values (as tuple)
        def min_max(numbers):
            return min(numbers), max(numbers)
        
        minimum, maximum = min_max([3, 1, 4, 1, 5, 9])
        # minimum = 1, maximum = 9
        
        # Actually returns a tuple
        result = min_max([3, 1, 4])
        print(type(result))  # &lt;class 'tuple'&gt;
        print(result)        # (1, 4)
        
        # 3. Returning Different Types
        def process_data(data):
            if not data:
                return None  # Return None for empty data
            elif len(data) == 1:
                return data[0]  # Return single value
            else:
                return data  # Return the whole list
        
        # 4. Early Returns
        def validate_user(username, password):
            if not username:
                return False, "Username cannot be empty"
            if len(password) < 8:
                return False, "Password must be at least 8 characters"
            # More validations...
            return True, "Validation successful"
        
        # 5. Returning Complex Data Structures
        def analyze_text(text):
            words = text.split()
            chars = len(text)
            sentences = text.count('.') + text.count('!') + text.count('?')
            
            return {
                'word_count': len(words),
                'character_count': chars,
                'sentence_count': sentences,
                'average_word_length': chars / len(words) if words else 0
            }
        
        analysis = analyze_text("Hello world! This is a test.")
        print(analysis['word_count'])  # 6
        
        # 6. Generator Functions (yield instead of return)
        def countdown(n):
            while n > 0:
                yield n
                n -= 1
        
        for number in countdown(5):
            print(number)  # 5, 4, 3, 2, 1
    </pre>
</div>

<b>d. Variable Arguments (*args and **kwargs)</b>
<div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <pre>
        # *args - Variable positional arguments
        def sum_all(*args):
            """Sum any number of arguments"""
            total = 0
            for num in args:
                total += num
            return total
        
        print(sum_all(1, 2, 3))        # 6
        print(sum_all(1, 2, 3, 4, 5))  # 15
        
        # *args collects arguments into a tuple
        def print_args(*args):
            print(f"Type: {type(args)}")  # &lt;class 'tuple'&gt;
            print(f"Args: {args}")
        
        print_args(1, "hello", True)  # (1, 'hello', True)
        
        # **kwargs - Variable keyword arguments
        def create_profile(**kwargs):
            """Create user profile with any attributes"""
            profile = {}
            for key, value in kwargs.items():
                profile[key] = value
            return profile
        
        user1 = create_profile(name="Alice", age=30, city="NYC")
        user2 = create_profile(name="Bob", occupation="Engineer")
        
        # Combining *args and **kwargs
        def process_order(order_id, *items, **details):
            print(f"Order #{order_id}")
            print(f"Items: {items}")
            print(f"Details: {details}")
        
        process_order(1001, "Pizza", "Salad", delivery=True, tip=5.00)
        # Order #1001
        # Items: ('Pizza', 'Salad')
        # Details: {'delivery': True, 'tip': 5.0}
        
        # Using * to unpack arguments
        def connect_to_database(host, port, username, password):
            return f"Connected to {host}:{port} as {username}"
        
        # Instead of this:
        connect_to_database("localhost", 3306, "admin", "secret")
        
        # You can do this:
        db_config = ["localhost", 3306, "admin", "secret"]
        connect_to_database(*db_config)  # Unpack list
        
        # Or with dictionary:
        db_config = {
            "host": "localhost",
            "port": 3306,
            "username": "admin",
            "password": "secret"
        }
        connect_to_database(**db_config)  # Unpack dictionary
    </pre>
</div>

<b>e. Parameter Passing Techniques</b>
<div style="background-color: #f9f9f9; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <pre>
        # Python uses PASS BY OBJECT REFERENCE
        # Immutable objects (numbers, strings, tuples) - behave like pass by value
        # Mutable objects (lists, dictionaries) - behave like pass by reference
        
        # Example 1: Immutable parameter
        def modify_number(x):
            x = x * 2  # Creates new object
            return x
        
        num = 5
        result = modify_number(num)
        print(num)     # 5 (unchanged)
        print(result)  # 10
        
        # Example 2: Mutable parameter
        def modify_list(lst):
            lst.append("new item")  # Modifies original object
            return lst
        
        my_list = [1, 2, 3]
        result = modify_list(my_list)
        print(my_list)  # [1, 2, 3, 'new item'] (changed!)
        print(result)   # [1, 2, 3, 'new item']
        
        # To avoid modifying original list
        def safe_modify_list(lst):
            new_list = lst.copy()  # Create copy
            new_list.append("new item")
            return new_list
        
        my_list = [1, 2, 3]
        result = safe_modify_list(my_list)
        print(my_list)  # [1, 2, 3] (unchanged)
        print(result)   # [1, 2, 3, 'new item']
        
        # Function annotations (type hints)
        def calculate_total(price: float, quantity: int = 1, tax_rate: float = 0.08) -> float:
            """Calculate total cost with tax"""
            total = price * quantity
            tax = total * tax_rate
            return total + tax
        
        # Access annotations
        print(calculate_total.__annotations__)
        # {'price': &lt;class 'float'&gt;, 'quantity': &lt;class 'int'&gt;, 
        #  'tax_rate': &lt;class 'float'&gt;, 'return': &lt;class 'float'&gt;}
        
        # Complex parameter patterns
        def complex_function(required1, required2, *args, 
                           optional1=None, optional2="default", **kwargs):
            """Function with all parameter types"""
            print(f"Required: {required1}, {required2}")
            print(f"Variable args: {args}")
            print(f"Optional: {optional1}, {optional2}")
            print(f"Keyword args: {kwargs}")
        
        # Calling with different patterns
        complex_function(1, 2)  # Only required
        complex_function(1, 2, 3, 4, 5)  # With *args
        complex_function(1, 2, optional1="custom", extra="value")  # With **kwargs
        complex_function(1, 2, 3, 4, optional2="changed", mode="test")
    </pre>
</div>

<hr/>

<h3>Hands-On Exercise: E-commerce Shopping Cart System</h3>
<b>Task:</b> Build a shopping cart system with flexible parameter handling<br/><br/>

<b>Requirements:</b>
<div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
    1. Add items to cart with various parameter options<br/>
    2. Calculate totals with discounts and tax<br/>
    3. Apply promotions with flexible rules<br/>
    4. Generate invoices with detailed breakdown<br/>
</div>

<b>Python Implementation:</b>
<div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <pre>
        # Shopping Cart System
        
        # 1. Add item with flexible parameters
        def add_to_cart(cart, product, *quantities, **options):
            """
            Add product to shopping cart with various options.
            
            Args:
                cart (dict): Current shopping cart
                product (str): Product name
                *quantities: Variable quantities (default: 1)
                **options: Additional options like color, size, etc.
            """
            quantity = quantities[0] if quantities else 1
            
            if product not in cart:
                cart[product] = {
                    'quantity': quantity,
                    'options': options
                }
            else:
                cart[product]['quantity'] += quantity
                # Update options (new options override old ones)
                cart[product]['options'].update(options)
            
            return cart
        
        # 2. Calculate cart total with various discount options
        def calculate_total(cart, prices, discount=0, tax_rate=0.08, **coupons):
            """
            Calculate total cost with discounts and tax.
            
            Args:
                cart (dict): Shopping cart
                prices (dict): Price lookup dictionary
                discount (float): Percentage discount (0-100)
                tax_rate (float): Tax rate (0-1)
                **coupons: Additional coupon codes with values
            """
            subtotal = 0
            
            for product, details in cart.items():
                quantity = details['quantity']
                price = prices.get(product, 0)
                
                # Apply product-specific coupons if any
                product_coupon = coupons.get(product, 0)
                if isinstance(product_coupon, float):
                    price *= (1 - product_coupon)
                
                subtotal += price * quantity
            
            # Apply general discount
            if discount > 0:
                subtotal *= (1 - discount / 100)
            
            # Apply additional coupon discounts
            general_coupon = coupons.get('general', 0)
            if general_coupon:
                subtotal -= general_coupon
            
            # Calculate tax and total
            tax = subtotal * tax_rate
            total = subtotal + tax
            
            return {
                'subtotal': round(subtotal, 2),
                'discount': discount,
                'tax': round(tax, 2),
                'total': round(total, 2),
                'coupons_applied': list(coupons.keys())
            }
        
        # 3. Apply promotion with complex rules
        def apply_promotion(cart, promotion_type="buy_one_get_one", **promotion_params):
            """
            Apply various types of promotions to cart.
            
            Args:
                cart (dict): Shopping cart
                promotion_type (str): Type of promotion
                **promotion_params: Promotion-specific parameters
            """
            modified_cart = cart.copy()
            
            if promotion_type == "buy_one_get_one":
                product = promotion_params.get('product')
                if product in modified_cart:
                    # For every item, add one free
                    modified_cart[product]['quantity'] *= 2
            
            elif promotion_type == "bulk_discount":
                product = promotion_params.get('product')
                threshold = promotion_params.get('threshold', 10)
                discount = promotion_params.get('discount', 0.1)  # 10%
                
                if product in modified_cart and modified_cart[product]['quantity'] >= threshold:
                    # Mark for discount (will be applied in calculate_total)
                    modified_cart[product]['bulk_discount'] = discount
            
            elif promotion_type == "free_gift":
                main_product = promotion_params.get('main_product')
                free_product = promotion_params.get('free_product')
                threshold = promotion_params.get('threshold', 1)
                
                if main_product in modified_cart:
                    times = modified_cart[main_product]['quantity'] // threshold
                    if times > 0 and free_product not in modified_cart:
                        modified_cart[free_product] = {
                            'quantity': times,
                            'options': {'is_free_gift': True}
                        }
            
            return modified_cart
        
        # 4. Generate invoice with detailed breakdown
        def generate_invoice(cart, prices, customer_name="Customer", **invoice_options):
            """
            Generate formatted invoice with all details.
            
            Args:
                cart (dict): Shopping cart
                prices (dict): Price lookup
                customer_name (str): Customer name
                **invoice_options: Invoice formatting options
            """
            invoice = []
            
            # Header
            invoice.append("=" * 50)
            invoice.append(f"INVOICE FOR: {customer_name}")
            invoice.append("=" * 50)
            
            # Items
            invoice.append("\nITEMS:")
            invoice.append("-" * 50)
            
            for product, details in cart.items():
                quantity = details['quantity']
                price = prices.get(product, 0)
                total = quantity * price
                options = details.get('options', {})
                
                item_line = f"{product:20} x{quantity:3} @ \\\${price:6.2f} = \\\${total:8.2f}"
                
                if options:
                    item_line += f"  Options: {options}"
                
                invoice.append(item_line)
            
            # Calculate totals
            total_info = calculate_total(cart, prices, **invoice_options)
            
            # Summary
            invoice.append("\nSUMMARY:")
            invoice.append("-" * 50)
            invoice.append(f"Subtotal: \\\${total_info['subtotal']:>10.2f}")
            if total_info['discount']:
                invoice.append(f"Discount: {total_info['discount']}%")
            if total_info['coupons_applied']:
                invoice.append(f"Coupons: {', '.join(total_info['coupons_applied'])}")
            invoice.append(f"Tax: \\\${total_info['tax']:>15.2f}")
            invoice.append(f"TOTAL: \\\${total_info['total']:>13.2f}")
            
            invoice.append("\n" + "=" * 50)
            
            return "\n".join(invoice)
        
        # Test the system
        cart = {}
        prices = {"Laptop": 999.99, "Mouse": 25.50, "Keyboard": 45.00, "Headphones": 79.99}
        
        # Add items with different parameter styles
        cart = add_to_cart(cart, "Laptop", 1, color="silver", warranty="2 years")
        cart = add_to_cart(cart, "Mouse", 2)
        cart = add_to_cart(cart, "Keyboard", 1, backlit=True)
        
        # Apply promotions
        cart = apply_promotion(cart, "buy_one_get_one", product="Mouse")
        
        # Generate invoice with various options
        invoice = generate_invoice(
            cart, prices, 
            customer_name="Alice Johnson",
            discount=10,  # 10% discount
            general=50.00,  # $50 general coupon
            Laptop=0.05  # 5% off laptops
        )
        
        print(invoice)
    </pre>
</div>

<b>Challenge: Advanced Cart Features</b>
<div style="background-color: #fff0e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <b>Step 1:</b> Add inventory checking with stock parameters<br/>
    <b>Step 2:</b> Implement tiered pricing based on quantity<br/>
    <b>Step 3:</b> Add shipping cost calculation with multiple options<br/>
    <b>Step 4:</b> Create a returns processing function with various conditions<br/>
    
    <pre style="margin-top: 10px;">
        # Tiered pricing function
        def calculate_tiered_price(quantity, tiers):
            """
            Calculate price based on quantity tiers.
            
            Args:
                quantity (int): Number of items
                tiers (list): List of (min_quantity, price) tuples
            
            Returns:
                float: Total price for quantity
            """
            tiers = sorted(tiers, key=lambda x: x[0])
            total = 0
            remaining = quantity
            
            for i, (min_qty, price) in enumerate(tiers):
                if i == len(tiers) - 1:
                    # Last tier
                    total += remaining * price
                else:
                    next_min = tiers[i + 1][0]
                    tier_qty = min(remaining, next_min - min_qty)
                    total += tier_qty * price
                    remaining -= tier_qty
                    
                    if remaining <= 0:
                        break
            
            return total
        
        # Shipping calculator
        def calculate_shipping(items, destination="domestic", 
                              expedited=False, insurance=0, **shipping_options):
            """
            Calculate shipping cost with various options.
            """
            base_cost = 5.99  # Base shipping
            
            # Weight-based (simplified)
            total_weight = sum(item.get('weight', 1) for item in items)
            if total_weight > 10:
                base_cost += (total_weight - 10) * 0.5
            
            # Destination multiplier
            multipliers = {"domestic": 1.0, "international": 2.5}
            base_cost *= multipliers.get(destination, 1.0)
            
            # Additional services
            if expedited:
                base_cost *= 1.5
            
            base_cost += insurance * 0.01  # Insurance cost
            
            return round(base_cost, 2)
    </pre>
</div>

<hr/>

<h3>Common Mistakes</h3>

<b>Mistake 1: Confusing positional and keyword arguments order</b>
<div style="background-color: #ffe6e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <pre>
        # WRONG - positional after keyword
        def display_info(name, age, city):
            print(f"{name}, {age}, from {city}")
        
        display_info(name="Alice", 30, city="NYC")  # SyntaxError
        
        # RIGHT - positional first, then keyword
        display_info("Alice", 30, city="NYC")  # OK
        
        # OR all keyword arguments
        display_info(name="Alice", age=30, city="NYC")  # OK
        
        # Rule: Positional arguments must come before keyword arguments
    </pre>
</div>

<b>Mistake 2: Modifying default mutable parameters</b>
<div style="background-color: #ffe6e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <pre>
        # WRONG - unexpected behavior with mutable default
        def add_to_log(message, log=[]):
            log.append(message)
            return log
        
        log1 = add_to_log("First message")
        print(log1)  # ['First message']
        
        log2 = add_to_log("Second message")
        print(log2)  # ['First message', 'Second message'] - Oops!
        
        # RIGHT - use None as default
        def add_to_log(message, log=None):
            if log is None:
                log = []
            log.append(message)
            return log
        
        log1 = add_to_log("First message")
        print(log1)  # ['First message']
        
        log2 = add_to_log("Second message")
        print(log2)  # ['Second message'] - Correct!
    </pre>
</div>

<b>Mistake 3: Forgetting to unpack arguments properly</b>
<div style="background-color: #ffe6e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <pre>
        # WRONG - passing list/tuple directly
        def connect(host, port, user, password):
            pass
        
        config = ["localhost", 3306, "admin", "secret"]
        connect(config)  # TypeError: missing 3 required arguments
        
        # RIGHT - unpack with *
        connect(*config)  # Correct!
        
        # WRONG - passing dict directly
        config_dict = {"host": "localhost", "port": 3306, 
                      "user": "admin", "password": "secret"}
        connect(config_dict)  # TypeError
        
        # RIGHT - unpack with **
        connect(**config_dict)  # Correct!
        
        # Partial unpacking
        config = ["localhost", 3306]
        connect(*config, "admin", "secret")  # Mix positional and unpacked
    </pre>
</div>

<hr/>

<div class="assignment-box">
    <h4>Assignment: Restaurant Order Management System</h4>
    <p>Create a restaurant order system with sophisticated parameter handling:</p>
    
    <div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <b>Part 1: Order Creation Functions</b><br/>
        - take_order(): Accept variable menu items and customizations<br/>
        - customize_item(): Handle special requests with **kwargs<br/>
        - add_combo(): Create meal deals with flexible options<br/>
        - update_order(): Modify existing order with various parameters<br/><br/>
        
        <b>Part 2: Pricing Functions</b><br/>
        - calculate_subtotal(): Handle tiered pricing and discounts<br/>
        - apply_promotions(): Apply multiple promotion types<br/>
        - add_taxes(): Calculate different tax rates<br/>
        - add_tip(): Flexible tip calculation methods<br/><br/>
        
        <b>Part 3: Kitchen Functions</b><br/>
        - prepare_order(): Send order to kitchen with preparation notes<br/>
        - split_check(): Divide bill among multiple people<br/>
        - apply_coupons(): Handle various coupon types<br/>
        - generate_receipt(): Create detailed receipt with formatting options<br/><br/>
        
        <b>Part 4: Advanced Features</b><br/>
        - dietary_restrictions(): Process special dietary needs<br/>
        - allergy_check(): Flag potential allergens<br/>
        - nutritional_info(): Calculate nutritional totals<br/>
        - order_history(): Track customer preferences<br/><br/>
        
        <b>Technical Requirements:</b><br/>
        1. Use all parameter types (positional, keyword, default, *args, **kwargs)<br/>
        2. Implement comprehensive return values (tuples, dicts, custom objects)<br/>
        3. Use function annotations for type hints<br/>
        4. Handle edge cases with default parameters<br/>
        5. Create flexible, reusable functions
    </div>
    
    <p><b>Bonus Challenge:</b> Create a recommendation system that suggests menu items based on customer preferences and order history using complex parameter patterns.</p>
    
    <div style="background-color: #e8f5e9; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <b>Example Function Signature:</b>
        <pre>
def take_order(table_number: int, *menu_items, 
               special_requests: str = "", 
               dietary_restrictions: list = None,
               split_among: int = 1,
               **customizations) -> dict:
    """
    Take a restaurant order with full customization.
    
    Args:
        table_number: Table number
        *menu_items: Variable number of menu items
        special_requests: Any special instructions
        dietary_restrictions: List of dietary restrictions
        split_among: Number of ways to split bill
        **customizations: Item-specific customizations
    
    Returns:
        dict: Order details including calculated totals
    """
        </pre>
    </div>
</div>`
            },
            "4-3": {
                icon: "fa-layer-group",
                title: "Local vs Global Scope",
                html: `<h1>Week 4, Day 3: Scope - Understanding Variable Visibility</h1>
<p>Today we'll explore scope - where variables live and how they can be accessed. Understanding scope is crucial for writing bug-free, maintainable code.</p>

<div class="analogy-box">
    <b>Analogy: Office Building vs Company Organization üè¢</b><br/>
    <ul style="margin-top: 10px;">
        <li><b>Global Scope</b> = Company-wide policies (everyone can see)</li>
        <li><b>Local Scope</b> = Department rules (only department members see)</li>
        <li><b>Function Scope</b> = Individual office (only that person sees)</li>
        <li><b>Namespace</b> = Employee directory (who works where)</li>
        <li><b>Closure</b> = Secure document with access rules</li>
    </ul>
</div>

<h3>Key Topics</h3>
<ul>
    <li>Global vs Local Scope</li>
    <li>Namespace and LEGB Rule</li>
    <li>Nonlocal Keyword</li>
    <li>Closures and Nested Functions</li>
</ul>

<h3>In-Depth Explanation</h3>

<b>a. Understanding Scope Levels</b>
<div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <pre>
        # 1. Global Scope - Variables defined at module level
        global_variable = "I'm global"
        
        def function1():
            # Can access global variable
            print(f"In function1: {global_variable}")
        
        def function2():
            # Can also access global variable
            print(f"In function2: {global_variable}")
        
        function1()  # I'm global
        function2()  # I'm global
        
        # 2. Local Scope - Variables defined inside function
        def calculate_total(price, quantity):
            # price and quantity are local parameters
            tax_rate = 0.08  # Local variable
            subtotal = price * quantity  # Local variable
            total = subtotal * (1 + tax_rate)  # Local variable
            return total
        
        result = calculate_total(100, 2)
        # print(tax_rate)  # ERROR: tax_rate not accessible outside function
        
        # 3. Function Scope - Each function has its own scope
        def function_a():
            local_var = "Function A's variable"
            print(local_var)  # Works
        
        def function_b():
            local_var = "Function B's variable"  # Different variable!
            print(local_var)  # Works
        
        function_a()  # Function A's variable
        function_b()  # Function B's variable
        # print(local_var)  # ERROR: Not accessible globally
        
        # 4. Scope Lifetime
        def counter():
            count = 0  # Local variable created when function runs
            count += 1
            return count
        
        print(counter())  # 1
        print(counter())  # 1 (count is recreated each time)
        print(counter())  # 1
    </pre>
</div>

<b>b. The LEGB Rule - How Python Looks for Variables</b>
<div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <pre>
        # LEGB Rule: Local ‚Üí Enclosing ‚Üí Global ‚Üí Built-in
        # Python searches for variables in this order
        
        # Built-in (B) - Python's built-in names
        print = "custom print"  # Shadows built-in print
        
        # To restore built-in, we need to delete or rename
        del print  # Remove custom print
        print("Hello")  # Now uses built-in print
        
        # Global (G) - Module-level variables
        global_counter = 0
        
        def increment_global():
            # This uses the global variable
            global global_counter  # Need to declare global
            global_counter += 1
            return global_counter
        
        print(increment_global())  # 1
        print(increment_global())  # 2
        
        # Enclosing (E) - Variables in outer functions
        def outer_function():
            enclosing_var = "I'm in outer function"
            
            def inner_function():
                # Can access enclosing function's variables
                print(f"Inner sees: {enclosing_var}")
            
            inner_function()
        
        outer_function()  # Inner sees: I'm in outer function
        
        # Local (L) - Function's own variables
        def my_function():
            local_var = "I'm local"
            print(local_var)  # Found in local scope
        
        my_function()
        
        # LEGB in action
        x = "global"  # Global
        
        def outer():
            x = "enclosing"  # Enclosing
            
            def inner():
                x = "local"  # Local
                print(f"Local x: {x}")
            
            inner()
            print(f"Enclosing x: {x}")
        
        outer()
        print(f"Global x: {x}")
        # Output:
        # Local x: local
        # Enclosing x: enclosing
        # Global x: global
    </pre>
</div>

<b>Visual Scope Hierarchy:</b>
<div style="background-color: #f9f9f9; padding: 15px; margin: 10px 0; border-radius: 5px; text-align: center;">
    <table style="margin: 0 auto; border-collapse: collapse; width: 90%;">
        <tr>
            <th style="border: 2px solid #333; padding: 10px; background-color: #e0e0e0;">Scope Level</th>
            <th style="border: 2px solid #333; padding: 10px; background-color: #e0e0e0;">Where Defined</th>
            <th style="border: 2px solid #333; padding: 10px; background-color: #e0e0e0;">Accessible From</th>
            <th style="border: 2px solid #333; padding: 10px; background-color: #e0e0e0;">Lifetime</th>
            <th style="border: 2px solid #333; padding: 10px; background-color: #e0e0e0;">Example</th>
        </tr>
        <tr>
            <td style="border: 1px solid #ccc; padding: 8px;"><b>Built-in (B)</b></td>
            <td style="border: 1px solid #ccc; padding: 8px;">Python interpreter</td>
            <td style="border: 1px solid #ccc; padding: 8px;">Everywhere</td>
            <td style="border: 1px solid #ccc; padding: 8px;">Program execution</td>
            <td style="border: 1px solid #ccc; padding: 8px; font-family: monospace;">print(), len()</td>
        </tr>
        <tr>
            <td style="border: 1px solid #ccc; padding: 8px;"><b>Global (G)</b></td>
            <td style="border: 1px solid #ccc; padding: 8px;">Module/top level</td>
            <td style="border: 1px solid #ccc; padding: 8px;">Anywhere in module</td>
            <td style="border: 1px solid #ccc; padding: 8px;">Module execution</td>
            <td style="border: 1px solid #ccc; padding: 8px; font-family: monospace;">PI = 3.14159</td>
        </tr>
        <tr>
            <td style="border: 1px solid #ccc; padding: 8px;"><b>Enclosing (E)</b></td>
            <td style="border: 1px solid #ccc; padding: 8px;">Outer function</td>
            <td style="border: 1px solid #ccc; padding: 8px;">Inner functions</td>
            <td style="border: 1px solid #ccc; padding: 8px;">Outer function execution</td>
            <td style="border: 1px solid #ccc; padding: 8px; font-family: monospace;">def outer(): x=1</td>
        </tr>
        <tr>
            <td style="border: 1px solid #ccc; padding: 8px;"><b>Local (L)</b></td>
            <td style="border: 1px solid #ccc; padding: 8px;">Function/method</td>
            <td style="border: 1px solid #ccc; padding: 8px;">Only within function</td>
            <td style="border: 1px solid #ccc; padding: 8px;">Function execution</td>
            <td style="border: 1px solid #ccc; padding: 8px; font-family: monospace;">def func(): y=2</td>
        </tr>
    </table>
</div>

<b>c. The 'global' Keyword - Modifying Global Variables</b>
<div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <pre>
        # Problem: Can't modify global variables without declaration
        counter = 0
        
        def increment():
            # This creates a new local variable, doesn't modify global
            counter = counter + 1  # UnboundLocalError!
        
        # Solution: Use 'global' keyword
        counter = 0
        
        def increment():
            global counter  # Declare we're using global variable
            counter = counter + 1
            return counter
        
        print(increment())  # 1
        print(increment())  # 2
        print(increment())  # 3
        print(f"Global counter: {counter}")  # 3
        
        # Multiple global variables
        x = 10
        y = 20
        
        def modify_globals():
            global x, y
            x += 5
            y *= 2
        
        modify_globals()
        print(f"x: {x}, y: {y}")  # x: 15, y: 40
        
        # When to use global (and when not to)
        
        # GOOD use case: Configuration settings
        DEBUG_MODE = False
        
        def toggle_debug():
            global DEBUG_MODE
            DEBUG_MODE = not DEBUG_MODE
            return DEBUG_MODE
        
        # BAD use case: Using global for everything
        # Avoid this pattern:
        result = 0  # Global
        
        def calculate_something():
            global result
            # ... complex calculation ...
            result = 42
        
        # BETTER: Return value instead
        def calculate_something():
            # ... complex calculation ...
            return 42
        
        result = calculate_something()
        
        # Global constants (convention: UPPER_CASE)
        PI = 3.141592653589793
        MAX_CONNECTIONS = 100
        DATABASE_URL = "localhost:5432"
        
        def calculate_circle_area(radius):
            return PI * radius * radius  # Using global constant (read-only)
    </pre>
</div>

<b>d. The 'nonlocal' Keyword - Modifying Enclosing Scope</b>
<div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <pre>
        # Problem with nested functions
        def outer():
            count = 0
            
            def inner():
                # This creates a new local variable, doesn't modify outer's count
                count = count + 1  # UnboundLocalError!
                return count
            
            return inner
        
        # Solution: Use 'nonlocal' keyword
        def counter_factory():
            count = 0  # Enclosing scope variable
            
            def increment():
                nonlocal count  # Declare we're modifying enclosing variable
                count += 1
                return count
            
            def decrement():
                nonlocal count
                count -= 1
                return count
            
            def get_count():
                return count
            
            return increment, decrement, get_count
        
        inc, dec, get = counter_factory()
        print(inc())  # 1
        print(inc())  # 2
        print(dec())  # 1
        print(get())  # 1
        
        # Multiple nonlocal variables
        def outer():
            x = 10
            y = 20
            
            def inner():
                nonlocal x, y
                x += 5
                y *= 2
                return x, y
            
            return inner
        
        func = outer()
        print(func())  # (15, 40)
        
        # Multiple levels of nesting
        def level1():
            level1_var = "Level 1"
            
            def level2():
                level2_var = "Level 2"
                
                def level3():
                    nonlocal level2_var  # Refers to level2's variable
                    level2_var = "Modified Level 2"
                    
                    # Can't use nonlocal to jump multiple levels directly
                    # nonlocal level1_var  # Would need declaration in level2 first
                
                level3()
                print(level2_var)  # Modified Level 2
            
            level2()
        
        level1()
        
        # Practical example: Stateful counter
        def create_counter(initial_value=0):
            """Factory function that creates counter with state"""
            current_value = initial_value
            
            def increment(amount=1):
                nonlocal current_value
                current_value += amount
                return current_value
            
            def decrement(amount=1):
                nonlocal current_value
                current_value -= amount
                return current_value
            
            def reset():
                nonlocal current_value
                current_value = initial_value
                return current_value
            
            def get_value():
                return current_value
            
            return {
                'increment': increment,
                'decrement': decrement,
                'reset': reset,
                'get_value': get_value
            }
        
        # Create independent counters
        counter1 = create_counter(10)
        counter2 = create_counter(100)
        
        print(counter1['increment']())   # 11
        print(counter1['increment'](5))  # 16
        print(counter2['decrement'](20)) # 80
        print(counter1['get_value']())   # 16
        print(counter2['get_value']())   # 80
    </pre>
</div>

<b>e. Closures and Function Factories</b>
<div style="background-color: #f9f9f9; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <pre>
        # What is a closure?
        # A closure is a function that remembers values from its enclosing scope
        # even when the outer function has finished executing.
        
        def make_multiplier(factor):
            """Factory function that creates multiplier functions"""
            def multiplier(number):
                # This inner function REMEMBERS 'factor' from outer scope
                return number * factor
            return multiplier
        
        # Create specialized multiplier functions
        double = make_multiplier(2)
        triple = make_multiplier(3)
        quadruple = make_multiplier(4)
        
        print(double(5))   # 10
        print(triple(5))   # 15
        print(quadruple(5)) # 20
        
        # Each closure remembers its own factor
        print(double.__closure__[0].cell_contents)  # 2
        print(triple.__closure__[0].cell_contents)  # 3
        
        # Practical closure: Rate limiter
        def create_rate_limiter(max_calls, time_window):
            """Create a rate-limited function"""
            import time
            calls = []
            
            def limited_function():
                current_time = time.time()
                
                # Remove calls outside time window
                while calls and calls[0] < current_time - time_window:
                    calls.pop(0)
                
                if len(calls) >= max_calls:
                    return False, "Rate limit exceeded"
                
                calls.append(current_time)
                return True, f"Call {len(calls)} of {max_calls}"
            
            return limited_function
        
        # Create rate-limited API call function
        api_call = create_rate_limiter(max_calls=3, time_window=60)  # 3 calls per minute
        
        # Simulate calls
        for i in range(5):
            success, message = api_call()
            print(f"Call {i+1}: {message}")
            if not success:
                print("   Waiting...")
                time.sleep(30)  # Wait half the time window
        
        # Closure with multiple captured variables
        def create_person(name, age):
            """Create a person object using closures"""
            
            def get_name():
                return name
            
            def get_age():
                return age
            
            def set_age(new_age):
                nonlocal age
                age = new_age
            
            def celebrate_birthday():
                nonlocal age
                age += 1
                return f"Happy Birthday {name}! You're now {age}."
            
            return {
                'get_name': get_name,
                'get_age': get_age,
                'set_age': set_age,
                'celebrate_birthday': celebrate_birthday
            }
        
        # Create person objects
        alice = create_person("Alice", 30)
        bob = create_person("Bob", 25)
        
        print(alice['get_name']())           # Alice
        print(alice['celebrate_birthday']()) # Happy Birthday Alice! You're now 31.
        print(bob['get_age']())              # 25
        
        # Each person maintains their own state
        alice['set_age'](35)
        print(alice['get_age']())  # 35
        print(bob['get_age']())    # 25 (unchanged)
        
        # Advanced: Decorators using closures
        def timer_decorator(func):
            """Decorator that times function execution"""
            import time
            
            def wrapper(*args, **kwargs):
                start_time = time.time()
                result = func(*args, **kwargs)
                end_time = time.time()
                print(f"{func.__name__} took {end_time - start_time:.4f} seconds")
                return result
            
            return wrapper
        
        @timer_decorator
        def slow_function():
            import time
            time.sleep(1)
            return "Done"
        
        result = slow_function()  # Prints timing information
    </pre>
</div>

<hr/>

<h3>Hands-On Exercise: Game Character System with Scope</h3>
<b>Task:</b> Build a game character system demonstrating different scope concepts<br/><br/>

<b>Requirements:</b>
<div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
    1. Create characters with local scope attributes<br/>
    2. Implement game-wide global settings<br/>
    3. Use closures for character abilities<br/>
    4. Demonstrate scope hierarchy with nested functions<br/>
</div>

<b>Python Implementation:</b>
<div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <pre>
        # Game System with Scope Demonstration
        
        # GLOBAL SCOPE: Game-wide constants and settings
        GAME_VERSION = "1.0.0"
        MAX_PLAYERS = 4
        DIFFICULTY_LEVELS = ["Easy", "Normal", "Hard", "Expert"]
        
        # Global game state (use carefully!)
        game_active = False
        current_players = []
        
        # 1. Character Factory using Closures
        def create_character(name, character_class, level=1):
            """Factory function that creates game characters"""
            # These are in the ENCLOSING scope
            health = 100 * level
            mana = 50 * level
            experience = 0
            inventory = []
            
            # LOCAL functions (closures that capture enclosing scope)
            def take_damage(amount):
                nonlocal health
                health = max(0, health - amount)
                return health
            
            def heal(amount):
                nonlocal health
                health += amount
                return health
            
            def gain_exp(exp_amount):
                nonlocal experience, level
                experience += exp_amount
                # Level up logic
                exp_needed = level * 100
                if experience >= exp_needed:
                    level += 1
                    experience = experience - exp_needed
                    return True, f"Level up! Now level {level}"
                return False, f"Exp: {experience}/{exp_needed}"
            
            def add_item(item):
                nonlocal inventory
                inventory.append(item)
                return inventory
            
            def use_item(item_index):
                nonlocal inventory, health, mana
                if 0 <= item_index < len(inventory):
                    item = inventory.pop(item_index)
                    if item == "Health Potion":
                        health = min(100 * level, health + 50)
                    elif item == "Mana Potion":
                        mana = min(50 * level, mana + 25)
                    return f"Used {item}"
                return "Invalid item index"
            
            def get_status():
                return {
                    'name': name,
                    'class': character_class,
                    'level': level,
                    'health': health,
                    'mana': mana,
                    'experience': experience,
                    'inventory': inventory.copy()
                }
            
            # Return dictionary of methods (public interface)
            return {
                'take_damage': take_damage,
                'heal': heal,
                'gain_exp': gain_exp,
                'add_item': add_item,
                'use_item': use_item,
                'get_status': get_status
            }
        
        # 2. Game Session Manager with Nested Scopes
        def start_game_session():
            """Manages a game session with local scope"""
            # Local to game session
            session_id = "SESSION_" + str(hash(str(datetime.now())))
            characters_in_session = []
            session_start_time = datetime.now()
            
            def add_character(character):
                characters_in_session.append(character)
                update_global_players()
                return f"Added {character['get_status']()['name']} to session"
            
            def remove_character(character_name):
                for i, char in enumerate(characters_in_session):
                    if char['get_status']()['name'] == character_name:
                        characters_in_session.pop(i)
                        update_global_players()
                        return f"Removed {character_name}"
                return "Character not found"
            
            def update_global_players():
                """Demonstrates accessing and modifying global scope"""
                global current_players, game_active
                current_players = [char['get_status']()['name'] 
                                  for char in characters_in_session]
                game_active = len(characters_in_session) > 0
            
            def get_session_info():
                return {
                    'session_id': session_id,
                    'start_time': session_start_time,
                    'character_count': len(characters_in_session),
                    'characters': [char['get_status']()['name'] 
                                  for char in characters_in_session]
                }
            
            return {
                'add_character': add_character,
                'remove_character': remove_character,
                'get_session_info': get_session_info
            }
        
        # 3. Combat System demonstrating scope hierarchy
        def create_combat_system():
            """Combat system with multiple scope levels"""
            # Level 1: Combat system scope
            combat_log = []
            round_number = 1
            
            def execute_round():
                # Level 2: Round scope
                round_actions = []
                
                def register_action(attacker, defender, damage):
                    # Level 3: Action scope
                    nonlocal round_actions
                    action = {
                        'attacker': attacker,
                        'defender': defender,
                        'damage': damage,
                        'round': round_number
                    }
                    round_actions.append(action)
                    return action
                
                def resolve_round():
                    # Can access multiple levels
                    nonlocal combat_log, round_number, round_actions
                    combat_log.extend(round_actions)
                    round_number += 1
                    return round_actions
                
                return register_action, resolve_round
            
            def get_combat_log():
                return combat_log.copy()
            
            def reset_combat():
                nonlocal combat_log, round_number
                combat_log = []
                round_number = 1
            
            return {
                'execute_round': execute_round,
                'get_combat_log': get_combat_log,
                'reset_combat': reset_combat
            }
        
        # 4. Global Game Management Functions
        def start_game():
            global game_active
            game_active = True
            return "Game started"
        
        def end_game():
            global game_active, current_players
            game_active = False
            current_players = []
            return "Game ended"
        
        def get_game_status():
            return {
                'version': GAME_VERSION,
                'active': game_active,
                'current_players': current_players,
                'max_players': MAX_PLAYERS
            }
        
        # Test the system
        from datetime import datetime
        
        # Create characters (each has its own closure)
        warrior = create_character("Arthur", "Warrior", 5)
        mage = create_character("Merlin", "Mage", 3)
        
        # Test character methods
        print("Warrior takes 30 damage:", warrior['take_damage'](30))
        print("Warrior gains 200 exp:", warrior['gain_exp'](200))
        warrior['add_item']("Health Potion")
        print("Warrior uses item:", warrior['use_item'](0))
        print("Warrior status:", warrior['get_status']())
        
        # Start game session
        session = start_game_session()
        print(session['add_character'](warrior))
        print(session['add_character'](mage))
        print("Session info:", session['get_session_info']())
        
        # Check global state
        print("Game status:", get_game_status())
        
        # Test combat system
        combat = create_combat_system()
        register_action, resolve_round = combat['execute_round']()
        
        # Simulate combat actions
        register_action("Arthur", "Goblin", 25)
        register_action("Merlin", "Goblin", 40)
        round_results = resolve_round()
        print("Round 1 results:", round_results)
        
        # Another round
        register_action, resolve_round = combat['execute_round']()
        register_action("Arthur", "Dragon", 15)
        round_results = resolve_round()
        print("Round 2 results:", round_results)
        
        print("Full combat log:", combat['get_combat_log']())
        
        # End game
        print(end_game())
        print("Final game status:", get_game_status())
    </pre>
</div>

<b>Challenge: Advanced Scope Patterns</b>
<div style="background-color: #fff0e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <b>Step 1:</b> Implement an achievement system using closures<br/>
    <b>Step 2:</b> Create a save/load system that preserves game state<br/>
    <b>Step 3:</b> Add multiplayer support with separate scopes per player<br/>
    <b>Step 4:</b> Implement a modding system that can extend game functionality<br/>
    
    <pre style="margin-top: 10px;">
        # Achievement system using closures
        def create_achievement_system():
            achievements = {}
            unlocked_achievements = []
            
            def register_achievement(name, description, condition_func):
                achievements[name] = {
                    'description': description,
                    'condition': condition_func,
                    'unlocked': False
                }
            
            def check_achievements(player_state):
                newly_unlocked = []
                for name, achievement in achievements.items():
                    if not achievement['unlocked'] and achievement['condition'](player_state):
                        achievement['unlocked'] = True
                        unlocked_achievements.append(name)
                        newly_unlocked.append(name)
                return newly_unlocked
            
            def get_unlocked_achievements():
                return unlocked_achievements.copy()
            
            return {
                'register_achievement': register_achievement,
                'check_achievements': check_achievements,
                'get_unlocked_achievements': get_unlocked_achievements
            }
        
        # Save system using closures to preserve state
        def create_save_system():
            save_slots = {}
            
            def save_game(slot_name, game_state):
                save_slots[slot_name] = {
                    'timestamp': datetime.now(),
                    'state': game_state.copy() if hasattr(game_state, 'copy') else game_state
                }
            
            def load_game(slot_name):
                if slot_name in save_slots:
                    return save_slots[slot_name]['state']
                return None
            
            def list_saves():
                return {name: data['timestamp'] for name, data in save_slots.items()}
            
            return {
                'save_game': save_game,
                'load_game': load_game,
                'list_saves': list_saves
            }
    </pre>
</div>

<hr/>

<h3>Common Mistakes</h3>

<b>Mistake 1: Unintended global variable modification</b>
<div style="background-color: #ffe6e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <pre>
        # WRONG - accidentally modifying global list
        inventory = ["sword", "shield"]
        
        def add_item(item):
            # This modifies the global list!
            inventory.append(item)  # No error, but modifies global
        
        add_item("potion")
        print(inventory)  # ['sword', 'shield', 'potion']
        
        # RIGHT - be explicit or create copy
        inventory = ["sword", "shield"]
        
        def add_item(item, inv=None):
            if inv is None:
                inv = inventory.copy()  # Work with copy
            inv.append(item)
            return inv
        
        new_inventory = add_item("potion")
        print(inventory)        # ['sword', 'shield'] (unchanged)
        print(new_inventory)    # ['sword', 'shield', 'potion']
    </pre>
</div>

<b>Mistake 2: Confusing local and global with same name</b>
<div style="background-color: #ffe6e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <pre>
        # WRONG - confusing behavior
        x = 10  # Global
        
        def confusing_function():
            print(x)    # This tries to print local x (not defined yet)
            x = 20      # This creates a local x
            print(x)    # Prints local x
        
        confusing_function()  # UnboundLocalError!
        
        # RIGHT - be clear about scope
        x = 10  # Global
        
        def clear_function():
            global x  # Explicitly use global
            print(x)  # 10 (global)
            x = 20    # Modifies global
            print(x)  # 20
        
        clear_function()
        print(x)  # 20 (global was modified)
        
        # OR use different names
        global_x = 10
        
        def better_function():
            local_x = 20  # Different name
            print(global_x)  # 10
            print(local_x)   # 20
    </pre>
</div>

<b>Mistake 3: Forgetting nonlocal in nested functions</b>
<div style="background-color: #ffe6e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <pre>
        # WRONG - trying to modify outer variable without nonlocal
        def outer():
            counter = 0
            
            def inner():
                counter += 1  # UnboundLocalError!
                return counter
            
            return inner
        
        # RIGHT - use nonlocal keyword
        def outer():
            counter = 0
            
            def inner():
                nonlocal counter  # Declare we're modifying outer variable
                counter += 1
                return counter
            
            return inner
        
        counter_func = outer()
        print(counter_func())  # 1
        print(counter_func())  # 2
        
        # ALTERNATIVE: Use mutable object
        def outer():
            counter = [0]  # List is mutable
            
            def inner():
                counter[0] += 1  # Can modify list contents
                return counter[0]
            
            return inner
        
        # This works because we're modifying the list, not reassigning
        # But using nonlocal is clearer for this purpose
    </pre>
</div>

<hr/>

<div class="assignment-box">
    <h4>Assignment: Bank Account Management System with Scope</h4>
    <p>Create a banking system that demonstrates all scope concepts:</p>
    
    <div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <b>Part 1: Account Factory with Closures</b><br/>
        - create_account(): Factory function that returns account object<br/>
        - Use closures to maintain account balance and transaction history<br/>
        - Implement deposit(), withdraw(), and get_balance() methods<br/>
        - Each account should have its own private state<br/><br/>
        
        <b>Part 2: Bank Management with Global Scope</b><br/>
        - BANK_NAME and INTEREST_RATE as global constants<br/>
        - active_accounts as global list (carefully managed)<br/>
        - Functions to open/close accounts that modify global state<br/>
        - Bank-wide statistics function<br/><br/>
        
        <b>Part 3: Nested Functions for Transactions</b><br/>
        - process_transaction(): Outer function with validation<br/>
        - validate_amount(): Inner function for amount checking<br/>
        - update_ledger(): Inner function for recording transactions<br/>
        - Use nonlocal to modify outer function variables<br/><br/>
        
        <b>Part 4: Advanced Features with Scope</b><br/>
        - create_joint_account(): Factory for accounts with multiple owners<br/>
        - implement_overdraft_protection(): Closure with credit limit<br/>
        - transaction_limiter(): Rate-limiting for transactions<br/>
        - account_history(): Generator function for transaction history<br/><br/>
        
        <b>Technical Requirements:</b><br/>
        1. Demonstrate all scope levels (L, E, G, B)<br/>
        2. Use global keyword for necessary global modifications<br/>
        3. Use nonlocal keyword for nested function communication<br/>
        4. Implement closures for stateful objects<br/>
        5. Show scope best practices and common pitfalls
    </div>
    
    <p><b>Bonus Challenge:</b> Create a loan system where each loan is a closure that calculates payments and tracks remaining balance, with the ability to apply early payments and calculate interest savings.</p>
    
    <div style="background-color: #e8f5e9; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <b>Example Structure:</b>
        <pre>
# Global bank configuration
BANK_NAME = "Python Bank"
INTEREST_RATE = 0.05
active_accounts = []  # Global list

def create_account(account_holder, initial_balance=0):
    """Factory function that creates bank accounts using closures"""
    balance = initial_balance
    transaction_history = []
    
    def deposit(amount):
        nonlocal balance
        # ... deposit logic
    
    def withdraw(amount):
        nonlocal balance
        # ... withdrawal logic
    
    def get_balance():
        return balance
    
    def get_history():
        return transaction_history.copy()
    
    # Update global state
    global active_accounts
    active_accounts.append(account_holder)
    
    return {
        'deposit': deposit,
        'withdraw': withdraw,
        'get_balance': get_balance,
        'get_history': get_history
    }
        </pre>
    </div>
</div>`
            },
            "4-4": {
                icon: "fa-infinity",
                title: "Recursive Functions",
                html: `<h1>Week 4, Day 4: Recursive Functions - Functions That Call Themselves</h1>
<p>Today we'll explore recursion - a powerful programming technique where functions call themselves to solve complex problems by breaking them down into simpler subproblems.</p>

<div class="analogy-box">
    <b>Analogy: Russian Matryoshka Dolls vs Infinite Mirror ü™Ü</b><br/>
    <ul style="margin-top: 10px;">
        <li><b>Recursive Function</b> = Matryoshka doll (smaller version of itself)</li>
        <li><b>Base Case</b> = Smallest doll (can't open further)</li>
        <b>Recursive Case</b> = Opening a doll to find smaller one</li>
        <b>Stack Overflow</b> = Too many dolls piled up</li>
        <b>Tail Recursion</b> = Handing doll directly without piling</li>
    </ul>
</div>

<h3>Key Topics</h3>
<ul>
    <li>Understanding Recursion Principles</li>
    <li>Base Cases and Recursive Cases</li>
    <li>Recursive vs Iterative Solutions</li>
    <li>Common Recursive Patterns and Algorithms</li>
</ul>

<h3>In-Depth Explanation</h3>

<b>a. The Fundamentals of Recursion</b>
<div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <pre>
        # What is recursion?
        # A function that calls itself to solve a smaller version of the same problem
        
        # Anatomy of a recursive function:
        def recursive_function(problem):
            # 1. BASE CASE: Simplest possible case (stopping condition)
            if problem is simple enough:
                return solution
            
            # 2. RECURSIVE CASE: Break problem into smaller subproblems
            smaller_problem = make_problem_smaller(problem)
            
            # 3. RECURSIVE CALL: Call itself with smaller problem
            sub_solution = recursive_function(smaller_problem)
            
            # 4. COMBINE: Combine sub-solutions to solve original problem
            return combine(sub_solution)
        
        # Classic example: Factorial
        # n! = n √ó (n-1) √ó (n-2) √ó ... √ó 1
        # 5! = 5 √ó 4 √ó 3 √ó 2 √ó 1 = 120
        
        def factorial_iterative(n):
            """Iterative solution to factorial"""
            result = 1
            for i in range(1, n + 1):
                result *= i
            return result
        
        def factorial_recursive(n):
            """Recursive solution to factorial"""
            # BASE CASE: 0! = 1 and 1! = 1
            if n == 0 or n == 1:
                return 1
            
            # RECURSIVE CASE: n! = n √ó (n-1)!
            return n * factorial_recursive(n - 1)
        
        print(factorial_iterative(5))  # 120
        print(factorial_recursive(5))  # 120
        
        # Visualizing the recursive calls for factorial(5):
        # factorial(5)
        # 5 * factorial(4)
        #     4 * factorial(3)
        #         3 * factorial(2)
        #             2 * factorial(1)
        #                 1  (base case)
        #             2 * 1 = 2
        #         3 * 2 = 6
        #     4 * 6 = 24
        # 5 * 24 = 120
        
        # Another classic: Fibonacci sequence
        # 0, 1, 1, 2, 3, 5, 8, 13, 21, 34, ...
        # Each number is sum of two preceding ones
        
        def fibonacci(n):
            """Return nth Fibonacci number"""
            # BASE CASES
            if n == 0:
                return 0
            if n == 1:
                return 1
            
            # RECURSIVE CASE
            return fibonacci(n - 1) + fibonacci(n - 2)
        
        print(f"Fibonacci(7) = {fibonacci(7)}")  # 13
    </pre>
</div>

<b>b. Understanding the Call Stack</b>
<div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <pre>
        # The Call Stack: How recursion works in memory
        
        # When a function calls itself, Python:
        # 1. Pushes current function call onto call stack
        # 2. Executes the new function call
        # 3. When function returns, pops from stack
        # 4. Continues execution from where it left off
        
        def countdown(n):
            """Demonstrate call stack with print statements"""
            print(f"Entering countdown({n})")
            
            if n <= 0:  # BASE CASE
                print("Base case reached!")
                print(f"Returning from countdown({n})")
                return
            
            # RECURSIVE CASE
            print(f"About to call countdown({n-1})")
            countdown(n - 1)
            
            print(f"Returned from countdown({n-1})")
            print(f"Exiting countdown({n})")
        
        print("Calling countdown(3):")
        countdown(3)
        # Output:
        # Calling countdown(3):
        # Entering countdown(3)
        # About to call countdown(2)
        # Entering countdown(2)
        # About to call countdown(1)
        # Entering countdown(1)
        # About to call countdown(0)
        # Entering countdown(0)
        # Base case reached!
        # Returning from countdown(0)
        # Returned from countdown(0)
        # Exiting countdown(1)
        # Returned from countdown(1)
        # Exiting countdown(2)
        # Returned from countdown(2)
        # Exiting countdown(3)
        
        # Visualizing the call stack for countdown(3):
        # 
        # STACK (grows downward):
        # ---------------------
        # countdown(0)  ‚Üê Base case, returns immediately
        # countdown(1)
        # countdown(2)
        # countdown(3)  ‚Üê Original call
        # ---------------------
        # MAIN PROGRAM
        
        # Recursive depth and stack overflow
        def infinite_recursion(n):
            """Dangerous: No base case!"""
            return infinite_recursion(n + 1)  # Never stops!
        
        # This would cause: RecursionError: maximum recursion depth exceeded
        # Python has a recursion limit (usually ~1000)
        
        import sys
        print(f"Python recursion limit: {sys.getrecursionlimit()}")
        
        # Safe recursion with depth limit
        def safe_recursive_function(n, depth=0, max_depth=100):
            """Recursive function with depth checking"""
            if depth > max_depth:
                raise RecursionError(f"Exceeded maximum depth of {max_depth}")
            
            # Base case
            if n <= 0:
                return 0
            
            # Recursive call with increased depth
            return n + safe_recursive_function(n - 1, depth + 1, max_depth)
        
        print(f"Sum of 1 to 100: {safe_recursive_function(100)}")
    </pre>
</div>

<b>Visual Recursion Flow:</b>
<div style="background-color: #f9f9f9; padding: 15px; margin: 10px 0; border-radius: 5px; text-align: center;">
    <table style="margin: 0 auto; border-collapse: collapse; width: 90%;">
        <tr>
            <th style="border: 2px solid #333; padding: 10px; background-color: #e0e0e0;">Step</th>
            <th style="border: 2px solid #333; padding: 10px; background-color: #e0e0e0;">Action</th>
            <th style="border: 2px solid #333; padding: 10px; background-color: #e0e0e0;">Stack State</th>
            <th style="border: 2px solid #333; padding: 10px; background-color: #e0e0e0;">What Happens</th>
        </tr>
        <tr>
            <td style="border: 1px solid #ccc; padding: 8px;">1</td>
            <td style="border: 1px solid #ccc; padding: 8px;">Call factorial(5)</td>
            <td style="border: 1px solid #ccc; padding: 8px; font-family: monospace;">[factorial(5)]</td>
            <td style="border: 1px solid #ccc; padding: 8px;">Initial call</td>
        </tr>
        <tr>
            <td style="border: 1px solid #ccc; padding: 8px;">2</td>
            <td style="border: 1px solid #ccc; padding: 8px;">Call factorial(4)</td>
            <td style="border: 1px solid #ccc; padding: 8px; font-family: monospace;">[factorial(5), factorial(4)]</td>
            <td style="border: 1px solid #ccc; padding: 8px;">Recursive call</td>
        </tr>
        <tr>
            <td style="border: 1px solid #ccc; padding: 8px;">3</td>
            <td style="border: 1px solid #ccc; padding: 8px;">Call factorial(3)</td>
            <td style="border: 1px solid #ccc; padding: 8px; font-family: monospace;">[factorial(5), factorial(4), factorial(3)]</td>
            <td style="border: 1px solid #ccc; padding: 8px;">Another recursive call</td>
        </tr>
        <tr>
            <td style="border: 1px solid #ccc; padding: 8px;">4</td>
            <td style="border: 1px solid #ccc; padding: 8px;">Reach base case factorial(1)</td>
            <td style="border: 1px solid #ccc; padding: 8px; font-family: monospace;">[factorial(5), factorial(4), factorial(3), factorial(2), factorial(1)]</td>
            <td style="border: 1px solid #ccc; padding: 8px;">Deepest call</td>
        </tr>
        <tr>
            <td style="border: 1px solid #ccc; padding: 8px;">5</td>
            <td style="border: 1px solid #ccc; padding: 8px;">Return from factorial(1)</td>
            <td style="border: 1px solid #ccc; padding: 8px; font-family: monospace;">[factorial(5), factorial(4), factorial(3), factorial(2)]</td>
            <td style="border: 1px solid #ccc; padding: 8px;">Start unwinding</td>
        </tr>
        <tr>
            <td style="border: 1px solid #ccc; padding: 8px;">6</td>
            <td style="border: 1px solid #ccc; padding: 8px;">Return from factorial(2)</td>
            <td style="border: 1px solid #ccc; padding: 8px; font-family: monospace;">[factorial(5), factorial(4), factorial(3)]</td>
            <td style="border: 1px solid #ccc; padding: 8px;">Continue unwinding</td>
        </tr>
        <tr>
            <td style="border: 1px solid #ccc; padding: 8px;">7</td>
            <td style="border: 1px solid #ccc; padding: 8px;">Return final result</td>
            <td style="border: 1px solid #ccc; padding: 8px; font-family: monospace;">[]</td>
            <td style="border: 1px solid #ccc; padding: 8px;">Stack empty, result computed</td>
        </tr>
    </table>
</div>

<b>c. Common Recursive Patterns</b>
<div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <pre>
        # Pattern 1: Divide and Conquer
        def sum_list(numbers):
            """Sum list using divide and conquer"""
            # BASE CASE: Empty list
            if not numbers:
                return 0
            
            # BASE CASE: Single element
            if len(numbers) == 1:
                return numbers[0]
            
            # DIVIDE: Split list in half
            mid = len(numbers) // 2
            left = numbers[:mid]
            right = numbers[mid:]
            
            # CONQUER: Recursively sum halves
            left_sum = sum_list(left)
            right_sum = sum_list(right)
            
            # COMBINE: Add results
            return left_sum + right_sum
        
        print(f"Sum of [1,2,3,4,5]: {sum_list([1,2,3,4,5])}")  # 15
        
        # Pattern 2: Tree/Graph Traversal
        class TreeNode:
            def __init__(self, value):
                self.value = value
                self.children = []
        
        def count_nodes(root):
            """Count all nodes in a tree (depth-first)"""
            if not root:
                return 0
            
            total = 1  # Count current node
            
            for child in root.children:
                total += count_nodes(child)
            
            return total
        
        # Pattern 3: Backtracking (exploring all possibilities)
        def generate_permutations(items):
            """Generate all permutations of items"""
            # BASE CASE: Empty or single item
            if len(items) <= 1:
                return [items]
            
            permutations = []
            
            for i in range(len(items)):
                current = items[i]
                remaining = items[:i] + items[i+1:]
                
                # Recursively generate permutations of remaining items
                for perm in generate_permutations(remaining):
                    permutations.append([current] + perm)
            
            return permutations
        
        print("Permutations of [1,2,3]:")
        for perm in generate_permutations([1, 2, 3]):
            print(perm)
        
        # Pattern 4: Recursive Search
        def binary_search(arr, target, low=0, high=None):
            """Binary search using recursion"""
            if high is None:
                high = len(arr) - 1
            
            # BASE CASE: Not found
            if low > high:
                return -1
            
            mid = (low + high) // 2
            
            # BASE CASE: Found
            if arr[mid] == target:
                return mid
            
            # RECURSIVE CASE: Search left or right half
            if target < arr[mid]:
                return binary_search(arr, target, low, mid - 1)
            else:
                return binary_search(arr, target, mid + 1, high)
        
        numbers = [1, 3, 5, 7, 9, 11, 13]
        print(f"Binary search for 7: index {binary_search(numbers, 7)}")  # 3
        print(f"Binary search for 8: index {binary_search(numbers, 8)}")  # -1
        
        # Pattern 5: Fractal Generation (conceptual)
        def draw_fractal(depth, size):
            """Conceptual fractal drawing function"""
            if depth == 0:
                draw_base_shape(size)
                return
            
            # Recursively draw smaller versions
            for angle in [0, 90, 180, 270]:
                rotate(angle)
                draw_fractal(depth - 1, size / 2)
    </pre>
</div>

<b>d. Recursive vs Iterative Solutions</b>
<div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <pre>
        # When to use recursion vs iteration?
        
        # Fibonacci: Recursive vs Iterative
        
        # 1. Naive Recursive Fibonacci (INEFFICIENT)
        def fib_recursive_naive(n):
            """Inefficient recursive Fibonacci - O(2^n) time"""
            if n <= 1:
                return n
            return fib_recursive_naive(n-1) + fib_recursive_naive(n-2)
        
        # Problem: Recalculates same values many times
        # fib(5) calls fib(4) and fib(3)
        # fib(4) calls fib(3) and fib(2) ‚Üê fib(3) calculated twice!
        
        # 2. Iterative Fibonacci (EFFICIENT)
        def fib_iterative(n):
            """Efficient iterative Fibonacci - O(n) time"""
            if n <= 1:
                return n
            
            a, b = 0, 1
            for _ in range(2, n + 1):
                a, b = b, a + b
            return b
        
        # 3. Memoized Recursive Fibonacci (EFFICIENT)
        def fib_memoized(n, memo=None):
            """Efficient recursive Fibonacci with memoization"""
            if memo is None:
                memo = {}
            
            # Check if already computed
            if n in memo:
                return memo[n]
            
            # Base cases
            if n <= 1:
                return n
            
            # Compute and store
            memo[n] = fib_memoized(n-1, memo) + fib_memoized(n-2, memo)
            return memo[n]
        
        # Compare performance
        import time
        
        def time_function(func, n, name):
            start = time.time()
            result = func(n)
            elapsed = time.time() - start
            print(f"{name}({n}) = {result}, time: {elapsed:.6f}s")
            return elapsed
        
        n = 35  # Large enough to see difference
        
        print(f"Comparing Fibonacci implementations for n={n}:")
        # WARNING: naive recursive is VERY slow for n=35
        # time1 = time_function(fib_recursive_naive, n, "Naive Recursive")
        time2 = time_function(fib_iterative, n, "Iterative")
        time3 = time_function(fib_memoized, n, "Memoized Recursive")
        
        # Factorial: Recursive vs Iterative
        def factorial_iterative(n):
            result = 1
            for i in range(1, n + 1):
                result *= i
            return result
        
        def factorial_recursive(n):
            if n <= 1:
                return 1
            return n * factorial_recursive(n - 1)
        
        # Tail Recursion (conceptual - Python doesn't optimize it)
        def factorial_tail_recursive(n, accumulator=1):
            """Tail recursive factorial"""
            if n <= 1:
                return accumulator
            return factorial_tail_recursive(n - 1, accumulator * n)
        
        # In languages with tail call optimization, this would be efficient
        # Python doesn't have TCO, so iterative is still better
        
        # When to choose recursion:
        # 1. Problem has natural recursive structure (trees, graphs)
        # 2. Solution is clearer recursively
        # 3. Depth is limited and known
        
        # When to choose iteration:
        # 1. Performance is critical
        # 2. Deep recursion might cause stack overflow
        # 3. Simple loops suffice
        
        # Converting recursion to iteration (using stack)
        def factorial_iterative_with_stack(n):
            """Simulate recursion with explicit stack"""
            stack = []
            result = 1
            
            # Push frames onto stack
            while n > 1:
                stack.append(n)
                n -= 1
            
            # Process stack (like returning from recursive calls)
            while stack:
                result *= stack.pop()
            
            return result
        
        print(f"5! using stack simulation: {factorial_iterative_with_stack(5)}")
    </pre>
</div>

<b>e. Advanced Recursive Algorithms</b>
<div style="background-color: #f9f9f9; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <pre>
        # 1. Tower of Hanoi
        def tower_of_hanoi(n, source, target, auxiliary):
            """
            Solve Tower of Hanoi puzzle.
            
            Args:
                n: Number of disks
                source: Source peg
                target: Target peg
                auxiliary: Auxiliary peg
            """
            if n == 1:
                print(f"Move disk 1 from {source} to {target}")
                return
            
            # Move n-1 disks from source to auxiliary
            tower_of_hanoi(n-1, source, auxiliary, target)
            
            # Move nth disk from source to target
            print(f"Move disk {n} from {source} to {target}")
            
            # Move n-1 disks from auxiliary to target
            tower_of_hanoi(n-1, auxiliary, target, source)
        
        print("Tower of Hanoi with 3 disks:")
        tower_of_hanoi(3, 'A', 'C', 'B')
        
        # 2. Merge Sort (Divide and Conquer)
        def merge_sort(arr):
            """Recursive merge sort"""
            # BASE CASE: Array of 0 or 1 elements is already sorted
            if len(arr) <= 1:
                return arr
            
            # DIVIDE: Split array in half
            mid = len(arr) // 2
            left = arr[:mid]
            right = arr[mid:]
            
            # CONQUER: Recursively sort halves
            left_sorted = merge_sort(left)
            right_sorted = merge_sort(right)
            
            # COMBINE: Merge sorted halves
            return merge(left_sorted, right_sorted)
        
        def merge(left, right):
            """Merge two sorted arrays"""
            result = []
            i = j = 0
            
            while i < len(left) and j < len(right):
                if left[i] <= right[j]:
                    result.append(left[i])
                    i += 1
                else:
                    result.append(right[j])
                    j += 1
            
            # Add remaining elements
            result.extend(left[i:])
            result.extend(right[j:])
            
            return result
        
        unsorted = [38, 27, 43, 3, 9, 82, 10]
        sorted_arr = merge_sort(unsorted)
        print(f"Merge sort: {unsorted} -> {sorted_arr}")
        
        # 3. Quick Sort (Divide and Conquer)
        def quick_sort(arr):
            """Recursive quick sort"""
            # BASE CASE
            if len(arr) <= 1:
                return arr
            
            # Choose pivot (simplified: first element)
            pivot = arr[0]
            
            # PARTITION: Divide into elements less than and greater than pivot
            less = [x for x in arr[1:] if x <= pivot]
            greater = [x for x in arr[1:] if x > pivot]
            
            # CONQUER: Recursively sort partitions
            less_sorted = quick_sort(less)
            greater_sorted = quick_sort(greater)
            
            # COMBINE: Concatenate results with pivot in middle
            return less_sorted + [pivot] + greater_sorted
        
        unsorted = [64, 34, 25, 12, 22, 11, 90]
        sorted_arr = quick_sort(unsorted)
        print(f"Quick sort: {unsorted} -> {sorted_arr}")
        
        # 4. Binary Tree Operations
        class BinaryTreeNode:
            def __init__(self, value):
                self.value = value
                self.left = None
                self.right = None
        
        def inorder_traversal(node):
            """Recursive inorder traversal (Left, Root, Right)"""
            if node is None:
                return []
            
            result = []
            result.extend(inorder_traversal(node.left))
            result.append(node.value)
            result.extend(inorder_traversal(node.right))
            
            return result
        
        # Create a sample binary tree
        root = BinaryTreeNode(5)
        root.left = BinaryTreeNode(3)
        root.right = BinaryTreeNode(8)
        root.left.left = BinaryTreeNode(1)
        root.left.right = BinaryTreeNode(4)
        root.right.left = BinaryTreeNode(7)
        root.right.right = BinaryTreeNode(9)
        
        print(f"Inorder traversal: {inorder_traversal(root)}")
        
        # 5. Nested List Flattening
        def flatten_nested_list(nested):
            """Recursively flatten arbitrarily nested lists"""
            result = []
            
            for item in nested:
                if isinstance(item, list):
                    # Recursive case: item is a list
                    result.extend(flatten_nested_list(item))
                else:
                    # Base case: item is not a list
                    result.append(item)
            
            return result
        
        deeply_nested = [1, [2, [3, [4, 5], 6], 7], 8, [9, 10]]
        flattened = flatten_nested_list(deeply_nested)
        print(f"Flattened: {deeply_nested} -> {flattened}")
    </pre>
</div>

<hr/>

<h3>Hands-On Exercise: File System Navigator</h3>
<b>Task:</b> Build a recursive file system navigator that demonstrates recursion on tree-like structures<br/><br/>

<b>Requirements:</b>
<div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
    1. Navigate directory trees recursively<br/>
    2. Calculate directory statistics (size, file count)<br/>
    3. Search for files with specific criteria<br/>
    4. Generate directory structure visualization<br/>
</div>

<b>Python Implementation:</b>
<div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <pre>
        # File System Navigator using Recursion
        
        import os
        from pathlib import Path
        
        # 1. Directory Tree Navigation
        def list_directory_contents(path, depth=0, max_depth=None):
            """
            Recursively list directory contents with indentation.
            
            Args:
                path: Directory path
                depth: Current recursion depth
                max_depth: Maximum depth to traverse (None for unlimited)
            """
            # Base case: check depth limit
            if max_depth is not None and depth > max_depth:
                return
            
            try:
                entries = os.listdir(path)
            except PermissionError:
                print("  " * depth + f"[Permission Denied: {path}]")
                return
            except FileNotFoundError:
                print("  " * depth + f"[Not Found: {path}]")
                return
            
            for entry in sorted(entries):
                full_path = os.path.join(path, entry)
                
                # Indentation based on depth
                indent = "  " * depth
                
                if os.path.isdir(full_path):
                    print(f"{indent}üìÅ {entry}/")
                    # Recursive case: it's a directory
                    list_directory_contents(full_path, depth + 1, max_depth)
                else:
                    print(f"{indent}üìÑ {entry}")
        
        # 2. Calculate Directory Size
        def calculate_directory_size(path):
            """
            Recursively calculate total size of directory.
            
            Args:
                path: Directory path
            
            Returns:
                int: Total size in bytes
            """
            total_size = 0
            
            try:
                entries = os.listdir(path)
            except (PermissionError, FileNotFoundError):
                return 0
            
            for entry in entries:
                full_path = os.path.join(path, entry)
                
                if os.path.isdir(full_path):
                    # Recursive case: directory
                    total_size += calculate_directory_size(full_path)
                else:
                    # Base case: file
                    try:
                        total_size += os.path.getsize(full_path)
                    except OSError:
                        continue  # Skip files we can't access
            
            return total_size
        
        def format_size(size_bytes):
            """Format bytes into human-readable size"""
            for unit in ['B', 'KB', 'MB', 'GB', 'TB']:
                if size_bytes < 1024.0:
                    return f"{size_bytes:.2f} {unit}"
                size_bytes /= 1024.0
            return f"{size_bytes:.2f} PB"
        
        # 3. Search for Files
        def find_files(path, search_pattern=None, search_text=None, 
                      file_type=None, min_size=0, max_size=None):
            """
            Recursively search for files matching criteria.
            
            Args:
                path: Starting directory
                search_pattern: Filename pattern (e.g., "*.py")
                search_text: Text content to search for
                file_type: File extension filter
                min_size: Minimum file size in bytes
                max_size: Maximum file size in bytes
            
            Returns:
                list: Matching file paths
            """
            matches = []
            
            try:
                entries = os.listdir(path)
            except (PermissionError, FileNotFoundError):
                return matches
            
            for entry in entries:
                full_path = os.path.join(path, entry)
                
                if os.path.isdir(full_path):
                    # Recursive case: search subdirectory
                    matches.extend(
                        find_files(full_path, search_pattern, search_text, 
                                  file_type, min_size, max_size)
                    )
                else:
                    # Base case: check if file matches criteria
                    if not matches_criteria(full_path, search_pattern, 
                                          search_text, file_type, 
                                          min_size, max_size):
                        continue
                    
                    matches.append(full_path)
            
            return matches
        
        def matches_criteria(filepath, pattern=None, text=None, 
                           file_type=None, min_size=0, max_size=None):
            """Check if file matches all given criteria"""
            # Check pattern
            if pattern and not Path(filepath).match(pattern):
                return False
            
            # Check file type
            if file_type:
                actual_type = Path(filepath).suffix.lower()
                if actual_type != file_type.lower():
                    return False
            
            # Check size
            try:
                size = os.path.getsize(filepath)
                if size < min_size:
                    return False
                if max_size and size > max_size:
                    return False
            except OSError:
                return False
            
            # Check text content (if specified)
            if text:
                try:
                    with open(filepath, 'r', encoding='utf-8', errors='ignore') as f:
                        content = f.read()
                        if text not in content:
                            return False
                except (IOError, UnicodeDecodeError):
                    return False
            
            return True
        
        # 4. Generate Directory Tree Visualization
        def generate_tree_structure(path, prefix="", is_last=True):
            """
            Generate ASCII tree structure of directory.
            
            Args:
                path: Directory path
                prefix: Current prefix for indentation
                is_last: Whether this is the last item at this level
            
            Returns:
                str: ASCII tree representation
            """
            result = []
            
            # Get directory name for display
            dir_name = os.path.basename(path) if path != "." else "."
            connector = "‚îî‚îÄ‚îÄ " if is_last else "‚îú‚îÄ‚îÄ "
            result.append(prefix + connector + dir_name + "/")
            
            try:
                entries = sorted(os.listdir(path))
            except (PermissionError, FileNotFoundError):
                result.append(prefix + "    [Access Denied]")
                return "\n".join(result)
            
            # Prepare new prefix for next level
            new_prefix = prefix + ("    " if is_last else "‚îÇ   ")
            
            for i, entry in enumerate(entries):
                full_path = os.path.join(path, entry)
                is_last_item = (i == len(entries) - 1)
                
                if os.path.isdir(full_path):
                    # Recursive case: directory
                    subtree = generate_tree_structure(full_path, new_prefix, is_last_item)
                    result.append(subtree)
                else:
                    # Base case: file
                    connector = "‚îî‚îÄ‚îÄ " if is_last_item else "‚îú‚îÄ‚îÄ "
                    result.append(new_prefix + connector + entry)
            
            return "\n".join(result)
        
        # 5. Advanced: Find Duplicate Files
        def find_duplicate_files(path, hash_function="md5"):
            """
            Recursively find duplicate files by content hash.
            
            Args:
                path: Starting directory
                hash_function: Hash algorithm to use
            
            Returns:
                dict: Hash to list of file paths
            """
            import hashlib
            
            hash_to_files = {}
            
            def calculate_file_hash(filepath):
                """Calculate hash of file content"""
                hasher = hashlib.new(hash_function)
                
                try:
                    with open(filepath, 'rb') as f:
                        # Read in chunks to handle large files
                        for chunk in iter(lambda: f.read(4096), b""):
                            hasher.update(chunk)
                    return hasher.hexdigest()
                except (IOError, PermissionError):
                    return None
            
            def scan_directory(current_path):
                """Recursive directory scanner"""
                try:
                    entries = os.listdir(current_path)
                except (PermissionError, FileNotFoundError):
                    return
                
                for entry in entries:
                    full_path = os.path.join(current_path, entry)
                    
                    if os.path.isdir(full_path):
                        # Recursive case: scan subdirectory
                        scan_directory(full_path)
                    else:
                        # Base case: process file
                        file_hash = calculate_file_hash(full_path)
                        if file_hash:
                            if file_hash not in hash_to_files:
                                hash_to_files[file_hash] = []
                            hash_to_files[file_hash].append(full_path)
            
            # Start recursive scan
            scan_directory(path)
            
            # Return only duplicates (files with same hash)
            duplicates = {hash_val: files for hash_val, files in hash_to_files.items() 
                         if len(files) > 1}
            
            return duplicates
        
        # Test the file system navigator
        def demonstrate_file_system_navigation():
            """Demonstrate all file system functions"""
            current_dir = "."
            
            print("=" * 60)
            print("FILE SYSTEM NAVIGATOR DEMONSTRATION")
            print("=" * 60)
            
            # 1. List directory contents (limited depth)
            print("\n1. Directory Contents (max depth 2):")
            print("-" * 40)
            list_directory_contents(current_dir, max_depth=2)
            
            # 2. Calculate directory size
            print("\n2. Directory Size Calculation:")
            print("-" * 40)
            total_size = calculate_directory_size(current_dir)
            print(f"Total size: {format_size(total_size)}")
            
            # 3. Generate tree structure
            print("\n3. Directory Tree Structure:")
            print("-" * 40)
            tree = generate_tree_structure(current_dir)
            print(tree)
            
            # 4. Search for Python files
            print("\n4. Search for Python files (*.py):")
            print("-" * 40)
            python_files = find_files(current_dir, search_pattern="*.py")
            for i, filepath in enumerate(python_files[:5], 1):  # Show first 5
                print(f"{i}. {filepath}")
            if len(python_files) > 5:
                print(f"... and {len(python_files) - 5} more")
            
            # 5. Search for files containing "def"
            print("\n5. Search for files containing 'def':")
            print("-" * 40)
            def_files = find_files(current_dir, search_text="def")
            for i, filepath in enumerate(def_files[:3], 1):  # Show first 3
                print(f"{i}. {filepath}")
            if len(def_files) > 3:
                print(f"... and {len(def_files) - 3} more")
            
            print("\n" + "=" * 60)
        
        # Run demonstration
        if __name__ == "__main__":
            demonstrate_file_system_navigation()
    </pre>
</div>

<b>Challenge: Advanced Recursive File Operations</b>
<div style="background-color: #fff0e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <b>Step 1:</b> Implement a file synchronizer that compares two directories recursively<br/>
    <b>Step 2:</b> Create a backup system with incremental backups<br/>
    <b>Step 3:</b> Build a file organizer that sorts files by type/date<br/>
    <b>Step 4:</b> Implement a disk usage analyzer with visualization<br/>
    
    <pre style="margin-top: 10px;">
        # File synchronizer
        def synchronize_directories(source, target, dry_run=True):
            """
            Recursively synchronize two directories.
            """
            changes = []
            
            def sync(current_source, current_target):
                # Get contents of both directories
                try:
                    source_items = set(os.listdir(current_source))
                    target_items = set(os.listdir(current_target))
                except FileNotFoundError:
                    # Create target directory if it doesn't exist
                    if not dry_run:
                        os.makedirs(current_target)
                    changes.append(f"Created directory: {current_target}")
                    source_items = set(os.listdir(current_source))
                    target_items = set()
                
                # Items only in source (need to copy)
                to_copy = source_items - target_items
                for item in to_copy:
                    source_path = os.path.join(current_source, item)
                    target_path = os.path.join(current_target, item)
                    
                    if os.path.isdir(source_path):
                        # Recursive case: directory
                        if not dry_run:
                            os.makedirs(target_path)
                        changes.append(f"Created directory: {target_path}")
                        sync(source_path, target_path)
                    else:
                        # Base case: file
                        if not dry_run:
                            import shutil
                            shutil.copy2(source_path, target_path)
                        changes.append(f"Copied: {source_path} -> {target_path}")
                
                # Items only in target (need to delete)
                to_delete = target_items - source_items
                for item in to_delete:
                    target_path = os.path.join(current_target, item)
                    if not dry_run:
                        if os.path.isdir(target_path):
                            shutil.rmtree(target_path)
                        else:
                            os.remove(target_path)
                    changes.append(f"Deleted: {target_path}")
            
            sync(source, target)
            return changes
        
        # Disk usage analyzer
        def analyze_disk_usage(path, depth=0):
            """
            Analyze disk usage and generate hierarchical report.
            """
            usage_info = {
                'path': path,
                'size': 0,
                'file_count': 0,
                'dir_count': 0,
                'children': []
            }
            
            try:
                entries = os.listdir(path)
            except (PermissionError, FileNotFoundError):
                return usage_info
            
            for entry in entries:
                full_path = os.path.join(path, entry)
                
                if os.path.isdir(full_path):
                    # Recursive case: directory
                    child_info = analyze_disk_usage(full_path, depth + 1)
                    usage_info['children'].append(child_info)
                    usage_info['size'] += child_info['size']
                    usage_info['file_count'] += child_info['file_count']
                    usage_info['dir_count'] += child_info['dir_count'] + 1
                else:
                    # Base case: file
                    try:
                        file_size = os.path.getsize(full_path)
                        usage_info['size'] += file_size
                        usage_info['file_count'] += 1
                    except OSError:
                        pass
            
            return usage_info
    </pre>
</div>

<hr/>

<h3>Common Mistakes</h3>

<b>Mistake 1: Missing or incorrect base case</b>
<div style="background-color: #ffe6e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <pre>
        # WRONG: No base case (infinite recursion)
        def countdown_bad(n):
            print(n)
            return countdown_bad(n - 1)  # Never stops!
        
        # WRONG: Base case never reached
        def factorial_bad(n):
            if n == 0:  # Base case
                return 1
            return n * factorial_bad(n)  # Calls with same n!
            # Should be factorial_bad(n - 1)
        
        # RIGHT: Proper base case
        def countdown_good(n):
            if n <= 0:  # Base case
                print("Blastoff!")
                return
            print(n)
            countdown_good(n - 1)  # Progress toward base case
        
        # Common base case patterns:
        # - Empty list/string: if not items: return base_value
        # - Single element: if len(items) == 1: return items[0]
        # - Zero/number: if n == 0: return 1
        # - Node is None: if node is None: return
    </pre>
</div>

<b>Mistake 2: Not making progress toward base case</b>
<div style="background-color: #ffe6e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <pre>
        # WRONG: Doesn't reduce problem size
        def process_list_bad(items, index=0):
            if index >= len(items):
                return
            
            # Process current item...
            print(items[index])
            
            # Recursive call with same index!
            process_list_bad(items, index)  # Infinite recursion!
        
        # RIGHT: Make progress toward base case
        def process_list_good(items, index=0):
            if index >= len(items):  # Base case
                return
            
            # Process current item
            print(items[index])
            
            # Recursive call with increased index
            process_list_good(items, index + 1)  # Progress!
        
        # Ensure recursive calls move toward base case:
        # - Decrement count: func(n-1)
        # - Increment index: func(index+1)
        # - Reduce list size: func(list[1:])
        # - Move to child: func(node.left)
    </pre>
</div>

<b>Mistake 3: Exponential time complexity (repeated calculations)</b>
<div style="background-color: #ffe6e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <pre>
        # WRONG: Naive Fibonacci (O(2^n) time)
        def fib_naive(n):
            if n <= 1:
                return n
            return fib_naive(n-1) + fib_naive(n-2)
        
        # Problem: Calculates same values many times
        # fib(5) calls fib(4) and fib(3)
        # fib(4) calls fib(3) and fib(2) ‚Üê fib(3) calculated twice!
        # This gets exponentially worse for larger n
        
        # RIGHT: Memoized Fibonacci (O(n) time)
        def fib_memo(n, memo=None):
            if memo is None:
                memo = {}
            
            if n in memo:
                return memo[n]  # Reuse calculated value
            
            if n <= 1:
                return n
            
            memo[n] = fib_memo(n-1, memo) + fib_memo(n-2, memo)
            return memo[n]
        
        # BETTER: Iterative Fibonacci (O(n) time, O(1) space)
        def fib_iterative(n):
            if n <= 1:
                return n
            
            a, b = 0, 1
            for _ in range(2, n + 1):
                a, b = b, a + b
            return b
        
        # When recursion leads to repeated calculations:
        # 1. Use memoization (cache results)
        # 2. Consider dynamic programming
        # 3. Convert to iterative solution
    </pre>
</div>

<hr/>

<div class="assignment-box">
    <h4>Assignment: Maze Solver with Recursive Backtracking</h4>
    <p>Create a maze solver using recursive backtracking algorithm:</p>
    
    <div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <b>Part 1: Maze Representation and Generation</b><br/>
        - Represent maze as 2D grid (0=path, 1=wall, 2=start, 3=end)<br/>
        - Generate random maze using recursive division<br/>
        - Validate maze (ensure start and end are connected)<br/>
        - Display maze with ASCII art<br/><br/>
        
        <b>Part 2: Recursive Maze Solver</b><br/>
        - Implement depth-first search with backtracking<br/>
        - Mark visited cells to avoid cycles<br/>
        - Handle dead ends by backtracking<br/>
        - Return solution path if found<br/><br/>
        
        <b>Part 3: Multiple Solution Finder</b><br/>
        - Find all possible paths from start to end<br/>
        - Compare path lengths<br/>
        - Find shortest path using recursion<br/>
        - Visualize different solutions<br/><br/>
        
        <b>Part 4: Advanced Maze Features</b><br/>
        - Add teleport portals that jump to other locations<br/>
        - Implement keys and doors (need key to open door)<br/>
        - Add movable blocks that can be pushed<br/>
        - Create recursive maze generator with multiple algorithms<br/><br/>
        
        <b>Technical Requirements:</b><br/>
        1. Use recursion for all maze operations<br/>
        2. Implement proper base cases (reached end, hit wall)<br/>
        3. Use backtracking to explore alternative paths<br/>
        4. Handle large mazes with recursion depth limits<br/>
        5. Visualize the recursive search process
    </div>
    
    <p><b>Bonus Challenge:</b> Create a 3D maze solver that navigates multiple levels with stairs/elevators between floors.</p>
    
    <div style="background-color: #e8f5e9; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <b>Example Maze Solver Structure:</b>
        <pre>
def solve_maze(maze, row, col, visited, path):
    """
    Recursively solve maze using backtracking.
    
    Args:
        maze: 2D list representing maze
        row, col: Current position
        visited: Set of visited positions
        path: Current solution path
    
    Returns:
        list: Solution path if found, None otherwise
    """
    # Base cases
    if not is_valid_position(maze, row, col):
        return None
    
    if is_wall(maze, row, col):
        return None
    
    if (row, col) in visited:
        return None
    
    if is_end(maze, row, col):
        return path + [(row, col)]
    
    # Mark current position
    visited.add((row, col))
    current_path = path + [(row, col)]
    
    # Try all four directions (recursive cases)
    directions = [(-1, 0), (1, 0), (0, -1), (0, 1)]  # Up, Down, Left, Right
    
    for dr, dc in directions:
        new_row, new_col = row + dr, col + dc
        solution = solve_maze(maze, new_row, new_col, visited, current_path)
        
        if solution:
            return solution
    
    # Backtrack: no solution from this position
    visited.remove((row, col))
    return None
        </pre>
    </div>
</div>`
            },

            "5-1": {
                icon: "fa-code",
                title: "Level 1 Project Kickoff - Banking System Console",
                html: `<h1>Week 5, Day 1: Project Kickoff - Building a Banking System Console</h1>
    <p>Welcome to your first major project! Today we'll combine everything from Weeks 1-4 into a functional banking system.</p>
    
    <div class="analogy-box">
        <b>Analogy: Building Your First Robot ü§ñ</b><br/>
        <ul style="margin-top: 10px;">
            <li><b>Variables</b> = The robot's memory (knows your balance)</li>
            <li><b>Functions</b> = The robot's skills (can deposit, withdraw)</li>
            <li><b>Loops</b> = The robot's routine (keeps running all day)</li>
            <li><b>Conditionals</b> = The robot's decision-making (checks if you have enough money)</li>
        </ul>
    </div>

    <h3>Project Overview</h3>
    <div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <b>Project:</b> Banking System Console Application<br/>
        <b>Duration:</b> 5 days (Week 5)<br/>
        <b>Goal:</b> Apply all core programming concepts<br/>
        <b>Tech Stack:</b> Python (or language of choice)<br/>
        <b>File Structure:</b> Single file to start
    </div>

    <h3>Core Requirements</h3>
    <table border="1" cellpadding="10" cellspacing="0" style="width: 100%; margin: 15px 0; border-collapse: collapse;">
        <thead>
            <tr style="background-color: #4a6fa5; color: white;">
                <th>Feature</th>
                <th>Required Concepts</th>
                <th>Difficulty</th>
                <th>Estimated Lines</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><b>User Login</b></td>
                <td>Variables, Input/Output</td>
                <td>‚≠ê‚òÜ‚òÜ‚òÜ‚òÜ</td>
                <td>15-20</td>
            </tr>
            <tr>
                <td><b>Balance Check</b></td>
                <td>Variables, Functions</td>
                <td>‚≠ê‚òÜ‚òÜ‚òÜ‚òÜ</td>
                <td>10-15</td>
            </tr>
            <tr>
                <td><b>Deposit Money</b></td>
                <td>Functions, Math Operators</td>
                <td>‚≠ê‚≠ê‚òÜ‚òÜ‚òÜ</td>
                <td>20-25</td>
            </tr>
            <tr>
                <td><b>Withdraw Money</b></td>
                <td>Conditionals, Validation</td>
                <td>‚≠ê‚≠ê‚≠ê‚òÜ‚òÜ</td>
                <td>30-35</td>
            </tr>
            <tr>
                <td><b>Transaction History</b></td>
                <td>Lists, Loops</td>
                <td>‚≠ê‚≠ê‚≠ê‚≠ê‚òÜ</td>
                <td>40-50</td>
            </tr>
            <tr>
                <td><b>Main Menu Loop</b></td>
                <td>While Loops, Boolean Logic</td>
                <td>‚≠ê‚≠ê‚≠ê‚òÜ‚òÜ</td>
                <td>25-30</td>
            </tr>
        </tbody>
    </table>

    <h3>Step-by-Step Implementation Guide</h3>
    
    <b>Step 1: Project Setup</b>
    <div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
# banking_system.py

"""
BANKING SYSTEM CONSOLE
Author: [Your Name]
Date: [Today's Date]
Description: A console-based banking application
"""

def main():
    print("=" * 50)
    print("WELCOME TO PYTHON BANK")
    print("=" * 50)
    
if __name__ == "__main__":
    main()
        </pre>
    </div>

    <b>Step 2: Initialize Core Variables</b>
    <div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
# Global variables (simulating a database)
current_balance = 1000.00  # Starting balance
transaction_history = []   # List to store transactions
logged_in = False          # Login status
pin = "1234"               # Simple PIN (in real app, NEVER store like this!)

# Sample transaction format
# transaction = {
#     "date": "2024-01-15",
#     "type": "deposit",
#     "amount": 500.00,
#     "balance_after": 1500.00
# }
        </pre>
    </div>

    <b>Step 3: Create the Login System</b>
    <div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
def login():
    """Handle user login with PIN verification"""
    global logged_in
    attempts = 3
    
    print(" üîê LOGIN SCREEN")
    print("-" * 30)
    
    while attempts > 0:
        entered_pin = input("Enter your 4-digit PIN: ")
        
        if entered_pin == pin:
            logged_in = True
            print("‚úÖ Login successful! Welcome back.")
            return True
        else:
            attempts -= 1
            if attempts > 0:
                print(f"‚ùå Incorrect PIN. {attempts} attempts remaining.")
            else:
                print("üö´ Account locked. Please contact customer service.")
                return False
    
    return False
        </pre>
    </div>

    <b>Step 4: Design the Main Menu</b>
    <div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
def display_menu():
    """Show the main banking menu"""
    print(" " + "=" * 40)
    print("MAIN MENU")
    print("=" * 40)
    print("1. üìä Check Balance")
    print("2. üí∞ Deposit Money")
    print("3. üèß Withdraw Money")
    print("4. üìú View Transaction History")
    print("5. üîê Change PIN")
    print("6. üö™ Logout & Exit")
    print("=" * 40)
    
    choice = input("Select an option (1-6): ")
    return choice
        </pre>
    </div>

    <h3>Today's Focus: Building Core Functions</h3>
    
    <b>Function 1: Check Balance</b>
    <div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
def check_balance():
    """Display current account balance"""
    global current_balance
    
    print(" " + "=" * 40)
    print("ACCOUNT BALANCE")
    print("=" * 40)
    print(f"üí∞ Current Balance: \\\${current_balance:,.2f}")
    print("=" * 40)
    
    # Add to transaction history
    from datetime import datetime
    transaction_history.append({
        "date": datetime.now().strftime("%Y-%m-%d %H:%M:%S"),
        "type": "balance_check",
        "amount": 0.00,
        "balance_after": current_balance
    })
        </pre>
    </div>

    <b>Function 2: Deposit Money</b>
    <div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
def deposit_money():
    """Handle money deposits with validation"""
    global current_balance
    
    print(" " + "=" * 40)
    print("MONEY DEPOSIT")
    print("=" * 40)
    
    try:
        amount = float(input("Enter deposit amount: $"))
        
        if amount <= 0:
            print("‚ùå Amount must be positive.")
            return
        
        # Confirm deposit
        confirm = input(f"Confirm deposit of \\\${amount:,.2f}? (yes/no): ").lower()
        
        if confirm == 'yes':
            current_balance += amount
            
            # Record transaction
            from datetime import datetime
            transaction_history.append({
                "date": datetime.now().strftime("%Y-%m-%d %H:%M:%S"),
                "type": "deposit",
                "amount": amount,
                "balance_after": current_balance
            })
            
            print(f"‚úÖ Deposit successful! New balance: \\\${current_balance:,.2f}")
        else:
            print("‚ùå Deposit cancelled.")
            
    except ValueError:
        print("‚ùå Invalid amount. Please enter numbers only.")
        </pre>
    </div>

    <h3>Visual Flowchart: Banking System Logic</h3>
    <div style="background-color: #fff0e6; padding: 15px; margin: 10px 0; border-radius: 5px; font-family: monospace;">
        <b>System Flow:</b><br/>
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê<br/>
        ‚îÇ      Program Start          ‚îÇ<br/>
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò<br/>
                      ‚îÇ<br/>
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê<br/>
        ‚îÇ      Display Welcome        ‚îÇ<br/>
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò<br/>
                      ‚îÇ<br/>
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê<br/>
        ‚îÇ      Login Screen           ‚îÇ<br/>
        ‚îÇ   ‚îú‚îÄ‚îÄ Success ‚Üí Continue    ‚îÇ<br/>
        ‚îÇ   ‚îî‚îÄ‚îÄ Fail (3x) ‚Üí Exit      ‚îÇ<br/>
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò<br/>
                      ‚îÇ<br/>
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê<br/>
        ‚îÇ      Main Menu Loop         ‚îÇ<br/>
        ‚îÇ   ‚îú‚îÄ‚îÄ Option 1: Balance     ‚îÇ<br/>
        ‚îÇ   ‚îú‚îÄ‚îÄ Option 2: Deposit     ‚îÇ<br/>
        ‚îÇ   ‚îú‚îÄ‚îÄ Option 3: Withdraw    ‚îÇ<br/>
        ‚îÇ   ‚îú‚îÄ‚îÄ Option 4: History     ‚îÇ<br/>
        ‚îÇ   ‚îú‚îÄ‚îÄ Option 5: Change PIN  ‚îÇ<br/>
        ‚îÇ   ‚îî‚îÄ‚îÄ Option 6: Exit        ‚îÇ<br/>
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò<br/>
                      ‚îÇ<br/>
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê<br/>
        ‚îÇ   Return to Menu or Exit    ‚îÇ<br/>
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
    </div>

    <h3>Error Handling Examples</h3>
    
    <b>Scenario: Invalid Input Handling</b>
    <div style="background-color: #ffe6e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
# BAD CODE - Crashes on invalid input
amount = float(input("Enter amount: "))  # Crashes if user types "abc"

# GOOD CODE - Handles errors gracefully
def get_valid_amount(prompt):
    while True:
        try:
            value = float(input(prompt))
            if value > 0:
                return value
            else:
                print("Amount must be positive. Try again.")
        except ValueError:
            print("Invalid input. Please enter a number.")
        </pre>
    </div>

    <h3>Hands-On Exercise: Build the Withdrawal Function</h3>
    
    <b>Task:</b> Create the withdraw_money() function with these features:
    
    <div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <b>Requirements:</b><br/>
        1. Check if user has sufficient balance<br/>
        2. Validate input is a positive number<br/>
        3. Confirm withdrawal with user<br/>
        4. Update balance if confirmed<br/>
        5. Record transaction in history<br/>
        6. Handle insufficient funds gracefully<br/><br/>
        
        <b>Starter Code:</b>
        <pre>
def withdraw_money():
    global current_balance
    
    print(" " + "=" * 40)
    print("MONEY WITHDRAWAL")
    print("=" * 40)
    
    # TODO: Add your code here
    # Hint: You'll need:
    # - Input validation (try/except)
    # - Balance check (if current_balance >= amount)
    # - Confirmation from user
    # - Update current_balance
    # - Add to transaction_history
        </pre>
    </div>

    <h3>Code Organization Tips</h3>
    <table border="1" cellpadding="10" cellspacing="0" style="width: 100%; margin: 15px 0; border-collapse: collapse;">
        <thead>
            <tr style="background-color: #2c3e50; color: white;">
                <th>Section</th>
                <th>What Goes Here</th>
                <th>Example</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><b>Imports</b></td>
                <td>All import statements</td>
                <td><code>from datetime import datetime</code></td>
            </tr>
            <tr>
                <td><b>Global Variables</b></td>
                <td>Variables used across functions</td>
                <td><code>current_balance = 1000.00</code></td>
            </tr>
            <tr>
                <td><b>Helper Functions</b></td>
                <td>Small, reusable functions</td>
                <td><code>format_currency(amount)</code></td>
            </tr>
            <tr>
                <td><b>Core Functions</b></td>
                <td>Main banking operations</td>
                <td><code>deposit_money()</code></td>
            </tr>
            <tr>
                <td><b>Menu Functions</b></td>
                <td>Display and navigation</td>
                <td><code>display_menu()</code></td>
            </tr>
            <tr>
                <td><b>Main Function</b></td>
                <td>Program entry point</td>
                <td><code>def main():</code></td>
            </tr>
        </tbody>
    </table>

    <h3>Today's Assignment</h3>
    <div class="assignment-box">
        <h4>Part 1: Complete the Banking System Foundation</h4>
        
        <div style="background-color: #e6ffe6; padding: 15px; margin: 10px 0; border-radius: 5px;">
            <b>Required Features (Complete Today):</b><br/>
            1. ‚úÖ Project setup with main() function<br/>
            2. ‚úÖ Global variables for balance and PIN<br/>
            3. ‚úÖ Login system with PIN verification<br/>
            4. ‚úÖ Main menu display<br/>
            5. ‚úÖ check_balance() function<br/>
            6. ‚úÖ deposit_money() function<br/>
            7. ‚úÖ withdraw_money() function (your task!)<br/><br/>
            
            <b>Bonus Features:</b><br/>
            1. Add a daily withdrawal limit ($500 max per day)<br/>
            2. Implement a "quick withdrawal" option ($20, $40, $60, $100)<br/>
            3. Add interest calculation (0.1% daily on balance over $1000)
        </div>
        
        <h4>Part 2: Testing Your System</h4>
        <div style="background-color: #fff0e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
            <b>Test Cases to Verify:</b><br/>
            1. Login with correct PIN ‚Üí Should succeed<br/>
            2. Login with wrong PIN 3x ‚Üí Should lock account<br/>
            3. Deposit $100 ‚Üí Balance should increase by $100<br/>
            4. Withdraw $50 ‚Üí Balance should decrease by $50<br/>
            5. Withdraw more than balance ‚Üí Should show error<br/>
            6. Deposit negative amount ‚Üí Should show error<br/>
            7. Deposit with letters ‚Üí Should show error<br/><br/>
            
            <b>Expected Output Example:</b><br/>
            <pre>
==================================================
WELCOME TO PYTHON BANK
==================================================

üîê LOGIN SCREEN
------------------------------
Enter your 4-digit PIN: 1234
‚úÖ Login successful! Welcome back.

========================================
MAIN MENU
========================================
1. üìä Check Balance
2. üí∞ Deposit Money
3. üèß Withdraw Money
4. üìú View Transaction History
5. üîê Change PIN
6. üö™ Logout & Exit
========================================
Select an option (1-6): 2

========================================
MONEY DEPOSIT
========================================
Enter deposit amount: $500
Confirm deposit of $500.00? (yes/no): yes
‚úÖ Deposit successful! New balance: $1,500.00
            </pre>
        </div>
        
        <h4>Part 3: Code Review Checklist</h4>
        <div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
            <input type="checkbox"> Code has proper comments explaining each function<br/>
            <input type="checkbox"> Variables have descriptive names (not x, y, z)<br/>
            <input type="checkbox"> All user inputs are validated<br/>
            <input type="checkbox"> Error messages are clear and helpful<br/>
            <input type="checkbox"> Functions do one thing only (Single Responsibility)<br/>
            <input type="checkbox"> Global variables are minimized<br/>
            <input type="checkbox"> Code is properly indented<br/>
            <input type="checkbox"> No magic numbers (use constants like MAX_WITHDRAWAL = 500)<br/>
            <input type="checkbox"> Tested with edge cases (empty input, very large numbers)<br/>
        </div>
    </div>

    <h3>Looking Ahead: Week 5 Schedule</h3>
    <div style="background-color: #e6f3ff; padding: 15px; margin: 10px 0; border-radius: 5px; border-left: 5px solid #4a6fa5;">
        <b>Day 1 (Today):</b> Project kickoff & core functions<br/>
        <b>Day 2:</b> Transaction history & data persistence<br/>
        <b>Day 3:</b> PIN change & security features<br/>
        <b>Day 4:</b> Advanced features & code refactoring<br/>
        <b>Day 5:</b> Final testing, debugging & project submission
    </div>

    <div style="background-color: #e6ffe6; padding: 15px; margin: 20px 0; border-radius: 5px; border: 2px solid #4CAF50;">
        <h4>üìö Additional Resources</h4>
        <ul>
            <li><a href="#">Python Input/Output Best Practices</a></li>
            <li><a href="#">Error Handling Patterns</a></li>
            <li><a href="#">Banking System Security Basics</a></li>
            <li><a href="#">Code Organization for Beginners</a></li>
            <li><a href="#">Debugging Techniques in Python</a></li>
        </ul>
        
        <p><b>Need Help?</b> Remember the 20-minute rule: If stuck for 20 minutes, ask for help!<br/>
        Use print() statements to debug: <code>print(f"DEBUG: current_balance = {current_balance}")</code></p>
    </div>`
            },
            "5-2": {
                icon: "fa-history",
                title: "Transaction History & Data Persistence",
                html: `<h1>Week 5, Day 2: Transaction History & Data Persistence</h1>
    <p>Today we'll enhance our banking system with transaction tracking and file storage.</p>
    
    <div class="analogy-box">
        <b>Analogy: Bank Ledger vs Memory üßæ</b><br/>
        <ul style="margin-top: 10px;">
            <li><b>Variables in memory</b> = Sticky notes (lost when program closes)</li>
            <li><b>File storage</b> = Permanent ledger book (survives restart)</li>
            <li><b>Transaction history</b> = Complete record of every action</li>
            <li><b>CSV files</b> = Organized spreadsheet for data</li>
        </ul>
    </div>

    <h3>Today's Goals</h3>
    <div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <b>Primary Objectives:</b><br/>
        1. Implement transaction history viewing<br/>
        2. Add data persistence using text files<br/>
        3. Create CSV export functionality<br/>
        4. Implement search/filter for transactions<br/>
        5. Add date-based reporting<br/><br/>
        
        <b>Files We'll Create:</b><br/>
        - transactions.txt (simple storage)<br/>
        - transactions.csv (structured data)<br/>
        - backup_transactions.json (optional bonus)
    </div>

    <h3>Step 1: Enhanced Transaction Structure</h3>
    
    <b>Current vs Improved Structure</b>
    <div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
# OLD Structure (minimal)
transaction = {
    "date": "2024-01-15",
    "type": "deposit",
    "amount": 500.00,
    "balance_after": 1500.00
}

# NEW Structure (enhanced)
transaction = {
    "transaction_id": 1001,          # Unique ID
    "date": "2024-01-15 14:30:25",   # Full timestamp
    "type": "deposit",               # deposit/withdrawal/balance_check
    "amount": 500.00,                # Transaction amount
    "balance_before": 1000.00,       # Balance before transaction
    "balance_after": 1500.00,        # Balance after transaction
    "description": "ATM deposit",    # Optional description
    "status": "completed"            # completed/failed/cancelled
}
        </pre>
    </div>

    <h3>Step 2: View Transaction History</h3>
    
    <b>Basic History Viewer</b>
    <div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
def view_transaction_history():
    """Display all transactions"""
    global transaction_history
    
    if not transaction_history:
        print(" üì≠ No transactions found.")
        return
    
    print(" " + "=" * 100)
    print("TRANSACTION HISTORY")
    print("=" * 100)
    print(f"{'Date':20} {'Type':15} {'Amount':12} {'Balance After':15} {'Description':20}")
    print("-" * 100)
    
    for transaction in transaction_history:
        # Format amount with + or -
        amount_str = f"+\\\${transaction['amount']:,.2f}" if transaction['type'] == 'deposit' else f"-\\\${transaction['amount']:,.2f}"
        
        print(f"{transaction['date']:20} {transaction['type']:15} {amount_str:12} \\\${transaction['balance_after']:,.2f} {transaction.get('description', ''):20}")
    
    print("=" * 100)
    
    # Show summary
    total_deposits = sum(t['amount'] for t in transaction_history if t['type'] == 'deposit')
    total_withdrawals = sum(t['amount'] for t in transaction_history if t['type'] == 'withdrawal')
    print(f"üìä Summary: Deposits: +\\\${total_deposits:,.2f} | Withdrawals: -\\\${total_withdrawals:,.2f}")
        </pre>
    </div>

    <h3>Step 3: File Storage Implementation</h3>
    
    <b>Option 1: Simple Text File Storage</b>
    <div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
import os

TRANSACTION_FILE = "bank_transactions.txt"

def save_transactions_to_file():
    """Save transactions to a text file"""
    try:
        with open(TRANSACTION_FILE, 'w') as file:
            file.write("TRANSACTION HISTORY ")
            file.write("=" * 50 + " ")
            
            for t in transaction_history:
                file.write(f"Date: {t['date']} ")
                file.write(f"Type: {t['type']} ")
                file.write(f"Amount: \\\${t['amount']:.2f} ")
                file.write(f"Balance After: \\\${t['balance_after']:.2f} ")
                if 'description' in t:
                    file.write(f"Description: {t['description']} ")
                file.write("-" * 30 + " ")
            
        print(f"‚úÖ Transactions saved to {TRANSACTION_FILE}")
        return True
    except Exception as e:
        print(f"‚ùå Error saving transactions: {e}")
        return False

def load_transactions_from_file():
    """Load transactions from text file"""
    global transaction_history
    
    if not os.path.exists(TRANSACTION_FILE):
        print("üìÑ No transaction file found. Starting fresh.")
        return []
    
    try:
        loaded_transactions = []
        with open(TRANSACTION_FILE, 'r') as file:
            lines = file.readlines()
            
        # Parse the file (simplified - in real app use CSV or JSON)
        print(f"üìÇ Loaded transactions from {TRANSACTION_FILE}")
        return loaded_transactions
    except Exception as e:
        print(f"‚ùå Error loading transactions: {e}")
        return []
        </pre>
    </div>

    <b>Option 2: CSV Storage (Better for Excel/Sheets)</b>
    <div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
import csv
from datetime import datetime

CSV_FILE = "bank_transactions.csv"

def save_to_csv():
    """Save transactions to CSV file"""
    try:
        with open(CSV_FILE, 'w', newline='') as csvfile:
            fieldnames = ['date', 'type', 'amount', 'balance_after', 'description']
            writer = csv.DictWriter(csvfile, fieldnames=fieldnames)
            
            writer.writeheader()
            for transaction in transaction_history:
                # Create a simplified version for CSV
                simplified = {
                    'date': transaction['date'],
                    'type': transaction['type'],
                    'amount': transaction['amount'],
                    'balance_after': transaction['balance_after'],
                    'description': transaction.get('description', 'N/A')
                }
                writer.writerow(simplified)
        
        print(f"üíæ CSV saved: {CSV_FILE}")
        return True
    except Exception as e:
        print(f"‚ùå CSV save failed: {e}")
        return False

def load_from_csv():
    """Load transactions from CSV file"""
    global transaction_history
    
    if not os.path.exists(CSV_FILE):
        return []
    
    try:
        with open(CSV_FILE, 'r', newline='') as csvfile:
            reader = csv.DictReader(csvfile)
            transactions = []
            
            for row in reader:
                transactions.append({
                    'date': row['date'],
                    'type': row['type'],
                    'amount': float(row['amount']),
                    'balance_after': float(row['balance_after']),
                    'description': row['description']
                })
            
            print(f"üì• Loaded {len(transactions)} transactions from CSV")
            return transactions
    except Exception as e:
        print(f"‚ùå CSV load failed: {e}")
        return []
        </pre>
    </div>

    <h3>Visual: Data Flow Diagram</h3>
    <div style="background-color: #fff0e6; padding: 15px; margin: 10px 0; border-radius: 5px; font-family: monospace;">
        <b>Data Persistence Flow:</b><br/>
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê<br/>
        ‚îÇ  User Action    ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ  Update Memory  ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ  Save to File   ‚îÇ<br/>
        ‚îÇ  (deposit/etc)  ‚îÇ     ‚îÇ  (transaction_  ‚îÇ     ‚îÇ  (CSV/TXT/JSON) ‚îÇ<br/>
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îÇ    history)     ‚îÇ     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò<br/>
                                ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò              ‚îÇ<br/>      
                                                                 ‚ñº<br/>
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê<br/>
        ‚îÇ  Program Start  ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ  Load from File ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ  Restore State  ‚îÇ<br/>
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò<br/><br/>
        
        <b>File Formats Comparison:</b><br/>
        TXT: Human-readable, simple<br/>
        CSV: Spreadsheet-friendly, structured<br/>
        JSON: Program-friendly, hierarchical
    </div>

    <h3>Step 4: Search & Filter Functions</h3>
    
    <b>Filter by Date Range</b>
    <div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
from datetime import datetime

def filter_by_date():
    """Filter transactions by date range"""
    print(" üìÖ FILTER BY DATE RANGE")
    print("-" * 40)
    
    try:
        start_date = input("Start date (YYYY-MM-DD): ")
        end_date = input("End date (YYYY-MM-DD): ")
        
        # Convert to datetime objects
        start = datetime.strptime(start_date, "%Y-%m-%d")
        end = datetime.strptime(end_date, "%Y-%m-%d")
        
        filtered = []
        for t in transaction_history:
            trans_date = datetime.strptime(t['date'].split()[0], "%Y-%m-%d")
            if start <= trans_date <= end:
                filtered.append(t)
        
        if filtered:
            print(f" Found {len(filtered)} transactions:")
            for t in filtered:
                print(f"  {t['date']} - {t['type']}: \\\${t['amount']:.2f}")
        else:
            print("No transactions found in that date range.")
            
    except ValueError:
        print("Invalid date format. Use YYYY-MM-DD")
        </pre>
    </div>

    <b>Search by Type or Amount</b>
    <div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
def search_transactions():
    """Search transactions by various criteria"""
    print(" üîç SEARCH TRANSACTIONS")
    print("-" * 40)
    print("1. Search by type (deposit/withdrawal)")
    print("2. Search by minimum amount")
    print("3. Search by description keyword")
    print("4. Show failed/cancelled transactions")
    
    choice = input(" Select search option (1-4): ")
    
    results = []
    
    if choice == '1':
        trans_type = input("Enter type (deposit/withdrawal): ").lower()
        results = [t for t in transaction_history if t['type'] == trans_type]
        
    elif choice == '2':
        try:
            min_amount = float(input("Minimum amount: $"))
            results = [t for t in transaction_history if t['amount'] >= min_amount]
        except ValueError:
            print("Invalid amount")
            return
            
    elif choice == '3':
        keyword = input("Keyword in description: ").lower()
        results = [t for t in transaction_history 
                  if 'description' in t and keyword in t['description'].lower()]
    
    elif choice == '4':
        results = [t for t in transaction_history 
                  if t.get('status', 'completed') != 'completed']
    
    # Display results
    if results:
        print(f" üìä Found {len(results)} transactions:")
        for t in results:
            print(f"  ‚Ä¢ {t['date']}: {t['type']} \\\${t['amount']:.2f}")
    else:
        print("No matching transactions found.")
        </pre>
    </div>

    <h3>Hands-On Exercise: Monthly Report Generator</h3>
    
    <b>Task:</b> Create a monthly summary report function
    <div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
def generate_monthly_report(month, year):
    """
    Generate a monthly financial report
    
    Args:
        month (int): Month number (1-12)
        year (int): Year
    
    Returns:
        dict: Monthly summary statistics
    """
    # TODO: Implement this function
    # Should return:
    # - Total deposits for month
    # - Total withdrawals for month
    # - Starting balance (first day)
    # - Ending balance (last day)
    # - Number of transactions
    # - Largest single transaction
    
    # Hint: Use datetime.strptime() to parse dates
    # Filter transactions by month/year
    # Calculate statistics
    
    pass
        </pre>
        
        <b>Expected Output:</b><br/>
        <pre>
========================================
MONTHLY REPORT: January 2024
========================================
üìÖ Period: 2024-01-01 to 2024-01-31
üí∞ Starting Balance: $1,000.00
üí∞ Ending Balance: $1,850.00
üìä Total Deposits: $1,200.00 (3 transactions)
üìä Total Withdrawals: $350.00 (2 transactions)
üìà Net Change: +$850.00
üèÜ Largest Transaction: $500.00 (deposit)
========================================
        </pre>
    </div>

    <h3>Today's Assignment</h3>
    <div class="assignment-box">
        <h4>Part 1: Implement Transaction Features</h4>
        
        <div style="background-color: #e6ffe6; padding: 15px; margin: 10px 0; border-radius: 5px;">
            <b>Required Features:</b><br/>
            1. ‚úÖ Enhanced transaction structure with more fields<br/>
            2. ‚úÖ view_transaction_history() with formatted output<br/>
            3. ‚úÖ save_transactions_to_file() (TXT format)<br/>
            4. ‚úÖ save_to_csv() function<br/>
            5. ‚úÖ filter_by_date() function<br/>
            6. ‚úÖ search_transactions() function<br/>
            7. ‚úÖ generate_monthly_report() function<br/><br/>
            
            <b>Test Your Implementation:</b><br/>
            1. Make 5 different transactions<br/>
            2. Save to both TXT and CSV<br/>
            3. Close and reopen program<br/>
            4. Load transactions from file<br/>
            5. Filter for last 7 days<br/>
            6. Search for deposits over $100
        </div>
        
        <h4>Part 2: Data Integrity Checks</h4>
        <div style="background-color: #fff0e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
            <b>Add These Safety Features:</b><br/>
            1. Transaction ID generator (auto-increment)<br/>
            2. Duplicate transaction detection<br/>
            3. File backup before overwriting<br/>
            4. Data validation before saving<br/>
            5. Recovery from corrupted files<br/><br/>
            
            <b>Sample Validation Code:</b>
            <pre>
def validate_transaction(transaction):
    """Validate transaction data before saving"""
    errors = []
    
    if transaction['amount'] <= 0:
        errors.append("Amount must be positive")
    
    if transaction['balance_after'] < 0:
        errors.append("Balance cannot be negative")
    
    if transaction['type'] not in ['deposit', 'withdrawal', 'balance_check']:
        errors.append("Invalid transaction type")
    
    return errors
            </pre>
        </div>
        
        <h4>Part 3: File Management Menu</h4>
        <div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
            <b>Add These Menu Options:</b><br/>
            1. Export all transactions to CSV<br/>
            2. Backup transactions to backup folder<br/>
            3. Restore from backup<br/>
            4. Clear transaction history (with confirmation)<br/>
            5. Show file sizes and statistics<br/><br/>
            
            <b>Expected Menu:</b>
            <pre>
========================================
FILE MANAGEMENT
========================================
1. üíæ Save transactions to file
2. üì• Load transactions from file
3. üì§ Export to CSV
4. üóÇÔ∏è Backup data
5. üîÑ Restore from backup
6. üßπ Clear history
7. üìä Show file statistics
8. ‚Ü©Ô∏è Return to main menu
========================================
            </pre>
        </div>
    </div>

    <h3>Tomorrow's Preview</h3>
    <div style="background-color: #e6f3ff; padding: 15px; margin: 10px 0; border-radius: 5px; border-left: 5px solid #4a6fa5;">
        <b>Day 3: Security & Advanced Features</b><br/>
        - Change PIN with validation<br/>
        - Password hashing (basic security)<br/>
        - Transaction limits and alerts<br/>
        - Audit logging<br/>
        - Error recovery systems
    </div>`
            },
            "5-3": {
                icon: "fa-shield-alt",
                title: "Security Features & PIN Management",
                html: `<h1>Week 5, Day 3: Security Features & PIN Management</h1>
    <p>Today we'll implement security features to protect user data and prevent unauthorized access.</p>
    
    <div class="analogy-box">
        <b>Analogy: Bank Vault Security üîê</b><br/>
        <ul style="margin-top: 10px;">
            <li><b>Plain PIN storage</b> = Writing combination on vault door</li>
            <li><b>Hashed PIN</b> = One-way lock (can't get combination back)</li>
            <li><b>Transaction limits</b> = Daily withdrawal limits</li>
            <li><b>Audit logs</b> = Security camera recordings</li>
            <li><b>Error handling</b> = Silent alarm system</li>
        </ul>
    </div>

    <h3>Security Problems in Our Current System</h3>
    <table border="1" cellpadding="10" cellspacing="0" style="width: 100%; margin: 15px 0; border-collapse: collapse;">
        <thead>
            <tr style="background-color: #dc3545; color: white;">
                <th>Security Issue</th>
                <th>Current Implementation</th>
                <th>Risk Level</th>
                <th>Fix Required</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><b>PIN Storage</b></td>
                <td>Plain text in variable: <code>pin = "1234"</code></td>
                <td>üî¥ CRITICAL</td>
                <td>Hash with salt</td>
            </tr>
            <tr>
                <td><b>No Lockout</b></td>
                <td>Unlimited login attempts</td>
                <td>üü† HIGH</td>
                <td>Account lock after 3 failures</td>
            </tr>
            <tr>
                <td><b>No Session Timeout</b></td>
                <td>Logged in forever</td>
                <td>üü° MEDIUM</td>
                <td>Auto-logout after inactivity</td>
            </tr>
            <tr>
                <td><b>No Transaction Validation</b></td>
                <td>Can withdraw negative amounts</td>
                <td>üî¥ CRITICAL</td>
                <td>Input validation & limits</td>
            </tr>
            <tr>
                <td><b>Plain Text Files</b></td>
                <td>Transactions in readable text files</td>
                <td>üü† HIGH</td>
                <td>Basic encryption or hashing</td>
            </tr>
            <tr>
                <td><b>No Audit Trail</b></td>
                <td>Can't track who did what</td>
                <td>üü° MEDIUM</td>
                <td>Comprehensive logging</td>
            </tr>
        </tbody>
    </table>

    <h3>Step 1: Secure PIN Storage</h3>
    
    <b>Basic Hashing Implementation</b>
    <div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
import hashlib
import os

def hash_pin(pin):
    """Hash a PIN with salt for secure storage"""
    # Create a random salt
    salt = os.urandom(32)  # 32 bytes = 256 bits
    
    # Combine salt and PIN
    salted_pin = salt + pin.encode()
    
    # Create hash
    pin_hash = hashlib.sha256(salted_pin).hexdigest()
    
    return salt.hex(), pin_hash  # Store both

def verify_pin(entered_pin, stored_salt_hex, stored_hash):
    """Verify an entered PIN against stored hash"""
    # Convert hex salt back to bytes
    salt = bytes.fromhex(stored_salt_hex)
    
    # Hash the entered PIN with the same salt
    salted_entered = salt + entered_pin.encode()
    entered_hash = hashlib.sha256(salted_entered).hexdigest()
    
    # Compare hashes
    return entered_hash == stored_hash

# Example usage:
# Store this in a file:
stored_salt, stored_hash = hash_pin("1234")
# When verifying:
is_valid = verify_pin(user_input, stored_salt, stored_hash)
        </pre>
    </div>

    <b>PIN Configuration File Structure</b>
    <div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
# pin_config.json
{
    "pin_salt": "a1b2c3d4e5f6...",
    "pin_hash": "9f86d081884c7d659a2feaa0c55ad015...",
    "last_changed": "2024-01-15 10:30:00",
    "failed_attempts": 0,
    "locked_until": null,
    "password_history": [
        "old_hash_1",
        "old_hash_2"
    ]
}
        </pre>
    </div>

    <h3>Step 2: Enhanced Login System</h3>
    
    <b>Secure Login with Lockout</b>
    <div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
import json
import time
from datetime import datetime, timedelta

LOGIN_CONFIG_FILE = "login_config.json"
MAX_ATTEMPTS = 3
LOCKOUT_MINUTES = 15

def load_login_config():
    """Load login configuration from file"""
    default_config = {
        "failed_attempts": 0,
        "locked_until": None,
        "last_login": None,
        "pin_salt": None,
        "pin_hash": None
    }
    
    try:
        with open(LOGIN_CONFIG_FILE, 'r') as f:
            config = json.load(f)
            
            # Check if account is locked
            if config.get("locked_until"):
                lock_time = datetime.fromisoformat(config["locked_until"])
                if datetime.now() < lock_time:
                    remaining = (lock_time - datetime.now()).seconds // 60
                    print(f"üîí Account locked. Try again in {remaining} minutes.")
                    return None
            
            return config
    except FileNotFoundError:
        # First time setup
        print("‚ö†Ô∏è  First time setup. Creating new PIN.")
        setup_new_pin()
        return load_login_config()
    except Exception as e:
        print(f"‚ùå Error loading login config: {e}")
        return default_config

def secure_login():
    """Enhanced login with security features"""
    config = load_login_config()
    
    if config is None:  # Account locked
        return False
    
    print(" üîê SECURE LOGIN")
    print("-" * 40)
    
    attempts = 0
    max_attempts = MAX_ATTEMPTS - config.get("failed_attempts", 0)
    
    while attempts < max_attempts:
        entered_pin = input("Enter your PIN: ")
        
        if verify_pin(entered_pin, config["pin_salt"], config["pin_hash"]):
            # Successful login - reset failed attempts
            config["failed_attempts"] = 0
            config["last_login"] = datetime.now().isoformat()
            save_login_config(config)
            
            print("‚úÖ Secure login successful!")
            return True
        else:
            attempts += 1
            config["failed_attempts"] = config.get("failed_attempts", 0) + 1
            
            if config["failed_attempts"] >= MAX_ATTEMPTS:
                # Lock the account
                lock_time = datetime.now() + timedelta(minutes=LOCKOUT_MINUTES)
                config["locked_until"] = lock_time.isoformat()
                print(f"üîí Account locked until {lock_time.strftime('%H:%M')}")
            elif attempts < max_attempts:
                remaining = max_attempts - attempts
                print(f"‚ùå Invalid PIN. {remaining} attempt(s) remaining.")
        
        save_login_config(config)
    
    return False
        </pre>
    </div>

    <h3>Step 3: Change PIN Functionality</h3>
    
    <b>Secure PIN Change with Validation</b>
    <div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
def change_pin():
    """Securely change the PIN with validation"""
    global logged_in
    
    if not logged_in:
        print("‚ùå You must be logged in to change PIN.")
        return False
    
    print(" üîê CHANGE PIN")
    print("-" * 40)
    
    # Step 1: Verify current PIN
    current_pin = input("Enter current PIN: ")
    config = load_login_config()
    
    if not verify_pin(current_pin, config["pin_salt"], config["pin_hash"]):
        print("‚ùå Current PIN is incorrect.")
        return False
    
    # Step 2: Get new PIN with validation
    while True:
        new_pin = input("Enter new 4-digit PIN: ")
        
        if not new_pin.isdigit() or len(new_pin) != 4:
            print("‚ùå PIN must be 4 digits.")
            continue
        
        confirm_pin = input("Confirm new PIN: ")
        
        if new_pin != confirm_pin:
            print("‚ùå PINs don't match. Try again.")
            continue
        
        # Step 3: Check if new PIN is different
        if verify_pin(new_pin, config["pin_salt"], config["pin_hash"]):
            print("‚ö†Ô∏è  New PIN must be different from current PIN.")
            continue
        
        # Step 4: Check against previous PINs (prevent reuse)
        if "password_history" in config:
            for old_hash in config["password_history"][-3:]:  # Last 3 PINs
                if verify_pin(new_pin, config["pin_salt"], old_hash):
                    print("‚ùå Cannot reuse recent PINs.")
                    break
            else:
                break  # No matches found
        else:
            break
    
    # Step 5: Save old hash to history
    if "password_history" not in config:
        config["password_history"] = []
    
    config["password_history"].append(config["pin_hash"])
    
    # Keep only last 5 PINs in history
    if len(config["password_history"]) > 5:
        config["password_history"] = config["password_history"][-5:]
    
    # Step 6: Hash and save new PIN
    new_salt, new_hash = hash_pin(new_pin)
    config["pin_salt"] = new_salt
    config["pin_hash"] = new_hash
    config["last_changed"] = datetime.now().isoformat()
    
    save_login_config(config)
    print("‚úÖ PIN changed successfully!")
    
    # Log this security event
    log_security_event("pin_changed", "User changed PIN")
    
    return True
        </pre>
    </div>

    <h3>Step 4: Transaction Security</h3>
    
    <b>Transaction Limits and Validation</b>
    <div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
# Security configuration
SECURITY_CONFIG = {
    "max_daily_withdrawal": 1000.00,
    "max_single_withdrawal": 500.00,
    "max_daily_deposit": 5000.00,
    "min_transaction_amount": 1.00,
    "require_confirmation_over": 100.00
}

def check_withdrawal_limits(amount):
    """Check if withdrawal violates security limits"""
    errors = []
    
    # Check minimum amount
    if amount < SECURITY_CONFIG["min_transaction_amount"]:
        errors.append(f"Minimum withdrawal is \\\${SECURITY_CONFIG['min_transaction_amount']}")
    
    # Check single transaction limit
    if amount > SECURITY_CONFIG["max_single_withdrawal"]:
        errors.append(f"Maximum single withdrawal is \\\${SECURITY_CONFIG['max_single_withdrawal']}")
    
    # Check daily limit
    today = datetime.now().strftime("%Y-%m-%d")
    todays_withdrawals = sum(
        t["amount"] for t in transaction_history 
        if t["type"] == "withdrawal" and t["date"].startswith(today)
    )
    
    if todays_withdrawals + amount > SECURITY_CONFIG["max_daily_withdrawal"]:
        remaining = SECURITY_CONFIG["max_daily_withdrawal"] - todays_withdrawals
        errors.append(f"Daily limit exceeded. You can withdraw up to \\\${remaining:.2f} today")
    
    return errors

def secure_withdraw():
    """Enhanced withdrawal with security checks"""
    global current_balance
    
    print(" üîê SECURE WITHDRAWAL")
    print("-" * 40)
    
    try:
        amount = float(input("Enter withdrawal amount: $"))
        
        # Security checks
        errors = check_withdrawal_limits(amount)
        
        if errors:
            print(" üö´ Security Violations:")
            for error in errors:
                print(f"  ‚Ä¢ {error}")
            return False
        
        # Balance check
        if amount > current_balance:
            print(f"‚ùå Insufficient funds. Balance: \\\${current_balance:.2f}")
            return False
        
        # Confirmation for large amounts
        if amount >= SECURITY_CONFIG["require_confirmation_over"]:
            print(f" ‚ö†Ô∏è  Large withdrawal: \\\${amount:.2f}")
            confirm = input("Confirm withdrawal? (yes/no): ").lower()
            if confirm != 'yes':
                print("‚ùå Withdrawal cancelled.")
                return False
        
        # Proceed with withdrawal
        old_balance = current_balance
        current_balance -= amount
        
        # Record transaction with security info
        from datetime import datetime
        transaction_history.append({
            "transaction_id": len(transaction_history) + 1,
            "date": datetime.now().isoformat(),
            "type": "withdrawal",
            "amount": amount,
            "balance_before": old_balance,
            "balance_after": current_balance,
            "description": "Secure withdrawal",
            "status": "completed",
            "security_level": "high"
        })
        
        print(f"‚úÖ Secure withdrawal completed. New balance: \\\${current_balance:.2f}")
        
        # Log security event
        log_security_event("withdrawal", f"Withdrew \\\${amount:.2f}")
        
        return True
        
    except ValueError:
        print("‚ùå Invalid amount.")
        return False
        </pre>
    </div>

    <h3>Step 5: Security Logging & Auditing</h3>
    
    <b>Comprehensive Security Logging</b>
    <div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
import json
from datetime import datetime

SECURITY_LOG_FILE = "security_log.json"

def log_security_event(event_type, details, user="current_user", severity="info"):
    """Log security events for auditing"""
    
    log_entry = {
        "timestamp": datetime.now().isoformat(),
        "event_type": event_type,
        "user": user,
        "severity": severity,  # info, warning, critical
        "details": details,
        "ip_address": "127.0.0.1"  # In real app, get actual IP
    }
    
    try:
        # Load existing log
        logs = []
        try:
            with open(SECURITY_LOG_FILE, 'r') as f:
                logs = json.load(f)
        except (FileNotFoundError, json.JSONDecodeError):
            pass
        
        # Add new entry
        logs.append(log_entry)
        
        # Keep only last 1000 entries
        if len(logs) > 1000:
            logs = logs[-1000:]
        
        # Save
        with open(SECURITY_LOG_FILE, 'w') as f:
            json.dump(logs, f, indent=2)
            
    except Exception as e:
        print(f"‚ö†Ô∏è  Failed to log security event: {e}")

def view_security_log():
    """View security log entries"""
    try:
        with open(SECURITY_LOG_FILE, 'r') as f:
            logs = json.load(f)
        
        print(" üîí SECURITY AUDIT LOG")
        print("=" * 80)
        
        for log in logs[-20:]:  # Show last 20 entries
            timestamp = datetime.fromisoformat(log["timestamp"]).strftime("%Y-%m-%d %H:%M")
            
            # Color code by severity
            if log["severity"] == "critical":
                severity = "üî¥ CRITICAL"
            elif log["severity"] == "warning":
                severity = "üü† WARNING"
            else:
                severity = "üîµ INFO"
            
            print(f"{timestamp} | {severity} | {log['event_type']:20} | {log['details']}")
        
        print("=" * 80)
        print(f"Total entries: {len(logs)}")
        
    except FileNotFoundError:
        print("üì≠ No security log found.")
    except Exception as e:
        print(f"‚ùå Error reading security log: {e}")
        </pre>
    </div>

    <h3>Security Dashboard</h3>
    <div style="background-color: #fff0e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
def show_security_dashboard():
    """Display security status and statistics"""
    config = load_login_config()
    
    print(" üõ°Ô∏è  SECURITY DASHBOARD")
    print("=" * 60)
    
    # Account Status
    if config and config.get("locked_until"):
        lock_time = datetime.fromisoformat(config["locked_until"])
        if datetime.now() < lock_time:
            status = "üîí LOCKED"
        else:
            status = "‚úÖ ACTIVE"
    else:
        status = "‚úÖ ACTIVE"
    
    print(f"Account Status: {status}")
    
    # Failed attempts
    failed = config.get("failed_attempts", 0) if config else 0
    print(f"Failed Login Attempts: {failed}/{MAX_ATTEMPTS}")
    
    # Last changed
    if config and config.get("last_changed"):
        last_changed = datetime.fromisoformat(config["last_changed"])
        days_ago = (datetime.now() - last_changed).days
        print(f"PIN Last Changed: {days_ago} days ago")
        if days_ago > 90:
            print("‚ö†Ô∏è  PIN is over 90 days old. Consider changing it.")
    
    # Transaction statistics
    today = datetime.now().strftime("%Y-%m-%d")
    todays_withdrawals = sum(
        t["amount"] for t in transaction_history 
        if t["type"] == "withdrawal" and t["date"].startswith(today)
    )
    
    daily_limit = SECURITY_CONFIG["max_daily_withdrawal"]
    remaining = daily_limit - todays_withdrawals
    print(f" üí∞ Today's Withdrawals: \\\${todays_withdrawals:.2f}")
    print(f"üìä Daily Limit Remaining: \\\${remaining:.2f} (\\\${daily_limit:.2f} total)")
    
    # Security recommendations
    print(" üí° SECURITY RECOMMENDATIONS:")
    if failed > 0:
        print("  ‚Ä¢ Reset your PIN if you suspect unauthorized access")
    
    if remaining < 100:
        print("  ‚Ä¢ Daily withdrawal limit almost reached")
    
    if not os.path.exists(SECURITY_LOG_FILE):
        print("  ‚Ä¢ Enable security logging for better monitoring")
    
    print("=" * 60)
        </pre>
    </div>

    <h3>Hands-On Exercise: Security Audit Tool</h3>
    
    <b>Task:</b> Create a security audit function that checks for vulnerabilities
    <div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
def run_security_audit():
    """
    Run a comprehensive security audit
    Returns list of security issues found
    """
    issues = []
    
    # TODO: Check these security aspects:
    # 1. File permissions - are sensitive files readable by others?
    # 2. Default PIN still being used?
    # 3. Transaction files not being backed up
    # 4. Old unused accounts
    # 5. Weak PIN patterns (1111, 1234, etc.)
    # 6. Missing security logs
    
    # Sample check:
    config = load_login_config()
    if config and config.get("pin_hash"):
        # Check if using default PIN (1234)
        if verify_pin("1234", config["pin_salt"], config["pin_hash"]):
            issues.append("üî¥ CRITICAL: Default PIN (1234) still in use!")
    
    # Check file permissions
    sensitive_files = ["login_config.json", "security_log.json", "bank_transactions.csv"]
    for file in sensitive_files:
        if os.path.exists(file):
            # In real app, check actual permissions
            pass
    
    return issues
        </pre>
    </div>

    <h3>Today's Assignment</h3>
    <div class="assignment-box">
        <h4>Part 1: Implement Security Features</h4>
        
        <div style="background-color: #e6ffe6; padding: 15px; margin: 10px 0; border-radius: 5px;">
            <b>Required Security Implementation:</b><br/>
            1. ‚úÖ PIN hashing with salt<br/>
            2. ‚úÖ Account lockout after 3 failed attempts<br/>
            3. ‚úÖ Secure PIN change with history<br/>
            4. ‚úÖ Transaction limits (daily, per-transaction)<br/>
            5. ‚úÖ Security logging system<br/>
            6. ‚úÖ Security dashboard<br/>
            7. ‚úÖ Large transaction confirmation<br/>
            8. ‚úÖ run_security_audit() function<br/><br/>
            
            <b>Test Security Scenarios:</b><br/>
            1. Try wrong PIN 3 times ‚Üí Should lock account<br/>
            2. Change PIN ‚Üí Verify old PIN no longer works<br/>
            3. Try to withdraw $600 ‚Üí Should fail (over $500 limit)<br/>
            4. Withdraw $400, then try $300 ‚Üí Should fail (over $500 daily)<br/>
            5. Check security log ‚Üí Should see all events
        </div>
        
        <h4>Part 2: Security Testing</h4>
        <div style="background-color: #fff0e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
            <b>Test These Attack Scenarios:</b><br/>
            1. <b>Brute Force:</b> Script trying all 4-digit PINs<br/>
            2. <b>File Tampering:</b> Manually edit login_config.json<br/>
            3. <b>Transaction Manipulation:</b> Edit CSV file directly<br/>
            4. <b>Session Hijack:</b> Try to bypass login<br/>
            5. <b>Input Injection:</b> Enter special characters in amounts<br/><br/>
            
            <b>Expected Defense:</b><br/>
            1. Account locks after 3 attempts<br/>
            2. File integrity checks (hashes)<br/>
            3. Validation before processing transactions<br/>
            4. Session timeout<br/>
            5. Input sanitization
        </div>
        
        <h4>Part 3: Security Documentation</h4>
        <div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
            <b>Create a SECURITY.md file with:</b><br/>
            1. Security features implemented<br/>
            2. Known vulnerabilities<br/>
            3. How to report security issues<br/>
            4. Security best practices for users<br/>
            5. Update procedures for security patches<br/><br/>
            
            <b>Sample Documentation:</b>
            <pre>
# Banking System Security Documentation

## Implemented Security Features
- ‚úÖ PIN hashing with SHA-256 and salt
- ‚úÖ Account lockout after 3 failed attempts
- ‚úÖ Transaction limits and validation
- ‚úÖ Security audit logging
- ‚úÖ File integrity checks

## User Security Guidelines
1. Never share your PIN
2. Change PIN every 90 days
3. Log out after each session
4. Review transaction history regularly
5. Report suspicious activity immediately
            </pre>
        </div>
    </div>

    <h3>Tomorrow's Preview</h3>
    <div style="background-color: #e6f3ff; padding: 15px; margin: 10px 0; border-radius: 5px; border-left: 5px solid #4a6fa5;">
        <b>Day 4: Advanced Features & Code Refactoring</b><br/>
        - Code optimization and cleanup<br/>
        - Advanced error handling<br/>
        - User preferences and settings<br/>
        - Export/import functionality<br/>
        - Performance improvements
    </div>`
            },
            "5-4": {
                icon: "fa-cogs",
                title: "Advanced Features & Code Refactoring",
                html: `<h1>Week 5, Day 4: Advanced Features & Code Refactoring</h1>
    <p>Today we'll polish our banking system, optimize code, and add professional features.</p>
    
    <div class="analogy-box">
        <b>Analogy: Home Renovation üè†</b><br/>
        <ul style="margin-top: 10px;">
            <li><b>Initial build</b> = Building the basic house structure</li>
            <li><b>Refactoring</b> = Renovating to fix problems and improve</li>
            <li><b>Optimization</b> = Adding insulation and efficient systems</li>
            <li><b>Documentation</b> = Creating house manual for future owners</li>
            <li><b>Testing</b> = Home inspection before selling</li>
        </ul>
    </div>

    <h3>Refactoring Checklist</h3>
    <table border="1" cellpadding="10" cellspacing="0" style="width: 100%; margin: 15px 0; border-collapse: collapse;">
        <thead>
            <tr style="background-color: #6c757d; color: white;">
                <th>Category</th>
                <th>Bad Code Smells</th>
                <th>Refactoring Solution</th>
                <th>Priority</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><b>Code Structure</b></td>
                <td>One giant main() function</td>
                <td>Modularize into separate modules</td>
                <td>üî¥ HIGH</td>
            </tr>
            <tr>
                <td><b>Global Variables</b></td>
                <td>Too many globals</td>
                <td>Use classes or configuration objects</td>
                <td>üî¥ HIGH</td>
            </tr>
            <tr>
                <td><b>Error Handling</b></td>
                <td>Bare except clauses</td>
                <td>Specific exception handling</td>
                <td>üü† HIGH</td>
            </tr>
            <tr>
                <td><b>Code Duplication</b></td>
                <td>Copy-pasted validation logic</td>
                <td>Create reusable helper functions</td>
                <td>üü† HIGH</td>
            </tr>
            <tr>
                <td><b>Hardcoded Values</b></td>
                <td>Magic numbers in code</td>
                <td>Use constants and configuration</td>
                <td>üü° MEDIUM</td>
            </tr>
            <tr>
                <td><b>User Interface</b></td>
                <td>Inconsistent prompts</td>
                <td>Create UI formatting functions</td>
                <td>üü° MEDIUM</td>
            </tr>
            <tr>
                <td><b>Performance</b></td>
                <td>Loading entire file each time</td>
                <td>Implement caching where appropriate</td>
                <td>üü¢ LOW</td>
            </tr>
        </tbody>
    </table>

    <h3>Step 1: Code Modularization</h3>
    
    <b>Before: Single File Structure</b>
    <div style="background-color: #ffe6e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
# banking_system.py (OLD - 500+ lines)
# Contains everything:
# - Login functions
# - Transaction functions  
# - File handling
# - Security functions
# - Main menu
# All mixed together!
        </pre>
    </div>

    <b>After: Modular Structure</b>
    <div style="background-color: #e6ffe6; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
banking_system/
‚îú‚îÄ‚îÄ main.py                    # Entry point
‚îú‚îÄ‚îÄ config.py                  # Constants & configuration
‚îú‚îÄ‚îÄ auth/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ login.py              # Login/PIN management
‚îÇ   ‚îî‚îÄ‚îÄ security.py           # Security features
‚îú‚îÄ‚îÄ transactions/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ core.py               # Deposit/withdrawal
‚îÇ   ‚îú‚îÄ‚îÄ history.py            # Transaction history
‚îÇ   ‚îî‚îÄ‚îÄ validation.py         # Transaction validation
‚îú‚îÄ‚îÄ storage/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ file_manager.py       # File operations
‚îÇ   ‚îú‚îÄ‚îÄ csv_handler.py        # CSV specific operations
‚îÇ   ‚îî‚îÄ‚îÄ backup.py            # Backup/restore
‚îú‚îÄ‚îÄ ui/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ menus.py              # Menu displays
‚îÇ   ‚îú‚îÄ‚îÄ formatting.py         # Output formatting
‚îÇ   ‚îî‚îÄ‚îÄ prompts.py            # User input prompts
‚îî‚îÄ‚îÄ utils/
    ‚îú‚îÄ‚îÄ __init__.py
    ‚îú‚îÄ‚îÄ helpers.py            # Helper functions
    ‚îú‚îÄ‚îÄ logging.py            # Logging utilities
    ‚îî‚îÄ‚îÄ error_handling.py     # Error handling utilities
        </pre>
    </div>

    <h3>Step 2: Configuration Management</h3>
    
    <b>config.py - Centralized Configuration</b>
    <div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
"""
Configuration settings for the banking system
All magic numbers and settings go here!
"""

# File paths
TRANSACTION_FILE = "data/transactions.csv"
SECURITY_LOG_FILE = "logs/security.log"
LOGIN_CONFIG_FILE = "data/login_config.json"
BACKUP_DIR = "backups/"

# Security settings
MAX_LOGIN_ATTEMPTS = 3
LOCKOUT_MINUTES = 15
PIN_LENGTH = 4
SESSION_TIMEOUT_MINUTES = 30

# Transaction limits
MAX_DAILY_WITHDRAWAL = 1000.00
MAX_SINGLE_WITHDRAWAL = 500.00
MAX_DAILY_DEPOSIT = 5000.00
MIN_TRANSACTION_AMOUNT = 1.00
REQUIRE_CONFIRMATION_OVER = 100.00

# UI Settings
UI_WIDTH = 60
TABLE_PADDING = 2
CURRENCY_SYMBOL = "$"
DATE_FORMAT = "%Y-%m-%d"
DATETIME_FORMAT = "%Y-%m-%d %H:%M:%S"

# Colors for console (ANSI codes)
class Colors:
    GREEN = '\\033[92m'
    YELLOW = '\\033[93m'
    RED = '\\033[91m'
    BLUE = '\\033[94m'
    RESET = '\\033[0m'
    BOLD = '\\033[1m'

# Feature flags
ENABLE_SECURITY_LOGGING = True
ENABLE_TRANSACTION_LIMITS = True
ENABLE_AUTO_BACKUP = True
DEBUG_MODE = False  # Set to False in production!
        </pre>
    </div>

    <h3>Step 3: Error Handling Refactoring</h3>
    
    <b>Before: Inconsistent Error Handling</b>
    <div style="background-color: #ffe6e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
# BAD - Mixed error handling
def old_function():
    try:
        amount = float(input("Amount: "))
    except:
        print("Error")
    
    # Another try block
    try:
        file = open("data.txt")
    except:
        print("File error")
    
    # No error handling here!
    balance = current_balance - amount
        </pre>
    </div>

    <b>After: Consistent Error Handling System</b>
    <div style="background-color: #e6ffe6; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
# utils/error_handling.py
from config import Colors
import traceback

class BankingError(Exception):
    """Base exception for banking system"""
    pass

class InsufficientFundsError(BankingError):
    pass

class SecurityViolationError(BankingError):
    pass

class InvalidInputError(BankingError):
    pass

def handle_error(error, context=""):
    """Centralized error handling"""
    error_type = type(error).__name__
    
    # User-friendly messages
    error_messages = {
        'ValueError': 'Invalid input. Please enter a valid number.',
        'FileNotFoundError': 'File not found. Please check the file path.',
        'PermissionError': 'Permission denied. Cannot access file.',
        'InsufficientFundsError': 'Insufficient funds for this transaction.',
        'SecurityViolationError': 'Security violation detected.',
        'InvalidInputError': 'Invalid input provided.'
    }
    
    # Get user-friendly message or use default
    user_message = error_messages.get(error_type, str(error))
    
    if context:
        print(f"{Colors.RED}Error in {context}: {user_message}{Colors.RESET}")
    else:
        print(f"{Colors.RED}Error: {user_message}{Colors.RESET}")
    
    # Log detailed error in debug mode
    from config import DEBUG_MODE
    if DEBUG_MODE:
        print(f"{Colors.YELLOW}Detailed error: {error}{Colors.RESET}")
        traceback.print_exc()
    
    return False  # Indicate failure

def safe_input(prompt, input_type=str, validation_func=None, error_msg=None):
    """Get validated input with error handling"""
    while True:
        try:
            user_input = input(prompt).strip()
            
            # Convert to requested type
            if input_type != str:
                user_input = input_type(user_input)
            
            # Apply custom validation if provided
            if validation_func and not validation_func(user_input):
                if error_msg:
                    print(f"{Colors.YELLOW}{error_msg}{Colors.RESET}")
                continue
            
            return user_input
            
        except ValueError:
            type_name = input_type.__name__
            print(f"{Colors.YELLOW}Invalid input. Please enter a valid {type_name}.{Colors.RESET}")
        except KeyboardInterrupt:
            print(f" {Colors.YELLOW}Input cancelled.{Colors.RESET}")
            raise
        except Exception as e:
            handle_error(e, "safe_input")
            continue
        </pre>
    </div>

    <h3>Step 4: UI/UX Improvements</h3>
    
    <b>ui/formatting.py - Consistent Display</b>
    <div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
from config import UI_WIDTH, Colors, CURRENCY_SYMBOL

def print_header(title):
    """Print a consistent header"""
    print(" " + "=" * UI_WIDTH)
    print(f"{Colors.BOLD}{title.center(UI_WIDTH)}{Colors.RESET}")
    print("=" * UI_WIDTH)

def print_subheader(title):
    """Print a subheader"""
    print(f" {Colors.BLUE}{title}{Colors.RESET}")
    print("-" * len(title))

def format_currency(amount, color=True):
    """Format currency consistently"""
    if amount >= 0:
        prefix = f"{Colors.GREEN}+{CURRENCY_SYMBOL}"
    else:
        prefix = f"{Colors.RED}-{CURRENCY_SYMBOL}"
        amount = abs(amount)
    
    formatted = f"{amount:,.2f}"
    
    if color:
        return f"{prefix}{formatted}{Colors.RESET}"
    else:
        return f"+{CURRENCY_SYMBOL}{formatted}" if amount >= 0 else f"-{CURRENCY_SYMBOL}{formatted}"

def format_table(data, headers):
    """Format data as a table"""
    if not data:
        print("No data to display.")
        return
    
    # Calculate column widths
    col_widths = []
    for i, header in enumerate(headers):
        max_len = len(str(header))
        for row in data:
            max_len = max(max_len, len(str(row[i])))
        col_widths.append(max_len + 2)  # Add padding
    
    # Print header
    header_row = ""
    for i, header in enumerate(headers):
        header_row += f"{header:<{col_widths[i]}}"
    print(Colors.BOLD + header_row + Colors.RESET)
    
    # Print separator
    separator = "-" * sum(col_widths)
    print(separator)
    
    # Print data rows
    for row in data:
        row_str = ""
        for i, cell in enumerate(row):
            row_str += f"{str(cell):<{col_widths[i]}}"
        print(row_str)
    
    print(separator)

def show_loading(message="Processing", duration=1):
    """Show a loading animation"""
    import time
    print(f" {message}", end="", flush=True)
    
    for _ in range(3):
        time.sleep(duration / 3)
        print(".", end="", flush=True)
    
    print(" Done!")
        </pre>
    </div>

    <h3>Step 5: Advanced Features Implementation</h3>
    
    <b>Feature 1: User Preferences</b>
    <div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
# storage/user_preferences.py
import json
import os

class UserPreferences:
    def __init__(self):
        self.preferences_file = "data/user_preferences.json"
        self.default_prefs = {
            "language": "en",
            "currency": "USD",
            "date_format": "MM/DD/YYYY",
            "notifications": {
                "email": True,
                "sms": False,
                "push": True
            },
            "privacy": {
                "show_balance_on_login": False,
                "hide_transaction_amounts": False,
                "auto_logout_minutes": 15
            },
            "display": {
                "theme": "light",
                "font_size": "medium",
                "compact_view": False
            }
        }
        self.preferences = self.load_preferences()
    
    def load_preferences(self):
        """Load user preferences from file"""
        if not os.path.exists(self.preferences_file):
            return self.default_prefs.copy()
        
        try:
            with open(self.preferences_file, 'r') as f:
                loaded = json.load(f)
                # Merge with defaults for missing keys
                return {**self.default_prefs, **loaded}
        except Exception as e:
            print(f"Error loading preferences: {e}")
            return self.default_prefs.copy()
    
    def save_preferences(self):
        """Save preferences to file"""
        try:
            os.makedirs(os.path.dirname(self.preferences_file), exist_ok=True)
            with open(self.preferences_file, 'w') as f:
                json.dump(self.preferences, f, indent=2)
            return True
        except Exception as e:
            print(f"Error saving preferences: {e}")
            return False
    
    def get(self, key_path, default=None):
        """Get preference value using dot notation"""
        keys = key_path.split('.')
        value = self.preferences
        
        for key in keys:
            if isinstance(value, dict) and key in value:
                value = value[key]
            else:
                return default
        
        return value
    
    def set(self, key_path, value):
        """Set preference value using dot notation"""
        keys = key_path.split('.')
        current = self.preferences
        
        for i, key in enumerate(keys[:-1]):
            if key not in current or not isinstance(current[key], dict):
                current[key] = {}
            current = current[key]
        
        current[keys[-1]] = value
        return self.save_preferences()

# Usage:
prefs = UserPreferences()
theme = prefs.get("display.theme")  # Returns "light"
prefs.set("display.theme", "dark")  # Changes theme to dark
        </pre>
    </div>

    <b>Feature 2: Data Export/Import</b>
    <div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
# storage/export_import.py
import json
import csv
from datetime import datetime
from config import DATE_FORMAT

class DataExporter:
    @staticmethod
    def export_to_json(transactions, filename="export.json"):
        """Export transactions to JSON file"""
        export_data = {
            "export_date": datetime.now().isoformat(),
            "transaction_count": len(transactions),
            "transactions": transactions
        }
        
        try:
            with open(filename, 'w') as f:
                json.dump(export_data, f, indent=2, default=str)
            return True, f"Exported {len(transactions)} transactions to {filename}"
        except Exception as e:
            return False, f"Export failed: {e}"
    
    @staticmethod
    def export_to_csv(transactions, filename="export.csv"):
        """Export transactions to CSV file"""
        if not transactions:
            return False, "No transactions to export"
        
        fieldnames = ['date', 'type', 'amount', 'description', 'balance_after']
        
        try:
            with open(filename, 'w', newline='') as csvfile:
                writer = csv.DictWriter(csvfile, fieldnames=fieldnames)
                writer.writeheader()
                
                for t in transactions:
                    # Create simplified transaction
                    row = {
                        'date': t['date'],
                        'type': t['type'],
                        'amount': t['amount'],
                        'description': t.get('description', ''),
                        'balance_after': t['balance_after']
                    }
                    writer.writerow(row)
            
            return True, f"Exported {len(transactions)} transactions to {filename}"
        except Exception as e:
            return False, f"CSV export failed: {e}"
    
    @staticmethod
    def export_range(start_date, end_date, format='json'):
        """Export transactions within date range"""
        from transactions.history import get_transactions_by_date_range
        
        filtered = get_transactions_by_date_range(start_date, end_date)
        
        if format.lower() == 'json':
            return DataExporter.export_to_json(filtered, f"export_{start_date}_to_{end_date}.json")
        elif format.lower() == 'csv':
            return DataExporter.export_to_csv(filtered, f"export_{start_date}_to_{end_date}.csv")
        else:
            return False, f"Unsupported format: {format}"

class DataImporter:
    @staticmethod
    def import_from_json(filename):
        """Import transactions from JSON file"""
        try:
            with open(filename, 'r') as f:
                data = json.load(f)
            
            if 'transactions' not in data:
                return False, "Invalid export file format"
            
            transactions = data['transactions']
            return True, f"Loaded {len(transactions)} transactions from {filename}", transactions
            
        except Exception as e:
            return False, f"Import failed: {e}", []
    
    @staticmethod  
    def validate_import_transactions(transactions):
        """Validate imported transactions"""
        required_fields = ['date', 'type', 'amount', 'balance_after']
        
        for i, t in enumerate(transactions):
            # Check required fields
            for field in required_fields:
                if field not in t:
                    return False, f"Transaction {i} missing field: {field}"
            
            # Validate data types
            try:
                float(t['amount'])
                float(t['balance_after'])
            except ValueError:
                return False, f"Transaction {i} has invalid numeric values"
        
        return True, "All transactions validated"
        </pre>
    </div>

    <h3>Step 6: Performance Optimization</h3>
    
    <b>Caching System for Frequently Accessed Data</b>
    <div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
# utils/cache.py
import time
from typing import Any, Dict, Optional

class Cache:
    """Simple caching system for performance"""
    
    def __init__(self, ttl_seconds=300):  # 5 minute default TTL
        self.cache: Dict[str, dict] = {}
        self.ttl = ttl_seconds
    
    def get(self, key: str) -> Optional[Any]:
        """Get value from cache if not expired"""
        if key in self.cache:
            entry = self.cache[key]
            if time.time() - entry['timestamp'] < self.ttl:
                return entry['value']
            else:
                # Expired - remove from cache
                del self.cache[key]
        return None
    
    def set(self, key: str, value: Any):
        """Set value in cache with timestamp"""
        self.cache[key] = {
            'value': value,
            'timestamp': time.time()
        }
    
    def clear(self, key: str = None):
        """Clear cache or specific key"""
        if key:
            if key in self.cache:
                del self.cache[key]
        else:
            self.cache.clear()
    
    def get_stats(self) -> Dict[str, Any]:
        """Get cache statistics"""
        now = time.time()
        active = 0
        expired = 0
        
        for entry in self.cache.values():
            if now - entry['timestamp'] < self.ttl:
                active += 1
            else:
                expired += 1
        
        return {
            'total_entries': len(self.cache),
            'active_entries': active,
            'expired_entries': expired,
            'hit_rate': self._calculate_hit_rate()
        }

# Usage in banking system
transaction_cache = Cache(ttl_seconds=60)  # Cache for 1 minute

def get_cached_transactions(date):
    """Get transactions for date with caching"""
    cache_key = f"transactions_{date}"
    
    # Try cache first
    cached = transaction_cache.get(cache_key)
    if cached is not None:
        print(f"üì¶ Using cached data for {date}")
        return cached
    
    # Not in cache - load from file
    print(f"üì• Loading transactions for {date} from file...")
    transactions = load_transactions_from_file(date)
    
    # Store in cache
    transaction_cache.set(cache_key, transactions)
    
    return transactions
        </pre>
    </div>

    <h3>Step 7: Code Quality Tools</h3>
    
    <b>Creating a Code Quality Suite</b>
    <div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
# utils/code_quality.py
import ast
import os
from typing import List, Tuple

class CodeAnalyzer:
    """Analyze code quality metrics"""
    
    @staticmethod
    def analyze_file(filename: str) -> dict:
        """Analyze a Python file for quality issues"""
        metrics = {
            'filename': filename,
            'line_count': 0,
            'function_count': 0,
            'class_count': 0,
            'complex_functions': [],  # Functions with high complexity
            'long_functions': [],     # Functions > 50 lines
            'duplicate_code': []      # Potential duplicates
        }
        
        try:
            with open(filename, 'r') as f:
                content = f.read()
                metrics['line_count'] = len(content.split(' '))
            
            # Parse AST for more detailed analysis
            tree = ast.parse(content)
            
            # Count functions and classes
            for node in ast.walk(tree):
                if isinstance(node, ast.FunctionDef):
                    metrics['function_count'] += 1
                    
                    # Check function length
                    function_lines = node.end_lineno - node.lineno if node.end_lineno else 0
                    if function_lines > 50:
                        metrics['long_functions'].append({
                            'name': node.name,
                            'lines': function_lines
                        })
                
                elif isinstance(node, ast.ClassDef):
                    metrics['class_count'] += 1
            
            return metrics
            
        except Exception as e:
            print(f"Error analyzing {filename}: {e}")
            return metrics
    
    @staticmethod
    def check_pep8_compliance(filename: str) -> List[str]:
        """Check basic PEP8 compliance"""
        violations = []
        
        try:
            with open(filename, 'r') as f:
                lines = f.readlines()
                
                for i, line in enumerate(lines, 1):
                    # Check line length (PEP8: max 79 chars)
                    if len(line.rstrip(' ')) > 79:
                        violations.append(f"Line {i}: Too long ({len(line)} chars)")
                    
                    # Check trailing whitespace
                    if line.rstrip(' ') != line.rstrip():
                        violations.append(f"Line {i}: Trailing whitespace")
                    
                    # Check mixed tabs and spaces
                    if '\\t' in line and '    ' in line:
                        violations.append(f"Line {i}: Mixed tabs and spaces")
            
            return violations
            
        except Exception as e:
            return [f"Error checking PEP8: {e}"]

# Create a quality check script
def run_quality_checks():
    """Run all quality checks"""
    print("üîç RUNNING CODE QUALITY CHECKS")
    print("=" * 60)
    
    issues_found = 0
    
    # Check all Python files
    for root, dirs, files in os.walk('.'):
        for file in files:
            if file.endswith('.py'):
                filepath = os.path.join(root, file)
                
                print(f" Analyzing: {filepath}")
                
                # Run analyses
                metrics = CodeAnalyzer.analyze_file(filepath)
                pep8_issues = CodeAnalyzer.check_pep8_compliance(filepath)
                
                # Report issues
                if metrics['long_functions']:
                    print(f"  ‚ö†Ô∏è  Long functions:")
                    for func in metrics['long_functions']:
                        print(f"     - {func['name']}: {func['lines']} lines")
                        issues_found += 1
                
                if pep8_issues:
                    print(f"  ‚ö†Ô∏è  PEP8 violations:")
                    for issue in pep8_issues[:3]:  # Show first 3
                        print(f"     - {issue}")
                        issues_found += 1
                
                if not metrics['long_functions'] and not pep8_issues:
                    print(f"  ‚úÖ All checks passed")
    
    print(f" " + "=" * 60)
    print(f"Total issues found: {issues_found}")
    
    if issues_found == 0:
        print("üéâ Excellent code quality!")
    else:
        print("üí° Consider fixing these issues before final submission.")
    
    return issues_found
        </pre>
    </div>

    <h3>Hands-On Exercise: Complete System Audit</h3>
    
    <b>Task:</b> Create a comprehensive system audit function
    <div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
def run_system_audit():
    """
    Run complete system audit covering:
    - Code quality
    - Security
    - Performance
    - Data integrity
    - User experience
    """
    audit_results = {
        'code_quality': {},
        'security': {},
        'performance': {},
        'data_integrity': {},
        'user_experience': {},
        'overall_score': 0
    }
    
    # TODO: Implement these audit checks
    
    # 1. Code Quality Checks
    # - Line count per function
    # - Comment ratio
    # - Function complexity
    # - Duplicate code detection
    
    # 2. Security Checks
    # - Password strength
    # - File permissions
    # - Input validation
    # - Error message sensitivity
    
    # 3. Performance Checks
    # - File I/O operations
    # - Memory usage
    # - Response times
    # - Cache effectiveness
    
    # 4. Data Integrity
    # - Backup frequency
    # - Data validation
    # - Transaction consistency
    # - Recovery procedures
    
    # 5. User Experience
    # - Menu navigation
    # - Error messages clarity
    # - Response times
    # - Feature completeness
    
    return audit_results
        </pre>
        
        <b>Expected Audit Report:</b><br/>
        <pre>
========================================
SYSTEM AUDIT REPORT
========================================
üìä Code Quality: 85/100
  ‚úÖ Functions are well-sized
  ‚ö†Ô∏è  Some functions need more comments
  ‚ùå High complexity in transaction validation

üîí Security: 92/100  
  ‚úÖ Strong password hashing
  ‚úÖ Account lockout implemented
  ‚ö†Ô∏è  File permissions need review

‚ö° Performance: 78/100
  ‚úÖ Caching implemented
  ‚ùå File loading could be optimized
  ‚ö†Ô∏è  Some redundant calculations

üíæ Data Integrity: 95/100
  ‚úÖ Regular backups
  ‚úÖ Data validation
  ‚úÖ Recovery procedures

üë§ User Experience: 88/100
  ‚úÖ Clear menus
  ‚úÖ Helpful error messages
  ‚ö†Ô∏è  Could add more confirmation dialogs

üéØ OVERALL SCORE: 87.6/100
========================================
        </pre>
    </div>

    <h3>Today's Assignment</h3>
    <div class="assignment-box">
        <h4>Part 1: Code Refactoring</h4>
        
        <div style="background-color: #e6ffe6; padding: 15px; margin: 10px 0; border-radius: 5px;">
            <b>Refactoring Tasks:</b><br/>
            1. ‚úÖ Organize code into modules (auth/, transactions/, etc.)<br/>
            2. ‚úÖ Move all constants to config.py<br/>
            3. ‚úÖ Implement consistent error handling<br/>
            4. ‚úÖ Create UI formatting functions<br/>
            5. ‚úÖ Add UserPreferences class<br/>
            6. ‚úÖ Implement DataExporter/Importer<br/>
            7. ‚úÖ Add caching for performance<br/>
            8. ‚úÖ Create code quality analyzer<br/>
            9. ‚úÖ Implement run_system_audit()<br/><br/>
            
            <b>Test Refactoring:</b><br/>
            1. All existing features should still work<br/>
            2. Code should be more readable<br/>
            3. Error messages should be consistent<br/>
            4. Performance should be equal or better
        </div>
        
        <h4>Part 2: Advanced Feature Implementation</h4>
        <div style="background-color: #fff0e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
            <b>Add These Professional Features:</b><br/>
            1. <b>Multi-language support</b> (English/Spanish)<br/>
            2. <b>Transaction categories</b> (Food, Rent, Salary, etc.)<br/>
            3. <b>Budget tracking</b> with monthly limits per category<br/>
            4. <b>Recurring transactions</b> (automatic monthly bills)<br/>
            5. <b>Transaction templates</b> for common operations<br/>
            6. <b>Search with filters</b> (date, amount, category, type)<br/>
            7. <b>Graphical reports</b> (using ASCII or simple charts)<br/>
            8. <b>Email/SMS notifications</b> (simulated)<br/><br/>
            
            <b>Sample Budget Feature:</b>
            <pre>
class BudgetTracker:
    def __init__(self):
        self.categories = {
            'food': 300.00,
            'entertainment': 100.00,
            'transportation': 150.00,
            'shopping': 200.00
        }
        self.spent = {category: 0.00 for category in self.categories}
    
    def check_budget(self, category, amount):
        remaining = self.categories[category] - self.spent[category]
        if amount > remaining:
            return False, f"Exceeds {category} budget. Remaining: \\\${remaining:.2f}"
        return True, f"Within budget. Remaining: \\\${remaining:.2f}"
            </pre>
        </div>
        
        <h4>Part 3: Final Polish</h4>
        <div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
            <b>Before Final Submission:</b><br/>
            1. Run code quality checks and fix all issues<br/>
            2. Test all features thoroughly<br/>
            3. Create comprehensive documentation<br/>
            4. Add help system (type 'help' anywhere)<br/>
            5. Implement graceful shutdown<br/>
            6. Add version information<br/>
            7. Create installation/setup instructions<br/>
            8. Add sample data for demonstration<br/><br/>
            
            <b>Final Documentation Structure:</b>
            <pre>
project/
‚îú‚îÄ‚îÄ README.md                 # Project overview
‚îú‚îÄ‚îÄ INSTALL.md               # Installation instructions
‚îú‚îÄ‚îÄ USER_GUIDE.md            # User manual
‚îú‚îÄ‚îÄ DEVELOPER_GUIDE.md       # Developer documentation
‚îú‚îÄ‚îÄ SECURITY.md              # Security documentation
‚îú‚îÄ‚îÄ CHANGELOG.md             # Version history
‚îú‚îÄ‚îÄ requirements.txt         # Python dependencies
‚îú‚îÄ‚îÄ run.py                   # Main entry point
‚îú‚îÄ‚îÄ tests/                   # Test suite
‚îÇ   ‚îú‚îÄ‚îÄ test_auth.py
‚îÇ   ‚îú‚îÄ‚îÄ test_transactions.py
‚îÇ   ‚îî‚îÄ‚îÄ test_security.py
‚îî‚îÄ‚îÄ examples/                # Example configurations
    ‚îú‚îÄ‚îÄ sample_data.json
    ‚îî‚îÄ‚îÄ sample_config.ini
            </pre>
        </div>
    </div>

    <h3>Tomorrow: Final Project Day</h3>
    <div style="background-color: #e6f3ff; padding: 15px; margin: 10px 0; border-radius: 5px; border-left: 5px solid #4a6fa5;">
        <b>Day 5: Final Testing & Project Submission</b><br/>
        - Comprehensive testing plan<br/>
        - Bug fixing and debugging<br/>
        - Performance optimization<br/>
        - Creating final documentation<br/>
        - Project presentation preparation<br/>
        - Submission guidelines
    </div>
    
    <div style="background-color: #e6ffe6; padding: 15px; margin: 20px 0; border-radius: 5px; border: 2px solid #4CAF50;">
        <h4>üéØ Progress Check</h4>
        <p>By the end of today, you should have:</p>
        <ul>
            <li>‚úÖ Modular, organized code structure</li>
            <li>‚úÖ Professional error handling system</li>
            <li>‚úÖ Consistent UI/UX across all features</li>
            <li>‚úÖ Advanced features (preferences, export/import)</li>
            <li>‚úÖ Performance optimizations</li>
            <li>‚úÖ Code quality analysis tools</li>
            <li>‚úÖ Comprehensive system audit</li>
        </ul>
        <p><b>Next:</b> Tomorrow we'll put everything together for final submission!</p>
    </div>`
            },

            "6-1": {
                icon: "fa-cube",
                title: "Classes & Objects - Blueprints & Houses",
                html: `<h1>Week 6, Day 1: Introduction to Object-Oriented Programming - Classes & Objects</h1>
    <p>Welcome to Phase 2! Today we transition from procedural programming to thinking in terms of "objects" - the way professional software is built.</p>
    
    <div class="analogy-box">
        <b>Analogy: Blueprint vs. House üè†</b><br/>
        <ul style="margin-top: 10px;">
            <li><b>Class</b> = Architectural blueprint (specifications, plans)</li>
            <li><b>Object</b> = Actual house built from the blueprint</li>
            <li><b>Attributes</b> = House features (rooms, color, size)</li>
            <li><b>Methods</b> = What the house can DO (openDoor(), turnOnLight())</li>
        </ul>
    </div>

    <h3>Key Topics</h3>
    <ul>
        <li>Why OOP? (The Motivation)</li>
        <li>Classes vs. Objects</li>
        <li>Defining Your First Class</li>
        <li>Creating Objects (Instances)</li>
        <li>Practical: Car Class Example</li>
    </ul>

    <h3>In-Depth Explanation</h3>
    
    <b>a. Why Object-Oriented Programming?</b>
    <div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <small><b>Problem with Procedural Code:</b> Everything mixed together!</small><br/><br/>
        
        <b>Before OOP (Spaghetti Code):</b>
        <div style="background-color: #ffe6e6; padding: 10px; margin: 10px; border-radius: 5px; font-family: monospace;">
            car1_brand = "Toyota"<br/>
            car1_model = "Camry"<br/>
            car1_speed = 0<br/>
            <br/>
            car2_brand = "Honda"<br/>
            car2_model = "Civic"<br/>
            car2_speed = 0<br/>
            <br/>
            def accelerate_car1():<br/>
            &nbsp;&nbsp;&nbsp;&nbsp;car1_speed += 10<br/>
            <br/>
            def brake_car2():<br/>
            &nbsp;&nbsp;&nbsp;&nbsp;car2_speed -= 5<br/>
        </div>
        
        <small><b>With OOP (Organized Code):</b> Everything related stays together</small><br/><br/>
        
        <b>Benefits of OOP:</b>
        <div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
            <table style="width: 100%;">
                <tr>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>Organization</b></td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Related data and functions grouped together</td>
                </tr>
                <tr>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>Reusability</b></td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Create many objects from one blueprint</td>
                </tr>
                <tr>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>Maintenance</b></td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Easy to find and fix issues</td>
                </tr>
                <tr>
                    <td style="padding: 8px;"><b>Scalability</b></td>
                    <td style="padding: 8px;">Add features without breaking existing code</td>
                </tr>
            </table>
        </div>
    </div>
    
    <hr/>
    
    <b>b. Class vs. Object - The Critical Difference</b><br/>
    
    <div style="background-color: #f9f9f9; padding: 15px; margin: 10px 0; border-radius: 5px; display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
        <div>
            <h4 style="color: #2c3e50;">CLASS (Blueprint)</h4>
            <div style="background-color: #e8f4f8; padding: 15px; border-radius: 5px; height: 250px;">
                <pre style="margin: 0;">
class Car:
    """Blueprint for creating cars"""
    
    def __init__(self, brand, model):
        self.brand = brand
        self.model = model
        self.speed = 0
    
    def accelerate(self):
        self.speed += 10
        return f"Accelerating! Speed: {self.speed}"
    
    def brake(self):
        self.speed = max(0, self.speed - 5)
        return f"Braking! Speed: {self.speed}"
                </pre>
            </div>
            <ul style="margin-top: 10px;">
                <li><b>Exists once</b> in memory</li>
                <li><b>Definition</b> only</li>
                <li><b>Template</b> for objects</li>
                <li><b>No data</b> stored here</li>
            </ul>
        </div>
        
        <div>
            <h4 style="color: #2c3e50;">OBJECTS (Instances)</h4>
            <div style="background-color: #e8f8e8; padding: 15px; border-radius: 5px; height: 250px;">
                <pre style="margin: 0;">
                    # Creating OBJECTS from the CLASS
                    my_car = Car("Toyota", "Camry")
                    your_car = Car("Honda", "Civic")
                    company_car = Car("Tesla", "Model 3")

                    print(my_car.brand)      # "Toyota"
                    print(your_car.model)    # "Civic"

                    my_car.accelerate()      # Speed becomes 10
                    your_car.accelerate()    # Speed becomes 10 (separate!)
                </pre>
            </div>
            <ul style="margin-top: 10px;">
                <li><b>Multiple instances</b> possible</li>
                <li><b>Contains actual data</b></li>
                <li><b>Independent</b> from other objects</li>
                <li><b>Real values</b> stored here</li>
            </ul>
        </div>
    </div>
    
    <b>Visual Diagram:</b>
    <div style="background-color: #fff; padding: 15px; margin: 10px 0; border-radius: 5px; text-align: center; border: 2px dashed #3498db;">
        <div style="display: inline-block; text-align: left;">
            <div style="background-color: #3498db; color: white; padding: 10px 20px; border-radius: 5px; margin-bottom: 10px; text-align: center;">
                <b>CLASS: Car</b><br/>
                ‚Ä¢ brand<br/>
                ‚Ä¢ model<br/>
                ‚Ä¢ speed<br/>
                ‚Ä¢ accelerate()<br/>
                ‚Ä¢ brake()
            </div>
            <div style="text-align: center; margin: 10px 0;">‚ñº<br/>Creates</div>
            <div style="display: flex; gap: 20px; justify-content: center;">
                <div style="background-color: #e74c3c; color: white; padding: 10px 15px; border-radius: 5px; width: 140px;">
                    <b>OBJECT 1</b><br/>
                    brand = "Toyota"<br/>
                    model = "Camry"<br/>
                    speed = 0
                </div>
                <div style="background-color: #2ecc71; color: white; padding: 10px 15px; border-radius: 5px; width: 140px;">
                    <b>OBJECT 2</b><br/>
                    brand = "Honda"<br/>
                    model = "Civic"<br/>
                    speed = 0
                </div>
                <div style="background-color: #f39c12; color: white; padding: 10px 15px; border-radius: 5px; width: 140px;">
                    <b>OBJECT 3</b><br/>
                    brand = "Tesla"<br/>
                    model = "Model 3"<br/>
                    speed = 0
                </div>
            </div>
        </div>
    </div>
    
    <hr/>
    
    <b>c. Anatomy of a Class - Python Syntax</b>
    
    <div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
class ClassName:                  # 1. Class Definition
    """Docstring explaining purpose"""  # 2. Documentation
    
    def __init__(self, param1, param2):  # 3. Constructor
        self.attribute1 = param1         # 4. Attributes
        self.attribute2 = param2
        self.default_attribute = 0      # Default value
    
    def method1(self):                  # 5. Methods
        """What this method does"""
        return self.attribute1
    
    def method2(self, parameter):
        """Another method"""
        self.attribute2 = parameter
                </pre>
    </div>
    
    <b>Key Components Explained:</b>
    <div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <table style="width: 100%;">
            <tr>
                <td style="padding: 8px; border-bottom: 1px solid #ccc; width: 30%;"><b>self</b></td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Reference to the CURRENT object instance</td>
            </tr>
            <tr>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>__init__()</b></td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Constructor - runs when object is created</td>
            </tr>
            <tr>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>Attributes</b></td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Variables that belong to the object (data)</td>
            </tr>
            <tr>
                <td style="padding: 8px;"><b>Methods</b></td>
                <td style="padding: 8px;">Functions that belong to the object (actions)</td>
            </tr>
        </table>
    </div>
    
    <hr/>
    
    <b>d. Live Coding: Car Class</b>
    
    <div style="background-color: #f9f9f9; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <b>Step 1: Define the Class</b>
        <div style="background-color: #e8f4f8; padding: 15px; margin: 10px 0; border-radius: 5px;">
            <pre>
class Car:
    """A simple Car class for our garage"""
    
    def __init__(self, make, model, year):
        self.make = make      # Attribute 1
        self.model = model    # Attribute 2
        self.year = year      # Attribute 3
        self.mileage = 0      # Attribute 4 (default value)
        self.is_running = False  # Attribute 5
    
    def start(self):
        """Start the car's engine"""
        if not self.is_running:
            self.is_running = True
            return f"{self.make} {self.model} engine started!"
        return "Car is already running"
    
    def drive(self, miles):
        """Drive the car for specified miles"""
        if self.is_running:
            self.mileage += miles
            return f"Drove {miles} miles. Total mileage: {self.mileage}"
        return "Start the car first!"
    
    def stop(self):
        """Stop the car's engine"""
        if self.is_running:
            self.is_running = False
            return f"{self.make} {self.model} stopped."
        return "Car is already stopped"
    
    def get_info(self):
        """Return car information"""
        return f"{self.year} {self.make} {self.model}, Mileage: {self.mileage}"
            </pre>
        </div>
        
        <b>Step 2: Create Objects (Instances)</b>
        <div style="background-color: #e8f8e8; padding: 15px; margin: 10px 0; border-radius: 5px;">
            <pre>
# Creating car objects
car1 = Car("Toyota", "Camry", 2022)
car2 = Car("Honda", "Civic", 2023)
car3 = Car("Tesla", "Model 3", 2024)

print(car1.get_info())  # "2022 Toyota Camry, Mileage: 0"
print(car2.make)        # "Honda"
print(car3.model)       # "Model 3"
            </pre>
        </div>
        
        <b>Step 3: Interact with Objects</b>
        <div style="background-color: #fff8e8; padding: 15px; margin: 10px 0; border-radius: 5px;">
            <pre>
# Let's use our cars!
print(car1.start())      # "Toyota Camry engine started!"
print(car1.drive(50))    # "Drove 50 miles. Total mileage: 50"
print(car1.drive(30))    # "Drove 30 miles. Total mileage: 80"
print(car1.stop())       # "Toyota Camry stopped."

# Car2 is independent
print(car2.start())      # "Honda Civic engine started!"
print(car2.get_info())   # "2023 Honda Civic, Mileage: 0"

# Car3 hasn't been touched
print(car3.is_running)   # False
            </pre>
        </div>
    </div>
    
    <hr/>
    
    <h3>Practical Warehouse Example</h3>
    
    <div class="assignment-box">
        <h4>Assignment: Product Class for Warehouse System</h4>
        
        <b>Scenario:</b> Convert our Phase 1 inventory system to OOP<br/><br/>
        
        <b>Part 1: Create Product Class</b>
        <div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
            Create a <code>Product</code> class with:
            <ul>
                <li>Attributes: sku, name, price, quantity, category</li>
                <li>Methods:
                    <ul>
                        <li><code>__init__()</code> - constructor with all attributes</li>
                        <li><code>get_total_value()</code> - returns price √ó quantity</li>
                        <li><code>apply_discount(percent)</code> - reduces price by percent</li>
                        <li><code>update_quantity(amount)</code> - adds/subtracts quantity</li>
                        <li><code>display_info()</code> - returns formatted product info</li>
                    </ul>
                </li>
            </ul>
        </div>
        
        <b>Part 2: Create Product Objects</b>
        <div style="background-color: #fff0e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
            Create 5 different product objects:
            <pre>
# Example:
laptop = Product("SKU001", "Gaming Laptop", 1200, 10, "Electronics")
mouse = Product("SKU002", "Wireless Mouse", 25, 50, "Accessories")
keyboard = Product("SKU003", "Mechanical Keyboard", 80, 30, "Accessories")
monitor = Product("SKU004", "4K Monitor", 400, 15, "Electronics")
chair = Product("SKU005", "Ergonomic Chair", 350, 8, "Furniture")
            </pre>
        </div>
        
        <b>Part 3: Test Your Class</b>
        <div style="background-color: #f0fff0; padding: 15px; margin: 10px 0; border-radius: 5px;">
            Test all methods for each product:
            <ol>
                <li>Display each product's information</li>
                <li>Calculate total value of laptop inventory</li>
                <li>Apply 15% discount to the chair</li>
                <li>Update mouse quantity (+20 new stock)</li>
                <li>Check if any product has quantity less than 10</li>
            </ol>
        </div>
        
        <b>Expected Output:</b>
        <div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px; font-family: monospace;">
            Product: Gaming Laptop (SKU001)<br/>
            Category: Electronics, Price: $1200, Quantity: 10<br/>
            Total Value: $12000<br/>
            --------------------<br/>
            After 15% discount on Ergonomic Chair:<br/>
            New Price: $297.5<br/>
            --------------------<br/>
            Mouse quantity updated: 70 in stock
        </div>
    </div>
    
    <hr/>
    
    <h3>Common Mistakes & Solutions</h3>
    
    <b>Mistake 1: Forgetting "self" parameter</b>
    <div style="background-color: #ffe6e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
# WRONG
def get_price():  # Missing self!
    return price

# RIGHT
def get_price(self):  # Need self to access attributes
    return self.price
        </pre>
    </div>
    
    <b>Mistake 2: Confusing class and object</b>
    <div style="background-color: #ffe6e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
# WRONG - Trying to access attributes on class
print(Car.price)  # Error! Class has no price attribute

# RIGHT - Access through object
my_car = Car("Toyota", "Camry")
print(my_car.price)  # Works!
        </pre>
    </div>
    
    <b>Mistake 3: Modifying class attributes incorrectly</b>
    <div style="background-color: #ffe6e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
# WRONG - This creates a LOCAL variable
def update_price(self, new_price):
    price = new_price  # Creates local variable 'price'

# RIGHT - Use self. to modify object attribute
def update_price(self, new_price):
    self.price = new_price  # Modifies object's price
        </pre>
    </div>
    
    <hr/>
    
    <h3>Quick Reference Table</h3>
    
    <div style="background-color: #f9f9f9; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <table style="width: 100%; border-collapse: collapse;">
            <thead>
                <tr style="background-color: #3498db; color: white;">
                    <th style="padding: 10px; text-align: left;">Concept</th>
                    <th style="padding: 10px; text-align: left;">Analogy</th>
                    <th style="padding: 10px; text-align: left;">Python Example</th>
                    <th style="padding: 10px; text-align: left;">Purpose</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>Class</b></td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Blueprint</td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;"><code>class Car:</code></td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Define template</td>
                </tr>
                <tr>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>Object</b></td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Actual house</td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;"><code>my_car = Car()</code></td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Create instance</td>
                </tr>
                <tr>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>Attribute</b></td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Features/properties</td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;"><code>self.color = "red"</code></td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Store data</td>
                </tr>
                <tr>
                    <td style="padding: 8px;"><b>Method</b></td>
                    <td style="padding: 8px;">Actions/behaviors</td>
                    <td style="padding: 8px;"><code>def drive(self):</code></td>
                    <td style="padding: 8px;">Define actions</td>
                </tr>
            </tbody>
        </table>
    </div>
    
    <hr/>
    
    <div style="background-color: #e8f8e8; padding: 20px; margin: 20px 0; border-radius: 5px; border-left: 5px solid #2ecc71;">
        <h4>üöÄ Homework: Prepare for Tomorrow</h4>
        <p><b>Reading:</b> Research Python's special methods (__str__, __repr__)</p>
        <p><b>Practice:</b> Add these methods to your Product class:</p>
        <ul>
            <li><code>__str__()</code> - for user-friendly display</li>
            <li><code>__repr__()</code> - for developer debugging</li>
        </ul>
        <p><b>Think About:</b> How would you model a "Warehouse" class that contains multiple Product objects?</p>
    </div>
    
    <div style="text-align: center; margin-top: 30px; padding: 15px; background-color: #f8f9fa; border-radius: 5px;">
        <b>Remember:</b> Classes are blueprints, Objects are the actual things. Every object is independent!<br/>
        Tomorrow: We'll dive deeper into attributes and methods.
    </div>`
            },
            "6-2": {
                icon: "fa-tag",
                title: "Attributes & Methods - What Objects ARE vs DO",
                html: `<h1>Week 6, Day 2: Attributes & Methods - What Objects ARE vs What They DO</h1>
    <p>Today we dive deeper into the building blocks of objects: Attributes (data/properties) and Methods (actions/functions).</p>
    
    <div class="analogy-box">
        <b>Analogy: Person Object üë§</b><br/>
        <ul style="margin-top: 10px;">
            <li><b>Attributes</b> = What a person IS (name, age, height)</li>
            <li><b>Methods</b> = What a person can DO (walk(), talk(), eat())</li>
            <li><b>Instance Attributes</b> = Unique to each person</li>
            <li><b>Class Attributes</b> = Shared by all people (species="human")</li>
        </ul>
    </div>

    <h3>Key Topics</h3>
    <ul>
        <li>Instance Attributes vs Class Attributes</li>
        <li>Instance Methods vs Class Methods vs Static Methods</li>
        <li>Getter and Setter Methods</li>
        <li>Special/Dunder Methods (__str__, __len__)</li>
        <li>Practical: Enhanced Product Class</li>
    </ul>

    <h3>In-Depth Explanation</h3>
    
    <b>a. Instance Attributes vs Class Attributes</b>
    
    <div style="background-color: #f9f9f9; padding: 15px; margin: 10px 0; border-radius: 5px; display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
        <div>
            <h4 style="color: #2c3e50;">INSTANCE ATTRIBUTES</h4>
            <div style="background-color: #e8f4f8; padding: 15px; border-radius: 5px;">
                <pre>
class Product:
    category = "General"  # Class attribute
    
    def __init__(self, name, price):
        self.name = name     # Instance attribute
        self.price = price   # Instance attribute
        self.discount = 0    # Instance attribute
        
# Each object has its OWN copy
p1 = Product("Laptop", 1000)
p2 = Product("Mouse", 50)

print(p1.name)    # "Laptop" (unique)
print(p2.name)    # "Mouse"  (unique)
                </pre>
            </div>
            <ul style="margin-top: 10px;">
                <li><b>Unique</b> to each object</li>
                <li><b>Defined</b> in __init__()</li>
                <li><b>Accessed</b> via self.attribute</li>
                <li><b>Changes</b> don't affect other objects</li>
            </ul>
        </div>
        
        <div>
            <h4 style="color: #2c3e50;">CLASS ATTRIBUTES</h4>
            <div style="background-color: #e8f8e8; padding: 15px; border-radius: 5px;">
                <pre>
class Product:
    tax_rate = 0.15          # Class attribute (shared)
    products_count = 0       # Class attribute
    
    def __init__(self, name):
        self.name = name
        Product.products_count += 1
        
p1 = Product("Laptop")
p2 = Product("Mouse")

print(Product.tax_rate)      # 0.15 (shared)
print(p1.tax_rate)           # 0.15 (inherited)
print(Product.products_count) # 2 (shared counter)
                </pre>
            </div>
            <ul style="margin-top: 10px;">
                <li><b>Shared</b> by all objects</li>
                <li><b>Defined</b> outside __init__()</li>
                <li><b>Accessed</b> via ClassName.attribute</li>
                <li><b>Changes</b> affect all objects</li>
            </ul>
        </div>
    </div>
    
    <b>Visual Comparison:</b>
    <div style="background-color: #fff; padding: 15px; margin: 10px 0; border-radius: 5px; text-align: center;">
        <div style="display: inline-block; text-align: left;">
            <div style="background-color: #3498db; color: white; padding: 10px; border-radius: 5px; margin-bottom: 10px; width: 300px;">
                <b>CLASS: Product</b><br/>
                ‚Ä¢ tax_rate = 0.15 ‚Üê SHARED<br/>
                ‚Ä¢ products_count = 0 ‚Üê SHARED
            </div>
            <div style="display: flex; gap: 20px; justify-content: center;">
                <div style="background-color: #e74c3c; color: white; padding: 10px; border-radius: 5px; width: 140px;">
                    <b>OBJECT 1</b><br/>
                    name = "Laptop"<br/>
                    price = 1000<br/>
                    ‚Üê Inherits tax_rate
                </div>
                <div style="background-color: #2ecc71; color: white; padding: 10px; border-radius: 5px; width: 140px;">
                    <b>OBJECT 2</b><br/>
                    name = "Mouse"<br/>
                    price = 50<br/>
                    ‚Üê Inherits tax_rate
                </div>
            </div>
            <div style="margin-top: 10px; text-align: center;">
                Changing Product.tax_rate affects BOTH objects!
            </div>
        </div>
    </div>
    
    <hr/>
    
    <b>b. Three Types of Methods</b>
    
    <div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
class Product:
    company = "TechCorp"  # Class attribute
    
    def __init__(self, name, price):
        self.name = name
        self.price = price
    
    # 1. INSTANCE METHOD (most common)
    def apply_discount(self, percent):
        """Instance method - works on specific object"""
        self.price *= (1 - percent/100)
        return self.price
    
    # 2. CLASS METHOD
    @classmethod
    def change_company(cls, new_name):
        """Class method - works on class level"""
        cls.company = new_name
        return f"Company changed to {new_name}"
    
    # 3. STATIC METHOD
    @staticmethod
    def calculate_tax(amount, rate=0.15):
        """Static method - utility function, no self/cls"""
        return amount * rate
        </pre>
    </div>
    
    <b>Method Comparison Table:</b>
    <div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <table style="width: 100%; border-collapse: collapse;">
            <thead>
                <tr style="background-color: #2c3e50; color: white;">
                    <th style="padding: 10px;">Method Type</th>
                    <th style="padding: 10px;">First Parameter</th>
                    <th style="padding: 10px;">Accesses</th>
                    <th style="padding: 10px;">Use Case</th>
                    <th style="padding: 10px;">Example</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>Instance</b></td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">self</td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Object attributes</td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Object-specific actions</td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">apply_discount()</td>
                </tr>
                <tr>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>Class</b></td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">cls</td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Class attributes</td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Class-level changes</td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">change_company()</td>
                </tr>
                <tr>
                    <td style="padding: 8px;"><b>Static</b></td>
                    <td style="padding: 8px;">(none)</td>
                    <td style="padding: 8px;">Nothing (utility)</td>
                    <td style="padding: 8px;">Helper functions</td>
                    <td style="padding: 8px;">calculate_tax()</td>
                </tr>
            </tbody>
        </table>
    </div>
    
    <b>Live Demo:</b>
    <div style="background-color: #f9f9f9; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
# Create product
p = Product("Laptop", 1000)

# Instance method
print(p.apply_discount(10))   # 900.0 (affects THIS object)

# Class method
print(Product.change_company("MegaTech"))  # Changes for ALL
print(p.company)              # "MegaTech" (inherited)

# Static method
tax = Product.calculate_tax(900)  # No object needed!
print(f"Tax: \\\${tax}")         # "Tax: $135.0"

# Alternative calls
tax2 = p.calculate_tax(900)   # Also works (but confusing)
        </pre>
    </div>
    
    <hr/>
    
    <b>c. Getter and Setter Methods (Pythonic vs Java-style)</b>
    
    <div style="background-color: #f9f9f9; padding: 15px; margin: 10px 0; border-radius: 5px; display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
        <div>
            <h4 style="color: #2c3e50;">PYTHONIC WAY (Recommended)</h4>
            <div style="background-color: #e8f4f8; padding: 15px; border-radius: 5px;">
                <pre>
class Product:
    def __init__(self, name, price):
        self.name = name
        self._price = price  # "Protected" by convention
    
    @property
    def price(self):
        """Getter - accessed like attribute"""
        return self._price
    
    @price.setter
    def price(self, value):
        """Setter - with validation"""
        if value < 0:
            raise ValueError("Price cannot be negative")
        self._price = value
    
    @price.deleter
    def price(self):
        """Deleter - cleanup"""
        print(f"Deleting price for {self.name}")
        del self._price

# Usage
p = Product("Laptop", 1000)
print(p.price)        # 1000 (calls getter)
p.price = 1200        # Calls setter (validates)
# p.price = -100      # ValueError!
                </pre>
            </div>
        </div>
        
        <div>
            <h4 style="color: #2c3e50;">TRADITIONAL WAY (Java-style)</h4>
            <div style="background-color: #e8f8e8; padding: 15px; border-radius: 5px;">
                <pre>
class Product:
    def __init__(self, name, price):
        self.name = name
        self._price = price
    
    def get_price(self):
        """Getter method"""
        return self._price
    
    def set_price(self, value):
        """Setter method"""
        if value < 0:
            raise ValueError("Price cannot be negative")
        self._price = value

# Usage
p = Product("Laptop", 1000)
print(p.get_price())   # Must call method
p.set_price(1200)      # Must call method
                </pre>
            </div>
        </div>
    </div>
    
    <b>Why Use Properties (@property)?</b>
    <div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <ul>
            <li><b>Clean syntax:</b> <code>obj.price</code> instead of <code>obj.get_price()</code></li>
            <li><b>Validation:</b> Control what values can be set</li>
            <li><b>Compatibility:</b> Can add logic without breaking existing code</li>
            <li><b>Computed attributes:</b> Calculate values on the fly</li>
        </ul>
    </div>
    
    <hr/>
    
    <b>d. Special/Dunder Methods (Magic Methods)</b>
    
    <div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
class Product:
    def __init__(self, name, price, quantity):
        self.name = name
        self.price = price
        self.quantity = quantity
    
    # String representation for users
    def __str__(self):
        return f"{self.name}: \\\${self.price} ({self.quantity} in stock)"
    
    # String representation for developers
    def __repr__(self):
        return f"Product('{self.name}', {self.price}, {self.quantity})"
    
    # Compare products by total value
    def __lt__(self, other):
        return (self.price * self.quantity) < (other.price * other.quantity)
    
    # Check if product is "truthy" (has stock)
    def __bool__(self):
        return self.quantity > 0
    
    # Get length (total items in stock)
    def __len__(self):
        return self.quantity

# Usage
p = Product("Laptop", 1000, 5)
print(str(p))      # "Laptop: $1000 (5 in stock)" - user-friendly
print(repr(p))     # "Product('Laptop', 1000, 5)" - debug-friendly
print(bool(p))     # True (has stock)
print(len(p))      # 5
        </pre>
    </div>
    
    <b>Common Dunder Methods:</b>
    <div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <table style="width: 100%;">
            <tr>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;"><code>__init__</code></td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Constructor</td>
            </tr>
            <tr>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;"><code>__str__</code></td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">str() and print() representation</td>
            </tr>
            <tr>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;"><code>__repr__</code></td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">repr() and developer representation</td>
            </tr>
            <tr>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;"><code>__len__</code></td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">len() support</td>
            </tr>
            <tr>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;"><code>__eq__, __lt__, __gt__</code></td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Comparison operators</td>
            </tr>
            <tr>
                <td style="padding: 8px;"><code>__add__, __sub__</code></td>
                <td style="padding: 8px;">Arithmetic operators</td>
            </tr>
        </table>
    </div>
    
    <hr/>
    
    <div class="assignment-box">
        <h4>Assignment: Enhanced Product Class</h4>
        
        <b>Part 1: Add Class Attributes and Methods</b>
        <div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
            Enhance your Product class with:
            <ol>
                <li><b>Class attributes:</b>
                    <ul>
                        <li><code>next_sku = 1000</code> (auto-incrementing)</li>
                        <li><code>tax_rate = 0.15</code> (shared by all)</li>
                    </ul>
                </li>
                <li><b>Instance methods:</b>
                    <ul>
                        <li><code>get_total_value()</code> - price √ó quantity</li>
                        <li><code>is_low_stock()</code> - returns True if quantity < 5</li>
                    </ul>
                </li>
                <li><b>Class method:</b>
                    <ul>
                        <li><code>set_tax_rate(new_rate)</code> - changes tax for all products</li>
                    </ul>
                </li>
                <li><b>Static method:</b>
                    <ul>
                        <li><code>format_price(amount)</code> - returns "$1,000.00" format</li>
                    </ul>
                </li>
            </ol>
        </div>
        
        <b>Part 2: Implement Properties</b>
        <div style="background-color: #fff0e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
            Convert price to a property:
            <pre>
class Product:
    def __init__(self, name, price):
        self.name = name
        self._price = price  # Private by convention
    
    @property
    def price(self):
        return self._price
    
    @price.setter
    def price(self, value):
        if value < 0:
            raise ValueError("Price cannot be negative")
        self._price = value
        
    @property
    def price_with_tax(self):
        """Computed property - no setter"""
        return self._price * (1 + Product.tax_rate)
            </pre>
        </div>
        
        <b>Part 3: Add Special Methods</b>
        <div style="background-color: #f0fff0; padding: 15px; margin: 10px 0; border-radius: 5px;">
            Implement these dunder methods:
            <pre>
def __str__(self):
    return f"{self.name} - \\\${self.price}"

def __repr__(self):
    return f"Product(name='{self.name}', price={self.price})"

def __eq__(self, other):
    return self.sku == other.sku

def __lt__(self, other):
    return self.price < other.price
            </pre>
        </div>
        
        <b>Test Your Implementation:</b>
        <div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px; font-family: monospace;">
            # Create products
            p1 = Product("Laptop", 1000)
            p2 = Product("Mouse", 50)
            
            # Test properties
            print(p1.price_with_tax)  # Should calculate automatically
            
            # Test comparisons
            print(p1 > p2)  # Should use __lt__/__gt__
            
            # Test class method
            Product.set_tax_rate(0.20)
            print(p1.price_with_tax)  # Should use new rate
        </div>
    </div>
    
    <hr/>
    
    <h3>Quick Reference</h3>
    
    <div style="background-color: #f9f9f9; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <table style="width: 100%;">
            <tr>
                <td style="padding: 8px; border-bottom: 1px solid #ccc; width: 30%;"><b>self.attribute</b></td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Instance attribute (unique per object)</td>
            </tr>
            <tr>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>ClassName.attribute</b></td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Class attribute (shared)</td>
            </tr>
            <tr>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>@classmethod</b></td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Method that works on class level</td>
            </tr>
            <tr>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>@staticmethod</b></td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Utility function (no self/cls)</td>
            </tr>
            <tr>
                <td style="padding: 8px;"><b>@property</b></td>
                <td style="padding: 8px;">Getter method that looks like attribute</td>
            </tr>
        </table>
    </div>
    
    <div style="background-color: #e8f8e8; padding: 20px; margin: 20px 0; border-radius: 5px; border-left: 5px solid #2ecc71;">
        <h4>üöÄ Homework: Practice Methods</h4>
        <p>Add these features to your Product class:</p>
        <ol>
            <li>Create a <code>@classmethod</code> that creates a product from a dictionary</li>
            <li>Add a <code>@staticmethod</code> that validates SKU format</li>
            <li>Implement <code>__add__</code> method to combine quantities of same products</li>
            <li>Add a <code>last_updated</code> property that tracks when price was changed</li>
        </ol>
    </div>`
            },
            "6-3": {
                icon: "fa-cogs",
                title: "The __init__ Constructor - Building Objects Properly",
                html: `<h1>Week 6, Day 3: The __init__ Constructor - Building Objects Properly</h1>
    <p>Today we master the constructor - the special method that brings objects to life and sets up their initial state.</p>
    
    <div class="analogy-box">
        <b>Analogy: Birth Certificate & Setup üèóÔ∏è</b><br/>
        <ul style="margin-top: 10px;">
            <li><b>Class Definition</b> = DNA blueprint (potential)</li>
            <li><b>__init__()</b> = Birth process + initial setup</li>
            <li><b>Parameters</b> = Required information at birth</li>
            <li><b>Default Values</b> = Standard equipment everyone gets</li>
            <li><b>Validation</b> = Health check at birth</li>
        </ul>
    </div>

    <h3>Key Topics</h3>
    <ul>
        <li>Understanding __init__() purpose</li>
        <li>Parameters vs Arguments in constructors</li>
        <li>Default parameter values</li>
        <li>Type validation and error handling</li>
        <li>Multiple constructors (@classmethod alternative)</li>
        <li>Practical: Robust Product Constructor</li>
    </ul>

    <h3>In-Depth Explanation</h3>
    
    <b>a. What is __init__() and Why We Need It</b>
    
    <div style="background-color: #f9f9f9; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <b>The Object Creation Process:</b>
        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin: 15px 0;">
            <div style="background-color: #e8f4f8; padding: 10px; border-radius: 5px; text-align: center;">
                <b>Step 1</b><br/>Memory Allocation
                <div style="font-size: 12px; margin-top: 5px;">
                    Python reserves memory<br/>
                    <code>obj = Product()</code>
                </div>
            </div>
            <div style="background-color: #ffeaa7; padding: 10px; border-radius: 5px; text-align: center;">
                <b>Step 2</b><br/>__new__() Method
                <div style="font-size: 12px; margin-top: 5px;">
                    Creates empty object<br/>
                    <code>__new__(cls)</code>
                </div>
            </div>
            <div style="background-color: #a3e4d7; padding: 10px; border-radius: 5px; text-align: center;">
                <b>Step 3</b><br/>__init__() Method
                <div style="font-size: 12px; margin-top: 5px;">
                    Initializes object<br/>
                    <code>__init__(self, ...)</code>
                </div>
            </div>
        </div>
        
        <b>__init__() vs __new__():</b>
        <div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
            <table style="width: 100%;">
                <tr>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc; width: 40%;"><b>__new__(cls)</b></td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>__init__(self)</b></td>
                </tr>
                <tr>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Creates the object</td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Initializes the object</td>
                </tr>
                <tr>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Static method (rarely overridden)</td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Instance method (always used)</td>
                </tr>
                <tr>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Returns new instance</td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Returns None</td>
                </tr>
                <tr>
                    <td style="padding: 8px;"><b>Analogy:</b> Building the house shell</td>
                    <td style="padding: 8px;"><b>Analogy:</b> Furnishing the house</td>
                </tr>
            </table>
        </div>
    </div>
    
    <hr/>
    
    <b>b. Basic vs Advanced Constructors</b>
    
    <div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
# BASIC CONSTRUCTOR (What we know)
class Product:
    def __init__(self, name, price):
        self.name = name
        self.price = price

# ADVANCED CONSTRUCTOR (Today's lesson)
class Product:
    def __init__(self, name, price, quantity=0, category="Uncategorized", 
                 sku=None, description=""):
        """Initialize a Product with validation and defaults"""
        
        # Validation
        if not isinstance(name, str):
            raise TypeError("Name must be a string")
        if price < 0:
            raise ValueError("Price cannot be negative")
        if quantity < 0:
            raise ValueError("Quantity cannot be negative")
        
        # Assignment
        self.name = name
        self.price = price
        self.quantity = quantity
        self.category = category
        self.sku = sku or self._generate_sku()
        self.description = description
        self.created_at = datetime.now()
        
        # Class-level tracking
        Product.total_products += 1
        </pre>
    </div>
    
    <b>Constructor Components:</b>
    <div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <table style="width: 100%;">
            <tr>
                <td style="padding: 8px; border-bottom: 1px solid #ccc; width: 30%;"><b>Required Parameters</b></td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;"><code>name, price</code> (no default)</td>
            </tr>
            <tr>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>Default Parameters</b></td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;"><code>quantity=0, category="General"</code></td>
            </tr>
            <tr>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>Validation</b></td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Type/range checks before assignment</td>
            </tr>
            <tr>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>Computed Values</b></td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;"><code>sku or self._generate_sku()</code></td>
            </tr>
            <tr>
                <td style="padding: 8px;"><b>Automatic Attributes</b></td>
                <td style="padding: 8px;"><code>created_at = datetime.now()</code></td>
            </tr>
        </table>
    </div>
    
    <hr/>
    
    <b>c. Default Parameter Values and Pitfalls</b>
    
    <div style="background-color: #f9f9f9; padding: 15px; margin: 10px 0; border-radius: 5px; display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
        <div>
            <h4 style="color: #2c3e50;">CORRECT: Immutable Defaults</h4>
            <div style="background-color: #e8f4f8; padding: 15px; border-radius: 5px;">
                <pre>
# Safe - immutable defaults
def __init__(self, name, price=0.0, quantity=0):
    self.name = name
    self.price = price  # float is immutable
    self.quantity = quantity  # int is immutable

# Usage
p1 = Product("Laptop")          # price=0.0, quantity=0
p2 = Product("Mouse", 50)       # quantity=0
p3 = Product("Keyboard", 80, 5) # All specified
                </pre>
            </div>
            <ul style="margin-top: 10px;">
                <li><b>Safe:</b> Numbers, strings, tuples</li>
                <li><b>Evaluated once</b> at function definition</li>
                <li><b>Each object</b> gets independent copy</li>
            </ul>
        </div>
        
        <div>
            <h4 style="color: #e74c3c;">DANGEROUS: Mutable Defaults</h4>
            <div style="background-color: #ffe6e6; padding: 15px; border-radius: 5px;">
                <pre>
# DANGER - mutable default (COMMON BUG!)
def __init__(self, name, tags=[]):  # WRONG!
    self.name = name
    self.tags = tags  # All objects share SAME list!

# Test the bug
p1 = Product("Laptop")
p1.tags.append("electronics")

p2 = Product("Mouse")
print(p2.tags)  # ['electronics']! WRONG!

# Solution: Use None as default
def __init__(self, name, tags=None):  # RIGHT
    self.name = name
    self.tags = tags or []  # New list for each object
                </pre>
            </div>
            <ul style="margin-top: 10px;">
                <li><b>Dangerous:</b> Lists, dicts, sets</li>
                <li><b>Shared</b> between all objects!</li>
                <li><b>Solution:</b> Use <code>None</code> as default</li>
            </ul>
        </div>
    </div>
    
    <b>The Mutable Default Bug Explained:</b>
    <div style="background-color: #fff8e8; padding: 15px; margin: 10px 0; border-radius: 5px; text-align: center;">
        <div style="display: inline-block; text-align: left;">
            <div style="background-color: #ff6b6b; color: white; padding: 10px; border-radius: 5px; width: 400px;">
                <b>FUNCTION DEFINITION TIME:</b><br/>
                Python creates: <code>tags = []</code> (ONE list object)
            </div>
            <div style="text-align: center; margin: 10px 0;">‚ñº<br/>Same list reused!</div>
            <div style="display: flex; gap: 10px; justify-content: center;">
                <div style="background-color: #74b9ff; color: white; padding: 10px; border-radius: 5px; width: 120px;">
                    <b>Product 1</b><br/>
                    self.tags ‚Üí<br/>
                    ‚¨á<br/>
                    SAME list
                </div>
                <div style="background-color: #74b9ff; color: white; padding: 10px; border-radius: 5px; width: 120px;">
                    <b>Product 2</b><br/>
                    self.tags ‚Üí<br/>
                    ‚¨á<br/>
                    SAME list
                </div>
                <div style="background-color: #74b9ff; color: white; padding: 10px; border-radius: 5px; width: 120px;">
                    <b>Product 3</b><br/>
                    self.tags ‚Üí<br/>
                    ‚¨á<br/>
                    SAME list
                </div>
            </div>
            <div style="margin-top: 10px; text-align: center;">
                Modifying one modifies ALL!
            </div>
        </div>
    </div>
    
    <hr/>
    
    <b>d. Constructor Validation - Making Robust Objects</b>
    
    <div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
class Product:
    VALID_CATEGORIES = {"Electronics", "Clothing", "Books", "Food", "Other"}
    
    def __init__(self, name, price, quantity=0, category="Other"):
        # Type validation
        if not isinstance(name, str):
            raise TypeError(f"Name must be string, got {type(name).__name__}")
        if not isinstance(price, (int, float)):
            raise TypeError(f"Price must be number, got {type(price).__name__}")
        if not isinstance(quantity, int):
            raise TypeError(f"Quantity must be integer, got {type(quantity).__name__}")
        
        # Value validation
        if len(name.strip()) == 0:
            raise ValueError("Product name cannot be empty")
        if price < 0:
            raise ValueError(f"Price cannot be negative: \\\${price}")
        if quantity < 0:
            raise ValueError(f"Quantity cannot be negative: {quantity}")
        if category not in self.VALID_CATEGORIES:
            raise ValueError(f"Invalid category. Must be one of: {self.VALID_CATEGORIES}")
        
        # Business rule validation
        if category == "Food" and quantity > 1000:
            raise ValueError("Food items limited to 1000 units for safety")
        
        # Assign validated values
        self.name = name.strip()
        self.price = float(price)
        self.quantity = quantity
        self.category = category
        
        # Generate derived attributes
        self.total_value = self.price * self.quantity
        self.is_available = quantity > 0
        </pre>
    </div>
    
    <b>Validation Types:</b>
    <div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <table style="width: 100%;">
            <tr>
                <td style="padding: 8px; border-bottom: 1px solid #ccc; width: 30%;"><b>Type Validation</b></td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;"><code>isinstance(var, type)</code></td>
            </tr>
            <tr>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>Value Validation</b></td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Range, length, format checks</td>
            </tr>
            <tr>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>Business Validation</b></td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Domain-specific rules</td>
            </tr>
            <tr>
                <td style="padding: 8px;"><b>Sanitization</b></td>
                <td style="padding: 8px;">Cleaning input (strip(), lower(), etc.)</td>
            </tr>
        </table>
    </div>
    
    <hr/>
    
    <b>e. Multiple Constructors (@classmethod alternative)</b>
    
    <div style="background-color: #f9f9f9; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <b>Problem:</b> Python doesn't allow multiple __init__ methods<br/>
        <b>Solution:</b> Use @classmethod as alternative constructors
        <div style="background-color: #e8f4f8; padding: 15px; margin: 10px 0; border-radius: 5px;">
            <pre>
class Product:
    def __init__(self, name, price, quantity=0):
        self.name = name
        self.price = price
        self.quantity = quantity
    
    @classmethod
    def from_string(cls, product_string):
        """Create Product from "Name|Price|Quantity" string"""
        try:
            name, price_str, qty_str = product_string.split("|")
            price = float(price_str)
            quantity = int(qty_str)
            return cls(name, price, quantity)
        except (ValueError, TypeError) as e:
            raise ValueError(f"Invalid product string: {product_string}") from e
    
    @classmethod
    def from_dict(cls, data):
        """Create Product from dictionary"""
        required_keys = {"name", "price"}
        if not required_keys.issubset(data.keys()):
            raise ValueError(f"Dictionary missing required keys: {required_keys}")
        
        return cls(
            name=data["name"],
            price=data["price"],
            quantity=data.get("quantity", 0),
            category=data.get("category", "Other")
        )
    
    @classmethod
    def create_sale_item(cls, name, original_price):
        """Create Product with 20% discount"""
        sale_price = original_price * 0.8
        return cls(name, sale_price, quantity=1)

# Usage
p1 = Product("Laptop", 1000)  # Regular constructor
p2 = Product.from_string("Mouse|25|50")  # From string
p3 = Product.from_dict({"name": "Keyboard", "price": 80})  # From dict
p4 = Product.create_sale_item("Monitor", 500)  # Pre-configured
            </pre>
        </div>
    </div>
    
    <b>Common Alternative Constructor Patterns:</b>
    <div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <ul>
            <li><code>from_csv()</code> - Create from CSV row</li>
            <li><code>from_json()</code> - Create from JSON data</li>
            <li><code>create_empty()</code> - Create with default values</li>
            <li><code>create_template()</code> - Create pre-configured object</li>
            <li><code>from_database()</code> - Create from database record</li>
        </ul>
    </div>
    
    <hr/>
    
    <div class="assignment-box">
        <h4>Assignment: Build a Robust Product Constructor</h4>
        
        <b>Part 1: Basic Constructor with Validation</b>
        <div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
            Create a Product class constructor with these validations:
            <ol>
                <li><b>Name:</b> String, non-empty, max 100 characters</li>
                <li><b>Price:</b> Positive number (int or float)</li>
                <li><b>Quantity:</b> Non-negative integer</li>
                <li><b>Category:</b> Must be from predefined list</li>
                <li><b>SKU:</b> Auto-generate if not provided</li>
                <li><b>Description:</b> Optional, string</li>
            </ol>
        </div>
        
        <b>Part 2: Handle Mutable Defaults Safely</b>
        <div style="background-color: #fff0e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
            Add these attributes safely:
            <pre>
def __init__(self, name, price, tags=None, suppliers=None, reviews=None):
    self.name = name
    self.price = price
    self.tags = tags or []           # Safe mutable default
    self.suppliers = suppliers or []  # Safe mutable default
    self.reviews = reviews or []      # Safe mutable default
    self.price_history = [price]      # New list for each object
            </pre>
        </div>
        
        <b>Part 3: Create Alternative Constructors</b>
        <div style="background-color: #f0fff0; padding: 15px; margin: 10px 0; border-radius: 5px;">
            Implement these class methods:
            <ol>
                <li><code>from_csv_row(csv_row)</code> - "Laptop,1000,5,Electronics"</li>
                <li><code>from_json(json_data)</code> - {"name": "...", "price": ...}</li>
                <li><code>create_bulk_item(name, price, pack_size=12)</code> - Sets quantity to pack_size</li>
                <li><code>create_demo_product()</code> - Returns a pre-configured demo product</li>
            </ol>
        </div>
        
        <b>Part 4: Error Testing</b>
        <div style="background-color: #ffe6e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
            Test that these raise appropriate errors:
            <pre>
# Should raise TypeError
Product(123, 100)                    # Name not string
Product("Laptop", "expensive")       # Price not number

# Should raise ValueError
Product("", 100)                     # Empty name
Product("Laptop", -100)              # Negative price
Product("Laptop", 100, -5)           # Negative quantity
Product("Laptop", 100, category="Invalid")  # Bad category
            </pre>
        </div>
    </div>
    
    <hr/>
    
    <h3>Common Mistakes & Solutions</h3>
    
    <b>Mistake 1: Mutable default arguments</b>
    <div style="background-color: #ffe6e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
# WRONG - Shared list bug!
def __init__(self, tags=[]):
    self.tags = tags

# RIGHT - Use None pattern
def __init__(self, tags=None):
    self.tags = tags or []
        </pre>
    </div>
    
    <b>Mistake 2: No validation</b>
    <div style="background-color: #ffe6e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
# WRONG - Accepts garbage
def __init__(self, name, price):
    self.name = name    # Could be empty or wrong type
    self.price = price  # Could be negative

# RIGHT - Validate first
def __init__(self, name, price):
    if not name or not isinstance(name, str):
        raise ValueError("Invalid name")
    if price < 0:
        raise ValueError("Price cannot be negative")
    self.name = name
    self.price = price
        </pre>
    </div>
    
    <b>Mistake 3: Forgetting return in alternative constructors</b>
    <div style="background-color: #ffe6e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
# WRONG - Forgets to return instance
@classmethod
def from_string(cls, data):
    # ... parse data ...
    cls(name, price)    # Creates but doesn't return!

# RIGHT - Return the instance
@classmethod
def from_string(cls, data):
    # ... parse data ...
    return cls(name, price)  # Return it!
        </pre>
    </div>
    
    <hr/>
    
    <div style="background-color: #e8f8e8; padding: 20px; margin: 20px 0; border-radius: 5px; border-left: 5px solid #2ecc71;">
        <h4>üöÄ Homework: Constructor Challenge</h4>
        <p>Create a <code>Warehouse</code> class with these constructor features:</p>
        <ol>
            <li><b>Required:</b> warehouse_name (string), location (string)</li>
            <li><b>Defaults:</b> capacity=1000, products=None (safe mutable!)</li>
            <li><b>Validation:</b> capacity positive, name non-empty</li>
            <li><b>Alternative constructors:</b>
                <ul>
                    <li><code>from_config_file(config_path)</code></li>
                    <li><code>create_temp_warehouse(name, days=7)</code> (auto-expires)</li>
                </ul>
            </li>
            <li><b>Auto-generated:</b> warehouse_id, created_date</li>
        </ol>
        <p><b>Bonus:</b> Make the constructor raise custom exceptions like <code>InvalidWarehouseError</code></p>
    </div>`
            },
            "6-4": {
                icon: "fa-car",
                title: "Practice: Modeling a Car Class",
                html: `<h1>Week 6, Day 4: Practice - Modeling a Complete Car Class</h1>
    <p>Today we apply everything we've learned about OOP by building a comprehensive Car class from scratch.</p>
    
    <div class="analogy-box">
        <b>Analogy: Real-World Car Manufacturing üöó</b><br/>
        <ul style="margin-top: 10px;">
            <li><b>Class Design</b> = Engineering specifications</li>
            <li><b>Attributes</b> = Car specifications (make, model, color)</li>
            <li><b>Methods</b> = Car behaviors (drive, brake, honk)</li>
            <li><b>Properties</b> = Computed values (mpg, value)</li>
            <li><b>Validation</b> = Quality control checks</li>
        </ul>
    </div>

    <h3>Key Topics</h3>
    <ul>
        <li>Complete class design from requirements</li>
        <li>Implementing all OOP concepts together</li>
        <li>Creating realistic object interactions</li>
        <li>Testing and debugging objects</li>
        <li>Practical: Build a Car Dealership System</li>
    </ul>

    <h3>Complete Car Class Implementation</h3>
    
    <b>a. Requirements Analysis</b>
    
    <div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <b>Car Class Requirements:</b>
        <table style="width: 100%; margin-top: 10px;">
            <tr>
                <td style="padding: 8px; border-bottom: 1px solid #ccc; width: 30%;"><b>Category</b></td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>Requirements</b></td>
            </tr>
            <tr>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Basic Attributes</td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">make, model, year, color, price</td>
            </tr>
            <tr>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Dynamic Attributes</td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">mileage, fuel_level, is_running</td>
            </tr>
            <tr>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Car Actions</td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">start(), drive(), stop(), refuel()</td>
            </tr>
            <tr>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Properties</td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">age, value (depreciation)</td>
            </tr>
            <tr>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Validation</td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Valid years, positive values</td>
            </tr>
            <tr>
                <td style="padding: 8px;">Special Methods</td>
                <td style="padding: 8px;">__str__, __repr__, comparison methods</td>
            </tr>
        </table>
    </div>
    
    <hr/>
    
    <b>b. Complete Car Class Implementation</b>
    
    <div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
import datetime

class Car:
    """A comprehensive Car class for vehicle management"""
    
    # Class attributes (shared)
    FUEL_TYPES = {"gasoline", "diesel", "electric", "hybrid"}
    CURRENT_YEAR = datetime.datetime.now().year
    total_cars_sold = 0
    
    def __init__(self, make, model, year, color, price, 
                 fuel_type="gasoline", fuel_capacity=50):
        """Initialize a Car with comprehensive validation"""
        
        # Validation
        self._validate_make_model(make, model)
        self._validate_year(year)
        self._validate_fuel_type(fuel_type)
        
        # Basic attributes
        self.make = make
        self.model = model
        self.year = year
        self.color = color
        self._price = price  # Private with property
        
        # Fuel system
        self.fuel_type = fuel_type
        self.fuel_capacity = fuel_capacity
        self.fuel_level = fuel_capacity  # Start with full tank
        self.fuel_efficiency = 25  # miles per gallon (default)
        
        # Dynamic state
        self.mileage = 0
        self.is_running = False
        self.service_history = []
        self.last_service_mileage = 0
        
        # Tracking
        self.created_date = datetime.datetime.now()
        Car.total_cars_sold += 1
        self.car_id = f"{make[:3]}{model[:3]}{Car.total_cars_sold:04d}"
    
    def _validate_make_model(self, make, model):
        """Validate make and model"""
        if not isinstance(make, str) or not make.strip():
            raise ValueError("Make must be a non-empty string")
        if not isinstance(model, str) or not model.strip():
            raise ValueError("Model must be a non-empty string")
    
    def _validate_year(self, year):
        """Validate manufacturing year"""
        if not isinstance(year, int):
            raise TypeError("Year must be an integer")
        if year < 1886:  # First car invented
            raise ValueError(f"Year {year} is before cars were invented!")
        if year > Car.CURRENT_YEAR + 1:  # Allow next year's models
            raise ValueError(f"Year {year} is in the future!")
    
    def _validate_fuel_type(self, fuel_type):
        """Validate fuel type"""
        if fuel_type not in Car.FUEL_TYPES:
            raise ValueError(f"Fuel type must be one of: {Car.FUEL_TYPES}")
    
    @property
    def price(self):
        """Get car price"""
        return self._price
    
    @price.setter
    def price(self, value):
        """Set car price with validation"""
        if value < 0:
            raise ValueError("Price cannot be negative")
        self._price = value
    
    @property
    def age(self):
        """Calculate car age in years"""
        return Car.CURRENT_YEAR - self.year
    
    @property
    def current_value(self):
        """Calculate current value with depreciation"""
        # Depreciation: 15% first year, 10% subsequent years
        base_price = self._price
        for i in range(self.age):
            if i == 0:
                base_price *= 0.85  # 15% depreciation first year
            else:
                base_price *= 0.90  # 10% depreciation each year after
        return max(base_price, self._price * 0.1)  # Minimum 10% of original
    
    @property
    def needs_service(self):
        """Check if car needs service (every 5000 miles)"""
        return self.mileage - self.last_service_mileage >= 5000
    
    @property
    def range(self):
        """Calculate remaining range in miles"""
        if self.fuel_type == "electric":
            return self.fuel_level * 4  # Electric: 4 miles per kWh
        else:
            return self.fuel_level * self.fuel_efficiency
    
    # ----- ACTION METHODS -----
    
    def start(self):
        """Start the car engine"""
        if self.fuel_level <= 0:
            return f"Cannot start {self.make} {self.model}: Out of fuel!"
        
        if not self.is_running:
            self.is_running = True
            return f"{self.make} {self.model} engine started. Vroom!"
        return f"{self.make} {self.model} is already running."
    
    def drive(self, miles):
        """Drive the car for specified miles"""
        if not self.is_running:
            return "Start the car first!"
        
        # Calculate fuel needed
        if self.fuel_type == "electric":
            fuel_needed = miles / 4  # kWh needed
        else:
            fuel_needed = miles / self.fuel_efficiency
        
        if fuel_needed > self.fuel_level:
            max_miles = self.range
            return f"Not enough fuel! Can only drive {max_miles:.1f} miles."
        
        # Update car state
        self.mileage += miles
        self.fuel_level -= fuel_needed
        
        # Check for service
        service_msg = ""
        if self.needs_service:
            service_msg = " [Service Due!]"
        
        return f"Drove {miles} miles. Fuel: {self.fuel_level:.1f}/{self.fuel_capacity}{service_msg}"
    
    def stop(self):
        """Stop the car engine"""
        if self.is_running:
            self.is_running = False
            return f"{self.make} {self.model} engine stopped."
        return f"{self.make} {self.model} is already stopped."
    
    def refuel(self, amount=None):
        """Refuel the car"""
        if amount is None:
            amount = self.fuel_capacity - self.fuel_level
        
        if amount <= 0:
            return "Refuel amount must be positive!"
        
        if self.fuel_level + amount > self.fuel_capacity:
            amount = self.fuel_capacity - self.fuel_level
        
        self.fuel_level += amount
        cost = amount * self._get_fuel_price()
        return f"Added {amount:.1f} units. Cost: \\\${cost:.2f}. Tank: {self.fuel_level:.1f}/{self.fuel_capacity}"
    
    def service(self, service_type="standard", cost=0):
        """Record a service"""
        service_record = {
            "date": datetime.datetime.now(),
            "mileage": self.mileage,
            "type": service_type,
            "cost": cost
        }
        self.service_history.append(service_record)
        self.last_service_mileage = self.mileage
        return f"Service recorded: {service_type} at {self.mileage} miles"
    
    def _get_fuel_price(self):
        """Get current fuel price per unit"""
        prices = {
            "gasoline": 3.50,
            "diesel": 3.80,
            "electric": 0.15,  # per kWh
            "hybrid": 3.50     # uses gasoline
        }
        return prices.get(self.fuel_type, 3.50)
    
    # ----- SPECIAL METHODS -----
    
    def __str__(self):
        """User-friendly string"""
        status = "Running" if self.is_running else "Stopped"
        return f"{self.year} {self.make} {self.model} - \\\${self.current_value:,.2f} ({status})"
    
    def __repr__(self):
        """Developer-friendly string"""
        return f"Car(make='{self.make}', model='{self.model}', year={self.year}, price={self._price})"
    
    def __lt__(self, other):
        """Compare by current value"""
        return self.current_value < other.current_value
    
    def __eq__(self, other):
        """Compare by car ID"""
        return self.car_id == other.car_id
    
    # ----- CLASS METHODS -----
    
    @classmethod
    def create_tesla(cls, model="Model 3", year=CURRENT_YEAR, price=40000):
        """Create a pre-configured Tesla"""
        return cls(
            make="Tesla",
            model=model,
            year=year,
            color="White",
            price=price,
            fuel_type="electric",
            fuel_capacity=75  # kWh
        )
    
    @classmethod
    def create_from_dict(cls, car_dict):
        """Create car from dictionary"""
        return cls(**car_dict)
    
    @staticmethod
    def calculate_loan(price, down_payment=0.2, years=5, interest=0.05):
        """Calculate monthly loan payment"""
        principal = price * (1 - down_payment)
        monthly_rate = interest / 12
        months = years * 12
        if monthly_rate == 0:
            return principal / months
        payment = principal * (monthly_rate * (1 + monthly_rate)**months) / ((1 + monthly_rate)**months - 1)
        return payment
        </pre>
    </div>
    
    <hr/>
    
    <b>c. Using the Car Class</b>
    
    <div style="background-color: #f9f9f9; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
# Creating cars
car1 = Car("Toyota", "Camry", 2022, "Blue", 25000)
car2 = Car("Ford", "Mustang", 2023, "Red", 45000, fuel_type="gasoline")
tesla = Car.create_tesla("Model S", 2024, 90000)

# Using properties
print(f"Car age: {car1.age} years")
print(f"Current value: \\\${car1.current_value:,.2f}")
print(f"Range: {car1.range:.1f} miles")

# Car actions
print(car1.start())
print(car1.drive(100))
print(car1.drive(50))
print(car1.refuel(10))
print(car1.stop())

# Service
print(car1.service("oil change", 80))
print(f"Needs service: {car1.needs_service}")

# Comparisons
print(f"Car1 < Car2: {car1 < car2}")
print(f"Car1 == Car2: {car1 == car2}")

# Static method
loan = Car.calculate_loan(25000)
print(f"Monthly loan: \\\${loan:.2f}")
        </pre>
    </div>
    
    <hr/>
    
    <b>d. Car Dealership System Extension</b>
    
    <div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
class Dealership:
    """A dealership that manages multiple cars"""
    
    def __init__(self, name, location):
        self.name = name
        self.location = location
        self.inventory = []
        self.sales_history = []
    
    def add_car(self, car):
        """Add a car to inventory"""
        if not isinstance(car, Car):
            raise TypeError("Can only add Car objects")
        self.inventory.append(car)
        return f"Added {car} to inventory"
    
    def sell_car(self, car_index, customer, price):
        """Sell a car from inventory"""
        if car_index >= len(self.inventory):
            raise IndexError("Car index out of range")
        
        car = self.inventory.pop(car_index)
        sale_record = {
            "car": car,
            "customer": customer,
            "sale_price": price,
            "date": datetime.datetime.now()
        }
        self.sales_history.append(sale_record)
        return f"Sold {car} to {customer} for \\\${price:,.2f}"
    
    def get_inventory_value(self):
        """Calculate total value of inventory"""
        return sum(car.current_value for car in self.inventory)
    
    def find_cars_by_make(self, make):
        """Find all cars of a specific make"""
        return [car for car in self.inventory if car.make.lower() == make.lower()]
    
    def get_cars_needing_service(self):
        """Get all cars that need service"""
        return [car for car in self.inventory if car.needs_service]
    
    def __str__(self):
        return f"{self.name} Dealership ({self.location}) - {len(self.inventory)} cars in stock"
        </pre>
    </div>
    
    <hr/>
    
    <div class="assignment-box">
        <h4>Assignment: Build Your Own Vehicle System</h4>
        
        <b>Part 1: Extend the Car Class</b>
        <div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
            Add these features to the Car class:
            <ol>
                <li><b>Fuel efficiency</b> that decreases with age (1% per year)</li>
                <li><b>Accident history</b> list with repair costs</li>
                <li><b>Insurance cost</b> property based on car value and accident history</li>
                <li><b>Tow capacity</b> for trucks (default 0 for cars)</li>
                <li><b>Custom paint job</b> method that changes color and increases value</li>
            </ol>
        </div>
        
        <b>Part 2: Create Truck Subclass</b>
        <div style="background-color: #fff0e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
            Create a <code>Truck</code> class that inherits from <code>Car</code>:
            <pre>
class Truck(Car):
    def __init__(self, make, model, year, price, 
                 tow_capacity, payload_capacity):
        super().__init__(make, model, year, "White", price, "diesel")
        self.tow_capacity = tow_capacity
        self.payload_capacity = payload_capacity
        self.current_load = 0
    
    def load_cargo(self, weight):
        """Load cargo onto truck"""
        if self.current_load + weight > self.payload_capacity:
            raise ValueError("Exceeds payload capacity")
        self.current_load += weight
        return f"Loaded {weight} lbs. Total: {self.current_load}/{self.payload_capacity}"
    
    def tow(self, trailer_weight):
        """Tow a trailer"""
        if trailer_weight > self.tow_capacity:
            raise ValueError("Trailer too heavy")
        # Reduce fuel efficiency when towing
        self.fuel_efficiency *= 0.7
        return f"Towing {trailer_weight} lbs"
            </pre>
        </div>
        
        <b>Part 3: Create Motorcycle Class</b>
        <div style="background-color: #f0fff0; padding: 15px; margin: 10px 0; border-radius: 5px;">
            Create a <code>Motorcycle</code> class with unique features:
            <ul>
                <li>Different fuel efficiency calculation</li>
                <li>Helmet requirement property</li>
                <li>Wheelie capability method</li>
                <li>Lane splitting allowed (boolean)</li>
            </ul>
        </div>
        
        <b>Part 4: Build a Test Scenario</b>
        <div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px; font-family: monospace;">
        <pre>
            # Test your complete system
            dealership = Dealership("City Motors", "Downtown")
            
            # Add vehicles
            car1 = Car("Honda", "Civic", 2020, 20000)
            truck1 = Truck("Ford", "F-150", 2022, 45000, 10000, 2000)
            bike1 = Motorcycle("Harley", "Sportster", 2023, 15000)
            
            dealership.add_car(car1)
            dealership.add_car(truck1)
            dealership.add_car(bike1)
            
            # Test interactions
            print(f"Total inventory value: \\\${dealership.get_inventory_value():,.2f}")
            
            # Simulate a day
            print(car1.start())
            print(car1.drive(50))
            print(car1.refuel())
            
            print(truck1.load_cargo(1500))
            print(truck1.tow(5000))
            
            # Sell a vehicle
            print(dealership.sell_car(0, "John Smith", 18000))
            </pre>
        </div>
    </div>
    
    <hr/>
    
    <h3>Common Debugging Scenarios</h3>
    
    <b>Scenario 1: Car won't start</b>
    <div style="background-color: #ffe6e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
# Problem
car = Car("Toyota", "Camry", 2022, "Blue", 25000)
car.fuel_level = 0  # Oops, forgot to set
print(car.start())  # "Cannot start Toyota Camry: Out of fuel!"

# Solution: Add fuel
car.refuel()
print(car.start())  # Now works!
        </pre>
    </div>
    
    <b>Scenario 2: Invalid year</b>
    <div style="background-color: #ffe6e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
# Problem
try:
    car = Car("Toyota", "Camry", 3000, "Blue", 25000)
except ValueError as e:
    print(f"Error: {e}")  # "Year 3000 is in the future!"

# Solution: Use valid year
car = Car("Toyota", "Camry", 2022, "Blue", 25000)
        </pre>
    </div>
    
    <b>Scenario 3: Negative price</b>
    <div style="background-color: #ffe6e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
# Problem
car = Car("Toyota", "Camry", 2022, "Blue", 25000)
try:
    car.price = -1000  # Using property setter
except ValueError as e:
    print(f"Error: {e}")  # "Price cannot be negative"

# Solution: Use positive price
car.price = 1000  # Works
        </pre>
    </div>
    
    <hr/>
    
    <h3>Quick Reference: Car Class Features</h3>
    
    <div style="background-color: #f9f9f9; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <table style="width: 100%;">
            <tr>
                <td style="padding: 8px; border-bottom: 1px solid #ccc; width: 25%;"><b>Feature</b></td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>Implementation</b></td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>Example</b></td>
            </tr>
            <tr>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Validation</td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Private _validate methods</td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;"><code>_validate_year()</code></td>
            </tr>
            <tr>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Properties</td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">@property decorator</td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;"><code>current_value</code></td>
            </tr>
            <tr>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Actions</td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Instance methods</td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;"><code>drive(), refuel()</code></td>
            </tr>
            <tr>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Class Methods</td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">@classmethod</td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;"><code>create_tesla()</code></td>
            </tr>
            <tr>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Static Methods</td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">@staticmethod</td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;"><code>calculate_loan()</code></td>
            </tr>
            <tr>
                <td style="padding: 8px;"><b>Special Methods</b></td>
                <td style="padding: 8px;"><b>Dunder methods</b></td>
                <td style="padding: 8px;"><code>__str__, __lt__</code></td>
            </tr>
        </table>
    </div>
    
    <hr/>
    
    <div style="background-color: #e8f8e8; padding: 20px; margin: 20px 0; border-radius: 5px; border-left: 5px solid #2ecc71;">
        <h4>üöÄ Week 6 Review & Preparation for Week 7</h4>
        <p><b>This Week's Accomplishments:</b></p>
        <ul>
            <li>Mastered Classes vs Objects (blueprints vs houses)</li>
            <li>Learned Attributes (data) vs Methods (actions)</li>
            <li>Built robust constructors with validation</li>
            <li>Created a complete Car class with real-world behaviors</li>
        </ul>
        
        <p><b>Next Week Preview: The Four Pillars of OOP</b></p>
        <ol>
            <li><b>Inheritance:</b> Creating child classes (ElectricCar inherits from Car)</li>
            <li><b>Encapsulation:</b> Hiding data (private attributes with getters/setters)</li>
            <li><b>Polymorphism:</b> Same method, different behaviors (Car.drive() vs Boat.drive())</li>
            <li><b>Abstraction:</b> Hiding complexity (you drive a car without knowing engine details)</li>
        </ol>
        
        <p><b>Homework:</b> Create a Vehicle base class and have Car, Truck, and Motorcycle inherit from it.</p>
    </div>
    
    <div style="text-align: center; margin-top: 30px; padding: 15px; background-color: #f8f9fa; border-radius: 5px; border: 2px solid #3498db;">
        <b>üéâ Congratulations! You've completed Week 6 of Object-Oriented Programming!</b><br/>
        You now understand how to design and build classes like a professional.<br/>
        Next week we'll take it to the next level with inheritance and polymorphism!
    </div>`
            },

            "7-1": {
                icon: "fa-sitemap",
                title: "Inheritance - Child Classes & Parent Relationships",
                html: `<h1>Week 7, Day 1: Inheritance - Creating Child Classes from Parents</h1>
    <p>Today we learn about inheritance - the first pillar of OOP that allows classes to inherit attributes and methods from parent classes.</p>
    
    <div class="analogy-box">
        <b>Analogy: Family Tree üë®‚Äçüë©‚Äçüëß‚Äçüë¶</b><br/>
        <ul style="margin-top: 10px;">
            <li><b>Parent Class</b> = Grandparent (shared traits)</li>
            <li><b>Child Class</b> = Parent/Child (inherits + adds own traits)</li>
            <li><b>Inheritance</b> = Genetic inheritance (eye color, height)</li>
            <li><b>Override</b> = Child develops their own personality</li>
            <li><b>super()</b> = Asking parent for advice/help</li>
        </ul>
    </div>

    <h3>Key Topics</h3>
    <ul>
        <li>Understanding parent-child relationships</li>
        <li>Basic inheritance syntax</li>
        <li>The super() function</li>
        <li>Method overriding</li>
        <li>Practical: Vehicle inheritance hierarchy</li>
    </ul>

    <h3>In-Depth Explanation</h3>
    
    <b>a. Why Inheritance? (The Problem It Solves)</b>
    
    <div style="background-color: #f9f9f9; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <b>Problem: Code Duplication</b>
        <div style="background-color: #ffe6e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
            <pre>
# WITHOUT INHERITANCE (Repetitive!)
class Car:
    def __init__(self, make, model, year):
        self.make = make
        self.model = model
        self.year = year
        self.fuel_level = 100
    
    def start(self):
        return "Car engine started"
    
    def drive(self):
        return "Car is driving"

class Truck:
    def __init__(self, make, model, year):
        self.make = make      # DUPLICATED!
        self.model = model    # DUPLICATED!
        self.year = year      # DUPLICATED!
        self.fuel_level = 100 # DUPLICATED!
    
    def start(self):
        return "Truck engine started"  # SIMILAR!
    
    def drive(self):
        return "Truck is driving"      # SIMILAR!

class Motorcycle:
    def __init__(self, make, model, year):
        self.make = make      # DUPLICATED AGAIN!
        self.model = model    # DUPLICATED AGAIN!
        self.year = year      # DUPLICATED AGAIN!
        self.fuel_level = 100 # DUPLICATED AGAIN!
        # ... and so on
            </pre>
        </div>
        
        <b>Solution: Inheritance (DRY Principle)</b>
        <div style="background-color: #e8f8e8; padding: 15px; margin: 10px 0; border-radius: 5px;">
            <pre>
# WITH INHERITANCE (Don't Repeat Yourself!)
class Vehicle:  # Parent/Base class
    def __init__(self, make, model, year):
        self.make = make
        self.model = model
        self.year = year
        self.fuel_level = 100
    
    def start(self):
        return f"{self.make} {self.model} engine started"
    
    def drive(self):
        return f"{self.make} {self.model} is driving"

class Car(Vehicle):  # Child class
    pass  # Inherits everything from Vehicle!

class Truck(Vehicle):  # Child class
    pass  # Inherits everything from Vehicle!

class Motorcycle(Vehicle):  # Child class
    pass  # Inherits everything from Vehicle!
            </pre>
        </div>
        
        <b>Benefits of Inheritance:</b>
        <div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
            <table style="width: 100%;">
                <tr>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>Code Reuse</b></td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Write once, use everywhere</td>
                </tr>
                <tr>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>Maintainability</b></td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Fix once, fix everywhere</td>
                </tr>
                <tr>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>Consistency</b></td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Same interface for all vehicles</td>
                </tr>
                <tr>
                    <td style="padding: 8px;"><b>Extensibility</b></td>
                    <td style="padding: 8px;">Easy to add new vehicle types</td>
                </tr>
            </table>
        </div>
    </div>
    
    <hr/>
    
    <b>b. Inheritance Syntax & Terminology</b>
    
    <div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
# PARENT/BASE/SUPER CLASS (General)
class Animal:
    def __init__(self, name, age):
        self.name = name
        self.age = age
    
    def eat(self):
        return f"{self.name} is eating"
    
    def sleep(self):
        return f"{self.name} is sleeping"

# CHILD/DERIVED/SUB CLASS (Specific)
class Dog(Animal):  # Dog inherits from Animal
    def __init__(self, name, age, breed):
        # Call parent constructor FIRST
        super().__init__(name, age)  # Initialize Animal part
        # Then add Dog-specific attributes
        self.breed = breed
    
    # Dog adds its own methods
    def bark(self):
        return f"{self.name} says: Woof!"
    
    # Dog can override parent methods
    def eat(self):
        # First do parent behavior
        parent_result = super().eat()
        # Then add Dog-specific behavior
        return f"{parent_result} ... and making a mess!"

# Another child class
class Cat(Animal):
    def __init__(self, name, age, color):
        super().__init__(name, age)
        self.color = color
    
    def meow(self):
        return f"{self.name} says: Meow!"
    
    def sleep(self):  # Override completely
        return f"{self.name} is sleeping in a sunbeam"
        </pre>
    </div>
    
    <b>Visual Inheritance Hierarchy:</b>
    <div style="background-color: #fff; padding: 15px; margin: 10px 0; border-radius: 5px; text-align: center;">
        <div style="display: inline-block; text-align: left;">
            <div style="background-color: #3498db; color: white; padding: 15px; border-radius: 5px; width: 200px; margin: 0 auto;">
                <b>Animal (Parent)</b><br/>
                ‚Ä¢ name<br/>
                ‚Ä¢ age<br/>
                ‚Ä¢ eat()<br/>
                ‚Ä¢ sleep()
            </div>
            <div style="text-align: center; margin: 10px 0;">‚ñº Inherits from</div>
            <div style="display: flex; gap: 20px; justify-content: center;">
                <div style="background-color: #2ecc71; color: white; padding: 10px; border-radius: 5px; width: 150px;">
                    <b>Dog (Child)</b><br/>
                    ‚Üê Inherits all<br/>
                    ‚Ä¢ breed<br/>
                    ‚Ä¢ bark()<br/>
                    ‚Ä¢ eat() [overridden]
                </div>
                <div style="background-color: #e74c3c; color: white; padding: 10px; border-radius: 5px; width: 150px;">
                    <b>Cat (Child)</b><br/>
                    ‚Üê Inherits all<br/>
                    ‚Ä¢ color<br/>
                    ‚Ä¢ meow()<br/>
                    ‚Ä¢ sleep() [overridden]
                </div>
            </div>
        </div>
    </div>
    
    <b>Terminology Table:</b>
    <div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <table style="width: 100%;">
            <tr>
                <td style="padding: 8px; border-bottom: 1px solid #ccc; width: 30%;"><b>Parent Class</b></td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Base/Super class that others inherit from</td>
            </tr>
            <tr>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>Child Class</b></td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Derived/Sub class that inherits</td>
            </tr>
            <tr>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>Inheritance</b></td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Child gets all parent attributes/methods</td>
            </tr>
            <tr>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>Override</b></td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Child provides its own version of a method</td>
            </tr>
            <tr>
                <td style="padding: 8px;"><b>super()</b></td>
                <td style="padding: 8px;">Access parent class methods/constructor</td>
            </tr>
        </table>
    </div>
    
    <hr/>
    
    <b>c. The super() Function - Calling Parent Methods</b>
    
    <div style="background-color: #f9f9f9; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <b>super() in Constructors:</b>
        <div style="background-color: #e8f4f8; padding: 15px; margin: 10px 0; border-radius: 5px;">
            <pre>
class Vehicle:
    def __init__(self, make, model, year):
        self.make = make
        self.model = model
        self.year = year
        print(f"Vehicle __init__ called for {make}")
    
    def display_info(self):
        return f"{self.year} {self.make} {self.model}"

class Car(Vehicle):
    def __init__(self, make, model, year, doors):
        # Call parent constructor FIRST
        super().__init__(make, model, year)  # This is REQUIRED!
        # Then initialize Car-specific attributes
        self.doors = doors
        self.is_electric = False
        print(f"Car __init__ called for {make}")
    
    def display_info(self):
        # Get parent's display_info
        parent_info = super().display_info()
        # Add Car-specific info
        return f"{parent_info} with {self.doors} doors"

# Test
car = Car("Toyota", "Camry", 2022, 4)
print(car.display_info())
# Output:
# Vehicle __init__ called for Toyota
# Car __init__ called for Toyota
# 2022 Toyota Camry with 4 doors
            </pre>
        </div>
        
        <b>Common super() Patterns:</b>
        <div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
            <table style="width: 100%;">
                <tr>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>Pattern</b></td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>Example</b></td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>When to Use</b></td>
                </tr>
                <tr>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Constructor Chaining</td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;"><code>super().__init__(...)</code></td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Always in child __init__</td>
                </tr>
                <tr>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Method Extension</td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;"><code>result = super().method()</code></td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Add to parent behavior</td>
                </tr>
                <tr>
                    <td style="padding: 8px;"><b>Complete Override</b></td>
                    <td style="padding: 8px;"><b>Don't call super()</b></td>
                    <td style="padding: 8px;">When behavior is completely different</td>
                </tr>
            </table>
        </div>
    </div>
    
    <hr/>
    
    <b>d. Method Overriding - Customizing Child Behavior</b>
    
    <div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
class Employee:
    """Parent class for all employees"""
    def __init__(self, name, salary):
        self.name = name
        self.salary = salary
    
    def calculate_bonus(self):
        """Default bonus: 5% of salary"""
        return self.salary * 0.05
    
    def get_role(self):
        return "Generic Employee"
    
    def work(self):
        return f"{self.name} is working"

class Developer(Employee):
    """Child class - specializes Employee"""
    def __init__(self, name, salary, programming_language):
        super().__init__(name, salary)
        self.programming_language = programming_language
    
    # OVERRIDE: Different bonus calculation
    def calculate_bonus(self):
        """Developers get 10% bonus"""
        return self.salary * 0.10
    
    # OVERRIDE: Different role description
    def get_role(self):
        return f"Developer specializing in {self.programming_language}"
    
    # EXTEND: Add new method
    def write_code(self):
        return f"{self.name} is writing {self.programming_language} code"

class Manager(Employee):
    """Another child class"""
    def __init__(self, name, salary, team_size):
        super().__init__(name, salary)
        self.team_size = team_size
    
    # OVERRIDE with super() call (extend parent behavior)
    def calculate_bonus(self):
        """Managers get 15% + $100 per team member"""
        base_bonus = super().calculate_bonus()  # Get 5% first
        team_bonus = self.team_size * 100
        return base_bonus + team_bonus
    
    # ADD: New method
    def conduct_meeting(self):
        return f"{self.name} is conducting a meeting with {self.team_size} people"
        </pre>
    </div>
    
    <b>Testing Overrides:</b>
    <div style="background-color: #f9f9f9; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
# Create employees
emp = Employee("John", 50000)
dev = Developer("Sarah", 60000, "Python")
mgr = Manager("Bob", 80000, 5)

# Test overrides
print(emp.calculate_bonus())   # 2500 (5%)
print(dev.calculate_bonus())   # 6000 (10%) - OVERRIDDEN
print(mgr.calculate_bonus())   # 4000 + 500 = 4500 (5% + team bonus)

print(emp.get_role())          # "Generic Employee"
print(dev.get_role())          # "Developer specializing in Python" - OVERRIDDEN
print(mgr.get_role())          # "Generic Employee" (not overridden)

# Test new methods
print(dev.write_code())        # "Sarah is writing Python code"
print(mgr.conduct_meeting())   # "Bob is conducting a meeting with 5 people"
        </pre>
    </div>
    
    <hr/>
    
    <b>e. Practical: Complete Vehicle Inheritance Hierarchy</b>
    
    <div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
class Vehicle:
    """Base class for all vehicles"""
    def __init__(self, make, model, year, color):
        self.make = make
        self.model = model
        self.year = year
        self.color = color
        self.mileage = 0
        self.is_running = False
        self.speed = 0
    
    def start(self):
        self.is_running = True
        return f"{self.make} {self.model} started"
    
    def stop(self):
        self.is_running = False
        self.speed = 0
        return f"{self.make} {self.model} stopped"
    
    def accelerate(self, increment):
        if self.is_running:
            self.speed += increment
            return f"Accelerating to {self.speed} km/h"
        return "Start the vehicle first"
    
    def display_info(self):
        return f"{self.year} {self.make} {self.model} ({self.color})"

class Car(Vehicle):
    """Car specializes Vehicle"""
    def __init__(self, make, model, year, color, doors, fuel_type):
        super().__init__(make, model, year, color)
        self.doors = doors
        self.fuel_type = fuel_type
        self.trunk_capacity = 15  # cubic feet
    
    # Override with extension
    def start(self):
        result = super().start()
        return f"{result} - Car ready to drive"
    
    # Add Car-specific method
    def open_trunk(self):
        return f"Car trunk opened ({self.trunk_capacity} cu ft capacity)"
    
    # Override display
    def display_info(self):
        base_info = super().display_info()
        return f"{base_info} - {self.doors} door {self.fuel_type} car"

class Motorcycle(Vehicle):
    """Motorcycle specializes Vehicle"""
    def __init__(self, make, model, year, color, has_sidecar):
        super().__init__(make, model, year, color)
        self.has_sidecar = has_sidecar
        self.helmet_included = True
    
    # Override completely different
    def start(self):
        self.is_running = True
        return f"{self.make} {self.model} roared to life!"
    
    # Add Motorcycle-specific method
    def do_wheelie(self):
        if self.speed > 30:
            return "Performing a wheelie! üèçÔ∏è"
        return "Need more speed for a wheelie"
    
    # Override display
    def display_info(self):
        base_info = super().display_info()
        sidecar = "with sidecar" if self.has_sidecar else "without sidecar"
        return f"{base_info} - Motorcycle {sidecar}"

class Truck(Vehicle):
    """Truck specializes Vehicle"""
    def __init__(self, make, model, year, color, cargo_capacity):
        super().__init__(make, model, year, color)
        self.cargo_capacity = cargo_capacity  # tons
        self.current_cargo = 0
    
    # Override with different behavior
    def accelerate(self, increment):
        # Trucks accelerate slower when carrying cargo
        effective_increment = increment / (1 + self.current_cargo)
        self.speed += effective_increment
        return f"Truck accelerating to {self.speed:.1f} km/h (loaded: {self.current_cargo} tons)"
    
    # Add Truck-specific method
    def load_cargo(self, weight):
        if self.current_cargo + weight <= self.cargo_capacity:
            self.current_cargo += weight
            return f"Loaded {weight} tons. Total: {self.current_cargo}/{self.cargo_capacity}"
        return f"Cannot load {weight} tons. Capacity exceeded!"
        </pre>
    </div>
    
    <hr/>
    
    <div class="assignment-box">
        <h4>Assignment: Build an Employee Inheritance System</h4>
        
        <b>Part 1: Create Base Employee Class</b>
        <div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
            Create <code>Employee</code> class with:
            <ul>
                <li>Attributes: emp_id, name, department, base_salary</li>
                <li>Methods:
                    <ul>
                        <li><code>calculate_pay()</code> - returns base_salary</li>
                        <li><code>get_details()</code> - returns employee info</li>
                        <li><code>work()</code> - returns "Working on tasks"</li>
                    </ul>
                </li>
            </ul>
        </div>
        
        <b>Part 2: Create Specialized Employee Classes</b>
        <div style="background-color: #fff0e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
            Create these child classes that inherit from Employee:
            <ol>
                <li><b>HourlyEmployee:</b> Adds hours_worked, hourly_rate. Overrides calculate_pay()</li>
                <li><b>SalesEmployee:</b> Adds sales_amount, commission_rate. Overrides calculate_pay()</li>
                <li><b>Manager:</b> Adds team_size, bonus_per_person. Overrides calculate_pay() and work()</li>
                <li><b>Intern:</b> Adds university, duration_months. Overrides calculate_pay() (always 0)</li>
            </ol>
        </div>
        
        <b>Part 3: Test Your Inheritance Hierarchy</b>
        <div style="background-color: #f0fff0; padding: 15px; margin: 10px 0; border-radius: 5px;">
            <pre>
# Test scenarios
employees = [
    Employee("E001", "John", "HR", 50000),
    HourlyEmployee("E002", "Sarah", "IT", 0, 160, 25),
    SalesEmployee("E003", "Mike", "Sales", 30000, 100000, 0.10),
    Manager("E004", "Lisa", "Management", 70000, 8, 1000),
    Intern("E005", "Alex", "Engineering", 0, "State University", 6)
]

for emp in employees:
    print(f"{emp.name}: \\\${emp.calculate_pay():,.2f}")
    print(f"  {emp.work()}")
            </pre>
        </div>
        
        <b>Expected Output:</b>
        <div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px; font-family: monospace;">
            John: $50,000.00
              Working on tasks
            Sarah: $4,000.00  (160 hours √ó $25/hour)
              Working on tasks
            Mike: $40,000.00  ($30,000 + 10% of $100,000 sales)
              Working on tasks
            Lisa: $78,000.00  ($70,000 + $1,000 √ó 8 team members)
              Managing team of 8 people
            Alex: $0.00
              Learning and assisting (Intern from State University)
        </div>
    </div>
    
    <hr/>
    
    <h3>Common Mistakes & Solutions</h3>
    
    <b>Mistake 1: Forgetting super().__init__()</b>
    <div style="background-color: #ffe6e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
# WRONG - Parent attributes not initialized
class Car(Vehicle):
    def __init__(self, doors):
        self.doors = doors  # ERROR! make, model, year not set!

# RIGHT - Call parent constructor
class Car(Vehicle):
    def __init__(self, make, model, year, doors):
        super().__init__(make, model, year)  # REQUIRED!
        self.doors = doors
        </pre>
    </div>
    
    <b>Mistake 2: Incorrect inheritance order</b>
    <div style="background-color: #ffe6e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
# WRONG - Car inherits from Motorcycle? Doesn't make sense!
class Car(Motorcycle):
    pass

# RIGHT - Logical inheritance hierarchy
class Vehicle:
    pass

class Car(Vehicle):  # Car IS-A Vehicle
    pass

class Motorcycle(Vehicle):  # Motorcycle IS-A Vehicle
    pass
        </pre>
    </div>
    
    <b>Mistake 3: Overusing inheritance (when composition is better)</b>
    <div style="background-color: #ffe6e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
# WRONG - Bad inheritance (Engine IS-NOT-A Car)
class Engine:
    def start(self):
        return "Engine starting"

class Car(Engine):  # Car has-an Engine, Car is-not-an Engine
    pass

# BETTER - Use composition (HAS-A relationship)
class Engine:
    def start(self):
        return "Engine starting"

class Car:
    def __init__(self):
        self.engine = Engine()  # Car HAS-A Engine
    
    def start(self):
        return self.engine.start()  # Delegate to engine
        </pre>
    </div>
    
    <hr/>
    
    <h3>Quick Reference: Inheritance Rules</h3>
    
    <div style="background-color: #f9f9f9; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <table style="width: 100%;">
            <tr>
                <td style="padding: 8px; border-bottom: 1px solid #ccc; width: 30%;"><b>Syntax</b></td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;"><code>class Child(Parent):</code></td>
            </tr>
            <tr>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>Constructor Chaining</b></td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;"><code>super().__init__(...)</code></td>
            </tr>
            <tr>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>Method Override</b></td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Define same method name in child</td>
            </tr>
            <tr>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>Access Parent Method</b></td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;"><code>super().method_name()</code></td>
            </tr>
            <tr>
                <td style="padding: 8px;"><b>Check Inheritance</b></td>
                <td style="padding: 8px;"><code>isinstance(obj, Class)</code> or <code>issubclass(Child, Parent)</code></td>
            </tr>
        </table>
    </div>
    
    <div style="background-color: #e8f8e8; padding: 20px; margin: 20px 0; border-radius: 5px; border-left: 5px solid #2ecc71;">
        <h4>üöÄ Homework: Design an Inheritance Hierarchy</h4>
        <p>Design and implement a <code>BankAccount</code> inheritance system:</p>
        <ol>
            <li><b>Base Class:</b> BankAccount with account_number, balance, owner</li>
            <li><b>Child Classes:</b>
                <ul>
                    <li><code>SavingsAccount</code> - adds interest_rate, minimum_balance</li>
                    <li><code>CheckingAccount</code> - adds monthly_fee, check_count</li>
                    <li><code>BusinessAccount</code> - adds transaction_limit, company_name</li>
                    <li><code>StudentAccount</code> - adds university, no_fees_until</li>
                </ul>
            </li>
            <li><b>Override:</b> Each should override calculate_monthly_fee() differently</li>
            <li><b>Test:</b> Create one of each and demonstrate polymorphic behavior</li>
        </ol>
        <p><b>Think About:</b> When would you use inheritance vs composition? (We'll discuss tomorrow)</p>
    </div>`
            },
            "7-2": {
                icon: "fa-lock",
                title: "Encapsulation - Private vs Public Data Protection",
                html: `<h1>Week 7, Day 2: Encapsulation - Protecting Data with Private vs Public Access</h1>
    <p>Today we learn about encapsulation - the second pillar of OOP that protects object data from unauthorized access and modification.</p>
    
    <div class="analogy-box">
        <b>Analogy: Bank Vault vs Public Park üè¶</b><br/>
        <ul style="margin-top: 10px;">
            <li><b>Public Attributes</b> = Public park (anyone can access)</li>
            <li><b>Protected Attributes</b> = Staff room (internal use only)</li>
            <li><b>Private Attributes</b> = Bank vault (heavily protected)</li>
            <li><b>Getters/Setters</b> = Bank tellers (controlled access)</li>
            <li><b>Validation</b> = Security checks (verify before allowing)</li>
        </ul>
    </div>

    <h3>Key Topics</h3>
    <ul>
        <li>Public, Protected, and Private access levels</li>
        <li>Python's naming conventions (_ and __)</li>
        <li>Getter and Setter methods (properties)</li>
        <li>Data validation in setters</li>
        <li>Practical: Secure BankAccount class</li>
    </ul>

    <h3>In-Depth Explanation</h3>
    
    <b>a. The Problem: Uncontrolled Data Access</b>
    
    <div style="background-color: #f9f9f9; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <b>Unprotected Class (Dangerous!):</b>
        <div style="background-color: #ffe6e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
            <pre>
class BankAccount:
    def __init__(self, account_number, balance, owner):
        self.account_number = account_number  # Public
        self.balance = balance                # Public
        self.owner = owner                    # Public

# User can do ANYTHING (including harmful things)
account = BankAccount("123456", 1000, "John Doe")

# Direct access - no protection
print(account.balance)       # 1000 (OK)
account.balance = -5000      # üíÄ Negative balance allowed!
account.balance = "invalid"  # üíÄ String instead of number!
account.account_number = ""  # üíÄ Empty account number!

# Even worse - can add arbitrary attributes
account.hacked = True        # üíÄ Adding malicious data
del account.balance          # üíÄ Deleting critical data!
            </pre>
        </div>
        
        <b>Problems with Public Access:</b>
        <div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
            <table style="width: 100%;">
                <tr>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>No Validation</b></td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Can set invalid values</td>
                </tr>
                <tr>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>No Control</b></td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Can delete critical attributes</td>
                </tr>
                <tr>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>Inconsistent State</b></td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Object can be in invalid state</td>
                </tr>
                <tr>
                    <td style="padding: 8px;"><b>Security Risks</b></td>
                    <td style="padding: 8px;">Malicious code can manipulate data</td>
                </tr>
            </table>
        </div>
    </div>
    
    <hr/>
    
    <b>b. Python's Access Modifiers (Conventions, Not Enforcement)</b>
    
    <div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
class BankAccount:
    def __init__(self, account_number, balance, owner, pin):
        # PUBLIC: Anyone can access (no underscore)
        self.account_number = account_number  # Public
        
        # PROTECTED: Internal use (single underscore) - CONVENTION
        self._balance = balance                # "Hey, don't touch this directly"
        
        # PRIVATE: Strongly internal (double underscore) - NAME MANGLING
        self.__pin = pin                       # "Really, stay away!"
        
        # PRIVATE with validation
        self.__set_owner(owner)                # Use setter even in __init__
    
    # ----- PUBLIC METHODS (Interface) -----
    def deposit(self, amount):
        """Public method - users can call this"""
        if amount > 0:
            self._balance += amount
            return f"Deposited \\\${amount}. New balance: \\\${self._balance}"
        return "Deposit amount must be positive"
    
    def withdraw(self, amount, entered_pin):
        """Public method with validation"""
        if not self.__verify_pin(entered_pin):
            return "Invalid PIN"
        if amount > self._balance:
            return "Insufficient funds"
        self._balance -= amount
        return f"Withdrew \\\${amount}. New balance: \\\${self._balance}"
    
    # ----- PROTECTED METHODS (Internal) -----
    def _apply_interest(self, rate):
        """Protected - for internal calculations"""
        interest = self._balance * rate
        self._balance += interest
        return interest
    
    # ----- PRIVATE METHODS (Strongly Internal) -----
    def __verify_pin(self, entered_pin):
        """Private - should not be accessed from outside"""
        return self.__pin == entered_pin
    
    def __set_owner(self, owner):
        """Private setter with validation"""
        if not isinstance(owner, str) or len(owner.strip()) < 2:
            raise ValueError("Owner name must be at least 2 characters")
        self.__owner = owner.strip()
    
    # ----- GETTERS (Properties) -----
    @property
    def balance(self):
        """Getter for balance - read only"""
        return self._balance
    
    @property
    def owner(self):
        """Getter for owner - read only"""
        return self.__owner
    
    @property
    def account_info(self):
        """Computed property - formatted info"""
        return f"Account {self.account_number} - {self.owner}"
        </pre>
    </div>
    
    <b>Access Levels Explained:</b>
    <div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <table style="width: 100%; border-collapse: collapse;">
            <thead>
                <tr style="background-color: #2c3e50; color: white;">
                    <th style="padding: 10px;">Access Level</th>
                    <th style="padding: 10px;">Syntax</th>
                    <th style="padding: 10px;">Convention</th>
                    <th style="padding: 10px;">Actual Accessibility</th>
                    <th style="padding: 10px;">Use Case</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>Public</b></td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;"><code>self.attribute</code></td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">No underscore</td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Anyone can access</td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Safe, non-sensitive data</td>
                </tr>
                <tr>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>Protected</b></td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;"><code>self._attribute</code></td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Single underscore</td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Can access, but shouldn't</td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Internal use, subclass access</td>
                </tr>
                <tr>
                    <td style="padding: 8px;"><b>Private</b></td>
                    <td style="padding: 8px;"><code>self.__attribute</code></td>
                    <td style="padding: 8px;">Double underscore</td>
                    <td style="padding: 8px;">Name mangled (hard to access)</td>
                    <td style="padding: 8px;">Truly internal, sensitive data</td>
                </tr>
            </tbody>
        </table>
    </div>
    
    <hr/>
    
    <b>c. Name Mangling - How Python "Hides" Private Attributes</b>
    
    <div style="background-color: #f9f9f9; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <b>Understanding Name Mangling:</b>
        <div style="background-color: #e8f4f8; padding: 15px; margin: 10px 0; border-radius: 5px;">
            <pre>
class SecretClass:
    def __init__(self):
        self.public = "I'm public"       # No underscore
        self._protected = "I'm protected" # Single underscore
        self.__private = "I'm private"    # Double underscore
    
    def show_internals(self):
        # Inside the class, all are accessible
        print(f"Inside class:")
        print(f"  public: {self.public}")
        print(f"  _protected: {self._protected}")
        print(f"  __private: {self.__private}")

# Create instance
obj = SecretClass()
obj.show_internals()

# Try to access from outside
print(" From outside class:")
print(f"  obj.public: {obj.public}")                # Works
print(f"  obj._protected: {obj._protected}")        # Works (but shouldn't)
# print(f"  obj.__private: {obj.__private}")        # ERROR! AttributeError

# But Python actually renames it (name mangling):
print(f"  obj._SecretClass__private: {obj._SecretClass__private}")  # Works!
            </pre>
        </div>
        
        <b>What Actually Happens:</b>
        <div style="background-color: #fff8e8; padding: 15px; margin: 10px 0; border-radius: 5px; text-align: center;">
            <div style="display: inline-block; text-align: left;">
                <div>You write: <code>self.__private</code></div>
                <div>Python internally stores: <code>self._ClassName__private</code></div>
                <div style="margin-top: 10px; background-color: #74b9ff; color: white; padding: 10px; border-radius: 5px;">
                    <b>Name Mangling Formula:</b><br/>
                    <code>__attribute</code> ‚Üí <code>_ClassName__attribute</code>
                </div>
            </div>
        </div>
        
        <b>Test Name Mangling:</b>
        <div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
            <pre>
class Test:
    def __init__(self):
        self.__secret = 42

obj = Test()

# These will fail
# print(obj.__secret)           # AttributeError
# print(obj.secret)            # AttributeError

# This works (but you shouldn't do it!)
print(obj._Test__secret)       # 42 (name mangled)

# Check all attributes
print(dir(obj))  # Look for '_Test__secret' in the list
            </pre>
        </div>
    </div>
    
    <hr/>
    
    <b>d. Properties (@property) - The Pythonic Way for Getters/Setters</b>
    
    <div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
class Temperature:
    """Demonstrating properties with validation"""
    
    def __init__(self, celsius=0):
        # Private attribute
        self._celsius = celsius  # Single underscore (protected)
    
    @property
    def celsius(self):
        """Getter - accessed like attribute: temp.celsius"""
        return self._celsius
    
    @celsius.setter
    def celsius(self, value):
        """Setter - validates before setting: temp.celsius = 25"""
        if value < -273.15:  # Absolute zero
            raise ValueError("Temperature cannot be below absolute zero (-273.15¬∞C)")
        self._celsius = value
    
    @property
    def fahrenheit(self):
        """Computed property - no setter, calculated on the fly"""
        return (self._celsius * 9/5) + 32
    
    @fahrenheit.setter
    def fahrenheit(self, value):
        """Setter for fahrenheit that updates celsius"""
        self._celsius = (value - 32) * 5/9
    
    @property
    def kelvin(self):
        """Another computed property"""
        return self._celsius + 273.15
    
    @kelvin.setter
    def kelvin(self, value):
        """Setter for kelvin"""
        if value < 0:
            raise ValueError("Kelvin cannot be negative")
        self._celsius = value - 273.15

# Usage
temp = Temperature(25)
print(f"Celsius: {temp.celsius}")      # 25 (using getter)
print(f"Fahrenheit: {temp.fahrenheit}") # 77.0 (computed)

# Using setters
temp.celsius = 30                      # Uses setter (validates)
print(f"New Celsius: {temp.celsius}")  # 30

temp.fahrenheit = 100                  # Sets via fahrenheit
print(f"Celsius is now: {temp.celsius}")  # 37.777...

# Try invalid value
try:
    temp.celsius = -300                 # Will raise ValueError
except ValueError as e:
    print(f"Error: {e}")

# Read-only property example
class Circle:
    def __init__(self, radius):
        self._radius = radius
    
    @property
    def radius(self):
        return self._radius
    
    @property  # No setter = read-only
    def area(self):
        return 3.14159 * self._radius ** 2
    
    @property
    def diameter(self):
        return self._radius * 2

circle = Circle(5)
print(f"Area: {circle.area}")      # 78.53975
# circle.area = 100                # ERROR! No setter (read-only)
        </pre>
    </div>
    
    <b>Property Patterns:</b>
    <div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <table style="width: 100%;">
            <tr>
                <td style="padding: 8px; border-bottom: 1px solid #ccc; width: 30%;"><b>Pattern</b></td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>Example</b></td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>Purpose</b></td>
            </tr>
            <tr>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Validation Setter</td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;"><code>@attribute.setter</code></td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Validate before setting</td>
            </tr>
            <tr>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Computed Getter</td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;"><code>@property</code> with calculation</td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Calculate on demand</td>
            </tr>
            <tr>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Read-only</td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;"><code>@property</code> without setter</td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Prevent modification</td>
            </tr>
            <tr>
                <td style="padding: 8px;"><b>Cached Property</b></td>
                <td style="padding: 8px;"><b>Store computed value</b></td>
                <td style="padding: 8px;">Performance optimization</td>
            </tr>
        </table>
    </div>
    
    <hr/>
    
    <b>e. Practical: Complete Secure BankAccount Class</b>
    
    <div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
import datetime

class SecureBankAccount:
    """Fully encapsulated bank account with proper access control"""
    
    def __init__(self, account_number, initial_balance, owner_name, pin):
        # Public (safe to share)
        self.account_number = account_number
        
        # Protected (internal, but accessible)
        self._transactions = []
        
        # Private (name mangled, truly internal)
        self.__balance = 0.0
        self.__owner = ""
        self.__pin = ""
        self.__is_active = True
        self.__daily_withdrawal_limit = 1000
        self.__today_withdrawn = 0.0
        self.__last_reset_date = datetime.date.today()
        
        # Initialize via setters for validation
        self.deposit(initial_balance)  # Uses public method
        self.__set_owner(owner_name)   # Uses private setter
        self.__set_pin(pin)            # Uses private setter
        
        # Record opening
        self._add_transaction("ACCOUNT_OPENED", initial_balance)
    
    # ----- PRIVATE METHODS (Internal implementation) -----
    def __set_owner(self, name):
        """Private setter with validation"""
        if not isinstance(name, str):
            raise TypeError("Owner name must be a string")
        if len(name.strip()) < 2:
            raise ValueError("Owner name must be at least 2 characters")
        self.__owner = name.strip().title()
    
    def __set_pin(self, pin):
        """Private setter for PIN with validation"""
        if not isinstance(pin, str):
            raise TypeError("PIN must be a string")
        if len(pin) != 4 or not pin.isdigit():
            raise ValueError("PIN must be 4 digits")
        self.__pin = pin
    
    def __verify_pin(self, entered_pin):
        """Private PIN verification"""
        return self.__pin == entered_pin
    
    def __reset_daily_limit_if_needed(self):
        """Private method to reset daily withdrawal limit"""
        today = datetime.date.today()
        if today > self.__last_reset_date:
            self.__today_withdrawn = 0.0
            self.__last_reset_date = today
    
    # ----- PROTECTED METHODS (For internal/subclass use) -----
    def _add_transaction(self, transaction_type, amount):
        """Protected method for recording transactions"""
        transaction = {
            "date": datetime.datetime.now(),
            "type": transaction_type,
            "amount": amount,
            "balance": self.__balance
        }
        self._transactions.append(transaction)
    
    def _check_account_active(self):
        """Protected method to check account status"""
        if not self.__is_active:
            raise ValueError("Account is inactive")
        return True
    
    # ----- PUBLIC METHODS (User interface) -----
    def deposit(self, amount):
        """Public method for deposits"""
        self._check_account_active()
        
        if not isinstance(amount, (int, float)):
            raise TypeError("Amount must be a number")
        if amount <= 0:
            raise ValueError("Deposit amount must be positive")
        
        self.__balance += amount
        self._add_transaction("DEPOSIT", amount)
        return f"Deposited \\\${amount:,.2f}. New balance: \\\${self.__balance:,.2f}"
    
    def withdraw(self, amount, entered_pin):
        """Public method for withdrawals with full validation"""
        self._check_account_active()
        
        # Verify PIN
        if not self.__verify_pin(entered_pin):
            raise ValueError("Invalid PIN")
        
        # Validate amount
        if not isinstance(amount, (int, float)):
            raise TypeError("Amount must be a number")
        if amount <= 0:
            raise ValueError("Withdrawal amount must be positive")
        
        # Check daily limit
        self.__reset_daily_limit_if_needed()
        if self.__today_withdrawn + amount > self.__daily_withdrawal_limit:
            remaining = self.__daily_withdrawal_limit - self.__today_withdrawn
            raise ValueError(f"Daily limit exceeded. Can withdraw at most \\\${remaining:,.2f} today")
        
        # Check balance
        if amount > self.__balance:
            raise ValueError("Insufficient funds")
        
        # Process withdrawal
        self.__balance -= amount
        self.__today_withdrawn += amount
        self._add_transaction("WITHDRAWAL", -amount)
        
        return f"Withdrew \\\${amount:,.2f}. New balance: \\\${self.__balance:,.2f}"
    
    def transfer(self, amount, target_account, entered_pin):
        """Public method for transfers"""
        # Withdraw from this account
        self.withdraw(amount, entered_pin)
        
        # Deposit to target account
        target_account.deposit(amount)
        
        self._add_transaction("TRANSFER_OUT", -amount)
        target_account._add_transaction("TRANSFER_IN", amount)
        
        return f"Transferred \\\${amount:,.2f} to account {target_account.account_number}"
    
    # ----- PROPERTIES (Controlled access to attributes) -----
    @property
    def balance(self):
        """Read-only property for balance"""
        return self.__balance
    
    @property
    def owner(self):
        """Read-only property for owner name"""
        return self.__owner
    
    @property
    def is_active(self):
        """Read-only property for account status"""
        return self.__is_active
    
    @property
    def daily_withdrawal_limit(self):
        """Getter for daily limit"""
        return self.__daily_withdrawal_limit
    
    @daily_withdrawal_limit.setter
    def daily_withdrawal_limit(self, new_limit):
        """Setter for daily limit with validation"""
        if not isinstance(new_limit, (int, float)):
            raise TypeError("Limit must be a number")
        if new_limit < 0:
            raise ValueError("Limit cannot be negative")
        if new_limit > 10000:  # Business rule
            raise ValueError("Daily limit cannot exceed $10,000")
        self.__daily_withdrawal_limit = new_limit
    
    @property
    def available_today(self):
        """Computed property: how much can be withdrawn today"""
        self.__reset_daily_limit_if_needed()
        return min(
            self.__daily_withdrawal_limit - self.__today_withdrawn,
            self.__balance
        )
    
    @property
    def transaction_history(self):
        """Getter for transaction history (returns copy)"""
        return self._transactions.copy()  # Return copy to prevent modification
    
    @property
    def account_summary(self):
        """Computed property: formatted account summary"""
        return f"""
        Account: {self.account_number}
        Owner: {self.owner}
        Balance: \\\${self.balance:,.2f}
        Status: {'Active' if self.is_active else 'Inactive'}
        Available Today: \\\${self.available_today:,.2f}
        """
    
    # ----- OTHER PUBLIC METHODS -----
    def deactivate_account(self, entered_pin):
        """Deactivate account (requires PIN)"""
        if not self.__verify_pin(entered_pin):
            raise ValueError("Invalid PIN")
        self.__is_active = False
        self._add_transaction("ACCOUNT_DEACTIVATED", 0)
        return "Account deactivated"
    
    def change_pin(self, old_pin, new_pin):
        """Change PIN (requires old PIN)"""
        if not self.__verify_pin(old_pin):
            raise ValueError("Invalid current PIN")
        self.__set_pin(new_pin)
        return "PIN changed successfully"
        </pre>
    </div>
    
    <hr/>
    
    <div class="assignment-box">
        <h4>Assignment: Build a Secure User Profile System</h4>
        
        <b>Part 1: Create User Class with Full Encapsulation</b>
        <div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
            Create <code>User</code> class with these access controls:
            <ol>
                <li><b>Public:</b> username (read-only), join_date (read-only)</li>
                <li><b>Protected:</b> _posts (list of posts), _friends (list of friends)</li>
                <li><b>Private:</b> __password, __email, __age, __is_admin</li>
                <li><b>Properties:</b>
                    <ul>
                        <li><code>email</code> with validation (@property and @email.setter)</li>
                        <li><code>age</code> with validation (must be 13+)</li>
                        <li><code>post_count</code> (computed from _posts)</li>
                        <li><code>friend_count</code> (computed from _friends)</li>
                    </ul>
                </li>
            </ol>
        </div>
        
        <b>Part 2: Implement Secure Methods</b>
        <div style="background-color: #fff0e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
            Add these methods with proper access control:
            <ul>
                <li><code>verify_password(password)</code> - private, compares hashes</li>
                <li><code>add_post(content)</code> - public, validates content not empty</li>
                <li><code>add_friend(other_user)</code> - public, prevents self-friending</li>
                <li><code>change_password(old_pass, new_pass)</code> - requires verification</li>
                <li><code>get_profile_summary()</code> - returns formatted info</li>
            </ul>
        </div>
        
        <b>Part 3: Test Security Features</b>
        <div style="background-color: #f0fff0; padding: 15px; margin: 10px 0; border-radius: 5px;">
            <pre>
# Test that these security measures work
user = User("johndoe", "password123", "john@email.com", 25)

# Should work
print(user.username)           # "johndoe"
user.email = "new@email.com"   # Uses setter (validates)

# Should fail/raise errors
# user.username = "hacker"     # Error: username is read-only
# user.__password = "hacked"   # Error: private attribute
# user.age = 10               # Error: must be 13+
# user._posts.append("spam")  # Works but shouldn't (protected)

# Should require authentication
user.change_password("wrong", "new")  # Error: wrong old password
user.change_password("password123", "newpass")  # Works
            </pre>
        </div>
        
        <b>Part 4: Bonus - Password Hashing</b>
        <div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px; font-family: monospace;">
            Implement real password security:
            <pre>
import hashlib

class SecureUser(User):
    def __set_password(self, password):
        """Hash password before storing"""
        # Never store plain text passwords!
        salt = "random_salt_"  # In reality, use unique salt per user
        self.__password_hash = hashlib.sha256(
            (password + salt).encode()
        ).hexdigest()
    
    def verify_password(self, password):
        """Verify hashed password"""
        salt = "random_salt_"
        attempted_hash = hashlib.sha256(
            (password + salt).encode()
        ).hexdigest()
        return self.__password_hash == attempted_hash
            </pre>
        </div>
    </div>
    
    <hr/>
    
    <h3>Common Mistakes & Solutions</h3>
    
    <b>Mistake 1: Using double underscores everywhere</b>
    <div style="background-color: #ffe6e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
# WRONG - Overusing privacy
class OverProtected:
    def __init__(self):
        self.__everything = "hidden"  # Makes inheritance hard!
        self.__another = 42
    
    def get_everything(self):  # Now you need getters for everything!
        return self.__everything

# BETTER - Use appropriate levels
class Balanced:
    def __init__(self):
        self.public_data = "share this"      # Public
        self._internal_data = "for subclasses" # Protected
        self.__sensitive_data = "really private" # Private only when needed
        </pre>
    </div>
    
    <b>Mistake 2: Forgetting to return copy of mutable data</b>
    <div style="background-color: #ffe6e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
# WRONG - Returns reference to internal list
class BadEncapsulation:
    def __init__(self):
        self._items = [1, 2, 3]
    
    @property
    def items(self):
        return self._items  # Caller can modify internal list!

# Usage (problem):
obj = BadEncapsulation()
obj.items.append(999)  # Modifies internal list! üíÄ
print(obj._items)      # [1, 2, 3, 999]

# RIGHT - Return a copy
class GoodEncapsulation:
    def __init__(self):
        self._items = [1, 2, 3]
    
    @property
    def items(self):
        return self._items.copy()  # Safe copy
        </pre>
    </div>
    
    <b>Mistake 3: Not validating in setters</b>
    <div style="background-color: #ffe6e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
# WRONG - Setter without validation
class BankAccount:
    def __init__(self, balance):
        self._balance = balance
    
    @property
    def balance(self):
        return self._balance
    
    @balance.setter
    def balance(self, value):
        self._balance = value  # No validation!

# Can set invalid values
account = BankAccount(1000)
account.balance = -5000  # üíÄ Negative balance allowed!

# RIGHT - Validate in setter
@balance.setter
def balance(self, value):
    if value < 0:
        raise ValueError("Balance cannot be negative")
    self._balance = value
        </pre>
    </div>
    
    <hr/>
    
    <h3>Quick Reference: Encapsulation Best Practices</h3>
    
    <div style="background-color: #f9f9f9; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <table style="width: 100%;">
            <tr>
                <td style="padding: 8px; border-bottom: 1px solid #ccc; width: 30%;"><b>Rule</b></td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>Implementation</b></td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>When to Use</b></td>
            </tr>
            <tr>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Make attributes private</td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;"><code>self.__attribute</code></td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">When data needs protection</td>
            </tr>
            <tr>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Use properties</td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;"><code>@property</code> and <code>@setter</code></td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">For controlled access</td>
            </tr>
            <tr>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Validate in setters</td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Check values before setting</td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Always for critical data</td>
            </tr>
            <tr>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Return copies</td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;"><code>return data.copy()</code></td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">When returning mutable data</td>
            </tr>
            <tr>
                <td style="padding: 8px;"><b>Document conventions</b></td>
                <td style="padding: 8px;"><b>Use docstrings</b></td>
                <td style="padding: 8px;">Always for public methods</td>
            </tr>
        </table>
    </div>
    
    <div style="background-color: #e8f8e8; padding: 20px; margin: 20px 0; border-radius: 5px; border-left: 5px solid #2ecc71;">
        <h4>üöÄ Homework: Secure E-commerce System</h4>
        <p>Create a <code>Product</code> class with full encapsulation:</p>
        <ol>
            <li><b>Private:</b> __cost_price, __profit_margin, __stock_quantity</li>
            <li><b>Protected:</b> _reviews, _purchase_history</li>
            <li><b>Public:</b> name, description (read-only after creation)</li>
            <li><b>Properties:</b>
                <ul>
                    <li><code>selling_price</code> (calculated: cost √ó (1 + margin))</li>
                    <li><code>profit_margin</code> (setter validates 0-100%)</li>
                    <li><code>in_stock</code> (computed: stock_quantity > 0)</li>
                    <li><code>average_rating</code> (computed from _reviews)</li>
                </ul>
            </li>
            <li><b>Methods:</b> add_review(), update_stock(), apply_discount()</li>
        </ol>
        <p><b>Challenge:</b> Make the class immutable after creation (except through controlled methods).</p>
    </div>`
            },
            "7-3": {
                icon: "fa-shapes",
                title: "Polymorphism - One Interface, Many Forms",
                html: `<h1>Week 7, Day 3: Polymorphism - One Interface, Many Forms</h1>
    <p>Today we learn about polymorphism - the third pillar of OOP that allows objects of different types to be treated as objects of a common type.</p>
    
    <div class="analogy-box">
        <b>Analogy: Transportation System üöóüöåüö≤</b><br/>
        <ul style="margin-top: 10px;">
            <li><b>Interface</b> = "Transportation" (common contract)</li>
            <li><b>Polymorphism</b> = Car, Bus, Bike all "transport" differently</li>
            <li><b>Method Overriding</b> = Each vehicle has own "move()" implementation</li>
            <li><b>Dynamic Binding</b> = Python decides at runtime which move() to call</li>
            <li><b>Duck Typing</b> = "If it quacks like a duck, it's a duck"</li>
        </ul>
    </div>

    <h3>Key Topics</h3>
    <ul>
        <li>Understanding polymorphism concepts</li>
        <li>Method overriding in inheritance</li>
        <li>Duck typing in Python</li>
        <li>Abstract base classes (ABCs)</li>
        <li>Practical: Shape calculator system</li>
    </ul>

    <h3>In-Depth Explanation</h3>
    
    <b>a. What is Polymorphism? (The Core Concept)</b>
    
    <div style="background-color: #f9f9f9; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <b>Polymorphism = "Many Forms"</b>
        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin: 15px 0;">
            <div style="background-color: #e8f4f8; padding: 10px; border-radius: 5px; text-align: center;">
                <b>Same Method Name</b><br/>
                <div style="font-size: 12px; margin-top: 5px;">
                    <code>.calculate_area()</code><br/>
                    Used by Circle, Square, Triangle
                </div>
            </div>
            <div style="background-color: #ffeaa7; padding: 10px; border-radius: 5px; text-align: center;">
                <b>Different Implementations</b><br/>
                <div style="font-size: 12px; margin-top: 5px;">
                    Circle: œÄr¬≤<br/>
                    Square: s¬≤<br/>
                    Triangle: ¬Ωbh
                </div>
            </div>
            <div style="background-color: #a3e4d7; padding: 10px; border-radius: 5px; text-align: center;">
                <b>Same Interface</b><br/>
                <div style="font-size: 12px; margin-top: 5px;">
                    Code treats all shapes the same<br/>
                    <code>shape.calculate_area()</code>
                </div>
            </div>
        </div>
        
        <b>Simple Example:</b>
        <div style="background-color: #e8f4f8; padding: 15px; margin: 10px 0; border-radius: 5px;">
            <pre>
class Dog:
    def speak(self):
        return "Woof!"

class Cat:
    def speak(self):
        return "Meow!"

class Duck:
    def speak(self):
        return "Quack!"

# Polymorphic function
def animal_sounds(animals):
    for animal in animals:
        print(animal.speak())  # Same method, different results

# Create animals
animals = [Dog(), Cat(), Duck()]

# Call polymorphically
animal_sounds(animals)
# Output:
# Woof!
# Meow!
# Quack!
            </pre>
        </div>
        
        <b>Benefits of Polymorphism:</b>
        <div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
            <table style="width: 100%;">
                <tr>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>Flexibility</b></td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Add new types without changing existing code</td>
                </tr>
                <tr>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>Simplicity</b></td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">One interface for many implementations</td>
                </tr>
                <tr>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>Maintainability</b></td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Code that works with base class works with all derived</td>
                </tr>
                <tr>
                    <td style="padding: 8px;"><b>Extensibility</b></td>
                    <td style="padding: 8px;">Easy to add new functionality</td>
                </tr>
            </table>
        </div>
    </div>
    
    <hr/>
    
    <b>b. Polymorphism Through Inheritance (Method Overriding)</b>
    
    <div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
class Employee:
    """Base class with common interface"""
    def __init__(self, name, salary):
        self.name = name
        self.salary = salary
    
    def calculate_bonus(self):
        """Default implementation - can be overridden"""
        return self.salary * 0.05  # 5% default
    
    def work(self):
        """Abstract method - should be overridden"""
        raise NotImplementedError("Subclasses must implement work()")
    
    def get_role_description(self):
        """Template method - uses overridden methods"""
        work_desc = self.work()
        bonus = self.calculate_bonus()
        return f"{self.name}: {work_desc}. Bonus: \\\${bonus:,.2f}"

class Developer(Employee):
    """Overrides methods with specific implementations"""
    def __init__(self, name, salary, language):
        super().__init__(name, salary)
        self.language = language
    
    # OVERRIDE: Different bonus calculation
    def calculate_bonus(self):
        return self.salary * 0.10  # 10% for developers
    
    # OVERRIDE: Specific work implementation
    def work(self):
        return f"Writing {self.language} code"

class Manager(Employee):
    """Another implementation"""
    def __init__(self, name, salary, team_size):
        super().__init__(name, salary)
        self.team_size = team_size
    
    # OVERRIDE: Different bonus calculation
    def calculate_bonus(self):
        base = super().calculate_bonus()  # Get 5%
        return base + (self.team_size * 1000)  # Plus team bonus
    
    # OVERRIDE: Different work implementation
    def work(self):
        return f"Managing team of {self.team_size} people"

class Intern(Employee):
    """Yet another implementation"""
    def __init__(self, name, salary, university):
        super().__init__(name, salary)
        self.university = university
    
    # OVERRIDE: No bonus for interns
    def calculate_bonus(self):
        return 0
    
    # OVERRIDE: Intern-specific work
    def work(self):
        return f"Learning at {self.university}"

# Polymorphic usage
employees = [
    Developer("Alice", 80000, "Python"),
    Manager("Bob", 100000, 5),
    Intern("Charlie", 20000, "MIT"),
    Developer("Diana", 90000, "Java")
]

# Same interface, different behaviors
for emp in employees:
    print(emp.get_role_description())
    # Each calls the appropriate overridden methods!

# Output:
# Alice: Writing Python code. Bonus: $8,000.00
# Bob: Managing team of 5 people. Bonus: $7,500.00
# Charlie: Learning at MIT. Bonus: $0.00
# Diana: Writing Java code. Bonus: $9,000.00
        </pre>
    </div>
    
    <b>How Polymorphism Works:</b>
    <div style="background-color: #fff; padding: 15px; margin: 10px 0; border-radius: 5px; text-align: center;">
        <div style="display: inline-block; text-align: left;">
            <div style="background-color: #3498db; color: white; padding: 10px; border-radius: 5px; width: 300px; margin: 0 auto;">
                <b>Base Class: Employee</b><br/>
                ‚Ä¢ calculate_bonus() ‚Üê Default<br/>
                ‚Ä¢ work() ‚Üê Abstract<br/>
                ‚Ä¢ get_role_description() ‚Üê Template
            </div>
            <div style="text-align: center; margin: 10px 0;">‚ñº Runtime Binding</div>
            <div style="display: flex; gap: 10px; justify-content: center;">
                <div style="background-color: #2ecc71; color: white; padding: 10px; border-radius: 5px; width: 120px;">
                    <b>Developer</b><br/>
                    calculate_bonus()<br/>
                    ‚Ü≥ 10% formula
                </div>
                <div style="background-color: #e74c3c; color white; padding: 10px; border-radius: 5px; width: 120px;">
                    <b>Manager</b><br/>
                    calculate_bonus()<br/>
                    ‚Ü≥ 5% + team
                </div>
                <div style="background-color: #f39c12; color: white; padding: 10px; border-radius: 5px; width: 120px;">
                    <b>Intern</b><br/>
                    calculate_bonus()<br/>
                    ‚Ü≥ 0
                </div>
            </div>
            <div style="margin-top: 10px; text-align: center;">
                Python decides at runtime which implementation to use!
            </div>
        </div>
    </div>
    
    <hr/>
    
    <b>c. Duck Typing - Python's Dynamic Polymorphism</b>
    
    <div style="background-color: #f9f9f9; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <b>"If it walks like a duck and quacks like a duck, it's a duck"</b>
        <div style="background-color: #e8f4f8; padding: 15px; margin: 10px 0; border-radius: 5px;">
            <pre>
# No common base class needed!
class Dog:
    def make_sound(self):
        return "Woof!"
    
    def move(self):
        return "Running on four legs"

class Robot:
    def make_sound(self):  # Same method name as Dog
        return "Beep boop"
    
    def move(self):        # Same method name as Dog
        return "Rolling on wheels"

class Bird:
    def make_sound(self):  # Same method name
        return "Chirp!"
    
    def move(self):        # Same method name
        return "Flying"

# Polymorphic function - doesn't care about type
def describe_entity(entity):
    """Works with ANY object that has make_sound() and move() methods"""
    sound = entity.make_sound()
    movement = entity.move()
    return f"Makes sound: {sound}. Moves by: {movement}"

# Create different objects (no common parent!)
entities = [Dog(), Robot(), Bird()]

# All work with the same function!
for entity in entities:
    print(describe_entity(entity))

# Output:
# Makes sound: Woof!. Moves by: Running on four legs
# Makes sound: Beep boop. Moves by: Rolling on wheels
# Makes sound: Chirp!. Moves by: Flying
            </pre>
        </div>
        
        <b>Duck Typing vs Inheritance:</b>
        <div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
            <table style="width: 100%;">
                <tr>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc; width: 50%;"><b>Duck Typing (Pythonic)</b></td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>Inheritance (Traditional)</b></td>
                </tr>
                <tr>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Focus on behavior</td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Focus on type hierarchy</td>
                </tr>
                <tr>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">No formal interface required</td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Explicit interface through base class</td>
                </tr>
                <tr>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">More flexible</td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">More structured</td>
                </tr>
                <tr>
                    <td style="padding: 8px;"><b>Runtime checking</b></td>
                    <td style="padding: 8px;"><b>Compile-time checking (in other languages)</b></td>
                </tr>
            </table>
        </div>
        
        <b>Real-world Duck Typing Example:</b>
        <div style="background-color: #fff8e8; padding: 15px; margin: 10px 0; border-radius: 5px;">
            <pre>
# File-like objects in Python
def process_data(source):
    """Works with ANY object that has .read() method"""
    data = source.read()
    return f"Processed: {len(data)} bytes"

# Can use with different types - all have .read()
from io import StringIO, BytesIO
import urllib.request

# StringIO (in-memory string)
string_source = StringIO("Hello World")
print(process_data(string_source))  # Works!

# BytesIO (in-memory bytes)
bytes_source = BytesIO(b"Binary data")
print(process_data(bytes_source))   # Works!

# File object
with open("data.txt", "r") as file_source:
    print(process_data(file_source))  # Works!

# HTTP response (has .read() method)
# response = urllib.request.urlopen("http://example.com")
# print(process_data(response))      # Also works!
            </pre>
        </div>
    </div>
    
    <hr/>
    
    <b>d. Abstract Base Classes (ABCs) - Formal Interfaces</b>
    
    <div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
from abc import ABC, abstractmethod

# Abstract Base Class - defines interface
class Shape(ABC):
    """Abstract base class for all shapes"""
    
    @abstractmethod
    def area(self):
        """Calculate area - MUST be implemented by subclasses"""
        pass
    
    @abstractmethod
    def perimeter(self):
        """Calculate perimeter - MUST be implemented"""
        pass
    
    # Concrete method - shared by all shapes
    def describe(self):
        """Template method using abstract methods"""
        return f"Area: {self.area():.2f}, Perimeter: {self.perimeter():.2f}"

# Concrete implementations
class Circle(Shape):
    def __init__(self, radius):
        self.radius = radius
    
    # MUST implement area() (abstract in parent)
    def area(self):
        return 3.14159 * self.radius ** 2
    
    # MUST implement perimeter() (abstract in parent)
    def perimeter(self):
        return 2 * 3.14159 * self.radius

class Rectangle(Shape):
    def __init__(self, width, height):
        self.width = width
        self.height = height
    
    def area(self):
        return self.width * self.height
    
    def perimeter(self):
        return 2 * (self.width + self.height)

class Triangle(Shape):
    def __init__(self, base, height, side1, side2, side3):
        self.base = base
        self.height = height
        self.side1 = side1
        self.side2 = side2
        self.side3 = side3
    
    def area(self):
        return 0.5 * self.base * self.height
    
    def perimeter(self):
        return self.side1 + self.side2 + self.side3

# Polymorphic usage
shapes = [
    Circle(5),
    Rectangle(4, 6),
    Triangle(3, 4, 3, 4, 5)
]

for shape in shapes:
    print(f"{shape.__class__.__name__}: {shape.describe()}")
    # All shapes have the same interface!

# Output:
# Circle: Area: 78.54, Perimeter: 31.42
# Rectangle: Area: 24.00, Perimeter: 20.00
# Triangle: Area: 6.00, Perimeter: 12.00

# Try to instantiate abstract class
try:
    shape = Shape()  # Error! Can't instantiate abstract class
except TypeError as e:
    print(f"Error: {e}")  # "Can't instantiate abstract class Shape..."
        </pre>
    </div>
    
    <b>Benefits of ABCs:</b>
    <div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <ul>
            <li><b>Formal Interface:</b> Clearly defines required methods</li>
            <li><b>Early Error Detection:</b> Can't forget to implement methods</li>
            <li><b>Documentation:</b> Shows intended structure</li>
            <li><b>Type Checking:</b> Can use <code>isinstance(shape, Shape)</code></li>
            <li><b>Mixins:</b> Can combine multiple ABCs</li>
        </ul>
    </div>
    
    <hr/>
    
    <b>e. Practical: Complete Payment Processing System</b>
    
    <div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
from abc import ABC, abstractmethod
import datetime

# Abstract Base Class
class PaymentMethod(ABC):
    """Abstract interface for all payment methods"""
    
    def __init__(self, amount, currency="USD"):
        self.amount = amount
        self.currency = currency
        self.timestamp = datetime.datetime.now()
        self.transaction_id = None
    
    @abstractmethod
    def process_payment(self):
        """Process the payment - MUST be implemented"""
        pass
    
    @abstractmethod
    def refund(self, refund_amount):
        """Refund payment - MUST be implemented"""
        pass
    
    @abstractmethod
    def get_payment_details(self):
        """Return payment details - MUST be implemented"""
        pass
    
    # Concrete method (shared by all)
    def log_transaction(self, status):
        """Log transaction - used by all payment methods"""
        log_entry = {
            "timestamp": self.timestamp,
            "transaction_id": self.transaction_id,
            "amount": self.amount,
            "currency": self.currency,
            "method": self.__class__.__name__,
            "status": status
        }
        print(f"[LOG] {log_entry}")
        return log_entry

# Concrete implementations
class CreditCardPayment(PaymentMethod):
    def __init__(self, amount, card_number, expiry_date, cvv):
        super().__init__(amount)
        self.card_number = self._mask_card_number(card_number)
        self.expiry_date = expiry_date
        self.cvv = cvv
    
    def _mask_card_number(self, card_number):
        """Mask card number for security"""
        return f"****-****-****-{card_number[-4:]}"
    
    def process_payment(self):
        """Credit card specific processing"""
        # Simulate API call
        print(f"Processing credit card payment...")
        print(f"Card: {self.card_number}, Amount: {self.currency} {self.amount}")
        
        # Generate transaction ID
        self.transaction_id = f"CC-{int(self.timestamp.timestamp())}"
        
        # Simulate processing
        success = True  # In reality, would check with bank
        status = "APPROVED" if success else "DECLINED"
        
        self.log_transaction(status)
        return success, self.transaction_id
    
    def refund(self, refund_amount):
        """Credit card refund"""
        print(f"Refunding {self.currency} {refund_amount} to card {self.card_number}")
        return True
    
    def get_payment_details(self):
        return f"Credit Card: {self.card_number}, Exp: {self.expiry_date}"

class PayPalPayment(PaymentMethod):
    def __init__(self, amount, email):
        super().__init__(amount)
        self.email = email
    
    def process_payment(self):
        """PayPal specific processing"""
        print(f"Redirecting to PayPal...")
        print(f"Email: {self.email}, Amount: {self.currency} {self.amount}")
        
        self.transaction_id = f"PP-{int(self.timestamp.timestamp())}"
        
        # Simulate PayPal processing
        success = True
        status = "COMPLETED" if success else "FAILED"
        
        self.log_transaction(status)
        return success, self.transaction_id
    
    def refund(self, refund_amount):
        """PayPal refund"""
        print(f"Refunding {self.currency} {refund_amount} to PayPal account {self.email}")
        return True
    
    def get_payment_details(self):
        return f"PayPal: {self.email}"

class CryptocurrencyPayment(PaymentMethod):
    def __init__(self, amount, wallet_address, crypto_type="BTC"):
        super().__init__(amount)
        self.wallet_address = wallet_address
        self.crypto_type = crypto_type
        self.exchange_rate = self._get_exchange_rate()
    
    def _get_exchange_rate(self):
        """Get current exchange rate (simulated)"""
        rates = {"BTC": 45000, "ETH": 3000, "LTC": 150}
        return rates.get(self.crypto_type, 1)
    
    def process_payment(self):
        """Crypto specific processing"""
        crypto_amount = self.amount / self.exchange_rate
        
        print(f"Processing {self.crypto_type} payment...")
        print(f"Wallet: {self.wallet_address}")
        print(f"Amount: {crypto_amount:.8f} {self.crypto_type} (‚âà{self.currency} {self.amount})")
        
        self.transaction_id = f"CRYPTO-{self.crypto_type}-{int(self.timestamp.timestamp())}"
        
        # Simulate blockchain confirmation
        success = True
        status = "CONFIRMED" if success else "FAILED"
        
        self.log_transaction(status)
        return success, self.transaction_id
    
    def refund(self, refund_amount):
        """Crypto refund (complicated!)"""
        print(f"Initiating {self.crypto_type} refund to {self.wallet_address}")
        print("Note: Crypto refunds may take longer and require manual processing")
        return True
    
    def get_payment_details(self):
        return f"{self.crypto_type}: {self.wallet_address[:10]}..."

# Cash payment (simpler, doesn't need refund)
class CashPayment(PaymentMethod):
    def process_payment(self):
        print(f"Cash payment received: {self.currency} {self.amount}")
        self.transaction_id = f"CASH-{int(self.timestamp.timestamp())}"
        self.log_transaction("RECEIVED")
        return True, self.transaction_id
    
    def refund(self, refund_amount):
        print(f"Cash refund: {self.currency} {refund_amount}")
        return True
    
    def get_payment_details(self):
        return "Cash Payment"

# Polymorphic payment processor
class PaymentProcessor:
    def __init__(self):
        self.payments = []
    
    def process_payments(self, payment_methods):
        """Process multiple payments polymorphically"""
        results = []
        for payment in payment_methods:
            print(f"\nProcessing with: {payment.__class__.__name__}")
            print(f"Details: {payment.get_payment_details()}")
            
            success, tx_id = payment.process_payment()
            results.append((success, tx_id))
            
            if success:
                self.payments.append(payment)
                print("‚úì Payment successful!")
            else:
                print("‚úó Payment failed!")
        
        return results
    
    def total_processed(self):
        """Calculate total amount processed"""
        return sum(p.amount for p in self.payments)
    
    def list_payments(self):
        """List all processed payments"""
        for payment in self.payments:
            print(f"- {payment.__class__.__name__}: {payment.currency} {payment.amount}")

# Usage
processor = PaymentProcessor()

# Different payment methods (polymorphic)
payments = [
    CreditCardPayment(100, "4111111111111111", "12/25", "123"),
    PayPalPayment(50, "customer@example.com"),
    CryptocurrencyPayment(200, "1A1zP1eP5QGefi2DMPTfTL5SLmv7DivfNa", "BTC"),
    CashPayment(25)
]

# Process all payments the same way
results = processor.process_payments(payments)

print(f"\n=== Summary ===")
print(f"Total processed: \\\${processor.total_processed():.2f}")
print(f"Successful payments: {sum(1 for r in results if r[0])}/{len(results)}")
        </pre>
    </div>
    
    <hr/>
    
    <div class="assignment-box">
        <h4>Assignment: Build a Media Player System</h4>
        
        <b>Part 1: Create Media Interface with ABC</b>
        <div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
            Create <code>Media</code> abstract base class with:
            <ul>
                <li><b>Abstract methods:</b>
                    <ul>
                        <li><code>play()</code> - plays the media</li>
                        <li><code>pause()</code> - pauses the media</li>
                        <li><code>stop()</code> - stops the media</li>
                        <li><code>get_duration()</code> - returns duration</li>
                    </ul>
                </li>
                <li><b>Concrete methods:</b>
                    <ul>
                        <li><code>get_info()</code> - template method using abstract methods</li>
                        <li><code>is_playing()</code> - checks if media is playing</li>
                    </ul>
                </li>
            </ul>
        </div>
        
        <b>Part 2: Implement Different Media Types</b>
        <div style="background-color: #fff0e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
            Create these concrete classes with different implementations:
            <ol>
                <li><b>AudioFile:</b> MP3/WAV file with bitrate, artist, album</li>
                <li><b>VideoFile:</b> MP4/AVI file with resolution, framerate</li>
                <li><b>Stream:</b> Live stream with quality options, buffer status</li>
                <li><b>Podcast:</b> Audio with episode number, show notes</li>
                <li><b>Playlist:</b> Collection of Media objects with shuffle/repeat</li>
            </ol>
        </div>
        
        <b>Part 3: Create Polymorphic Media Player</b>
        <div style="background-color: #f0fff0; padding: 15px; margin: 10px 0; border-radius: 5px;">
            <pre>
class MediaPlayer:
    def __init__(self):
        self.current_media = None
        self.playlist = []
    
    def load_media(self, media):
        """Accept any Media object (polymorphic)"""
        if not hasattr(media, 'play'):  # Duck typing check
            raise TypeError("Object must have play() method")
        self.current_media = media
    
    def play_all(self, media_list):
        """Play all media objects (polymorphic)"""
        for media in media_list:
            print(f" Now playing: {media.__class__.__name__}")
            print(media.get_info())
            media.play()
            # ... wait for completion or user input ...
            media.stop()
            </pre>
        </div>
        
        <b>Part 4: Test Polymorphism</b>
        <div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px; font-family: monospace;">
            <pre>
            # Test with different media types
            player = MediaPlayer()
            
            media_items = [
                AudioFile("song.mp3", "Artist", 180),
                VideoFile("movie.mp4", "1080p", 7200),
                Podcast("episode1", "Tech Talk", 3600),
                Stream("live_sports", "720p")
            ]
            
            # All work with the same interface!
            player.play_all(media_items)
            
            # Expected output (each with different implementations):
            # Now playing: AudioFile
            # Playing song.mp3 by Artist (3:00)
            # 
            # Now playing: VideoFile
            # Playing movie.mp4 [1080p] (2:00:00)
            # 
            # Now playing: Podcast
            # Playing episode1 from Tech Talk (1:00:00)
            # 
            # Now playing: Stream
            # Streaming live_sports [720p]
            </pre>
        </div>
    </div>
    
    <hr/>
    
    <h3>Common Mistakes & Solutions</h3>
    
    <b>Mistake 1: Not using polymorphism when you should</b>
    <div style="background-color: #ffe6e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
# WRONG - Type checking and manual dispatch
def process_vehicle(vehicle):
    if isinstance(vehicle, Car):
        vehicle.drive_on_road()
    elif isinstance(vehicle, Boat):
        vehicle.sail_on_water()
    elif isinstance(vehicle, Plane):
        vehicle.fly_in_air()
    else:
        raise TypeError("Unknown vehicle type")

# RIGHT - Polymorphic design
class Vehicle(ABC):
    @abstractmethod
    def move(self):
        pass

class Car(Vehicle):
    def move(self):
        return "Driving on road"

class Boat(Vehicle):
    def move(self):
        return "Sailing on water"

class Plane(Vehicle):
    def move(self):
        return "Flying in air"

# One function works for all
def process_vehicle(vehicle):
    return vehicle.move()  # Polymorphic call!
        </pre>
    </div>
    
    <b>Mistake 2: Breaking the Liskov Substitution Principle</b>
    <div style="background-color: #ffe6e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
# WRONG - Child class changes expected behavior
class Bird:
    def fly(self):
        return "Flying"

class Penguin(Bird):  # Penguin IS-A Bird, but...
    def fly(self):
        raise NotImplementedError("Penguins can't fly!")  # Breaks polymorphism!

# This should work but doesn't
birds = [Bird(), Penguin()]
for bird in birds:
    print(bird.fly())  # ERROR on Penguin!

# BETTER DESIGN - Separate interface
class Bird:
    pass

class FlyingBird(Bird):
    def fly(self):
        return "Flying"

class Penguin(Bird):  # Not a FlyingBird
    def swim(self):
        return "Swimming"

# Now polymorphism works within each category
flying_birds = [FlyingBird(), Sparrow()]  # All can fly
        </pre>
    </div>
    
    <b>Mistake 3: Forgetting to call super() in overridden methods</b>
    <div style="background-color: #ffe6e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
# WRONG - Override breaks parent behavior
class Logger:
    def log(self, message):
        print(f"[LOG] {message}")
        self._save_to_file(message)  # Important side effect
    
    def _save_to_file(self, message):
        # Save to file...
        pass

class TimestampLogger(Logger):
    def log(self, message):
        # Forgets to call super() - file not saved!
        print(f"[{datetime.now()}] {message}")

# RIGHT - Extend parent behavior
class TimestampLogger(Logger):
    def log(self, message):
        # Call parent first
        super().log(message)  # Saves to file
        # Then add timestamp
        print(f"[{datetime.now()}] Additional log: {message}")
        </pre>
    </div>
    
    <hr/>
    
    <h3>Quick Reference: Polymorphism Patterns</h3>
    
    <div style="background-color: #f9f9f9; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <table style="width: 100%;">
            <tr>
                <td style="padding: 8px; border-bottom: 1px solid #ccc; width: 30%;"><b>Pattern</b></td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>Implementation</b></td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>When to Use</b></td>
            </tr>
            <tr>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Inheritance Polymorphism</td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;"><code>class Child(Parent):</code> with method override</td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">When types share hierarchy</td>
            </tr>
            <tr>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Duck Typing</td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Same method names, no inheritance</td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Pythonic, flexible designs</td>
            </tr>
            <tr>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Abstract Base Classes</td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;"><code>from abc import ABC, abstractmethod</code></td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">When formal interface needed</td>
            </tr>
            <tr>
                <td style="padding: 8px;"><b>Strategy Pattern</b></td>
                <td style="padding: 8px;"><b>Pass behavior as object</b></td>
                <td style="padding: 8px;">When algorithms vary independently</td>
            </tr>
        </table>
    </div>
    
    <div style="background-color: #e8f8e8; padding: 20px; margin: 20px 0; border-radius: 5px; border-left: 5px solid #2ecc71;">
        <h4>üöÄ Homework: Notification System with Polymorphism</h4>
        <p>Create a polymorphic notification system:</p>
        <ol>
            <li><b>Base Class:</b> <code>Notification</code> with abstract methods <code>send()</code> and <code>format_message()</code></li>
            <li><b>Concrete Classes:</b>
                <ul>
                    <li><code>EmailNotification</code> - with subject, recipient, HTML formatting</li>
                    <li><code>SMSNotification</code> - with phone number, character limit</li>
                    <li><code>PushNotification</code> - with device token, priority level</li>
                    <li><code>SlackNotification</code> - with channel, attachments</li>
                </ul>
            </li>
            <li><b>Polymorphic Function:</b> <code>send_bulk_notifications(notifications)</code> that works with any notification type</li>
            <li><b>Bonus:</b> Create <code>NotificationFactory</code> that creates appropriate notification based on user preferences</li>
        </ol>
        <p><b>Think About:</b> How would you add a new notification type (like WhatsApp) without changing existing code?</p>
    </div>`
            },
            "7-4": {
                icon: "fa-eye-slash",
                title: "Abstraction - Hiding Complexity, Showing Essentials",
                html: `<h1>Week 7, Day 4: Abstraction - Hiding Complexity, Showing Essentials</h1>
    <p>Today we learn about abstraction - the fourth pillar of OOP that simplifies complex systems by hiding implementation details and exposing only essential features.</p>
    
    <div class="analogy-box">
        <b>Analogy: Car Dashboard vs Engine üöóüîß</b><br/>
        <ul style="margin-top: 10px;">
            <li><b>Abstraction</b> = Car dashboard (simple controls)</li>
            <li><b>Implementation</b> = Engine, transmission, electronics (complex internals)</li>
            <li><b>Interface</b> = Steering wheel, pedals, gear shift (how you interact)</li>
            <li><b>Encapsulation</b> = Engine cover (hides the messy details)</li>
            <li><b>Benefits</b> = You drive without knowing combustion theory</li>
        </ul>
    </div>

    <h3>Key Topics</h3>
    <ul>
        <li>Understanding abstraction concepts</li>
        <li>Abstract classes and interfaces</li>
        <li>Levels of abstraction</li>
        <li>Designing good abstractions</li>
        <li>Practical: Database abstraction layer</li>
    </ul>

    <h3>In-Depth Explanation</h3>
    
    <b>a. What is Abstraction? (Simplifying Complexity)</b>
    
    <div style="background-color: #f9f9f9; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <b>The Abstraction Ladder:</b>
        <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin: 15px 0;">
            <div style="background-color: #e8f4f8; padding: 10px; border-radius: 5px; text-align: center;">
                <b>High-Level</b><br/>
                <div style="font-size: 12px; margin-top: 5px;">
                    <code>user.login()</code><br/>
                    Simple interface
                </div>
            </div>
            <div style="background-color: #d5f4e6; padding: 10px; border-radius: 5px; text-align: center;">
                <b>Mid-Level</b><br/>
                <div style="font-size: 12px; margin-top: 5px;">
                    Hash password<br/>
                    Check database
                </div>
            </div>
            <div style="background-color: #ffebb5; padding: 10px; border-radius: 5px; text-align: center;">
                <b>Low-Level</b><br/>
                <div style="font-size: 12px; margin-top: 5px;">
                    SQL queries<br/>
                    Network calls
                </div>
            </div>
            <div style="background-color: #ffcccb; padding: 10px; border-radius: 5px; text-align: center;">
                <b>Hardware</b><br/>
                <div style="font-size: 12px; margin-top: 5px;">
                    Disk I/O<br/>
                    Memory management
                </div>
            </div>
        </div>
        
        <b>Without Abstraction (Complex):</b>
        <div style="background-color: #ffe6e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
            <pre>
# User has to know EVERYTHING!
def complex_login(username, password):
    # Step 1: Validate input
    if not username or not password:
        return False
    
    # Step 2: Hash password (know algorithm)
    import hashlib
    salt = "static_salt"
    hash_obj = hashlib.sha256()
    hash_obj.update((password + salt).encode())
    hashed_password = hash_obj.hexdigest()
    
    # Step 3: Connect to database (know connection details)
    import sqlite3
    conn = sqlite3.connect('users.db')
    cursor = conn.cursor()
    
    # Step 4: Execute query (know SQL)
    cursor.execute(
        "SELECT id FROM users WHERE username=? AND password_hash=?",
        (username, hashed_password)
    )
    
    # Step 5: Process results
    result = cursor.fetchone()
    conn.close()
    
    # Step 6: Manage session (know session mechanics)
    if result:
        import datetime
        session_token = hashlib.sha256(
            f"{username}{datetime.datetime.now()}".encode()
        ).hexdigest()
        # Store session somewhere...
        return session_token
    
    return False
            </pre>
        </div>
        
        <b>With Abstraction (Simple):</b>
        <div style="background-color: #e8f8e8; padding: 15px; margin: 10px 0; border-radius: 5px;">
            <pre>
# User only needs to know THIS
from auth_system import User

user = User("john_doe")
session = user.login("password123")

if session:
    print("Login successful!")
    # Use the system...
else:
    print("Login failed")
    
# All complexity is hidden inside User class
# User doesn't need to know about:
# - Password hashing algorithms
# - Database connections
# - SQL queries
# - Session management
# - Error handling
            </pre>
        </div>
    </div>
    
    <hr/>
    
    <b>b. Abstract Classes vs Concrete Classes</b>
    
    <div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
from abc import ABC, abstractmethod
import datetime

# ABSTRACT CLASS (Blueprint, cannot be instantiated)
class DatabaseConnection(ABC):
    """Abstract database connection - defines interface"""
    
    @abstractmethod
    def connect(self):
        """Establish connection - MUST be implemented"""
        pass
    
    @abstractmethod
    def execute_query(self, query, params=None):
        """Execute SQL query - MUST be implemented"""
        pass
    
    @abstractmethod
    def disconnect(self):
        """Close connection - MUST be implemented"""
        pass
    
    # Concrete method (shared implementation)
    def log_operation(self, operation):
        """Log database operations - provided for all"""
        timestamp = datetime.datetime.now()
        print(f"[{timestamp}] Database: {operation}")
    
    # Template method pattern
    def safe_execute(self, query, params=None):
        """Template method - uses abstract methods"""
        try:
            self.connect()
            self.log_operation(f"Executing: {query}")
            result = self.execute_query(query, params)
            return result
        except Exception as e:
            self.log_operation(f"Error: {e}")
            raise
        finally:
            self.disconnect()

# CONCRETE CLASS 1 (Implements abstraction)
class MySQLConnection(DatabaseConnection):
    """Concrete implementation for MySQL"""
    
    def __init__(self, host, user, password, database):
        self.host = host
        self.user = user
        self.password = password
        self.database = database
        self.connection = None
    
    def connect(self):
        """MySQL-specific connection"""
        import mysql.connector  # External library
        self.connection = mysql.connector.connect(
            host=self.host,
            user=self.user,
            password=self.password,
            database=self.database
        )
        print(f"Connected to MySQL at {self.host}")
    
    def execute_query(self, query, params=None):
        """MySQL-specific query execution"""
        cursor = self.connection.cursor()
        cursor.execute(query, params or ())
        result = cursor.fetchall()
        cursor.close()
        return result
    
    def disconnect(self):
        """MySQL-specific disconnection"""
        if self.connection:
            self.connection.close()
            print("MySQL connection closed")

# CONCRETE CLASS 2 (Another implementation)
class SQLiteConnection(DatabaseConnection):
    """Concrete implementation for SQLite"""
    
    def __init__(self, db_path):
        self.db_path = db_path
        self.connection = None
    
    def connect(self):
        """SQLite-specific connection"""
        import sqlite3  # Different library!
        self.connection = sqlite3.connect(self.db_path)
        print(f"Connected to SQLite database: {self.db_path}")
    
    def execute_query(self, query, params=None):
        """SQLite-specific query execution"""
        cursor = self.connection.cursor()
        cursor.execute(query, params or ())
        result = cursor.fetchall()
        self.connection.commit()
        return result
    
    def disconnect(self):
        """SQLite-specific disconnection"""
        if self.connection:
            self.connection.close()
            print("SQLite connection closed")

# CONCRETE CLASS 3 (Mock for testing)
class MockConnection(DatabaseConnection):
    """Mock implementation for testing"""
    
    def connect(self):
        print("Mock: Simulating connection")
        self.data = {"users": [{"id": 1, "name": "Test User"}]}
    
    def execute_query(self, query, params=None):
        print(f"Mock: Executing {query}")
        # Return mock data
        return self.data.get("users", [])
    
    def disconnect(self):
        print("Mock: Simulating disconnection")

# Usage - all work with same interface!
def database_operations(db_connection):
    """Works with ANY DatabaseConnection implementation"""
    # User doesn't need to know which database
    users = db_connection.safe_execute("SELECT * FROM users")
    print(f"Found {len(users)} users")
    return users

# Different connections, same interface
mysql_db = MySQLConnection("localhost", "root", "pass", "mydb")
sqlite_db = SQLiteConnection("data.db")
mock_db = MockConnection()

# All work with the same function!
for db in [mysql_db, sqlite_db, mock_db]:
    print(f"\nUsing {db.__class__.__name__}:")
    database_operations(db)
        </pre>
    </div>
    
    <b>Abstraction vs Implementation:</b>
    <div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <table style="width: 100%;">
            <tr>
                <td style="padding: 8px; border-bottom: 1px solid #ccc; width: 50%;"><b>Abstraction (What)</b></td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>Implementation (How)</b></td>
            </tr>
            <tr>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Defines interface</td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Provides concrete code</td>
            </tr>
            <tr>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;"><code>DatabaseConnection.connect()</code></td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;"><code>MySQLConnection.connect()</code> specifics</td>
            </tr>
            <tr>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Stable, changes rarely</td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Can change frequently</td>
            </tr>
            <tr>
                <td style="padding: 8px;"><b>Focus on capabilities</b></td>
                <td style="padding: 8px;"><b>Focus on mechanics</b></td>
            </tr>
        </table>
    </div>
    
    <hr/>
    
    <b>c. Levels of Abstraction - Building Layers</b>
    
    <div style="background-color: #f9f9f9; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <b>E-commerce System Abstraction Layers:</b>
        <div style="background-color: #e8f4f8; padding: 15px; margin: 10px 0; border-radius: 5px;">
            <pre>
# LAYER 1: High-Level Business Logic (Most Abstract)
class ShoppingCart:
    """High-level abstraction for shopping"""
    def add_item(self, product, quantity):
        pass
    
    def checkout(self, payment_method):
        pass
    
    def calculate_total(self):
        pass

# LAYER 2: Middle-Level Services
class PaymentProcessor:
    """Abstraction for payments"""
    def process_payment(self, amount, method):
        pass
    
    def refund(self, transaction_id):
        pass

class InventoryManager:
    """Abstraction for inventory"""
    def check_availability(self, product_id):
        pass
    
    def update_stock(self, product_id, quantity):
        pass

# LAYER 3: Low-Level Implementations
class StripePaymentProcessor(PaymentProcessor):
    """Concrete payment implementation"""
    def process_payment(self, amount, method):
        # Actual Stripe API calls
        import stripe
        stripe.Charge.create(amount=amount, currency="usd", source=method)
    
    def refund(self, transaction_id):
        # Stripe refund API
        stripe.Refund.create(charge=transaction_id)

class PayPalPaymentProcessor(PaymentProcessor):
    """Another concrete implementation"""
    def process_payment(self, amount, method):
        # PayPal API calls
        import paypalrestsdk
        payment = paypalrestsdk.Payment({
            "intent": "sale",
            "payer": {"payment_method": "paypal"},
            "transactions": [{"amount": {"total": amount, "currency": "USD"}}]
        })
        payment.create()

# LAYER 4: Database Layer
class DatabaseInventoryManager(InventoryManager):
    """Database-backed inventory"""
    def check_availability(self, product_id):
        # SQL queries
        return self.db.execute(
            "SELECT quantity FROM products WHERE id = ?", 
            (product_id,)
        )
    
    def update_stock(self, product_id, quantity):
        # More SQL
        self.db.execute(
            "UPDATE products SET quantity = quantity - ? WHERE id = ?",
            (quantity, product_id)
        )

# LAYER 5: File-Based Implementation (Alternative)
class FileInventoryManager(InventoryManager):
    """File-backed inventory (for testing/simple apps)"""
    def check_availability(self, product_id):
        # Read from JSON/CSV file
        import json
        with open("inventory.json") as f:
            inventory = json.load(f)
            return inventory.get(str(product_id), 0)
    
    def update_stock(self, product_id, quantity):
        # Write to file
        import json
        with open("inventory.json", "r+") as f:
            inventory = json.load(f)
            inventory[str(product_id)] = max(0, inventory.get(str(product_id), 0) - quantity)
            f.seek(0)
            json.dump(inventory, f)

# USAGE: High-level code doesn't care about implementations
cart = ShoppingCart()
cart.add_item("laptop", 1)

# Could use Stripe or PayPal - same interface!
payment_processor = StripePaymentProcessor()  # Or PayPalPaymentProcessor()
cart.checkout(payment_processor)

# Could use Database or File - same interface!
inventory = DatabaseInventoryManager()  # Or FileInventoryManager()
inventory.check_availability("laptop")
            </pre>
        </div>
        
        <b>Abstraction Layer Benefits:</b>
        <div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
            <table style="width: 100%;">
                <tr>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>Separation of Concerns</b></td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Each layer has single responsibility</td>
                </tr>
                <tr>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>Testability</b></td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Can mock lower layers</td>
                </tr>
                <tr>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>Flexibility</b></td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Change implementations without affecting higher layers</td>
                </tr>
                <tr>
                    <td style="padding: 8px;"><b>Parallel Development</b></td>
                    <td style="padding: 8px;">Teams can work on different layers</td>
                </tr>
            </table>
        </div>
    </div>
    
    <hr/>
    
    <b>d. Designing Good Abstractions</b>
    
    <div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
# BAD ABSTRACTION (Leaky)
class FileHandler:
    """BAD: Exposes implementation details"""
    def __init__(self):
        self.file = None
        self.buffer_size = 1024  # Implementation detail!
        self.encoding = "utf-8"  # Implementation detail!
    
    def open_file(self, path, mode="r"):
        self.file = open(path, mode, encoding=self.encoding)
    
    def read_in_chunks(self):
        """Exposes chunking mechanism"""
        while True:
            chunk = self.file.read(self.buffer_size)  # Exposes buffer
            if not chunk:
                break
            yield chunk
    
    def close_with_flush(self):
        """Exposes flush behavior"""
        self.file.flush()  # Implementation detail!
        self.file.close()

# GOOD ABSTRACTION (Clean)
from abc import ABC, abstractmethod

class DataSource(ABC):
    """GOOD: Clean abstraction for data sources"""
    
    @abstractmethod
    def read(self):
        """Read all data - implementation hides details"""
        pass
    
    @abstractmethod
    def write(self, data):
        """Write data - implementation hides details"""
        pass
    
    @abstractmethod
    def close(self):
        """Close resource - implementation decides how"""
        pass
    
    # No implementation details exposed!
    # User doesn't need to know about:
    # - Buffers
    # - Encodings
    # - Chunking
    # - Flushing
    # - File handles
    # - Network sockets
    # - Memory management

# Good concrete implementation
class FileDataSource(DataSource):
    """Implements abstraction cleanly"""
    def __init__(self, filepath):
        self.filepath = filepath
        self._file = None  # Private - implementation detail
    
    def read(self):
        """Simple interface - hides complexity"""
        if not self._file:
            self._file = open(self.filepath, "r", encoding="utf-8")
        
        # Internal implementation (could use chunks, buffers, etc.)
        data = self._file.read()
        
        # Could add caching, compression, etc. without changing interface
        return data
    
    def write(self, data):
        """Simple interface - hides complexity"""
        if not self._file:
            self._file = open(self.filepath, "w", encoding="utf-8")
        
        # Internal: might buffer, might write directly
        self._file.write(data)
        
        # Could add encryption, compression, etc.
    
    def close(self):
        """Simple interface - handles details internally"""
        if self._file:
            # Internal: might flush, might not
            self._file.close()
            self._file = None

# Another implementation (different technology)
class HttpDataSource(DataSource):
    """Same interface, completely different implementation"""
    def __init__(self, url):
        self.url = url
        self._session = None  # Private - different detail!
    
    def read(self):
        import requests
        if not self._session:
            self._session = requests.Session()
        
        # Completely different implementation
        response = self._session.get(self.url)
        return response.text
    
    def write(self, data):
        # HTTP POST implementation
        import requests
        response = requests.post(self.url, data=data)
        return response.status_code
    
    def close(self):
        if self._session:
            self._session.close()
            self._session = None

# USAGE: Both work the same way!
def process_data(source):
    """Works with ANY DataSource"""
    data = source.read()
    processed = data.upper()  # Business logic
    source.write(processed)
    source.close()

# User doesn't care about implementation
file_source = FileDataSource("data.txt")
http_source = HttpDataSource("http://api.example.com/data")

process_data(file_source)  # Works with files
process_data(http_source)  # Works with HTTP - same code!
        </pre>
    </div>
    
    <b>Principles of Good Abstraction:</b>
    <div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <table style="width: 100%;">
            <tr>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>Minimal Interface</b></td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Expose only what's necessary</td>
            </tr>
            <tr>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>Stable Interface</b></td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Don't change interface frequently</td>
            </tr>
            <tr>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>Implementation Hiding</b></td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Hide all implementation details</td>
            </tr>
            <tr>
                <td style="padding: 8px;"><b>Single Responsibility</b></td>
                <td style="padding: 8px;">One clear purpose per abstraction</td>
            </tr>
        </table>
    </div>
    
    <hr/>
    
    <b>e. Practical: Complete Notification System with Abstraction</b>
    
    <div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
from abc import ABC, abstractmethod
import datetime
from typing import List, Dict, Any

# ===== HIGH-LEVEL ABSTRACTION =====
class Notification(ABC):
    """Abstract notification - defines what a notification CAN DO"""
    
    def __init__(self, recipient: str, message: str):
        self.recipient = recipient
        self.message = message
        self.timestamp = datetime.datetime.now()
        self.status = "PENDING"
    
    @abstractmethod
    def send(self) -> bool:
        """Send the notification - MUST be implemented"""
        pass
    
    @abstractmethod
    def format_message(self) -> str:
        """Format message appropriately - MUST be implemented"""
        pass
    
    # Concrete methods (shared behavior)
    def mark_sent(self) -> None:
        """Update status - provided for all"""
        self.status = "SENT"
        self.sent_time = datetime.datetime.now()
    
    def mark_failed(self, error: str) -> None:
        """Update status - provided for all"""
        self.status = f"FAILED: {error}"
    
    def get_summary(self) -> str:
        """Template method using abstract methods"""
        return f"""
        Notification Summary:
        Type: {self.__class__.__name__}
        Recipient: {self.recipient}
        Message: {self.format_message()[:50]}...
        Status: {self.status}
        Timestamp: {self.timestamp}
        """

# ===== MID-LEVEL ABSTRACTIONS =====
class EmailNotification(Notification):
    """Abstraction for email notifications"""
    
    def __init__(self, recipient: str, message: str, subject: str):
        super().__init__(recipient, message)
        self.subject = subject
        self.attachments: List[str] = []
    
    @abstractmethod
    def _connect_to_server(self) -> Any:
        """Connect to email server - implementation specific"""
        pass
    
    @abstractmethod
    def _build_email(self) -> Dict[str, Any]:
        """Build email structure - implementation specific"""
        pass
    
    def format_message(self) -> str:
        """Email-specific formatting"""
        return f"Subject: {self.subject}\n\n{self.message}"
    
    def add_attachment(self, filepath: str) -> None:
        """Email-specific feature"""
        self.attachments.append(filepath)

class MobileNotification(Notification):
    """Abstraction for mobile notifications"""
    
    def __init__(self, recipient: str, message: str, device_token: str):
        super().__init__(recipient, message)
        self.device_token = device_token
        self.badge_count = 1
        self.sound = "default"
    
    @abstractmethod
    def _get_push_service(self) -> Any:
        """Get push notification service - implementation specific"""
        pass
    
    def format_message(self) -> str:
        """Mobile-specific formatting (shorter)"""
        return self.message[:100]  # Truncate for mobile

# ===== CONCRETE IMPLEMENTATIONS =====
class SMTPEmailNotification(EmailNotification):
    """Concrete implementation using SMTP"""
    
    def __init__(self, recipient: str, message: str, subject: str,
                 smtp_server: str, smtp_port: int):
        super().__init__(recipient, message, subject)
        self.smtp_server = smtp_server
        self.smtp_port = smtp_port
    
    def _connect_to_server(self):
        """SMTP-specific connection"""
        import smtplib
        server = smtplib.SMTP(self.smtp_server, self.smtp_port)
        server.starttls()
        # Would add login credentials here
        return server
    
    def _build_email(self):
        """SMTP-specific email building"""
        from email.mime.multipart import MIMEMultipart
        from email.mime.text import MIMEText
        
        msg = MIMEMultipart()
        msg['From'] = 'noreply@company.com'
        msg['To'] = self.recipient
        msg['Subject'] = self.subject
        msg.attach(MIMEText(self.message, 'plain'))
        
        # Handle attachments
        for attachment in self.attachments:
            # Add attachment logic
            pass
        
        return msg
    
    def send(self) -> bool:
        """SMTP-specific sending"""
        try:
            server = self._connect_to_server()
            email_msg = self._build_email()
            
            server.send_message(email_msg)
            server.quit()
            
            self.mark_sent()
            return True
        except Exception as e:
            self.mark_failed(str(e))
            return False

class SendGridEmailNotification(EmailNotification):
    """Alternative implementation using SendGrid API"""
    
    def __init__(self, recipient: str, message: str, subject: str,
                 api_key: str):
        super().__init__(recipient, message, subject)
        self.api_key = api_key
    
    def _connect_to_server(self):
        """SendGrid API connection"""
        import sendgrid
        return sendgrid.SendGridAPIClient(self.api_key)
    
    def _build_email(self):
        """SendGrid-specific email building"""
        from sendgrid.helpers.mail import Mail, Content
        
        # SendGrid uses different structure
        content = Content("text/plain", self.message)
        mail = Mail(
            from_email="noreply@company.com",
            to_emails=self.recipient,
            subject=self.subject,
            plain_text_content=content
        )
        return mail
    
    def send(self) -> bool:
        """SendGrid-specific sending"""
        try:
            client = self._connect_to_server()
            email = self._build_email()
            
            response = client.client.mail.send.post(request_body=email.get())
            
            if response.status_code == 202:
                self.mark_sent()
                return True
            else:
                self.mark_failed(f"HTTP {response.status_code}")
                return False
        except Exception as e:
            self.mark_failed(str(e))
            return False

class FirebaseNotification(MobileNotification):
    """Concrete implementation using Firebase"""
    
    def __init__(self, recipient: str, message: str, device_token: str,
                 project_id: str):
        super().__init__(recipient, message, device_token)
        self.project_id = project_id
    
    def _get_push_service(self):
        """Firebase connection"""
        import firebase_admin
        from firebase_admin import credentials, messaging
        
        if not firebase_admin._apps:
            cred = credentials.Certificate("service-account.json")
            firebase_admin.initialize_app(cred)
        
        return messaging
    
    def send(self) -> bool:
        """Firebase-specific sending"""
        try:
            messaging = self._get_push_service()
            
            message = messaging.Message(
                notification=messaging.Notification(
                    title="Notification",
                    body=self.format_message()
                ),
                token=self.device_token,
                android=messaging.AndroidConfig(
                    priority='high',
                    notification=messaging.AndroidNotification(
                        sound=self.sound,
                        badge=str(self.badge_count)
                    )
                )
            )
            
            response = messaging.send(message)
            self.mark_sent()
            return True
        except Exception as e:
            self.mark_failed(str(e))
            return False

class ConsoleNotification(Notification):
    """Simple implementation for testing/demo"""
    def format_message(self) -> str:
        return self.message
    
    def send(self) -> bool:
        print(f"[CONSOLE NOTIFICATION] To: {self.recipient}")
        print(f"Message: {self.message}")
        print("-" * 40)
        self.mark_sent()
        return True

# ===== HIGH-LEVEL NOTIFICATION SERVICE =====
class NotificationService:
    """High-level service that uses abstractions"""
    
    def __init__(self):
        self.notifications_sent = 0
        self.notifications_failed = 0
    
    def send_notification(self, notification: Notification) -> bool:
        """Send any type of notification (polymorphic)"""
        print(f"\nPreparing to send {notification.__class__.__name__}...")
        
        success = notification.send()
        
        if success:
            self.notifications_sent += 1
            print("‚úì Notification sent successfully")
        else:
            self.notifications_failed += 1
            print("‚úó Notification failed")
        
        print(notification.get_summary())
        return success
    
    def send_bulk(self, notifications: List[Notification]) -> Dict[str, int]:
        """Send multiple notifications of different types"""
        results = {"success": 0, "failed": 0}
        
        for notification in notifications:
            if self.send_notification(notification):
                results["success"] += 1
            else:
                results["failed"] += 1
        
        return results
    
    def get_stats(self) -> str:
        return f"""
        Notification Statistics:
        Total Sent: {self.notifications_sent}
        Total Failed: {self.notifications_failed}
        Success Rate: {(self.notifications_sent/(self.notifications_sent + self.notifications_failed)*100):.1f}%
        """

# ===== USAGE =====
if __name__ == "__main__":
    service = NotificationService()
    
    # Different notification types (same high-level interface)
    notifications = [
        SMTPEmailNotification(
            recipient="user@example.com",
            message="Your order has shipped!",
            subject="Order Update",
            smtp_server="smtp.gmail.com",
            smtp_port=587
        ),
        SendGridEmailNotification(
            recipient="another@example.com",
            message="Welcome to our service!",
            subject="Welcome",
            api_key="SG.xxx"
        ),
        FirebaseNotification(
            recipient="mobile_user",
            message="You have a new message",
            device_token="device_token_123",
            project_id="my-project"
        ),
        ConsoleNotification(
            recipient="developer",
            message="Test notification"
        )
    ]
    
    # Send all notifications (polymorphic)
    results = service.send_bulk(notifications)
    
    print(f"\n=== Bulk Send Results ===")
    print(f"Successful: {results['success']}")
    print(f"Failed: {results['failed']}")
    print(service.get_stats())
        </pre>
    </div>
    
    <hr/>
    
    <div class="assignment-box">
        <h4>Assignment: Build a Logging Abstraction System</h4>
        
        <b>Part 1: Create Logger Abstraction</b>
        <div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
            Create <code>Logger</code> abstract base class with:
            <ul>
                <li><b>Abstract methods:</b>
                    <ul>
                        <li><code>log(message, level)</code> - log a message</li>
                        <li><code>flush()</code> - ensure all logs are written</li>
                    </ul>
                </li>
                <li><b>Concrete methods:</b>
                    <ul>
                        <li><code>debug(), info(), warning(), error(), critical()</code> - convenience methods</li>
                        <li><code>set_level(min_level)</code> - filter logs by level</li>
                    </ul>
                </li>
            </ul>
        </div>
        
        <b>Part 2: Implement Different Loggers</b>
        <div style="background-color: #fff0e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
            Create concrete implementations:
            <ol>
                <li><b>FileLogger:</b> Writes to a file with rotation</li>
                <li><b>ConsoleLogger:</b> Prints to console with colors</li>
                <li><b>DatabaseLogger:</b> Stores logs in database</li>
                <li><b>NetworkLogger:</b> Sends logs to remote server</li>
                <li><b>CompositeLogger:</b> Logs to multiple destinations</li>
            </ol>
        </div>
        
        <b>Part 3: Create Logging Service</b>
        <div style="background-color: #f0fff0; padding: 15px; margin: 10px 0; border-radius: 5px;">
            <pre>
class LoggingService:
    def __init__(self, logger: Logger):
        self.logger = logger
    
    def process_data(self, data):
        """Example method that uses logging abstraction"""
        self.logger.info("Starting data processing")
        
        try:
            # Process data...
            self.logger.debug(f"Processing {len(data)} items")
            
            if not data:
                self.logger.warning("Empty data received")
            
            # More processing...
            self.logger.info("Data processing completed")
            
        except Exception as e:
            self.logger.error(f"Processing failed: {e}")
            raise
            </pre>
        </div>
        
        <b>Part 4: Test Abstraction Benefits</b>
        <div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px; font-family: monospace;">
            # Test with different loggers without changing business logic
            service1 = LoggingService(FileLogger("app.log"))
            service2 = LoggingService(ConsoleLogger())
            service3 = LoggingService(CompositeLogger([
                FileLogger("app.log"),
                DatabaseLogger(),
                NetworkLogger("log-server:514")
            ]))
            
            # All work the same way!
            data = [1, 2, 3]
            service1.process_data(data)  # Logs to file
            service2.process_data(data)  # Logs to console
            service3.process_data(data)  # Logs to multiple places
            
            # Switch logger at runtime
            if config.get("environment") == "production":
                service = LoggingService(FileLogger("/var/log/app.log"))
            else:
                service = LoggingService(ConsoleLogger())
            
            # Business logic stays the same!
        </div>
    </div>
    
    <hr/>
    
    <h3>Common Mistakes & Solutions</h3>
    
    <b>Mistake 1: Leaky abstraction</b>
    <div style="background-color: #ffe6e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
# WRONG - Abstraction leaks implementation details
class Database:
    def query(self, sql, use_index=True, cache_results=False):
        # Parameters expose implementation concerns
        pass
    
    def connect(self, timeout=30, retries=3, pool_size=5):
        # Caller needs to know about connection pooling
        pass

# User has to understand database internals
db = Database()
db.connect(timeout=60, pool_size=10)  # üíÄ Too many details!
db.query("SELECT * FROM users", use_index=True, cache_results=True)

# RIGHT - Hide implementation details
class Database:
    def query(self, query):
        # Implementation decides about indexes, caching
        pass
    
    def connect(self):
        # Implementation decides timeouts, pooling
        pass

# User works with simple interface
db = Database()
db.connect()  # Simple!
db.query("SELECT * FROM users")  # Simple!
        </pre>
    </div>
    
    <b>Mistake 2: Over-abstraction (too many layers)</b>
    <div style="background-color: #ffe6e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
# WRONG - Too many abstraction layers for simple task
class AbstractDataReader(ABC):
    @abstractmethod
    def read(self): pass

class AbstractFileReader(AbstractDataReader):
    @abstractmethod
    def open_file(self): pass

class AbstractTextFileReader(AbstractFileReader):
    @abstractmethod
    def decode_text(self): pass

class UTF8TextFileReader(AbstractTextFileReader):
    # Finally implementation... too complex!

# RIGHT - Appropriate abstraction for simple task
class FileReader:
    def read_file(self, path):
        with open(path, 'r', encoding='utf-8') as f:
            return f.read()
        # Simple, clear, gets the job done
        </pre>
    </div>
    
    <b>Mistake 3: Abstracting too early</b>
    <div style="background-color: #ffe6e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
# WRONG - Abstracting before understanding requirements
class AbstractPaymentProcessor(ABC):
    @abstractmethod
    def process(self): pass
    
    @abstractmethod
    def refund(self): pass
    
    @abstractmethod
    def cancel(self): pass
    
    @abstractmethod
    def partial_refund(self): pass
    
    @abstractmethod
    def recurring_payment(self): pass
    
    # ... 20 more methods for "future proofing"

# Months later: Only need process() and refund()
# All other abstractions were unnecessary

# RIGHT - Abstract when you have concrete examples
# Start with simple implementation
class StripeProcessor:
    def process(self, amount):
        # Simple implementation
        pass
    
    def refund(self, transaction_id):
        pass

# When you need another processor, then abstract
class PaymentProcessor(ABC):
    @abstractmethod
    def process(self): pass
    
    @abstractmethod
    def refund(self): pass
    # Only abstract what you actually need
        </pre>
    </div>
    
    <hr/>
    
    <h3>Quick Reference: Abstraction Guidelines</h3>
    
    <div style="background-color: #f9f9f9; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <table style="width: 100%;">
            <tr>
                <td style="padding: 8px; border-bottom: 1px solid #ccc; width: 30%;"><b>Guideline</b></td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>Implementation</b></td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>Example</b></td>
            </tr>
            <tr>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Hide implementation</td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Private attributes/methods</td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;"><code>self._internal_detail</code></td>
            </tr>
            <tr>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Minimal interface</td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Few public methods</td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;"><code>.read(), .write(), .close()</code></td>
            </tr>
            <tr>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Stable interface</td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Don't change public methods</td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Version 1.0 to 2.0 compatible</td>
            </tr>
            <tr>
                <td style="padding: 8px;"><b>Appropriate granularity</b></td>
                <td style="padding: 8px;"><b>Not too big, not too small</b></td>
                <td style="padding: 8px;">FileReader vs ByteReader vs DiskSectorReader</td>
            </tr>
        </table>
    </div>
    
    <div style="background-color: #e8f8e8; padding: 20px; margin: 20px 0; border-radius: 5px; border-left: 5px solid #2ecc71;">
        <h4>üöÄ Week 7 Review: The Four Pillars of OOP</h4>
        <p><b>This Week's Accomplishments:</b></p>
        <ul>
            <li><b>Inheritance:</b> Child classes reuse and extend parent behavior</li>
            <li><b>Encapsulation:</b> Protect data with private/protected attributes</li>
            <li><b>Polymorphism:</b> One interface, many implementations</li>
            <li><b>Abstraction:</b> Hide complexity, expose simple interfaces</li>
        </ul>
        
        <p><b>How They Work Together:</b></p>
        <div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
            <pre>
class Vehicle(ABC):                     # ABSTRACTION + INHERITANCE
    def __init__(self):
        self.__engine_status = "off"    # ENCAPSULATION (private)
    
    @abstractmethod
    def move(self):                     # ABSTRACTION (interface)
        pass
    
    def start_engine(self):
        self.__engine_status = "on"     # ENCAPSULATION (hidden logic)

class Car(Vehicle):                     # INHERITANCE
    def move(self):
        return "Driving on road"       # POLYMORPHISM (specific implementation)

class Boat(Vehicle):                    # INHERITANCE
    def move(self):
        return "Sailing on water"      # POLYMORPHISM (different implementation)

# Usage demonstrates all pillars
vehicles = [Car(), Boat()]
for vehicle in vehicles:               # POLYMORPHISM
    vehicle.start_engine()             # ABSTRACTION (simple interface)
    print(vehicle.move())              # POLYMORPHISM + ABSTRACTION
            </pre>
        </div>
        
        <p><b>Next Week Preview: Error Handling & File I/O</b></p>
        <ol>
            <li><b>Error Handling:</b> Try/except blocks, custom exceptions</li>
            <li><b>File Operations:</b> Reading/writing text, CSV, JSON files</li>
            <li><b>Logging:</b> Professional error logging</li>
            <li><b>Data Persistence:</b> Saving object state to files</li>
        </ol>
        
        <p><b>Final Homework:</b> Design a complete library management system using all four OOP pillars.</p>
    </div>
    
    <div style="text-align: center; margin-top: 30px; padding: 20px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border-radius: 10px;">
        <h2>üéâ Congratulations on Completing Object-Oriented Programming!</h2>
        <p>You now understand the fundamental concepts that professional developers use every day.</p>
        <p>These principles will help you write cleaner, more maintainable, and more scalable code.</p>
        <p><b>Remember:</b> Good OOP design makes complex problems manageable!</p>
    </div>`
            },

            "8-1": {
                icon: "fa-exclamation-triangle",
                title: "Error Handling & Exception Management",
                html: `<h1>Week 8, Day 1: Professional Error Handling & Exception Management</h1>
    <p>Today we'll learn how to handle errors gracefully and build robust, crash-resistant applications.</p>
    
    <div class="analogy-box">
        <b>Analogy: Building with Safety Nets üõ°Ô∏è</b><br/>
        <ul style="margin-top: 10px;">
            <li><b>No error handling</b> = Walking a tightrope without a net</li>
            <li><b>Try/Except blocks</b> = Safety net to catch falls</li>
            <li><b>Specific exceptions</b> = Different nets for different falls</li>
            <li><b>Logging errors</b> = Recording what caused the fall</li>
            <li><b>Graceful recovery</b> = Getting back on safely after a fall</li>
        </ul>
    </div>

    <h3>Why Error Handling Matters</h3>
    <table border="1" cellpadding="10" cellspacing="0" style="width: 100%; margin: 15px 0; border-collapse: collapse;">
        <thead>
            <tr style="background-color: #dc3545; color: white;">
                <th>Scenario</th>
                <th>Without Error Handling</th>
                <th>With Error Handling</th>
                <th>User Experience</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><b>File Not Found</b></td>
                <td>Program crashes with traceback</td>
                <td>Shows friendly message, offers to create file</td>
                <td>üö´ ‚Üí ‚úÖ</td>
            </tr>
            <tr>
                <td><b>Invalid Input</b></td>
                <td>ValueError crashes program</td>
                <td>Prompts user to re-enter with explanation</td>
                <td>üö´ ‚Üí ‚úÖ</td>
            </tr>
            <tr>
                <td><b>Network Failure</b></td>
                <td>ConnectionError crashes app</td>
                <td>Shows offline mode, retries later</td>
                <td>üö´ ‚Üí ‚úÖ</td>
            </tr>
            <tr>
                <td><b>Memory Error</b></td>
                <td>App crashes, data lost</td>
                <td>Saves progress, shows memory warning</td>
                <td>üö´ ‚Üí ‚ö†Ô∏è</td>
            </tr>
            <tr>
                <td><b>Divide by Zero</b></td>
                <td>ZeroDivisionError crashes</td>
                <td>Shows "Cannot divide by zero" message</td>
                <td>üö´ ‚Üí ‚úÖ</td>
            </tr>
        </tbody>
    </table>

    <h3>Python Exception Hierarchy</h3>
    <div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre style="font-family: 'Courier New', monospace;">
BaseException
‚îú‚îÄ‚îÄ SystemExit
‚îú‚îÄ‚îÄ KeyboardInterrupt
‚îú‚îÄ‚îÄ GeneratorExit
‚îî‚îÄ‚îÄ Exception
    ‚îú‚îÄ‚îÄ ArithmeticError
    ‚îÇ   ‚îú‚îÄ‚îÄ ZeroDivisionError
    ‚îÇ   ‚îú‚îÄ‚îÄ FloatingPointError
    ‚îÇ   ‚îî‚îÄ‚îÄ OverflowError
    ‚îú‚îÄ‚îÄ LookupError
    ‚îÇ   ‚îú‚îÄ‚îÄ IndexError        # list[10] when list has 5 items
    ‚îÇ   ‚îî‚îÄ‚îÄ KeyError          # dict['missing_key']
    ‚îú‚îÄ‚îÄ OSError
    ‚îÇ   ‚îú‚îÄ‚îÄ FileNotFoundError
    ‚îÇ   ‚îú‚îÄ‚îÄ PermissionError
    ‚îÇ   ‚îî‚îÄ‚îÄ ConnectionError
    ‚îú‚îÄ‚îÄ TypeError             # "hello" + 5
    ‚îú‚îÄ‚îÄ ValueError            # int("hello")
    ‚îú‚îÄ‚îÄ RuntimeError
    ‚îÇ   ‚îî‚îÄ‚îÄ RecursionError
    ‚îú‚îÄ‚îÄ NameError             # undefined_variable
    ‚îî‚îÄ‚îÄ AttributeError        # object.non_existent_method()
        </pre>
    </div>

    <h3>Basic to Advanced Error Handling</h3>
    
    <b>Level 1: Basic Try/Except</b>
    <div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
# BAD - Crashes on invalid input
def basic_calculator():
    num1 = float(input("Enter first number: "))
    num2 = float(input("Enter second number: "))
    result = num1 / num2  # Crashes if num2 = 0
    print(f"Result: {result}")

# GOOD - Basic error handling
def safe_calculator():
    try:
        num1 = float(input("Enter first number: "))
        num2 = float(input("Enter second number: "))
        result = num1 / num2
        print(f"Result: {result}")
    except:
        print("Something went wrong!")
        </pre>
    </div>

    <b>Level 2: Specific Exception Handling</b>
    <div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
def better_calculator():
    try:
        num1 = float(input("Enter first number: "))
        num2 = float(input("Enter second number: "))
        result = num1 / num2
        print(f"Result: {result}")
    
    except ValueError:
        print("‚ùå Invalid input. Please enter numbers only.")
    
    except ZeroDivisionError:
        print("‚ùå Cannot divide by zero. Please enter a non-zero second number.")
    
    except Exception as e:
        print(f"‚ùå An unexpected error occurred: {type(e).__name__}")
        </pre>
    </div>

    <b>Level 3: Complete Error Handling with Else & Finally</b>
    <div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
def professional_calculator():
    """Complete error handling with all clauses"""
    
    try:
        # Code that might raise exceptions
        num1 = float(input("Enter first number: "))
        num2 = float(input("Enter second number: "))
        
        # This might raise ZeroDivisionError
        result = num1 / num2
    
    except ValueError as ve:
        # Handle wrong input type
        print(f"‚ùå Input error: {ve}")
        print("üí° Please enter valid numbers (e.g., 5, 3.14, -2)")
        result = None
    
    except ZeroDivisionError:
        # Handle division by zero
        print("‚ö†Ô∏è  Division by zero is not allowed in mathematics.")
        print("üí° Try entering a non-zero second number.")
        result = None
    
    except Exception as e:
        # Catch-all for unexpected errors
        print(f"üö® Unexpected error: {type(e).__name__}")
        print(f"üîß Details: {e}")
        result = None
    
    else:
        # Runs ONLY if no exceptions occurred
        print("‚úÖ Calculation successful!")
    
    finally:
        # Runs ALWAYS, regardless of exceptions
        print("üìä Calculator session ended.")
        print("-" * 40)
    
    return result
        </pre>
    </div>

    <h3>Custom Exception Classes</h3>
    
    <b>Creating Domain-Specific Exceptions</b>
    <div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
# banking_exceptions.py

class BankingError(Exception):
    """Base exception for all banking-related errors"""
    pass

class InsufficientFundsError(BankingError):
    """Raised when user tries to withdraw more than balance"""
    def __init__(self, balance, requested):
        self.balance = balance
        self.requested = requested
        super().__init__(f"Insufficient funds: \\\${balance:.2f} available, \\\${requested:.2f} requested")

class InvalidTransactionError(BankingError):
    """Raised for invalid transaction parameters"""
    def __init__(self, message, transaction_type):
        self.transaction_type = transaction_type
        super().__init__(f"Invalid {transaction_type}: {message}")

class SecurityViolationError(BankingError):
    """Raised for security breaches"""
    def __init__(self, violation_type, severity="medium"):
        self.violation_type = violation_type
        self.severity = severity
        super().__init__(f"Security violation: {violation_type} (Severity: {severity})")

class AccountLockedError(BankingError):
    """Raised when account is locked"""
    def __init__(self, unlock_time=None):
        self.unlock_time = unlock_time
        if unlock_time:
            message = f"Account locked until {unlock_time}"
        else:
            message = "Account is locked. Contact support."
        super().__init__(message)

# Usage in banking system
def withdraw(amount):
    if amount > current_balance:
        raise InsufficientFundsError(current_balance, amount)
    
    if amount <= 0:
        raise InvalidTransactionError("Amount must be positive", "withdrawal")
    
    # Process withdrawal...
    return True
        </pre>
    </div>

    <h3>Error Handling Patterns</h3>
    
    <b>Pattern 1: Retry Pattern</b>
    <div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
import time

def retry_operation(operation, max_attempts=3, delay=1):
    """
    Retry an operation that might fail temporarily
    
    Args:
        operation: Function to call
        max_attempts: Maximum retry attempts
        delay: Seconds to wait between retries
    """
    for attempt in range(max_attempts):
        try:
            return operation()  # Try to execute
        
        except (ConnectionError, TimeoutError) as e:
            if attempt == max_attempts - 1:  # Last attempt failed
                raise  # Re-raise the exception
            
            print(f"‚ö†Ô∏è  Attempt {attempt + 1} failed: {e}")
            print(f"üîÑ Retrying in {delay} seconds...")
            time.sleep(delay)
        
        except Exception as e:
            # Don't retry on other errors
            print(f"‚ùå Non-retryable error: {e}")
            raise

# Example usage
def fetch_account_data():
    # Simulate network call that might fail
    import random
    if random.random() < 0.7:  # 70% chance of failure
        raise ConnectionError("Network timeout")
    return {"balance": 1000.00}

# Will retry up to 3 times
data = retry_operation(fetch_account_data, max_attempts=3, delay=2)
        </pre>
    </div>

    <b>Pattern 2: Circuit Breaker Pattern</b>
    <div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
class CircuitBreaker:
    """Prevent repeated failures from overwhelming the system"""
    
    def __init__(self, failure_threshold=5, reset_timeout=60):
        self.failure_threshold = failure_threshold
        self.reset_timeout = reset_timeout
        self.failure_count = 0
        self.last_failure_time = None
        self.state = "CLOSED"  # CLOSED, OPEN, HALF_OPEN
    
    def call(self, operation):
        """Execute operation with circuit breaker protection"""
        
        if self.state == "OPEN":
            # Check if we should try again
            if time.time() - self.last_failure_time > self.reset_timeout:
                self.state = "HALF_OPEN"
                print("‚ö†Ô∏è  Circuit breaker: Trying recovery...")
            else:
                raise Exception("Circuit breaker OPEN - service unavailable")
        
        try:
            result = operation()
            
            # Success - reset circuit
            if self.state == "HALF_OPEN":
                self.state = "CLOSED"
                self.failure_count = 0
                print("‚úÖ Circuit breaker: Back to normal")
            
            return result
            
        except Exception as e:
            self.failure_count += 1
            self.last_failure_time = time.time()
            
            if self.failure_count >= self.failure_threshold:
                self.state = "OPEN"
                print(f"üî¥ Circuit breaker OPEN after {self.failure_count} failures")
                print(f"üïê Will reset in {self.reset_timeout} seconds")
            
            raise e

# Usage
breaker = CircuitBreaker(failure_threshold=3, reset_timeout=30)

try:
    result = breaker.call(fetch_account_data)
    print(f"Success: {result}")
except Exception as e:
    print(f"Failed: {e}")
        </pre>
    </div>

    <b>Pattern 3: Fallback Pattern</b>
    <div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
def with_fallback(primary_operation, fallback_operation, fallback_message=None):
    """
    Try primary operation, fall back to secondary if it fails
    
    Args:
        primary_operation: Main function to try first
        fallback_operation: Backup function if primary fails
        fallback_message: Message to show when using fallback
    """
    try:
        return primary_operation()
    
    except Exception as e:
        if fallback_message:
            print(f"‚ö†Ô∏è  {fallback_message}")
            print(f"   Reason: {e}")
        
        print("üîÑ Using fallback operation...")
        return fallback_operation()

# Example: Try database, fall back to file
def load_account_from_database(account_id):
    # Simulate database failure
    raise ConnectionError("Database connection failed")

def load_account_from_file(account_id):
    # Fallback to file storage
    print("üìÅ Loading from backup file...")
    return {"balance": 1000.00, "source": "file_backup"}

# Usage
account_data = with_fallback(
    lambda: load_account_from_database("acc123"),
    lambda: load_account_from_file("acc123"),
    fallback_message="Database unavailable"
)
        </pre>
    </div>

    <h3>Error Logging Best Practices</h3>
    
    <b>Structured Error Logging System</b>
    <div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
import logging
import json
from datetime import datetime
from pathlib import Path

class ErrorLogger:
    """Professional error logging system"""
    
    def __init__(self, log_dir="logs", app_name="banking_system"):
        self.log_dir = Path(log_dir)
        self.log_dir.mkdir(exist_ok=True)
        
        # Configure logging
        logging.basicConfig(
            level=logging.INFO,
            format='%(asctime)s - %(name)s - %(levelname)s - %(message)s',
            handlers=[
                logging.FileHandler(self.log_dir / f"{app_name}.log"),
                logging.StreamHandler()  # Also print to console
            ]
        )
        
        self.logger = logging.getLogger(app_name)
        
        # Create separate error log file
        self.error_log_file = self.log_dir / "errors.json"
    
    def log_error(self, error, context=None, user=None, severity="ERROR"):
        """Log error with structured data"""
        
        error_entry = {
            "timestamp": datetime.now().isoformat(),
            "error_type": type(error).__name__,
            "error_message": str(error),
            "severity": severity,
            "context": context,
            "user": user,
            "traceback": self._get_traceback(error)
        }
        
        # Log to JSON file (structured)
        self._log_to_json(error_entry)
        
        # Log using Python's logging system
        log_message = f"{context}: {error}" if context else str(error)
        
        if severity == "CRITICAL":
            self.logger.critical(log_message, exc_info=True)
        elif severity == "ERROR":
            self.logger.error(log_message, exc_info=True)
        elif severity == "WARNING":
            self.logger.warning(log_message)
        else:
            self.logger.info(log_message)
        
        return error_entry
    
    def _log_to_json(self, error_entry):
        """Append error to JSON log file"""
        try:
            errors = []
            
            # Load existing errors
            if self.error_log_file.exists():
                with open(self.error_log_file, 'r') as f:
                    try:
                        errors = json.load(f)
                    except json.JSONDecodeError:
                        errors = []
            
            # Add new error
            errors.append(error_entry)
            
            # Keep only last 1000 errors
            if len(errors) > 1000:
                errors = errors[-1000:]
            
            # Save
            with open(self.error_log_file, 'w') as f:
                json.dump(errors, f, indent=2, default=str)
                
        except Exception as e:
            print(f"Failed to log error: {e}")
    
    def _get_traceback(self, error):
        """Extract traceback information"""
        import traceback
        if hasattr(error, '__traceback__'):
            return traceback.format_tb(error.__traceback__)
        return None
    
    def get_error_report(self, hours=24):
        """Generate error report for given time period"""
        if not self.error_log_file.exists():
            return {"total": 0, "errors": []}
        
        try:
            with open(self.error_log_file, 'r') as f:
                errors = json.load(f)
            
            cutoff = datetime.now().timestamp() - (hours * 3600)
            
            recent_errors = [
                e for e in errors 
                if datetime.fromisoformat(e["timestamp"]).timestamp() > cutoff
            ]
            
            return {
                "total_errors": len(recent_errors),
                "by_severity": self._count_by_severity(recent_errors),
                "by_type": self._count_by_type(recent_errors),
                "errors": recent_errors[-10:]  # Last 10 errors
            }
            
        except Exception as e:
            return {"error": str(e), "total": 0}
    
    def _count_by_severity(self, errors):
        """Count errors by severity level"""
        counts = {}
        for e in errors:
            severity = e.get("severity", "UNKNOWN")
            counts[severity] = counts.get(severity, 0) + 1
        return counts
    
    def _count_by_type(self, errors):
        """Count errors by type"""
        counts = {}
        for e in errors:
            error_type = e.get("error_type", "UNKNOWN")
            counts[error_type] = counts.get(error_type, 0) + 1
        return counts

# Usage
logger = ErrorLogger()

try:
    # Some operation that might fail
    result = 10 / 0
except ZeroDivisionError as e:
    error_data = logger.log_error(
        error=e,
        context="Balance calculation",
        user="john_doe",
        severity="ERROR"
    )
    print(f"Logged error: {error_data}")
        </pre>
    </div>

    <h3>Error Handling in Banking System</h3>
    
    <b>Complete Transaction with Error Handling</b>
    <div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
from banking_exceptions import (
    InsufficientFundsError, 
    InvalidTransactionError,
    SecurityViolationError
)

class TransactionProcessor:
    """Process transactions with comprehensive error handling"""
    
    def __init__(self, error_logger):
        self.error_logger = error_logger
        self.transaction_count = 0
    
    def process_transaction(self, transaction_type, amount, account):
        """Process a transaction with full error handling"""
        
        self.transaction_count += 1
        transaction_id = f"TXN{self.transaction_count:06d}"
        
        print(f" üîÑ Processing {transaction_type.upper()}: \\\${amount:.2f}")
        print(f"üìù Transaction ID: {transaction_id}")
        
        try:
            # Validate transaction
            self._validate_transaction(transaction_type, amount, account)
            
            # Execute transaction
            if transaction_type == "deposit":
                result = self._process_deposit(amount, account)
            elif transaction_type == "withdrawal":
                result = self._process_withdrawal(amount, account)
            elif transaction_type == "transfer":
                result = self._process_transfer(amount, account)
            else:
                raise InvalidTransactionError(
                    f"Unknown transaction type: {transaction_type}",
                    transaction_type
                )
            
            # Log successful transaction
            self.error_logger.logger.info(
                f"Transaction {transaction_id} completed: "
                f"{transaction_type} \\\${amount:.2f}"
            )
            
            print(f"‚úÖ Transaction {transaction_id} completed successfully")
            return result
            
        except (InsufficientFundsError, InvalidTransactionError) as e:
            # Business logic errors - show to user
            print(f"‚ùå Transaction failed: {e}")
            
            # Log as warning (expected error)
            self.error_logger.log_error(
                e, 
                context=f"Transaction {transaction_id}",
                severity="WARNING"
            )
            
            return False
            
        except SecurityViolationError as e:
            # Security issues - serious
            print(f"üö® SECURITY ALERT: {e}")
            
            # Log as critical
            self.error_logger.log_error(
                e,
                context=f"Transaction {transaction_id}",
                severity="CRITICAL"
            )
            
            # Additional security actions
            self._lock_account_if_needed(account, e.severity)
            
            return False
            
        except Exception as e:
            # Unexpected errors
            print(f"üí• SYSTEM ERROR: An unexpected error occurred")
            print(f"   Error ID: {transaction_id}")
            print("   Our technical team has been notified.")
            
            # Log with full details
            self.error_logger.log_error(
                e,
                context=f"Transaction {transaction_id}",
                user=account.get("user_id"),
                severity="ERROR"
            )
            
            # Try to save transaction state for recovery
            self._save_failed_transaction(transaction_id, transaction_type, amount)
            
            return False
            
        finally:
            # Always execute - cleanup, notifications, etc.
            self._update_transaction_counter()
            print(f"üìä Total transactions today: {self.transaction_count}")
            print("-" * 50)
    
    def _validate_transaction(self, transaction_type, amount, account):
        """Validate transaction before processing"""
        
        if amount <= 0:
            raise InvalidTransactionError(
                "Amount must be positive", 
                transaction_type
            )
        
        if transaction_type == "withdrawal" and amount > account["balance"]:
            raise InsufficientFundsError(account["balance"], amount)
        
        # Check daily limits
        daily_total = self._get_daily_total(account["id"])
        if daily_total + amount > 10000:  # $10,000 daily limit
            raise InvalidTransactionError(
                f"Daily limit exceeded. Used: \\\${daily_total:.2f}, Limit: $10,000",
                transaction_type
            )
    
    def _process_withdrawal(self, amount, account):
        """Process withdrawal with error recovery"""
        
        # Simulate processing
        import time
        time.sleep(0.5)  # Simulate processing time
        
        # Check if account became locked during processing
        if self._is_account_locked(account["id"]):
            raise SecurityViolationError("Account locked during processing", "high")
        
        # Update balance
        account["balance"] -= amount
        
        # Simulate occasional failure
        import random
        if random.random() < 0.1:  # 10% chance of "system failure"
            raise Exception("Simulated system failure during withdrawal")
        
        return True
    
    def _save_failed_transaction(self, transaction_id, transaction_type, amount):
        """Save failed transaction for recovery"""
        try:
            with open("failed_transactions.log", "a") as f:
                f.write(f"{datetime.now()} | {transaction_id} | "
                       f"{transaction_type} | \\\${amount} ")
        except:
            pass  # Don't let recovery logging cause another error!

# Usage
logger = ErrorLogger()
processor = TransactionProcessor(logger)

account = {"id": "ACC123", "balance": 1000.00, "user_id": "john_doe"}

# Test various scenarios
print("=== Transaction Processing Tests ===")

# 1. Successful transaction
processor.process_transaction("deposit", 500, account)

# 2. Insufficient funds
processor.process_transaction("withdrawal", 2000, account)

# 3. Invalid amount
processor.process_transaction("withdrawal", -100, account)

# 4. Unexpected error (simulated)
processor.process_transaction("withdrawal", 100, account)
        </pre>
    </div>

    <h3>Hands-On Exercise: Error Recovery System</h3>
    
    <b>Task:</b> Create an error recovery system that can resume interrupted operations
    <div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
class ErrorRecoverySystem:
    """
    System to recover from errors and resume operations
    """
    
    def __init__(self):
        self.recovery_file = "recovery_state.json"
        self.checkpoint_file = "checkpoints/"
        Path(self.checkpoint_file).mkdir(exist_ok=True)
    
    def create_checkpoint(self, operation_id, state_data):
        """
        Save current state so we can recover if error occurs
        
        Args:
            operation_id: Unique ID for this operation
            state_data: Dictionary containing current state
        """
        checkpoint_file = Path(self.checkpoint_file) / f"{operation_id}.json"
        
        try:
            with open(checkpoint_file, 'w') as f:
                json.dump({
                    "timestamp": datetime.now().isoformat(),
                    "operation_id": operation_id,
                    "state": state_data
                }, f, indent=2)
            
            print(f"‚úÖ Checkpoint created: {operation_id}")
            return True
            
        except Exception as e:
            print(f"‚ùå Failed to create checkpoint: {e}")
            return False
    
    def recover_operation(self, operation_id):
        """
        Attempt to recover a failed operation
        
        Args:
            operation_id: ID of operation to recover
        
        Returns:
            Tuple of (success, recovered_state, recovery_steps)
        """
        checkpoint_file = Path(self.checkpoint_file) / f"{operation_id}.json"
        
        if not checkpoint_file.exists():
            return False, None, ["No checkpoint found"]
        
        try:
            with open(checkpoint_file, 'r') as f:
                checkpoint = json.load(f)
            
            recovered_state = checkpoint["state"]
            recovery_steps = []
            
            print(f"üîç Attempting recovery for {operation_id}")
            
            # Try to resume from checkpoint
            # This would contain specific recovery logic
            # For example:
            # 1. Verify data integrity
            # 2. Rollback partial changes
            # 3. Resume from last good state
            
            recovery_steps.append("Loaded checkpoint data")
            recovery_steps.append("Verified data integrity")
            recovery_steps.append("Ready to resume operation")
            
            # Clean up checkpoint after successful recovery
            checkpoint_file.unlink()
            
            return True, recovered_state, recovery_steps
            
        except Exception as e:
            return False, None, [f"Recovery failed: {e}"]
    
    def safe_execute(self, operation, operation_id, max_retries=2):
        """
        Execute operation with automatic recovery
        
        Args:
            operation: Function to execute
            operation_id: Unique ID for this execution
            max_retries: Number of recovery attempts
        """
        for attempt in range(max_retries + 1):  # +1 for initial attempt
            try:
                print(f" üöÄ Attempt {attempt + 1} of {max_retries + 1}")
                
                if attempt > 0:
                    # This is a retry - try to recover first
                    success, state, steps = self.recover_operation(operation_id)
                    
                    if success:
                        print("‚úÖ Recovery successful!")
                        for step in steps:
                            print(f"   ‚Ä¢ {step}")
                        
                        # Resume operation with recovered state
                        return operation(resume_state=state)
                    else:
                        print("‚ùå Recovery failed, starting fresh")
                
                # First attempt or recovery failed - start fresh
                return operation()
                
            except Exception as e:
                print(f"‚ùå Attempt {attempt + 1} failed: {e}")
                
                if attempt < max_retries:
                    # Save state before retrying
                    print("üíæ Saving state for recovery...")
                    # You would save actual operation state here
                    self.create_checkpoint(operation_id, {
                        "error": str(e),
                        "attempt": attempt,
                        "timestamp": datetime.now().isoformat()
                    })
                    
                    print(f"üîÑ Will retry in 2 seconds...")
                    time.sleep(2)
                else:
                    print("üí• All recovery attempts failed")
                    raise
    
    def cleanup_old_checkpoints(self, days_old=7):
        """Remove old checkpoint files"""
        cutoff = datetime.now().timestamp() - (days_old * 86400)
        
        for checkpoint_file in Path(self.checkpoint_file).glob("*.json"):
            if checkpoint_file.stat().st_mtime < cutoff:
                checkpoint_file.unlink()
                print(f"üßπ Cleaned up old checkpoint: {checkpoint_file.name}")

# TODO: Implement a batch transaction processor that uses this recovery system
# It should:
# 1. Process multiple transactions
# 2. Create checkpoints after each transaction
# 3. Recover from failure and resume processing
# 4. Report which transactions were completed successfully
        </pre>
    </div>

    <h3>Today's Assignment</h3>
    <div class="assignment-box">
        <h4>Part 1: Implement Error Handling</h4>
        
        <div style="background-color: #e6ffe6; padding: 15px; margin: 10px 0; border-radius: 5px;">
            <b>Required Implementation:</b><br/>
            1. ‚úÖ Create custom exception classes for banking<br/>
            2. ‚úÖ Implement ErrorLogger class with JSON logging<br/>
            3. ‚úÖ Create TransactionProcessor with full error handling<br/>
            4. ‚úÖ Implement retry pattern for network operations<br/>
            5. ‚úÖ Add circuit breaker for external service calls<br/>
            6. ‚úÖ Create ErrorRecoverySystem with checkpointing<br/>
            7. ‚úÖ Add safe_execute wrapper for automatic recovery<br/><br/>
            
            <b>Test Scenarios:</b><br/>
            1. Process transaction with insufficient funds<br/>
            2. Simulate network failure and retry<br/>
            3. Trigger security violation<br/>
            4. Cause unexpected system error<br/>
            5. Test recovery from checkpoint
        </div>
        
        <h4>Part 2: Error Monitoring Dashboard</h4>
        <div style="background-color: #fff0e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
            <b>Create an Error Dashboard that shows:</b><br/>
            1. Error statistics (last 24 hours, 7 days)<br/>
            2. Error types and frequencies<br/>
            3. Most common error contexts<br/>
            4. Error trends over time<br/>
            5. Recent error details<br/>
            6. System health status<br/><br/>
            
            <b>Sample Dashboard Output:</b>
            <pre>
========================================
ERROR MONITORING DASHBOARD
========================================
üìä Last 24 Hours:
   Total Errors: 12
   ‚ö†Ô∏è  Warnings: 8
   ‚ùå Errors: 3  
   üî¥ Critical: 1

üìà Error Types:
   ValueError: 5 occurrences
   ConnectionError: 4 occurrences
   FileNotFoundError: 2 occurrences
   Other: 1 occurrence

üîç Recent Critical Error:
   Time: 2024-01-15 14:30:25
   Type: SecurityViolationError
   Context: Transaction TXN0042
   User: john_doe
   Message: Multiple failed login attempts

üí° Recommendations:
   ‚Ä¢ Review security logs for user john_doe
   ‚Ä¢ Check database connection stability
   ‚Ä¢ Verify file permissions on transaction logs
========================================
            </pre>
        </div>
        
        <h4>Part 3: Error Prevention</h4>
        <div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
            <b>Implement These Preventive Measures:</b><br/>
            1. <b>Input Validation:</b> Validate ALL user inputs<br/>
            2. <b>Boundary Checking:</b> Check array bounds, file sizes<br/>
            3. <b>Resource Management:</b> Use context managers for files<br/>
            4. <b>Timeouts:</b> Add timeouts to network operations<br/>
            5. <b>Memory Management:</b> Check memory usage<br/>
            6. <b>Data Integrity:</b> Verify data before processing<br/>
            7. <b>Dependency Checking:</b> Verify required files/services<br/><br/>
            
            <b>Sample Preventive Code:</b>
            <pre>
def safe_file_operation(filename, operation):
    """Execute file operation with safety checks"""
    
    # 1. Check file exists
    if not os.path.exists(filename):
        raise FileNotFoundError(f"File not found: {filename}")
    
    # 2. Check file size (prevent memory issues)
    file_size = os.path.getsize(filename)
    if file_size > 100 * 1024 * 1024:  # 100MB limit
        raise MemoryError(f"File too large: {file_size/1024/1024:.1f}MB")
    
    # 3. Check permissions
    if not os.access(filename, os.R_OK):
        raise PermissionError(f"No read permission: {filename}")
    
    # 4. Use context manager for automatic cleanup
    with open(filename, 'r') as f:
        return operation(f)
            </pre>
        </div>
    </div>

    <h3>Tomorrow's Preview</h3>
    <div style="background-color: #e6f3ff; padding: 15px; margin: 10px 0; border-radius: 5px; border-left: 5px solid #4a6fa5;">
        <b>Day 2: Logging & Monitoring Systems</b><br/>
        - Advanced logging configurations<br/>
        - Log levels and filtering<br/>
        - Log rotation and management<br/>
        - Real-time monitoring<br/>
        - Alert systems for critical errors<br/>
        - Performance monitoring
    </div>
    
    <div style="background-color: #e6ffe6; padding: 15px; margin: 20px 0; border-radius: 5px; border: 2px solid #4CAF50;">
        <h4>üéØ Key Takeaways</h4>
        <p><b>Remember:</b> Good error handling doesn't prevent errors - it manages them gracefully!</p>
        <ul>
            <li>‚úÖ Always use specific exception types</li>
            <li>‚úÖ Log errors with context for debugging</li>
            <li>‚úÖ Provide helpful messages to users</li>
            <li>‚úÖ Implement recovery mechanisms</li>
            <li>‚úÖ Use patterns (retry, circuit breaker, fallback)</li>
            <li>‚úÖ Create custom exceptions for your domain</li>
            <li>‚úÖ Monitor and analyze error patterns</li>
        </ul>
        <p><b>Professional Tip:</b> The best error is the one that never reaches the user because you prevented it!</p>
    </div>`
            },
            "8-2": {
                icon: "fa-clipboard-list",
                title: "Logging Systems & Monitoring",
                html: `<h1>Week 8, Day 2: Professional Logging Systems & Monitoring</h1>
    <p>Today we'll build a comprehensive logging system that tracks everything happening in our banking application.</p>
    
    <div class="analogy-box">
        <b>Analogy: Flight Data Recorder ‚úàÔ∏è</b><br/>
        <ul style="margin-top: 10px;">
            <li><b>Basic print statements</b> = Pilot's casual notes</li>
            <li><b>System logs</b> = Flight data recorder (black box)</li>
            <li><b>Log levels</b> = Different importance levels (takeoff vs. meal service)</li>
            <li><b>Log rotation</b> = Archiving old flight records</li>
            <li><b>Monitoring</b> = Air traffic control watching everything</li>
        </ul>
    </div>

    <h3>Why Professional Logging Matters</h3>
    <table border="1" cellpadding="10" cellspacing="0" style="width: 100%; margin: 15px 0; border-collapse: collapse;">
        <thead>
            <tr style="background-color: #2c3e50; color: white;">
                <th>Situation</th>
                <th>Without Logging</th>
                <th>With Logging</th>
                <th>Impact</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><b>Production Bug</b></td>
                <td>"It's broken" - no details</td>
                <td>Complete trace with user actions leading to bug</td>
                <td>Debug time: Days ‚Üí Minutes</td>
            </tr>
            <tr>
                <td><b>Security Incident</b></td>
                <td>No record of what happened</td>
                <td>Complete audit trail of suspicious activity</td>
                <td>Can't investigate ‚Üí Full investigation</td>
            </tr>
            <tr>
                <td><b>Performance Issue</b></td>
                <td>"App is slow" - no details</td>
                <td>Timestamps showing exactly which operations are slow</td>
                <td>Guesswork ‚Üí Precise optimization</td>
            </tr>
            <tr>
                <td><b>User Complaint</b></td>
                <td>"Feature doesn't work"</td>
                <td>Exact sequence of user actions before failure</td>
                <td>Can't reproduce ‚Üí Immediate fix</td>
            </tr>
            <tr>
                <td><b>Compliance Audit</b></td>
                <td>No evidence of proper handling</td>
                <td>Complete logs showing regulatory compliance</td>
                <td>Failed audit ‚Üí Passed audit</td>
            </tr>
        </tbody>
    </table>

    <h3>Python Logging Module Overview</h3>
    
    <b>Logging Hierarchy & Levels</b>
    <div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre style="font-family: 'Courier New', monospace;">
CRITICAL (50)  üî¥ System is unusable
ERROR    (40)  ‚ùå Application error
WARNING  (30)  ‚ö†Ô∏è  Unexpected but not error
INFO     (20)  ‚ÑπÔ∏è  Normal operation messages
DEBUG    (10)  üîß Detailed debugging information
NOTSET   (0)   Default level

Logger Hierarchy:
root (logging.getLogger())
‚îú‚îÄ‚îÄ banking (logging.getLogger('banking'))
‚îÇ   ‚îú‚îÄ‚îÄ banking.auth (inherits from banking)
‚îÇ   ‚îú‚îÄ‚îÄ banking.transactions
‚îÇ   ‚îî‚îÄ‚îÄ banking.security
‚îî‚îÄ‚îÄ thirdparty (external library logs)
        </pre>
    </div>

    <h3>Step 1: Basic Logging Setup</h3>
    
    <b>Basic Configuration</b>
    <div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
import logging
import logging.handlers
from pathlib import Path

def setup_basic_logging():
    """Basic logging setup - good for development"""
    
    logging.basicConfig(
        level=logging.DEBUG,  # Show all messages
        format='%(asctime)s - %(name)s - %(levelname)s - %(message)s',
        datefmt='%Y-%m-%d %H:%M:%S',
        handlers=[
            logging.StreamHandler(),  # Print to console
            logging.FileHandler('banking.log')  # Save to file
        ]
    )
    
    # Get logger for our application
    logger = logging.getLogger('banking')
    logger.info("Basic logging setup complete")
    return logger

# Usage
logger = setup_basic_logging()
logger.debug("Detailed debug info")
logger.info("User logged in")
logger.warning("Unusual activity detected")
logger.error("Transaction failed")
logger.critical("System security compromised")
        </pre>
    </div>

    <h3>Step 2: Advanced Logging Configuration</h3>
    
    <b>Production-Ready Logging System</b>
    <div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
import json
import time
from datetime import datetime
from logging.handlers import RotatingFileHandler, TimedRotatingFileHandler

class BankingLogger:
    """Professional logging system for banking application"""
    
    def __init__(self, app_name="banking_system", log_dir="logs"):
        self.app_name = app_name
        self.log_dir = Path(log_dir)
        self.log_dir.mkdir(exist_ok=True)
        
        # Create different loggers for different components
        self.loggers = {}
        self.setup_loggers()
    
    def setup_loggers(self):
        """Configure different loggers for different purposes"""
        
        # Main application logger
        self._setup_app_logger()
        
        # Security logger (separate file for audits)
        self._setup_security_logger()
        
        # Performance logger (for monitoring)
        self._setup_performance_logger()
        
        # Audit logger (for compliance)
        self._setup_audit_logger()
    
    def _setup_app_logger(self):
        """Setup main application logger"""
        app_logger = logging.getLogger(f"{self.app_name}.app")
        app_logger.setLevel(logging.INFO)
        
        # Console handler (colored output)
        console = logging.StreamHandler()
        console.setLevel(logging.INFO)
        console_format = logging.Formatter(
            '%(asctime)s | %(levelname)-8s | %(name)-20s | %(message)s',
            datefmt='%H:%M:%S'
        )
        console.setFormatter(console_format)
        
        # File handler with rotation (max 10MB, keep 5 backups)
        file_handler = RotatingFileHandler(
            self.log_dir / "app.log",
            maxBytes=10*1024*1024,  # 10MB
            backupCount=5,
            encoding='utf-8'
        )
        file_handler.setLevel(logging.DEBUG)
        file_format = logging.Formatter(
            '%(asctime)s | %(levelname)-8s | %(name)-20s | %(filename)s:%(lineno)d | %(message)s',
            datefmt='%Y-%m-%d %H:%M:%S'
        )
        file_handler.setFormatter(file_format)
        
        # Add handlers
        app_logger.addHandler(console)
        app_logger.addHandler(file_handler)
        
        self.loggers['app'] = app_logger
    
    def _setup_security_logger(self):
        """Setup security-specific logger"""
        security_logger = logging.getLogger(f"{self.app_name}.security")
        security_logger.setLevel(logging.WARNING)
        
        # Security logs go to separate file with daily rotation
        security_handler = TimedRotatingFileHandler(
            self.log_dir / "security.log",
            when='midnight',  # Rotate daily at midnight
            interval=1,
            backupCount=30,  # Keep 30 days of logs
            encoding='utf-8'
        )
        security_handler.setLevel(logging.WARNING)
        
        # JSON format for easy parsing by security tools
        class JSONFormatter(logging.Formatter):
            def format(self, record):
                log_record = {
                    'timestamp': datetime.fromtimestamp(record.created).isoformat(),
                    'level': record.levelname,
                    'logger': record.name,
                    'message': record.getMessage(),
                    'module': record.module,
                    'function': record.funcName,
                    'line': record.lineno
                }
                if record.exc_info:
                    log_record['exception'] = self.formatException(record.exc_info)
                return json.dumps(log_record)
        
        security_handler.setFormatter(JSONFormatter())
        security_logger.addHandler(security_handler)
        
        # Also log to central security system (simulated)
        security_logger.addHandler(logging.NullHandler())  # In real app, send to SIEM
        
        self.loggers['security'] = security_logger
    
    def _setup_performance_logger(self):
        """Setup performance monitoring logger"""
        perf_logger = logging.getLogger(f"{self.app_name}.performance")
        perf_logger.setLevel(logging.INFO)
        
        # Performance logs with special format including execution time
        perf_handler = logging.FileHandler(self.log_dir / "performance.log")
        
        class PerformanceFormatter(logging.Formatter):
            def format(self, record):
                if hasattr(record, 'execution_time'):
                    record.msg = f"{record.msg} | Time: {record.execution_time:.3f}s"
                return super().format(record)
        
        perf_format = PerformanceFormatter(
            '%(asctime)s | %(name)-15s | %(message)s',
            datefmt='%H:%M:%S'
        )
        perf_handler.setFormatter(perf_format)
        perf_logger.addHandler(perf_handler)
        
        self.loggers['performance'] = perf_logger
    
    def _setup_audit_logger(self):
        """Setup audit logger for compliance"""
        audit_logger = logging.getLogger(f"{self.app_name}.audit")
        audit_logger.setLevel(logging.INFO)
        
        # Audit logs cannot be modified - use special handler
        audit_handler = logging.FileHandler(self.log_dir / "audit.log")
        
        # Detailed format for compliance
        audit_format = logging.Formatter(
            '%(asctime)s | USER:%(user)s | ACTION:%(action)s | '
            'RESOURCE:%(resource)s | STATUS:%(status)s | DETAILS:%(message)s',
            datefmt='%Y-%m-%d %H:%M:%S'
        )
        audit_handler.setFormatter(audit_format)
        audit_logger.addHandler(audit_handler)
        
        self.loggers['audit'] = audit_logger
    
    def log_transaction(self, user_id, action, amount, status="completed", details=""):
        """Log a financial transaction for audit purposes"""
        logger = self.loggers['audit']
        
        # Create log record with extra fields
        extra = {
            'user': user_id,
            'action': action,
            'resource': 'bank_account',
            'status': status
        }
        
        message = f"Amount: \\\${amount:.2f}"
        if details:
            message += f" | {details}"
        
        logger.info(message, extra=extra)
        
        # Also log to app logger
        self.loggers['app'].info(f"Transaction: {user_id} {action} \\\${amount:.2f} - {status}")
    
    def log_security_event(self, event_type, user_id=None, severity="medium", details=""):
        """Log security-related events"""
        logger = self.loggers['security']
        
        if severity == "critical":
            logger.critical(f"SECURITY: {event_type} | User: {user_id} | {details}")
        elif severity == "high":
            logger.error(f"SECURITY: {event_type} | User: {user_id} | {details}")
        else:
            logger.warning(f"SECURITY: {event_type} | User: {user_id} | {details}")
    
    def log_performance(self, operation, execution_time):
        """Log performance metrics"""
        logger = self.loggers['performance']
        
        # Add execution time to log record
        extra = {'execution_time': execution_time}
        logger.info(f"Operation: {operation}", extra=extra)
        
        # Alert if too slow
        if execution_time > 5.0:  # 5 seconds threshold
            self.loggers['app'].warning(
                f"Slow operation: {operation} took {execution_time:.2f}s"
            )
    
    def get_logger(self, component):
        """Get specific logger instance"""
        if component not in self.loggers:
            # Create on-demand
            logger = logging.getLogger(f"{self.app_name}.{component}")
            self.loggers[component] = logger
        return self.loggers[component]

# Usage
logger = BankingLogger()

# Log different types of events
logger.log_transaction("john_doe", "deposit", 500.00, "completed", "ATM deposit")
logger.log_security_event("failed_login", "john_doe", "medium", "3 failed attempts")
logger.log_performance("balance_calculation", 0.123)

# Get component-specific loggers
auth_logger = logger.get_logger("auth")
auth_logger.info("User authentication successful")
        </pre>
    </div>

    <h3>Step 3: Structured Logging with Context</h3>
    
    <b>Using Logging Adapters for Context</b>
    <div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
import logging
from typing import Dict, Any

class ContextAdapter(logging.LoggerAdapter):
    """Add context information to all log messages"""
    
    def __init__(self, logger, context: Dict[str, Any]):
        super().__init__(logger, context)
    
    def process(self, msg, kwargs):
        """Add context to log message"""
        # Add context to extra parameters
        if 'extra' not in kwargs:
            kwargs['extra'] = {}
        kwargs['extra'].update(self.extra)
        
        # Format message with context
        context_str = " | ".join(f"{k}:{v}" for k, v in self.extra.items())
        return f"{context_str} | {msg}", kwargs

class TransactionContext:
    """Manage context for transaction logging"""
    
    def __init__(self, banking_logger: BankingLogger):
        self.banking_logger = banking_logger
        self.context_stack = []
    
    def push_context(self, **context):
        """Push new context onto stack"""
        self.context_stack.append(context)
        return self
    
    def pop_context(self):
        """Pop context from stack"""
        if self.context_stack:
            self.context_stack.pop()
        return self
    
    def get_current_context(self):
        """Get merged current context"""
        merged = {}
        for ctx in self.context_stack:
            merged.update(ctx)
        return merged
    
    def get_logger(self, component: str):
        """Get logger with current context"""
        base_logger = self.banking_logger.get_logger(component)
        context = self.get_current_context()
        return ContextAdapter(base_logger, context)
    
    def log_transaction_flow(self, user_id, transaction_id, steps):
        """Log complete transaction flow with context"""
        
        # Push transaction context
        self.push_context(
            user_id=user_id,
            transaction_id=transaction_id,
            session_id=self._generate_session_id()
        )
        
        try:
            logger = self.get_logger("transactions")
            
            logger.info(f"Transaction started: {transaction_id}")
            
            for step_name, step_func in steps.items():
                # Push step context
                self.push_context(step=step_name)
                step_logger = self.get_logger("transactions")
                
                try:
                    step_logger.info(f"Step started")
                    result = step_func()
                    step_logger.info(f"Step completed: {result}")
                
                except Exception as e:
                    step_logger.error(f"Step failed: {e}")
                    raise
                
                finally:
                    self.pop_context()  # Remove step context
            
            logger.info(f"Transaction completed: {transaction_id}")
            
        finally:
            self.pop_context()  # Remove transaction context
    
    def _generate_session_id(self):
        """Generate unique session ID"""
        import uuid
        return str(uuid.uuid4())[:8]

# Usage
banking_logger = BankingLogger()
context_manager = TransactionContext(banking_logger)

# Simple logging with context
context_manager.push_context(user_id="john_doe", account="ACC123")
logger = context_manager.get_logger("app")
logger.info("Processing withdrawal")  # Logs: user_id:john_doe | account:ACC123 | Processing withdrawal

# Complex transaction flow
def validate_funds(amount):
    return "Funds validated"

def process_withdrawal(amount):
    return "Withdrawal processed"

def update_balance(amount):
    return "Balance updated"

context_manager.log_transaction_flow(
    user_id="john_doe",
    transaction_id="TXN001",
    steps={
        "validate": lambda: validate_funds(100),
        "process": lambda: process_withdrawal(100),
        "update": lambda: update_balance(100)
    }
)
        </pre>
    </div>

    <h3>Step 4: Log Monitoring & Analysis</h3>
    
    <b>Real-time Log Monitor</b>
    <div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
import threading
import time
from pathlib import Path
from collections import defaultdict, deque

class LogMonitor:
    """Monitor logs in real-time and generate alerts"""
    
    def __init__(self, log_dir="logs", alert_thresholds=None):
        self.log_dir = Path(log_dir)
        self.running = False
        self.monitor_thread = None
        
        # Alert thresholds
        self.alert_thresholds = alert_thresholds or {
            'error_rate': 10,  # Errors per minute
            'response_time': 5.0,  # Seconds
            'failed_logins': 5,  # Per 5 minutes
            'security_events': 3  # Critical events per hour
        }
        
        # Statistics
        self.stats = {
            'errors': deque(maxlen=100),
            'warnings': deque(maxlen=100),
            'response_times': deque(maxlen=100),
            'failed_logins': deque(maxlen=100),
            'security_events': defaultdict(deque)
        }
        
        # Alerts
        self.alerts = []
        self.alert_handlers = []
    
    def start(self):
        """Start monitoring logs in background thread"""
        if self.running:
            return
        
        self.running = True
        self.monitor_thread = threading.Thread(target=self._monitor_loop, daemon=True)
        self.monitor_thread.start()
        print("‚úÖ Log monitor started")
    
    def stop(self):
        """Stop monitoring"""
        self.running = False
        if self.monitor_thread:
            self.monitor_thread.join(timeout=5)
        print("üõë Log monitor stopped")
    
    def _monitor_loop(self):
        """Main monitoring loop"""
        last_check = {}
        
        while self.running:
            try:
                # Check each log file
                for log_file in self.log_dir.glob("*.log"):
                    self._process_log_file(log_file, last_check.get(log_file, 0))
                    last_check[log_file] = time.time()
                
                # Analyze statistics and check for alerts
                self._analyze_stats()
                
                # Generate report every 60 seconds
                if int(time.time()) % 60 == 0:
                    self._generate_report()
                
                # Sleep to avoid CPU overload
                time.sleep(5)
                
            except Exception as e:
                print(f"Monitor error: {e}")
                time.sleep(30)
    
    def _process_log_file(self, log_file, last_pos):
        """Process new lines in log file"""
        try:
            with open(log_file, 'r', encoding='utf-8') as f:
                # Seek to last position
                f.seek(last_pos)
                
                # Read new lines
                new_lines = f.readlines()
                
                for line in new_lines:
                    self._analyze_log_line(line.strip(), log_file.name)
                
                # Update position
                last_pos = f.tell()
                
        except Exception as e:
            print(f"Error processing {log_file}: {e}")
        
        return last_pos
    
    def _analyze_log_line(self, line, log_file):
        """Analyze a single log line and update statistics"""
        timestamp = time.time()
        
        # App.log analysis
        if log_file == "app.log":
            if "ERROR" in line:
                self.stats['errors'].append(timestamp)
            
            elif "WARNING" in line:
                self.stats['warnings'].append(timestamp)
            
            # Extract response time from performance logs
            if "Time:" in line:
                try:
                    time_str = line.split("Time:")[1].split("s")[0].strip()
                    response_time = float(time_str)
                    self.stats['response_times'].append(response_time)
                except:
                    pass
        
        # Security.log analysis
        elif log_file == "security.log":
            if "failed_login" in line.lower():
                self.stats['failed_logins'].append(timestamp)
            
            if "CRITICAL" in line:
                event_type = line.split("|")[1].strip() if "|" in line else "unknown"
                self.stats['security_events'][event_type].append(timestamp)
    
    def _analyze_stats(self):
        """Analyze statistics and trigger alerts if needed"""
        current_time = time.time()
        
        # Check error rate (last minute)
        minute_ago = current_time - 60
        recent_errors = [t for t in self.stats['errors'] if t > minute_ago]
        
        if len(recent_errors) > self.alert_thresholds['error_rate']:
            self._trigger_alert(
                "HIGH_ERROR_RATE",
                f"{len(recent_errors)} errors in last minute",
                "error"
            )
        
        # Check response times
        if self.stats['response_times']:
            avg_response = sum(self.stats['response_times']) / len(self.stats['response_times'])
            if avg_response > self.alert_thresholds['response_time']:
                self._trigger_alert(
                    "SLOW_RESPONSE",
                    f"Average response time: {avg_response:.2f}s",
                    "performance"
                )
        
        # Check failed logins (last 5 minutes)
        five_min_ago = current_time - 300
        recent_failures = [t for t in self.stats['failed_logins'] if t > five_min_ago]
        
        if len(recent_failures) > self.alert_thresholds['failed_logins']:
            self._trigger_alert(
                "BRUTE_FORCE_ATTEMPT",
                f"{len(recent_failures)} failed logins in 5 minutes",
                "security"
            )
    
    def _trigger_alert(self, alert_type, message, severity="warning"):
        """Trigger an alert"""
        alert = {
            'timestamp': time.time(),
            'type': alert_type,
            'message': message,
            'severity': severity
        }
        
        self.alerts.append(alert)
        
        # Keep only last 100 alerts
        if len(self.alerts) > 100:
            self.alerts = self.alerts[-100:]
        
        # Notify handlers
        for handler in self.alert_handlers:
            try:
                handler(alert)
            except:
                pass
        
        # Print to console for demo
        print(f"üö® ALERT: {alert_type} - {message}")
    
    def _generate_report(self):
        """Generate periodic report"""
        current_time = time.time()
        
        report = {
            'timestamp': current_time,
            'period': '60s',
            'errors_last_minute': len([t for t in self.stats['errors'] if t > current_time - 60]),
            'warnings_last_minute': len([t for t in self.stats['warnings'] if t > current_time - 60]),
            'avg_response_time': self._calculate_avg_response(),
            'failed_logins_last_5min': len([t for t in self.stats['failed_logins'] if t > current_time - 300]),
            'alerts_last_hour': len([a for a in self.alerts if a['timestamp'] > current_time - 3600])
        }
        
        # Save report
        report_file = self.log_dir / "reports" / f"report_{int(current_time)}.json"
        report_file.parent.mkdir(exist_ok=True)
        
        import json
        with open(report_file, 'w') as f:
            json.dump(report, f, indent=2)
        
        return report
    
    def _calculate_avg_response(self):
        """Calculate average response time"""
        if not self.stats['response_times']:
            return 0
        return sum(self.stats['response_times']) / len(self.stats['response_times'])
    
    def register_alert_handler(self, handler):
        """Register function to handle alerts"""
        self.alert_handlers.append(handler)
    
    def get_recent_alerts(self, count=10):
        """Get recent alerts"""
        return self.alerts[-count:]
    
    def get_statistics(self):
        """Get current statistics"""
        return {
            'total_errors': len(self.stats['errors']),
            'total_warnings': len(self.stats['warnings']),
            'avg_response_time': self._calculate_avg_response(),
            'active_alerts': len([a for a in self.alerts if time.time() - a['timestamp'] < 3600])
        }

# Example alert handler
def email_alert_handler(alert):
    """Send email alert (simulated)"""
    print(f"üìß Would send email alert: {alert['type']} - {alert['message']}")

def slack_alert_handler(alert):
    """Send Slack alert (simulated)"""
    print(f"üí¨ Would send Slack alert: {alert['type']}")

# Usage
monitor = LogMonitor()
monitor.register_alert_handler(email_alert_handler)
monitor.register_alert_handler(slack_alert_handler)
monitor.start()

# Later...
time.sleep(65)  # Wait for report
print("Recent alerts:", monitor.get_recent_alerts(5))
print("Statistics:", monitor.get_statistics())
        </pre>
    </div>

    <h3>Step 5: Log Analysis & Dashboard</h3>
    
    <b>Log Analysis Dashboard</b>
    <div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
import json
from collections import Counter
from datetime import datetime, timedelta

class LogAnalyzer:
    """Analyze logs and generate insights"""
    
    def __init__(self, log_dir="logs"):
        self.log_dir = Path(log_dir)
    
    def analyze_logs(self, hours=24):
        """Analyze logs for given time period"""
        cutoff = datetime.now() - timedelta(hours=hours)
        
        results = {
            'time_period': f"Last {hours} hours",
            'total_entries': 0,
            'by_level': Counter(),
            'by_component': Counter(),
            'error_patterns': [],
            'performance_issues': [],
            'security_events': [],
            'top_users': Counter(),
            'busiest_hours': Counter()
        }
        
        # Analyze each log file
        for log_file in self.log_dir.glob("*.log"):
            self._analyze_file(log_file, cutoff, results)
        
        # Generate insights
        results['insights'] = self._generate_insights(results)
        
        return results
    
    def _analyze_file(self, log_file, cutoff, results):
        """Analyze a single log file"""
        try:
            with open(log_file, 'r', encoding='utf-8') as f:
                for line in f:
                    try:
                        # Parse timestamp
                        if '|' in line:
                            parts = line.split('|')
                            timestamp_str = parts[0].strip()
                            
                            try:
                                log_time = datetime.strptime(timestamp_str, '%Y-%m-%d %H:%M:%S')
                            except:
                                try:
                                    log_time = datetime.strptime(timestamp_str, '%H:%M:%S')
                                    # Assume today if no date
                                    log_time = log_time.replace(
                                        year=datetime.now().year,
                                        month=datetime.now().month,
                                        day=datetime.now().day
                                    )
                                except:
                                    continue
                            
                            # Skip if before cutoff
                            if log_time < cutoff:
                                continue
                            
                            results['total_entries'] += 1
                            
                            # Extract log level
                            if len(parts) > 1:
                                level_part = parts[1].strip()
                                for level in ['CRITICAL', 'ERROR', 'WARNING', 'INFO', 'DEBUG']:
                                    if level in level_part:
                                        results['by_level'][level] += 1
                                        break
                            
                            # Extract component/logger name
                            if len(parts) > 2:
                                component = parts[2].strip()
                                if '.' in component:
                                    component = component.split('.')[-1]
                                results['by_component'][component] += 1
                            
                            # Extract hour for busy analysis
                            hour = log_time.hour
                            results['busiest_hours'][hour] += 1
                            
                            # Special analysis based on log type
                            if log_file.name == "app.log":
                                self._analyze_app_log(line, log_time, results)
                            
                            elif log_file.name == "security.log":
                                self._analyze_security_log(line, log_time, results)
                            
                            elif log_file.name == "audit.log":
                                self._analyze_audit_log(line, log_time, results)
                            
                            elif log_file.name == "performance.log":
                                self._analyze_performance_log(line, log_time, results)
                    
                    except Exception as e:
                        # Skip malformed lines
                        continue
        
        except Exception as e:
            print(f"Error analyzing {log_file}: {e}")
    
    def _analyze_app_log(self, line, log_time, results):
        """Analyze application log entries"""
        line_lower = line.lower()
        
        # Look for error patterns
        if "error" in line_lower or "exception" in line_lower:
            error_info = {
                'timestamp': log_time.isoformat(),
                'message': line[:200] + "..." if len(line) > 200 else line.strip(),
                'type': 'error'
            }
            
            # Categorize error
            if "connection" in line_lower:
                error_info['category'] = 'network'
            elif "file" in line_lower:
                error_info['category'] = 'filesystem'
            elif "memory" in line_lower:
                error_info['category'] = 'memory'
            else:
                error_info['category'] = 'application'
            
            results['error_patterns'].append(error_info)
        
        # Look for user mentions
        if "user:" in line_lower:
            try:
                user_part = line.split("user:")[1].split("|")[0].strip()
                results['top_users'][user_part] += 1
            except:
                pass
    
    def _analyze_security_log(self, line, log_time, results):
        """Analyze security log entries"""
        security_event = {
            'timestamp': log_time.isoformat(),
            'message': line[:200] + "..." if len(line) > 200 else line.strip()
        }
        
        line_lower = line.lower()
        
        if "failed" in line_lower and "login" in line_lower:
            security_event['type'] = 'failed_login'
        elif "violation" in line_lower:
            security_event['type'] = 'security_violation'
        elif "critical" in line_lower:
            security_event['type'] = 'critical_event'
        else:
            security_event['type'] = 'security_event'
        
        results['security_events'].append(security_event)
    
    def _analyze_audit_log(self, line, log_time, results):
        """Analyze audit log entries"""
        # Extract user from audit log
        if "USER:" in line:
            try:
                user_part = line.split("USER:")[1].split("|")[0].strip()
                results['top_users'][user_part] += 1
            except:
                pass
    
    def _analyze_performance_log(self, line, log_time, results):
        """Analyze performance log entries"""
        if "Time:" in line:
            try:
                time_str = line.split("Time:")[1].split("s")[0].strip()
                response_time = float(time_str)
                
                if response_time > 1.0:  # Slow operations
                    perf_issue = {
                        'timestamp': log_time.isoformat(),
                        'response_time': response_time,
                        'operation': line.split("|")[-1].strip() if "|" in line else "unknown"
                    }
                    results['performance_issues'].append(perf_issue)
            except:
                pass
    
    def _generate_insights(self, results):
        """Generate insights from analysis results"""
        insights = []
        
        # Error rate insight
        total_entries = results['total_entries']
        error_count = results['by_level'].get('ERROR', 0) + results['by_level'].get('CRITICAL', 0)
        
        if total_entries > 0:
            error_rate = (error_count / total_entries) * 100
            if error_rate > 5:
                insights.append({
                    'type': 'high_error_rate',
                    'severity': 'high',
                    'message': f"High error rate: {error_rate:.1f}% of log entries are errors",
                    'recommendation': 'Review recent error patterns and fix underlying issues'
                })
        
        # Busiest hour insight
        if results['busiest_hours']:
            busiest_hour, busiest_count = results['busiest_hours'].most_common(1)[0]
            avg_count = total_entries / 24 if total_entries > 0 else 0
            
            if busiest_count > avg_count * 2:  # More than twice the average
                insights.append({
                    'type': 'peak_usage',
                    'severity': 'info',
                    'message': f"Peak usage hour: {busiest_hour}:00 ({busiest_count} events)",
                    'recommendation': f'Consider scaling resources during {busiest_hour}:00-{busiest_hour+1}:00'
                })
        
        # Security events insight
        if results['security_events']:
            recent_security = [e for e in results['security_events'] 
                             if datetime.fromisoformat(e['timestamp']) > datetime.now() - timedelta(hours=1)]
            
            if len(recent_security) > 10:
                insights.append({
                    'type': 'security_activity',
                    'severity': 'high',
                    'message': f"High security activity: {len(recent_security)} events in last hour",
                    'recommendation': 'Review security logs immediately'
                })
        
        # Performance issues insight
        slow_operations = [op for op in results['performance_issues'] 
                          if op['response_time'] > 3.0]
        
        if slow_operations:
            insights.append({
                'type': 'slow_operations',
                'severity': 'medium',
                'message': f"{len(slow_operations)} operations took more than 3 seconds",
                'recommendation': 'Optimize slow operations identified in performance logs'
            })
        
        # Top user insight
        if results['top_users']:
            top_user, user_count = results['top_users'].most_common(1)[0]
            if user_count > 100:  # Arbitrary threshold
                insights.append({
                    'type': 'active_user',
                    'severity': 'info',
                    'message': f"Most active user: {top_user} ({user_count} actions)",
                    'recommendation': 'Monitor for unusual activity patterns'
                })
        
        return insights
    
    def generate_dashboard(self, hours=24):
        """Generate a dashboard view of log analysis"""
        analysis = self.analyze_logs(hours)
        
        dashboard = f"""
{'='*80}
LOG ANALYSIS DASHBOARD - {analysis['time_period']}
{'='*80}

üìä OVERVIEW:
   Total Log Entries: {analysis['total_entries']:,}
   Time Period: Last {hours} hours
   Analysis Time: {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}

üìà LOG LEVEL DISTRIBUTION:
{self._format_distribution(analysis['by_level'])}

üîß COMPONENT ACTIVITY:
{self._format_distribution(analysis['by_component'], limit=10)}

‚è∞ BUSIEST HOURS (UTC):
{self._format_busy_hours(analysis['busiest_hours'])}

üë• TOP USERS:
{self._format_distribution(analysis['top_users'], limit=5)}

üö® SECURITY SUMMARY:
   Total Security Events: {len(analysis['security_events'])}
   Recent (last hour): {len([e for e in analysis['security_events'] 
                           if datetime.fromisoformat(e['timestamp']) > datetime.now() - timedelta(hours=1)])}

‚ö° PERFORMANCE ISSUES:
   Slow Operations (>1s): {len(analysis['performance_issues'])}
   Very Slow (>3s): {len([op for op in analysis['performance_issues'] if op['response_time'] > 3.0])}

üí° KEY INSIGHTS:
"""
        
        for i, insight in enumerate(analysis.get('insights', []), 1):
            severity_icon = 'üî¥' if insight['severity'] == 'high' else 'üü†' if insight['severity'] == 'medium' else 'üîµ'
            dashboard += f"\n   {severity_icon} {insight['message']}"
            dashboard += f"\n      Recommendation: {insight['recommendation']}\n"
        
        if not analysis.get('insights'):
            dashboard += "\n   ‚úÖ No critical issues detected\n"
        
        dashboard += f"\n{'='*80}"
        
        return dashboard
    
    def _format_distribution(self, counter, limit=None):
        """Format a counter as a distribution bar"""
        if not counter:
            return "   No data"
        
        total = sum(counter.values())
        items = counter.most_common(limit) if limit else counter.most_common()
        
        result = ""
        for item, count in items:
            percentage = (count / total * 100) if total > 0 else 0
            bar_length = int(percentage / 2)  # Scale to 50 chars max
            bar = "‚ñà" * bar_length + "‚ñë" * (50 - bar_length)
            result += f"   {item:20} {bar} {percentage:5.1f}% ({count:,})\n"
        
        return result
    
    def _format_busy_hours(self, hours_counter):
        """Format busy hours as a timeline"""
        if not hours_counter:
            return "   No data"
        
        result = ""
        for hour in range(24):
            count = hours_counter.get(hour, 0)
            bar_length = min(count // 10, 50)  # Each ‚ñà = 10 events, max 50 chars
            bar = "‚ñà" * bar_length if bar_length > 0 else "‚îÇ"
            result += f"   {hour:02d}:00 {' ' if hour < 10 else ''} {bar} {count:,}\n"
        
        return result

# Usage
analyzer = LogAnalyzer()

# Generate dashboard for last 24 hours
dashboard = analyzer.generate_dashboard(24)
print(dashboard)

# Get detailed analysis
analysis = analyzer.analyze_logs(24)
print(f"Total errors: {analysis['by_level'].get('ERROR', 0)}")
print(f"Security events: {len(analysis['security_events'])}")
        </pre>
    </div>

    <h3>Hands-On Exercise: Build a Log Alert System</h3>
    
    <b>Task:</b> Create a smart alert system that monitors logs and sends notifications
    <div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
class SmartAlertSystem:
    """
    Intelligent alert system that learns from patterns
    and reduces alert fatigue
    """
    
    def __init__(self, log_dir="logs"):
        self.log_dir = Path(log_dir)
        self.alert_rules = self._load_alert_rules()
        self.alert_history = []
        self.learning_data = {
            'pattern_frequency': defaultdict(int),
            'false_positives': defaultdict(int),
            'resolved_alerts': defaultdict(int)
        }
        
        # Alert channels
        self.channels = {
            'email': self._send_email,
            'slack': self._send_slack,
            'sms': self._send_sms,
            'dashboard': self._update_dashboard
        }
    
    def _load_alert_rules(self):
        """Load alert rules from configuration"""
        return [
            {
                'name': 'high_error_rate',
                'condition': lambda stats: stats.get('errors_last_hour', 0) > 50,
                'channels': ['email', 'dashboard'],
                'cooldown': 3600,  # 1 hour
                'priority': 'high'
            },
            {
                'name': 'failed_login_spike',
                'condition': lambda stats: stats.get('failed_logins_last_15min', 0) > 10,
                'channels': ['slack', 'dashboard'],
                'cooldown': 900,  # 15 minutes
                'priority': 'critical'
            },
            {
                'name': 'slow_response',
                'condition': lambda stats: stats.get('avg_response_time', 0) > 3.0,
                'channels': ['dashboard'],
                'cooldown': 1800,  # 30 minutes
                'priority': 'medium'
            },
            {
                'name': 'no_recent_logs',
                'condition': lambda stats: stats.get('logs_last_5min', 0) == 0,
                'channels': ['sms', 'email'],
                'cooldown': 300,  # 5 minutes
                'priority': 'critical'
            }
        ]
    
    def check_alerts(self):
        """Check all alert rules and trigger if needed"""
        current_stats = self._gather_current_stats()
        triggered_alerts = []
        
        for rule in self.alert_rules:
            alert_key = f"{rule['name']}_{self._get_time_window()}"
            
            # Check cooldown
            if self._is_in_cooldown(alert_key, rule['cooldown']):
                continue
            
            # Check condition
            if rule['condition'](current_stats):
                # Check if this is likely a false positive
                if not self._is_likely_false_positive(rule['name'], current_stats):
                    alert = self._trigger_alert(rule, current_stats)
                    triggered_alerts.append(alert)
                    
                    # Update learning data
                    self.learning_data['pattern_frequency'][rule['name']] += 1
        
        return triggered_alerts
    
    def _gather_current_stats(self):
        """Gather current statistics from logs"""
        stats = {}
        
        # Get recent error count
        stats['errors_last_hour'] = self._count_recent_entries('ERROR', hours=1)
        stats['errors_last_24h'] = self._count_recent_entries('ERROR', hours=24)
        
        # Get failed login attempts
        stats['failed_logins_last_15min'] = self._count_failed_logins(minutes=15)
        stats['failed_logins_last_hour'] = self._count_failed_logins(minutes=60)
        
        # Get log activity
        stats['logs_last_5min'] = self._count_total_logs(minutes=5)
        stats['logs_last_hour'] = self._count_total_logs(minutes=60)
        
        # Calculate error rate
        if stats['logs_last_hour'] > 0:
            stats['error_rate'] = (stats['errors_last_hour'] / stats['logs_last_hour']) * 100
        else:
            stats['error_rate'] = 0
        
        return stats
    
    def _count_recent_entries(self, level, hours=1):
        """Count recent log entries of specific level"""
        cutoff = datetime.now() - timedelta(hours=hours)
        count = 0
        
        for log_file in self.log_dir.glob("*.log"):
            try:
                with open(log_file, 'r', encoding='utf-8') as f:
                    for line in f:
                        if level in line:
                            # Parse timestamp (simplified)
                            if '|' in line:
                                timestamp_str = line.split('|')[0].strip()
                                try:
                                    log_time = datetime.strptime(timestamp_str, '%Y-%m-%d %H:%M:%S')
                                    if log_time > cutoff:
                                        count += 1
                                except:
                                    continue
            except:
                continue
        
        return count
    
    def _count_failed_logins(self, minutes=15):
        """Count failed login attempts in time window"""
        # Simplified implementation
        cutoff = datetime.now() - timedelta(minutes=minutes)
        security_log = self.log_dir / "security.log"
        
        if not security_log.exists():
            return 0
        
        count = 0
        with open(security_log, 'r', encoding='utf-8') as f:
            for line in f:
                if 'failed_login' in line.lower():
                    # Parse timestamp
                    try:
                        import json
                        data = json.loads(line.strip())
                        log_time = datetime.fromisoformat(data['timestamp'])
                        if log_time > cutoff:
                            count += 1
                    except:
                        continue
        
        return count
    
    def _count_total_logs(self, minutes=60):
        """Count total log entries in time window"""
        cutoff = datetime.now() - timedelta(minutes=minutes)
        count = 0
        
        for log_file in self.log_dir.glob("*.log"):
            try:
                # Get file modification time as proxy
                mtime = datetime.fromtimestamp(log_file.stat().st_mtime)
                if mtime > cutoff:
                    # Count lines (simplified)
                    with open(log_file, 'r', encoding='utf-8') as f:
                        count += sum(1 for _ in f)
            except:
                continue
        
        return count
    
    def _is_in_cooldown(self, alert_key, cooldown_seconds):
        """Check if alert is in cooldown period"""
        for alert in reversed(self.alert_history):
            if alert['key'] == alert_key:
                time_since = time.time() - alert['timestamp']
                return time_since < cooldown_seconds
        return False
    
    def _is_likely_false_positive(self, rule_name, stats):
        """Check if alert is likely a false positive based on history"""
        false_positive_rate = self.learning_data['false_positives'].get(rule_name, 0)
        total_occurrences = self.learning_data['pattern_frequency'].get(rule_name, 1)
        
        fp_ratio = false_positive_rate / total_occurrences
        
        # If more than 50% false positives, suppress similar alerts
        if fp_ratio > 0.5:
            print(f"‚ö†Ô∏è  Suppressing {rule_name} - high false positive rate: {fp_ratio:.1%}")
            return True
        
        return False
    
    def _trigger_alert(self, rule, stats):
        """Trigger an alert"""
        alert = {
            'key': f"{rule['name']}_{self._get_time_window()}",
            'name': rule['name'],
            'timestamp': time.time(),
            'stats': stats.copy(),
            'channels': rule['channels'],
            'priority': rule['priority']
        }
        
        self.alert_history.append(alert)
        
        # Keep only last 1000 alerts
        if len(self.alert_history) > 1000:
            self.alert_history = self.alert_history[-1000:]
        
        # Send to channels
        for channel_name in rule['channels']:
            if channel_name in self.channels:
                try:
                    self.channels[channel_name](alert)
                except Exception as e:
                    print(f"Failed to send alert via {channel_name}: {e}")
        
        return alert
    
    def _get_time_window(self):
        """Get current time window for alert grouping"""
        return datetime.now().strftime("%Y%m%d%H")
    
    def _send_email(self, alert):
        """Send email alert (simulated)"""
        print(f"üìß Sending email alert: {alert['name']}")
        # In real implementation, send actual email
    
    def _send_slack(self, alert):
        """Send Slack alert (simulated)"""
        print(f"üí¨ Sending Slack alert: {alert['name']}")
    
    def _send_sms(self, alert):
        """Send SMS alert (simulated)"""
        print(f"üì± Sending SMS alert: {alert['name']}")
    
    def _update_dashboard(self, alert):
        """Update dashboard with alert (simulated)"""
        print(f"üìä Updating dashboard with alert: {alert['name']}")
    
    def mark_false_positive(self, alert_key):
        """Mark an alert as false positive for learning"""
        for alert in self.alert_history:
            if alert['key'] == alert_key:
                self.learning_data['false_positives'][alert['name']] += 1
                print(f"‚úÖ Marked {alert_key} as false positive")
                return True
        return False
    
    def mark_resolved(self, alert_key):
        """Mark an alert as resolved"""
        for alert in self.alert_history:
            if alert['key'] == alert_key:
                self.learning_data['resolved_alerts'][alert['name']] += 1
                print(f"‚úÖ Marked {alert_key} as resolved")
                return True
        return False
    
    def get_alert_summary(self, hours=24):
        """Get summary of recent alerts"""
        cutoff = time.time() - (hours * 3600)
        recent_alerts = [a for a in self.alert_history if a['timestamp'] > cutoff]
        
        summary = {
            'total_alerts': len(recent_alerts),
            'by_priority': defaultdict(int),
            'by_rule': defaultdict(int),
            'false_positives': 0,
            'resolved': 0
        }
        
        for alert in recent_alerts:
            summary['by_priority'][alert['priority']] += 1
            summary['by_rule'][alert['name']] += 1
        
        return summary

# TODO: Implement a log anomaly detector that:
# 1. Learns normal patterns from historical logs
# 2. Detects anomalies in real-time
# 3. Correlates related events
# 4. Provides root cause analysis
        </pre>
    </div>

    <h3>Today's Assignment</h3>
    <div class="assignment-box">
        <h4>Part 1: Implement Logging System</h4>
        
        <div style="background-color: #e6ffe6; padding: 15px; margin: 10px 0; border-radius: 5px;">
            <b>Required Implementation:</b><br/>
            1. ‚úÖ BankingLogger class with multiple loggers (app, security, performance, audit)<br/>
            2. ‚úÖ ContextAdapter for structured logging with context<br/>
            3. ‚úÖ TransactionContext for managing logging context<br/>
            4. ‚úÖ LogMonitor for real-time log monitoring<br/>
            5. ‚úÖ LogAnalyzer for log analysis and insights<br/>
            6. ‚úÖ SmartAlertSystem for intelligent alerting<br/>
            7. ‚úÖ Log rotation and management<br/>
            8. ‚úÖ JSON formatting for machine-readable logs<br/><br/>
            
            <b>Test Your Implementation:</b><br/>
            1. Generate different types of log entries<br/>
            2. Monitor logs in real-time<br/>
            3. Trigger alerts based on conditions<br/>
            4. Analyze logs and generate dashboard<br/>
            5. Test log rotation and file management
        </div>
        
        <h4>Part 2: Log Analysis Dashboard</h4>
        <div style="background-color: #fff0e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
            <b>Create a Web-Based Dashboard (simulated with print):</b><br/>
            1. Real-time log tail viewer<br/>
            2. Statistics and charts<br/>
            3. Alert management interface<br/>
            4. Search and filter capabilities<br/>
            5. User activity tracking<br/>
            6. Performance metrics<br/>
            7. Security event timeline<br/><br/>
            
            <b>Sample Dashboard Output:</b>
            <pre>
========================================
BANKING SYSTEM MONITORING DASHBOARD
========================================
üïí Last Updated: 2024-01-15 14:30:25
‚è∞ Uptime: 15 days, 3 hours, 22 minutes

üìä SYSTEM HEALTH: ‚úÖ HEALTHY
   CPU Usage: 24%
   Memory Usage: 1.2GB/4.0GB (30%)
   Disk Usage: 45GB/200GB (23%)

üìà LOG ACTIVITY (Last 60 minutes):
   Total Entries: 1,245
   ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë INFO: 892 (72%)
   ‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë WARNING: 215 (17%)
   ‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë ERROR: 98 (8%)
   ‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë CRITICAL: 40 (3%)

üö® ACTIVE ALERTS (3):
   üî¥ HIGH: Failed login spike - 15 attempts in 5 minutes
   üü† MEDIUM: High error rate - 8% in last hour
   üîµ INFO: Peak usage detected at 14:00

üë• USER ACTIVITY:
   Active Users: 42
   Most Active: john_doe (143 actions)
   Recent Logins: 12 in last 15 minutes

üíæ LOG FILES:
   app.log: 45MB (rotated: 5 files)
   security.log: 12MB (rotated: 3 files)
   audit.log: 89MB (rotated: 8 files)

üîç RECENT SECURITY EVENTS:
   14:25: Failed login attempt - user: admin
   14:28: Password change - user: john_doe
   14:30: Large withdrawal - $5,000 - user: jane_smith
========================================
            </pre>
        </div>
        
        <h4>Part 3: Compliance & Audit Reporting</h4>
        <div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
            <b>Create Audit Reports for Compliance:</b><br/>
            1. Daily activity summary report<br/>
            2. Security incident report<br/>
            3. User access review report<br/>
            4. Transaction audit trail<br/>
            5. Data integrity report<br/>
            6. Compliance checklist<br/>
            7. Archival and retention management<br/><br/>
            
            <b>Sample Audit Report:</b>
            <pre>
AUDIT REPORT - 2024-01-15
=========================

1. EXECUTIVE SUMMARY
   - Total Transactions: 1,842
   - Failed Transactions: 23 (1.2%)
   - Security Incidents: 2
   - System Availability: 99.8%

2. USER ACTIVITY AUDIT
   - Unique Users: 156
   - Administrative Actions: 42
   - Password Changes: 18
   - Account Lockouts: 3

3. SECURITY AUDIT
   - Failed Login Attempts: 47
   - Unusual Activity Flags: 12
   - Security Policy Violations: 0
   - Data Access Logs: Complete

4. TRANSACTION AUDIT
   - Deposits: $245,820.50 (892 transactions)
   - Withdrawals: $189,450.25 (823 transactions)
   - Transfers: $56,320.75 (127 transactions)
   - Largest Transaction: $25,000.00

5. COMPLIANCE CHECKLIST
   [‚úì] All transactions logged with timestamp
   [‚úì] User authentication recorded
   [‚úì] Security events captured
   [‚úì] Data integrity verified
   [‚úì] Backup procedures followed
   [‚úì] Retention policy enforced

6. RECOMMENDATIONS
   ‚Ä¢ Review 3 locked accounts
   ‚Ä¢ Investigate 12 unusual activity flags
   ‚Ä¢ Update security policy for new regulations
            </pre>
        </div>
    </div>

    <h3>Tomorrow's Preview</h3>
    <div style="background-color: #e6f3ff; padding: 15px; margin: 10px 0; border-radius: 5px; border-left: 5px solid #4a6fa5;">
        <b>Day 3: File I/O & Data Persistence</b><br/>
        - Reading from text and CSV files<br/>
        - Writing and saving data securely<br/>
        - File locking for concurrent access<br/>
        - Data backup and recovery<br/>
        - File format conversion<br/>
        - Large file handling techniques
    </div>
    
    <div style="background-color: #e6ffe6; padding: 15px; margin: 20px 0; border-radius: 5px; border: 2px solid #4CAF50;">
        <h4>üéØ Professional Logging Checklist</h4>
        <p><b>Ask yourself:</b> Does my logging system have...</p>
        <ul>
            <li>‚úÖ Different log levels (DEBUG, INFO, WARNING, ERROR, CRITICAL)?</li>
            <li>‚úÖ Separate log files for different concerns?</li>
            <li>‚úÖ Structured format (JSON) for machine parsing?</li>
            <li>‚úÖ Context information (user, session, transaction ID)?</li>
            <li>‚úÖ Log rotation to prevent disk filling?</li>
            <li>‚úÖ Real-time monitoring and alerts?</li>
            <li>‚úÖ Audit trail for compliance requirements?</li>
            <li>‚úÖ Performance metrics logging?</li>
            <li>‚úÖ Security event logging?</li>
            <li>‚úÖ Analysis and reporting capabilities?</li>
        </ul>
        <p><b>Remember:</b> Good logs are like a time machine - they let you see exactly what happened when!</p>
    </div>`
            },
            "8-3": {
                icon: "fa-file-alt",
                title: "File I/O & Data Persistence",
                html: `<h1>Week 8, Day 3: File I/O & Data Persistence</h1>
    <p>Today we'll master file operations, data storage, and persistence techniques for building reliable applications.</p>
    
    <div class="analogy-box">
        <b>Analogy: Library vs Notebook üìö</b><br/>
        <ul style="margin-top: 10px;">
            <li><b>Memory variables</b> = Thoughts in your head (lost when sleeping)</li>
            <li><b>File storage</b> = Writing in a notebook (survives restart)</li>
            <li><b>CSV files</b> = Spreadsheets (structured, tabular data)</li>
            <li><b>JSON files</b> = Organized notes (hierarchical, readable)</li>
            <li><b>Database</b> = Library with catalog system (scalable, searchable)</li>
            <li><b>Backup systems</b> = Photocopies in safe deposit box</li>
        </ul>
    </div>

    <h3>File Operations Comparison</h3>
    <table border="1" cellpadding="10" cellspacing="0" style="width: 100%; margin: 15px 0; border-collapse: collapse;">
        <thead>
            <tr style="background-color: #2c3e50; color: white;">
                <th>Operation</th>
                <th>Text File</th>
                <th>CSV File</th>
                <th>JSON File</th>
                <th>Binary File</th>
                <th>Use Case</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><b>Read</b></td>
                <td>Simple, line by line</td>
                <td>csv.reader, DictReader</td>
                <td>json.load()</td>
                <td>read(), readlines()</td>
                <td>Loading config, data</td>
            </tr>
            <tr>
                <td><b>Write</b></td>
                <td>write(), writelines()</td>
                <td>csv.writer, DictWriter</td>
                <td>json.dump()</td>
                <td>write(), binary mode</td>
                <td>Saving data, exports</td>
            </tr>
            <tr>
                <td><b>Append</b></td>
                <td>Open with 'a' mode</td>
                <td>Open with 'a' mode</td>
                <td>Not recommended</td>
                <td>Open with 'ab' mode</td>
                <td>Logging, adding records</td>
            </tr>
            <tr>
                <td><b>Search</b></td>
                <td>Linear search</td>
                <td>Filter rows</td>
                <td>Dict/list operations</td>
                <td>Position-based</td>
                <td>Finding specific data</td>
            </tr>
            <tr>
                <td><b>Update</b></td>
                <td>Rewrite entire file</td>
                <td>Rewrite or use DB</td>
                <td>Load, modify, save</td>
                <td>Seek and write</td>
                <td>Modifying records</td>
            </tr>
            <tr>
                <td><b>Best For</b></td>
                <td>Logs, simple data</td>
                <td>Tabular data, Excel</td>
                <td>Config, structured data</td>
                <td>Images, media, efficiency</td>
                <td></td>
            </tr>
        </tbody>
    </table>

    <h3>Step 1: Basic File Operations</h3>
    
    <b>The Four Essential File Modes</b>
    <div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
# File Modes Cheatsheet
modes = {
    'r':  'Read (default) - file must exist',
    'w':  'Write - creates or overwrites',
    'a':  'Append - creates or adds to end',
    'x':  'Exclusive creation - fails if exists',
    'r+': 'Read and write - file must exist',
    'w+': 'Read and write - creates or overwrites',
    'a+': 'Read and append - creates or adds to end'
}

# Text vs Binary
text_modes = ['r', 'w', 'a', 'r+', 'w+', 'a+']      # Default: text mode
binary_modes = ['rb', 'wb', 'ab', 'r+b', 'w+b', 'a+b']  # Add 'b' for binary

# Examples
with open('data.txt', 'r') as f:      # Read text file
    content = f.read()

with open('data.bin', 'wb') as f:     # Write binary file
    f.write(b'\\x00\\x01\\x02')

with open('log.txt', 'a') as f:       # Append to text file
    f.write('New log entry ')
        </pre>
    </div>

    <b>Safe File Operations Pattern</b>
    <div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
import os
from pathlib import Path
import tempfile

class SafeFileOperations:
    """Safe file operations with error handling and atomic writes"""
    
    @staticmethod
    def read_file(filepath, encoding='utf-8', default=None):
        """
        Safely read a file with comprehensive error handling
        
        Args:
            filepath: Path to file
            encoding: File encoding
            default: Default value if file doesn't exist or can't be read
        
        Returns:
            File content or default value
        """
        filepath = Path(filepath)
        
        try:
            # Check if file exists
            if not filepath.exists():
                print(f"‚ö†Ô∏è  File not found: {filepath}")
                return default
            
            # Check file size (prevent memory issues)
            file_size = filepath.stat().st_size
            MAX_SIZE = 100 * 1024 * 1024  # 100MB
            
            if file_size > MAX_SIZE:
                raise MemoryError(f"File too large: {file_size/1024/1024:.1f}MB")
            
            # Read file
            with open(filepath, 'r', encoding=encoding) as f:
                content = f.read()
            
            print(f"‚úÖ Read {len(content)} characters from {filepath}")
            return content
            
        except UnicodeDecodeError as e:
            print(f"‚ùå Encoding error in {filepath}: {e}")
            # Try different encodings
            for alt_encoding in ['latin-1', 'cp1252', 'iso-8859-1']:
                try:
                    with open(filepath, 'r', encoding=alt_encoding) as f:
                        return f.read()
                except:
                    continue
            return default
            
        except PermissionError as e:
            print(f"‚ùå Permission denied: {filepath}")
            return default
            
        except MemoryError as e:
            print(f"‚ùå {e}")
            return default
            
        except Exception as e:
            print(f"‚ùå Error reading {filepath}: {type(e).__name__}: {e}")
            return default
    
    @staticmethod
    def write_file(filepath, content, encoding='utf-8', mode='w', backup=True):
        """
        Safely write to a file with backup and atomic operations
        
        Args:
            filepath: Path to write to
            content: Content to write
            encoding: File encoding
            mode: Write mode ('w', 'a', etc.)
            backup: Whether to backup existing file
        
        Returns:
            True if successful, False otherwise
        """
        filepath = Path(filepath)
        
        try:
            # Create directory if it doesn't exist
            filepath.parent.mkdir(parents=True, exist_ok=True)
            
            # Backup existing file if requested
            if backup and filepath.exists() and mode == 'w':
                backup_path = filepath.with_suffix(filepath.suffix + '.bak')
                try:
                    import shutil
                    shutil.copy2(filepath, backup_path)
                    print(f"üíæ Backed up to {backup_path}")
                except Exception as e:
                    print(f"‚ö†Ô∏è  Could not create backup: {e}")
            
            # Use temporary file for atomic write
            if mode == 'w':  # Only for overwrites, not appends
                with tempfile.NamedTemporaryFile(
                    mode='w',
                    encoding=encoding,
                    dir=filepath.parent,
                    delete=False
                ) as tmp_file:
                    tmp_file.write(content)
                    tmp_path = Path(tmp_file.name)
                
                # Atomic rename (works on most systems)
                tmp_path.replace(filepath)
                
            else:
                # For append mode, write directly
                with open(filepath, mode, encoding=encoding) as f:
                    f.write(content)
            
            print(f"‚úÖ Wrote {len(content)} characters to {filepath}")
            return True
            
        except PermissionError as e:
            print(f"‚ùå Permission denied: {filepath}")
            return False
            
        except Exception as e:
            print(f"‚ùå Error writing to {filepath}: {type(e).__name__}: {e}")
            
            # Clean up temporary file if it exists
            if 'tmp_path' in locals():
                try:
                    tmp_path.unlink()
                except:
                    pass
            
            return False
    
    @staticmethod
    def read_lines(filepath, encoding='utf-8', strip=True, skip_empty=True):
        """
        Read file line by line (memory efficient for large files)
        
        Args:
            filepath: Path to file
            encoding: File encoding
            strip: Whether to strip whitespace from lines
            skip_empty: Whether to skip empty lines
        
        Yields:
            Each line from the file
        """
        filepath = Path(filepath)
        
        if not filepath.exists():
            return
        
        try:
            with open(filepath, 'r', encoding=encoding) as f:
                for line in f:
                    if strip:
                        line = line.strip()
                    
                    if skip_empty and not line:
                        continue
                    
                    yield line
                    
        except Exception as e:
            print(f"Error reading lines from {filepath}: {e}")
    
    @staticmethod
    def get_file_info(filepath):
        """Get comprehensive file information"""
        filepath = Path(filepath)
        
        if not filepath.exists():
            return None
        
        try:
            stat = filepath.stat()
            
            return {
                'path': str(filepath),
                'size_bytes': stat.st_size,
                'size_human': SafeFileOperations._format_size(stat.st_size),
                'created': stat.st_ctime,
                'modified': stat.st_mtime,
                'accessed': stat.st_atime,
                'is_file': filepath.is_file(),
                'is_dir': filepath.is_dir(),
                'extension': filepath.suffix,
                'parent': str(filepath.parent)
            }
            
        except Exception as e:
            print(f"Error getting file info for {filepath}: {e}")
            return None
    
    @staticmethod
    def _format_size(size_bytes):
        """Format file size in human-readable format"""
        for unit in ['B', 'KB', 'MB', 'GB', 'TB']:
            if size_bytes < 1024.0:
                return f"{size_bytes:.1f} {unit}"
            size_bytes /= 1024.0
        return f"{size_bytes:.1f} PB"

# Usage examples
file_ops = SafeFileOperations()

# Read a file safely
content = file_ops.read_file("data.txt", default="Default content")

# Write a file safely with backup
success = file_ops.write_file(
    "output.txt", 
    "Hello, World!", 
    backup=True
)

# Read large file line by line (memory efficient)
for line in file_ops.read_lines("large_log.txt"):
    if "ERROR" in line:
        print(f"Found error: {line}")

# Get file information
info = file_ops.get_file_info("data.txt")
if info:
    print(f"File size: {info['size_human']}")
    print(f"Last modified: {info['modified']}")
        </pre>
    </div>

    <h3>Step 2: Working with CSV Files</h3>
    
    <b>Complete CSV Handler Class</b>
    <div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
import csv
import json
from typing import List, Dict, Any
from datetime import datetime

class CSVHandler:
    """Professional CSV file operations for banking data"""
    
    def __init__(self, delimiter=',', quotechar='"'):
        self.delimiter = delimiter
        self.quotechar = quotechar
    
    def read_csv(self, filepath: str, has_header: bool = True) -> List[Dict[str, Any]]:
        """
        Read CSV file and return list of dictionaries
        
        Args:
            filepath: Path to CSV file
            has_header: Whether CSV has header row
        
        Returns:
            List of dictionaries (one per row)
        """
        try:
            with open(filepath, 'r', newline='', encoding='utf-8') as csvfile:
                if has_header:
                    reader = csv.DictReader(
                        csvfile, 
                        delimiter=self.delimiter,
                        quotechar=self.quotechar
                    )
                    rows = list(reader)
                else:
                    reader = csv.reader(
                        csvfile, 
                        delimiter=self.delimiter,
                        quotechar=self.quotechar
                    )
                    # Create dicts with column numbers as keys
                    rows = []
                    for row in reader:
                        rows.append({f'col{i}': value for i, value in enumerate(row)})
            
            print(f"‚úÖ Read {len(rows)} rows from {filepath}")
            return rows
            
        except FileNotFoundError:
            print(f"‚ùå CSV file not found: {filepath}")
            return []
        except Exception as e:
            print(f"‚ùå Error reading CSV {filepath}: {e}")
            return []
    
    def write_csv(self, filepath: str, data: List[Dict[str, Any]], 
                  fieldnames: List[str] = None, mode: str = 'w') -> bool:
        """
        Write data to CSV file
        
        Args:
            filepath: Path to write CSV to
            data: List of dictionaries to write
            fieldnames: Column names (uses dict keys if not provided)
            mode: Write mode ('w' for write, 'a' for append)
        
        Returns:
            True if successful, False otherwise
        """
        if not data:
            print("‚ö†Ô∏è  No data to write to CSV")
            return False
        
        # Determine fieldnames
        if fieldnames is None:
            fieldnames = list(data[0].keys())
        
        try:
            # Create directory if it doesn't exist
            Path(filepath).parent.mkdir(parents=True, exist_ok=True)
            
            with open(filepath, mode, newline='', encoding='utf-8') as csvfile:
                writer = csv.DictWriter(
                    csvfile, 
                    fieldnames=fieldnames,
                    delimiter=self.delimiter,
                    quotechar=self.quotechar,
                    quoting=csv.QUOTE_MINIMAL
                )
                
                # Write header only for new files or explicit write mode
                if mode == 'w' or (mode == 'a' and not Path(filepath).exists()):
                    writer.writeheader()
                
                # Write rows
                for row in data:
                    # Ensure row has all fieldnames (fill missing with empty string)
                    for field in fieldnames:
                        if field not in row:
                            row[field] = ""
                    writer.writerow(row)
            
            print(f"‚úÖ Wrote {len(data)} rows to {filepath}")
            return True
            
        except Exception as e:
            print(f"‚ùå Error writing CSV {filepath}: {e}")
            return False
    
    def filter_csv(self, filepath: str, condition_func) -> List[Dict[str, Any]]:
        """
        Filter CSV rows based on condition
        
        Args:
            filepath: Path to CSV file
            condition_func: Function that takes a row dict and returns bool
        
        Returns:
            Filtered list of rows
        """
        rows = self.read_csv(filepath)
        return [row for row in rows if condition_func(row)]
    
    def search_csv(self, filepath: str, column: str, value: Any) -> List[Dict[str, Any]]:
        """
        Search CSV for rows where column matches value
        
        Args:
            filepath: Path to CSV file
            column: Column name to search
            value: Value to match
        
        Returns:
            Matching rows
        """
        def search_condition(row):
            return str(row.get(column, '')).lower() == str(value).lower()
        
        return self.filter_csv(filepath, search_condition)
    
    def update_csv_row(self, filepath: str, match_column: str, match_value: Any, 
                       updates: Dict[str, Any]) -> bool:
        """
        Update specific row(s) in CSV file
        
        Args:
            filepath: Path to CSV file
            match_column: Column to match for update
            match_value: Value to match in match_column
            updates: Dictionary of column:value updates
        
        Returns:
            True if successful, False otherwise
        """
        try:
            # Read all rows
            rows = self.read_csv(filepath)
            if not rows:
                return False
            
            # Find and update matching rows
            updated_count = 0
            for row in rows:
                if str(row.get(match_column, '')).lower() == str(match_value).lower():
                    row.update(updates)
                    updated_count += 1
            
            if updated_count == 0:
                print(f"‚ö†Ô∏è  No rows matched {match_column}={match_value}")
                return False
            
            # Write back all rows
            fieldnames = list(rows[0].keys())
            success = self.write_csv(filepath, rows, fieldnames)
            
            if success:
                print(f"‚úÖ Updated {updated_count} row(s) in {filepath}")
            
            return success
            
        except Exception as e:
            print(f"‚ùå Error updating CSV row: {e}")
            return False
    
    def merge_csv_files(self, output_file: str, input_files: List[str]) -> bool:
        """
        Merge multiple CSV files into one
        
        Args:
            output_file: Output CSV file path
            input_files: List of input CSV file paths
        
        Returns:
            True if successful, False otherwise
        """
        all_rows = []
        all_fieldnames = set()
        
        try:
            # Read all files
            for input_file in input_files:
                if not Path(input_file).exists():
                    print(f"‚ö†Ô∏è  Skipping missing file: {input_file}")
                    continue
                
                rows = self.read_csv(input_file)
                if rows:
                    all_rows.extend(rows)
                    all_fieldnames.update(rows[0].keys())
            
            if not all_rows:
                print("‚ö†Ô∏è  No data to merge")
                return False
            
            # Write merged file
            return self.write_csv(output_file, all_rows, list(all_fieldnames))
            
        except Exception as e:
            print(f"‚ùå Error merging CSV files: {e}")
            return False
    
    def csv_to_json(self, csv_file: str, json_file: str, indent: int = 2) -> bool:
        """
        Convert CSV file to JSON format
        
        Args:
            csv_file: Input CSV file path
            json_file: Output JSON file path
            indent: JSON indentation
        
        Returns:
            True if successful, False otherwise
        """
        try:
            rows = self.read_csv(csv_file)
            if not rows:
                return False
            
            with open(json_file, 'w', encoding='utf-8') as f:
                json.dump(rows, f, indent=indent, default=str)
            
            print(f"‚úÖ Converted {len(rows)} rows from CSV to JSON")
            return True
            
        except Exception as e:
            print(f"‚ùå Error converting CSV to JSON: {e}")
            return False
    
    def json_to_csv(self, json_file: str, csv_file: str) -> bool:
        """
        Convert JSON file to CSV format
        
        Args:
            json_file: Input JSON file path
            csv_file: Output CSV file path
        
        Returns:
            True if successful, False otherwise
        """
        try:
            with open(json_file, 'r', encoding='utf-8') as f:
                data = json.load(f)
            
            if not data:
                return False
            
            return self.write_csv(csv_file, data)
            
        except Exception as e:
            print(f"‚ùå Error converting JSON to CSV: {e}")
            return False

# Banking-specific CSV operations
class BankingCSVHandler(CSVHandler):
    """CSV handler specialized for banking data"""
    
    def __init__(self):
        super().__init__(delimiter=',', quotechar='"')
        self.transaction_schema = [
            'transaction_id', 'date', 'type', 'amount', 
            'account_id', 'description', 'status'
        ]
    
    def export_transactions(self, transactions: List[Dict], filepath: str) -> bool:
        """Export transactions to CSV with banking-specific formatting"""
        
        formatted_transactions = []
        for txn in transactions:
            formatted = {
                'transaction_id': txn.get('id', ''),
                'date': txn.get('timestamp', ''),
                'type': txn.get('type', ''),
                'amount': f"{txn.get('amount', 0):.2f}",
                'account_id': txn.get('account_id', ''),
                'description': txn.get('description', '')[:100],  # Truncate
                'status': txn.get('status', '')
            }
            formatted_transactions.append(formatted)
        
        return self.write_csv(
            filepath, 
            formatted_transactions, 
            fieldnames=self.transaction_schema
        )
    
    def import_transactions(self, filepath: str) -> List[Dict]:
        """Import transactions from CSV with validation"""
        rows = self.read_csv(filepath)
        
        validated_transactions = []
        for i, row in enumerate(rows, 1):
            try:
                # Validate required fields
                if not all(row.get(field) for field in ['transaction_id', 'amount']):
                    print(f"‚ö†Ô∏è  Row {i}: Missing required fields, skipping")
                    continue
                
                # Parse amount
                try:
                    amount = float(row['amount'])
                except ValueError:
                    print(f"‚ö†Ô∏è  Row {i}: Invalid amount format: {row['amount']}")
                    continue
                
                # Build transaction object
                transaction = {
                    'id': row['transaction_id'],
                    'timestamp': row.get('date', datetime.now().isoformat()),
                    'type': row.get('type', 'unknown'),
                    'amount': amount,
                    'account_id': row.get('account_id', ''),
                    'description': row.get('description', ''),
                    'status': row.get('status', 'imported')
                }
                
                validated_transactions.append(transaction)
                
            except Exception as e:
                print(f"‚ö†Ô∏è  Row {i}: Error processing: {e}")
        
        print(f"‚úÖ Imported {len(validated_transactions)} valid transactions")
        return validated_transactions
    
    def generate_monthly_statement(self, account_id: str, year: int, month: int) -> bool:
        """Generate monthly statement CSV for an account"""
        # This would query transactions for the account/month
        # For now, simulate with sample data
        
        sample_transactions = [
            {
                'date': f'{year}-{month:02d}-01 09:30:00',
                'description': 'Salary Deposit',
                'amount': 2500.00,
                'type': 'deposit',
                'balance': 2500.00
            },
            {
                'date': f'{year}-{month:02d}-05 14:15:00',
                'description': 'Grocery Store',
                'amount': -85.50,
                'type': 'withdrawal',
                'balance': 2414.50
            }
        ]
        
        filename = f"statement_{account_id}_{year}_{month:02d}.csv"
        return self.write_csv(filename, sample_transactions)

# Usage
csv_handler = BankingCSVHandler()

# Export transactions
transactions = [
    {'id': 'TXN001', 'timestamp': '2024-01-15', 'type': 'deposit', 
     'amount': 500.00, 'account_id': 'ACC123', 'description': 'ATM deposit'},
    {'id': 'TXN002', 'timestamp': '2024-01-16', 'type': 'withdrawal', 
     'amount': 100.00, 'account_id': 'ACC123', 'description': 'Cash withdrawal'}
]

csv_handler.export_transactions(transactions, 'transactions.csv')

# Import and validate
imported = csv_handler.import_transactions('transactions.csv')

# Generate statement
csv_handler.generate_monthly_statement('ACC123', 2024, 1)
        </pre>
    </div>

    <h3>Step 3: JSON File Operations</h3>
    
    <b>JSON Configuration Manager</b>
    <div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
import json
from typing import Any, Dict, List, Optional
from datetime import datetime
import hashlib

class JSONConfigManager:
    """Manage JSON configuration files with validation and versioning"""
    
    def __init__(self, config_file: str, default_config: Dict = None, 
                 schema: Dict = None, backup_count: int = 3):
        self.config_file = Path(config_file)
        self.default_config = default_config or {}
        self.schema = schema
        self.backup_count = backup_count
        self.config = self._load_config()
    
    def _load_config(self) -> Dict:
        """Load configuration from file or create default"""
        try:
            if not self.config_file.exists():
                print(f"‚ö†Ô∏è  Config file not found, creating default: {self.config_file}")
                self._save_config(self.default_config)
                return self.default_config.copy()
            
            with open(self.config_file, 'r', encoding='utf-8') as f:
                config = json.load(f)
            
            # Validate against schema if provided
            if self.schema and not self._validate_config(config):
                print(f"‚ùå Config validation failed, using defaults")
                self._create_backup("validation_failed")
                return self.default_config.copy()
            
            print(f"‚úÖ Loaded config from {self.config_file}")
            return config
            
        except json.JSONDecodeError as e:
            print(f"‚ùå Invalid JSON in config file: {e}")
            self._create_backup("corrupted")
            return self.default_config.copy()
        except Exception as e:
            print(f"‚ùå Error loading config: {e}")
            return self.default_config.copy()
    
    def _validate_config(self, config: Dict) -> bool:
        """Validate config against schema"""
        if not self.schema:
            return True
        
        try:
            # Simple schema validation
            for key, schema_info in self.schema.items():
                if key not in config:
                    if schema_info.get('required', False):
                        return False
                    continue
                
                value = config[key]
                expected_type = schema_info.get('type')
                
                if expected_type and not isinstance(value, expected_type):
                    return False
                
                # Check allowed values if specified
                allowed = schema_info.get('allowed')
                if allowed and value not in allowed:
                    return False
            
            return True
            
        except Exception as e:
            print(f"Validation error: {e}")
            return False
    
    def _save_config(self, config: Dict) -> bool:
        """Save configuration to file with backup"""
        try:
            # Create backup before saving
            if self.config_file.exists():
                self._create_backup("before_save")
            
            # Create directory if it doesn't exist
            self.config_file.parent.mkdir(parents=True, exist_ok=True)
            
            # Save with pretty printing
            with open(self.config_file, 'w', encoding='utf-8') as f:
                json.dump(config, f, indent=2, sort_keys=True, default=str)
            
            # Update current config
            self.config = config.copy()
            
            print(f"‚úÖ Saved config to {self.config_file}")
            return True
            
        except Exception as e:
            print(f"‚ùå Error saving config: {e}")
            return False
    
    def _create_backup(self, reason: str = ""):
        """Create backup of current config file"""
        if not self.config_file.exists():
            return
        
        try:
            timestamp = datetime.now().strftime("%Y%m%d_%H%M%S")
            backup_name = f"{self.config_file.stem}_{timestamp}_{reason}.bak"
            backup_path = self.config_file.parent / "backups" / backup_name
            
            # Create backups directory
            backup_path.parent.mkdir(parents=True, exist_ok=True)
            
            import shutil
            shutil.copy2(self.config_file, backup_path)
            
            # Clean up old backups
            self._cleanup_old_backups()
            
        except Exception as e:
            print(f"‚ö†Ô∏è  Could not create backup: {e}")
    
    def _cleanup_old_backups(self):
        """Remove old backup files"""
        backup_dir = self.config_file.parent / "backups"
        if not backup_dir.exists():
            return
        
        try:
            # Get all backup files
            backup_files = list(backup_dir.glob("*.bak"))
            backup_files.sort(key=lambda x: x.stat().st_mtime, reverse=True)
            
            # Keep only the newest N files
            for old_backup in backup_files[self.backup_count:]:
                old_backup.unlink()
                print(f"üßπ Cleaned up old backup: {old_backup.name}")
                
        except Exception as e:
            print(f"‚ö†Ô∏è  Error cleaning up backups: {e}")
    
    def get(self, key: str, default: Any = None) -> Any:
        """Get configuration value"""
        keys = key.split('.')
        value = self.config
        
        for k in keys:
            if isinstance(value, dict) and k in value:
                value = value[k]
            else:
                return default
        
        return value
    
    def set(self, key: str, value: Any, save: bool = True) -> bool:
        """Set configuration value"""
        keys = key.split('.')
        config_ref = self.config
        
        # Navigate to parent dictionary
        for k in keys[:-1]:
            if k not in config_ref or not isinstance(config_ref[k], dict):
                config_ref[k] = {}
            config_ref = config_ref[k]
        
        # Set value
        config_ref[keys[-1]] = value
        
        # Save if requested
        if save:
            return self.save()
        
        return True
    
    def save(self) -> bool:
        """Save current configuration to file"""
        return self._save_config(self.config)
    
    def reload(self) -> bool:
        """Reload configuration from file"""
        self.config = self._load_config()
        return True
    
    def reset_to_defaults(self) -> bool:
        """Reset configuration to defaults"""
        self.config = self.default_config.copy()
        return self.save()
    
    def get_config_hash(self) -> str:
        """Get hash of current configuration for change detection"""
        config_str = json.dumps(self.config, sort_keys=True)
        return hashlib.md5(config_str.encode()).hexdigest()
    
    def export_config(self, export_path: str) -> bool:
        """Export configuration to another file"""
        try:
            export_file = Path(export_path)
            export_file.parent.mkdir(parents=True, exist_ok=True)
            
            with open(export_file, 'w', encoding='utf-8') as f:
                json.dump(self.config, f, indent=2, default=str)
            
            print(f"‚úÖ Exported config to {export_path}")
            return True
            
        except Exception as e:
            print(f"‚ùå Error exporting config: {e}")
            return False

# Banking configuration schema
BANKING_CONFIG_SCHEMA = {
    'bank_name': {'type': str, 'required': True},
    'currency': {'type': str, 'required': True, 'allowed': ['USD', 'EUR', 'GBP']},
    'max_daily_withdrawal': {'type': (int, float), 'required': True},
    'interest_rate': {'type': (int, float), 'required': True},
    'security': {
        'type': dict,
        'required': True,
        'schema': {
            'max_login_attempts': {'type': int},
            'session_timeout': {'type': int},
            'require_2fa': {'type': bool}
        }
    },
    'logging': {
        'type': dict,
        'required': True,
        'schema': {
            'level': {'type': str, 'allowed': ['DEBUG', 'INFO', 'WARNING', 'ERROR']},
            'rotate_size_mb': {'type': int},
            'keep_days': {'type': int}
        }
    }
}

# Default banking configuration
DEFAULT_BANKING_CONFIG = {
    'version': '1.0',
    'bank_name': 'Python Bank',
    'currency': 'USD',
    'max_daily_withdrawal': 1000.00,
    'interest_rate': 0.02,
    'security': {
        'max_login_attempts': 3,
        'session_timeout': 900,  # 15 minutes in seconds
        'require_2fa': False
    },
    'logging': {
        'level': 'INFO',
        'rotate_size_mb': 10,
        'keep_days': 30
    },
    'features': {
        'enable_transfers': True,
        'enable_bill_pay': False,
        'enable_investments': False
    }
}

# Usage
config_manager = JSONConfigManager(
    config_file='config/banking_config.json',
    default_config=DEFAULT_BANKING_CONFIG,
    schema=BANKING_CONFIG_SCHEMA,
    backup_count=5
)

# Get configuration values
bank_name = config_manager.get('bank_name')
max_withdrawal = config_manager.get('max_daily_withdrawal')
log_level = config_manager.get('logging.level')

print(f"Bank: {bank_name}")
print(f"Max withdrawal: \\\${max_withdrawal}")
print(f"Log level: {log_level}")

# Set configuration values
config_manager.set('currency', 'EUR')
config_manager.set('security.require_2fa', True)
config_manager.save()

# Export configuration
config_manager.export_config('config/backup_config.json')

# Check for changes
current_hash = config_manager.get_config_hash()
print(f"Config hash: {current_hash}")
        </pre>
    </div>

    <h3>Step 4: File Locking for Concurrent Access</h3>
    
    <b>Safe Concurrent File Access</b>
    <div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
import fcntl  # Unix file locking
import time
from threading import Lock as ThreadLock
from contextlib import contextmanager

class ConcurrentFileHandler:
    """Handle concurrent file access safely with locking"""
    
    def __init__(self, filepath: str, timeout: float = 10.0, retry_delay: float = 0.1):
        self.filepath = Path(filepath)
        self.timeout = timeout
        self.retry_delay = retry_delay
        self.thread_lock = ThreadLock()  # For thread safety within process
        
        # Create directory if it doesn't exist
        self.filepath.parent.mkdir(parents=True, exist_ok=True)
    
    @contextmanager
    def locked_file(self, mode: str = 'r', encoding: str = 'utf-8'):
        """
        Context manager for safe concurrent file access
        
        Args:
            mode: File mode ('r', 'w', 'a', etc.)
            encoding: File encoding
        
        Yields:
            File object with exclusive access
        """
        file_handle = None
        lock_acquired = False
        start_time = time.time()
        
        try:
            # Try to acquire lock with timeout
            while time.time() - start_time < self.timeout:
                try:
                    # Open file
                    file_handle = open(self.filepath, mode, encoding=encoding)
                    
                    # Try to acquire file lock (Unix only)
                    try:
                        fcntl.flock(file_handle, fcntl.LOCK_EX | fcntl.LOCK_NB)
                        lock_acquired = True
                        break
                    except (IOError, BlockingIOError):
                        # Lock is held by another process
                        file_handle.close()
                        time.sleep(self.retry_delay)
                        continue
                        
                except Exception as e:
                    if file_handle:
                        file_handle.close()
                    raise e
            
            if not lock_acquired:
                raise TimeoutError(f"Could not acquire lock for {self.filepath} within {self.timeout} seconds")
            
            # Also acquire thread lock for extra safety
            self.thread_lock.acquire()
            
            print(f"üîí Acquired lock for {self.filepath}")
            yield file_handle
            
        finally:
            # Release locks in reverse order
            if 'self.thread_lock' in locals() and self.thread_lock.locked():
                self.thread_lock.release()
            
            if file_handle:
                # Release file lock
                try:
                    fcntl.flock(file_handle, fcntl.LOCK_UN)
                except:
                    pass
                
                file_handle.close()
                print(f"üîì Released lock for {self.filepath}")
    
    def read_with_lock(self) -> str:
        """Read file content with locking"""
        with self.locked_file('r') as f:
            return f.read()
    
    def write_with_lock(self, content: str, mode: str = 'w') -> bool:
        """Write to file with locking"""
        try:
            with self.locked_file(mode) as f:
                f.write(content)
            return True
        except Exception as e:
            print(f"Error writing to locked file: {e}")
            return False
    
    def append_with_lock(self, content: str) -> bool:
        """Append to file with locking"""
        return self.write_with_lock(content, mode='a')
    
    def update_json_with_lock(self, updates: Dict) -> bool:
        """Update JSON file with locking"""
        try:
            with self.locked_file('r+') as f:
                # Read existing content
                try:
                    data = json.load(f)
                except json.JSONDecodeError:
                    data = {}
                
                # Update data
                data.update(updates)
                
                # Write back
                f.seek(0)
                f.truncate()
                json.dump(data, f, indent=2)
            
            return True
            
        except Exception as e:
            print(f"Error updating JSON with lock: {e}")
            return False

class TransactionLedger:
    """Thread-safe transaction ledger using file locking"""
    
    def __init__(self, ledger_file: str = 'data/transactions.json'):
        self.ledger_file = Path(ledger_file)
        self.file_handler = ConcurrentFileHandler(ledger_file)
        
        # Initialize if doesn't exist
        if not self.ledger_file.exists():
            self._initialize_ledger()
    
    def _initialize_ledger(self):
        """Initialize empty ledger"""
        initial_data = {
            'version': '1.0',
            'created': datetime.now().isoformat(),
            'transactions': [],
            'metadata': {
                'total_transactions': 0,
                'last_transaction_id': 0
            }
        }
        
        self.file_handler.write_with_lock(
            json.dumps(initial_data, indent=2)
        )
    
    def add_transaction(self, transaction: Dict) -> bool:
        """Add a transaction to the ledger atomically"""
        try:
            with self.file_handler.locked_file('r+') as f:
                # Read current ledger
                ledger = json.load(f)
                
                # Generate transaction ID
                last_id = ledger['metadata']['last_transaction_id']
                new_id = last_id + 1
                transaction['id'] = new_id
                transaction['timestamp'] = datetime.now().isoformat()
                
                # Add transaction
                ledger['transactions'].append(transaction)
                
                # Update metadata
                ledger['metadata']['total_transactions'] = len(ledger['transactions'])
                ledger['metadata']['last_transaction_id'] = new_id
                ledger['metadata']['last_updated'] = datetime.now().isoformat()
                
                # Write back
                f.seek(0)
                f.truncate()
                json.dump(ledger, f, indent=2)
            
            print(f"‚úÖ Added transaction {new_id} to ledger")
            return True
            
        except Exception as e:
            print(f"‚ùå Error adding transaction: {e}")
            return False
    
    def get_transactions(self, account_id: str = None, limit: int = 100) -> List[Dict]:
        """Get transactions, optionally filtered by account"""
        try:
            content = self.file_handler.read_with_lock()
            ledger = json.loads(content)
            
            transactions = ledger['transactions']
            
            if account_id:
                transactions = [t for t in transactions 
                              if t.get('account_id') == account_id]
            
            return transactions[-limit:]  # Return most recent
            
        except Exception as e:
            print(f"Error reading transactions: {e}")
            return []
    
    def get_balance(self, account_id: str) -> float:
        """Calculate current balance for an account"""
        transactions = self.get_transactions(account_id)
        
        balance = 0.0
        for txn in transactions:
            if txn['type'] == 'deposit':
                balance += txn['amount']
            elif txn['type'] == 'withdrawal':
                balance -= txn['amount']
        
        return balance
    
    def backup_ledger(self, backup_dir: str = 'backups') -> bool:
        """Create backup of the ledger"""
        try:
            timestamp = datetime.now().strftime("%Y%m%d_%H%M%S")
            backup_file = Path(backup_dir) / f"ledger_backup_{timestamp}.json"
            
            # Read current ledger
            content = self.file_handler.read_with_lock()
            
            # Write backup
            backup_file.parent.mkdir(parents=True, exist_ok=True)
            with open(backup_file, 'w') as f:
                f.write(content)
            
            print(f"‚úÖ Created backup: {backup_file}")
            return True
            
        except Exception as e:
            print(f"‚ùå Error creating backup: {e}")
            return False

# Usage example with multiple threads
import threading

def simulate_concurrent_transactions(ledger: TransactionLedger, account_id: str, num_transactions: int):
    """Simulate concurrent transactions from multiple threads"""
    for i in range(num_transactions):
        transaction = {
            'account_id': account_id,
            'type': 'deposit' if i % 2 == 0 else 'withdrawal',
            'amount': 100.00,
            'description': f'Test transaction {i}'
        }
        
        success = ledger.add_transaction(transaction)
        if not success:
            print(f"Thread {threading.current_thread().name}: Failed to add transaction")

# Create ledger
ledger = TransactionLedger()

# Run concurrent transactions
threads = []
for i in range(5):
    thread = threading.Thread(
        target=simulate_concurrent_transactions,
        args=(ledger, f'ACC{i}', 10),
        name=f'Thread-{i}'
    )
    threads.append(thread)
    thread.start()

# Wait for all threads
for thread in threads:
    thread.join()

# Check results
print(f"Total transactions: {len(ledger.get_transactions())}")
print(f"Balance for ACC0: \\\${ledger.get_balance('ACC0'):.2f}")

# Create backup
ledger.backup_ledger()
        </pre>
    </div>

    <h3>Step 5: Data Backup & Recovery System</h3>
    
    <b>Complete Backup System</b>
    <div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
import shutil
import zipfile
import hashlib
from datetime import datetime, timedelta
from typing import List, Dict, Optional

class BackupSystem:
    """Professional backup and recovery system"""
    
    def __init__(self, 
                 data_dir: str = 'data',
                 backup_dir: str = 'backups',
                 retention_days: int = 30,
                 max_backups: int = 100):
        
        self.data_dir = Path(data_dir)
        self.backup_dir = Path(backup_dir)
        self.retention_days = retention_days
        self.max_backups = max_backups
        
        # Create directories
        self.data_dir.mkdir(parents=True, exist_ok=True)
        self.backup_dir.mkdir(parents=True, exist_ok=True)
        
        # Backup configuration
        self.backup_config = self._load_backup_config()
    
    def _load_backup_config(self) -> Dict:
        """Load backup configuration"""
        config_file = self.backup_dir / 'backup_config.json'
        
        default_config = {
            'version': '1.0',
            'last_full_backup': None,
            'last_incremental_backup': None,
            'backup_schedule': {
                'full_backup_days': [0],  # Sunday
                'incremental_backup_hours': [2, 14]  # 2 AM and 2 PM
            },
            'exclude_patterns': ['*.tmp', '*.log', '*.bak'],
            'compression_level': 6  # 0-9, higher = more compression
        }
        
        if config_file.exists():
            try:
                with open(config_file, 'r') as f:
                    return json.load(f)
            except:
                return default_config
        
        return default_config
    
    def _save_backup_config(self):
        """Save backup configuration"""
        config_file = self.backup_dir / 'backup_config.json'
        with open(config_file, 'w') as f:
            json.dump(self.backup_config, f, indent=2)
    
    def create_full_backup(self, comment: str = "") -> Optional[Path]:
        """
        Create a full backup of all data
        
        Args:
            comment: Optional comment for the backup
        
        Returns:
            Path to backup file if successful, None otherwise
        """
        try:
            timestamp = datetime.now().strftime("%Y%m%d_%H%M%S")
            backup_name = f"full_backup_{timestamp}.zip"
            backup_path = self.backup_dir / backup_name
            
            print(f"üíæ Starting full backup: {backup_name}")
            
            # Create zip file
            with zipfile.ZipFile(backup_path, 'w', zipfile.ZIP_DEFLATED, 
                               compresslevel=self.backup_config['compression_level']) as zipf:
                
                # Walk through data directory
                for file_path in self.data_dir.rglob('*'):
                    if file_path.is_file():
                        # Check if file should be excluded
                        if self._should_exclude(file_path):
                            continue
                        
                        # Calculate relative path for zip
                        rel_path = file_path.relative_to(self.data_dir)
                        
                        # Add file to zip
                        zipf.write(file_path, rel_path)
                        
                        print(f"  Added: {rel_path}")
            
            # Calculate backup size and hash
            backup_size = backup_path.stat().st_size
            backup_hash = self._calculate_file_hash(backup_path)
            
            # Update backup metadata
            backup_metadata = {
                'filename': backup_name,
                'type': 'full',
                'timestamp': datetime.now().isoformat(),
                'size_bytes': backup_size,
                'size_human': self._format_size(backup_size),
                'hash': backup_hash,
                'comment': comment,
                'file_count': self._count_files_in_zip(backup_path)
            }
            
            # Save metadata
            self._save_backup_metadata(backup_name, backup_metadata)
            
            # Update config
            self.backup_config['last_full_backup'] = datetime.now().isoformat()
            self._save_backup_config()
            
            print(f"‚úÖ Full backup created: {backup_name}")
            print(f"   Size: {backup_metadata['size_human']}")
            print(f"   Files: {backup_metadata['file_count']}")
            print(f"   Hash: {backup_hash}")
            
            # Clean up old backups
            self._cleanup_old_backups()
            
            return backup_path
            
        except Exception as e:
            print(f"‚ùå Error creating full backup: {e}")
            return None
    
    def create_incremental_backup(self, comment: str = "") -> Optional[Path]:
        """
        Create incremental backup (only changed files since last backup)
        
        Args:
            comment: Optional comment for the backup
        
        Returns:
            Path to backup file if successful, None otherwise
        """
        try:
            # Get last backup time
            last_backup_time = self._get_last_backup_time()
            
            timestamp = datetime.now().strftime("%Y%m%d_%H%M%S")
            backup_name = f"incremental_backup_{timestamp}.zip"
            backup_path = self.backup_dir / backup_name
            
            print(f"üì¶ Starting incremental backup: {backup_name}")
            
            changed_files = []
            
            # Find changed files
            for file_path in self.data_dir.rglob('*'):
                if file_path.is_file() and not self._should_exclude(file_path):
                    # Check if file was modified since last backup
                    mtime = datetime.fromtimestamp(file_path.stat().st_mtime)
                    
                    if last_backup_time is None or mtime > last_backup_time:
                        changed_files.append(file_path)
            
            if not changed_files:
                print("‚ÑπÔ∏è  No changes since last backup")
                return None
            
            # Create zip with changed files
            with zipfile.ZipFile(backup_path, 'w', zipfile.ZIP_DEFLATED) as zipf:
                for file_path in changed_files:
                    rel_path = file_path.relative_to(self.data_dir)
                    zipf.write(file_path, rel_path)
                    print(f"  Added: {rel_path}")
            
            # Update metadata
            backup_metadata = {
                'filename': backup_name,
                'type': 'incremental',
                'timestamp': datetime.now().isoformat(),
                'size_bytes': backup_path.stat().st_size,
                'size_human': self._format_size(backup_path.stat().st_size),
                'hash': self._calculate_file_hash(backup_path),
                'comment': comment,
                'file_count': len(changed_files),
                'based_on': self.backup_config.get('last_full_backup')
            }
            
            self._save_backup_metadata(backup_name, backup_metadata)
            
            # Update config
            self.backup_config['last_incremental_backup'] = datetime.now().isoformat()
            self._save_backup_config()
            
            print(f"‚úÖ Incremental backup created: {backup_name}")
            print(f"   Changed files: {len(changed_files)}")
            
            return backup_path
            
        except Exception as e:
            print(f"‚ùå Error creating incremental backup: {e}")
            return None
    
    def restore_backup(self, backup_name: str, restore_dir: Optional[str] = None) -> bool:
        """
        Restore from a backup
        
        Args:
            backup_name: Name of backup file to restore
            restore_dir: Directory to restore to (defaults to data_dir)
        
        Returns:
            True if successful, False otherwise
        """
        try:
            backup_path = self.backup_dir / backup_name
            if not backup_path.exists():
                print(f"‚ùå Backup not found: {backup_name}")
                return False
            
            # Determine restore directory
            if restore_dir is None:
                restore_dir = self.data_dir
            else:
                restore_dir = Path(restore_dir)
                restore_dir.mkdir(parents=True, exist_ok=True)
            
            print(f"üîÑ Restoring from backup: {backup_name}")
            
            # Verify backup integrity
            if not self._verify_backup_integrity(backup_path):
                print(f"‚ùå Backup integrity check failed: {backup_name}")
                return False
            
            # Extract backup
            with zipfile.ZipFile(backup_path, 'r') as zipf:
                # Get total size for progress reporting
                total_size = sum(zinfo.file_size for zinfo in zipf.infolist())
                extracted_size = 0
                
                for zinfo in zipf.infolist():
                    # Extract file
                    zipf.extract(zinfo, restore_dir)
                    
                    extracted_size += zinfo.file_size
                    progress = (extracted_size / total_size) * 100
                    
                    print(f"  Extracted: {zinfo.filename} [{progress:.1f}%]")
            
            print(f"‚úÖ Restore completed: {backup_name}")
            
            # Log restore operation
            self._log_restore_operation(backup_name, restore_dir)
            
            return True
            
        except Exception as e:
            print(f"‚ùå Error restoring backup: {e}")
            return False
    
    def restore_to_point_in_time(self, target_time: datetime) -> bool:
        """
        Restore to a specific point in time using backup chain
        
        Args:
            target_time: Target time to restore to
        
        Returns:
            True if successful, False otherwise
        """
        try:
            # Find full backup before target time
            full_backup = self._find_backup_before_time('full', target_time)
            if not full_backup:
                print(f"‚ùå No full backup found before {target_time}")
                return False
            
            print(f"üìÖ Restoring to point in time: {target_time}")
            print(f"üìÇ Base backup: {full_backup['filename']}")
            
            # Restore full backup to temporary directory
            temp_dir = self.backup_dir / 'temp_restore'
            if temp_dir.exists():
                shutil.rmtree(temp_dir)
            temp_dir.mkdir()
            
            # Restore full backup
            if not self.restore_backup(full_backup['filename'], temp_dir):
                return False
            
            # Find and apply incremental backups
            incremental_backups = self._find_backups_in_range(
                'incremental', 
                datetime.fromisoformat(full_backup['timestamp']), 
                target_time
            )
            
            for inc_backup in incremental_backups:
                print(f"üì¶ Applying incremental: {inc_backup['filename']}")
                
                # Extract incremental backup on top of temp directory
                backup_path = self.backup_dir / inc_backup['filename']
                with zipfile.ZipFile(backup_path, 'r') as zipf:
                    zipf.extractall(temp_dir)
            
            # Now restore from temp directory to actual data directory
            print("üîÑ Finalizing restore...")
            
            # Backup current data first
            self.create_incremental_backup("pre_restore_backup")
            
            # Clear data directory
            for item in self.data_dir.iterdir():
                if item.is_file():
                    item.unlink()
                elif item.is_dir():
                    shutil.rmtree(item)
            
            # Copy restored data
            for item in temp_dir.iterdir():
                if item.is_dir():
                    shutil.copytree(item, self.data_dir / item.name)
                else:
                    shutil.copy2(item, self.data_dir / item.name)
            
            # Cleanup
            shutil.rmtree(temp_dir)
            
            print(f"‚úÖ Point-in-time restore completed to {target_time}")
            return True
            
        except Exception as e:
            print(f"‚ùå Error during point-in-time restore: {e}")
            return False
    
    def list_backups(self) -> List[Dict]:
        """List all available backups"""
        backups = []
        
        for backup_file in self.backup_dir.glob('*.zip'):
            metadata = self._load_backup_metadata(backup_file.name)
            if metadata:
                backups.append(metadata)
        
        # Sort by timestamp
        backups.sort(key=lambda x: x['timestamp'], reverse=True)
        
        return backups
    
    def _should_exclude(self, file_path: Path) -> bool:
        """Check if file should be excluded from backup"""
        for pattern in self.backup_config['exclude_patterns']:
            if file_path.match(pattern):
                return True
        return False
    
    def _get_last_backup_time(self) -> Optional[datetime]:
        """Get timestamp of last backup"""
        last_full = self.backup_config.get('last_full_backup')
        last_inc = self.backup_config.get('last_incremental_backup')
        
        times = []
        if last_full:
            times.append(datetime.fromisoformat(last_full))
        if last_inc:
            times.append(datetime.fromisoformat(last_inc))
        
        return max(times) if times else None
    
    def _calculate_file_hash(self, file_path: Path) -> str:
        """Calculate SHA-256 hash of a file"""
        sha256 = hashlib.sha256()
        with open(file_path, 'rb') as f:
            for chunk in iter(lambda: f.read(4096), b''):
                sha256.update(chunk)
        return sha256.hexdigest()
    
    def _format_size(self, size_bytes: int) -> str:
        """Format size in human-readable format"""
        for unit in ['B', 'KB', 'MB', 'GB']:
            if size_bytes < 1024.0:
                return f"{size_bytes:.1f} {unit}"
            size_bytes /= 1024.0
        return f"{size_bytes:.1f} TB"
    
    def _count_files_in_zip(self, zip_path: Path) -> int:
        """Count files in a zip archive"""
        with zipfile.ZipFile(zip_path, 'r') as zipf:
            return len([f for f in zipf.infolist() if not f.is_dir()])
    
    def _save_backup_metadata(self, backup_name: str, metadata: Dict):
        """Save backup metadata"""
        metadata_file = self.backup_dir / f"{backup_name}.meta.json"
        with open(metadata_file, 'w') as f:
            json.dump(metadata, f, indent=2)
    
    def _load_backup_metadata(self, backup_name: str) -> Optional[Dict]:
        """Load backup metadata"""
        metadata_file = self.backup_dir / f"{backup_name}.meta.json"
        if metadata_file.exists():
            try:
                with open(metadata_file, 'r') as f:
                    return json.load(f)
            except:
                return None
        return None
    
    def _verify_backup_integrity(self, backup_path: Path) -> bool:
        """Verify backup file integrity"""
        try:
            # Check if zip file is valid
            with zipfile.ZipFile(backup_path, 'r') as zipf:
                # Test zip file
                bad_file = zipf.testzip()
                if bad_file:
                    print(f"‚ùå Corrupted file in zip: {bad_file}")
                    return False
            
            # Verify hash if metadata exists
            metadata_file = backup_path.with_suffix('.zip.meta.json')
            if metadata_file.exists():
                with open(metadata_file, 'r') as f:
                    metadata = json.load(f)
                
                expected_hash = metadata.get('hash')
                if expected_hash:
                    actual_hash = self._calculate_file_hash(backup_path)
                    if actual_hash != expected_hash:
                        print(f"‚ùå Hash mismatch for {backup_path.name}")
                        return False
            
            return True
            
        except zipfile.BadZipFile:
            print(f"‚ùå Invalid zip file: {backup_path.name}")
            return False
        except Exception as e:
            print(f"‚ùå Error verifying backup: {e}")
            return False
    
    def _log_restore_operation(self, backup_name: str, restore_dir: Path):
        """Log restore operation"""
        log_entry = {
            'timestamp': datetime.now().isoformat(),
            'operation': 'restore',
            'backup_name': backup_name,
            'restore_dir': str(restore_dir),
            'user': os.getenv('USER', 'unknown')
        }
        
        log_file = self.backup_dir / 'restore_log.json'
        log_data = []
        
        if log_file.exists():
            try:
                with open(log_file, 'r') as f:
                    log_data = json.load(f)
            except:
                pass
        
        log_data.append(log_entry)
        
        # Keep only last 100 entries
        if len(log_data) > 100:
            log_data = log_data[-100:]
        
        with open(log_file, 'w') as f:
            json.dump(log_data, f, indent=2)
    
    def _find_backup_before_time(self, backup_type: str, target_time: datetime) -> Optional[Dict]:
        """Find backup of specific type before given time"""
        backups = self.list_backups()
        
        for backup in backups:
            if backup['type'] == backup_type:
                backup_time = datetime.fromisoformat(backup['timestamp'])
                if backup_time <= target_time:
                    return backup
        
        return None
    
    def _find_backups_in_range(self, backup_type: str, start_time: datetime, 
                              end_time: datetime) -> List[Dict]:
        """Find backups of specific type within time range"""
        backups = self.list_backups()
        result = []
        
        for backup in backups:
            if backup['type'] == backup_type:
                backup_time = datetime.fromisoformat(backup['timestamp'])
                if start_time < backup_time <= end_time:
                    result.append(backup)
        
        # Sort by timestamp (oldest first for application order)
        result.sort(key=lambda x: x['timestamp'])
        return result
    
    def _cleanup_old_backups(self):
        """Remove old backups based on retention policy"""
        cutoff_date = datetime.now() - timedelta(days=self.retention_days)
        
        for backup_file in self.backup_dir.glob('*.zip'):
            # Get backup time from metadata or file mtime
            metadata = self._load_backup_metadata(backup_file.name)
            
            if metadata:
                backup_time = datetime.fromisoformat(metadata['timestamp'])
            else:
                backup_time = datetime.fromtimestamp(backup_file.stat().st_mtime)
            
            # Delete if older than retention period
            if backup_time < cutoff_date:
                try:
                    backup_file.unlink()
                    
                    # Delete metadata file too
                    metadata_file = backup_file.with_suffix('.zip.meta.json')
                    if metadata_file.exists():
                        metadata_file.unlink()
                    
                    print(f"üßπ Cleaned up old backup: {backup_file.name}")
                    
                except Exception as e:
                    print(f"‚ö†Ô∏è  Could not delete old backup {backup_file.name}: {e}")
        
        # Also enforce max_backups limit
        all_backups = self.list_backups()
        if len(all_backups) > self.max_backups:
            # Delete oldest backups beyond limit
            for backup in all_backups[self.max_backups:]:
                backup_file = self.backup_dir / backup['filename']
                try:
                    backup_file.unlink()
                    
                    metadata_file = backup_file.with_suffix('.zip.meta.json')
                    if metadata_file.exists():
                        metadata_file.unlink()
                    
                    print(f"üßπ Cleaned up backup (max limit): {backup_file.name}")
                    
                except Exception as e:
                    print(f"‚ö†Ô∏è  Could not delete backup {backup_file.name}: {e}")

# Usage
backup_system = BackupSystem(
    data_dir='data',
    backup_dir='backups',
    retention_days=30,
    max_backups=50
)

# Create backups
print("=== Creating Backups ===")
full_backup = backup_system.create_full_backup("Weekly full backup")
time.sleep(2)  # Simulate time passing
incremental = backup_system.create_incremental_backup("Daily changes")

# List backups
print(" === Available Backups ===")
backups = backup_system.list_backups()
for backup in backups:
    print(f"{backup['timestamp']} | {backup['type'].upper():12} | "
          f"{backup['size_human']:8} | {backup['filename']}")

# Restore
print(" === Restore Example ===")
if backups:
    latest_backup = backups[0]
    success = backup_system.restore_backup(latest_backup['filename'])
    if success:
        print("‚úÖ Restore successful")

# Point-in-time restore
print(" === Point-in-Time Restore ===")
target_time = datetime.now() - timedelta(hours=1)
success = backup_system.restore_to_point_in_time(target_time)
if success:
    print(f"‚úÖ Restored to {target_time}")
        </pre>
    </div>

    <h3>Hands-On Exercise: Data Migration Tool</h3>
    
    <b>Task:</b> Create a data migration tool that can convert between formats and handle large datasets
    <div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
class DataMigrationTool:
    """
    Tool for migrating data between formats with validation and progress tracking
    """
    
    def __init__(self):
        self.supported_formats = ['csv', 'json', 'txt', 'xml', 'sqlite']
        self.migration_history = []
    
    def migrate_csv_to_json(self, csv_file: str, json_file: str, 
                           batch_size: int = 1000) -> Dict[str, Any]:
        """
        Migrate CSV data to JSON format with batch processing for large files
        
        Args:
            csv_file: Source CSV file
            json_file: Target JSON file
            batch_size: Number of rows to process at once
        
        Returns:
            Migration statistics
        """
        stats = {
            'source': csv_file,
            'target': json_file,
            'rows_processed': 0,
            'errors': 0,
            'start_time': datetime.now().isoformat(),
            'format': 'csv_to_json'
        }
        
        try:
            csv_handler = CSVHandler()
            
            # Read CSV in batches to handle large files
            batch_count = 0
            all_data = []
            
            # Get total rows for progress (estimate)
            total_rows = self._estimate_row_count(csv_file)
            
            print(f"üìä Migrating {csv_file} to {json_file}")
            print(f"   Estimated rows: {total_rows:,}")
            print(f"   Batch size: {batch_size}")
            
            with open(csv_file, 'r', encoding='utf-8') as f:
                reader = csv.DictReader(f)
                
                current_batch = []
                for row_num, row in enumerate(reader, 1):
                    current_batch.append(row)
                    stats['rows_processed'] += 1
                    
                    # Process batch when full
                    if len(current_batch) >= batch_size:
                        self._process_batch(current_batch, all_data, stats)
                        current_batch = []
                        batch_count += 1
                        
                        # Show progress
                        if row_num % (batch_size * 10) == 0:
                            progress = (row_num / total_rows) * 100 if total_rows > 0 else 0
                            print(f"   Progress: {row_num:,} rows ({progress:.1f}%)")
                
                # Process final batch
                if current_batch:
                    self._process_batch(current_batch, all_data, stats)
            
            # Write JSON file
            with open(json_file, 'w', encoding='utf-8') as f:
                json.dump({
                    'metadata': {
                        'source': csv_file,
                        'migrated': datetime.now().isoformat(),
                        'rows': len(all_data)
                    },
                    'data': all_data
                }, f, indent=2)
            
            stats['end_time'] = datetime.now().isoformat()
            stats['success'] = True
            stats['final_row_count'] = len(all_data)
            
            print(f"‚úÖ Migration completed: {stats['rows_processed']:,} rows")
            if stats['errors'] > 0:
                print(f"‚ö†Ô∏è  Errors: {stats['errors']}")
            
        except Exception as e:
            stats['error'] = str(e)
            stats['success'] = False
            print(f"‚ùå Migration failed: {e}")
        
        # Save migration record
        self._save_migration_record(stats)
        
        return stats
    
    def migrate_json_to_sqlite(self, json_file: str, db_file: str, 
                              table_name: str = 'data') -> Dict[str, Any]:
        """
        Migrate JSON data to SQLite database
        
        Args:
            json_file: Source JSON file
            db_file: Target SQLite database file
            table_name: Table name to create
        
        Returns:
            Migration statistics
        """
        stats = {
            'source': json_file,
            'target': db_file,
            'rows_processed': 0,
            'errors': 0,
            'start_time': datetime.now().isoformat(),
            'format': 'json_to_sqlite'
        }
        
        try:
            import sqlite3
            
            # Load JSON data
            with open(json_file, 'r', encoding='utf-8') as f:
                data = json.load(f)
            
            if 'data' in data:
                rows = data['data']
            else:
                rows = data if isinstance(data, list) else [data]
            
            print(f"üìä Migrating {json_file} to SQLite")
            print(f"   Rows to process: {len(rows):,}")
            
            # Connect to SQLite
            conn = sqlite3.connect(db_file)
            cursor = conn.cursor()
            
            # Determine column names from first row
            if rows:
                first_row = rows[0]
                columns = list(first_row.keys())
                
                # Create table
                create_sql = f"""
                CREATE TABLE IF NOT EXISTS {table_name} (
                    id INTEGER PRIMARY KEY AUTOINCREMENT,
                    {', '.join([f'{col} TEXT' for col in columns])}
                )
                """
                cursor.execute(create_sql)
                
                # Insert data
                for i, row in enumerate(rows, 1):
                    try:
                        # Prepare values
                        values = [str(row.get(col, '')) for col in columns]
                        
                        # Insert
                        placeholders = ', '.join(['?'] * len(columns))
                        insert_sql = f"""
                        INSERT INTO {table_name} ({', '.join(columns)})
                        VALUES ({placeholders})
                        """
                        
                        cursor.execute(insert_sql, values)
                        stats['rows_processed'] += 1
                        
                        # Show progress
                        if i % 1000 == 0:
                            print(f"   Processed: {i:,} rows")
                    
                    except Exception as e:
                        stats['errors'] += 1
                        if stats['errors'] <= 5:  # Show first 5 errors
                            print(f"‚ö†Ô∏è  Row {i} error: {e}")
                
                conn.commit()
            
            conn.close()
            
            stats['end_time'] = datetime.now().isoformat()
            stats['success'] = True
            
            print(f"‚úÖ Migration completed: {stats['rows_processed']:,} rows to SQLite")
            
        except Exception as e:
            stats['error'] = str(e)
            stats['success'] = False
            print(f"‚ùå Migration failed: {e}")
        
        self._save_migration_record(stats)
        return stats
    
    def migrate_txt_to_csv(self, txt_file: str, csv_file: str, 
                          delimiter: str = ',', has_header: bool = False) -> Dict[str, Any]:
        """
        Migrate delimited text file to CSV
        
        Args:
            txt_file: Source text file
            csv_file: Target CSV file
            delimiter: Field delimiter in text file
            has_header: Whether text file has header
        
        Returns:
            Migration statistics
        """
        # TODO: Implement text to CSV migration
        # Should handle different delimiters (comma, tab, pipe, etc.)
        # Should validate data and handle errors
        pass
    
    def _process_batch(self, batch: List[Dict], all_data: List[Dict], stats: Dict):
        """Process a batch of data with validation"""
        for row in batch:
            try:
                # Validate row
                if self._validate_row(row):
                    all_data.append(row)
                else:
                    stats['errors'] += 1
            except Exception as e:
                stats['errors'] += 1
    
    def _validate_row(self, row: Dict) -> bool:
        """Validate a data row"""
        # Basic validation - check for required fields in banking context
        required_fields = ['id', 'timestamp', 'amount']
        
        for field in required_fields:
            if field not in row or not row[field]:
                return False
        
        # Validate amount is numeric
        try:
            float(row['amount'])
        except ValueError:
            return False
        
        return True
    
    def _estimate_row_count(self, filepath: str) -> int:
        """Estimate number of rows in a file"""
        try:
            # Count lines (approximate for CSV with headers)
            with open(filepath, 'r', encoding='utf-8') as f:
                line_count = sum(1 for _ in f)
            
            # Subtract header if CSV
            if filepath.endswith('.csv'):
                return max(0, line_count - 1)
            
            return line_count
            
        except:
            return 0
    
    def _save_migration_record(self, stats: Dict):
        """Save migration record to history"""
        self.migration_history.append(stats)
        
        # Keep only last 100 records
        if len(self.migration_history) > 100:
            self.migration_history = self.migration_history[-100:]
        
        # Save to file
        history_file = 'migration_history.json'
        try:
            with open(history_file, 'w') as f:
                json.dump(self.migration_history, f, indent=2)
        except:
            pass
    
    def get_migration_history(self) -> List[Dict]:
        """Get migration history"""
        return self.migration_history
    
    def generate_migration_report(self) -> str:
        """Generate migration report"""
        if not self.migration_history:
            return "No migration history available"
        
        successful = sum(1 for m in self.migration_history if m.get('success', False))
        total = len(self.migration_history)
        
        report = f"""
{'='*80}
DATA MIGRATION REPORT
{'='*80}

Summary:
   Total Migrations: {total}
   Successful: {successful}
   Failed: {total - successful}
   Success Rate: {(successful/total*100):.1f}%

Recent Migrations:
"""
        
        for migration in self.migration_history[-5:]:  # Last 5
            status = '‚úÖ' if migration.get('success') else '‚ùå'
            report += f"\n{status} {migration.get('format', 'unknown'):20} "
            report += f"| Rows: {migration.get('rows_processed', 0):,} "
            report += f"| Errors: {migration.get('errors', 0)}"
        
        report += f"\n\n{'='*80}"
        return report

# TODO: Implement additional migration features:
# 1. XML to JSON migration
# 2. SQLite to CSV migration  
# 3. Data transformation during migration
# 4. Parallel processing for large files
# 5. Resume capability for interrupted migrations
        </pre>
    </div>

    <h3>Today's Assignment</h3>
    <div class="assignment-box">
        <h4>Part 1: Implement File Operations</h4>
        
        <div style="background-color: #e6ffe6; padding: 15px; margin: 10px 0; border-radius: 5px;">
            <b>Required Implementation:</b><br/>
            1. ‚úÖ SafeFileOperations class with comprehensive error handling<br/>
            2. ‚úÖ CSVHandler for reading/writing CSV files<br/>
            3. ‚úÖ BankingCSVHandler for banking-specific operations<br/>
            4. ‚úÖ JSONConfigManager for configuration files<br/>
            5. ‚úÖ ConcurrentFileHandler with file locking<br/>
            6. ‚úÖ TransactionLedger for thread-safe transaction storage<br/>
            7. ‚úÖ BackupSystem for data backup and recovery<br/>
            8. ‚úÖ DataMigrationTool for format conversion<br/><br/>
            
            <b>Test Your Implementation:</b><br/>
            1. Create, read, update, and delete files safely<br/>
            2. Handle CSV files with different formats<br/>
            3. Manage JSON configuration with validation<br/>
            4. Test concurrent file access with multiple threads<br/>
            5. Create and restore backups<br/>
            6. Migrate data between formats
        </div>
        
        <h4>Part 2: Banking Data Management System</h4>
        <div style="background-color: #fff0e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
            <b>Create a Complete Data Management System:</b><br/>
            1. <b>Transaction Archiver:</b> Move old transactions to archive files<br/>
            2. <b>Data Validator:</b> Validate all banking data files<br/>
            3. <b>Report Generator:</b> Generate reports in multiple formats<br/>
            4. <b>Data Cleaner:</b> Remove duplicates and fix inconsistencies<br/>
            5. <b>Import/Export Tool:</b> Import from and export to various formats<br/>
            6. <b>Data Monitor:</b> Monitor data files for changes or corruption<br/>
            7. <b>Compression Tool:</b> Compress old data to save space<br/><br/>
            
            <b>Sample System Architecture:</b>
            <pre>
data/
‚îú‚îÄ‚îÄ current/                    # Active data
‚îÇ   ‚îú‚îÄ‚îÄ transactions.csv       # Recent transactions
‚îÇ   ‚îú‚îÄ‚îÄ accounts.json          # Account information
‚îÇ   ‚îî‚îÄ‚îÄ users.json            # User profiles
‚îú‚îÄ‚îÄ archive/                   # Archived data
‚îÇ   ‚îú‚îÄ‚îÄ transactions_2023.csv  # Last year's transactions
‚îÇ   ‚îî‚îÄ‚îÄ accounts_2023.json    # Archived accounts
‚îú‚îÄ‚îÄ backups/                   # Backup files
‚îÇ   ‚îú‚îÄ‚îÄ daily/
‚îÇ   ‚îú‚îÄ‚îÄ weekly/
‚îÇ   ‚îî‚îÄ‚îÄ monthly/
‚îú‚îÄ‚îÄ reports/                   # Generated reports
‚îÇ   ‚îú‚îÄ‚îÄ monthly/
‚îÇ   ‚îú‚îÄ‚îÄ quarterly/
‚îÇ   ‚îî‚îÄ‚îÄ annual/
‚îî‚îÄ‚îÄ logs/                     # Operation logs
    ‚îú‚îÄ‚îÄ imports.log
    ‚îú‚îÄ‚îÄ exports.log
    ‚îî‚îÄ‚îÄ cleanup.log
            </pre>
        </div>
        
        <h4>Part 3: Performance & Scalability</h4>
        <div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
            <b>Optimize for Large Datasets:</b><br/>
            1. <b>Streaming Processing:</b> Process files line by line instead of loading entirely<br/>
            2. <b>Batch Operations:</b> Process data in batches to manage memory<br/>
            3. <b>Index Files:</b> Create index files for faster searching<br/>
            4. <b>Caching:</b> Cache frequently accessed data<br/>
            5. <b>Compression:</b> Compress old data files<br/>
            6. <b>Parallel Processing:</b> Use multiple threads for I/O operations<br/>
            7. <b>Memory Mapping:</b> Use memory-mapped files for large files<br/><br/>
            
            <b>Sample Optimization Code:</b>
            <pre>
def process_large_file(filepath, chunk_size=8192):
    """Process large file in chunks"""
    with open(filepath, 'r', encoding='utf-8') as f:
        while True:
            chunk = f.read(chunk_size)
            if not chunk:
                break
            
            # Process chunk
            yield from process_chunk(chunk)

def create_index_file(data_file, index_file, key_column):
    """Create index file for faster lookups"""
    index = {}
    
    with open(data_file, 'r', encoding='utf-8') as f:
        reader = csv.DictReader(f)
        
        position = f.tell()
        for row in reader:
            key = row[key_column]
            index[key] = position
            position = f.tell()
    
    # Save index
    with open(index_file, 'w') as f:
        json.dump(index, f)
    
    return index
            </pre>
        </div>
    </div>

    <h3>Tomorrow's Preview</h3>
    <div style="background-color: #e6f3ff; padding: 15px; margin: 10px 0; border-radius: 5px; border-left: 5px solid #4a6fa5;">
        <b>Day 4: Advanced File Operations & Project Integration</b><br/>
        - Integrating file operations into banking system<br/>
        - Data encryption for sensitive files<br/>
        - File system monitoring<br/>
        - Network file operations<br/>
        - Cloud storage integration<br/>
        - Final project file architecture
    </div>
    
    <div style="background-color: #e6ffe6; padding: 15px; margin: 20px 0; border-radius: 5px; border: 2px solid #4CAF50;">
        <h4>üéØ File I/O Best Practices</h4>
        <p><b>Always remember:</b></p>
        <ul>
            <li>‚úÖ Use context managers (with open(...)) for automatic cleanup</li>
            <li>‚úÖ Handle exceptions for all file operations</li>
            <li>‚úÖ Close files explicitly when not using context managers</li>
            <li>‚úÖ Use absolute paths for important files</li>
            <li>‚úÖ Check file existence before operations</li>
            <li>‚úÖ Validate file permissions</li>
            <li>‚úÖ Implement file locking for concurrent access</li>
            <li>‚úÖ Create backups before modifying important files</li>
            <li>‚úÖ Use appropriate file formats for your data</li>
            <li>‚úÖ Monitor disk space when writing large files</li>
        </ul>
        <p><b>Professional Tip:</b> Test your file operations with corrupted files, full disks, and permission errors!</p>
    </div>`
            },
            "8-4": {
                icon: "fa-file-export",
                title: "Advanced File Operations & Project Integration",
                html: `<h1>Week 8, Day 4: Advanced File Operations & Project Integration</h1>
    <p>Today we'll integrate all file operations into our banking system and add advanced features like encryption, monitoring, and cloud integration.</p>
    
    <div class="analogy-box">
        <b>Analogy: Bank Vault Operations üè¶</b><br/>
        <ul style="margin-top: 10px;">
            <li><b>Basic file ops</b> = Simple file cabinet</li>
            <li><b>Encryption</b> = Bank vault with combination lock</li>
            <li><b>Monitoring</b> = Security cameras watching files</li>
            <li><b>Version control</b> = Audit trail of all changes</li>
            <li><b>Cloud storage</b> = Off-site safe deposit boxes</li>
            <li><b>Data validation</b> = Currency verification machine</li>
        </ul>
    </div>

    <h3>Complete Banking File Architecture</h3>
    <div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre style="font-family: 'Courier New', monospace;">
banking_system/
‚îú‚îÄ‚îÄ src/                          # Source code
‚îÇ   ‚îú‚îÄ‚îÄ core/                    # Core functionality
‚îÇ   ‚îú‚îÄ‚îÄ file_ops/               # File operations module (Today's focus!)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ safe_operations.py  # SafeFileOperations
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ csv_handler.py      # CSVHandler, BankingCSVHandler
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ json_manager.py     # JSONConfigManager
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ concurrent_access.py # ConcurrentFileHandler, TransactionLedger
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ backup_system.py    # BackupSystem
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ migration_tool.py   # DataMigrationTool
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ encryption.py       # File encryption (new today!)
‚îÇ   ‚îú‚îÄ‚îÄ auth/                   # Authentication
‚îÇ   ‚îú‚îÄ‚îÄ transactions/           # Transaction processing
‚îÇ   ‚îî‚îÄ‚îÄ ui/                     # User interface
‚îú‚îÄ‚îÄ data/                       # Application data
‚îÇ   ‚îú‚îÄ‚îÄ active/                # Current working data
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ accounts.json     # Encrypted account data
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ users.json        # Encrypted user data
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ transactions/     # Transaction files by date
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ 2024-01/
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ 2024-01-15.csv
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ 2024-01-16.csv
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ 2024-02/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ config/           # Configuration files
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ banking.json
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ security.json
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ cache/            # Cache files
‚îÇ   ‚îú‚îÄ‚îÄ archive/              # Archived data
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ transactions_2023.zip
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ users_2023.json
‚îÇ   ‚îî‚îÄ‚îÄ temp/                 # Temporary files
‚îú‚îÄ‚îÄ backups/                  # Automated backups
‚îÇ   ‚îú‚îÄ‚îÄ hourly/
‚îÇ   ‚îú‚îÄ‚îÄ daily/
‚îÇ   ‚îú‚îÄ‚îÄ weekly/
‚îÇ   ‚îî‚îÄ‚îÄ monthly/
‚îú‚îÄ‚îÄ logs/                     # System logs
‚îÇ   ‚îú‚îÄ‚îÄ app.log
‚îÇ   ‚îú‚îÄ‚îÄ security.log
‚îÇ   ‚îú‚îÄ‚îÄ audit.log
‚îÇ   ‚îî‚îÄ‚îÄ performance.log
‚îú‚îÄ‚îÄ reports/                  # Generated reports
‚îÇ   ‚îú‚îÄ‚îÄ statements/
‚îÇ   ‚îú‚îÄ‚îÄ summaries/
‚îÇ   ‚îî‚îÄ‚îÄ compliance/
‚îî‚îÄ‚îÄ exports/                  # User exports
    ‚îú‚îÄ‚îÄ csv/
    ‚îú‚îÄ‚îÄ pdf/
    ‚îî‚îÄ‚îÄ excel/
        </pre>
    </div>

    <h3>Step 1: File Encryption for Sensitive Data</h3>
    
    <b>Secure File Encryption System</b>
    <div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
import base64
import os
from cryptography.fernet import Fernet
from cryptography.hazmat.primitives import hashes
from cryptography.hazmat.primitives.kdf.pbkdf2 import PBKDF2HMAC

class FileEncryptor:
    """Encrypt and decrypt sensitive files using AES encryption"""
    
    def __init__(self, key_file: str = '.encryption.key'):
        self.key_file = Path(key_file)
        self.key = self._load_or_generate_key()
        self.cipher = Fernet(self.key)
    
    def _load_or_generate_key(self) -> bytes:
        """Load existing key or generate new one"""
        if self.key_file.exists():
            try:
                with open(self.key_file, 'rb') as f:
                    key = f.read()
                print(f"‚úÖ Loaded encryption key from {self.key_file}")
                return key
            except Exception as e:
                print(f"‚ùå Error loading key: {e}")
        
        # Generate new key
        print("üîë Generating new encryption key...")
        key = Fernet.generate_key()
        
        # Save key securely
        try:
            with open(self.key_file, 'wb') as f:
                f.write(key)
            
            # Set restrictive permissions (Unix)
            try:
                os.chmod(self.key_file, 0o600)  # Owner read/write only
            except:
                pass
            
            print(f"‚úÖ Generated and saved new encryption key to {self.key_file}")
            return key
            
        except Exception as e:
            print(f"‚ùå Error saving key: {e}")
            return key
    
    def _derive_key_from_password(self, password: str, salt: bytes = None) -> bytes:
        """Derive encryption key from password using PBKDF2"""
        if salt is None:
            salt = os.urandom(16)  # Generate random salt
        
        kdf = PBKDF2HMAC(
            algorithm=hashes.SHA256(),
            length=32,
            salt=salt,
            iterations=100000,
        )
        
        key = base64.urlsafe_b64encode(kdf.derive(password.encode()))
        return key, salt
    
    def encrypt_file(self, input_file: str, output_file: str = None, 
                    remove_original: bool = False) -> bool:
        """
        Encrypt a file
        
        Args:
            input_file: File to encrypt
            output_file: Output encrypted file (default: input_file + .enc)
            remove_original: Whether to remove original file after encryption
        
        Returns:
            True if successful, False otherwise
        """
        input_path = Path(input_file)
        
        if not input_path.exists():
            print(f"‚ùå File not found: {input_file}")
            return False
        
        if output_file is None:
            output_file = str(input_path) + '.enc'
        
        output_path = Path(output_file)
        
        try:
            # Read file content
            with open(input_path, 'rb') as f:
                file_data = f.read()
            
            # Encrypt data
            encrypted_data = self.cipher.encrypt(file_data)
            
            # Write encrypted file
            with open(output_path, 'wb') as f:
                # Store metadata (for password-based encryption)
                f.write(encrypted_data)
            
            print(f"‚úÖ Encrypted {input_file} -> {output_file}")
            print(f"   Original size: {len(file_data):,} bytes")
            print(f"   Encrypted size: {len(encrypted_data):,} bytes")
            
            # Remove original if requested
            if remove_original:
                input_path.unlink()
                print(f"üóëÔ∏è  Removed original file: {input_file}")
            
            return True
            
        except Exception as e:
            print(f"‚ùå Error encrypting file: {e}")
            return False
    
    def decrypt_file(self, input_file: str, output_file: str = None,
                    remove_encrypted: bool = False) -> bool:
        """
        Decrypt a file
        
        Args:
            input_file: Encrypted file to decrypt
            output_file: Output decrypted file
            remove_encrypted: Whether to remove encrypted file after decryption
        
        Returns:
            True if successful, False otherwise
        """
        input_path = Path(input_file)
        
        if not input_path.exists():
            print(f"‚ùå File not found: {input_file}")
            return False
        
        if output_file is None:
            # Remove .enc extension if present
            if input_path.suffix == '.enc':
                output_file = str(input_path.with_suffix(''))
            else:
                output_file = str(input_path) + '.dec'
        
        output_path = Path(output_file)
        
        try:
            # Read encrypted data
            with open(input_path, 'rb') as f:
                encrypted_data = f.read()
            
            # Decrypt data
            decrypted_data = self.cipher.decrypt(encrypted_data)
            
            # Write decrypted file
            with open(output_path, 'wb') as f:
                f.write(decrypted_data)
            
            print(f"‚úÖ Decrypted {input_file} -> {output_file}")
            print(f"   Encrypted size: {len(encrypted_data):,} bytes")
            print(f"   Decrypted size: {len(decrypted_data):,} bytes")
            
            # Remove encrypted file if requested
            if remove_encrypted:
                input_path.unlink()
                print(f"üóëÔ∏è  Removed encrypted file: {input_file}")
            
            return True
            
        except Exception as e:
            print(f"‚ùå Error decrypting file: {e}")
            return False
    
    def encrypt_string(self, plaintext: str) -> str:
        """Encrypt a string and return base64 encoded result"""
        encrypted = self.cipher.encrypt(plaintext.encode())
        return base64.urlsafe_b64encode(encrypted).decode()
    
    def decrypt_string(self, encrypted_text: str) -> str:
        """Decrypt a base64 encoded string"""
        encrypted = base64.urlsafe_b64decode(encrypted_text.encode())
        decrypted = self.cipher.decrypt(encrypted)
        return decrypted.decode()
    
    def encrypt_sensitive_data(self, data: dict, output_file: str) -> bool:
        """
        Encrypt sensitive data structure to file
        
        Args:
            data: Dictionary containing sensitive data
            output_file: File to write encrypted data to
        
        Returns:
            True if successful, False otherwise
        """
        try:
            # Convert to JSON
            json_data = json.dumps(data, indent=2)
            
            # Encrypt
            encrypted = self.cipher.encrypt(json_data.encode())
            
            # Write to file
            with open(output_file, 'wb') as f:
                f.write(encrypted)
            
            print(f"‚úÖ Encrypted sensitive data to {output_file}")
            return True
            
        except Exception as e:
            print(f"‚ùå Error encrypting data: {e}")
            return False
    
    def decrypt_sensitive_data(self, input_file: str) -> dict:
        """
        Decrypt sensitive data from file
        
        Args:
            input_file: File containing encrypted data
        
        Returns:
            Decrypted data dictionary or empty dict on error
        """
        try:
            # Read encrypted data
            with open(input_file, 'rb') as f:
                encrypted = f.read()
            
            # Decrypt
            decrypted = self.cipher.decrypt(encrypted)
            
            # Parse JSON
            data = json.loads(decrypted.decode())
            
            print(f"‚úÖ Decrypted sensitive data from {input_file}")
            return data
            
        except Exception as e:
            print(f"‚ùå Error decrypting data: {e}")
            return {}
    
    def create_secure_backup(self, files: list, backup_dir: str, 
                           password: str = None) -> bool:
        """
        Create encrypted backup of sensitive files
        
        Args:
            files: List of files to backup
            backup_dir: Directory to store encrypted backups
            password: Optional password for extra security
        
        Returns:
            True if successful, False otherwise
        """
        backup_path = Path(backup_dir)
        backup_path.mkdir(parents=True, exist_ok=True)
        
        timestamp = datetime.now().strftime("%Y%m%d_%H%M%S")
        backup_info = {
            'timestamp': timestamp,
            'files': [],
            'backup_type': 'secure'
        }
        
        try:
            for file_path in files:
                file_path = Path(file_path)
                if not file_path.exists():
                    print(f"‚ö†Ô∏è  File not found, skipping: {file_path}")
                    continue
                
                # Create encrypted version
                encrypted_name = f"{file_path.name}.enc"
                encrypted_path = backup_path / encrypted_name
                
                if self.encrypt_file(str(file_path), str(encrypted_path)):
                    backup_info['files'].append({
                        'original': str(file_path),
                        'encrypted': str(encrypted_path),
                        'size': file_path.stat().st_size
                    })
            
            # Save backup manifest
            manifest_file = backup_path / f"manifest_{timestamp}.json"
            with open(manifest_file, 'w') as f:
                json.dump(backup_info, f, indent=2)
            
            # Encrypt manifest if password provided
            if password:
                key, salt = self._derive_key_from_password(password)
                cipher = Fernet(key)
                
                with open(manifest_file, 'rb') as f:
                    manifest_data = f.read()
                
                encrypted_manifest = cipher.encrypt(manifest_data)
                
                with open(manifest_file.with_suffix('.enc'), 'wb') as f:
                    f.write(salt + encrypted_manifest)
                
                manifest_file.unlink()  # Remove plain manifest
            
            print(f"‚úÖ Created secure backup with {len(backup_info['files'])} files")
            return True
            
        except Exception as e:
            print(f"‚ùå Error creating secure backup: {e}")
            return False

# Banking-specific encryption
class BankingEncryptor(FileEncryptor):
    """Encryption specialized for banking data"""
    
    SENSITIVE_FIELDS = [
        'password', 'pin', 'ssn', 'credit_card', 
        'account_number', 'routing_number', 'balance'
    ]
    
    def encrypt_sensitive_fields(self, data: dict) -> dict:
        """
        Encrypt only sensitive fields in a dictionary
        
        Args:
            data: Dictionary potentially containing sensitive fields
        
        Returns:
            Dictionary with sensitive fields encrypted
        """
        encrypted_data = data.copy()
        
        for key, value in data.items():
            if key.lower() in self.SENSITIVE_FIELDS and value:
                # Encrypt the value
                encrypted_data[key] = self.encrypt_string(str(value))
        
        return encrypted_data
    
    def decrypt_sensitive_fields(self, data: dict) -> dict:
        """
        Decrypt sensitive fields in a dictionary
        
        Args:
            data: Dictionary with encrypted sensitive fields
        
        Returns:
            Dictionary with sensitive fields decrypted
        """
        decrypted_data = data.copy()
        
        for key, value in data.items():
            if key.lower() in self.SENSITIVE_FIELDS and value:
                try:
                    # Try to decrypt
                    decrypted_data[key] = self.decrypt_string(str(value))
                except:
                    # If decryption fails, keep original (might not be encrypted)
                    pass
        
        return decrypted_data
    
    def encrypt_account_data(self, account_data: dict) -> dict:
        """Encrypt sensitive account data"""
        encrypted = self.encrypt_sensitive_fields(account_data)
        encrypted['_encrypted'] = True
        encrypted['_encryption_timestamp'] = datetime.now().isoformat()
        return encrypted
    
    def decrypt_account_data(self, encrypted_data: dict) -> dict:
        """Decrypt sensitive account data"""
        if encrypted_data.get('_encrypted'):
            return self.decrypt_sensitive_fields(encrypted_data)
        return encrypted_data

# Usage
encryptor = BankingEncryptor()

# Encrypt sensitive data
account = {
    'account_number': '1234567890',
    'routing_number': '021000021',
    'balance': 1500.00,
    'owner': 'John Doe',
    'pin': '1234'  # This will be encrypted
}

encrypted_account = encryptor.encrypt_account_data(account)
print(f"Encrypted account: {encrypted_account}")

# Save encrypted account to file
encryptor.encrypt_sensitive_data(encrypted_account, 'data/accounts/acc123.enc')

# Decrypt when needed
decrypted_account = encryptor.decrypt_account_data(encrypted_account)
print(f"Decrypted PIN: {decrypted_account.get('pin')}")
        </pre>
    </div>

    <h3>Step 2: File System Monitoring</h3>
    
    <b>Real-time File System Monitor</b>
    <div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
import time
import hashlib
from watchdog.observers import Observer
from watchdog.events import FileSystemEventHandler
from threading import Thread

class FileSystemMonitor:
    """Monitor file system for changes and suspicious activity"""
    
    def __init__(self, watch_dir: str = 'data', log_file: str = 'logs/file_monitor.log'):
        self.watch_dir = Path(watch_dir)
        self.log_file = Path(log_file)
        self.observer = Observer()
        self.running = False
        
        # File hashes for change detection
        self.file_hashes = {}
        
        # Suspicious patterns
        self.suspicious_patterns = [
            '.tmp$', '.bak$', 'shadow$', 'passwd$',  # Suspicious filenames
            '\.(exe|bat|sh|py)$',                    # Executable files in data dir
            '.*[0-9]{16}.*',                         # Possible credit card numbers
            '.*[0-9]{3}-[0-9]{2}-[0-9]{4}.*',        # Possible SSN
        ]
        
        # Create log directory
        self.log_file.parent.mkdir(parents=True, exist_ok=True)
    
    def start(self):
        """Start monitoring file system"""
        if self.running:
            return
        
        print(f"üëÅÔ∏è  Starting file system monitor on {self.watch_dir}")
        
        # Initial scan
        self._initial_scan()
        
        # Set up event handler
        event_handler = FileChangeHandler(self)
        self.observer.schedule(event_handler, str(self.watch_dir), recursive=True)
        
        # Start observer
        self.observer.start()
        self.running = True
        
        # Start background thread for periodic scans
        self.scan_thread = Thread(target=self._periodic_scan, daemon=True)
        self.scan_thread.start()
        
        print("‚úÖ File system monitor started")
    
    def stop(self):
        """Stop monitoring"""
        if not self.running:
            return
        
        self.running = False
        self.observer.stop()
        self.observer.join()
        print("üõë File system monitor stopped")
    
    def _initial_scan(self):
        """Perform initial scan of directory"""
        print(f"üîç Performing initial scan of {self.watch_dir}")
        
        file_count = 0
        for file_path in self.watch_dir.rglob('*'):
            if file_path.is_file():
                file_hash = self._calculate_file_hash(file_path)
                self.file_hashes[str(file_path)] = {
                    'hash': file_hash,
                    'size': file_path.stat().st_size,
                    'mtime': file_path.stat().st_mtime,
                    'scanned': time.time()
                }
                file_count += 1
        
        print(f"‚úÖ Initial scan complete: {file_count} files indexed")
    
    def _periodic_scan(self):
        """Perform periodic integrity scans"""
        while self.running:
            time.sleep(300)  # Scan every 5 minutes
            
            if not self.running:
                break
            
            try:
                self._integrity_scan()
            except Exception as e:
                self._log_event('ERROR', f"Periodic scan failed: {e}")
    
    def _integrity_scan(self):
        """Scan for file changes and integrity issues"""
        current_files = set()
        
        for file_path in self.watch_dir.rglob('*'):
            if file_path.is_file():
                file_str = str(file_path)
                current_files.add(file_str)
                
                # Check if file is new
                if file_str not in self.file_hashes:
                    self._log_event('CREATE', f"New file detected: {file_path}")
                    self._analyze_file(file_path)
                    
                    # Add to index
                    file_hash = self._calculate_file_hash(file_path)
                    self.file_hashes[file_str] = {
                        'hash': file_hash,
                        'size': file_path.stat().st_size,
                        'mtime': file_path.stat().st_mtime,
                        'scanned': time.time()
                    }
                
                else:
                    # Check for modifications
                    old_info = self.file_hashes[file_str]
                    current_mtime = file_path.stat().st_mtime
                    
                    if current_mtime > old_info['mtime']:
                        # File modified - check hash
                        current_hash = self._calculate_file_hash(file_path)
                        
                        if current_hash != old_info['hash']:
                            self._log_event('MODIFY', f"File modified: {file_path}")
                            self._analyze_file(file_path)
                            
                            # Update index
                            self.file_hashes[file_str] = {
                                'hash': current_hash,
                                'size': file_path.stat().st_size,
                                'mtime': current_mtime,
                                'scanned': time.time()
                            }
        
        # Check for deleted files
        indexed_files = set(self.file_hashes.keys())
        deleted_files = indexed_files - current_files
        
        for deleted_file in deleted_files:
            self._log_event('DELETE', f"File deleted: {deleted_file}")
            del self.file_hashes[deleted_file]
    
    def _analyze_file(self, file_path: Path):
        """Analyze file for suspicious content"""
        # Check filename
        filename = file_path.name
        for pattern in self.suspicious_patterns:
            import re
            if re.search(pattern, filename, re.IGNORECASE):
                self._log_event('SUSPICIOUS', 
                              f"Suspicious filename: {filename} (matched: {pattern})")
        
        # Check file size (unusually large or small)
        file_size = file_path.stat().st_size
        
        if file_size == 0:
            self._log_event('WARNING', f"Empty file: {file_path}")
        elif file_size > 100 * 1024 * 1024:  # 100MB
            self._log_event('WARNING', f"Very large file: {file_path} ({file_size/1024/1024:.1f}MB)")
        
        # Check file extension
        if file_path.suffix.lower() in ['.exe', '.bat', '.sh', '.py']:
            self._log_event('WARNING', 
                          f"Executable file in data directory: {file_path}")
    
    def _calculate_file_hash(self, file_path: Path) -> str:
        """Calculate SHA-256 hash of file"""
        sha256 = hashlib.sha256()
        
        try:
            with open(file_path, 'rb') as f:
                for chunk in iter(lambda: f.read(4096), b''):
                    sha256.update(chunk)
        except:
            return 'error'
        
        return sha256.hexdigest()
    
    def _log_event(self, event_type: str, message: str):
        """Log file system event"""
        timestamp = datetime.now().strftime('%Y-%m-%d %H:%M:%S')
        log_entry = f"{timestamp} | {event_type:10} | {message}\n"
        
        # Write to log file
        try:
            with open(self.log_file, 'a') as f:
                f.write(log_entry)
        except:
            pass
        
        # Also print to console for important events
        if event_type in ['SUSPICIOUS', 'ERROR', 'DELETE']:
            print(f"üìÅ {log_entry.strip()}")
    
    def get_file_statistics(self) -> dict:
        """Get file system statistics"""
        total_size = 0
        file_types = {}
        
        for file_info in self.file_hashes.values():
            total_size += file_info['size']
            
            # Count by extension (simplified)
            ext = 'no_extension'
            if '.' in file_info.get('path', ''):
                ext = file_info['path'].split('.')[-1].lower()
            
            file_types[ext] = file_types.get(ext, 0) + 1
        
        return {
            'total_files': len(self.file_hashes),
            'total_size': total_size,
            'total_size_human': self._format_size(total_size),
            'file_types': file_types,
            'last_scan': time.time()
        }
    
    def _format_size(self, size_bytes: int) -> str:
        """Format size in human-readable format"""
        for unit in ['B', 'KB', 'MB', 'GB']:
            if size_bytes < 1024.0:
                return f"{size_bytes:.1f} {unit}"
            size_bytes /= 1024.0
        return f"{size_bytes:.1f} TB"
    
    def check_integrity(self, file_path: str) -> bool:
        """Check integrity of a specific file"""
        file_path = Path(file_path)
        
        if not file_path.exists():
            return False
        
        if str(file_path) not in self.file_hashes:
            return False
        
        expected_hash = self.file_hashes[str(file_path)]['hash']
        current_hash = self._calculate_file_hash(file_path)
        
        return expected_hash == current_hash

class FileChangeHandler(FileSystemEventHandler):
    """Handle file system events"""
    
    def __init__(self, monitor: FileSystemMonitor):
        self.monitor = monitor
    
    def on_created(self, event):
        if not event.is_directory:
            self.monitor._log_event('CREATE', f"File created: {event.src_path}")
            self.monitor._analyze_file(Path(event.src_path))
    
    def on_modified(self, event):
        if not event.is_directory:
            self.monitor._log_event('MODIFY', f"File modified: {event.src_path}")
    
    def on_deleted(self, event):
        if not event.is_directory:
            self.monitor._log_event('DELETE', f"File deleted: {event.src_path}")
    
    def on_moved(self, event):
        if not event.is_directory:
            self.monitor._log_event('MOVE', 
                                  f"File moved: {event.src_path} -> {event.dest_path}")

# Usage
monitor = FileSystemMonitor(watch_dir='data', log_file='logs/file_monitor.log')

# Start monitoring
monitor.start()

# Let it run for a while
time.sleep(30)

# Get statistics
stats = monitor.get_file_statistics()
print(f"Files being monitored: {stats['total_files']}")
print(f"Total size: {stats['total_size_human']}")

# Check specific file integrity
integrity_ok = monitor.check_integrity('data/accounts.json')
print(f"File integrity: {'‚úÖ' if integrity_ok else '‚ùå'}")

# Stop monitoring
monitor.stop()
        </pre>
    </div>

    <h3>Step 3: Cloud Storage Integration</h3>
    
    <b>Cloud Backup System</b>
    <div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
import boto3  # AWS S3
from google.cloud import storage  # Google Cloud Storage
from azure.storage.blob import BlobServiceClient  # Azure Blob Storage
from typing import Optional, Dict, List
import tempfile

class CloudStorageManager:
    """Manage cloud storage for backups and file sharing"""
    
    def __init__(self, cloud_provider: str = 'aws', config_file: str = 'config/cloud_config.json'):
        self.cloud_provider = cloud_provider.lower()
        self.config = self._load_config(config_file)
        self.client = self._initialize_client()
    
    def _load_config(self, config_file: str) -> Dict:
        """Load cloud configuration"""
        config_path = Path(config_file)
        
        default_config = {
            'aws': {
                'access_key': '',
                'secret_key': '',
                'region': 'us-east-1',
                'bucket': 'banking-backups'
            },
            'gcp': {
                'credentials_file': 'config/gcp_credentials.json',
                'bucket': 'banking-backups'
            },
            'azure': {
                'connection_string': '',
                'container': 'banking-backups'
            }
        }
        
        if config_path.exists():
            try:
                with open(config_path, 'r') as f:
                    user_config = json.load(f)
                
                # Merge with defaults
                for provider in default_config:
                    if provider in user_config:
                        default_config[provider].update(user_config[provider])
                
                return default_config
                
            except Exception as e:
                print(f"‚ùå Error loading cloud config: {e}")
        
        return default_config
    
    def _initialize_client(self):
        """Initialize cloud storage client based on provider"""
        try:
            if self.cloud_provider == 'aws':
                return self._init_aws_client()
            elif self.cloud_provider == 'gcp':
                return self._init_gcp_client()
            elif self.cloud_provider == 'azure':
                return self._init_azure_client()
            else:
                raise ValueError(f"Unsupported cloud provider: {self.cloud_provider}")
                
        except Exception as e:
            print(f"‚ùå Error initializing cloud client: {e}")
            return None
    
    def _init_aws_client(self):
        """Initialize AWS S3 client"""
        config = self.config['aws']
        
        if not config.get('access_key') or not config.get('secret_key'):
            print("‚ö†Ô∏è  AWS credentials not configured")
            return None
        
        session = boto3.Session(
            aws_access_key_id=config['access_key'],
            aws_secret_access_key=config['secret_key'],
            region_name=config['region']
        )
        
        return session.client('s3')
    
    def _init_gcp_client(self):
        """Initialize Google Cloud Storage client"""
        config = self.config['gcp']
        credentials_file = config.get('credentials_file')
        
        if not credentials_file or not Path(credentials_file).exists():
            print("‚ö†Ô∏è  GCP credentials file not found")
            return None
        
        return storage.Client.from_service_account_json(credentials_file)
    
    def _init_azure_client(self):
        """Initialize Azure Blob Storage client"""
        config = self.config['azure']
        connection_string = config.get('connection_string')
        
        if not connection_string:
            print("‚ö†Ô∏è  Azure connection string not configured")
            return None
        
        return BlobServiceClient.from_connection_string(connection_string)
    
    def upload_file(self, local_file: str, cloud_path: str = None, 
                   encrypt: bool = True) -> bool:
        """
        Upload file to cloud storage
        
        Args:
            local_file: Local file path to upload
            cloud_path: Path in cloud storage (defaults to filename)
            encrypt: Whether to encrypt before uploading
        
        Returns:
            True if successful, False otherwise
        """
        if self.client is None:
            print("‚ùå Cloud client not initialized")
            return False
        
        local_path = Path(local_file)
        if not local_path.exists():
            print(f"‚ùå Local file not found: {local_file}")
            return False
        
        try:
            # Encrypt file if requested
            if encrypt:
                encryptor = FileEncryptor()
                with tempfile.NamedTemporaryFile(suffix='.enc', delete=False) as tmp:
                    tmp_file = tmp.name
                
                if not encryptor.encrypt_file(str(local_path), tmp_file):
                    print("‚ùå Failed to encrypt file for upload")
                    return False
                
                upload_path = Path(tmp_file)
            else:
                upload_path = local_path
            
            # Determine cloud path
            if cloud_path is None:
                cloud_path = local_path.name
                if encrypt:
                    cloud_path += '.enc'
            
            # Upload based on provider
            if self.cloud_provider == 'aws':
                bucket = self.config['aws']['bucket']
                self.client.upload_file(str(upload_path), bucket, cloud_path)
                
            elif self.cloud_provider == 'gcp':
                bucket_name = self.config['gcp']['bucket']
                bucket = self.client.bucket(bucket_name)
                blob = bucket.blob(cloud_path)
                blob.upload_from_filename(str(upload_path))
                
            elif self.cloud_provider == 'azure':
                container_name = self.config['azure']['container']
                blob_client = self.client.get_blob_client(
                    container=container_name,
                    blob=cloud_path
                )
                with open(upload_path, 'rb') as data:
                    blob_client.upload_blob(data, overwrite=True)
            
            # Clean up temporary encrypted file
            if encrypt and upload_path != local_path:
                upload_path.unlink()
            
            print(f"‚òÅÔ∏è  Uploaded {local_file} to cloud storage")
            print(f"   Cloud path: {cloud_path}")
            print(f"   Encrypted: {encrypt}")
            
            # Log upload
            self._log_cloud_operation('upload', local_file, cloud_path)
            
            return True
            
        except Exception as e:
            print(f"‚ùå Error uploading to cloud: {e}")
            return False
    
    def download_file(self, cloud_path: str, local_file: str = None,
                     decrypt: bool = True) -> bool:
        """
        Download file from cloud storage
        
        Args:
            cloud_path: Path in cloud storage
            local_file: Local file path to save to
            decrypt: Whether to decrypt after downloading
        
        Returns:
            True if successful, False otherwise
        """
        if self.client is None:
            print("‚ùå Cloud client not initialized")
            return False
        
        try:
            # Determine local file path
            if local_file is None:
                local_file = Path(cloud_path).name
                if decrypt and local_file.endswith('.enc'):
                    local_file = local_file[:-4]  # Remove .enc
            
            local_path = Path(local_file)
            local_path.parent.mkdir(parents=True, exist_ok=True)
            
            # Download based on provider
            if self.cloud_provider == 'aws':
                bucket = self.config['aws']['bucket']
                self.client.download_file(bucket, cloud_path, str(local_path))
                
            elif self.cloud_provider == 'gcp':
                bucket_name = self.config['gcp']['bucket']
                bucket = self.client.bucket(bucket_name)
                blob = bucket.blob(cloud_path)
                blob.download_to_filename(str(local_path))
                
            elif self.cloud_provider == 'azure':
                container_name = self.config['azure']['container']
                blob_client = self.client.get_blob_client(
                    container=container_name,
                    blob=cloud_path
                )
                with open(local_path, 'wb') as data:
                    download_stream = blob_client.download_blob()
                    data.write(download_stream.readall())
            
            print(f"‚¨áÔ∏è  Downloaded {cloud_path} from cloud storage")
            print(f"   Local path: {local_file}")
            
            # Decrypt if needed
            if decrypt and local_path.suffix == '.enc':
                encryptor = FileEncryptor()
                decrypted_file = str(local_path.with_suffix(''))
                
                if encryptor.decrypt_file(str(local_path), decrypted_file, 
                                        remove_encrypted=True):
                    print(f"   Decrypted to: {decrypted_file}")
                else:
                    print("‚ö†Ô∏è  Failed to decrypt downloaded file")
            
            # Log download
            self._log_cloud_operation('download', local_file, cloud_path)
            
            return True
            
        except Exception as e:
            print(f"‚ùå Error downloading from cloud: {e}")
            return False
    
    def list_files(self, prefix: str = '') -> List[Dict]:
        """
        List files in cloud storage
        
        Args:
            prefix: Prefix to filter files
        
        Returns:
            List of file information dictionaries
        """
        if self.client is None:
            return []
        
        files = []
        
        try:
            if self.cloud_provider == 'aws':
                bucket = self.config['aws']['bucket']
                response = self.client.list_objects_v2(
                    Bucket=bucket,
                    Prefix=prefix
                )
                
                for obj in response.get('Contents', []):
                    files.append({
                        'name': obj['Key'],
                        'size': obj['Size'],
                        'last_modified': obj['LastModified'].isoformat(),
                        'storage_class': obj.get('StorageClass', 'STANDARD')
                    })
                    
            elif self.cloud_provider == 'gcp':
                bucket_name = self.config['gcp']['bucket']
                bucket = self.client.bucket(bucket_name)
                blobs = bucket.list_blobs(prefix=prefix)
                
                for blob in blobs:
                    files.append({
                        'name': blob.name,
                        'size': blob.size,
                        'last_modified': blob.updated.isoformat(),
                        'storage_class': blob.storage_class
                    })
                    
            elif self.cloud_provider == 'azure':
                container_name = self.config['azure']['container']
                container_client = self.client.get_container_client(container_name)
                blobs = container_client.list_blobs(name_starts_with=prefix)
                
                for blob in blobs:
                    files.append({
                        'name': blob.name,
                        'size': blob.size,
                        'last_modified': blob.last_modified.isoformat()
                    })
            
            print(f"üìÅ Listed {len(files)} files with prefix '{prefix}'")
            return files
            
        except Exception as e:
            print(f"‚ùå Error listing cloud files: {e}")
            return []
    
    def delete_file(self, cloud_path: str) -> bool:
        """
        Delete file from cloud storage
        
        Args:
            cloud_path: Path in cloud storage
        
        Returns:
            True if successful, False otherwise
        """
        if self.client is None:
            return False
        
        try:
            if self.cloud_provider == 'aws':
                bucket = self.config['aws']['bucket']
                self.client.delete_object(Bucket=bucket, Key=cloud_path)
                
            elif self.cloud_provider == 'gcp':
                bucket_name = self.config['gcp']['bucket']
                bucket = self.client.bucket(bucket_name)
                blob = bucket.blob(cloud_path)
                blob.delete()
                
            elif self.cloud_provider == 'azure':
                container_name = self.config['azure']['container']
                blob_client = self.client.get_blob_client(
                    container=container_name,
                    blob=cloud_path
                )
                blob_client.delete_blob()
            
            print(f"üóëÔ∏è  Deleted {cloud_path} from cloud storage")
            
            # Log deletion
            self._log_cloud_operation('delete', '', cloud_path)
            
            return True
            
        except Exception as e:
            print(f"‚ùå Error deleting from cloud: {e}")
            return False
    
    def sync_directory(self, local_dir: str, cloud_prefix: str = '',
                      encrypt: bool = True) -> Dict[str, int]:
        """
        Sync local directory with cloud storage
        
        Args:
            local_dir: Local directory to sync
            cloud_prefix: Prefix for cloud paths
            encrypt: Whether to encrypt files
        
        Returns:
            Dictionary with sync statistics
        """
        local_path = Path(local_dir)
        
        if not local_path.exists() or not local_path.is_dir():
            print(f"‚ùå Local directory not found: {local_dir}")
            return {'uploaded': 0, 'skipped': 0, 'errors': 0}
        
        stats = {'uploaded': 0, 'skipped': 0, 'errors': 0}
        
        # Get existing cloud files
        cloud_files = {f['name'] for f in self.list_files(cloud_prefix)}
        
        # Upload local files
        for file_path in local_path.rglob('*'):
            if file_path.is_file():
                # Determine cloud path
                rel_path = file_path.relative_to(local_path)
                cloud_path = str(Path(cloud_prefix) / rel_path).replace('\\', '/')
                
                # Skip if already exists and hasn't changed
                if cloud_path in cloud_files:
                    # TODO: Compare checksums to see if changed
                    stats['skipped'] += 1
                    continue
                
                # Upload file
                if self.upload_file(str(file_path), cloud_path, encrypt):
                    stats['uploaded'] += 1
                else:
                    stats['errors'] += 1
        
        print(f"üîÑ Directory sync complete:")
        print(f"   Uploaded: {stats['uploaded']} files")
        print(f"   Skipped: {stats['skipped']} files")
        print(f"   Errors: {stats['errors']} files")
        
        return stats
    
    def _log_cloud_operation(self, operation: str, local_file: str, cloud_path: str):
        """Log cloud storage operation"""
        log_entry = {
            'timestamp': datetime.now().isoformat(),
            'operation': operation,
            'local_file': local_file,
            'cloud_path': cloud_path,
            'provider': self.cloud_provider
        }
        
        log_file = Path('logs/cloud_operations.log')
        log_file.parent.mkdir(parents=True, exist_ok=True)
        
        log_data = []
        if log_file.exists():
            try:
                with open(log_file, 'r') as f:
                    log_data = json.load(f)
            except:
                pass
        
        log_data.append(log_entry)
        
        # Keep only last 1000 entries
        if len(log_data) > 1000:
            log_data = log_data[-1000:]
        
        with open(log_file, 'w') as f:
            json.dump(log_data, f, indent=2)

class CloudBackupScheduler:
    """Schedule automatic cloud backups"""
    
    def __init__(self, cloud_manager: CloudStorageManager, 
                 backup_dirs: List[str], schedule: Dict):
        self.cloud_manager = cloud_manager
        self.backup_dirs = backup_dirs
        self.schedule = schedule
        self.running = False
        self.backup_thread = None
    
    def start(self):
        """Start backup scheduler"""
        if self.running:
            return
        
        self.running = True
        self.backup_thread = Thread(target=self._backup_loop, daemon=True)
        self.backup_thread.start()
        
        print("‚è∞ Cloud backup scheduler started")
    
    def stop(self):
        """Stop backup scheduler"""
        self.running = False
        if self.backup_thread:
            self.backup_thread.join(timeout=30)
        
        print("üõë Cloud backup scheduler stopped")
    
    def _backup_loop(self):
        """Main backup loop"""
        while self.running:
            now = datetime.now()
            
            # Check schedule
            if self._should_run_backup(now):
                print(f"‚è∞ Scheduled backup triggered at {now}")
                self._run_backup(now)
            
            # Sleep until next minute
            time.sleep(60)
    
    def _should_run_backup(self, now: datetime) -> bool:
        """Check if backup should run based on schedule"""
        # Daily backup at specified hour
        if 'daily_hour' in self.schedule:
            if now.hour == self.schedule['daily_hour'] and now.minute == 0:
                return True
        
        # Weekly backup on specified day and hour
        if 'weekly_day' in self.schedule and 'weekly_hour' in self.schedule:
            if (now.weekday() == self.schedule['weekly_day'] and 
                now.hour == self.schedule['weekly_hour'] and 
                now.minute == 0):
                return True
        
        # Monthly backup on specified day and hour
        if 'monthly_day' in self.schedule and 'monthly_hour' in self.schedule:
            if (now.day == self.schedule['monthly_day'] and 
                now.hour == self.schedule['monthly_hour'] and 
                now.minute == 0):
                return True
        
        return False
    
    def _run_backup(self, timestamp: datetime):
        """Run backup to cloud"""
        timestamp_str = timestamp.strftime("%Y%m%d_%H%M%S")
        
        for backup_dir in self.backup_dirs:
            backup_path = Path(backup_dir)
            if not backup_path.exists():
                print(f"‚ö†Ô∏è  Backup directory not found: {backup_dir}")
                continue
            
            # Create zip archive
            with tempfile.NamedTemporaryFile(suffix='.zip', delete=False) as tmp:
                zip_path = tmp.name
            
            # Create zip of directory
            import zipfile
            with zipfile.ZipFile(zip_path, 'w', zipfile.ZIP_DEFLATED) as zipf:
                for file_path in backup_path.rglob('*'):
                    if file_path.is_file():
                        rel_path = file_path.relative_to(backup_path)
                        zipf.write(file_path, rel_path)
            
            # Upload to cloud
            cloud_path = f"backups/{backup_path.name}/{timestamp_str}.zip"
            success = self.cloud_manager.upload_file(
                zip_path, 
                cloud_path,
                encrypt=True
            )
            
            # Clean up temp file
            Path(zip_path).unlink()
            
            if success:
                print(f"‚úÖ Cloud backup completed: {backup_dir} -> {cloud_path}")
            else:
                print(f"‚ùå Cloud backup failed: {backup_dir}")

# Usage
# Configure cloud (in practice, these would be in config file)
cloud_config = {
    'aws': {
        'access_key': 'YOUR_ACCESS_KEY',
        'secret_key': 'YOUR_SECRET_KEY',
        'region': 'us-east-1',
        'bucket': 'banking-backups-2024'
    }
}

# Save config
config_path = Path('config/cloud_config.json')
config_path.parent.mkdir(parents=True, exist_ok=True)
with open(config_path, 'w') as f:
    json.dump(cloud_config, f, indent=2)

# Create cloud manager
cloud_manager = CloudStorageManager(cloud_provider='aws')

# Upload important files
cloud_manager.upload_file('data/accounts.json', 'encrypted/accounts.json.enc', encrypt=True)
cloud_manager.upload_file('data/transactions.csv', 'backups/transactions.csv', encrypt=False)

# List files
files = cloud_manager.list_files('backups/')
for file in files[:5]:  # Show first 5
    print(f"{file['name']} - {file['size']:,} bytes")

# Schedule automatic backups
scheduler = CloudBackupScheduler(
    cloud_manager=cloud_manager,
    backup_dirs=['data/active', 'data/config'],
    schedule={
        'daily_hour': 2,  # 2 AM daily
        'weekly_day': 6,  # Saturday (0=Monday, 6=Sunday)
        'weekly_hour': 3,  # 3 AM
        'monthly_day': 1,  # 1st of month
        'monthly_hour': 4  # 4 AM
    }
)

# Start scheduler (in production)
# scheduler.start()
        </pre>
    </div>

    <h3>Step 4: Integrated Banking File Manager</h3>
    
    <b>Complete File Management System for Banking</b>
    <div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
from typing import Dict, List, Optional, Any
from enum import Enum

class FileCategory(Enum):
    """Categories for banking files"""
    ACCOUNTS = "accounts"
    TRANSACTIONS = "transactions"
    USERS = "users"
    CONFIG = "config"
    LOGS = "logs"
    BACKUPS = "backups"
    REPORTS = "reports"
    TEMP = "temp"

class BankingFileManager:
    """
    Complete file management system for banking application
    Integrates all file operations with banking-specific logic
    """
    
    def __init__(self, base_dir: str = 'banking_data'):
        self.base_dir = Path(base_dir)
        self.base_dir.mkdir(parents=True, exist_ok=True)
        
        # Initialize components
        self.safe_ops = SafeFileOperations()
        self.csv_handler = BankingCSVHandler()
        self.json_manager = JSONConfigManager(
            config_file=self.base_dir / 'config' / 'file_manager.json',
            default_config=self._get_default_config()
        )
        self.encryptor = BankingEncryptor()
        self.backup_system = BackupSystem(
            data_dir=str(self.base_dir / 'active'),
            backup_dir=str(self.base_dir / 'backups')
        )
        
        # File organization
        self.category_paths = {
            FileCategory.ACCOUNTS: self.base_dir / 'active' / 'accounts',
            FileCategory.TRANSACTIONS: self.base_dir / 'active' / 'transactions',
            FileCategory.USERS: self.base_dir / 'active' / 'users',
            FileCategory.CONFIG: self.base_dir / 'config',
            FileCategory.LOGS: self.base_dir / 'logs',
            FileCategory.BACKUPS: self.base_dir / 'backups',
            FileCategory.REPORTS: self.base_dir / 'reports',
            FileCategory.TEMP: self.base_dir / 'temp'
        }
        
        # Create directory structure
        self._create_directory_structure()
        
        # Initialize file monitors
        self.monitors = {}
        self._start_file_monitors()
        
        print(f"‚úÖ Banking File Manager initialized at {self.base_dir}")
    
    def _get_default_config(self) -> Dict:
        """Get default configuration for file manager"""
        return {
            'version': '1.0',
            'encryption_enabled': True,
            'backup_schedule': {
                'daily': True,
                'daily_time': '02:00',
                'weekly': True,
                'weekly_day': 'sunday',
                'weekly_time': '03:00'
            },
            'retention_policy': {
                'transactions_days': 365,
                'logs_days': 90,
                'backups_days': 30
            },
            'compression_enabled': True,
            'integrity_checks_enabled': True,
            'file_categories': {
                category.value: str(path) 
                for category, path in self.category_paths.items()
            }
        }
    
    def _create_directory_structure(self):
        """Create the complete directory structure"""
        for category, path in self.category_paths.items():
            path.mkdir(parents=True, exist_ok=True)
            
            # Create subdirectories for certain categories
            if category == FileCategory.TRANSACTIONS:
                # Create year/month subdirectories
                current_year = datetime.now().year
                for year in range(current_year - 1, current_year + 2):
                    year_dir = path / str(year)
                    year_dir.mkdir(exist_ok=True)
                    for month in range(1, 13):
                        month_dir = year_dir / f"{month:02d}"
                        month_dir.mkdir(exist_ok=True)
            
            elif category == FileCategory.BACKUPS:
                # Create backup subdirectories
                for subdir in ['hourly', 'daily', 'weekly', 'monthly']:
                    (path / subdir).mkdir(exist_ok=True)
            
            elif category == FileCategory.REPORTS:
                # Create report subdirectories
                for subdir in ['statements', 'summaries', 'compliance', 'exports']:
                    (path / subdir).mkdir(exist_ok=True)
        
        print("üìÅ Directory structure created")
    
    def _start_file_monitors(self):
        """Start file monitors for important directories"""
        monitor_dirs = [
            FileCategory.ACCOUNTS,
            FileCategory.TRANSACTIONS,
            FileCategory.CONFIG
        ]
        
        for category in monitor_dirs:
            monitor = FileSystemMonitor(
                watch_dir=str(self.category_paths[category]),
                log_file=str(self.category_paths[FileCategory.LOGS] / f'{category.value}_monitor.log')
            )
            monitor.start()
            self.monitors[category] = monitor
        
        print("üëÅÔ∏è  File monitors started")
    
    def save_account(self, account_data: Dict) -> bool:
        """Save account data with encryption"""
        try:
            # Encrypt sensitive data
            if self.json_manager.get('encryption_enabled', True):
                account_data = self.encryptor.encrypt_account_data(account_data)
            
            # Determine file path
            account_id = account_data.get('account_id', 'unknown')
            filename = f"{account_id}.json"
            filepath = self.category_paths[FileCategory.ACCOUNTS] / filename
            
            # Save to file
            with open(filepath, 'w') as f:
                json.dump(account_data, f, indent=2)
            
            print(f"‚úÖ Account saved: {account_id}")
            
            # Create backup
            self._create_transaction_backup('account_save', account_id)
            
            return True
            
        except Exception as e:
            print(f"‚ùå Error saving account: {e}")
            return False
    
    def load_account(self, account_id: str) -> Optional[Dict]:
        """Load account data with decryption"""
        try:
            filename = f"{account_id}.json"
            filepath = self.category_paths[FileCategory.ACCOUNTS] / filename
            
            if not filepath.exists():
                print(f"‚ùå Account not found: {account_id}")
                return None
            
            # Load from file
            with open(filepath, 'r') as f:
                account_data = json.load(f)
            
            # Decrypt if encrypted
            if account_data.get('_encrypted'):
                account_data = self.encryptor.decrypt_account_data(account_data)
            
            print(f"‚úÖ Account loaded: {account_id}")
            return account_data
            
        except Exception as e:
            print(f"‚ùå Error loading account: {e}")
            return None
    
    def save_transaction(self, transaction_data: Dict) -> bool:
        """Save transaction to appropriate file based on date"""
        try:
            # Extract date
            timestamp = transaction_data.get('timestamp', datetime.now().isoformat())
            trans_date = datetime.fromisoformat(timestamp.replace('Z', '+00:00'))
            
            # Determine file path based on date
            year = trans_date.year
            month = trans_date.month
            day = trans_date.day
            
            filename = f"{year}-{month:02d}-{day:02d}.csv"
            filepath = (
                self.category_paths[FileCategory.TRANSACTIONS] / 
                str(year) / f"{month:02d}" / filename
            )
            
            # Read existing transactions
            existing_transactions = []
            if filepath.exists():
                existing_transactions = self.csv_handler.read_csv(str(filepath))
            
            # Add new transaction
            existing_transactions.append(transaction_data)
            
            # Save back to CSV
            success = self.csv_handler.write_csv(
                str(filepath), 
                existing_transactions,
                fieldnames=list(transaction_data.keys())
            )
            
            if success:
                print(f"‚úÖ Transaction saved: {transaction_data.get('transaction_id')}")
                
                # Update transaction index
                self._update_transaction_index(transaction_data)
                
                # Create backup
                self._create_transaction_backup('transaction_save', 
                                              transaction_data.get('transaction_id'))
            
            return success
            
        except Exception as e:
            print(f"‚ùå Error saving transaction: {e}")
            return False
    
    def get_transactions(self, account_id: str, start_date: datetime = None, 
                        end_date: datetime = None, limit: int = 100) -> List[Dict]:
        """Get transactions for an account within date range"""
        try:
            # Load transaction index
            index_file = self.category_paths[FileCategory.TRANSACTIONS] / 'index.json'
            if not index_file.exists():
                return []
            
            with open(index_file, 'r') as f:
                index = json.load(f)
            
            # Get transaction references for account
            account_refs = index.get(account_id, [])
            
            # Filter by date if provided
            if start_date or end_date:
                filtered_refs = []
                for ref in account_refs:
                    ref_date = datetime.fromisoformat(ref['date'])
                    
                    if start_date and ref_date < start_date:
                        continue
                    if end_date and ref_date > end_date:
                        continue
                    
                    filtered_refs.append(ref)
                account_refs = filtered_refs
            
            # Sort by date (newest first)
            account_refs.sort(key=lambda x: x['date'], reverse=True)
            
            # Load transactions
            transactions = []
            for ref in account_refs[:limit]:  # Apply limit
                filepath = Path(ref['file'])
                if filepath.exists():
                    # Find the specific transaction in the file
                    file_transactions = self.csv_handler.read_csv(str(filepath))
                    for txn in file_transactions:
                        if txn.get('transaction_id') == ref['transaction_id']:
                            transactions.append(txn)
                            break
            
            print(f"‚úÖ Loaded {len(transactions)} transactions for {account_id}")
            return transactions
            
        except Exception as e:
            print(f"‚ùå Error loading transactions: {e}")
            return []
    
    def _update_transaction_index(self, transaction_data: Dict):
        """Update transaction index for faster searching"""
        try:
            index_file = self.category_paths[FileCategory.TRANSACTIONS] / 'index.json'
            
            # Load existing index
            index = {}
            if index_file.exists():
                with open(index_file, 'r') as f:
                    index = json.load(f)
            
            # Add transaction reference
            account_id = transaction_data.get('account_id')
            transaction_id = transaction_data.get('transaction_id')
            timestamp = transaction_data.get('timestamp')
            
            if account_id and transaction_id:
                if account_id not in index:
                    index[account_id] = []
                
                # Determine file path
                trans_date = datetime.fromisoformat(timestamp.replace('Z', '+00:00'))
                year = trans_date.year
                month = trans_date.month
                day = trans_date.day
                
                filename = f"{year}-{month:02d}-{day:02d}.csv"
                filepath = (
                    self.category_paths[FileCategory.TRANSACTIONS] / 
                    str(year) / f"{month:02d}" / filename
                )
                
                # Add reference
                index[account_id].append({
                    'transaction_id': transaction_id,
                    'date': timestamp,
                    'file': str(filepath)
                })
                
                # Save index
                with open(index_file, 'w') as f:
                    json.dump(index, f, indent=2)
                
        except Exception as e:
            print(f"‚ö†Ô∏è  Error updating transaction index: {e}")
    
    def generate_statement(self, account_id: str, year: int, month: int) -> Optional[Path]:
        """Generate monthly statement for account"""
        try:
            # Get transactions for month
            start_date = datetime(year, month, 1)
            if month == 12:
                end_date = datetime(year + 1, 1, 1)
            else:
                end_date = datetime(year, month + 1, 1)
            
            transactions = self.get_transactions(account_id, start_date, end_date)
            
            if not transactions:
                print(f"‚ö†Ô∏è  No transactions found for {account_id} in {year}-{month}")
                return None
            
            # Calculate summary
            total_deposits = sum(t['amount'] for t in transactions if t['type'] == 'deposit')
            total_withdrawals = sum(t['amount'] for t in transactions if t['type'] == 'withdrawal')
            net_change = total_deposits - total_withdrawals
            
            # Create statement data
            statement = {
                'account_id': account_id,
                'period': f"{year}-{month:02d}",
                'generated': datetime.now().isoformat(),
                'summary': {
                    'starting_balance': 0,  # Would need to calculate
                    'ending_balance': 0,    # Would need to calculate
                    'total_deposits': total_deposits,
                    'total_withdrawals': total_withdrawals,
                    'net_change': net_change,
                    'transaction_count': len(transactions)
                },
                'transactions': transactions
            }
            
            # Save statement
            filename = f"statement_{account_id}_{year}_{month:02d}.json"
            filepath = self.category_paths[FileCategory.REPORTS] / 'statements' / filename
            
            with open(filepath, 'w') as f:
                json.dump(statement, f, indent=2)
            
            # Also generate CSV version
            csv_file = filepath.with_suffix('.csv')
            self.csv_handler.write_csv(str(csv_file), transactions)
            
            print(f"‚úÖ Statement generated: {filename}")
            return filepath
            
        except Exception as e:
            print(f"‚ùå Error generating statement: {e}")
            return None
    
    def _create_transaction_backup(self, operation: str, identifier: str):
        """Create transaction log entry for backup purposes"""
        try:
            log_entry = {
                'timestamp': datetime.now().isoformat(),
                'operation': operation,
                'identifier': identifier,
                'user': os.getenv('USER', 'system')
            }
            
            log_file = self.category_paths[FileCategory.LOGS] / 'transaction_log.json'
            
            log_data = []
            if log_file.exists():
                with open(log_file, 'r') as f:
                    log_data = json.load(f)
            
            log_data.append(log_entry)
            
            # Keep only last 1000 entries
            if len(log_data) > 1000:
                log_data = log_data[-1000:]
            
            with open(log_file, 'w') as f:
                json.dump(log_data, f, indent=2)
                
        except:
            pass  # Don't fail main operation if backup logging fails
    
    def run_maintenance(self):
        """Run maintenance tasks"""
        print("üîß Running file system maintenance...")
        
        tasks_completed = 0
        
        # 1. Archive old transactions
        tasks_completed += self._archive_old_transactions()
        
        # 2. Clean up temporary files
        tasks_completed += self._cleanup_temp_files()
        
        # 3. Compress old logs
        tasks_completed += self._compress_old_logs()
        
        # 4. Verify file integrity
        tasks_completed += self._verify_file_integrity()
        
        # 5. Create backup
        tasks_completed += self._create_maintenance_backup()
        
        print(f"‚úÖ Maintenance complete: {tasks_completed} tasks completed")
    
    def _archive_old_transactions(self) -> int:
        """Archive transactions older than retention period"""
        try:
            retention_days = self.json_manager.get(
                'retention_policy.transactions_days', 
                365
            )
            cutoff_date = datetime.now() - timedelta(days=retention_days)
            
            archive_count = 0
            transactions_dir = self.category_paths[FileCategory.TRANSACTIONS]
            
            # Archive by year/month
            for year_dir in transactions_dir.iterdir():
                if not year_dir.is_dir():
                    continue
                
                year = int(year_dir.name)
                for month_dir in year_dir.iterdir():
                    if not month_dir.is_dir():
                        continue
                    
                    month = int(month_dir.name)
                    
                    # Check if this month is before cutoff
                    month_start = datetime(year, month, 1)
                    if month_start < cutoff_date:
                        # Archive entire month
                        archive_file = (
                            self.category_paths[FileCategory.BACKUPS] / 
                            'archived' / f"transactions_{year}_{month:02d}.zip"
                        )
                        archive_file.parent.mkdir(parents=True, exist_ok=True)
                        
                        # Create zip archive
                        import zipfile
                        with zipfile.ZipFile(archive_file, 'w', zipfile.ZIP_DEFLATED) as zipf:
                            for file_path in month_dir.rglob('*.csv'):
                                rel_path = file_path.relative_to(month_dir)
                                zipf.write(file_path, rel_path)
                        
                        # Remove original files
                        for file_path in month_dir.rglob('*.csv'):
                            file_path.unlink()
                        
                        # Remove empty directories
                        try:
                            month_dir.rmdir()
                        except:
                            pass
                        
                        archive_count += 1
            
            if archive_count > 0:
                print(f"üì¶ Archived {archive_count} months of transactions")
            
            return 1 if archive_count > 0 else 0
            
        except Exception as e:
            print(f"‚ö†Ô∏è  Error archiving transactions: {e}")
            return 0
    
    def _cleanup_temp_files(self) -> int:
        """Clean up temporary files older than 7 days"""
        try:
            temp_dir = self.category_paths[FileCategory.TEMP]
            cutoff_time = time.time() - (7 * 24 * 3600)
            
            cleaned_count = 0
            for file_path in temp_dir.rglob('*'):
                if file_path.is_file():
                    if file_path.stat().st_mtime < cutoff_time:
                        file_path.unlink()
                        cleaned_count += 1
            
            if cleaned_count > 0:
                print(f"üßπ Cleaned up {cleaned_count} temporary files")
            
            return 1 if cleaned_count > 0 else 0
            
        except Exception as e:
            print(f"‚ö†Ô∏è  Error cleaning temp files: {e}")
            return 0
    
    def _compress_old_logs(self) -> int:
        """Compress log files older than 30 days"""
        try:
            logs_dir = self.category_paths[FileCategory.LOGS]
            cutoff_date = datetime.now() - timedelta(days=30)
            
            compressed_count = 0
            
            for log_file in logs_dir.rglob('*.log'):
                # Check if file is old enough
                mtime = datetime.fromtimestamp(log_file.stat().st_mtime)
                if mtime < cutoff_date:
                    # Compress using gzip
                    import gzip
                    compressed_file = log_file.with_suffix('.log.gz')
                    
                    with open(log_file, 'rb') as f_in:
                        with gzip.open(compressed_file, 'wb') as f_out:
                            f_out.writelines(f_in)
                    
                    # Remove original
                    log_file.unlink()
                    compressed_count += 1
            
            if compressed_count > 0:
                print(f"üóúÔ∏è  Compressed {compressed_count} log files")
            
            return 1 if compressed_count > 0 else 0
            
        except Exception as e:
            print(f"‚ö†Ô∏è  Error compressing logs: {e}")
            return 0
    
    def _verify_file_integrity(self) -> int:
        """Verify integrity of important files"""
        try:
            files_to_check = [
                self.category_paths[FileCategory.CONFIG] / 'file_manager.json',
                self.category_paths[FileCategory.TRANSACTIONS] / 'index.json'
            ]
            
            verified_count = 0
            for file_path in files_to_check:
                if file_path.exists():
                    # Calculate hash
                    with open(file_path, 'rb') as f:
                        file_hash = hashlib.sha256(f.read()).hexdigest()
                    
                    # Store or compare with stored hash
                    hash_file = file_path.with_suffix(file_path.suffix + '.sha256')
                    
                    if hash_file.exists():
                        with open(hash_file, 'r') as f:
                            stored_hash = f.read().strip()
                        
                        if file_hash == stored_hash:
                            verified_count += 1
                        else:
                            print(f"‚ùå Integrity check failed: {file_path}")
                    else:
                        # Store new hash
                        with open(hash_file, 'w') as f:
                            f.write(file_hash)
                        verified_count += 1
            
            if verified_count > 0:
                print(f"‚úÖ Verified integrity of {verified_count} important files")
            
            return 1 if verified_count > 0 else 0
            
        except Exception as e:
            print(f"‚ö†Ô∏è  Error verifying file integrity: {e}")
            return 0
    
    def _create_maintenance_backup(self) -> int:
        """Create backup after maintenance"""
        try:
            backup_file = self.backup_system.create_full_backup("Post-maintenance backup")
            if backup_file:
                print(f"üíæ Created maintenance backup: {backup_file.name}")
                return 1
            return 0
            
        except Exception as e:
            print(f"‚ö†Ô∏è  Error creating maintenance backup: {e}")
            return 0
    
    def get_system_status(self) -> Dict[str, Any]:
        """Get system status report"""
        status = {
            'timestamp': datetime.now().isoformat(),
            'base_directory': str(self.base_dir),
            'categories': {},
            'storage_usage': {},
            'last_maintenance': self.json_manager.get('last_maintenance'),
            'encryption_enabled': self.json_manager.get('encryption_enabled', True),
            'monitors_running': len(self.monitors)
        }
        
        # Calculate storage usage by category
        for category, path in self.category_paths.items():
            total_size = 0
            file_count = 0
            
            for file_path in path.rglob('*'):
                if file_path.is_file():
                    total_size += file_path.stat().st_size
                    file_count += 1
            
            status['categories'][category.value] = {
                'path': str(path),
                'file_count': file_count,
                'total_size': total_size,
                'total_size_human': self._format_size(total_size)
            }
        
        # Calculate total storage
        total_size = sum(cat['total_size'] for cat in status['categories'].values())
        status['storage_usage']['total'] = self._format_size(total_size)
        
        return status
    
    def _format_size(self, size_bytes: int) -> str:
        """Format size in human-readable format"""
        for unit in ['B', 'KB', 'MB', 'GB']:
            if size_bytes < 1024.0:
                return f"{size_bytes:.1f} {unit}"
            size_bytes /= 1024.0
        return f"{size_bytes:.1f} TB"

# Usage example
if __name__ == "__main__":
    # Initialize banking file manager
    file_manager = BankingFileManager(base_dir='banking_data')
    
    # Save an account
    account_data = {
        'account_id': 'ACC123456',
        'owner': 'John Doe',
        'account_type': 'checking',
        'balance': 1500.00,
        'pin': '7890',  # Will be encrypted
        'opened_date': '2023-01-15'
    }
    
    file_manager.save_account(account_data)
    
    # Save a transaction
    transaction_data = {
        'transaction_id': 'TXN001',
        'account_id': 'ACC123456',
        'type': 'deposit',
        'amount': 500.00,
        'description': 'ATM deposit',
        'timestamp': datetime.now().isoformat(),
        'balance_after': 2000.00
    }
    
    file_manager.save_transaction(transaction_data)
    
    # Generate statement
    file_manager.generate_statement('ACC123456', 2024, 1)
    
    # Get system status
    status = file_manager.get_system_status()
    print(f" üìä System Status:")
    print(f"   Total files: {sum(cat['file_count'] for cat in status['categories'].values())}")
    print(f"   Total storage: {status['storage_usage']['total']}")
    
    # Run maintenance
    file_manager.run_maintenance()
        </pre>
    </div>

    <h3>Hands-On Exercise: Complete Banking File System</h3>
    
    <b>Task:</b> Create a comprehensive banking file system with all features integrated
    <div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
def create_complete_banking_file_system():
    """
    Create and demonstrate a complete banking file system
    """
    
    print("üè¶ CREATING COMPLETE BANKING FILE SYSTEM")
    print("=" * 60)
    
    # 1. Initialize system
    print("1. Initializing Banking File Manager...")
    banking_fs = BankingFileManager(base_dir='my_bank_data')
    
    # 2. Create sample accounts
    print(" 2. Creating sample accounts...")
    sample_accounts = [
        {
            'account_id': 'CHECK001',
            'owner': 'Alice Johnson',
            'account_type': 'checking',
            'balance': 2500.00,
            'pin': '1234',
            'email': 'alice@email.com',
            'opened_date': '2023-03-15'
        },
        {
            'account_id': 'SAVE001',
            'owner': 'Bob Smith',
            'account_type': 'savings',
            'balance': 5000.00,
            'pin': '5678',
            'email': 'bob@email.com',
            'interest_rate': 0.02,
            'opened_date': '2022-11-20'
        }
    ]
    
    for account in sample_accounts:
        banking_fs.save_account(account)
    
    # 3. Create sample transactions
    print(" 3. Creating sample transactions...")
    
    # Generate transactions for the past 30 days
    import random
    from datetime import timedelta
    
    transaction_types = ['deposit', 'withdrawal', 'transfer']
    descriptions = [
        'ATM withdrawal', 'Online payment', 'Salary deposit',
        'Grocery store', 'Restaurant', 'Utility bill',
        'Transfer to savings', 'Cash deposit'
    ]
    
    for i in range(50):
        # Random date within last 30 days
        days_ago = random.randint(0, 30)
        transaction_date = datetime.now() - timedelta(days=days_ago)
        
        # Random account
        account_id = random.choice(['CHECK001', 'SAVE001'])
        
        # Random transaction
        transaction_type = random.choice(transaction_types)
        amount = random.uniform(10, 500)
        if transaction_type == 'withdrawal':
            amount = -amount
        
        transaction = {
            'transaction_id': f'TXN{1000 + i}',
            'account_id': account_id,
            'type': transaction_type,
            'amount': abs(amount),
            'description': random.choice(descriptions),
            'timestamp': transaction_date.isoformat(),
            'balance_after': random.uniform(1000, 10000)
        }
        
        banking_fs.save_transaction(transaction)
    
    # 4. Generate reports
    print(" 4. Generating reports...")
    
    # Monthly statement for checking account
    banking_fs.generate_statement('CHECK001', 2024, 1)
    
    # 5. Display system status
    print(" 5. System Status Report:")
    print("-" * 40)
    
    status = banking_fs.get_system_status()
    
    print(f"üìÅ Base Directory: {status['base_directory']}")
    print(f"üîê Encryption: {'Enabled' if status['encryption_enabled'] else 'Disabled'}")
    print(f"üëÅÔ∏è  Monitors: {status['monitors_running']} running")
    
    print(" üìä Storage by Category:")
    for category, info in status['categories'].items():
        if info['file_count'] > 0:
            print(f"   {category:12} {info['file_count']:4} files | {info['total_size_human']}")
    
    print(f" üíæ Total Storage: {status['storage_usage']['total']}")
    
    # 6. Demonstrate data retrieval
    print(" 6. Data Retrieval Demo:")
    print("-" * 40)
    
    # Load an account
    account = banking_fs.load_account('CHECK001')
    if account:
        print(f"‚úÖ Loaded account: {account.get('owner')}")
        print(f"   Account Type: {account.get('account_type')}")
        print(f"   Balance: \\\${account.get('balance', 0):.2f}")
        # PIN should be decrypted automatically
        print(f"   PIN: {account.get('pin', 'Not shown')}")
    
    # Get recent transactions
    transactions = banking_fs.get_transactions(
        account_id='CHECK001',
        limit=5
    )
    
    if transactions:
        print(f" üìú Recent Transactions for CHECK001:")
        for txn in transactions:
            amount_str = f"+\\\${txn['amount']:.2f}" if txn['type'] == 'deposit' else f"-\\\${txn['amount']:.2f}"
            print(f"   {txn['timestamp'][:10]} {txn['type']:12} {amount_str:10} {txn['description']}")
    
    # 7. Run maintenance
    print(" 7. Running System Maintenance...")
    print("-" * 40)
    banking_fs.run_maintenance()
    
    # 8. Backup demonstration
    print(" 8. Backup System Demo:")
    print("-" * 40)
    
    # Create a backup
    backup_system = BackupSystem(
        data_dir='my_bank_data/active',
        backup_dir='my_bank_data/backups'
    )
    
    backup_file = backup_system.create_full_backup("Demo backup")
    if backup_file:
        print(f"‚úÖ Created backup: {backup_file.name}")
        
        # List backups
        backups = backup_system.list_backups()
        print(f"üìã Available backups: {len(backups)}")
        
        if backups:
            print(f"   Latest: {backups[0]['filename']} ({backups[0]['size_human']})")
    
    print(" " + "=" * 60)
    print("üéâ BANKING FILE SYSTEM DEMO COMPLETE")
    print("=" * 60)
    
    # Return the file manager for further use
    return banking_fs

# TODO: Add these advanced features:
# 1. Disaster recovery simulation
# 2. Data migration between systems
# 3. Compliance reporting (GDPR, PCI DSS)
# 4. Automated testing of file operations
# 5. Performance benchmarking
# 6. User interface for file management
        </pre>
    </div>

    <h3>Today's Assignment</h3>
    <div class="assignment-box">
        <h4>Part 1: Implement Complete Banking File System</h4>
        
        <div style="background-color: #e6ffe6; padding: 15px; margin: 10px 0; border-radius: 5px;">
            <b>Required Implementation:</b><br/>
            1. ‚úÖ FileEncryptor and BankingEncryptor for data encryption<br/>
            2. ‚úÖ FileSystemMonitor for real-time file monitoring<br/>
            3. ‚úÖ CloudStorageManager for cloud backup integration<br/>
            4. ‚úÖ CloudBackupScheduler for automated cloud backups<br/>
            5. ‚úÖ BankingFileManager as complete integration layer<br/>
            6. ‚úÖ Directory structure and organization<br/>
            7. ‚úÖ Transaction indexing for fast retrieval<br/>
            8. ‚úÖ Maintenance and cleanup procedures<br/>
            9. ‚úÖ System status reporting<br/><br/>
            
            <b>Test Your Implementation:</b><br/>
            1. Create and manage encrypted accounts<br/>
            2. Save and retrieve transactions efficiently<br/>
            3. Generate statements and reports<br/>
            4. Monitor files for changes<br/>
            5. Create local and cloud backups<br/>
            6. Run maintenance tasks<br/>
            7. Handle errors and edge cases
        </div>
        
        <h4>Part 2: Disaster Recovery Plan</h4>
        <div style="background-color: #fff0e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
            <b>Create a Comprehensive Disaster Recovery Plan:</b><br/>
            1. <b>Backup Strategy:</b> Define what, when, and where to backup<br/>
            2. <b>Recovery Procedures:</b> Step-by-step recovery instructions<br/>
            3. <b>Testing Plan:</b> How to test backups and recovery<br/>
            4. <b>Communication Plan:</b> Who to notify during recovery<br/>
            5. <b>Documentation:</b> Complete documentation of system<br/>
            6. <b>Training:</b> Team training on recovery procedures<br/>
            7. <b>Monitoring:</b> Systems to detect disasters early<br/><br/>
            
            <b>Sample Recovery Procedure:</b>
            <pre>
DISASTER RECOVERY PROCEDURE
============================

Scenario: Data Corruption in Primary Storage

1. IMMEDIATE ACTIONS:
   - Isolate affected systems
   - Notify IT team and management
   - Assess scope of corruption

2. DATA RECOVERY:
   a. Identify last known good backup
   b. Restore from backup to temporary location
   c. Verify data integrity of restored backup
   d. Apply any incremental backups since full backup
   e. Test restored data with sample transactions

3. SYSTEM RESTORATION:
   a. Stop banking application
   b. Backup current (corrupted) state for analysis
   c. Replace corrupted files with restored versions
   d. Verify file permissions and ownership
   e. Start banking application in test mode

4. VERIFICATION:
   a. Run integrity checks on all data files
   b. Test critical functions (login, transactions, reports)
   c. Verify with sample users if possible
   d. Document recovery process and lessons learned

5. POST-RECOVERY:
   a. Monitor system closely for 24 hours
   b. Review backup procedures
   c. Update disaster recovery plan if needed
   d. Schedule additional backup tests
            </pre>
        </div>
        
        <h4>Part 3: Performance Optimization</h4>
        <div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
            <b>Optimize Your File System for Performance:</b><br/>
            1. <b>Indexing:</b> Create indexes for fast searching<br/>
            2. <b>Caching:</b> Implement caching for frequently accessed data<br/>
            3. <b>Compression:</b> Compress old data to save space<br/>
            4. <b>Batch Processing:</b> Process files in batches for efficiency<br/>
            5. <b>Parallel Operations:</b> Use multiple threads for I/O<br/>
            6. <b>Memory Mapping:</b> Use memory-mapped files for large files<br/>
            7. <b>Database Integration:</b> Consider SQLite for complex queries<br/><br/>
            
            <b>Performance Metrics to Track:</b>
            <pre>
FILE SYSTEM PERFORMANCE METRICS
================================

1. Response Times:
   - Account load time: < 100ms
   - Transaction save time: < 50ms
   - Statement generation: < 500ms
   - Backup completion: < 5 minutes

2. Storage Metrics:
   - Disk usage: < 80% capacity
   - File count per directory: < 10,000
   - Average file size: Monitor for anomalies
   - Growth rate: Predict future storage needs

3. Reliability Metrics:
   - Backup success rate: > 99%
   - Data integrity checks: 100% pass
   - Uptime: > 99.9%
   - Mean time between failures: > 30 days

4. Security Metrics:
   - Encryption coverage: 100% of sensitive data
   - Access log completeness: 100%
   - Audit trail: All actions logged
   - Security incidents: 0
            </pre>
        </div>
    </div>

    <h3>Week 8 Summary</h3>
    <div style="background-color: #e6f3ff; padding: 15px; margin: 10px 0; border-radius: 5px; border-left: 5px solid #4a6fa5;">
        <b>üéâ Week 8 Complete! You've Learned:</b><br/><br/>
        
        <b>Day 1: Error Handling & Exception Management</b><br/>
        - Professional error handling patterns<br/>
        - Custom exception classes<br/>
        - Retry, circuit breaker, and fallback patterns<br/>
        - Comprehensive error logging and recovery<br/><br/>
        
        <b>Day 2: Logging Systems & Monitoring</b><br/>
        - Python logging module mastery<br/>
        - Structured logging with context<br/>
        - Real-time log monitoring<br/>
        - Log analysis and dashboard creation<br/>
        - Intelligent alert systems<br/><br/>
        
        <b>Day 3: File I/O & Data Persistence</b><br/>
        - Safe file operations with error handling<br/>
        - CSV and JSON file management<br/>
        - Configuration file management<br/>
        - Concurrent file access with locking<br/>
        - Backup and recovery systems<br/>
        - Data migration tools<br/><br/>
        
        <b>Day 4: Advanced File Operations & Project Integration</b><br/>
        - File encryption for sensitive data<br/>
        - File system monitoring<br/>
        - Cloud storage integration<br/>
        - Complete banking file architecture<br/>
        - Integrated file management system<br/>
        - Disaster recovery planning<br/><br/>
        
        <b>Next Week: Week 9 - Level 2 Project</b><br/>
        - Building a complete Student Management System<br/>
        - Applying all OOP principles<br/>
        - File persistence and data management<br/>
        - Professional project structure
    </div>
    
    <div style="background-color: #e6ffe6; padding: 15px; margin: 20px 0; border-radius: 5px; border: 2px solid #4CAF50;">
        <h4>üéØ Professional File Management Checklist</h4>
        <p><b>Ask yourself:</b> Does my banking file system have...</p>
        <ul>
            <li>‚úÖ Secure encryption for sensitive data?</li>
            <li>‚úÖ Comprehensive error handling for all file operations?</li>
            <li>‚úÖ Structured logging of all file activities?</li>
            <li>‚úÖ Regular automated backups?</li>
            <li>‚úÖ Cloud backup integration?</li>
            <li>‚úÖ File integrity monitoring?</li>
            <li>‚úÖ Efficient indexing for fast data retrieval?</li>
            <li>‚úÖ Proper directory organization?</li>
            <li>‚úÖ Maintenance procedures for cleanup?</li>
            <li>‚úÖ Disaster recovery plan?</li>
            <li>‚úÖ Performance monitoring?</li>
            <li>‚úÖ Access controls and audit trails?</li>
        </ul>
        <p><b>Remember:</b> Good file management is invisible to users but essential for reliability!</p>
        <p><b>Congratulations!</b> You now have professional-grade file management skills that are essential for any real-world banking application.</p>
    </div>`
            },

            "9-1": {
                icon: "fa-exclamation-triangle",
                title: "Error Handling - Try/Except Blocks & Preventing Crashes",
                html: `<h1>Week 9, Day 1: Error Handling - Try/Except Blocks & Preventing Crashes</h1>
    <p>Today we transition from OOP theory to practical programming by learning how to handle errors gracefully and prevent our programs from crashing.</p>
    
    <div class="analogy-box">
        <b>Analogy: Airbag System vs Car Crash üöóüí•</b><br/>
        <ul style="margin-top: 10px;">
            <li><b>Error (Exception)</b> = Car crash (unexpected event)</li>
            <li><b>Try/Except</b> = Airbag system (safety mechanism)</li>
            <li><b>Graceful Failure</b> = Car stops safely, passengers unhurt</li>
            <li><b>Crash</b> = Program terminates abruptly (passengers injured)</li>
            <li><b>Logging</b> = Black box recorder (understands what happened)</li>
        </ul>
    </div>

    <h3>Key Topics</h3>
    <ul>
        <li>Understanding exceptions vs syntax errors</li>
        <li>Basic try/except/finally blocks</li>
        <li>Handling specific exception types</li>
        <li>Creating custom exceptions</li>
        <li>Practical: Robust file operations</li>
    </ul>

    <h3>In-Depth Explanation</h3>
    
    <b>a. Why Error Handling? (The Cost of Crashes)</b>
    
    <div style="background-color: #f9f9f9; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <b>Program Without Error Handling (Dangerous!):</b>
        <div style="background-color: #ffe6e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
            <pre>
# BANKING SYSTEM WITHOUT ERROR HANDLING
def process_withdrawal(account, amount):
    # What could go wrong?
    # 1. account might be None
    # 2. amount might not be a number
    # 3. account might not have enough money
    # 4. Database connection might fail
    # 5. Network might be down
    
    balance = get_balance_from_database(account)
    new_balance = balance - amount
    
    if new_balance < 0:
        print("Error: Insufficient funds")  # üíÄ Program continues!
        return None
    
    update_database(account, new_balance)  # üíÄ Could fail!
    return new_balance

# User enters invalid data
result = process_withdrawal(None, "not a number")
# üíÄ CRASH! AttributeError: 'NoneType' object has no attribute...

# User tries to withdraw too much
result = process_withdrawal("account123", 1000000)
# üíÄ CRASH! Database connection error...

# Program crashes, user loses trust, business loses money
            </pre>
        </div>
        
        <b>Program With Error Handling (Professional!):</b>
        <div style="background-color: #e8f8e8; padding: 15px; margin: 10px 0; border-radius: 5px;">
            <pre>
# BANKING SYSTEM WITH ERROR HANDLING
def process_withdrawal(account, amount):
    try:
        # Validate input
        if not account:
            raise ValueError("Account number required")
        
        if not isinstance(amount, (int, float)):
            raise TypeError("Amount must be a number")
        
        # Business logic with safety
        balance = get_balance_from_database(account)
        new_balance = balance - amount
        
        if new_balance < 0:
            raise InsufficientFundsError(
                f"Cannot withdraw \\\${amount}. Balance: \\\${balance}"
            )
        
        # Critical operation with backup plan
        update_database(account, new_balance)
        
        # Success
        logger.info(f"Withdrawal successful: Account {account}, Amount \\\${amount}")
        return new_balance
        
    except (ValueError, TypeError) as e:
        # User input error - show helpful message
        logger.warning(f"User input error: {e}")
        return f"Please check your input: {e}"
        
    except InsufficientFundsError as e:
        # Business rule violation
        logger.warning(f"Insufficient funds: {e}")
        return "Sorry, insufficient funds for this withdrawal"
        
    except DatabaseError as e:
        # System error - log details, show generic message
        logger.error(f"Database error: {e}")
        return "System temporarily unavailable. Please try again later."
        
    except Exception as e:
        # Catch-all for unexpected errors
        logger.critical(f"Unexpected error: {e}")
        return "An unexpected error occurred. Our team has been notified."

# User gets helpful messages, program doesn't crash
result = process_withdrawal(None, "invalid")
print(result)  # "Please check your input: Account number required"

result = process_withdrawal("account123", 1000000)
print(result)  # "Sorry, insufficient funds for this withdrawal"
            </pre>
        </div>
        
        <b>Types of Errors:</b>
        <div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
            <table style="width: 100%;">
                <tr>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>Syntax Errors</b></td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Code won't run (missing colon, typo)</td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Fixed by programmer</td>
                </tr>
                <tr>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>Exceptions (Runtime Errors)</b></td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Code runs but fails during execution</td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Handled with try/except</td>
                </tr>
                <tr>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>Logical Errors (Bugs)</b></td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Code runs but produces wrong result</td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Fixed by testing and debugging</td>
                </tr>
            </table>
        </div>
    </div>
    
    <hr/>
    
    <b>b. Basic Try/Except/Finally Structure</b>
    
    <div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
# BASIC STRUCTURE
try:
    # Code that might fail
    risky_operation()
    
except ExceptionType:
    # What to do if it fails
    handle_error()
    
else:
    # What to do if it succeeds (no exception)
    continue_normal_operation()
    
finally:
    # ALWAYS runs (success or failure)
    cleanup_resources()

# REAL EXAMPLE: File Operations
def read_file_safely(filename):
    file = None  # Initialize variable
    
    try:
        print(f"Attempting to open {filename}...")
        file = open(filename, 'r')  # Could raise FileNotFoundError
        
        content = file.read()       # Could raise IOError
        print("File read successfully")
        
        return content
        
    except FileNotFoundError:
        print(f"Error: File '{filename}' not found")
        return None
        
    except IOError as e:
        print(f"Error reading file: {e}")
        return None
        
    except Exception as e:
        print(f"Unexpected error: {e}")
        return None
        
    finally:
        # This ALWAYS runs, even if error occurs
        if file:
            print("Closing file...")
            file.close()  # Critical cleanup!
        print("Cleanup complete")

# Test different scenarios
print("=== Test 1: File exists ===")
result = read_file_safely("data.txt")  # Works

print(" === Test 2: File doesn't exist ===")
result = read_file_safely("nonexistent.txt")  # Handled gracefully

print(" === Test 3: Permission error ===")
result = read_file_safely("/root/protected.txt")  # Handled gracefully
        </pre>
    </div>
    
    <b>Try/Except Flowchart:</b>
    <div style="background-color: #fff; padding: 15px; margin: 10px 0; border-radius: 5px; text-align: center;">
        <div style="display: inline-block; text-align: left;">
            <div style="background-color: #3498db; color: white; padding: 10px; border-radius: 5px; width: 300px;">
                <b>TRY Block</b><br/>
                Execute code that might fail
            </div>
            <div style="text-align: center; margin: 10px 0;">‚ñº<br/>Success? ‚Üí No ‚Üí Exception raised</div>
            <div style="display: flex; gap: 20px; justify-content: center;">
                <div style="background-color: #2ecc71; color: white; padding: 10px; border-radius: 5px; width: 140px;">
                    <b>ELSE Block</b><br/>
                    Runs if NO exception
                </div>
                <div style="background-color: #e74c3c; color: white; padding: 10px; border-radius: 5px; width: 140px;">
                    <b>EXCEPT Block</b><br/>
                    Runs IF exception<br/>
                    Handles specific errors
                </div>
            </div>
            <div style="text-align: center; margin: 10px 0;">‚ñº<br/>Both paths converge here</div>
            <div style="background-color: #f39c12; color: white; padding: 10px; border-radius: 5px; width: 300px; margin: 0 auto;">
                <b>FINALLY Block</b><br/>
                ALWAYS runs (cleanup)
            </div>
        </div>
    </div>
    
    <hr/>
    
    <b>c. Handling Specific Exception Types</b>
    
    <div style="background-color: #f9f9f9; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <b>Common Python Exceptions:</b>
        <div style="background-color: #e8f4f8; padding: 15px; margin: 10px 0; border-radius: 5px;">
            <pre>
# HIERARCHY OF COMMON EXCEPTIONS
BaseException
‚îú‚îÄ‚îÄ KeyboardInterrupt      (Ctrl+C)
‚îú‚îÄ‚îÄ SystemExit            (sys.exit())
‚îî‚îÄ‚îÄ Exception
    ‚îú‚îÄ‚îÄ ArithmeticError
    ‚îÇ   ‚îú‚îÄ‚îÄ ZeroDivisionError     (x / 0)
    ‚îÇ   ‚îî‚îÄ‚îÄ OverflowError         (Number too large)
    ‚îú‚îÄ‚îÄ LookupError
    ‚îÇ   ‚îú‚îÄ‚îÄ IndexError            (list[10] on 5-item list)
    ‚îÇ   ‚îî‚îÄ‚îÄ KeyError              (dict['missing_key'])
    ‚îú‚îÄ‚îÄ TypeError                 (string + number)
    ‚îú‚îÄ‚îÄ ValueError               (int("not a number"))
    ‚îú‚îÄ‚îÄ FileNotFoundError        (open("missing.txt"))
    ‚îú‚îÄ‚îÄ IOError                  (Disk full, permission denied)
    ‚îú‚îÄ‚îÄ ImportError              (import nonexistent_module)
    ‚îú‚îÄ‚îÄ AttributeError           (object.missing_method())
    ‚îî‚îÄ‚îÄ ... and many more

# HANDLING SPECIFIC EXCEPTIONS
def calculate_statistics(numbers):
    try:
        # Multiple operations that could fail
        total = sum(numbers)
        average = total / len(numbers)          # Could be ZeroDivisionError
        maximum = max(numbers)
        
        # Access potentially missing data
        third_number = numbers[2]               # Could be IndexError
        
        # Dictionary operations
        stats = {
            "total": total,
            "average": average,
            "max": maximum,
            "third": third_number
        }
        
        return stats
        
    except ZeroDivisionError:
        return {"error": "Cannot calculate: list is empty"}
        
    except IndexError:
        return {"error": "List must have at least 3 items"}
        
    except TypeError as e:
        return {"error": f"Invalid data type: {e}"}
        
    except Exception as e:
        # Catch-all for unexpected errors
        return {"error": f"Unexpected problem: {e}"}

# Test different error scenarios
print(calculate_statistics([]))           # ZeroDivisionError handled
print(calculate_statistics([1, 2]))       # IndexError handled
print(calculate_statistics([1, "two", 3])) # TypeError handled
print(calculate_statistics([1, 2, 3, 4])) # Success
        </pre>
        </div>
        
        <b>Multiple Exception Patterns:</b>
        <div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
            <table style="width: 100%;">
                <tr>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc; width: 30%;"><b>Pattern</b></td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>Syntax</b></td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>Use Case</b></td>
                </tr>
                <tr>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Specific Handling</td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;"><code>except ValueError:</code></td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Handle one exception type</td>
                </tr>
                <tr>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Multiple Types</td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;"><code>except (TypeError, ValueError):</code></td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Handle similar exceptions together</td>
                </tr>
                <tr>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Capture Exception</td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;"><code>except Exception as e:</code></td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Get error details for logging</td>
                </tr>
                <tr>
                    <td style="padding: 8px;"><b>Bare Except</b></td>
                    <td style="padding: 8px;"><b><code>except:</code> (Avoid!)</b></td>
                    <td style="padding: 8px;">Catches everything (including Ctrl+C!)</td>
                </tr>
            </table>
        </div>
    </div>
    
    <hr/>
    
    <b>d. Creating and Using Custom Exceptions</b>
    
    <div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
# CUSTOM EXCEPTIONS FOR BUSINESS LOGIC
class BankError(Exception):
    """Base class for all bank-related errors"""
    pass

class InsufficientFundsError(BankError):
    """Raised when account doesn't have enough funds"""
    def __init__(self, balance, withdrawal_amount):
        self.balance = balance
        self.withdrawal_amount = withdrawal_amount
        message = f"Cannot withdraw \\\${withdrawal_amount}. Available: \\\${balance}"
        super().__init__(message)

class InvalidAccountError(BankError):
    """Raised when account doesn't exist"""
    pass

class TransactionLimitError(BankError):
    """Raised when daily limit exceeded"""
    def __init__(self, limit, attempted):
        self.limit = limit
        self.attempted = attempted
        super().__init__(f"Daily limit \\\${limit} exceeded. Attempted: \\\${attempted}")

# USING CUSTOM EXCEPTIONS
class BankAccount:
    DAILY_LIMIT = 1000
    
    def __init__(self, account_number, balance):
        self.account_number = account_number
        self.balance = balance
        self.daily_withdrawn = 0
    
    def withdraw(self, amount):
        # Validate with custom exceptions
        if not self.account_number:
            raise InvalidAccountError("Account number is required")
        
        if amount <= 0:
            raise ValueError("Withdrawal amount must be positive")
        
        if amount > self.balance:
            raise InsufficientFundsError(self.balance, amount)
        
        if self.daily_withdrawn + amount > self.DAILY_LIMIT:
            raise TransactionLimitError(
                self.DAILY_LIMIT, 
                self.daily_withdrawn + amount
            )
        
        # Process withdrawal
        self.balance -= amount
        self.daily_withdrawn += amount
        return self.balance

# HANDLING CUSTOM EXCEPTIONS
def process_withdrawal_request(account, amount):
    try:
        new_balance = account.withdraw(amount)
        print(f"Withdrawal successful! New balance: \\\${new_balance}")
        return new_balance
        
    except InsufficientFundsError as e:
        # Specific handling for business rule
        print(f"Business error: {e}")
        print(f"Details: Balance=\\\${e.balance}, Attempted=\\\${e.withdrawal_amount}")
        return None
        
    except TransactionLimitError as e:
        # Another business rule
        print(f"Limit exceeded: {e}")
        print(f"You can still withdraw: \\\${e.limit - account.daily_withdrawn}")
        return None
        
    except InvalidAccountError as e:
        # Authentication/validation error
        print(f"Account error: {e}")
        return None
        
    except ValueError as e:
        # Input validation error
        print(f"Input error: {e}")
        return None
        
    except BankError as e:
        # Catch all other bank errors
        print(f"Bank system error: {e}")
        return None
        
    except Exception as e:
        # Unexpected errors
        print(f"Unexpected error: {e}")
        logger.critical(f"Critical error in withdrawal: {e}")
        return None

# Test custom exceptions
account = BankAccount("123456", 500)

print("=== Test 1: Normal withdrawal ===")
process_withdrawal_request(account, 100)

print(" === Test 2: Insufficient funds ===")
process_withdrawal_request(account, 1000)

print(" === Test 3: Exceed daily limit ===")
account.daily_withdrawn = 900
process_withdrawal_request(account, 200)

print(" === Test 4: Invalid amount ===")
process_withdrawal_request(account, -50)
        </pre>
    </div>
    
    <b>When to Create Custom Exceptions:</b>
    <div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <table style="width: 100%;">
            <tr>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>Situation</b></td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>Use Built-in</b></td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>Use Custom</b></td>
            </tr>
            <tr>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Input validation</td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">‚úì <code>ValueError</code></td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;"></td>
            </tr>
            <tr>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Business rule violation</td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;"></td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">‚úì <code>InsufficientFundsError</code></td>
            </tr>
            <tr>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Resource not found</td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">‚úì <code>FileNotFoundError</code></td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">‚úì <code>UserNotFoundError</code></td>
            </tr>
            <tr>
                <td style="padding: 8px;"><b>Domain-specific logic</b></td>
                <td style="padding: 8px;"></td>
                <td style="padding: 8px;">‚úì <code>InvalidOrderStatusError</code></td>
            </tr>
        </table>
    </div>
    
    <hr/>
    
    <b>e. Practical: Robust File Operations with Error Handling</b>
    
    <div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
import os
import json
from datetime import datetime

# CUSTOM EXCEPTIONS
class FileSystemError(Exception):
    """Base class for file system errors"""
    pass

class FileCorruptedError(FileSystemError):
    """Raised when file content is invalid"""
    pass

class InsufficientSpaceError(FileSystemError):
    """Raised when disk is full"""
    pass

# ROBUST FILE OPERATIONS CLASS
class SafeFileHandler:
    """Handles file operations with comprehensive error handling"""
    
    def __init__(self, backup_dir="backups"):
        self.backup_dir = backup_dir
        self.ensure_backup_dir()
    
    def ensure_backup_dir(self):
        """Create backup directory if it doesn't exist"""
        try:
            os.makedirs(self.backup_dir, exist_ok=True)
        except PermissionError:
            print(f"Warning: Cannot create backup directory {self.backup_dir}")
        except Exception as e:
            print(f"Unexpected error creating backup: {e}")
    
    def check_disk_space(self, required_bytes=1024):
        """Check if there's enough disk space"""
        try:
            stat = os.statvfs('.')
            free_space = stat.f_frsize * stat.f_bavail
            return free_space >= required_bytes
        except Exception:
            # If we can't check, assume it's okay but log warning
            print("Warning: Could not check disk space")
            return True
    
    def create_backup(self, filepath):
        """Create backup of file before modification"""
        if not os.path.exists(filepath):
            return None
        
        try:
            timestamp = datetime.now().strftime("%Y%m%d_%H%M%S")
            filename = os.path.basename(filepath)
            backup_path = os.path.join(self.backup_dir, f"{filename}.backup_{timestamp}")
            
            import shutil
            shutil.copy2(filepath, backup_path)
            print(f"Backup created: {backup_path}")
            return backup_path
            
        except Exception as e:
            print(f"Warning: Could not create backup: {e}")
            return None
    
    def read_json_file(self, filepath):
        """
        Safely read JSON file with error handling
        
        Returns: (success: bool, data: dict or error_message: str)
        """
        try:
            # Check if file exists
            if not os.path.exists(filepath):
                return False, f"File not found: {filepath}"
            
            # Check file size (prevent reading huge files accidentally)
            file_size = os.path.getsize(filepath)
            if file_size > 10 * 1024 * 1024:  # 10 MB limit
                return False, f"File too large: {file_size:,} bytes"
            
            # Read file
            with open(filepath, 'r', encoding='utf-8') as f:
                content = f.read()
            
            # Validate JSON
            data = json.loads(content)
            
            # Additional validation (optional)
            if not isinstance(data, dict):
                raise FileCorruptedError("JSON root must be an object")
            
            print(f"Successfully read {filepath} ({file_size:,} bytes)")
            return True, data
            
        except FileNotFoundError:
            return False, f"File not found: {filepath}"
            
        except PermissionError:
            return False, f"Permission denied: {filepath}"
            
        except json.JSONDecodeError as e:
            return False, f"Invalid JSON format: {e}"
            
        except FileCorruptedError as e:
            return False, f"File corrupted: {e}"
            
        except Exception as e:
            return False, f"Unexpected error reading file: {e}"
    
    def write_json_file(self, filepath, data, create_backup=True):
        """
        Safely write JSON file with error handling and backup
        
        Returns: (success: bool, message: str)
        """
        backup_path = None
        
        try:
            # Check disk space
            if not self.check_disk_space(1024):  # Check for 1KB free
                raise InsufficientSpaceError("Disk space insufficient")
            
            # Create backup if requested and file exists
            if create_backup and os.path.exists(filepath):
                backup_path = self.create_backup(filepath)
            
            # Prepare directory
            os.makedirs(os.path.dirname(filepath), exist_ok=True)
            
            # Write to temporary file first (atomic operation)
            temp_path = filepath + ".tmp"
            
            with open(temp_path, 'w', encoding='utf-8') as f:
                json.dump(data, f, indent=2, ensure_ascii=False)
            
            # Replace original file with temporary
            os.replace(temp_path, filepath)
            
            print(f"Successfully wrote {filepath}")
            return True, f"File saved successfully. Backup: {backup_path}"
            
        except InsufficientSpaceError as e:
            # Clean up temp file if it exists
            if os.path.exists(temp_path):
                os.remove(temp_path)
            return False, f"Error: {e}"
            
        except PermissionError:
            return False, f"Permission denied: Cannot write to {filepath}"
            
        except Exception as e:
            # Clean up temp file if it exists
            if os.path.exists(temp_path):
                os.remove(temp_path)
            
            # Restore from backup if write failed
            if backup_path and os.path.exists(backup_path):
                try:
                    import shutil
                    shutil.copy2(backup_path, filepath)
                    return False, f"Error: {e}. Restored from backup."
                except:
                    return False, f"Error: {e}. Backup also failed."
            
            return False, f"Error writing file: {e}"
    
    def delete_file(self, filepath, move_to_trash=True):
        """
        Safely delete file with optional trash/recycle bin
        """
        try:
            if not os.path.exists(filepath):
                return False, "File does not exist"
            
            if move_to_trash:
                # Move to backup directory instead of permanent delete
                timestamp = datetime.now().strftime("%Y%m%d_%H%M%S")
                filename = os.path.basename(filepath)
                trash_path = os.path.join(self.backup_dir, f"trash_{filename}_{timestamp}")
                
                import shutil
                shutil.move(filepath, trash_path)
                message = f"Moved to trash: {trash_path}"
            else:
                # Permanent delete
                os.remove(filepath)
                message = "Permanently deleted"
            
            return True, message
            
        except PermissionError:
            return False, "Permission denied: Cannot delete file"
        except Exception as e:
            return False, f"Error deleting file: {e}"

# USAGE EXAMPLE
def demonstrate_file_operations():
    handler = SafeFileHandler()
    
    print("=== Test 1: Read existing JSON file ===")
    success, result = handler.read_json_file("config.json")
    if success:
        print(f"Data: {result}")
    else:
        print(f"Error: {result}")
    
    print(" === Test 2: Read non-existent file ===")
    success, result = handler.read_json_file("nonexistent.json")
    print(f"Result: {result}")
    
    print(" === Test 3: Write JSON file ===")
    data = {
        "app_name": "My Application",
        "version": "1.0.0",
        "settings": {
            "theme": "dark",
            "auto_save": True
        }
    }
    success, result = handler.write_json_file("settings.json", data)
    print(f"Result: {result}")
    
    print(" === Test 4: Write with simulated disk full ===")
    # Simulate disk full by mocking check_disk_space
    original_method = handler.check_disk_space
    handler.check_disk_space = lambda required_bytes: False
    success, result = handler.write_json_file("test.json", {"test": True})
    handler.check_disk_space = original_method  # Restore
    print(f"Result: {result}")
    
    print(" === Test 5: Delete file ===")
    success, result = handler.delete_file("test.txt", move_to_trash=True)
    print(f"Result: {result}")

if __name__ == "__main__":
    demonstrate_file_operations()
        </pre>
    </div>
    
    <hr/>
    
    <div class="assignment-box">
        <h4>Assignment: Build a Robust User Registration System</h4>
        
        <b>Part 1: Create Custom Exceptions</b>
        <div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
            Create these custom exceptions for user registration:
            <ol>
                <li><code>RegistrationError</code> - Base class for all registration errors</li>
                <li><code>InvalidEmailError</code> - Email format is invalid</li>
                <li><code>WeakPasswordError</code> - Password doesn't meet requirements</li>
                <li><code>UsernameTakenError</code> - Username already exists</li>
                <li><code>AgeRestrictionError</code> - User is too young</li>
                <li><code>DuplicateAccountError</code> - Email already registered</li>
            </ol>
        </div>
        
        <b>Part 2: Implement UserValidator Class</b>
        <div style="background-color: #fff0e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
            Create <code>UserValidator</code> with these validation methods:
            <pre>
class UserValidator:
    def validate_email(self, email):
        """Raise InvalidEmailError if email is invalid"""
        # Check format, domain, etc.
    
    def validate_password(self, password):
        """Raise WeakPasswordError if password is weak"""
        # Check length, complexity, etc.
    
    def validate_username(self, username):
        """Raise UsernameTakenError if username exists"""
        # Check database or file
    
    def validate_age(self, birth_date):
        """Raise AgeRestrictionError if under 13"""
        # Calculate age from birth date
    
    def validate_all(self, user_data):
        """Validate all fields with comprehensive error handling"""
        try:
            self.validate_email(user_data['email'])
            self.validate_password(user_data['password'])
            # ... more validations
            return True, "All validations passed"
        except RegistrationError as e:
            return False, f"Validation failed: {e}"
        except Exception as e:
            return False, f"Unexpected error: {e}"
            </pre>
        </div>
        
        <b>Part 3: Create UserRegistration Class</b>
        <div style="background-color: #f0fff0; padding: 15px; margin: 10px 0; border-radius: 5px;">
            Implement <code>UserRegistration</code> with error handling:
            <ul>
                <li><code>register_user(user_data)</code> - Main registration method</li>
                <li>Use try/except/finally blocks</li>
                <li>Handle different exception types appropriately</li>
                <li>Log errors to a file</li>
                <li>Send different error messages to users vs logging</li>
                <li>Ensure resources are cleaned up (file handles, etc.)</li>
            </ul>
        </div>
        
        <b>Part 4: Test Error Scenarios</b>
        <div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px; font-family: monospace;">
            # Test various error scenarios
            registration = UserRegistration()
            
            test_cases = [
                # (user_data, expected_result)
                ({"email": "invalid", "password": "123"}, "InvalidEmailError"),
                ({"email": "test@example.com", "password": "weak"}, "WeakPasswordError"),
                ({"email": "test@example.com", "password": "StrongPass123!", "age": 10}, "AgeRestrictionError"),
                ({"email": "existing@example.com", "password": "StrongPass123!", "age": 25}, "DuplicateAccountError"),
                ({"email": "new@example.com", "password": "StrongPass123!", "age": 25}, "SUCCESS"),
            ]
            
            for user_data, expected in test_cases:
                print(f" Testing: {user_data['email']}")
                result = registration.register_user(user_data)
                print(f"Expected: {expected}, Got: {result}")
                
                # Program should NOT crash for any test case!
                # Each should return a helpful message to the user
            </pre>
        </div>
    </div>
    
    <hr/>
    
    <h3>Common Mistakes & Solutions</h3>
    
    <b>Mistake 1: Bare except (catches too much)</b>
    <div style="background-color: #ffe6e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
# WRONG - Catches EVERYTHING (including KeyboardInterrupt!)
try:
    user_input = input("Enter data: ")
    process_data(user_input)
except:  # üíÄ Bare except - DANGEROUS!
    print("Something went wrong")
# User can't press Ctrl+C to exit!

# RIGHT - Be specific
try:
    user_input = input("Enter data: ")
    process_data(user_input)
except ValueError as e:
    print(f"Invalid data: {e}")
except Exception as e:
    print(f"Unexpected error: {e}")
    logger.error(f"Error processing data: {e}")
# Ctrl+C still works!
        </pre>
    </div>
    
    <b>Mistake 2: Swallowing exceptions (hiding errors)</b>
    <div style="background-color: #ffe6e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
# WRONG - Hides the error completely
try:
    result = important_calculation()
except:
    pass  # üíÄ Silent failure!
# Nobody knows something failed!

# RIGHT - At least log it
try:
    result = important_calculation()
except Exception as e:
    logger.error(f"Calculation failed: {e}")
    result = default_value  # Provide fallback
    notify_admin(f"Calculation failed: {e}")
        </pre>
    </div>
    
    <b>Mistake 3: Too broad try block</b>
    <div style="background-color: #ffe6e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
# WRONG - Too much code in try block
try:
    # Setup
    connect_to_database()
    load_config()
    initialize_services()
    
    # Business logic
    process_order()
    send_email()
    update_inventory()
    
    # Cleanup
    close_connections()
except Exception as e:
    print(f"Error: {e}")
# Which line failed? Hard to debug!

# RIGHT - Specific try blocks
try:
    connect_to_database()
    load_config()
    initialize_services()
except Exception as e:
    print(f"Setup failed: {e}")
    return

try:
    process_order()
except OrderError as e:
    print(f"Order processing failed: {e}")
    return

try:
    send_email()
except EmailError as e:
    print(f"Email failed: {e}")
    # Continue anyway

try:
    update_inventory()
except DatabaseError as e:
    print(f"Inventory update failed: {e}")
    # Log but continue

finally:
    close_connections()  # Always cleanup
        </pre>
    </div>
    
    <hr/>
    
    <h3>Quick Reference: Error Handling Best Practices</h3>
    
    <div style="background-color: #f9f9f9; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <table style="width: 100%;">
            <tr>
                <td style="padding: 8px; border-bottom: 1px solid #ccc; width: 30%;"><b>Practice</b></td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>Do</b></td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>Don't</b></td>
            </tr>
            <tr>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Exception Specificity</td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;"><code>except ValueError:</code></td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;"><code>except:</code> (bare)</td>
            </tr>
            <tr>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Error Messages</td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">User-friendly + detailed logs</td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Technical details to users</td>
            </tr>
            <tr>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Cleanup</td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Use <code>finally:</code> block</td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Leave resources open</td>
            </tr>
            <tr>
                <td style="padding: 8px;"><b>Recovery</b></td>
                <td style="padding: 8px;"><b>Provide fallbacks</b></td>
                <td style="padding: 8px;">Crash completely</td>
            </tr>
        </table>
    </div>
    
    <div style="background-color: #e8f8e8; padding: 20px; margin: 20px 0; border-radius: 5px; border-left: 5px solid #2ecc71;">
        <h4>üöÄ Homework: Build a Calculator with Error Handling</h4>
        <p>Create a robust calculator that handles all possible errors:</p>
        <ol>
            <li><b>Operations:</b> Add, subtract, multiply, divide, power, square root</li>
            <li><b>Error Scenarios:</b>
                <ul>
                    <li>Division by zero</li>
                    <li>Negative square roots</li>
                    <li>Invalid input (non-numbers)</li>
                    <li>Overflow (numbers too large)</li>
                    <li>Missing operators</li>
                </ul>
            </li>
            <li><b>Features:</b>
                <ul>
                    <li>Custom exceptions for each error type</li>
                    <li>Try/except blocks for each operation</li>
                    <li>User-friendly error messages</li>
                    <li>Log all errors to a file</li>
                    <li>Recovery: Ask for new input after error</li>
                </ul>
            </li>
            <li><b>Bonus:</b> Create a "safe_eval" function that safely evaluates mathematical expressions</li>
        </ol>
        <p><b>Remember:</b> A good program doesn't just work when everything goes right - it handles things gracefully when things go wrong!</p>
    </div>
    
    <div style="text-align: center; margin-top: 30px; padding: 15px; background-color: #f8f9fa; border-radius: 5px; border: 2px solid #3498db;">
        <b>üí° Pro Tip: The Rule of Three</b><br/>
        Handle errors at three levels:<br/>
        1. <b>User Level:</b> Friendly message (what happened)<br/>
        2. <b>Log Level:</b> Technical details (for debugging)<br/>
        3. <b>System Level:</b> Recovery/fallback (keep running)<br/>
        This makes your software both user-friendly and maintainable.
    </div>`
            },
            "9-2": {
                icon: "fa-clipboard-list",
                title: "Logging Errors - Professional Error Tracking",
                html: `<h1>Week 9, Day 2: Logging Errors - Professional Error Tracking</h1>
    <p>Today we learn about professional logging - the systematic recording of events, errors, and information that helps debug, monitor, and maintain applications.</p>
    
    <div class="analogy-box">
        <b>Analogy: Black Box vs Pilot Memory ‚úàÔ∏èüì¶</b><br/>
        <ul style="margin-top: 10px;">
            <li><b>print() statements</b> = Pilot's memory (unreliable, temporary)</li>
            <li><b>Logging System</b> = Black box recorder (permanent, detailed)</li>
            <li><b>Log Levels</b> = Different types of recordings (emergency, warning, info)</li>
            <li><b>Log Handlers</b> = Where recordings go (cockpit, control tower, archive)</li>
            <li><b>Log Formatting</b> = Standardized recording format (timestamp, source, message)</li>
        </ul>
    </div>

    <h3>Key Topics</h3>
    <ul>
        <li>Why logging is better than print()</li>
        <li>Python's logging module architecture</li>
        <li>Log levels and when to use them</li>
        <li>Log handlers (file, console, email, etc.)</li>
        <li>Log formatting and filtering</li>
        <li>Practical: Complete logging system</li>
    </ul>

    <h3>In-Depth Explanation</h3>
    
    <b>a. The Problem: print() Statements vs Professional Logging</b>
    
    <div style="background-color: #f9f9f9; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <b>Amateur Approach (print() statements):</b>
        <div style="background-color: #ffe6e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
            <pre>
# PROBLEMS WITH PRINT() FOR DEBUGGING
def process_order(order_id):
    print(f"Starting order {order_id}")  # üíÄ Hard to remove later
    
    try:
        # Process order...
        print("Calculating total...")    # üíÄ No timestamp
        total = calculate_total(order_id)
        print(f"Total: {total}")         # üíÄ Goes to stdout only
        
        print("Charging credit card...")
        charge_card(total)
        print("Card charged successfully")  # üíÄ Can't filter importance
        
        print("Updating inventory...")
        update_inventory(order_id)
        print("Inventory updated")          # üíÄ No file output
        
    except Exception as e:
        print(f"ERROR: {e}")               # üíÄ Same format as info messages
        return False
    
    print(f"Order {order_id} completed")   # üíÄ Clutters production output
    return True

# Problems:
# 1. Can't turn off without removing code
# 2. No timestamps
# 3. No severity levels
# 4. Only goes to console
# 5. Hard to search/filter
# 6. No structured data
# 7. Performance issues in production
            </pre>
        </div>
        
        <b>Professional Approach (Logging Module):</b>
        <div style="background-color: #e8f8e8; padding: 15px; margin: 10px 0; border-radius: 5px;">
            <pre>
# SOLUTION: PYTHON LOGGING MODULE
import logging

# Configure once at application start
logging.basicConfig(
    level=logging.INFO,
    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s',
    handlers=[
        logging.FileHandler('app.log'),      # To file
        logging.StreamHandler()              # To console
    ]
)

# Create logger for this module
logger = logging.getLogger(__name__)

def process_order(order_id):
    logger.info(f"Starting order {order_id}")
    
    try:
        # Process order with different log levels
        logger.debug("Calculating total...")  # Detailed info for debugging
        total = calculate_total(order_id)
        logger.debug(f"Total: {total}")
        
        logger.info("Charging credit card...")
        charge_card(total)
        logger.info("Card charged successfully")
        
        logger.debug("Updating inventory...")
        update_inventory(order_id)
        logger.debug("Inventory updated")
        
    except PaymentError as e:
        logger.error(f"Payment failed for order {order_id}: {e}", exc_info=True)
        return False
    except Exception as e:
        logger.critical(f"Unexpected error processing order {order_id}: {e}", exc_info=True)
        return False
    
    logger.info(f"Order {order_id} completed successfully")
    return True

# Benefits:
# 1. Different levels: DEBUG, INFO, WARNING, ERROR, CRITICAL
# 2. Timestamps automatically added
# 3. Goes to multiple destinations (file, console, email, etc.)
# 4. Can filter by level (turn off DEBUG in production)
# 5. Structured, searchable format
# 6. Performance optimized
# 7. Can rotate/archive old logs
            </pre>
        </div>
        
        <b>print() vs logging Comparison:</b>
        <div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
            <table style="width: 100%;">
                <tr>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>Feature</b></td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>print()</b></td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>logging</b></td>
                </tr>
                <tr>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Severity Levels</td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">‚ùå No</td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">‚úÖ 5 levels</td>
                </tr>
                <tr>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Timestamps</td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">‚ùå Manual</td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">‚úÖ Automatic</td>
                </tr>
                <tr>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Multiple Destinations</td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">‚ùå Console only</td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">‚úÖ File, email, HTTP, etc.</td>
                </tr>
                <tr>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Performance</td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">‚ùå Slow in production</td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">‚úÖ Optimized</td>
                </tr>
                <tr>
                    <td style="padding: 8px;"><b>Production Ready</b></td>
                    <td style="padding: 8px;"><b>‚ùå Never</b></td>
                    <td style="padding: 8px;"><b>‚úÖ Always</b></td>
                </tr>
            </table>
        </div>
    </div>
    
    <hr/>
    
    <b>b. Python Logging Module Architecture</b>
    
    <div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
# LOGGING MODULE COMPONENTS
import logging
import logging.handlers

# 1. LOGGER (Creates log records)
#    - Entry point for application code
#    - Organizes logs by module/area
logger = logging.getLogger("my_app.orders")  # Hierarchical name

# 2. HANDLER (Where logs go)
#    - Console handler (prints to terminal)
console_handler = logging.StreamHandler()

#    - File handler (writes to file)
file_handler = logging.FileHandler('app.log')

#    - Rotating file handler (prevents huge files)
rotating_handler = logging.handlers.RotatingFileHandler(
    'app.log', maxBytes=10485760, backupCount=5  # 10MB per file, keep 5 backups
)

#    - Timed rotating handler (new file daily/weekly)
timed_handler = logging.handlers.TimedRotatingFileHandler(
    'app.log', when='midnight', interval=1, backupCount=7
)

#    - SMTP handler (email errors)
email_handler = logging.handlers.SMTPHandler(
    mailhost=('smtp.gmail.com', 587),
    fromaddr='alerts@myapp.com',
    toaddrs=['admin@myapp.com'],
    subject='Application Error',
    credentials=('username', 'password'),
    secure=()
)

# 3. FORMATTER (How logs look)
formatter = logging.Formatter(
    '%(asctime)s - %(name)s - %(levelname)s - %(message)s'
)
console_handler.setFormatter(formatter)
file_handler.setFormatter(formatter)

# 4. FILTER (Which logs get through)
class ImportantFilter(logging.Filter):
    def filter(self, record):
        # Only log messages containing "ERROR" or from specific module
        return "ERROR" in record.getMessage() or "my_app.critical" in record.name

# 5. LEVEL (Importance threshold)
#    DEBUG (10) < INFO (20) < WARNING (30) < ERROR (40) < CRITICAL (50)
logger.setLevel(logging.DEBUG)        # This logger shows DEBUG and above
console_handler.setLevel(logging.INFO)  # Handler only shows INFO and above

# ASSEMBLE THE PIPELINE
logger.addHandler(console_handler)
logger.addHandler(file_handler)
logger.addHandler(rotating_handler)
logger.addFilter(ImportantFilter())

# USAGE
logger.debug("Detailed debugging info")      # Goes to file only (console filters it)
logger.info("User logged in")                # Goes to both file and console
logger.warning("Disk space low")             # Goes to both
logger.error("Database connection failed")   # Goes to both + email
logger.critical("System crash imminent")     # Goes everywhere + alerts

# LOGGING FLOW VISUALIZATION:
# logger.debug() ‚Üí Filter? ‚Üí Level check? ‚Üí Formatter ‚Üí Handlers ‚Üí Destinations
        </pre>
    </div>
    
    <b>Logging Architecture Diagram:</b>
    <div style="background-color: #fff; padding: 15px; margin: 10px 0; border-radius: 5px; text-align: center;">
        <div style="display: inline-block; text-align: left;">
            <div style="background-color: #3498db; color: white; padding: 10px; border-radius: 5px; width: 200px; margin: 0 auto;">
                <b>Application Code</b><br/>
                <code>logger.info("message")</code>
            </div>
            <div style="text-align: center; margin: 10px 0;">‚ñº Creates LogRecord</div>
            <div style="background-color: #2ecc71; color: white; padding: 10px; border-radius: 5px; width: 200px; margin: 0 auto;">
                <b>Logger</b><br/>
                ‚Ä¢ Level filter<br/>
                ‚Ä¢ Passes to handlers
            </div>
            <div style="text-align: center; margin: 10px 0;">‚ñº Passes through</div>
            <div style="background-color: #e74c3c; color: white; padding: 10px; border-radius: 5px; width: 200px; margin: 0 auto;">
                <b>Filter (Optional)</b><br/>
                ‚Ä¢ Additional filtering<br/>
                ‚Ä¢ Custom logic
            </div>
            <div style="text-align: center; margin: 10px 0;">‚ñº Formatted by</div>
            <div style="background-color: #f39c12; color: white; padding: 10px; border-radius: 5px; width: 200px; margin: 0 auto;">
                <b>Formatter</b><br/>
                ‚Ä¢ Adds timestamp<br/>
                ‚Ä¢ Standard format
            </div>
            <div style="text-align: center; margin: 10px 0;">‚ñº Sent to</div>
            <div style="display: flex; gap: 10px; justify-content: center;">
                <div style="background-color: #9b59b6; color: white; padding: 10px; border-radius: 5px; width: 120px;">
                    <b>Handler 1</b><br/>
                    File
                </div>
                <div style="background-color: #1abc9c; color: white; padding: 10px; border-radius: 5px; width: 120px;">
                    <b>Handler 2</b><br/>
                    Console
                </div>
                <div style="background-color: #e67e22; color: white; padding: 10px; border-radius: 5px; width: 120px;">
                    <b>Handler 3</b><br/>
                    Email
                </div>
            </div>
        </div>
    </div>
    
    <hr/>
    
    <b>c. Log Levels and When to Use Them</b>
    
    <div style="background-color: #f9f9f9; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <b>Log Level Hierarchy (Low to High):</b>
        <div style="background-color: #e8f4f8; padding: 15px; margin: 10px 0; border-radius: 5px;">
            <pre>
# LOG LEVELS IN PRACTICE
import logging

# CRITICAL (50) - System is unusable
# Example: Database corruption, security breach, system crash
logger.critical("Database corruption detected! Immediate action required!")
# Action: Wake up sysadmin, automatic failover

# ERROR (40) - Application error but system continues
# Example: Payment failed, API timeout, file not found
logger.error("Payment gateway timeout after 3 retries")
# Action: Alert on-call engineer, retry with backoff

# WARNING (30) - Unexpected but recoverable
# Example: Low disk space, deprecated API usage, slow response
logger.warning("Disk space below 10%: /var is 92% full")
# Action: Schedule cleanup, monitor closely

# INFO (20) - Normal application events
# Example: User login, order placed, backup completed
logger.info("User 'john_doe' logged in from IP 192.168.1.100")
# Action: Business monitoring, analytics

# DEBUG (10) - Detailed debugging information
# Example: Variable values, function entry/exit, SQL queries
logger.debug(f"Calculating tax: subtotal=\\\${subtotal}, tax_rate={tax_rate}")
# Action: Development debugging only

# NOTSET (0) - Capture everything
# Used as default for root logger

# PRACTICAL EXAMPLE: E-COMMERCE CHECKOUT
def process_checkout(order_id, user_id, payment_details):
    # INFO: Business events
    logger.info(f"Checkout started: order={order_id}, user={user_id}")
    
    # DEBUG: Detailed flow
    logger.debug(f"Payment details: {payment_details['type']}, amount: {payment_details['amount']}")
    
    try:
        # Process payment
        result = payment_gateway.charge(payment_details)
        
        if result['status'] == 'success':
            logger.info(f"Payment successful: order={order_id}, transaction={result['id']}")
        else:
            # WARNING: Business issue but recoverable
            logger.warning(f"Payment declined: order={order_id}, reason={result['reason']}")
            return False
            
    except PaymentGatewayError as e:
        # ERROR: System error but application continues
        logger.error(f"Payment gateway error: order={order_id}, error={e}")
        return False
        
    except Exception as e:
        # CRITICAL: Unexpected system failure
        logger.critical(f"Unexpected checkout failure: order={order_id}, error={e}", exc_info=True)
        raise  # Re-raise to upper level
        
    # DEBUG: More details
    logger.debug(f"Inventory updated for order={order_id}")
    logger.debug(f"Confirmation email sent for order={order_id}")
    
    # INFO: Completion
    logger.info(f"Checkout completed successfully: order={order_id}")
    return True
            </pre>
        </div>
        
        <b>Log Level Configuration by Environment:</b>
        <div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
            <table style="width: 100%;">
                <tr>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>Environment</b></td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>Console Level</b></td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>File Level</b></td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>Why</b></td>
                </tr>
                <tr>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Development</td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">DEBUG</td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">DEBUG</td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Need all details for debugging</td>
                </tr>
                <tr>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Testing/Staging</td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">INFO</td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">DEBUG</td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">File has details, console is clean</td>
                </tr>
                <tr>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Production</td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">WARNING</td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">INFO</td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Performance + enough info for debugging</td>
                </tr>
                <tr>
                    <td style="padding: 8px;"><b>Emergency Debug</b></td>
                    <td style="padding: 8px;"><b>DEBUG</b></td>
                    <td style="padding: 8px;"><b>DEBUG</b></td>
                    <td style="padding: 8px;">Temporarily for production issues</td>
                </tr>
            </table>
        </div>
    </div>
    
    <hr/>
    
    <b>d. Advanced Logging Features</b>
    
    <div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
import logging
import logging.config
import json
from datetime import datetime
import traceback

# 1. LOGGING CONFIGURATION WITH DICTIONARY (BEST PRACTICE)
LOGGING_CONFIG = {
    'version': 1,
    'disable_existing_loggers': False,
    
    'formatters': {
        'standard': {
            'format': '%(asctime)s [%(levelname)s] %(name)s: %(message)s',
            'datefmt': '%Y-%m-%d %H:%M:%S'
        },
        'detailed': {
            'format': '%(asctime)s [%(levelname)s] %(name)s:%(lineno)d - %(message)s'
        },
        'json': {
            'format': 'json',
            'class': 'pythonjsonlogger.jsonlogger.JsonFormatter',
            'timestamp': True
        }
    },
    
    'handlers': {
        'console': {
            'class': 'logging.StreamHandler',
            'level': 'INFO',
            'formatter': 'standard',
            'stream': 'ext://sys.stdout'
        },
        'file': {
            'class': 'logging.handlers.RotatingFileHandler',
            'level': 'DEBUG',
            'formatter': 'detailed',
            'filename': 'app.log',
            'maxBytes': 10485760,  # 10MB
            'backupCount': 5,
            'encoding': 'utf8'
        },
        'error_file': {
            'class': 'logging.FileHandler',
            'level': 'ERROR',
            'formatter': 'detailed',
            'filename': 'errors.log',
            'mode': 'a'
        },
        'email': {
            'class': 'logging.handlers.SMTPHandler',
            'level': 'CRITICAL',
            'formatter': 'standard',
            'mailhost': ('smtp.gmail.com', 587),
            'fromaddr': 'alerts@myapp.com',
            'toaddrs': ['admin@myapp.com', 'oncall@myapp.com'],
            'subject': 'CRITICAL ERROR in Application',
            'credentials': ('username', 'password'),
            'secure': ()
        }
    },
    
    'loggers': {
        '': {  # Root logger
            'handlers': ['console', 'file'],
            'level': 'DEBUG',
            'propagate': True
        },
        'my_app.database': {
            'handlers': ['file', 'error_file'],
            'level': 'INFO',
            'propagate': False  # Don't propagate to root
        },
        'my_app.payment': {
            'handlers': ['file', 'error_file', 'email'],
            'level': 'WARNING',
            'propagate': False
        }
    }
}

# Apply configuration
logging.config.dictConfig(LOGGING_CONFIG)

# 2. STRUCTURED LOGGING WITH EXTRA FIELDS
class StructuredLogger:
    def __init__(self, name):
        self.logger = logging.getLogger(name)
    
    def log_transaction(self, transaction_type, user_id, amount, status, **extra):
        # Create structured log entry
        log_data = {
            'timestamp': datetime.utcnow().isoformat(),
            'transaction_type': transaction_type,
            'user_id': user_id,
            'amount': amount,
            'status': status,
            **extra
        }
        
        if status == 'success':
            self.logger.info('Transaction completed', extra={'data': log_data})
        elif status == 'failed':
            self.logger.error('Transaction failed', extra={'data': log_data})
        else:
            self.logger.warning('Transaction pending', extra={'data': log_data})

# 3. EXCEPTION LOGGING WITH TRACEBACK
def log_exception_with_context(logger, message, exception, context=None):
    """Log exception with full traceback and context"""
    exc_info = (type(exception), exception, exception.__traceback__)
    
    # Add context to log message
    if context:
        message = f"{message} | Context: {context}"
    
    # Log with full traceback
    logger.error(message, exc_info=exc_info)
    
    # Also log to separate error tracking system
    error_details = {
        'message': str(exception),
        'type': type(exception).__name__,
        'traceback': traceback.format_exc(),
        'context': context,
        'timestamp': datetime.utcnow().isoformat()
    }
    
    # Could send to Sentry, Loggly, etc.
    # send_to_error_tracking(error_details)

# 4. PERFORMANCE LOGGING (TIMING)
import time
from functools import wraps

def log_execution_time(logger):
    """Decorator to log function execution time"""
    def decorator(func):
        \@wraps(func)
        def wrapper(*args, **kwargs):
            start_time = time.time()
            logger.debug(f"Starting {func.__name__}")
            
            try:
                result = func(*args, **kwargs)
                execution_time = time.time() - start_time
                
                if execution_time > 1.0:  # Slow operation
                    logger.warning(
                        f"Slow operation: {func.__name__} took {execution_time:.2f}s"
                    )
                else:
                    logger.debug(
                        f"Completed {func.__name__} in {execution_time:.3f}s"
                    )
                
                return result
            except Exception as e:
                execution_time = time.time() - start_time
                logger.error(
                    f"Failed {func.__name__} after {execution_time:.3f}s: {e}"
                )
                raise
        return wrapper
    return decorator

# 5. LOG FILTERING AND SAMPLING
class RateLimitFilter(logging.Filter):
    """Prevent log spam by rate-limiting similar messages"""
    def __init__(self, rate_limit_seconds=60):
        super().__init__()
        self.rate_limit_seconds = rate_limit_seconds
        self.last_logged = {}
    
    def filter(self, record):
        # Create a key from message and level
        key = f"{record.levelno}:{record.getMessage()}"
        current_time = time.time()
        
        if key in self.last_logged:
            time_since = current_time - self.last_logged[key]
            if time_since < self.rate_limit_seconds:
                return False  # Skip this log
        
        self.last_logged[key] = current_time
        return True

class SanitizeFilter(logging.Filter):
    """Remove sensitive data from logs"""
    SENSITIVE_KEYS = ['password', 'credit_card', 'ssn', 'token', 'secret']
    
    def filter(self, record):
        message = record.getMessage()
        
        # Sanitize sensitive data
        for key in self.SENSITIVE_KEYS:
            if key in message.lower():
                # Replace sensitive data with [REDACTED]
                import re
                pattern = re.compile(f'{key}[=:]\s*[\w\-\.@]+', re.IGNORECASE)
                record.msg = pattern.sub(f'{key}=[REDACTED]', record.msg)
        
        return True

# 6. CONTEXTUAL LOGGING (LOG ADAPTERS)
class ContextFilter(logging.Filter):
    """Add contextual information to all log records"""
    def __init__(self, context=None):
        super().__init__()
        self.context = context or {}
    
    def filter(self, record):
        for key, value in self.context.items():
            setattr(record, key, value)
        return True

class RequestLogger:
    """Logger that adds request context to all logs"""
    def __init__(self, logger, request_id=None, user_id=None, ip_address=None):
        self.logger = logger
        self.context = {
            'request_id': request_id or 'N/A',
            'user_id': user_id or 'anonymous',
            'ip_address': ip_address or '0.0.0.0'
        }
        
        # Add filter to logger
        context_filter = ContextFilter(self.context)
        self.logger.addFilter(context_filter)
    
    def info(self, msg, *args, **kwargs):
        self.logger.info(msg, *args, **kwargs)
    
    def error(self, msg, *args, **kwargs):
        self.logger.error(msg, *args, **kwargs)
    
    # ... other logging methods

# USAGE EXAMPLE
def demonstrate_advanced_logging():
    # Apply configuration
    logging.config.dictConfig(LOGGING_CONFIG)
    
    # Get loggers
    app_logger = logging.getLogger('my_app')
    db_logger = logging.getLogger('my_app.database')
    payment_logger = logging.getLogger('my_app.payment')
    
    # Add filters
    rate_limit_filter = RateLimitFilter(rate_limit_seconds=30)
    sanitize_filter = SanitizeFilter()
    app_logger.addFilter(rate_limit_filter)
    app_logger.addFilter(sanitize_filter)
    
    # Test different log levels
    app_logger.debug("Debug message - only in file")
    app_logger.info("Info message - console and file")
    app_logger.warning("Warning message - console and file")
    
    # Structured logging
    structured = StructuredLogger('my_app.transactions')
    structured.log_transaction(
        transaction_type='purchase',
        user_id='user123',
        amount=99.99,
        status='success',
        items=3,
        currency='USD'
    )
    
    # Performance logging
    \@log_execution_time(app_logger)
    def slow_operation():
        time.sleep(0.5)
        return "Done"
    
    slow_operation()
    
    # Contextual logging
    request_logger = RequestLogger(
        logger=app_logger,
        request_id='req_abc123',
        user_id='john_doe',
        ip_address='192.168.1.100'
    )
    
    request_logger.info("User accessed dashboard")
    request_logger.error("Failed to load user data")

if __name__ == "__main__":
    demonstrate_advanced_logging()
        </pre>
    </div>
    
    <hr/>
    
    <b>e. Practical: Complete Logging System for E-commerce</b>
    
    <div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
import logging
import logging.config
import logging.handlers
import json
import os
from datetime import datetime
from typing import Dict, Any, Optional

# ===== LOGGING CONFIGURATION =====
def setup_logging(environment: str = 'development') -> None:
    """Setup comprehensive logging based on environment"""
    
    log_dir = 'logs'
    os.makedirs(log_dir, exist_ok=True)
    
    config = {
        'version': 1,
        'disable_existing_loggers': False,
        
        'formatters': {
            'simple': {
                'format': '%(levelname)s: %(message)s'
            },
            'standard': {
                'format': '%(asctime)s [%(levelname)s] %(name)s: %(message)s',
                'datefmt': '%Y-%m-%d %H:%M:%S'
            },
            'detailed': {
                'format': '%(asctime)s [%(levelname)s] %(name)s:%(lineno)d - %(message)s'
            },
            'json': {
                '()': 'pythonjsonlogger.jsonlogger.JsonFormatter',
                'format': '%(timestamp)s %(levelname)s %(name)s %(message)s %(module)s %(funcName)s'
            }
        },
        
        'filters': {
            'sanitize_sensitive': {
                '()': 'ecommerce.logging.SanitizeFilter'
            }
        },
        
        'handlers': {
            'console': {
                'class': 'logging.StreamHandler',
                'level': 'INFO' if environment == 'production' else 'DEBUG',
                'formatter': 'standard',
                'stream': 'ext://sys.stdout',
                'filters': ['sanitize_sensitive']
            },
            
            'app_file': {
                'class': 'logging.handlers.RotatingFileHandler',
                'level': 'DEBUG',
                'formatter': 'detailed',
                'filename': os.path.join(log_dir, 'application.log'),
                'maxBytes': 10485760,  # 10MB
                'backupCount': 10,
                'encoding': 'utf8',
                'filters': ['sanitize_sensitive']
            },
            
            'error_file': {
                'class': 'logging.handlers.RotatingFileHandler',
                'level': 'WARNING',
                'formatter': 'detailed',
                'filename': os.path.join(log_dir, 'errors.log'),
                'maxBytes': 5242880,  # 5MB
                'backupCount': 5,
                'encoding': 'utf8'
            },
            
            'audit_file': {
                'class': 'logging.handlers.TimedRotatingFileHandler',
                'level': 'INFO',
                'formatter': 'json',
                'filename': os.path.join(log_dir, 'audit.log'),
                'when': 'midnight',
                'interval': 1,
                'backupCount': 30,  # Keep 30 days
                'encoding': 'utf8'
            },
            
            'email_alerts': {
                'class': 'logging.handlers.SMTPHandler',
                'level': 'ERROR',
                'formatter': 'standard',
                'mailhost': ('smtp.gmail.com', 587),
                'fromaddr': 'alerts@ecommerce.com',
                'toaddrs': ['devops@ecommerce.com'],
                'subject': 'E-commerce Application ERROR',
                'credentials': (os.getenv('SMTP_USER'), os.getenv('SMTP_PASS')),
                'secure': (),
                'timeout': 30
            } if environment == 'production' else None
        },
        
        'loggers': {
            # Root logger
            '': {
                'handlers': ['console', 'app_file'],
                'level': 'DEBUG',
            },
            
            # Application specific loggers
            'ecommerce.api': {
                'handlers': ['app_file', 'error_file'],
                'level': 'INFO',
                'propagate': False
            },
            
            'ecommerce.database': {
                'handlers': ['app_file'],
                'level': 'WARNING' if environment == 'production' else 'INFO',
                'propagate': False
            },
            
            'ecommerce.payment': {
                'handlers': ['app_file', 'error_file', 'email_alerts'] if environment == 'production' else ['app_file', 'error_file'],
                'level': 'INFO',
                'propagate': False
            },
            
            'ecommerce.audit': {
                'handlers': ['audit_file'],
                'level': 'INFO',
                'propagate': False
            }
        }
    }
    
    # Remove None handlers
    config['handlers'] = {k: v for k, v in config['handlers'].items() if v is not None}
    
    # Apply configuration
    logging.config.dictConfig(config)

# ===== CUSTOM FILTERS =====
class SanitizeFilter(logging.Filter):
    """Remove sensitive information from logs"""
    
    SENSITIVE_PATTERNS = [
        (r'(?i)password[=:]\s*[\w@\.\-]+', 'password=[REDACTED]'),
        (r'(?i)cc_number[=:]\s*[\d\-]+', 'cc_number=[REDACTED]'),
        (r'(?i)cvv[=:]\s*\d{3,4}', 'cvv=[REDACTED]'),
        (r'(?i)token[=:]\s*[\w\-\.]+', 'token=[REDACTED]'),
        (r'(?i)api_key[=:]\s*[\w\-]+', 'api_key=[REDACTED]'),
    ]
    
    def filter(self, record):
        import re
        
        for pattern, replacement in self.SENSITIVE_PATTERNS:
            record.msg = re.sub(pattern, replacement, str(record.msg))
        
        return True

# ===== AUDIT LOGGER =====
class AuditLogger:
    """Logger for business-critical audit trails"""
    
    def __init__(self):
        self.logger = logging.getLogger('ecommerce.audit')
    
    def log_user_action(self, user_id: str, action: str, resource: str, 
                        details: Optional[Dict] = None, status: str = 'success'):
        """Log user actions for audit trail"""
        audit_record = {
            'timestamp': datetime.utcnow().isoformat(),
            'user_id': user_id,
            'action': action,
            'resource': resource,
            'status': status,
            'details': details or {},
            'type': 'user_action'
        }
        
        self.logger.info(json.dumps(audit_record))
    
    def log_payment(self, transaction_id: str, user_id: str, amount: float,
                    currency: str, payment_method: str, status: str):
        """Log payment transactions"""
        audit_record = {
            'timestamp': datetime.utcnow().isoformat(),
            'transaction_id': transaction_id,
            'user_id': user_id,
            'amount': amount,
            'currency': currency,
            'payment_method': payment_method,
            'status': status,
            'type': 'payment'
        }
        
        self.logger.info(json.dumps(audit_record))
    
    def log_security_event(self, event_type: str, severity: str, 
                           user_id: Optional[str], ip_address: str, details: Dict):
        """Log security-related events"""
        audit_record = {
            'timestamp': datetime.utcnow().isoformat(),
            'event_type': event_type,
            'severity': severity,
            'user_id': user_id,
            'ip_address': ip_address,
            'details': details,
            'type': 'security'
        }
        
        if severity == 'high':
            self.logger.error(json.dumps(audit_record))
        else:
            self.logger.warning(json.dumps(audit_record))

# ===== APPLICATION LOGGER WRAPPER =====
class EcommerceLogger:
    """Wrapper for application logging with context"""
    
    def __init__(self, module_name: str, request_id: Optional[str] = None,
                 user_id: Optional[str] = None):
        self.logger = logging.getLogger(f'ecommerce.{module_name}')
        self.request_id = request_id
        self.user_id = user_id
    
    def _add_context(self, message: str) -> str:
        """Add request context to log message"""
        context = []
        if self.request_id:
            context.append(f"req_id={self.request_id}")
        if self.user_id:
            context.append(f"user={self.user_id}")
        
        if context:
            return f"{message} [{' '.join(context)}]"
        return message
    
    def debug(self, message: str, **kwargs):
        self.logger.debug(self._add_context(message), **kwargs)
    
    def info(self, message: str, **kwargs):
        self.logger.info(self._add_context(message), **kwargs)
    
    def warning(self, message: str, **kwargs):
        self.logger.warning(self._add_context(message), **kwargs)
    
    def error(self, message: str, exc_info: bool = True, **kwargs):
        self.logger.error(self._add_context(message), exc_info=exc_info, **kwargs)
    
    def critical(self, message: str, **kwargs):
        self.logger.critical(self._add_context(message), **kwargs)
    
    def log_transaction(self, transaction_type: str, amount: float, 
                        status: str, **details):
        """Log business transaction"""
        log_data = {
            'type': 'transaction',
            'transaction_type': transaction_type,
            'amount': amount,
            'status': status,
            'timestamp': datetime.utcnow().isoformat(),
            'request_id': self.request_id,
            'user_id': self.user_id,
            **details
        }
        self.info(f"Transaction: {transaction_type} - \\\${amount} - {status}", 
                  extra={'transaction_data': log_data})

# ===== USAGE IN E-COMMERCE APPLICATION =====
class OrderProcessor:
    """Example class demonstrating comprehensive logging"""
    
    def __init__(self, request_id: str, user_id: str):
        self.logger = EcommerceLogger('order_processor', request_id, user_id)
        self.audit_logger = AuditLogger()
        self.request_id = request_id
        self.user_id = user_id
    
    def process_order(self, order_data: Dict[str, Any]) -> bool:
        """Process an order with full logging"""
        self.logger.info(f"Starting order processing: {order_data['order_id']}")
        self.audit_logger.log_user_action(
            user_id=self.user_id,
            action='process_order',
            resource=f"order/{order_data['order_id']}",
            details={'items': len(order_data['items'])}
        )
        
        try:
            # Step 1: Validate order
            self.logger.debug("Validating order items")
            if not self._validate_order(order_data):
                self.logger.warning("Order validation failed")
                return False
            
            # Step 2: Process payment
            self.logger.info("Processing payment")
            payment_success = self._process_payment(order_data)
            
            if not payment_success:
                self.logger.error("Payment processing failed")
                self.audit_logger.log_payment(
                    transaction_id=order_data.get('transaction_id', 'unknown'),
                    user_id=self.user_id,
                    amount=order_data['total'],
                    currency='USD',
                    payment_method=order_data['payment_method'],
                    status='failed'
                )
                return False
            
            # Step 3: Update inventory
            self.logger.debug("Updating inventory")
            self._update_inventory(order_data)
            
            # Step 4: Send confirmation
            self.logger.info("Sending order confirmation")
            self._send_confirmation(order_data)
            
            # Log successful transaction
            self.logger.log_transaction(
                transaction_type='purchase',
                amount=order_data['total'],
                status='success',
                order_id=order_data['order_id'],
                items_count=len(order_data['items'])
            )
            
            self.audit_logger.log_payment(
                transaction_id=order_data.get('transaction_id', 'unknown'),
                user_id=self.user_id,
                amount=order_data['total'],
                currency='USD',
                payment_method=order_data['payment_method'],
                status='success'
            )
            
            self.logger.info(f"Order {order_data['order_id']} processed successfully")
            return True
            
        except Exception as e:
            self.logger.error(f"Unexpected error processing order: {e}")
            self.audit_logger.log_user_action(
                user_id=self.user_id,
                action='process_order',
                resource=f"order/{order_data['order_id']}",
                details={'error': str(e)},
                status='failed'
            )
            return False
    
    def _validate_order(self, order_data: Dict) -> bool:
        """Validate order (simplified)"""
        self.logger.debug(f"Validating {len(order_data['items'])} items")
        # Validation logic here
        return True
    
    def _process_payment(self, order_data: Dict) -> bool:
        """Process payment (simplified)"""
        self.logger.info(f"Charging \\\${order_data['total']} via {order_data['payment_method']}")
        
        # Simulate payment processing
        try:
            # Payment gateway call would go here
            if order_data['total'] > 10000:
                self.logger.warning("Large transaction detected")
            
            # Log payment attempt (sanitized)
            self.logger.debug(
                f"Payment attempt: amount={order_data['total']}, "
                f"method={order_data['payment_method']}, "
                f"cc_number=[REDACTED]"
            )
            
            return True
        except Exception as e:
            self.logger.error(f"Payment failed: {e}")
            return False
    
    def _update_inventory(self, order_data: Dict):
        """Update inventory (simplified)"""
        self.logger.debug(f"Updating inventory for {len(order_data['items'])} items")
        # Inventory update logic here
    
    def _send_confirmation(self, order_data: Dict):
        """Send confirmation (simplified)"""
        self.logger.info(f"Sending confirmation for order {order_data['order_id']}")
        # Email sending logic here

# ===== LOG ANALYSIS HELPER =====
class LogAnalyzer:
    """Helper for analyzing logs"""
    
    @staticmethod
    def count_errors_by_type(log_file: str, time_range: str = 'today') -> Dict[str, int]:
        """Count errors by type from log file"""
        error_counts = {}
        
        try:
            with open(log_file, 'r') as f:
                for line in f:
                    if 'ERROR' in line or 'CRITICAL' in line:
                        # Extract error type (simplified)
                        for error_type in ['DatabaseError', 'PaymentError', 'ValidationError', 'NetworkError']:
                            if error_type in line:
                                error_counts[error_type] = error_counts.get(error_type, 0) + 1
                                break
                        else:
                            error_counts['Other'] = error_counts.get('Other', 0) + 1
        
        except FileNotFoundError:
            print(f"Log file not found: {log_file}")
        
        return error_counts
    
    @staticmethod
    def find_slow_operations(log_file: str, threshold_seconds: float = 1.0):
        """Find operations slower than threshold"""
        slow_ops = []
        
        try:
            with open(log_file, 'r') as f:
                for line in f:
                    if 'slow' in line.lower() or 'took' in line:
                        # Parse time (simplified)
                        import re
                        time_match = re.search(r'took\s*([\d\.]+)s', line)
                        if time_match:
                            time_taken = float(time_match.group(1))
                            if time_taken > threshold_seconds:
                                slow_ops.append({
                                    'line': line.strip(),
                                    'time': time_taken
                                })
        
        except FileNotFoundError:
            print(f"Log file not found: {log_file}")
        
        return slow_ops

# ===== MAIN DEMONSTRATION =====
if __name__ == "__main__":
    # Setup logging for development
    setup_logging('development')
    
    print("=== E-commerce Logging System Demonstration === ")
    
    # Create order processor
    processor = OrderProcessor(
        request_id='req_abc123xyz',
        user_id='user_789'
    )
    
    # Simulate order processing
    order_data = {
        'order_id': 'ord_123456',
        'total': 149.99,
        'payment_method': 'credit_card',
        'items': [
            {'id': 'item_001', 'name': 'Laptop', 'price': 1299.99},
            {'id': 'item_002', 'name': 'Mouse', 'price': 25.99}
        ],
        'cc_number': '4111-1111-1111-1111',  # Will be redacted
        'cvv': '123'  # Will be redacted
    }
    
    print("Processing order...")
    success = processor.process_order(order_data)
    
    print(f" Order processing {'succeeded' if success else 'failed'}")
    
    # Demonstrate log analysis
    print(" === Log Analysis ===")
    error_counts = LogAnalyzer.count_errors_by_type('logs/errors.log')
    if error_counts:
        print(f"Error counts: {error_counts}")
    else:
        print("No errors found in error log")
    
    # Check for slow operations
    slow_ops = LogAnalyzer.find_slow_operations('logs/application.log')
    if slow_ops:
        print(f" Found {len(slow_ops)} slow operations:")
        for op in slow_ops[:3]:  # Show first 3
            print(f"  - {op['line'][:100]}...")
    else:
        print(" No slow operations found")
    
    print(" === Check generated log files ===")
    print("1. logs/application.log - All application logs")
    print("2. logs/errors.log - Warnings and errors only")
    print("3. logs/audit.log - JSON formatted audit trail")
        </pre>
    </div>
    
    <hr/>
    
    <div class="assignment-box">
        <h4>Assignment: Build a Monitoring Dashboard with Logs</h4>
        
        <b>Part 1: Implement Comprehensive Logging</b>
        <div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
            Create a logging system for a web application with:
            <ol>
                <li><b>Multiple loggers:</b> app, database, api, security, audit</li>
                <li><b>Different handlers:</b> console, file, rotating file, email (for errors)</li>
                <li><b>Custom filters:</b> Sanitize sensitive data, rate limiting</li>
                <li><b>JSON formatting:</b> For machine-readable audit logs</li>
                <li><b>Environment-based configuration:</b> Different settings for dev/test/prod</li>
            </ol>
        </div>
        
        <b>Part 2: Create Log Analysis Tools</b>
        <div style="background-color: #fff0e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
            Build tools to analyze logs:
            <pre>
class LogAnalyzer:
    def error_report(self, log_file, hours=24):
        """Generate error report for last N hours"""
    
    def performance_report(self, log_file):
        """Find slow operations and bottlenecks"""
    
    def user_activity_report(self, audit_log):
        """Generate user activity report from audit logs"""
    
    def alert_on_anomalies(self, log_file):
        """Detect unusual patterns (spike in errors, etc.)"""
            </pre>
        </div>
        
        <b>Part 3: Build a Simple Monitoring Dashboard</b>
        <div style="background-color: #f0fff0; padding: 15px; margin: 10px 0; border-radius: 5px;">
            Create a console-based dashboard that shows:
            <ul>
                <li>Current application status (UP/DOWN based on recent logs)</li>
                <li>Error rate (errors per minute)</li>
                <li>Most frequent error types</li>
                <li>Slowest endpoints/operations</li>
                <li>Active users (from audit logs)</li>
                <li>Disk usage of log files</li>
            </ul>
        </div>
        
        <b>Part 4: Simulate Application and Generate Logs</b>
        <div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px; font-family: monospace;">
            # Simulate different scenarios
            scenarios = [
                ("Normal operation", "Generate INFO logs for user actions"),
                ("Errors", "Simulate database errors, payment failures"),
                ("Performance issues", "Simulate slow database queries"),
                ("Security events", "Simulate failed logins, suspicious activity"),
                ("High traffic", "Generate many logs quickly to test rotation")
            ]
            
            # Your dashboard should show:
            # 1. Real-time log count by level
            # 2. Error rate graph (simple ASCII)
            # 3. Top error messages
            # 4. System resource usage
            # 5. Alert when error rate exceeds threshold
        </div>
    </div>
    
    <hr/>
    
    <h3>Common Logging Mistakes & Solutions</h3>
    
    <b>Mistake 1: Logging too much or too little</b>
    <div style="background-color: #ffe6e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
# WRONG - Either extreme
# Too much: Performance hit, hard to find important info
logger.debug(f"User clicked button: {button_id} at {datetime.now()}")
logger.debug(f"Button color: {button_color}, size: {button_size}")
logger.debug(f"Mouse position: x={x}, y={y}")  # üíÄ Over-logging!

# Too little: Can't debug issues
logger.info("Processing payment")  # üíÄ No details!
# Payment fails... Why? No logs!

# RIGHT - Balanced logging
logger.debug(f"Payment initiated: amount=\\\${amount}, method={method}")
logger.info(f"Payment processing: transaction={transaction_id}")
# If fails:
logger.error(f"Payment failed: transaction={transaction_id}, error={e}", exc_info=True)
        </pre>
    </div>
    
    <b>Mistake 2: Logging sensitive information</b>
    <div style="background-color: #ffe6e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
# WRONG - Exposing sensitive data
logger.info(f"User login: username={username}, password={password}")  # üíÄ SECURITY RISK!
logger.debug(f"Credit card: {credit_card_number}, cvv={cvv}")  # üíÄ COMPLIANCE VIOLATION!

# RIGHT - Sanitize or hash
logger.info(f"User login: username={username}")
logger.debug(f"Payment: last4={credit_card_number[-4:]}, amount=\\\${amount}")

# Even better: Use filters
class SanitizeFilter(logging.Filter):
    def filter(self, record):
        if 'password' in record.msg or 'credit_card' in record.msg:
            record.msg = re.sub(r'(password|credit_card)=[^,\s]+', r'\x01=[REDACTED]', record.msg)
        return True
        </pre>
    </div>
    
    <b>Mistake 3: Not including context</b>
    <div style="background-color: #ffe6e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
# WRONG - No context
logger.error("Payment failed")  # üíÄ Which payment? Which user? When?

# RIGHT - Include context
logger.error(
    f"Payment failed: transaction={transaction_id}, "
    f"user={user_id}, amount=\\\${amount}, error={error_message}",
    exc_info=True  # Include stack trace for debugging
)

# Even better: Structured logging
log_data = {
    'event': 'payment_failed',
    'transaction_id': transaction_id,
    'user_id': user_id,
    'amount': amount,
    'error': error_message,
    'timestamp': datetime.utcnow().isoformat()
}
logger.error(json.dumps(log_data))
        </pre>
    </div>
    
    <hr/>
    
    <h3>Quick Reference: Logging Best Practices</h3>
    
    <div style="background-color: #f9f9f9; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <table style="width: 100%;">
            <tr>
                <td style="padding: 8px; border-bottom: 1px solid #ccc; width: 30%;"><b>Practice</b></td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>Implementation</b></td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>Benefit</b></td>
            </tr>
            <tr>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Use appropriate levels</td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">DEBUG for dev, INFO for prod</td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Right amount of detail</td>
            </tr>
            <tr>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Include context</td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">User ID, request ID, timestamps</td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Traceability</td>
            </tr>
            <tr>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Structure logs</td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">JSON format, consistent fields</td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Easy analysis</td>
            </tr>
            <tr>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Rotate logs</td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">RotatingFileHandler</td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Prevent disk full</td>
            </tr>
            <tr>
                <td style="padding: 8px;"><b>Monitor logs</b></td>
                <td style="padding: 8px;"><b>Regular review, alert on errors</b></td>
                <td style="padding: 8px;">Proactive issue detection</td>
            </tr>
        </table>
    </div>
    
    <div style="background-color: #e8f8e8; padding: 20px; margin: 20px 0; border-radius: 5px; border-left: 5px solid #2ecc71;">
        <h4>üöÄ Homework: Build a Log Analysis CLI Tool</h4>
        <p>Create a command-line tool to analyze application logs:</p>
        <ol>
            <li><b>Features:</b>
                <ul>
                    <li><code>log-analyzer errors --last 1h</code> - Show errors in last hour</li>
                    <li><code>log-analyzer stats --file app.log</code> - Show statistics</li>
                    <li><code>log-analyzer search "payment failed"</code> - Search logs</li>
                    <li><code>log-analyzer monitor --follow</code> - Monitor logs in real-time</li>
                    <li><code>log-analyzer report --daily</code> - Generate daily report</li>
                </ul>
            </li>
            <li><b>Advanced Features:</b>
                <ul>
                    <li>Detect error rate spikes</li>
                    <li>Identify most frequent error messages</li>
                    <li>Calculate application uptime from logs</li>
                    <li>Export to CSV/JSON for further analysis</li>
                </ul>
            </li>
            <li><b>Bonus:</b> Add email alerts when error rate exceeds threshold</li>
        </ol>
        <p><b>Remember:</b> Logs are useless if nobody looks at them. Good logging includes monitoring and analysis!</p>
    </div>`
            },
            "9-3": {
                icon: "fa-file-alt",
                title: "Reading from Text and CSV Files",
                html: `<h1>Week 9, Day 3: Reading from Text and CSV Files</h1>
    <p>Today we learn how to read data from text files and CSV files - essential skills for working with external data in real-world applications.</p>
    
    <div class="analogy-box">
        <b>Analogy: Library vs Digital Archive üìöüíæ</b><br/>
        <ul style="margin-top: 10px;">
            <li><b>Text File</b> = Novel (continuous text, paragraphs)</li>
            <li><b>CSV File</b> = Spreadsheet (rows and columns, structured)</li>
            <li><b>File Reading</b> = Reading a book (start to finish)</li>
            <li><b>File Parsing</b> = Analyzing content (extracting meaning)</li>
            <li><b>Character Encoding</b> = Language/translation (UTF-8, ASCII)</li>
        </ul>
    </div>

    <h3>Key Topics</h3>
    <ul>
        <li>Different approaches to reading text files</li>
        <li>Working with character encodings</li>
        <li>Reading and parsing CSV files</li>
        <li>Handling large files efficiently</li>
        <li>Practical: Data analysis from files</li>
    </ul>

    <h3>In-Depth Explanation</h3>
    
    <b>a. Reading Text Files - Multiple Approaches</b>
    
    <div style="background-color: #f9f9f9; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <b>Sample Data File (data.txt):</b>
        <div style="background-color: #e8f4f8; padding: 15px; margin: 10px 0; border-radius: 5px; font-family: monospace;">
            Welcome to the Data File
            ========================
            
            This file contains sample data for our Python tutorial.
            
            User Data:
            ----------
            John Doe,25,New York,Software Engineer
            Jane Smith,30,San Francisco,Data Scientist
            Bob Johnson,22,Chicago,Web Developer
            Alice Brown,28,Boston,UX Designer
            
            Notes:
            ------
            ‚Ä¢ This is a multi-line text file
            ‚Ä¢ It contains both structured and unstructured data
            ‚Ä¢ We'll learn to parse this properly
            
            Total Users: 4
            Last Updated: 2024-01-15
        </div>
        
        <b>Different Reading Methods:</b>
        <div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
            <pre>
import os
from pathlib import Path

# METHOD 1: read() - Read entire file at once
def read_entire_file(filename):
    """Simple but memory-intensive for large files"""
    try:
        with open(filename, 'r', encoding='utf-8') as file:
            content = file.read()  # Reads everything into memory
        return content
    except FileNotFoundError:
        return f"Error: File '{filename}' not found"
    except UnicodeDecodeError:
        return "Error: File encoding issue"

# METHOD 2: readlines() - Read all lines into list
def read_all_lines(filename):
    """Returns list of lines, preserves line endings"""
    try:
        with open(filename, 'r', encoding='utf-8') as file:
            lines = file.readlines()  # List of strings
        return lines
    except FileNotFoundError:
        return []

# METHOD 3: readline() - Read one line at a time
def read_line_by_line(filename):
    """Memory efficient, good for large files"""
    try:
        with open(filename, 'r', encoding='utf-8') as file:
            while True:
                line = file.readline()
                if not line:  # Empty string means EOF
                    break
                yield line.strip()  # Generator for efficiency
    except FileNotFoundError:
        yield "Error: File not found"

# METHOD 4: Iterate directly over file object
def iterate_file(filename):
    """Most Pythonic way to read files"""
    try:
        with open(filename, 'r', encoding='utf-8') as file:
            for line_number, line in enumerate(file, 1):
                # Process each line
                processed = line.strip()
                yield line_number, processed
    except FileNotFoundError:
        yield (0, "Error: File not found")

# METHOD 5: read() with chunks (for very large files)
def read_in_chunks(filename, chunk_size=1024):
    """Read file in chunks to handle very large files"""
    try:
        with open(filename, 'r', encoding='utf-8') as file:
            while True:
                chunk = file.read(chunk_size)
                if not chunk:
                    break
                yield chunk
    except FileNotFoundError:
        yield "Error: File not found"

# METHOD 6: Using pathlib (modern approach)
def read_with_pathlib(filename):
    """Modern file handling with pathlib"""
    try:
        file_path = Path(filename)
        if not file_path.exists():
            return "Error: File not found"
        
        # Various reading methods
        content = file_path.read_text(encoding='utf-8')
        # Or read lines: lines = file_path.read_text().splitlines()
        
        return content
    except Exception as e:
        return f"Error: {e}"

# COMPARISON AND USAGE
def demonstrate_reading_methods():
    filename = "data.txt"
    
    print("=== Method 1: read() entire file ===")
    content = read_entire_file(filename)
    print(f"File size: {len(content)} characters")
    print(f"First 100 chars: {content[:100]}...")
    
    print("\n=== Method 2: readlines() ===")
    lines = read_all_lines(filename)
    print(f"Number of lines: {len(lines)}")
    print(f"First 3 lines: {lines[:3]}")
    
    print("\n=== Method 3: readline() generator ===")
    for i, line in enumerate(read_line_by_line(filename)):
        if i < 5:  # Show first 5 lines
            print(f"Line {i+1}: {line}")
        if i >= 4:
            break
    
    print("\n=== Method 4: Iterate directly ===")
    for line_num, line in iterate_file(filename):
        if line_num <= 3:
            print(f"Line {line_num}: {line}")
    
    print("\n=== Method 5: Chunk reading (simulated) ===")
    # Create a large file for demonstration
    with open("large_file.txt", "w") as f:
        f.write("X" * 5000)  # 5000 character file
    
    total_chars = 0
    for chunk in read_in_chunks("large_file.txt", chunk_size=1000):
        total_chars += len(chunk)
    print(f"Read {total_chars} characters in chunks")
    
    # Cleanup
    os.remove("large_file.txt")
    
    print("\n=== Method 6: pathlib ===")
    content = read_with_pathlib(filename)
    print(f"Using pathlib: {len(content)} characters read")

if __name__ == "__main__":
    demonstrate_reading_methods()
            </pre>
        </div>
        
        <b>When to Use Each Method:</b>
        <div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
            <table style="width: 100%;">
                <tr>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc; width: 20%;"><b>Method</b></td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>Best For</b></td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>Memory Use</b></td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>Example</b></td>
                </tr>
                <tr>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;"><code>read()</code></td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Small files, need entire content</td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">High</td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Config files, templates</td>
                </tr>
                <tr>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;"><code>readlines()</code></td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Need list of all lines</td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">High</td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Small datasets</td>
                </tr>
                <tr>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;"><code>for line in file</code></td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Most common case</td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Low</td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Log files, data processing</td>
                </tr>
                <tr>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;"><code>read(chunk_size)</code></td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Very large files</td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Very Low</td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">GB-sized files</td>
                </tr>
                <tr>
                    <td style="padding: 8px;"><b><code>pathlib</code></b></td>
                    <td style="padding: 8px;"><b>Modern Python code</b></td>
                    <td style="padding: 8px;">Medium</td>
                    <td style="padding: 8px;">Any file reading</td>
                </tr>
            </table>
        </div>
    </div>
    
    <hr/>
    
    <b>b. Character Encodings - The Silent Problem</b>
    
    <div style="background-color: #f9f9f9; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <b>Understanding Encodings:</b>
        <div style="background-color: #e8f4f8; padding: 15px; margin: 10px 0; border-radius: 5px;">
            <pre>
# THE ENCODING PROBLEM DEMONSTRATION
def demonstrate_encodings():
    """Show why encoding matters"""
    
    # Common encodings:
    # - utf-8: Universal (recommended default)
    # - ascii: Basic English only
    # - latin-1: Western European
    # - cp1252: Windows Western
    # - iso-8859-1: Another Western encoding
    
    text_with_special = " caf√© r√©sum√© na√Øve Pok√©mon üòÄ"
    
    print("Original text:", text_with_special)
    print("Length:", len(text_with_special))
    
    # Write with different encodings
    test_files = [
        ("utf8.txt", "utf-8"),
        ("ascii.txt", "ascii"),
        ("latin1.txt", "latin-1")
    ]
    
    for filename, encoding in test_files:
        try:
            with open(filename, 'w', encoding=encoding) as f:
                f.write(text_with_special)
            print(f"‚úì Written with {encoding}")
        except UnicodeEncodeError as e:
            print(f"‚úó {encoding} failed: {e}")
    
    # Read back with wrong encoding
    print("\n=== Reading with wrong encoding ===")
    try:
        with open("utf8.txt", 'r', encoding='ascii') as f:
            content = f.read()
        print("ASCII read of UTF-8 file:", content[:50])
    except UnicodeDecodeError as e:
        print(f"Expected error: {e}")
    
    # Detect encoding (requires chardet library)
    try:
        import chardet
        with open("utf8.txt", 'rb') as f:  # Read binary to detect
            raw_data = f.read()
            result = chardet.detect(raw_data)
            print(f"\nDetected encoding: {result['encoding']} with confidence {result['confidence']:.2%}")
    except ImportError:
        print("\nInstall 'chardet' for automatic encoding detection")
    
    # Cleanup
    import os
    for filename, _ in test_files:
        if os.path.exists(filename):
            os.remove(filename)

# SAFE FILE READING WITH ENCODING HANDLING
def read_file_safely(filename, encoding=None):
    """
    Read file with encoding fallback strategy
    """
    # Common encodings to try (in order of likelihood)
    encodings_to_try = [
        'utf-8',
        'cp1252',      # Windows
        'iso-8859-1',  # Latin-1
        'ascii'
    ]
    
    if encoding:
        encodings_to_try.insert(0, encoding)
    
    for enc in encodings_to_try:
        try:
            with open(filename, 'r', encoding=enc) as file:
                content = file.read()
            print(f"Successfully read with encoding: {enc}")
            return content, enc
        except UnicodeDecodeError:
            continue
        except FileNotFoundError:
            return None, f"File not found: {filename}"
    
    # If all encodings fail, try binary and decode with errors replaced
    try:
        with open(filename, 'rb') as file:
            binary_content = file.read()
        # Replace undecodable bytes with replacement character
        return binary_content.decode('utf-8', errors='replace'), 'utf-8 (with replacements)'
    except Exception as e:
        return None, f"Failed to read file: {e}"

# PRACTICAL EXAMPLE: PROCESSING USER-UPLOADED FILES
class FileProcessor:
    """Process files with unknown encoding"""
    
    @staticmethod
    def count_words_in_file(filename):
        """Count words in a file, handling encoding issues"""
        content, encoding_used = read_file_safely(filename)
        
        if content is None:
            return 0, f"Could not read file: {encoding_used}"
        
        # Basic word counting (split on whitespace)
        words = content.split()
        word_count = len(words)
        
        # Character statistics
        char_count = len(content)
        line_count = content.count('\n') + 1
        
        return {
            'filename': filename,
            'encoding': encoding_used,
            'word_count': word_count,
            'char_count': char_count,
            'line_count': line_count,
            'avg_word_length': char_count / word_count if word_count > 0 else 0
        }
    
    @staticmethod
    def find_pattern_in_file(filename, pattern, case_sensitive=True):
        """Search for pattern in file, handling large files"""
        results = []
        
        try:
            with open(filename, 'r', encoding='utf-8', errors='ignore') as file:
                for line_number, line in enumerate(file, 1):
                    search_line = line if case_sensitive else line.lower()
                    search_pattern = pattern if case_sensitive else pattern.lower()
                    
                    if search_pattern in search_line:
                        results.append({
                            'line_number': line_number,
                            'line': line.strip(),
                            'context': line.strip()[:100]  # First 100 chars
                        })
        except UnicodeDecodeError:
            # Fallback to binary search
            with open(filename, 'rb') as file:
                content = file.read()
                # Convert pattern to bytes
                if isinstance(pattern, str):
                    pattern_bytes = pattern.encode('utf-8', errors='ignore')
                else:
                    pattern_bytes = pattern
                
                if pattern_bytes in content:
                    results.append({
                        'line_number': 0,
                        'line': 'Pattern found in binary file',
                        'context': 'Binary content'
                    })
        
        return results

if __name__ == "__main__":
    print("=== Encoding Demonstration ===")
    demonstrate_encodings()
    
    print("\n=== Safe File Reading ===")
    # Create a test file with UTF-8
    with open("test_encoding.txt", "w", encoding="utf-8") as f:
        f.write("Hello World! üöÄ\n")
        f.write("Caf√© & R√©sum√©\n")
        f.write("Python is awesome! üêç\n")
    
    stats = FileProcessor.count_words_in_file("test_encoding.txt")
    print(f"File statistics: {stats}")
    
    # Search for pattern
    results = FileProcessor.find_pattern_in_file("test_encoding.txt", "Python")
    print(f"Search results for 'Python': {results}")
    
    # Cleanup
    import os
    if os.path.exists("test_encoding.txt"):
        os.remove("test_encoding.txt")
            </pre>
        </div>
        
        <b>Encoding Best Practices:</b>
        <div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
            <table style="width: 100%;">
                <tr>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>Situation</b></td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>Recommended Encoding</b></td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>Why</b></td>
                </tr>
                <tr>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">New files (your code)</td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">UTF-8</td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Universal, handles all characters</td>
                </tr>
                <tr>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Reading unknown files</td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">UTF-8 with errors='replace'</td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Prevents crashes, shows ÔøΩ for errors</td>
                </tr>
                <tr>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Windows files</td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">cp1252 or UTF-8</td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Common Windows encoding</td>
                </tr>
                <tr>
                    <td style="padding: 8px;"><b>Web data</b></td>
                    <td style="padding: 8px;"><b>UTF-8</b></td>
                    <td style="padding: 8px;">Web standard</td>
                </tr>
            </table>
        </div>
    </div>
    
    <hr/>
    
    <b>c. Reading and Parsing CSV Files</b>
    
    <div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
import csv
import json
from typing import List, Dict, Any
from pathlib import Path
import pandas as pd  # For advanced users

# SAMPLE CSV DATA (save as employees.csv)
CSV_CONTENT = """name,age,department,salary,hire_date,active
John Doe,30,Engineering,85000,2020-01-15,true
Jane Smith,25,Marketing,65000,2021-03-10,true
Bob Johnson,45,Sales,95000,2015-07-22,false
Alice Brown,28,Engineering,78000,2022-11-05,true
Charlie Wilson,35,Marketing,72000,2019-08-14,true
Diana Lee,40,HR,68000,2018-05-30,true
Evan Garcia,32,Sales,88000,2023-02-18,true
Fiona Chen,29,Engineering,82000,2021-09-12,true"""

# Create sample CSV file
with open('employees.csv', 'w', encoding='utf-8') as f:
    f.write(CSV_CONTENT)

# ===== METHOD 1: csv.reader (Basic) =====
def read_csv_basic(filename: str) -> List[List[str]]:
    """Read CSV file using csv.reader"""
    data = []
    try:
        with open(filename, 'r', encoding='utf-8') as file:
            csv_reader = csv.reader(file)
            for row in csv_reader:
                data.append(row)
        return data
    except FileNotFoundError:
        print(f"Error: File '{filename}' not found")
        return []
    except Exception as e:
        print(f"Error reading CSV: {e}")
        return []

# ===== METHOD 2: csv.DictReader (Recommended) =====
def read_csv_dict(filename: str) -> List[Dict[str, str]]:
    """Read CSV file as list of dictionaries"""
    data = []
    try:
        with open(filename, 'r', encoding='utf-8') as file:
            csv_reader = csv.DictReader(file)
            for row in csv_reader:
                data.append(dict(row))  # Convert OrderedDict to regular dict
        return data
    except Exception as e:
        print(f"Error reading CSV: {e}")
        return []

# ===== METHOD 3: Advanced CSV Reading with Validation =====
class CSVProcessor:
    """Advanced CSV processing with validation and transformation"""
    
    def __init__(self, filename: str):
        self.filename = filename
        self.data = []
        self.headers = []
    
    def load_and_validate(self) -> bool:
        """Load CSV with validation"""
        if not Path(self.filename).exists():
            print(f"Error: File '{self.filename}' not found")
            return False
        
        try:
            with open(self.filename, 'r', encoding='utf-8') as file:
                # Sniff dialect (auto-detect CSV format)
                try:
                    dialect = csv.Sniffer().sniff(file.read(1024))
                    file.seek(0)  # Reset file pointer
                except:
                    dialect = 'excel'  # Default to Excel CSV
                
                reader = csv.DictReader(file, dialect=dialect)
                self.headers = reader.fieldnames or []
                
                for row_num, row in enumerate(reader, 2):  # Start at 2 (header is 1)
                    try:
                        # Validate and clean row
                        cleaned_row = self._clean_row(row, row_num)
                        if cleaned_row:
                            self.data.append(cleaned_row)
                    except ValueError as e:
                        print(f"Warning: Row {row_num} skipped - {e}")
                        continue
            
            print(f"Successfully loaded {len(self.data)} rows from {self.filename}")
            return True
            
        except Exception as e:
            print(f"Error loading CSV: {e}")
            return False
    
    def _clean_row(self, row: Dict[str, str], row_num: int) -> Dict[str, Any]:
        """Clean and validate a single row"""
        cleaned = {}
        
        for header, value in row.items():
            # Skip empty headers
            if not header or not header.strip():
                continue
            
            header = header.strip()
            value = value.strip() if value else ""
            
            # Type conversion based on header name
            if 'age' in header.lower():
                try:
                    cleaned[header] = int(value) if value else 0
                except ValueError:
                    raise ValueError(f"Invalid age: '{value}'")
            
            elif 'salary' in header.lower():
                try:
                    cleaned[header] = float(value) if value else 0.0
                except ValueError:
                    raise ValueError(f"Invalid salary: '{value}'")
            
            elif 'active' in header.lower():
                cleaned[header] = value.lower() in ('true', 'yes', '1', 't')
            
            elif 'date' in header.lower():
                cleaned[header] = value  # Keep as string, could parse to date
            
            else:
                cleaned[header] = value
        
        return cleaned
    
    def analyze_data(self) -> Dict[str, Any]:
        """Analyze the loaded CSV data"""
        if not self.data:
            return {}
        
        analysis = {
            'total_rows': len(self.data),
            'columns': self.headers,
            'column_count': len(self.headers)
        }
        
        # Calculate statistics for numeric columns
        numeric_columns = []
        for header in self.headers:
            if any(keyword in header.lower() for keyword in ['age', 'salary', 'count', 'amount', 'price']):
                if all(isinstance(row.get(header), (int, float)) for row in self.data):
                    numeric_columns.append(header)
        
        for column in numeric_columns:
            values = [row[column] for row in self.data if column in row]
            if values:
                analysis[f'{column}_stats'] = {
                    'min': min(values),
                    'max': max(values),
                    'avg': sum(values) / len(values),
                    'sum': sum(values)
                }
        
        # Count by categorical columns
        categorical_columns = []
        for header in self.headers:
            if header not in numeric_columns:
                categorical_columns.append(header)
        
        for column in categorical_columns[:3]:  # Limit to first 3
            counts = {}
            for row in self.data:
                value = row.get(column, 'N/A')
                counts[value] = counts.get(value, 0) + 1
            analysis[f'{column}_counts'] = counts
        
        return analysis
    
    def filter_data(self, **filters) -> List[Dict[str, Any]]:
        """Filter data based on criteria"""
        filtered = self.data.copy()
        
        for key, value in filters.items():
            if key in self.headers:
                if callable(value):  # If filter is a function
                    filtered = [row for row in filtered if value(row.get(key))]
                else:
                    filtered = [row for row in filtered if row.get(key) == value]
        
        return filtered
    
    def export_json(self, output_file: str):
        """Export data to JSON format"""
        try:
            with open(output_file, 'w', encoding='utf-8') as f:
                json.dump(self.data, f, indent=2, default=str)
            print(f"Data exported to {output_file}")
        except Exception as e:
            print(f"Error exporting JSON: {e}")
    
    def export_filtered_csv(self, output_file: str, **filters):
        """Export filtered data to CSV"""
        filtered_data = self.filter_data(**filters)
        
        if not filtered_data:
            print("No data to export after filtering")
            return
        
        try:
            with open(output_file, 'w', encoding='utf-8', newline='') as f:
                writer = csv.DictWriter(f, fieldnames=self.headers)
                writer.writeheader()
                writer.writerows(filtered_data)
            print(f"Filtered data exported to {output_file} ({len(filtered_data)} rows)")
        except Exception as e:
            print(f"Error exporting CSV: {e}")

# ===== METHOD 4: Using pandas (for data analysis) =====
def read_csv_pandas(filename: str):
    """Read CSV using pandas (requires pandas library)"""
    try:
        import pandas as pd
        
        # Read with various options
        df = pd.read_csv(
            filename,
            encoding='utf-8',
            parse_dates=True,  # Auto-parse dates
            na_values=['', 'NA', 'N/A', 'null', 'NULL'],  # Treat as NaN
            keep_default_na=True
        )
        
        print(f"DataFrame shape: {df.shape}")
        print(f"Columns: {list(df.columns)}")
        print("\nFirst few rows:")
        print(df.head())
        
        # Basic statistics
        print("\nStatistics:")
        print(df.describe())
        
        return df
        
    except ImportError:
        print("Pandas not installed. Install with: pip install pandas")
        return None
    except Exception as e:
        print(f"Error reading CSV with pandas: {e}")
        return None

# ===== PRACTICAL EXAMPLES =====
def demonstrate_csv_processing():
    print("=== CSV Processing Demonstration ===\n")
    
    # 1. Basic reading
    print("1. Basic CSV Reading:")
    basic_data = read_csv_basic('employees.csv')
    print(f"  Rows: {len(basic_data)}")
    print(f"  Headers: {basic_data[0] if basic_data else 'None'}")
    print(f"  First data row: {basic_data[1] if len(basic_data) > 1 else 'None'}")
    
    # 2. Dictionary reading
    print("\n2. Dictionary CSV Reading:")
    dict_data = read_csv_dict('employees.csv')
    print(f"  Total records: {len(dict_data)}")
    print(f"  First record: {dict_data[0] if dict_data else 'None'}")
    
    # 3. Advanced processing
    print("\n3. Advanced CSV Processing:")
    processor = CSVProcessor('employees.csv')
    
    if processor.load_and_validate():
        print(f"  Loaded {len(processor.data)} valid records")
        print(f"  Headers: {processor.headers}")
        
        # Analyze data
        analysis = processor.analyze_data()
        print(f"  Analysis: {json.dumps(analysis, indent=2)}")
        
        # Filter data
        print("\n4. Filtering Examples:")
        engineering_dept = processor.filter_data(department='Engineering')
        print(f"  Engineering employees: {len(engineering_dept)}")
        
        high_salary = processor.filter_data(salary=lambda x: x > 80000)
        print(f"  Employees with salary > 80000: {len(high_salary)}")
        
        active_employees = processor.filter_data(active=True)
        print(f"  Active employees: {len(active_employees)}")
        
        # Export data
        print("\n5. Exporting Data:")
        processor.export_json('employees.json')
        processor.export_filtered_csv('engineering_employees.csv', department='Engineering')
    
    # 4. Pandas (if available)
    print("\n6. Pandas CSV Reading:")
    df = read_csv_pandas('employees.csv')
    if df is not None:
        print(f"  Pandas DataFrame created successfully")
        print(f"  Memory usage: {df.memory_usage(deep=True).sum() / 1024:.2f} KB")
    
    # Cleanup
    import os
    for file in ['employees.json', 'engineering_employees.csv']:
        if os.path.exists(file):
            os.remove(file)

# ===== REAL-WORLD EXAMPLE: SALES DATA PROCESSING =====
class SalesDataProcessor:
    """Process sales data from CSV files"""
    
    def __init__(self, sales_file: str):
        self.sales_file = sales_file
        self.sales_data = []
        self.processed_data = []
    
    def process_sales_data(self):
        """Process sales CSV with business logic"""
        try:
            with open(self.sales_file, 'r', encoding='utf-8') as file:
                reader = csv.DictReader(file)
                
                for row in reader:
                    # Clean and validate
                    sale = self._process_sale_row(row)
                    if sale:
                        self.sales_data.append(sale)
                
                print(f"Processed {len(self.sales_data)} sales records")
                
                # Calculate additional metrics
                self._calculate_metrics()
                
        except Exception as e:
            print(f"Error processing sales data: {e}")
    
    def _process_sale_row(self, row: Dict) -> Dict:
        """Process a single sale row"""
        try:
            # Required fields validation
            required_fields = ['sale_id', 'product', 'quantity', 'price', 'date']
            for field in required_fields:
                if field not in row or not row[field].strip():
                    print(f"Warning: Missing required field '{field}' in row")
                    return None
            
            sale = {
                'sale_id': row['sale_id'].strip(),
                'product': row['product'].strip(),
                'quantity': int(row['quantity']),
                'price': float(row['price']),
                'date': row['date'].strip(),
                'region': row.get('region', 'Unknown').strip(),
                'salesperson': row.get('salesperson', 'Unknown').strip()
            }
            
            # Calculate derived fields
            sale['total'] = sale['quantity'] * sale['price']
            sale['month'] = sale['date'][:7] if len(sale['date']) >= 7 else 'Unknown'
            
            return sale
            
        except (ValueError, KeyError) as e:
            print(f"Warning: Invalid sale data: {e}")
            return None
    
    def _calculate_metrics(self):
        """Calculate business metrics from sales data"""
        if not self.sales_data:
            return
        
        metrics = {
            'total_sales': sum(sale['total'] for sale in self.sales_data),
            'total_quantity': sum(sale['quantity'] for sale in self.sales_data),
            'average_sale': sum(sale['total'] for sale in self.sales_data) / len(self.sales_data),
            'unique_products': len(set(sale['product'] for sale in self.sales_data)),
            'sales_by_month': {},
            'sales_by_region': {},
            'top_products': []
        }
        
        # Calculate monthly sales
        for sale in self.sales_data:
            month = sale['month']
            metrics['sales_by_month'][month] = metrics['sales_by_month'].get(month, 0) + sale['total']
            
            region = sale['region']
            metrics['sales_by_region'][region] = metrics['sales_by_region'].get(region, 0) + sale['total']
        
        # Calculate top products
        product_sales = {}
        for sale in self.sales_data:
            product = sale['product']
            product_sales[product] = product_sales.get(product, 0) + sale['total']
        
        metrics['top_products'] = sorted(
            product_sales.items(),
            key=lambda x: x[1],
            reverse=True
        )[:5]  # Top 5 products
        
        self.processed_data = metrics
        return metrics
    
    def generate_report(self, output_file: str = 'sales_report.txt'):
        """Generate a sales report"""
        if not self.processed_data:
            print("No processed data available")
            return
        
        report_lines = [
            "=== SALES REPORT ===\n",
            f"Total Sales: \\\${self.processed_data['total_sales']:,.2f}",
            f"Total Quantity Sold: {self.processed_data['total_quantity']:,}",
            f"Average Sale Value: \\\${self.processed_data['average_sale']:,.2f}",
            f"Unique Products Sold: {self.processed_data['unique_products']}\n",
            "=== Monthly Sales ==="
        ]
        
        for month, sales in sorted(self.processed_data['sales_by_month'].items()):
            report_lines.append(f"  {month}: \\\${sales:,.2f}")
        
        report_lines.extend([
            "\n=== Sales by Region ==="
        ])
        
        for region, sales in sorted(self.processed_data['sales_by_region'].items()):
            report_lines.append(f"  {region}: \\\${sales:,.2f}")
        
        report_lines.extend([
            "\n=== Top 5 Products ==="
        ])
        
        for product, sales in self.processed_data['top_products']:
            report_lines.append(f"  {product}: \\\${sales:,.2f}")
        
        # Write report
        with open(output_file, 'w', encoding='utf-8') as f:
            f.write('\n'.join(report_lines))
        
        print(f"Sales report generated: {output_file}")

if __name__ == "__main__":
    # Create sample sales data
    sample_sales = """sale_id,product,quantity,price,date,region,salesperson
S001,Laptop,5,1200,2024-01-15,North,John
S002,Tablet,10,500,2024-01-16,South,Jane
S003,Phone,20,800,2024-01-17,North,Bob
S004,Laptop,3,1200,2024-02-10,South,Alice
S005,Tablet,8,500,2024-02-11,North,John
S006,Phone,15,800,2024-02-12,South,Jane
S007,Monitor,12,300,2024-03-05,North,Bob
S008,Laptop,7,1200,2024-03-06,South,Alice"""
    
    with open('sales_data.csv', 'w', encoding='utf-8') as f:
        f.write(sample_sales)
    
    print("=== CSV Reading Methods ===")
    demonstrate_csv_processing()
    
    print("\n=== Sales Data Processing ===")
    sales_processor = SalesDataProcessor('sales_data.csv')
    sales_processor.process_sales_data()
    sales_processor.generate_report()
    
    # Display report
    with open('sales_report.txt', 'r') as f:
        print(f.read())
    
    # Cleanup
    import os
    for file in ['employees.csv', 'sales_data.csv', 'sales_report.txt']:
        if os.path.exists(file):
            os.remove(file)
        </pre>
    </div>
    
    <hr/>
    
    <b>d. Practical: Complete Data Processing Pipeline</b>
    
    <div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
import csv
import json
from datetime import datetime, timedelta
from pathlib import Path
from typing import Dict, List, Any, Optional
import os

# ===== DATA VALIDATION CLASSES =====
class DataValidator:
    """Validate different data types"""
    
    @staticmethod
    def validate_email(email: str) -> bool:
        """Simple email validation"""
        return '@' in email and '.' in email.split('@')[-1]
    
    @staticmethod
    def validate_phone(phone: str) -> bool:
        """Validate phone number (simple)"""
        # Remove non-digits
        digits = ''.join(filter(str.isdigit, phone))
        return 7 <= len(digits) <= 15
    
    @staticmethod
    def validate_date(date_str: str, format: str = '%Y-%m-%d') -> bool:
        """Validate date format"""
        try:
            datetime.strptime(date_str, format)
            return True
        except ValueError:
            return False
    
    @staticmethod
    def validate_numeric(value: str, min_val: Optional[float] = None, 
                        max_val: Optional[float] = None) -> bool:
        """Validate numeric value within range"""
        try:
            num = float(value)
            if min_val is not None and num < min_val:
                return False
            if max_val is not None and num > max_val:
                return False
            return True
        except ValueError:
            return False

# ===== FILE PROCESSOR WITH ERROR HANDLING =====
class DataFileProcessor:
    """Process data files with comprehensive error handling"""
    
    def __init__(self, filename: str):
        self.filename = filename
        self.data = []
        self.errors = []
        self.stats = {
            'total_rows': 0,
            'valid_rows': 0,
            'invalid_rows': 0,
            'processing_time': 0
        }
    
    def process_file(self) -> bool:
        """Process the file and return success status"""
        start_time = datetime.now()
        
        if not Path(self.filename).exists():
            self.errors.append(f"File not found: {self.filename}")
            return False
        
        file_extension = Path(self.filename).suffix.lower()
        
        try:
            if file_extension == '.csv':
                success = self._process_csv()
            elif file_extension == '.txt':
                success = self._process_text()
            elif file_extension == '.json':
                success = self._process_json()
            else:
                self.errors.append(f"Unsupported file format: {file_extension}")
                return False
            
            self.stats['processing_time'] = (datetime.now() - start_time).total_seconds()
            return success
            
        except Exception as e:
            self.errors.append(f"Unexpected error processing file: {e}")
            return False
    
    def _process_csv(self) -> bool:
        """Process CSV file"""
        try:
            with open(self.filename, 'r', encoding='utf-8') as file:
                # Try to detect delimiter
                sample = file.read(1024)
                file.seek(0)
                
                delimiter = ','
                if '\t' in sample and sample.count('\t') > sample.count(','):
                    delimiter = '\t'  # TSV file
                
                reader = csv.DictReader(file, delimiter=delimiter)
                self.stats['total_rows'] = 0
                
                for row_num, row in enumerate(reader, 1):
                    self.stats['total_rows'] += 1
                    
                    # Validate row
                    is_valid, errors = self._validate_row(row, row_num)
                    
                    if is_valid:
                        # Clean and transform
                        cleaned_row = self._clean_row(row)
                        self.data.append(cleaned_row)
                        self.stats['valid_rows'] += 1
                    else:
                        self.stats['invalid_rows'] += 1
                        self.errors.extend(errors)
                
            print(f"Processed {self.stats['total_rows']} rows: "
                  f"{self.stats['valid_rows']} valid, {self.stats['invalid_rows']} invalid")
            return True
            
        except Exception as e:
            self.errors.append(f"Error processing CSV: {e}")
            return False
    
    def _process_text(self) -> bool:
        """Process plain text file"""
        try:
            with open(self.filename, 'r', encoding='utf-8') as file:
                lines = file.readlines()
                self.stats['total_rows'] = len(lines)
                
                for line_num, line in enumerate(lines, 1):
                    line = line.strip()
                    if not line or line.startswith('#'):
                        continue  # Skip empty lines and comments
                    
                    # Simple parsing - can be customized
                    parts = line.split(',')
                    if len(parts) >= 2:
                        row = {'raw': line, 'parts': parts}
                        self.data.append(row)
                        self.stats['valid_rows'] += 1
                    else:
                        self.stats['invalid_rows'] += 1
                        self.errors.append(f"Line {line_num}: Invalid format")
            
            return True
            
        except Exception as e:
            self.errors.append(f"Error processing text file: {e}")
            return False
    
    def _process_json(self) -> bool:
        """Process JSON file"""
        try:
            with open(self.filename, 'r', encoding='utf-8') as file:
                json_data = json.load(file)
                
                if isinstance(json_data, list):
                    self.data = json_data
                    self.stats['valid_rows'] = len(json_data)
                    self.stats['total_rows'] = len(json_data)
                elif isinstance(json_data, dict):
                    self.data = [json_data]
                    self.stats['valid_rows'] = 1
                    self.stats['total_rows'] = 1
                else:
                    self.errors.append("JSON format not recognized")
                    return False
            
            return True
            
        except json.JSONDecodeError as e:
            self.errors.append(f"Invalid JSON: {e}")
            return False
        except Exception as e:
            self.errors.append(f"Error processing JSON: {e}")
            return False
    
    def _validate_row(self, row: Dict, row_num: int) -> tuple:
        """Validate a single row of data"""
        errors = []
        is_valid = True
        
        # Check for required fields (customize as needed)
        required_fields = ['id', 'name', 'email']
        for field in required_fields:
            if field not in row or not str(row[field]).strip():
                errors.append(f"Row {row_num}: Missing required field '{field}'")
                is_valid = False
        
        # Validate email if present
        if 'email' in row and row['email']:
            if not DataValidator.validate_email(row['email']):
                errors.append(f"Row {row_num}: Invalid email format: {row['email']}")
                is_valid = False
        
        # Validate dates if present
        date_fields = ['date', 'birth_date', 'created_at']
        for field in date_fields:
            if field in row and row[field]:
                if not DataValidator.validate_date(row[field]):
                    errors.append(f"Row {row_num}: Invalid date format for '{field}': {row[field]}")
        
        return is_valid, errors
    
    def _clean_row(self, row: Dict) -> Dict:
        """Clean and transform a row"""
        cleaned = {}
        
        for key, value in row.items():
            if value is None:
                cleaned[key] = None
                continue
            
            value = str(value).strip()
            
            # Type conversion based on field name
            if any(num_key in key.lower() for num_key in ['age', 'count', 'quantity', 'id']):
                try:
                    cleaned[key] = int(value) if value else 0
                except ValueError:
                    cleaned[key] = value  # Keep as string if can't convert
            
            elif any(num_key in key.lower() for num_key in ['price', 'amount', 'salary', 'total']):
                try:
                    cleaned[key] = float(value) if value else 0.0
                except ValueError:
                    cleaned[key] = value
            
            elif any(date_key in key.lower() for date_key in ['date', 'time']):
                cleaned[key] = value  # Could parse to datetime
            
            elif any(bool_key in key.lower() for bool_key in ['active', 'enabled', 'verified']):
                cleaned[key] = value.lower() in ('true', 'yes', '1', 't')
            
            else:
                cleaned[key] = value
        
        # Add processing timestamp
        cleaned['_processed_at'] = datetime.now().isoformat()
        
        return cleaned
    
    def get_summary(self) -> Dict:
        """Get processing summary"""
        return {
            'filename': self.filename,
            'total_rows': self.stats['total_rows'],
            'valid_rows': self.stats['valid_rows'],
            'invalid_rows': self.stats['invalid_rows'],
            'processing_time_seconds': self.stats['processing_time'],
            'error_count': len(self.errors),
            'data_available': len(self.data) > 0
        }
    
    def export_results(self, output_dir: str = 'output'):
        """Export processed results"""
        os.makedirs(output_dir, exist_ok=True)
        
        timestamp = datetime.now().strftime('%Y%m%d_%H%M%S')
        base_name = Path(self.filename).stem
        
        # Export valid data as JSON
        if self.data:
            json_file = Path(output_dir) / f'{base_name}_processed_{timestamp}.json'
            with open(json_file, 'w', encoding='utf-8') as f:
                json.dump(self.data, f, indent=2, default=str)
            print(f"Valid data exported to: {json_file}")
        
        # Export errors as text
        if self.errors:
            errors_file = Path(output_dir) / f'{base_name}_errors_{timestamp}.txt'
            with open(errors_file, 'w', encoding='utf-8') as f:
                f.write(f"Processing Errors for {self.filename}\n")
                f.write(f"Generated: {datetime.now().isoformat()}\n")
                f.write("=" * 50 + "\n\n")
                for error in self.errors:
                    f.write(f"{error}\n")
            print(f"Errors exported to: {errors_file}")
        
        # Export summary as JSON
        summary_file = Path(output_dir) / f'{base_name}_summary_{timestamp}.json'
        with open(summary_file, 'w', encoding='utf-8') as f:
            json.dump(self.get_summary(), f, indent=2)
        print(f"Summary exported to: {summary_file}")

# ===== BATCH PROCESSOR FOR MULTIPLE FILES =====
class BatchFileProcessor:
    """Process multiple files in batch"""
    
    def __init__(self, input_dir: str = 'input', output_dir: str = 'output'):
        self.input_dir = Path(input_dir)
        self.output_dir = Path(output_dir)
        self.results = []
        
        # Create directories if they don't exist
        self.input_dir.mkdir(exist_ok=True)
        self.output_dir.mkdir(exist_ok=True)
    
    def process_all_files(self, pattern: str = '*.csv'):
        """Process all files matching pattern"""
        files = list(self.input_dir.glob(pattern))
        
        if not files:
            print(f"No files found matching {pattern} in {self.input_dir}")
            return
        
        print(f"Found {len(files)} files to process")
        
        for file_path in files:
            print(f"\nProcessing: {file_path.name}")
            
            processor = DataFileProcessor(str(file_path))
            success = processor.process_file()
            
            result = {
                'filename': file_path.name,
                'success': success,
                'summary': processor.get_summary(),
                'processor': processor
            }
            
            self.results.append(result)
            
            # Export results
            if success or processor.errors:
                processor.export_results(str(self.output_dir))
        
        self._generate_batch_report()
    
    def _generate_batch_report(self):
        """Generate batch processing report"""
        if not self.results:
            return
        
        report_file = self.output_dir / 'batch_report.txt'
        
        total_files = len(self.results)
        successful = sum(1 for r in self.results if r['success'])
        total_rows = sum(r['summary']['total_rows'] for r in self.results)
        total_valid = sum(r['summary']['valid_rows'] for r in self.results)
        
        with open(report_file, 'w', encoding='utf-8') as f:
            f.write("=== BATCH PROCESSING REPORT ===\n\n")
            f.write(f"Generated: {datetime.now().isoformat()}\n")
            f.write(f"Total files processed: {total_files}\n")
            f.write(f"Successful: {successful}\n")
            f.write(f"Failed: {total_files - successful}\n")
            f.write(f"Total rows: {total_rows}\n")
            f.write(f"Valid rows: {total_valid}\n")
            f.write(f"Invalid rows: {total_rows - total_valid}\n")
            f.write("\n" + "="*40 + "\n\n")
            
            for result in self.results:
                f.write(f"File: {result['filename']}\n")
                f.write(f"  Success: {result['success']}\n")
                f.write(f"  Total rows: {result['summary']['total_rows']}\n")
                f.write(f"  Valid rows: {result['summary']['valid_rows']}\n")
                f.write(f"  Errors: {result['summary']['error_count']}\n")
                f.write("\n")
        
        print(f"\nBatch report generated: {report_file}")

# ===== DEMONSTRATION AND USAGE =====
def create_sample_data():
    """Create sample data files for demonstration"""
    sample_dir = Path('sample_data')
    sample_dir.mkdir(exist_ok=True)
    
    # Sample CSV data
    csv_data = """id,name,email,age,salary,hire_date,active
1,John Doe,john@example.com,30,85000,2020-01-15,true
2,Jane Smith,jane@example.com,25,65000,2021-03-10,true
3,Bob Johnson,bob@example.com,45,95000,2015-07-22,false
4,Alice Brown,alice@example.com,28,78000,2022-11-05,true
5,Charlie Wilson,charlie@example.com,35,72000,2019-08-14,true
6,Invalid User,invalid-email,0,0,2023-02-30,maybe
7,Missing Data,,,,"","""
    
    # Sample JSON data
    json_data = [
        {"id": 101, "product": "Laptop", "price": 1200, "stock": 15},
        {"id": 102, "product": "Tablet", "price": 500, "stock": 30},
        {"id": 103, "product": "Phone", "price": 800, "stock": 25}
    ]
    
    # Sample text data
    text_data = """# User activity log
2024-01-15 09:30:00,User login,john@example.com
2024-01-15 10:15:00,File upload,jane@example.com
2024-01-15 11:45:00,Purchase,bob@example.com
2024-01-15 12:30:00,Logout,alice@example.com"""
    
    # Write files
    (sample_dir / 'employees.csv').write_text(csv_data, encoding='utf-8')
    (sample_dir / 'products.json').write_text(json.dumps(json_data, indent=2), encoding='utf-8')
    (sample_dir / 'activity.log').write_text(text_data, encoding='utf-8')
    
    print("Sample data files created in 'sample_data' directory")

def demonstrate_file_processing():
    """Demonstrate the file processing pipeline"""
    print("=== File Processing Pipeline Demonstration ===\n")
    
    # Create sample data
    create_sample_data()
    
    # Process individual files
    print("1. Processing individual files:")
    
    # Process CSV
    csv_processor = DataFileProcessor('sample_data/employees.csv')
    if csv_processor.process_file():
        print(f"  CSV processed: {csv_processor.get_summary()}")
        csv_processor.export_results('output')
    
    # Process JSON
    json_processor = DataFileProcessor('sample_data/products.json')
    if json_processor.process_file():
        print(f"  JSON processed: {json_processor.get_summary()}")
    
    # Process text
    text_processor = DataFileProcessor('sample_data/activity.log')
    if text_processor.process_file():
        print(f"  Text processed: {text_processor.get_summary()}")
    
    # Batch processing
    print("\n2. Batch processing all files:")
    batch_processor = BatchFileProcessor('sample_data', 'output')
    batch_processor.process_all_files('*.*')  # Process all files
    
    # Show output files
    print("\n3. Generated output files:")
    output_dir = Path('output')
    if output_dir.exists():
        for file in output_dir.glob('*'):
            print(f"  - {file.name} ({file.stat().st_size} bytes)")
    
    # Cleanup (optional)
    cleanup = input("\nClean up sample files? (y/n): ").lower() == 'y'
    if cleanup:
        import shutil
        if Path('sample_data').exists():
            shutil.rmtree('sample_data')
        if Path('output').exists():
            shutil.rmtree('output')
        print("Cleanup complete")

if __name__ == "__main__":
    demonstrate_file_processing()
        </pre>
    </div>
    
    <hr/>
    
    <div class="assignment-box">
        <h4>Assignment: Build a Data Migration Tool</h4>
        
        <b>Part 1: Create File Converter Class</b>
        <div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
            Create a <code>FileConverter</code> class that can convert between formats:
            <ol>
                <li><b>CSV to JSON</b> - Convert CSV files to JSON format</li>
                <li><b>JSON to CSV</b> - Convert JSON files to CSV format</li>
                <li><b>TXT to CSV</b> - Convert custom text formats to CSV</li>
                <li><b>CSV to SQL</b> - Generate SQL INSERT statements</li>
                <li><b>Format detection</b> - Auto-detect input format</li>
            </ol>
        </div>
        
        <b>Part 2: Implement Data Validation and Cleaning</b>
        <div style="background-color: #fff0e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
            Add these features to your converter:
            <pre>
class DataCleaner:
    def remove_duplicates(self, data):
        """Remove duplicate rows based on key columns"""
    
    def fill_missing_values(self, data, strategy='mean'):
        """Fill missing values using different strategies"""
    
    def normalize_data(self, data, columns):
        """Normalize numerical columns"""
    
    def validate_schema(self, data, schema):
        """Validate data against a schema"""
    
    def transform_dates(self, data, date_columns):
        """Convert string dates to datetime objects"""
            </pre>
        </div>
        
        <b>Part 3: Create Command Line Interface</b>
        <div style="background-color: #f0fff0; padding: 15px; margin: 10px 0; border-radius: 5px;">
            Build a CLI tool with these commands:
            <ul>
                <li><code>convert --input data.csv --output data.json --format json</code></li>
                <li><code>validate --file data.csv --schema schema.json</code></li>
                <li><code>clean --input dirty.csv --output clean.csv --remove-duplicates</code></li>
                <li><code>analyze --file data.csv --report</code></li>
                <li><code>batch --dir ./input --output-dir ./output --format csv</code></li>
            </ul>
        </div>
        
        <b>Part 4: Test with Real-World Data</b>
        <div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px; font-family: monospace;">
            # Test scenarios
            test_files = [
                # (input_file, expected_output_format, special_handling)
                ("users.csv", "json", "Contains emails and dates"),
                ("products.json", "csv", "Nested JSON structures"),
                ("sales_data.txt", "csv", "Custom delimiter: |"),
                ("inventory.tsv", "json", "Tab-separated values"),
                ("dirty_data.csv", "clean.csv", "Has missing values and duplicates")
            ]
            
            # Your tool should:
            # 1. Detect input format automatically
            # 2. Handle encoding issues
            # 3. Validate data during conversion
            # 4. Generate conversion report
            # 5. Handle errors gracefully
        </div>
    </div>
    
    <hr/>
    
    <h3>Common File Reading Mistakes & Solutions</h3>
    
    <b>Mistake 1: Not closing files (resource leak)</b>
    <div style="background-color: #ffe6e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
# WRONG - File not properly closed
file = open('data.txt', 'r')
content = file.read()
# üíÄ File remains open if exception occurs!
# üíÄ Memory leak if loop opens many files!

# WRONG - Close but not exception-safe
file = open('data.txt', 'r')
try:
    content = file.read()
finally:
    file.close()  # Better but verbose

# RIGHT - Use context manager (with statement)
with open('data.txt', 'r') as file:
    content = file.read()
# File automatically closed, even if exception occurs
        </pre>
    </div>
    
    <b>Mistake 2: Ignoring encoding issues</b>
<div style="background-color: #ffe6e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <pre>
# WRONG - Default encoding (system-dependent)
with open('data.txt', 'r') as file:  # üíÄ May fail on non-ASCII characters
    content = file.read()

# WRONG - Hardcoded wrong encoding
with open('data.txt', 'r', encoding='ascii') as file:  # üíÄ Fails on √©, √º, etc.
    content = file.read()

# RIGHT - Specify UTF-8 (recommended default)
with open('data.txt', 'r', encoding='utf-8') as file:
    content = file.read()

# RIGHT - Handle encoding errors gracefully
with open('data.txt', 'r', encoding='utf-8', errors='replace') as file:
    content = file.read()  # Replaces invalid chars with ÔøΩ
    
# RIGHT - Detect encoding (requires chardet)
import chardet
with open('data.txt', 'rb') as file:
    raw_data = file.read()
    encoding = chardet.detect(raw_data)['encoding']
    content = raw_data.decode(encoding)
        </pre>
    </div>
    
    <b>Mistake 3: Reading huge files into memory</b>
    <div style="background-color: #ffe6e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
# WRONG - Reads entire file into memory
with open('huge_file.txt', 'r') as file:
    content = file.read()  # üíÄ Crashes with 10GB file!
    lines = content.split(' ')  # üíÄ Even worse!

# RIGHT - Process line by line
with open('huge_file.txt', 'r') as file:
    for line in file:  # Reads one line at a time
        process_line(line)

# RIGHT - Read in chunks for binary files
chunk_size = 1024 * 1024  # 1MB chunks
with open('huge_file.bin', 'rb') as file:
    while True:
        chunk = file.read(chunk_size)
        if not chunk:
            break
        process_chunk(chunk)

# RIGHT - Use generators for pipeline processing
def read_large_file(filename):
    with open(filename, 'r') as file:
        for line in file:
            yield line.strip()

# Process without loading all at once
for line in read_large_file('huge_file.txt'):
    process_line(line)
        </pre>
    </div>
    
    <hr/>
    
    <h3>Quick Reference: File Reading Best Practices</h3>
    
    <div style="background-color: #f9f9f9; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <table style="width: 100%;">
            <tr>
                <td style="padding: 8px; border-bottom: 1px solid #ccc; width: 30%;"><b>Practice</b></td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>Implementation</b></td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>When to Use</b></td>
            </tr>
            <tr>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Always use context managers</td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;"><code>with open(...) as f:</code></td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Every file operation</td>
            </tr>
            <tr>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Specify encoding</td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;"><code>encoding='utf-8'</code></td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">All text files</td>
            </tr>
            <tr>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Process line by line</td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;"><code>for line in file:</code></td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Large files</td>
            </tr>
            <tr>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Use pathlib</td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;"><code>Path('file.txt').read_text()</code></td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Modern Python code</td>
            </tr>
            <tr>
                <td style="padding: 8px;"><b>Validate early</b></td>
                <td style="padding: 8px;"><b>Check file exists, size, format</b></td>
                <td style="padding: 8px;">User-provided files</td>
            </tr>
        </table>
    </div>
    
    <div style="background-color: #e8f8e8; padding: 20px; margin: 20px 0; border-radius: 5px; border-left: 5px solid #2ecc71;">
        <h4>üöÄ Homework: Build a Log File Analyzer</h4>
        <p>Create a tool to analyze server log files:</p>
        <ol>
            <li><b>Features:</b>
                <ul>
                    <li>Parse common log formats (Apache, Nginx, custom)</li>
                    <li>Extract statistics: requests per hour, status codes, top IPs</li>
                    <li>Detect anomalies: error spikes, suspicious patterns</li>
                    <li>Generate reports: HTML, JSON, console output</li>
                    <li>Real-time monitoring: tail log files and alert</li>
                </ul>
            </li>
            <li><b>Technical Requirements:</b>
                <ul>
                    <li>Handle large log files (100MB+) efficiently</li>
                    <li>Support different log formats via configuration</li>
                    <li>Use generators to process files line by line</li>
                    <li>Implement caching for frequent analyses</li>
                    <li>Add unit tests for parsing logic</li>
                </ul>
            </li>
            <li><b>Bonus:</b> Create a web interface to upload and analyze logs</li>
        </ol>
        <p><b>Remember:</b> File I/O is fundamental to most applications. Master it well!</p>
    </div>`
            },
            "9-4": {
                icon: "fa-save",
                title: "Writing and Saving Data to Files",
                html: `<h1>Week 9, Day 4: Writing and Saving Data to Files</h1>
    <p>Today we complete our file I/O journey by learning how to write data to files - from simple text to complex structured data with proper error handling and optimization.</p>
    
    <div class="analogy-box">
        <b>Analogy: Taking Notes vs Publishing a Book üìùüìö</b><br/>
        <ul style="margin-top: 10px;">
            <li><b>Writing to File</b> = Taking notes (capturing information)</li>
            <li><b>File Formats</b> = Different notebooks (text, CSV, JSON)</li>
            <li><b>Atomic Writes</b> = Making a copy before editing (safe updates)</li>
            <li><b>Buffering</b> = Writing in paragraphs vs word by word (efficiency)</li>
            <li><b>File Locking</b> = "Do not disturb" sign (prevent conflicts)</li>
        </ul>
    </div>

    <h3>Key Topics</h3>
    <ul>
        <li>Different file writing modes and their uses</li>
        <li>Writing structured data (CSV, JSON, XML)</li>
        <li>Atomic file operations for data safety</li>
        <li>Performance optimization techniques</li>
        <li>Practical: Data export and backup systems</li>
    </ul>

    <h3>In-Depth Explanation</h3>
    
    <b>a. File Writing Modes - Understanding the Differences</b>
    
    <div style="background-color: #f9f9f9; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <b>The Six File Modes:</b>
        <div style="background-color: #e8f4f8; padding: 15px; margin: 10px 0; border-radius: 5px;">
            <pre>
# ===== TEXT FILE MODES =====
# 'w'  - WRITE (Creates new or overwrites existing)
with open('data.txt', 'w', encoding='utf-8') as f:
    f.write("This creates a new file or overwrites existing one.")
    # üíÄ DANGER: Existing content is lost!

# 'a'  - APPEND (Adds to end of file)
with open('log.txt', 'a', encoding='utf-8') as f:
    f.write(" New log entry at the end of file.")
    # Safe: Preserves existing content

# 'x'  - EXCLUSIVE CREATE (Fails if file exists)
try:
    with open('unique.txt', 'x', encoding='utf-8') as f:
        f.write("This only works if file doesn't exist.")
except FileExistsError:
    print("File already exists - won't overwrite!")
    # Safe: Prevents accidental overwrites

# 'r+' - READ AND WRITE (File must exist)
with open('existing.txt', 'r+', encoding='utf-8') as f:
    content = f.read()  # Can read
    f.seek(0)           # Move to beginning
    f.write("New content")  # Can write (overwrites from position)
    f.truncate()        # Remove anything after current position

# 'w+' - WRITE AND READ (Creates/overwrites, then can read)
with open('data.txt', 'w+', encoding='utf-8') as f:
    f.write("Write first...")
    f.seek(0)           # Go back to read what we wrote
    content = f.read()

# 'a+' - APPEND AND READ (Appends, can read from beginning)
with open('log.txt', 'a+', encoding='utf-8') as f:
    f.write(" New entry")
    f.seek(0)           # Can read from beginning
    all_logs = f.read()

# ===== BINARY FILE MODES =====
# Add 'b' to mode for binary files
# 'wb'  - Write binary
# 'ab'  - Append binary
# 'xb'  - Exclusive create binary
# 'rb+' - Read/write binary

# Example: Copy an image
with open('source.jpg', 'rb') as src, open('copy.jpg', 'wb') as dst:
    dst.write(src.read())

# ===== PRACTICAL EXAMPLES =====
def demonstrate_file_modes():
    print("=== File Modes Demonstration === ")
    
    # 1. 'w' mode (overwrites)
    print("1. 'w' mode (Write/Overwrite):")
    with open('test_w.txt', 'w', encoding='utf-8') as f:
        f.write("First line ")
    
    with open('test_w.txt', 'w', encoding='utf-8') as f:  # Opens again
        f.write("Second line - replaces everything! ")
    
    with open('test_w.txt', 'r') as f:
        print(f"  Content: {f.read().strip()}")
    
    # 2. 'a' mode (appends)
    print(" 2. 'a' mode (Append):")
    with open('test_a.txt', 'w', encoding='utf-8') as f:  # Start fresh
        f.write("First line ")
    
    with open('test_a.txt', 'a', encoding='utf-8') as f:
        f.write("Second line - added to end ")
        f.write("Third line - also added ")
    
    with open('test_a.txt', 'r') as f:
        print(f"  Content: {f.read().strip()}")
    
    # 3. 'x' mode (exclusive create)
    print(" 3. 'x' mode (Exclusive Create):")
    try:
        with open('test_x.txt', 'x', encoding='utf-8') as f:
            f.write("Created successfully ")
        print("  File created")
        
        # Try to create again (should fail)
        with open('test_x.txt', 'x', encoding='utf-8') as f:
            f.write("This won't work ")
    except FileExistsError:
        print("  ‚úì Correctly failed when file existed")
    
    # 4. 'r+' mode (read and write)
    print(" 4. 'r+' mode (Read and Write):")
    with open('test_rplus.txt', 'w', encoding='utf-8') as f:
        f.write("Line 1 Line 2 Line 3 ")
    
    with open('test_rplus.txt', 'r+', encoding='utf-8') as f:
        # Read first
        lines = f.readlines()
        print(f"  Read: {[l.strip() for l in lines]}")
        
        # Write at current position (end of file)
        f.write("Line 4 - added at end ")
        
        # Go back and overwrite
        f.seek(0)
        f.write("REPLACED Line 1 ")
        
        # Go back and read again
        f.seek(0)
        final = f.read()
        print(f"  Final: {final.strip()}")
    
    # Cleanup
    import os
    for file in ['test_w.txt', 'test_a.txt', 'test_x.txt', 'test_rplus.txt']:
        if os.path.exists(file):
            os.remove(file)
    
    print(" ‚úì All demonstration files cleaned up")

if __name__ == "__main__":
    demonstrate_file_modes()
            </pre>
        </div>
        
        <b>File Mode Comparison Table:</b>
        <div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
            <table style="width: 100%;">
                <tr>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc; width: 15%;"><b>Mode</b></td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>Read</b></td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>Write</b></td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>File Exists</b></td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>File Doesn't Exist</b></td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>Use Case</b></td>
                </tr>
                <tr>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;"><code>'w'</code></td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">‚ùå No</td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">‚úÖ Yes</td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Overwrites</td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Creates</td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">New file, overwrite old</td>
                </tr>
                <tr>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;"><code>'a'</code></td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">‚ùå No</td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">‚úÖ Yes</td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Appends</td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Creates</td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Log files, history</td>
                </tr>
                <tr>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;"><code>'x'</code></td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">‚ùå No</td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">‚úÖ Yes</td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Fails</td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Creates</td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Prevent overwrites</td>
                </tr>
                <tr>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;"><code>'r'</code></td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">‚úÖ Yes</td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">‚ùå No</td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Reads</td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Fails</td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Read-only access</td>
                </tr>
                <tr>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;"><code>'r+'</code></td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">‚úÖ Yes</td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">‚úÖ Yes</td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Reads/writes</td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Fails</td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Update existing files</td>
                </tr>
                <tr>
                    <td style="padding: 8px;"><b><code>'w+'</code></b></td>
                    <td style="padding: 8px;"><b>‚úÖ Yes</b></td>
                    <td style="padding: 8px;"><b>‚úÖ Yes</b></td>
                    <td style="padding: 8px;"><b>Overwrites</b></td>
                    <td style="padding: 8px;"><b>Creates</b></td>
                    <td style="padding: 8px;">Create and immediately read</td>
                </tr>
            </table>
        </div>
    </div>
    
    <hr/>
    
    <b>b. Writing Structured Data (CSV, JSON, XML)</b>
    
    <div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
import csv
import json
import xml.etree.ElementTree as ET
from datetime import datetime
from pathlib import Path
from typing import List, Dict, Any

# ===== SAMPLE DATA =====
employee_data = [
    {
        "id": 1,
        "name": "John Doe",
        "position": "Software Engineer",
        "department": "Engineering",
        "salary": 85000,
        "hire_date": "2020-01-15",
        "email": "john.doe@company.com",
        "skills": ["Python", "JavaScript", "Docker"],
        "active": True
    },
    {
        "id": 2,
        "name": "Jane Smith",
        "position": "Data Scientist",
        "department": "Data Science",
        "salary": 95000,
        "hire_date": "2021-03-10",
        "email": "jane.smith@company.com",
        "skills": ["Python", "R", "SQL", "Machine Learning"],
        "active": True
    },
    {
        "id": 3,
        "name": "Bob Johnson",
        "position": "Product Manager",
        "department": "Product",
        "salary": 110000,
        "hire_date": "2019-07-22",
        "email": "bob.johnson@company.com",
        "skills": ["Product Strategy", "Agile", "User Research"],
        "active": True
    },
    {
        "id": 4,
        "name": "Alice Brown",
        "position": "UX Designer",
        "department": "Design",
        "salary": 78000,
        "hire_date": "2022-11-05",
        "email": "alice.brown@company.com",
        "skills": ["Figma", "User Testing", "Prototyping"],
        "active": True
    }
]

# ===== 1. WRITING CSV FILES =====
class CSVWriter:
    """Advanced CSV writing with formatting options"""
    
    @staticmethod
    def write_simple_csv(data: List[Dict], filename: str) -> bool:
        """Write simple CSV file"""
        try:
            if not data:
                print("No data to write")
                return False
            
            # Extract headers from first dictionary
            headers = list(data[0].keys())
            
            with open(filename, 'w', encoding='utf-8', newline='') as file:
                writer = csv.DictWriter(file, fieldnames=headers)
                writer.writeheader()
                writer.writerows(data)
            
            print(f"CSV file written: {filename} ({len(data)} rows)")
            return True
            
        except Exception as e:
            print(f"Error writing CSV: {e}")
            return False
    
    @staticmethod
    def write_complex_csv(data: List[Dict], filename: str, 
                         delimiter: str = ',', quote_char: str = '"',
                         include_index: bool = False) -> bool:
        """Write CSV with advanced options"""
        try:
            if not data:
                return False
            
            # Flatten nested structures
            flattened_data = []
            for item in data:
                flat_item = {}
                for key, value in item.items():
                    if isinstance(value, list):
                        flat_item[key] = ';'.join(str(v) for v in value)
                    elif isinstance(value, bool):
                        flat_item[key] = 'Yes' if value else 'No'
                    elif isinstance(value, (int, float)):
                        flat_item[key] = value
                    else:
                        flat_item[key] = str(value)
                flattened_data.append(flat_item)
            
            headers = list(flattened_data[0].keys())
            if include_index:
                headers = ['index'] + headers
            
            with open(filename, 'w', encoding='utf-8', newline='') as file:
                # Configure quoting
                quoting = csv.QUOTE_MINIMAL
                if quote_char == "'":
                    quoting = csv.QUOTE_NONNUMERIC
                
                writer = csv.DictWriter(
                    file, 
                    fieldnames=headers,
                    delimiter=delimiter,
                    quotechar=quote_char,
                    quoting=quoting
                )
                
                writer.writeheader()
                
                for idx, row in enumerate(flattened_data, 1):
                    if include_index:
                        row_with_index = {'index': idx, **row}
                        writer.writerow(row_with_index)
                    else:
                        writer.writerow(row)
            
            print(f"Complex CSV written: {filename}")
            return True
            
        except Exception as e:
            print(f"Error writing complex CSV: {e}")
            return False
    
    @staticmethod
    def append_to_csv(new_data: List[Dict], filename: str) -> bool:
        """Append data to existing CSV file"""
        try:
            if not new_data:
                return False
            
            # Check if file exists to get headers
            file_exists = Path(filename).exists()
            
            with open(filename, 'a', encoding='utf-8', newline='') as file:
                headers = list(new_data[0].keys())
                writer = csv.DictWriter(file, fieldnames=headers)
                
                if not file_exists:
                    writer.writeheader()
                
                writer.writerows(new_data)
            
            print(f"Appended {len(new_data)} rows to {filename}")
            return True
            
        except Exception as e:
            print(f"Error appending to CSV: {e}")
            return False

# ===== 2. WRITING JSON FILES =====
class JSONWriter:
    """JSON writing with formatting and validation"""
    
    @staticmethod
    def write_json(data: Any, filename: str, indent: int = 2, 
                  sort_keys: bool = False) -> bool:
        """Write data to JSON file"""
        try:
            with open(filename, 'w', encoding='utf-8') as file:
                json.dump(data, file, indent=indent, 
                         sort_keys=sort_keys, default=str)
            
            file_size = Path(filename).stat().st_size
            print(f"JSON file written: {filename} ({file_size} bytes)")
            return True
            
        except TypeError as e:
            print(f"Error: Data contains unserializable types: {e}")
            return False
        except Exception as e:
            print(f"Error writing JSON: {e}")
            return False
    
    @staticmethod
    def write_pretty_json(data: Any, filename: str) -> bool:
        """Write human-readable JSON with metadata"""
        try:
            json_data = {
                "metadata": {
                    "generated_at": datetime.now().isoformat(),
                    "source": "Employee Database",
                    "version": "1.0",
                    "record_count": len(data) if isinstance(data, list) else 1
                },
                "data": data
            }
            
            with open(filename, 'w', encoding='utf-8') as file:
                json.dump(json_data, file, indent=4, sort_keys=True, default=str)
            
            return True
            
        except Exception as e:
            print(f"Error writing pretty JSON: {e}")
            return False
    
    @staticmethod
    def append_to_json(new_data: Any, filename: str) -> bool:
        """Append data to JSON array file"""
        try:
            existing_data = []
            
            # Read existing data if file exists
            if Path(filename).exists():
                with open(filename, 'r', encoding='utf-8') as file:
                    existing_data = json.load(file)
                    if not isinstance(existing_data, list):
                        print("Error: Existing JSON is not a list")
                        return False
            
            # Append new data
            if isinstance(new_data, list):
                existing_data.extend(new_data)
            else:
                existing_data.append(new_data)
            
            # Write back
            with open(filename, 'w', encoding='utf-8') as file:
                json.dump(existing_data, file, indent=2, default=str)
            
            print(f"Appended data to {filename}, total records: {len(existing_data)}")
            return True
            
        except json.JSONDecodeError:
            print("Error: Existing file contains invalid JSON")
            return False
        except Exception as e:
            print(f"Error appending to JSON: {e}")
            return False

# ===== 3. WRITING XML FILES =====
class XMLWriter:
    """XML writing with proper structure"""
    
    @staticmethod
    def dict_to_xml(data: Dict, root_tag: str = "root") -> ET.Element:
        """Convert dictionary to XML element"""
        root = ET.Element(root_tag)
        
        def add_elements(parent: ET.Element, data: Any, tag: str = None):
            if isinstance(data, dict):
                for key, value in data.items():
                    if isinstance(value, (dict, list)):
                        child = ET.SubElement(parent, key)
                        add_elements(child, value)
                    else:
                        child = ET.SubElement(parent, key)
                        child.text = str(value)
            elif isinstance(data, list):
                for item in data:
                    if tag:
                        child = ET.SubElement(parent, tag)
                    else:
                        child = ET.SubElement(parent, "item")
                    add_elements(child, item)
            else:
                parent.text = str(data)
        
        add_elements(root, data)
        return root
    
    @staticmethod
    def write_xml(data: Any, filename: str, root_tag: str = "data") -> bool:
        """Write data to XML file"""
        try:
            root = XMLWriter.dict_to_xml(data, root_tag)
            tree = ET.ElementTree(root)
            
            # Pretty print (requires manual formatting)
            from xml.dom import minidom
            xml_str = ET.tostring(root, encoding='unicode')
            dom = minidom.parseString(xml_str)
            pretty_xml = dom.toprettyxml(indent="  ")
            
            # Remove extra blank lines
            lines = pretty_xml.split('\n')
            lines = [line for line in lines if line.strip()]
            
            with open(filename, 'w', encoding='utf-8') as file:
                file.write('\n'.join(lines))
            
            print(f"XML file written: {filename}")
            return True
            
        except Exception as e:
            print(f"Error writing XML: {e}")
            return False

# ===== 4. UNIVERSAL DATA WRITER =====
class DataExporter:
    """Universal data exporter supporting multiple formats"""
    
    SUPPORTED_FORMATS = ['csv', 'json', 'xml', 'txt', 'yaml', 'pickle']
    
    def __init__(self, output_dir: str = "exports"):
        self.output_dir = Path(output_dir)
        self.output_dir.mkdir(exist_ok=True)
    
    def export_data(self, data: Any, filename: str, 
                   format: str = 'json', **kwargs) -> str:
        """Export data in specified format"""
        format = format.lower()
        
        if format not in self.SUPPORTED_FORMATS:
            raise ValueError(f"Unsupported format: {format}. "
                           f"Supported: {self.SUPPORTED_FORMATS}")
        
        # Ensure filename has correct extension
        if not filename.endswith(f'.{format}'):
            filename = f"{filename}.{format}"
        
        output_path = self.output_dir / filename
        
        try:
            if format == 'csv':
                success = CSVWriter.write_complex_csv(data, str(output_path), **kwargs)
            elif format == 'json':
                success = JSONWriter.write_json(data, str(output_path), **kwargs)
            elif format == 'xml':
                success = XMLWriter.write_xml(data, str(output_path), **kwargs)
            elif format == 'txt':
                success = self._write_text(data, str(output_path), **kwargs)
            elif format == 'yaml':
                success = self._write_yaml(data, str(output_path), **kwargs)
            elif format == 'pickle':
                success = self._write_pickle(data, str(output_path), **kwargs)
            else:
                success = False
            
            if success:
                return str(output_path)
            else:
                raise Exception(f"Failed to export as {format}")
                
        except Exception as e:
            raise Exception(f"Export failed: {e}")
    
    def _write_text(self, data: Any, filename: str, **kwargs) -> bool:
        """Write data as plain text"""
        try:
            with open(filename, 'w', encoding='utf-8') as file:
                if isinstance(data, (list, dict)):
                    # Pretty print for structures
                    import pprint
                    pprint.pprint(data, stream=file, width=80)
                else:
                    file.write(str(data))
            return True
        except Exception as e:
            print(f"Error writing text: {e}")
            return False
    
    def _write_yaml(self, data: Any, filename: str, **kwargs) -> bool:
        """Write data as YAML (requires PyYAML)"""
        try:
            import yaml
            with open(filename, 'w', encoding='utf-8') as file:
                yaml.dump(data, file, default_flow_style=False, **kwargs)
            return True
        except ImportError:
            print("YAML export requires PyYAML: pip install pyyaml")
            return False
        except Exception as e:
            print(f"Error writing YAML: {e}")
            return False
    
    def _write_pickle(self, data: Any, filename: str, **kwargs) -> bool:
        """Write data as pickle (Python serialization)"""
        try:
            import pickle
            with open(filename, 'wb') as file:
                pickle.dump(data, file, **kwargs)
            return True
        except Exception as e:
            print(f"Error writing pickle: {e}")
            return False
    
    def export_multiple_formats(self, data: Any, base_name: str, 
                               formats: List[str] = None) -> Dict[str, str]:
        """Export data in multiple formats simultaneously"""
        if formats is None:
            formats = ['json', 'csv', 'xml']
        
        results = {}
        timestamp = datetime.now().strftime('%Y%m%d_%H%M%S')
        
        for fmt in formats:
            try:
                filename = f"{base_name}_{timestamp}.{fmt}"
                filepath = self.export_data(data, filename, fmt)
                results[fmt] = filepath
            except Exception as e:
                results[fmt] = f"Error: {e}"
        
        return results

# ===== DEMONSTRATION =====
def demonstrate_data_writing():
    print("=== Data Writing Demonstration === ")
    
    # Create exporter
    exporter = DataExporter("demo_exports")
    
    # Export in multiple formats
    print("1. Exporting employee data in multiple formats:")
    results = exporter.export_multiple_formats(
        employee_data, 
        "employees",
        formats=['json', 'csv', 'xml', 'txt']
    )
    
    for fmt, result in results.items():
        if result.startswith("Error"):
            print(f"  {fmt.upper()}: {result}")
        else:
            file_size = Path(result).stat().st_size
            print(f"  {fmt.upper()}: {result} ({file_size} bytes)")
    
    # Demonstrate CSV features
    print("\n2. CSV Writing Features:")
    CSVWriter.write_simple_csv(employee_data[:2], "demo_exports/simple.csv")
    CSVWriter.write_complex_csv(
        employee_data, 
        "demo_exports/complex.csv",
        delimiter=';',
        include_index=True
    )
    
    # Demonstrate JSON features
    print("\n3. JSON Writing Features:")
    JSONWriter.write_json(employee_data, "demo_exports/employees.json")
    JSONWriter.write_pretty_json(employee_data, "demo_exports/employees_pretty.json")
    
    # Demonstrate appending
    print("\n4. Appending Data:")
    new_employee = {
        "id": 5,
        "name": "Charlie Wilson",
        "position": "DevOps Engineer",
        "department": "Engineering",
        "salary": 92000,
        "hire_date": "2023-08-15",
        "email": "charlie.wilson@company.com",
        "skills": ["AWS", "Kubernetes", "Terraform"],
        "active": True
    }
    
    CSVWriter.append_to_csv([new_employee], "demo_exports/simple.csv")
    JSONWriter.append_to_json(new_employee, "demo_exports/employees.json")
    
    # Show directory contents
    print("\n5. Generated Files:")
    export_dir = Path("demo_exports")
    for file in export_dir.glob("*"):
        print(f"  - {file.name}: {file.stat().st_size} bytes")
    
    # Cleanup option
    print("\n=== Demonstration Complete ===")
    print("Files saved in 'demo_exports' directory")

if __name__ == "__main__":
    demonstrate_data_writing()
        </pre>
    </div>
    
    <hr/>
    
    <b>c. Atomic File Operations and Data Safety</b>
    
    <div style="background-color: #f9f9f9; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <b>The Problem: Corrupted Files During Write</b>
        <div style="background-color: #ffe6e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
            <pre>
# DANGEROUS: Direct file writing can corrupt data
def update_config_dangerous(config_file, new_settings):
    """DANGEROUS - Can corrupt file if error occurs during write"""
    try:
        # Read current config
        with open(config_file, 'r') as f:
            config = json.load(f)
        
        # Update config
        config.update(new_settings)
        
        # Write back - if error occurs here, file is corrupted!
        with open(config_file, 'w') as f:
            json.dump(config, f)  # üíÄ If crash here, original file is gone!
            
    except Exception as e:
        print(f"Error: {e}")
        # Original config is LOST! File now contains partial write or is empty.
    
# What can go wrong:
# 1. Power failure during write
# 2. Disk full during write
# 3. Program crash during write
# 4. Permission error during write
# Result: Original data lost, file corrupted
            </pre>
        </div>
        
        <b>The Solution: Atomic Write Pattern</b>
        <div style="background-color: #e8f8e8; padding: 15px; margin: 10px 0; border-radius: 5px;">
            <pre>
import os
import tempfile
import shutil
from pathlib import Path
import hashlib

class AtomicFileWriter:
    """Safe file writing using atomic operations"""
    
    @staticmethod
    def write_atomic(filename: str, content: str, 
                    encoding: str = 'utf-8', 
                    mode: str = 'w') -> bool:
        """
        Atomic file write using temporary file + rename
        
        Steps:
        1. Write to temporary file
        2. Flush and sync to disk
        3. Rename temporary to target (atomic on most systems)
        4. Cleanup on error
        """
        temp_file = None
        try:
            # Create temporary file in same directory
            temp_fd, temp_path = tempfile.mkstemp(
                dir=os.path.dirname(filename),
                prefix=f".tmp_{os.path.basename(filename)}.",
                suffix='.tmp'
            )
            temp_file = os.fdopen(temp_fd, mode, encoding=encoding)
            
            # Write content
            temp_file.write(content)
            
            # Ensure data is written to disk
            temp_file.flush()
            if hasattr(os, 'fsync'):
                os.fsync(temp_file.fileno())
            
            # Close before rename
            temp_file.close()
            
            # Atomic rename (replaces existing file)
            os.replace(temp_path, filename)
            
            print(f"Atomic write successful: {filename}")
            return True
            
        except Exception as e:
            print(f"Atomic write failed: {e}")
            
            # Cleanup temporary file
            if temp_file and not temp_file.closed:
                temp_file.close()
            if temp_path and os.path.exists(temp_path):
                try:
                    os.unlink(temp_path)
                except:
                    pass
                    
            return False
    
    @staticmethod
    def write_json_atomic(filename: str, data: Any, **kwargs) -> bool:
        """Atomic JSON write"""
        try:
            content = json.dumps(data, **kwargs)
            return AtomicFileWriter.write_atomic(filename, content, mode='w')
        except Exception as e:
            print(f"Atomic JSON write failed: {e}")
            return False
    
    @staticmethod
    def backup_and_update(filename: str, updater_func, 
                         create_backup: bool = True) -> bool:
        """
        Safe update with backup
        
        updater_func: function that takes current content and returns new content
        """
        backup_path = None
        
        try:
            # Read current content
            if os.path.exists(filename):
                with open(filename, 'r', encoding='utf-8') as f:
                    current_content = f.read()
            else:
                current_content = ""
            
            # Create backup
            if create_backup and os.path.exists(filename):
                timestamp = datetime.now().strftime('%Y%m%d_%H%M%S')
                backup_path = f"{filename}.backup_{timestamp}"
                shutil.copy2(filename, backup_path)
                print(f"Backup created: {backup_path}")
            
            # Get new content from updater function
            new_content = updater_func(current_content)
            
            # Write atomically
            success = AtomicFileWriter.write_atomic(filename, new_content)
            
            if success and backup_path:
                # Backup successful, can optionally remove old backups
                print(f"Update successful, backup preserved: {backup_path}")
            
            return success
            
        except Exception as e:
            print(f"Backup and update failed: {e}")
            
            # Restore from backup if update failed
            if backup_path and os.path.exists(backup_path):
                try:
                    shutil.copy2(backup_path, filename)
                    print(f"Restored from backup: {backup_path}")
                except Exception as restore_error:
                    print(f"Failed to restore from backup: {restore_error}")
            
            return False

class TransactionalFileSystem:
    """Transactional file operations with rollback"""
    
    def __init__(self):
        self.transactions = []
        self.backup_dir = Path("file_backups")
        self.backup_dir.mkdir(exist_ok=True)
    
    def begin_transaction(self):
        """Start a new transaction"""
        self.transactions.append({
            'files': {},
            'start_time': datetime.now()
        })
    
    def register_file(self, filepath: str):
        """Register a file for transaction tracking"""
        if not self.transactions:
            raise Exception("No active transaction")
        
        current_transaction = self.transactions[-1]
        
        if os.path.exists(filepath):
            # Create backup of current state
            backup_name = f"{Path(filepath).name}.{int(datetime.now().timestamp())}.bak"
            backup_path = self.backup_dir / backup_name
            shutil.copy2(filepath, backup_path)
            
            # Store file state
            file_hash = self._file_hash(filepath)
            current_transaction['files'][filepath] = {
                'backup': backup_path,
                'original_hash': file_hash,
                'modified': False
            }
            print(f"Registered file: {filepath} (backup: {backup_path})")
    
    def write_file(self, filepath: str, content: str, atomic: bool = True) -> bool:
        """Write file within transaction"""
        if not self.transactions:
            raise Exception("No active transaction")
        
        current_transaction = self.transactions[-1]
        
        # Register file if not already registered
        if filepath not in current_transaction['files']:
            self.register_file(filepath)
        
        # Perform write
        if atomic:
            success = AtomicFileWriter.write_atomic(filepath, content)
        else:
            try:
                with open(filepath, 'w', encoding='utf-8') as f:
                    f.write(content)
                success = True
            except Exception as e:
                print(f"Write failed: {e}")
                success = False
        
        if success:
            current_transaction['files'][filepath]['modified'] = True
            current_transaction['files'][filepath]['new_hash'] = self._file_hash(filepath)
        
        return success
    
    def commit(self):
        """Commit transaction - make changes permanent"""
        if not self.transactions:
            raise Exception("No active transaction")
        
        current_transaction = self.transactions.pop()
        
        # Clean up backups
        for file_info in current_transaction['files'].values():
            if file_info['backup'].exists():
                try:
                    file_info['backup'].unlink()
                except:
                    pass
        
        duration = (datetime.now() - current_transaction['start_time']).total_seconds()
        print(f"Transaction committed successfully ({duration:.2f}s)")
    
    def rollback(self):
        """Rollback transaction - restore original state"""
        if not self.transactions:
            raise Exception("No active transaction")
        
        current_transaction = self.transactions.pop()
        
        # Restore files from backups
        restored_files = 0
        for filepath, file_info in current_transaction['files'].items():
            if file_info.get('modified') and file_info['backup'].exists():
                try:
                    shutil.copy2(file_info['backup'], filepath)
                    restored_files += 1
                    print(f"Restored: {filepath}")
                except Exception as e:
                    print(f"Failed to restore {filepath}: {e}")
        
        # Clean up backups
        for file_info in current_transaction['files'].values():
            if file_info['backup'].exists():
                try:
                    file_info['backup'].unlink()
                except:
                    pass
        
        print(f"Transaction rolled back. Restored {restored_files} files.")
    
    def _file_hash(self, filepath: str) -> str:
        """Calculate file hash for verification"""
        if not os.path.exists(filepath):
            return ""
        
        hasher = hashlib.sha256()
        with open(filepath, 'rb') as f:
            for chunk in iter(lambda: f.read(4096), b''):
                hasher.update(chunk)
        return hasher.hexdigest()

# ===== PRACTICAL EXAMPLE: CONFIGURATION MANAGEMENT =====
class SafeConfigManager:
    """Safe configuration file management"""
    
    def __init__(self, config_file: str):
        self.config_file = config_file
        self.config = {}
        self.load_config()
    
    def load_config(self) -> bool:
        """Load configuration from file"""
        if not os.path.exists(self.config_file):
            print(f"Config file not found: {self.config_file}")
            self.config = {}
            return True
        
        try:
            with open(self.config_file, 'r', encoding='utf-8') as f:
                self.config = json.load(f)
            print(f"Configuration loaded: {self.config_file}")
            return True
        except json.JSONDecodeError as e:
            print(f"Invalid JSON in config file: {e}")
            return False
        except Exception as e:
            print(f"Error loading config: {e}")
            return False
    
    def update_config(self, updates: Dict, create_backup: bool = True) -> bool:
        """Safely update configuration"""
        
        def updater(current_content: str) -> str:
            # Parse current config
            if current_content:
                current_config = json.loads(current_content)
            else:
                current_config = {}
            
            # Apply updates
            current_config.update(updates)
            
            # Return new JSON
            return json.dumps(current_config, indent=2)
        
        # Use atomic write with backup
        success = AtomicFileWriter.backup_and_update(
            self.config_file,
            updater,
            create_backup=create_backup
        )
        
        if success:
            # Reload config
            self.load_config()
        
        return success
    
    def get(self, key: str, default=None):
        """Get configuration value"""
        return self.config.get(key, default)
    
    def set(self, key: str, value):
        """Set configuration value (immediate save)"""
        return self.update_config({key: value})

# ===== DEMONSTRATION =====
def demonstrate_atomic_operations():
    print("=== Atomic File Operations Demonstration === ")
    
    # 1. Basic atomic write
    print("1. Basic Atomic Write:")
    test_file = "atomic_test.txt"
    
    # Write atomically
    content = "This is a test of atomic file writing. " * 1000
    success = AtomicFileWriter.write_atomic(test_file, content)
    print(f"  Atomic write {'successful' if success else 'failed'}")
    
    # Verify file
    if os.path.exists(test_file):
        file_size = os.path.getsize(test_file)
        print(f"  File size: {file_size} bytes")
    
    # 2. Atomic JSON write
    print(" 2. Atomic JSON Write:")
    json_file = "config_atomic.json"
    config_data = {
        "app_name": "Atomic Test",
        "version": "1.0.0",
        "settings": {
            "auto_save": True,
            "theme": "dark",
            "timeout": 30
        }
    }
    
    success = AtomicFileWriter.write_json_atomic(
        json_file, 
        config_data,
        indent=2
    )
    print(f"  JSON atomic write {'successful' if success else 'failed'}")
    
    # 3. Backup and update
    print(" 3. Backup and Update:")
    config_manager = SafeConfigManager("app_config.json")
    
    # Create initial config
    config_manager.update_config({
        "database": {
            "host": "localhost",
            "port": 5432,
            "name": "test_db"
        }
    })
    
    # Update with backup
    config_manager.update_config({
        "database": {
            "host": "prod-db.example.com",
            "port": 5432,
            "name": "production_db"
        },
        "cache": {
            "enabled": True,
            "ttl": 3600
        }
    })
    
    print(f"  Current config: {config_manager.config}")
    
    # 4. Transactional file system
    print(" 4. Transactional File System:")
    tfs = TransactionalFileSystem()
    
    # Create test files
    with open("file1.txt", "w") as f:
        f.write("Original content 1")
    with open("file2.txt", "w") as f:
        f.write("Original content 2")
    
    # Start transaction
    tfs.begin_transaction()
    
    # Register files
    tfs.register_file("file1.txt")
    tfs.register_file("file2.txt")
    
    # Modify files
    tfs.write_file("file1.txt", "Modified content 1")
    tfs.write_file("file2.txt", "Modified content 2")
    
    # Simulate error - rollback
    print("  Simulating error, rolling back...")
    tfs.rollback()
    
    # Verify rollback
    with open("file1.txt", "r") as f:
        content = f.read()
        print(f"  file1.txt after rollback: '{content}'")
    
    # Another transaction (commit)
    tfs.begin_transaction()
    tfs.register_file("file1.txt")
    tfs.write_file("file1.txt", "New committed content")
    tfs.commit()
    
    with open("file1.txt", "r") as f:
        content = f.read()
        print(f"  file1.txt after commit: '{content}'")
    
    # Cleanup
    print(" 5. Cleanup:")
    for file in [test_file, json_file, "app_config.json", "file1.txt", "file2.txt"]:
        if os.path.exists(file):
            os.remove(file)
            print(f"  Removed: {file}")
    
    # Remove backup directory
    if os.path.exists("file_backups"):
        shutil.rmtree("file_backups")
    
    print(" ‚úì Atomic operations demonstration complete")

if __name__ == "__main__":
    demonstrate_atomic_operations()
            </pre>
        </div>
        
        <b>Atomic Write Patterns:</b>
        <div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
            <table style="width: 100%;">
                <tr>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>Pattern</b></td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>Implementation</b></td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>Use Case</b></td>
                </tr>
                <tr>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Write-Rename</td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Write to temp, rename to target</td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Most file updates</td>
                </tr>
                <tr>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Backup-Update</td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Backup, update, restore on error</td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Critical configuration</td>
                </tr>
                <tr>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Transactional</td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Multiple files, commit/rollback</td>
                    <td style="padding: 8px; border-bottom: 1px solid #ccc;">Database-like operations</td>
                </tr>
                <tr>
                    <td style="padding: 8px;"><b>Versioned</b></td>
                    <td style="padding: 8px;"><b>Keep multiple versions, timestamp</b></td>
                    <td style="padding: 8px;">Audit trails, document history</td>
                </tr>
            </table>
        </div>
    </div>
    
    <hr/>
    
    <b>d. Practical: Complete Data Backup and Export System</b>
    
    <div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
import os
import json
import csv
import shutil
import hashlib
import tempfile
import zipfile
import tarfile
from datetime import datetime, timedelta
from pathlib import Path
from typing import Dict, List, Any, Optional
from abc import ABC, abstractmethod
import logging

# ===== BACKUP STRATEGY INTERFACES =====
class BackupStrategy(ABC):
    """Abstract base class for backup strategies"""
    
    @abstractmethod
    def create_backup(self, source: str, destination: str) -> bool:
        pass
    
    @abstractmethod
    def restore_backup(self, backup_path: str, destination: str) -> bool:
        pass

class IncrementalBackupStrategy(BackupStrategy):
    """Incremental backup - only changes since last backup"""
    
    def __init__(self, manifest_file: str = "backup_manifest.json"):
        self.manifest_file = manifest_file
        self.manifest = self._load_manifest()
    
    def _load_manifest(self) -> Dict:
        """Load backup manifest"""
        if os.path.exists(self.manifest_file):
            try:
                with open(self.manifest_file, 'r') as f:
                    return json.load(f)
            except:
                return {}
        return {}
    
    def _save_manifest(self):
        """Save backup manifest"""
        with open(self.manifest_file, 'w') as f:
            json.dump(self.manifest, f, indent=2)
    
    def _file_hash(self, filepath: str) -> str:
        """Calculate file hash"""
        hasher = hashlib.sha256()
        with open(filepath, 'rb') as f:
            for chunk in iter(lambda: f.read(4096), b''):
                hasher.update(chunk)
        return hasher.hexdigest()
    
    def create_backup(self, source: str, destination: str) -> bool:
        """Create incremental backup"""
        try:
            source_path = Path(source)
            dest_path = Path(destination)
            dest_path.mkdir(parents=True, exist_ok=True)
            
            timestamp = datetime.now().strftime('%Y%m%d_%H%M%S')
            backup_dir = dest_path / f"backup_{timestamp}"
            backup_dir.mkdir()
            
            changed_files = 0
            total_files = 0
            
            # Walk through source directory
            for root, dirs, files in os.walk(source_path):
                rel_root = Path(root).relative_to(source_path)
                
                for file in files:
                    total_files += 1
                    source_file = Path(root) / file
                    rel_file = rel_root / file
                    
                    # Calculate current hash
                    current_hash = self._file_hash(str(source_file))
                    
                    # Check if changed since last backup
                    manifest_key = str(rel_file)
                    if (manifest_key in self.manifest and 
                        self.manifest[manifest_key] == current_hash):
                        continue  # File unchanged, skip
                    
                    # File changed or new
                    changed_files += 1
                    
                    # Create destination directory
                    dest_file_dir = backup_dir / rel_root
                    dest_file_dir.mkdir(parents=True, exist_ok=True)
                    
                    # Copy file
                    shutil.copy2(source_file, dest_file_dir / file)
                    
                    # Update manifest
                    self.manifest[manifest_key] = current_hash
            
            # Save manifest
            self._save_manifest()
            
            # Create backup info
            backup_info = {
                'timestamp': datetime.now().isoformat(),
                'source': str(source_path),
                'destination': str(backup_dir),
                'type': 'incremental',
                'changed_files': changed_files,
                'total_files': total_files
            }
            
            with open(backup_dir / 'backup_info.json', 'w') as f:
                json.dump(backup_info, f, indent=2)
            
            print(f"Incremental backup created: {changed_files}/{total_files} files changed")
            return True
            
        except Exception as e:
            print(f"Incremental backup failed: {e}")
            return False
    
    def restore_backup(self, backup_path: str, destination: str) -> bool:
        """Restore from incremental backups"""
        # Implementation would need to handle multiple incremental backups
        print("Incremental restore not implemented in this example")
        return False

class FullBackupStrategy(BackupStrategy):
    """Full backup - complete copy of everything"""
    
    def create_backup(self, source: str, destination: str) -> bool:
        """Create full backup with compression"""
        try:
            source_path = Path(source)
            dest_path = Path(destination)
            dest_path.mkdir(parents=True, exist_ok=True)
            
            timestamp = datetime.now().strftime('%Y%m%d_%H%M%S')
            backup_name = f"full_backup_{timestamp}"
            
            # Create compressed archive
            archive_path = dest_path / f"{backup_name}.zip"
            
            with zipfile.ZipFile(archive_path, 'w', zipfile.ZIP_DEFLATED) as zipf:
                for root, dirs, files in os.walk(source_path):
                    for file in files:
                        file_path = Path(root) / file
                        arcname = file_path.relative_to(source_path)
                        zipf.write(file_path, arcname)
            
            # Create backup metadata
            metadata = {
                'timestamp': datetime.now().isoformat(),
                'source': str(source_path),
                'backup_file': str(archive_path),
                'type': 'full',
                'size': os.path.getsize(archive_path)
            }
            
            metadata_file = dest_path / f"{backup_name}_metadata.json"
            with open(metadata_file, 'w') as f:
                json.dump(metadata, f, indent=2)
            
            print(f"Full backup created: {archive_path} ({metadata['size']} bytes)")
            return True
            
        except Exception as e:
            print(f"Full backup failed: {e}")
            return False
    
    def restore_backup(self, backup_path: str, destination: str) -> bool:
        """Restore from full backup"""
        try:
            dest_path = Path(destination)
            dest_path.mkdir(parents=True, exist_ok=True)
            
            with zipfile.ZipFile(backup_path, 'r') as zipf:
                zipf.extractall(dest_path)
            
            print(f"Restored from backup: {backup_path}")
            return True
            
        except Exception as e:
            print(f"Restore failed: {e}")
            return False

# ===== DATA EXPORT SYSTEM =====
class DataExporter:
    """Comprehensive data export system"""
    
    def __init__(self, output_dir: str = "exports"):
        self.output_dir = Path(output_dir)
        self.output_dir.mkdir(exist_ok=True)
        self.setup_logging()
    
    def setup_logging(self):
        """Setup logging for export operations"""
        log_file = self.output_dir / "export_log.txt"
        logging.basicConfig(
            level=logging.INFO,
            format='%(asctime)s - %(levelname)s - %(message)s',
            handlers=[
                logging.FileHandler(log_file, encoding='utf-8'),
                logging.StreamHandler()
            ]
        )
        self.logger = logging.getLogger(__name__)
    
    def export_database_snapshot(self, db_connection, tables: List[str] = None) -> Dict:
        """Export database tables to files"""
        import sqlite3  # Example, could be any DB
        
        timestamp = datetime.now().strftime('%Y%m%d_%H%M%S')
        export_dir = self.output_dir / f"db_export_{timestamp}"
        export_dir.mkdir()
        
        results = {}
        
        try:
            # If no tables specified, get all tables
            if tables is None:
                cursor = db_connection.cursor()
                cursor.execute("SELECT name FROM sqlite_master WHERE type='table';")
                tables = [row[0] for row in cursor.fetchall()]
            
            for table in tables:
                try:
                    # Export table to CSV
                    csv_file = export_dir / f"{table}.csv"
                    self._export_table_to_csv(db_connection, table, csv_file)
                    
                    # Export table to JSON
                    json_file = export_dir / f"{table}.json"
                    self._export_table_to_json(db_connection, table, json_file)
                    
                    # Export schema
                    schema_file = export_dir / f"{table}_schema.sql"
                    self._export_table_schema(db_connection, table, schema_file)
                    
                    results[table] = {
                        'csv': str(csv_file),
                        'json': str(json_file),
                        'schema': str(schema_file),
                        'row_count': self._get_row_count(db_connection, table)
                    }
                    
                    self.logger.info(f"Exported table: {table} ({results[table]['row_count']} rows)")
                    
                except Exception as e:
                    self.logger.error(f"Failed to export table {table}: {e}")
                    results[table] = {'error': str(e)}
            
            # Create export summary
            summary = {
                'timestamp': datetime.now().isoformat(),
                'export_dir': str(export_dir),
                'tables_exported': len([t for t in results if 'error' not in results[t]]),
                'total_tables': len(tables),
                'results': results
            }
            
            summary_file = export_dir / "export_summary.json"
            with open(summary_file, 'w') as f:
                json.dump(summary, f, indent=2)
            
            self.logger.info(f"Database export completed: {summary_file}")
            return summary
            
        except Exception as e:
            self.logger.error(f"Database export failed: {e}")
            return {'error': str(e)}
    
    def _export_table_to_csv(self, db_connection, table: str, output_file: Path):
        """Export single table to CSV"""
        cursor = db_connection.cursor()
        cursor.execute(f"SELECT * FROM {table};")
        rows = cursor.fetchall()
        column_names = [description[0] for description in cursor.description]
        
        with open(output_file, 'w', newline='', encoding='utf-8') as f:
            writer = csv.writer(f)
            writer.writerow(column_names)
            writer.writerows(rows)
    
    def _export_table_to_json(self, db_connection, table: str, output_file: Path):
        """Export single table to JSON"""
        cursor = db_connection.cursor()
        cursor.execute(f"SELECT * FROM {table};")
        rows = cursor.fetchall()
        column_names = [description[0] for description in cursor.description]
        
        data = []
        for row in rows:
            data.append(dict(zip(column_names, row)))
        
        with open(output_file, 'w', encoding='utf-8') as f:
            json.dump(data, f, indent=2, default=str)
    
    def _export_table_schema(self, db_connection, table: str, output_file: Path):
        """Export table schema"""
        cursor = db_connection.cursor()
        cursor.execute(f"SELECT sql FROM sqlite_master WHERE type='table' AND name='{table}';")
        schema = cursor.fetchone()
        
        with open(output_file, 'w', encoding='utf-8') as f:
            if schema and schema[0]:
                f.write(schema[0])
    
    def _get_row_count(self, db_connection, table: str) -> int:
        """Get row count for table"""
        cursor = db_connection.cursor()
        cursor.execute(f"SELECT COUNT(*) FROM {table};")
        return cursor.fetchone()[0]
    
    def export_application_data(self, data_sources: Dict[str, Any], 
                               format: str = 'json') -> str:
        """Export application data from multiple sources"""
        timestamp = datetime.now().strftime('%Y%m%d_%H%M%S')
        export_dir = self.output_dir / f"app_export_{timestamp}"
        export_dir.mkdir()
        
        export_data = {
            'metadata': {
                'export_date': datetime.now().isoformat(),
                'format': format,
                'sources': list(data_sources.keys())
            },
            'data': {}
        }
        
        for source_name, data in data_sources.items():
            try:
                # Clean data for export
                cleaned_data = self._clean_for_export(data)
                export_data['data'][source_name] = cleaned_data
                
                # Also export individual source files
                source_file = export_dir / f"{source_name}.{format}"
                self._write_data_file(cleaned_data, source_file, format)
                
                self.logger.info(f"Exported source: {source_name}")
                
            except Exception as e:
                self.logger.error(f"Failed to export source {source_name}: {e}")
                export_data['data'][source_name] = {'error': str(e)}
        
        # Write combined export
        combined_file = export_dir / f"combined_export.{format}"
        self._write_data_file(export_data, combined_file, format)
        
        # Create README
        self._create_export_readme(export_dir, export_data)
        
        self.logger.info(f"Application export completed: {export_dir}")
        return str(export_dir)
    
    def _clean_for_export(self, data: Any) -> Any:
        """Clean data for export (remove sensitive info, convert types)"""
        if isinstance(data, dict):
            cleaned = {}
            for key, value in data.items():
                # Remove sensitive fields
                if any(sensitive in key.lower() for sensitive in 
                      ['password', 'token', 'secret', 'key']):
                    cleaned[key] = '[REDACTED]'
                else:
                    cleaned[key] = self._clean_for_export(value)
            return cleaned
        elif isinstance(data, list):
            return [self._clean_for_export(item) for item in data]
        elif isinstance(data, (datetime, date)):
            return data.isoformat()
        else:
            return data
    
    def _write_data_file(self, data: Any, filepath: Path, format: str):
        """Write data to file in specified format"""
        if format == 'json':
            with open(filepath, 'w', encoding='utf-8') as f:
                json.dump(data, f, indent=2, default=str)
        elif format == 'csv':
            # Flatten data for CSV
            flattened = self._flatten_for_csv(data)
            with open(filepath, 'w', newline='', encoding='utf-8') as f:
                writer = csv.DictWriter(f, fieldnames=flattened[0].keys())
                writer.writeheader()
                writer.writerows(flattened)
        elif format == 'yaml':
            import yaml
            with open(filepath, 'w', encoding='utf-8') as f:
                yaml.dump(data, f, default_flow_style=False)
    
    def _flatten_for_csv(self, data: Any) -> List[Dict]:
        """Flatten nested data for CSV export"""
        # Simplified implementation
        if isinstance(data, list):
            return data
        elif isinstance(data, dict):
            return [data]
        else:
            return [{'value': data}]
    
    def _create_export_readme(self, export_dir: Path, export_data: Dict):
        """Create README file for export"""
        readme_content = f"""# Data Export

Generated: {datetime.now().isoformat()}
Directory: {export_dir}

## Contents

This export contains the following data sources:
{chr(10).join(f'- {source}' for source in export_data['data'].keys())}

## Files

- '
                combined_export.json': All data combined
- Individual source files (one per data source)
- '
                export_log.txt': Export process log

## Usage

This data can be used for:
1. Backup and restore
2. Data analysis
3. Migration to other systems
4. Audit and compliance

## Notes

- Sensitive data has been redacted
- Dates are in ISO format (YYYY-MM-DDTHH:MM:SS)
- All text is UTF-8 encoded
"""
        
        readme_file = export_dir / "README.md"
        with open(readme_file, 'w', encoding='utf-8') as f:
            f.write(readme_content)

# ===== BACKUP MANAGER =====
class BackupManager:
    """Manage automated backups with retention policies"""
    
    def __init__(self, backup_dir: str = "backups"):
        self.backup_dir = Path(backup_dir)
        self.backup_dir.mkdir(parents=True, exist_ok=True)
        self.retention_days = 30
        self.setup_logging()
    
    def setup_logging(self):
        """Setup backup logging"""
        log_file = self.backup_dir / "backup_log.txt"
        logging.basicConfig(
            level=logging.INFO,
            format='%(asctime)s - %(levelname)s - %(message)s',
            handlers=[
                logging.FileHandler(log_file, encoding='utf-8', mode='a'),
                logging.StreamHandler()
            ]
        )
        self.logger = logging.getLogger(__name__)
    
    def create_scheduled_backup(self, source: str, 
                               strategy: str = 'incremental',
                               description: str = "") -> bool:
        """Create scheduled backup with given strategy"""
        self.logger.info(f"Starting {strategy} backup of {source}")
        
        timestamp = datetime.now().strftime('%Y%m%d_%H%M%S')
        backup_name = f"{strategy}_{timestamp}"
        
        if description:
            backup_name = f"{backup_name}_{description.replace(' ', '_')}"
        
        backup_path = self.backup_dir / backup_name
        
        try:
            # Choose strategy
            if strategy == 'incremental':
                backup_strategy = IncrementalBackupStrategy()
            elif strategy == 'full':
                backup_strategy = FullBackupStrategy()
            else:
                self.logger.error(f"Unknown backup strategy: {strategy}")
                return False
            
            # Create backup
            success = backup_strategy.create_backup(source, str(backup_path))
            
            if success:
                self.logger.info(f"Backup successful: {backup_path}")
                
                # Apply retention policy
                self.apply_retention_policy()
                
                return True
            else:
                self.logger.error(f"Backup failed: {backup_path}")
                return False
                
        except Exception as e:
            self.logger.error(f"Backup error: {e}")
            return False
    
    def apply_retention_policy(self):
        """Apply retention policy - remove old backups"""
        cutoff_date = datetime.now() - timedelta(days=self.retention_days)
        
        backups_removed = 0
        for item in self.backup_dir.iterdir():
            if item.is_dir():
                # Try to extract date from directory name
                try:
                    dir_date_str = item.name.split('_')[1]  # strategy_DATE
                    dir_date = datetime.strptime(dir_date_str[:8], '%Y%m%d')
                    
                    if dir_date < cutoff_date:
                        shutil.rmtree(item)
                        backups_removed += 1
                        self.logger.info(f"Removed old backup: {item.name}")
                except (IndexError, ValueError):
                    # Couldn't parse date, skip
                    continue
        
        if backups_removed > 0:
            self.logger.info(f"Retention policy applied: removed {backups_removed} old backups")
    
    def list_backups(self) -> List[Dict]:
        """List all available backups"""
        backups = []
        
        for item in self.backup_dir.iterdir():
            if item.is_dir():
                backup_info = {
                    'name': item.name,
                    'path': str(item),
                    'size': self._get_directory_size(item),
                    'modified': datetime.fromtimestamp(item.stat().st_mtime)
                }
                
                # Look for backup info file
                info_file = item / 'backup_info.json'
                if info_file.exists():
                    try:
                        with open(info_file, 'r') as f:
                            info_data = json.load(f)
                        backup_info.update(info_data)
                    except:
                        pass
                
                backups.append(backup_info)
        
        # Sort by modification time (newest first)
        backups.sort(key=lambda x: x['modified'], reverse=True)
        
        return backups
    
    def _get_directory_size(self, directory: Path) -> int:
        """Calculate directory size in bytes"""
        total_size = 0
        for file in directory.rglob('*'):
            if file.is_file():
                total_size += file.stat().st_size
        return total_size
    
    def restore_from_backup(self, backup_name: str, destination: str) -> bool:
        """Restore from specific backup"""
        backup_path = self.backup_dir / backup_name
        
        if not backup_path.exists():
            self.logger.error(f"Backup not found: {backup_name}")
            return False
        
        self.logger.info(f"Starting restore from {backup_name}")
        
        try:
            # Determine backup type
            if backup_name.startswith('full_'):
                strategy = FullBackupStrategy()
                
                # Find the zip file
                zip_files = list(backup_path.glob('*.zip'))
                if not zip_files:
                    self.logger.error(f"No zip file found in backup: {backup_name}")
                    return False
                
                success = strategy.restore_backup(str(zip_files[0]), destination)
                
            elif backup_name.startswith('incremental_'):
                self.logger.warning("Incremental restore not fully implemented")
                success = False
            else:
                self.logger.error(f"Unknown backup type: {backup_name}")
                success = False
            
            if success:
                self.logger.info(f"Restore successful to: {destination}")
            else:
                self.logger.error(f"Restore failed from: {backup_name}")
            
            return success
            
        except Exception as e:
            self.logger.error(f"Restore error: {e}")
            return False

# ===== DEMONSTRATION =====
def demonstrate_backup_system():
    print("=== Backup and Export System Demonstration === ")
    
    # Create sample data for demonstration
    sample_dir = Path("sample_data_for_backup")
    sample_dir.mkdir(exist_ok=True)
    
    # Create sample files
    (sample_dir / "documents").mkdir(exist_ok=True)
    (sample_dir / "images").mkdir(exist_ok=True)
    (sample_dir / "data").mkdir(exist_ok=True)
    
    # Create some sample files
    for i in range(5):
        (sample_dir / "documents" / f"doc_{i}.txt").write_text(f"Document content {i}")
        (sample_dir / "data" / f"data_{i}.json").write_text(json.dumps({"id": i, "value": f"test_{i}"}))
    
    print("1. Created sample data directory")
    print(f"   Location: {sample_dir}")
    print(f"   Files: {sum(1 for _ in sample_dir.rglob('*') if _.is_file())}")
    
    # Test Backup Manager
    print(" 2. Testing Backup Manager:")
    backup_manager = BackupManager("demo_backups")
    
    # Create a full backup
    print("   Creating full backup...")
    success = backup_manager.create_scheduled_backup(
        str(sample_dir),
        strategy='full',
        description='demo_backup'
    )
    print(f"   Full backup {'successful' if success else 'failed'}")
    
    # Create an incremental backup
    print("   Creating incremental backup...")
    
    # Modify a file to trigger incremental backup
    (sample_dir / "documents" / "doc_0.txt").write_text("Modified content")
    
    success = backup_manager.create_scheduled_backup(
        str(sample_dir),
        strategy='incremental',
        description='demo_incremental'
    )
    print(f"   Incremental backup {'successful' if success else 'failed'}")
    
    # List backups
    print(" 3. Available Backups:")
    backups = backup_manager.list_backups()
    for backup in backups[:3]:  # Show first 3
        size_mb = backup['size'] / (1024 * 1024)
        print(f"   - {backup['name']}: {size_mb:.2f} MB, {backup['modified'].strftime('%Y-%m-%d %H:%M')}")
    
    # Test Data Exporter
    print(" 4. Testing Data Exporter:")
    
    # Create sample database for export
    import sqlite3
    
    db_file = "demo_database.db"
    conn = sqlite3.connect(db_file)
    cursor = conn.cursor()
    
    # Create sample tables
    cursor.execute("""
        CREATE TABLE IF NOT EXISTS users (
            id INTEGER PRIMARY KEY,
            name TEXT NOT NULL,
            email TEXT NOT NULL,
            created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
        )
    """)
    
    cursor.execute("""
        CREATE TABLE IF NOT EXISTS products (
            id INTEGER PRIMARY KEY,
            name TEXT NOT NULL,
            price REAL NOT NULL,
            stock INTEGER DEFAULT 0
        )
    """)
    
    # Insert sample data
    cursor.executemany(
        "INSERT INTO users (name, email) VALUES (?, ?)",
        [("John Doe", "john@example.com"),
         ("Jane Smith", "jane@example.com"),
         ("Bob Johnson", "bob@example.com")]
    )
    
    cursor.executemany(
        "INSERT INTO products (name, price, stock) VALUES (?, ?, ?)",
        [("Laptop", 1200.00, 10),
         ("Mouse", 25.99, 50),
         ("Keyboard", 79.99, 30)]
    )
    
    conn.commit()
    
    # Export database
    exporter = DataExporter("demo_exports")
    
    print("   Exporting database...")
    db_export = exporter.export_database_snapshot(conn, ['users', 'products'])
    
    if 'error' not in db_export:
        print(f"   Database export completed: {db_export['export_dir']}")
        print(f"   Tables exported: {db_export['tables_exported']}/{db_export['total_tables']}")
    else:
        print(f"   Database export failed: {db_export['error']}")
    
    # Export application data
    print(" 5. Exporting application data...")
    
    app_data = {
        'config': {
            'app_name': 'Demo App',
            'version': '1.0.0',
            'settings': {
                'theme': 'dark',
                'language': 'en',
                'timezone': 'UTC'
            }
        },
        'users': [
            {'id': 1, 'name': 'Alice', 'role': 'admin'},
            {'id': 2, 'name': 'Bob', 'role': 'user'},
            {'id': 3, 'name': 'Charlie', 'role': 'user'}
        ],
        'statistics': {
            'total_users': 100,
            'active_users': 75,
            'revenue': 12500.50
        }
    }
    
    export_dir = exporter.export_application_data(app_data, format='json')
    print(f"   Application export completed: {export_dir}")
    
    # Cleanup
    print(" 6. Cleanup:")
    
    conn.close()
    
    # Remove demonstration files
    import shutil
    
    if sample_dir.exists():
        shutil.rmtree(sample_dir)
        print("   Removed sample data directory")
    
    if Path(db_file).exists():
        os.remove(db_file)
        print("   Removed demo database")
    
    # Optional: Remove backup and export directories
    cleanup = input(" Remove backup and export directories? (y/n): ").lower() == 'y'
    if cleanup:
        if Path("demo_backups").exists():
            shutil.rmtree("demo_backups")
            print("   Removed demo backups")
        
        if Path("demo_exports").exists():
            shutil.rmtree("demo_exports")
            print("   Removed demo exports")
    
    print(" ‚úì Backup and export demonstration complete")

if __name__ == "__main__":
    demonstrate_backup_system()
        </pre>
    </div>
    
    <hr/>
    
    <div class="assignment-box">
        <h4>Assignment: Build a Complete Data Management System</h4>
        
        <b>Part 1: Implement Data Exporter with Multiple Formats</b>
        <div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
            Create a <code>DataManager</code> class that can:
            <ol>
                <li><b>Export in multiple formats:</b> JSON, CSV, XML, YAML, Pickle</li>
                <li><b>Support different data sources:</b> Databases, APIs, file systems</li>
                <li><b>Include metadata:</b> Export date, source, schema information</li>
                <li><b>Handle large datasets:</b> Streaming export, chunking</li>
                <li><b>Validate exports:</b> Checksums, data integrity verification</li>
            </ol>
        </div>
        
        <b>Part 2: Create Backup System with Scheduling</b>
        <div style="background-color: #fff0e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
            Implement a backup system with:
            <pre>
class BackupScheduler:
    def schedule_backup(self, source, destination, schedule):
        """Schedule regular backups (daily, weekly, monthly)"""
    
    def incremental_backup(self, source, destination):
        """Perform incremental backup"""
    
    def full_backup(self, source, destination):
        """Perform full backup"""
    
    def apply_retention_policy(self, max_age_days, max_versions):
        """Remove old backups based on policy"""
    
    def verify_backup(self, backup_path):
        """Verify backup integrity"""
    
    def restore_backup(self, backup_path, destination):
        """Restore from backup"""
            </pre>
        </div>
        
        <b>Part 3: Build Command Line Interface</b>
        <div style="background-color: #f0fff0; padding: 15px; margin: 10px 0; border-radius: 5px;">
            Create a CLI with these commands:
            <ul>
                <li><code>export --source database --format json --output data.json</code></li>
                <li><code>backup create --source ./data --strategy incremental</code></li>
                <li><code>backup list --show-size --show-age</code></li>
                <li><code>backup restore --backup backup_20240115 --destination ./restored</code></li>
                <li><code>schedule --source ./data --frequency daily --time 02:00</code></li>
                <li><code>verify --file data.json --checksum</code></li>
            </ul>
        </div>
        
        <b>Part 4: Test with Real-World Scenarios</b>
        <div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px; font-family: monospace;">
            # Test scenarios
            scenarios = [
                ("Large database export", "Export 10,000 records with streaming"),
                ("Incremental backup", "Backup only changed files since last backup"),
                ("Cross-format conversion", "Convert CSV to JSON to XML"),
                ("Scheduled backup", "Automate daily backups at 2 AM"),
                ("Disaster recovery", "Simulate data loss and restore from backup"),
                ("Version management", "Keep last 7 daily, 4 weekly, 12 monthly backups")
            ]
            
            # Your system should handle:
            # 1. Large files without memory issues
            # 2. Network interruptions during backup
            # 3. Corrupted backup detection
            # 4. Concurrent access to data being backed up
            # 5. Logging and monitoring of all operations
        </div>
    </div>
    
    <hr/>
    
    <h3>Common File Writing Mistakes & Solutions</h3>
    
    <b>Mistake 1: Not using atomic writes for critical data</b>
    <div style="background-color: #ffe6e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
# WRONG - Direct overwrite can corrupt data
def save_config_dangerous(config):
    with open('config.json', 'w') as f:
        json.dump(config, f)  # üíÄ If crash here, config is lost!

# RIGHT - Atomic write
def save_config_safe(config):
    # Write to temp file first
    temp_file = 'config.json.tmp'
    with open(temp_file, 'w') as f:
        json.dump(config, f)
    
    # Atomic rename
    os.replace(temp_file, 'config.json')  # üíö Safe even if crash occurs

# EVEN BETTER - With backup
def save_config_with_backup(config):
    # Keep backup of previous version
    if os.path.exists('config.json'):
        shutil.copy2('config.json', 'config.json.backup')
    
    # Atomic write
    save_config_safe(config)
        </pre>
    </div>
    
    <b>Mistake 2: Not handling encoding properly</b>
<div style="background-color: #ffe6e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <pre>
# WRONG - Default encoding (system-dependent)
with open('data.txt', 'w') as f:  # üíÄ Encoding depends on system!
    f.write("caf√© r√©sum√©")  # May fail or create wrong characters

# WRONG - Wrong encoding for the data
with open('data.txt', 'w', encoding='ascii') as f:  # üíÄ ASCII can't handle √©, √º
    f.write("caf√© r√©sum√©")  # UnicodeEncodeError!

# RIGHT - Use UTF-8 (recommended default)
with open('data.txt', 'w', encoding='utf-8') as f:  # üíö Handles all Unicode
    f.write("caf√© r√©sum√© üöÄ")  # Works perfectly!

# RIGHT FOR SPECIAL CASES - Specify different encoding
with open('data.txt', 'w', encoding='latin-1') as f:  # üíö For compatibility
    f.write("European text with accents")
        </pre>
    </div>
    
    <b>Mistake 3: Not closing files properly in loops</b>
    <div style="background-color: #ffe6e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <pre>
# WRONG - Opening many files without closing
def process_files_dangerous(files):
    for filename in files:
        f = open(filename, 'w')  # üíÄ File remains open!
        f.write("data")
        # Missing f.close() - FILE LEAK!

# WRONG - Closing but not exception-safe
def process_files_risky(files):
    for filename in files:
        f = open(filename, 'w')
        try:
            f.write("data")
        finally:
            f.close()  # Better but verbose

# RIGHT - Context manager in loop
def process_files_safe(files):
    for filename in files:
        with open(filename, 'w') as f:  # üíö Automatically closed
            f.write("data")

# RIGHT FOR MANY FILES - Batch processing
def process_many_files_safe(files, batch_size=100):
    for i in range(0, len(files), batch_size):
        batch = files[i:i+batch_size]
        for filename in batch:
            with open(filename, 'w') as f:
                f.write("data")
        # Files are closed after each batch
        </pre>
    </div>
    
    <hr/>
    
    <h3>Quick Reference: File Writing Best Practices</h3>
    
    <div style="background-color: #f9f9f9; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <table style="width: 100%;">
            <tr>
                <td style="padding: 8px; border-bottom: 1px solid #ccc; width: 30%;"><b>Practice</b></td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>Implementation</b></td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;"><b>Why Important</b></td>
            </tr>
            <tr>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Use atomic writes</td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Write to temp, then rename</td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Prevents data corruption</td>
            </tr>
            <tr>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Specify encoding</td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;"><code>encoding='utf-8'</code></td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Consistent character handling</td>
            </tr>
            <tr>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Use context managers</td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;"><code>with open(...) as f:</code></td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Automatic cleanup</td>
            </tr>
            <tr>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Create backups</td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Copy before overwriting</td>
                <td style="padding: 8px; border-bottom: 1px solid #ccc;">Recovery from errors</td>
            </tr>
            <tr>
                <td style="padding: 8px;"><b>Validate writes</b></td>
                <td style="padding: 8px;"><b>Read back and verify</b></td>
                <td style="padding: 8px;">Ensure data integrity</td>
            </tr>
        </table>
    </div>
    
    <div style="background-color: #e8f8e8; padding: 20px; margin: 20px 0; border-radius: 5px; border-left: 5px solid #2ecc71;">
        <h4>üöÄ Week 9 Review: Error Handling & File I/O Complete!</h4>
        <p><b>This Week's Accomplishments:</b></p>
        <ul>
            <li><b>Day 1:</b> Error Handling with try/except and custom exceptions</li>
            <li><b>Day 2:</b> Professional logging for debugging and monitoring</li>
            <li><b>Day 3:</b> Reading from text and CSV files efficiently</li>
            <li><b>Day 4:</b> Writing to files safely with atomic operations</li>
        </ul>
        
        <p><b>Key Skills You Now Have:</b></p>
        <div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
            <pre>
# You can now build professional data pipelines:
1. Read data from various sources (files, databases, APIs)
2. Process data with proper error handling
3. Log all operations for monitoring
4. Transform and clean data
5. Export to multiple formats (JSON, CSV, XML)
6. Create safe backups with atomic writes
7. Restore data when needed
8. Schedule automatic backups
            </pre>
        </div>
        
        <p><b>Next Week Preview: Level 2 Project - Student Management System</b></p>
        <ol>
            <li>Apply all OOP principles (inheritance, encapsulation, polymorphism, abstraction)</li>
            <li>Implement comprehensive error handling and logging</li>
            <li>Create file-based persistence for student records</li>
            <li>Build a professional-grade application</li>
        </ol>
        
        <p><b>Final Week 9 Homework:</b> Build a personal finance tracker that reads transactions from CSV, processes them, and exports reports in multiple formats with automatic backups.</p>
    </div>
    
    <div style="text-align: center; margin-top: 30px; padding: 20px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border-radius: 10px;">
        <h2>üéâ Congratulations on Mastering File I/O!</h2>
        <p>You now have essential skills for real-world programming:</p>
        <p><b>Reading data</b> + <b>Processing it safely</b> + <b>Writing it back securely</b></p>
        <p>These are the foundation of most business applications. Well done!</p>
    </div>`
            },

            "10-1": {
    "icon": "fa-window-maximize",
    "title": "Introduction to GUI Development with Tkinter",
    "html": `<h1>Week 10, Day 1: Windows, Frames, and Labels</h1>
<p>Today we transition from console applications to graphical user interfaces (GUIs). We'll learn the fundamentals of Tkinter, Python's built-in GUI toolkit.</p>

<div class="analogy-box">
    <b>Analogy: Building a House üè†</b><br/>
    
    Tk() = The construction site<br/>
    Window = The house foundation<br/>
    Frames = Rooms in the house<br/>
    Widgets = Furniture in each room<br/>
    Layout Managers = Interior designers<br/>
    Event Handlers = Electricians (make things work)<br/>
    Mainloop() = Moving in and living there
</div>

<h3>Console vs GUI Applications</h3>
<table style="width:100%; border-collapse: collapse; margin: 15px 0;">
  <tr style="background: #4A90E2; color: white;">
    <th style="padding: 10px;">Aspect</th>
    <th style="padding: 10px;">Console Applications</th>
    <th style="padding: 10px;">GUI Applications</th>
  </tr>
  <tr style="background: #f8f9fa;">
    <td style="padding: 8px; border: 1px solid #ddd;">User Interaction</td>
    <td style="padding: 8px; border: 1px solid #ddd;">Text-based commands</td>
    <td style="padding: 8px; border: 1px solid #ddd;">Visual buttons, menus, forms</td>
  </tr>
  <tr style="background: white;">
    <td style="padding: 8px; border: 1px solid #ddd;">Learning Curve</td>
    <td style="padding: 8px; border: 1px solid #ddd;">Easier to start</td>
    <td style="padding: 8px; border: 1px solid #ddd;">More concepts to learn</td>
  </tr>
  <tr style="background: #f8f9fa;">
    <td style="padding: 8px; border: 1px solid #ddd;">User Experience</td>
    <td style="padding: 8px; border: 1px solid #ddd;">Technical users only</td>
    <td style="padding: 8px; border: 1px solid #ddd;">Beginner-friendly</td>
  </tr>
  <tr style="background: white;">
    <td style="padding: 8px; border: 1px solid #ddd;">Development Speed</td>
    <td style="padding: 8px; border: 1px solid #ddd;">Faster to code</td>
    <td style="padding: 8px; border: 1px solid #ddd;">More planning needed</td>
  </tr>
  <tr style="background: #f8f9fa;">
    <td style="padding: 8px; border: 1px solid #ddd;">Use Cases</td>
    <td style="padding: 8px; border: 1px solid #ddd;">Servers, scripts, tools</td>
    <td style="padding: 8px; border: 1px solid #ddd;">Desktop apps, games, tools</td>
  </tr>
</table>

<h3>Tkinter vs Other GUI Frameworks</h3>
<div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 15px; margin: 15px 0;">
  <div style="background: #e3f2fd; padding: 15px; border-radius: 10px;">
    <h4>üêç Tkinter (Our Choice)</h4>
    <p><b>Pros:</b></p>
    <ul>
      <li>Built into Python</li>
      <li>Simple to learn</li>
      <li>Cross-platform</li>
      <li>Great for beginners</li>
      <li>Good for small/medium apps</li>
    </ul>
    <p><b>Cons:</b></p>
    <ul>
      <li>Looks basic (can be themed)</li>
      <li>Not for complex UIs</li>
      <li>Limited modern widgets</li>
    </ul>
  </div>
  <div style="background: #f3e5f5; padding: 15px; border-radius: 10px;">
    <h4>ü™ü PyQt/PySide</h4>
    <p><b>Pros:</b></p>
    <ul>
      <li>Professional look</li>
      <li>Many widgets</li>
      <li>Great documentation</li>
      <li>Commercial support</li>
    </ul>
    <p><b>Cons:</b></p>
    <ul>
      <li>Complex licensing</li>
      <li>Steep learning curve</li>
      <li>Large file size</li>
    </ul>
  </div>
  <div style="background: #e8f5e8; padding: 15px; border-radius: 10px;">
    <h4>üé® Kivy</h4>
    <p><b>Pros:</b></p>
    <ul>
      <li>Modern touch interfaces</li>
      <li>Cross-platform</li>
      <li>Good for mobile apps</li>
      <li>Open source</li>
    </ul>
    <p><b>Cons:</b></p>
    <ul>
      <li>Different paradigm</li>
      <li>Performance issues</li>
      <li>Smaller community</li>
    </ul>
  </div>
</div>

<h3>Your First Tkinter Window</h3>
<pre style="background: #36454f; color: white; padding: 15px; border-radius: 5px;">
import tkinter as tk
from tkinter import ttk

# ==============================================
# THE SIMPLEST POSSIBLE WINDOW
# ==============================================

# 1. Create the main window (root)
root = tk.Tk()

# 2. Configure window properties
root.title("My First GUI App")      # Window title
root.geometry("400x300")             # Width x Height
root.resizable(True, True)           # Allow resizing (width, height)
root.configure(bg='lightblue')       # Background color

# 3. Add a simple label widget
label = tk.Label(
    root,                            # Parent widget
    text="Hello, GUI World! üéâ",     # Text to display
    font=("Arial", 16, "bold"),      # Font (family, size, style)
    fg="white",                      # Foreground (text) color
    bg="darkblue",                   # Background color
    padx=20,                         # Horizontal padding
    pady=10                          # Vertical padding
)
label.pack(pady=50)                  # Add to window with padding

# 4. Add an exit button
exit_button = tk.Button(
    root,
    text="Exit Application",
    command=root.destroy,            # Function to call when clicked
    font=("Arial", 12),
    bg="red",
    fg="white",
    padx=15,
    pady=5
)
exit_button.pack()

# 5. Start the application
root.mainloop()

# ==============================================
# KEY CONCEPTS EXPLAINED:
# ==============================================
# tk.Tk() - Creates the main application window
# geometry("400x300") - Sets window size (width x height)
# title("...") - Sets window title bar text
# configure(bg='color') - Sets background color
# Label() - Creates a text display widget
# Button() - Creates a clickable button
# pack() - Simple layout manager (more on this later)
# mainloop() - Starts the event loop (keeps window open)
</pre>

<h3>Understanding Tkinter Widgets</h3>
<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 15px 0;">
  <div style="background: #fff3cd; padding: 15px; border-radius: 10px;">
    <h4>üì¶ Basic Widgets (Today's Focus)</h4>
    <ul>
      <li><b>Label:</b> Display text/images</li>
      <li><b>Frame:</b> Container for other widgets</li>
      <li><b>Button:</b> Clickable button</li>
      <li><b>Entry:</b> Single-line text input</li>
      <li><b>Text:</b> Multi-line text input</li>
      <li><b>Checkbutton:</b> On/off toggle</li>
      <li><b>Radiobutton:</b> Single choice from options</li>
      <li><b>Scale:</b> Slider for values</li>
    </ul>
  </div>
  <div style="background: #d4edda; padding: 15px; border-radius: 10px;">
    <h4>üìä Advanced Widgets (Coming Soon)</h4>
    <ul>
      <li><b>Listbox:</b> Scrollable list</li>
      <li><b>Combobox:</b> Dropdown menu</li>
      <li><b>Treeview:</b> Table/grid display</li>
      <li><b>Canvas:</b> Drawing area</li>
      <li><b>Scrollbar:</b> Scrollable areas</li>
      <li><b>Menu:</b> Menu bars</li>
      <li><b>Messagebox:</b> Popup dialogs</li>
      <li><b>Progressbar:</b> Progress indicator</li>
    </ul>
  </div>
</div>

<h3>Complete Label and Frame Tutorial</h3>
<pre style="background: #36454f; color: white; padding: 15px; border-radius: 5px; max-height: 600px; overflow-y: auto;">
import tkinter as tk
from tkinter import ttk

class LabelFrameDemo:
    def __init__(self, root):
        self.root = root
        self.root.title("Labels and Frames Demo")
        self.root.geometry("600x500")
        self.root.configure(bg='#f0f0f0')
        
        self.create_widgets()
    
    def create_widgets(self):
        # ==============================================
        # PART 1: FRAMES AS CONTAINERS
        # ==============================================
        
        # Main container frame
        main_frame = tk.Frame(self.root, bg='white', relief='raised', bd=3)
        main_frame.pack(padx=20, pady=20, fill='both', expand=True)
        
        # Title label
        title_label = tk.Label(
            main_frame,
            text="üìö Tkinter Widgets Academy",
            font=("Arial", 20, "bold"),
            fg="darkblue",
            bg="white"
        )
        title_label.pack(pady=(20, 30))
        
        # ==============================================
        # PART 2: CREATING MULTIPLE FRAMES (ROOMS)
        # ==============================================
        
        # Create a frame to hold our example frames
        examples_container = tk.Frame(main_frame, bg='white')
        examples_container.pack(fill='both', expand=True, padx=20)
        
        # Frame 1: Simple Labels
        frame1 = tk.LabelFrame(
            examples_container,
            text="1. Basic Labels",
            font=("Arial", 12, "bold"),
            bg='#e8f4f8',
            padx=15,
            pady=15,
            relief='groove',
            bd=2
        )
        frame1.grid(row=0, column=0, padx=10, pady=10, sticky='nsew')
        
        # Different types of labels in frame1
        label1 = tk.Label(frame1, text="Normal Label", font=("Arial", 11))
        label1.pack(anchor='w', pady=5)
        
        label2 = tk.Label(frame1, text="Bold Label", font=("Arial", 11, "bold"))
        label2.pack(anchor='w', pady=5)
        
        label3 = tk.Label(frame1, text="Italic Label", font=("Arial", 11, "italic"))
        label3.pack(anchor='w', pady=5)
        
        label4 = tk.Label(frame1, text="Colored Label", font=("Arial", 11), fg="red")
        label4.pack(anchor='w', pady=5)
        
        label5 = tk.Label(frame1, text="Label with BG", font=("Arial", 11), 
                         bg="yellow", padx=10, pady=5)
        label5.pack(anchor='w', pady=5)
        
        label6 = tk.Label(frame1, text="Border Label", font=("Arial", 11),
                         relief='solid', bd=1, padx=10, pady=5)
        label6.pack(anchor='w', pady=5)
        
        # Frame 2: Label with Images
        frame2 = tk.LabelFrame(
            examples_container,
            text="2. Labels with Images",
            font=("Arial", 12, "bold"),
            bg='#f0f8ff',
            padx=15,
            pady=15,
            relief='groove',
            bd=2
        )
        frame2.grid(row=0, column=1, padx=10, pady=10, sticky='nsew')
        
        # Note: For actual images, you'd use PhotoImage
        # For now, we'll use emoji/text as placeholders
        
        emoji_label = tk.Label(frame2, text="üìÅ File Explorer", 
                              font=("Arial", 11), padx=10, pady=5)
        emoji_label.pack(pady=5)
        
        emoji_label2 = tk.Label(frame2, text="üîç Search Tool", 
                               font=("Arial", 11), padx=10, pady=5)
        emoji_label2.pack(pady=5)
        
        emoji_label3 = tk.Label(frame2, text="‚öôÔ∏è Settings", 
                               font=("Arial", 11), padx=10, pady=5)
        emoji_label3.pack(pady=5)
        
        # Frame 3: Multi-line and Wrapping Labels
        frame3 = tk.LabelFrame(
            examples_container,
            text="3. Multi-line Labels",
            font=("Arial", 12, "bold"),
            bg='#f8f0ff',
            padx=15,
            pady=15,
            relief='groove',
            bd=2
        )
        frame3.grid(row=1, column=0, padx=10, pady=10, sticky='nsew')
        
        long_text = """This is a multi-line label that demonstrates text wrapping in Tkinter. The text will automatically wrap to fit within the width of the frame."""
        
        wrapped_label = tk.Label(
            frame3,
            text=long_text,
            font=("Arial", 10),
            wraplength=250,  # Width in pixels before wrapping
            justify='left',  # left, center, or right
            bg='white',
            padx=10,
            pady=10,
            relief='sunken'
        )
        wrapped_label.pack(fill='both', expand=True)
        
        # Frame 4: Label Alignment Examples
        frame4 = tk.LabelFrame(
            examples_container,
            text="4. Text Alignment",
            font=("Arial", 12, "bold"),
            bg='#fff8f0',
            padx=15,
            pady=15,
            relief='groove',
            bd=2
        )
        frame4.grid(row=1, column=1, padx=10, pady=10, sticky='nsew')
        
        # Left aligned
        left_label = tk.Label(frame4, text="‚Üê Left Aligned", 
                             font=("Arial", 11), anchor='w', 
                             width=20, relief='ridge', bd=1)
        left_label.pack(pady=5, fill='x')
        
        # Center aligned
        center_label = tk.Label(frame4, text="Center Aligned", 
                               font=("Arial", 11), anchor='center',
                               width=20, relief='ridge', bd=1)
        center_label.pack(pady=5, fill='x')
        
        # Right aligned
        right_label = tk.Label(frame4, text="Right Aligned ‚Üí", 
                              font=("Arial", 11), anchor='e',
                              width=20, relief='ridge', bd=1)
        right_label.pack(pady=5, fill='x')
        
        # ==============================================
        # PART 3: CONFIGURING WIDGETS DYNAMICALLY
        # ==============================================
        
        # Control Panel Frame
        control_frame = tk.LabelFrame(
            main_frame,
            text="Control Panel",
            font=("Arial", 12, "bold"),
            bg='#e8e8e8',
            padx=15,
            pady=15
        )
        control_frame.pack(pady=20, padx=20, fill='x')
        
        # Create a label to modify
        self.demo_label = tk.Label(
            control_frame,
            text="Change My Properties!",
            font=("Arial", 14),
            bg="lightgreen",
            padx=20,
            pady=10
        )
        self.demo_label.pack(pady=10)
        
        # Button frame
        button_frame = tk.Frame(control_frame, bg='#e8e8e8')
        button_frame.pack()
        
        # Buttons to change label properties
        tk.Button(button_frame, text="Change Text", 
                 command=self.change_text).grid(row=0, column=0, padx=5)
        tk.Button(button_frame, text="Change Color", 
                 command=self.change_color).grid(row=0, column=1, padx=5)
        tk.Button(button_frame, text="Change Font", 
                 command=self.change_font).grid(row=0, column=2, padx=5)
        tk.Button(button_frame, text="Reset", 
                 command=self.reset_label).grid(row=0, column=3, padx=5)
        
        # Configure grid weights for responsive layout
        examples_container.grid_columnconfigure(0, weight=1)
        examples_container.grid_columnconfigure(1, weight=1)
        examples_container.grid_rowconfigure(0, weight=1)
        examples_container.grid_rowconfigure(1, weight=1)
    
    def change_text(self):
        texts = [
            "Text Changed!",
            "Hello Tkinter!",
            "Python GUI Rocks!",
            "Learning is Fun!",
            "Widgets are Cool!"
        ]
        import random
        new_text = random.choice(texts)
        self.demo_label.config(text=new_text)
    
    def change_color(self):
        colors = ['lightblue', 'lightcoral', 'lightgreen', 'lightyellow', 'lightpink']
        import random
        new_color = random.choice(colors)
        self.demo_label.config(bg=new_color)
    
    def change_font(self):
        fonts = [
            ("Arial", 14, "bold"),
            ("Courier", 14, "italic"),
            ("Times", 14, "bold italic"),
            ("Verdana", 14),
            ("Comic Sans MS", 14)
        ]
        import random
        new_font = random.choice(fonts)
        self.demo_label.config(font=new_font)
    
    def reset_label(self):
        self.demo_label.config(
            text="Change My Properties!",
            font=("Arial", 14),
            bg="lightgreen"
        )

# Create and run the application
if __name__ == "__main__":
    root = tk.Tk()
    app = LabelFrameDemo(root)
    root.mainloop()
</pre>

<h3>Common Widget Properties</h3>
<div style="background: #f0f8ff; padding: 15px; border-radius: 10px; margin: 15px 0;">
  <table style="width:100%; border-collapse: collapse;">
    <tr style="background: #4A90E2; color: white;">
      <th style="padding: 8px;">Property</th>
      <th style="padding: 8px;">Description</th>
      <th style="padding: 8px;">Example Values</th>
    </tr>
    <tr style="background: #f8f9fa;">
      <td style="padding: 8px; border: 1px solid #ddd;"><code>text</code></td>
      <td style="padding: 8px; border: 1px solid #ddd;">Text to display</td>
      <td style="padding: 8px; border: 1px solid #ddd;"><code>"Hello World"</code></td>
    </tr>
    <tr style="background: white;">
      <td style="padding: 8px; border: 1px solid #ddd;"><code>font</code></td>
      <td style="padding: 8px; border: 1px solid #ddd;">Font family, size, style</td>
      <td style="padding: 8px; border: 1px solid #ddd;"><code>("Arial", 12, "bold")</code></td>
    </tr>
    <tr style="background: #f8f9fa;">
      <td style="padding: 8px; border: 1px solid #ddd;"><code>fg / bg</code></td>
      <td style="padding: 8px; border: 1px solid #ddd;">Foreground/Background color</td>
      <td style="padding: 8px; border: 1px solid #ddd;"><code>"red"</code>, <code>"#FF0000"</code></td>
    </tr>
    <tr style="background: white;">
      <td style="padding: 8px; border: 1px solid #ddd;"><code>padx / pady</code></td>
      <td style="padding: 8px; border: 1px solid #ddd;">Internal padding</td>
      <td style="padding: 8px; border: 1px solid #ddd;"><code>10</code> (pixels)</td>
    </tr>
    <tr style="background: #f8f9fa;">
      <td style="padding: 8px; border: 1px solid #ddd;"><code>relief</code></td>
      <td style="padding: 8px; border: 1px solid #ddd;">Border style</td>
      <td style="padding: 8px; border: 1px solid #ddd;"><code>"flat"</code>, <code>"raised"</code>, <code>"sunken"</code></td>
    </tr>
    <tr style="background: white;">
      <td style="padding: 8px; border: 1px solid #ddd;"><code>bd</code></td>
      <td style="padding: 8px; border: 1px solid #ddd;">Border width</td>
      <td style="padding: 8px; border: 1px solid #ddd;"><code>2</code> (pixels)</td>
    </tr>
    <tr style="background: #f8f9fa;">
      <td style="padding: 8px; border: 1px solid #ddd;"><code>width / height</code></td>
      <td style="padding: 8px; border: 1px solid #ddd;">Size in characters or pixels</td>
      <td style="padding: 8px; border: 1px solid #ddd;"><code>20</code>, <code>100</code></td>
    </tr>
    <tr style="background: white;">
      <td style="padding: 8px; border: 1px solid #ddd;"><code>anchor</code></td>
      <td style="padding: 8px; border: 1px solid #ddd;">Text position</td>
      <td style="padding: 8px; border: 1px solid #ddd;"><code>"w"</code> (west/left), <code>"center"</code></td>
    </tr>
    <tr style="background: #f8f9fa;">
      <td style="padding: 8px; border: 1px solid #ddd;"><code>wraplength</code></td>
      <td style="padding: 8px; border: 1px solid #ddd;">Wrap text at width</td>
      <td style="padding: 8px; border: 1px solid #ddd;"><code>200</code> (pixels)</td>
    </tr>
  </table>
</div>

<h3>Today's Hands-On Exercises</h3>
<div style="background: #e8f5e8; padding: 15px; border-radius: 10px;">
  <b>Exercise 1: Personal Information Display (45 minutes)</b>
  <p>Create a GUI that displays your personal information:</p>
  
  <ul>
    <li>Main window titled "My Profile"</li>
    <li>Use frames to organize content</li>
    <li>Include sections for:
      <ul>
        <li>Personal Info (Name, Age, City)</li>
        <li>Education (School, Major)</li>
        <li>Skills (Programming languages)</li>
        <li>Hobbies (At least 3 hobbies)</li>
      </ul>
    </li>
    <li>Use different font styles and colors for each section</li>
    <li>Add a "Close" button that exits the application</li>
  </ul>
  
  <b>Exercise 2: Digital Clock (45 minutes)</b>
  <p>Create a digital clock application:</p>
  
  <ul>
    <li>Display current time (hours:minutes:seconds)</li>
    <li>Update the time every second</li>
    <li>Include date display (day, month, year)</li>
    <li>Add buttons to:
      <ul>
        <li>Toggle 12-hour/24-hour format</li>
        <li>Change clock color theme</li>
        <li>Toggle date display on/off</li>
      </ul>
    </li>
    <li>Use large, readable font for the time</li>
  </ul>
  
  <b>Exercise 3: Recipe Card Maker (30 minutes)</b>
  <p>Create a recipe display application:</p>
  
  <ul>
    <li>Frame for recipe title (large font)</li>
    <li>Frame for ingredients (bullet points using labels)</li>
    <li>Frame for instructions (wrapped text)</li>
    <li>Frame for preparation time and difficulty</li>
    <li>Use different background colors for each frame</li>
    <li>Add borders and padding for visual separation</li>
  </ul>
</div>

<h3>Homework: Create a Business Card Designer</h3>
<div style="background: #fff0e6; padding: 15px; border-radius: 10px;">
  <p>Design a business card creation application with the following features:</p>
  
  <ul>
    <li><b>Main Window:</b> 800x600 pixels, titled "Business Card Designer"</li>
    <li><b>Design Area:</b> A frame that represents the business card (3.5x2 inches)</li>
    <li><b>Control Panel:</b> Side panel with customization options</li>
    <li><b>Required Elements on Card:</b>
      <ul>
        <li>Company Name (large, bold)</li>
        <li>Your Name and Title</li>
        <li>Contact Information (phone, email, website)</li>
        <li>Company Logo (use text or emoji as placeholder)</li>
        <li>Company Slogan/Tagline</li>
      </ul>
    </li>
    <li><b>Customization Options:</b>
      <ul>
        <li>Change background color of card</li>
        <li>Change text color</li>
        <li>Change font style and size</li>
        <li>Toggle visibility of elements</li>
        <li>Reset to default design</li>
      </ul>
    </li>
    <li><b>Bonus Features:</b>
      <ul>
        <li>Multiple card templates to choose from</li>
        <li>Save/Load design functionality</li>
        <li>Preview mode (hide controls)</li>
        <li>Print simulation (message box)</li>
      </ul>
    </li>
  </ul>
  
  <p><b>Learning Objectives:</b></p>
  <ul>
    <li>Practice using frames as containers</li>
    <li>Learn to organize multiple widgets</li>
    <li>Understand widget configuration</li>
    <li>Create interactive applications</li>
    <li>Design user-friendly interfaces</li>
  </ul>
</div>

<h3>Common Mistakes & Solutions</h3>
<div style="background: #f8d7da; padding: 15px; border-radius: 10px;">
  <h4>üö® Troubleshooting Guide</h4>
  
  <p><b>Problem:</b> Window flashes and closes immediately</p>
  <pre style="background: white; padding: 5px; margin: 5px 0;">
# Solution: Missing mainloop()
root = tk.Tk()
# ... create widgets ...
root.mainloop()  # ‚Üê THIS IS ESSENTIAL!
  </pre>
  
  <p><b>Problem:</b> Widgets not appearing</p>
  <pre style="background: white; padding: 5px; margin: 5px 0;">
# Solution: Forgot to pack/grid/place
label = tk.Label(root, text="Hello")
label.pack()  # ‚Üê Widget needs a geometry manager!
  </pre>
  
  <p><b>Problem:</b> "NameError: name 'tk' is not defined"</p>
  <pre style="background: white; padding: 5px; margin: 5px 0;">
# Solution: Import error
import tkinter as tk  # ‚Üê Must import first
from tkinter import ttk
  </pre>
  
  <p><b>Problem:</b> Widgets overlapping or wrong size</p>
  <pre style="background: white; padding: 5px; margin: 5px 0;">
# Solution: Use appropriate geometry manager
# pack() - Simple vertical/horizontal stacking
# grid() - Row/column layout (more control)
# place() - Absolute positioning (avoid for now)
  </pre>
</div>

<h3>Key Learning Points</h3>
<ol>
  <li><b>Tkinter</b> is Python's built-in GUI toolkit (no installation needed)</li>
  <li>Every GUI needs a <code>mainloop()</code> to run</li>
  <li><b>Frames</b> are containers that organize widgets</li>
  <li><b>Labels</b> display text and images (non-interactive)</li>
  <li>Widget properties control appearance (font, color, size, etc.)</li>
  <li>Always use a <b>geometry manager</b> (pack, grid, or place) to display widgets</li>
  <li>Start simple and add complexity gradually</li>
</ol>

<div style="background: #e8f5e8; padding: 15px; border-radius: 10px; margin-top: 20px;">
  <h3>üí° Pro Tip: Widget Naming Convention</h3>
  <p>Use descriptive variable names for your widgets:</p>
  <pre style="background: white; padding: 10px;">
# ‚ùå Bad - Hard to understand
l1 = tk.Label(root, text="Name")
b1 = tk.Button(root, text="Submit")

# ‚úÖ Good - Clear and descriptive
name_label = tk.Label(root, text="Name")
submit_button = tk.Button(root, text="Submit")

# Even better with prefixes:
lbl_name = tk.Label(root, text="Name")
btn_submit = tk.Button(root, text="Submit")
frm_main = tk.Frame(root)
  </pre>
</div>
`
  },
            "10-2": {
    "icon": "fa-mouse-pointer",
    "title": "Buttons & Event Handlers",
    "html": `<h1>Week 10, Day 2: Buttons and Event Handlers</h1>
<p>Today we make our GUIs interactive! We'll learn how to create buttons, handle user clicks, and respond to events.</p>

<div class="analogy-box">
    <b>Analogy: The Restaurant Order System üçΩÔ∏è</b><br/>
    
    Button = Menu item button<br/>
    Command = What happens when you press it<br/>
    Event = Customer pressing the button<br/>
    Event Handler = Kitchen preparing the order<br/>
    Callback Function = Specific recipe to follow<br/>
    Event Loop = Waiter checking for new orders<br/>
    Bind = Connecting buttons to specific actions
</div>

<h3>Types of Interactions in GUI</h3>
<div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 15px; margin: 15px 0;">
  <div style="background: #e3f2fd; padding: 15px; border-radius: 10px; text-align: center;">
    <h4>üñ±Ô∏è Mouse Events</h4>
    <ul style="text-align: left;">
      <li><b>Click:</b> Button press/release</li>
      <li><b>Double-click:</b> Two quick clicks</li>
      <li><b>Drag:</b> Click + move + release</li>
      <li><b>Hover:</b> Mouse over widget</li>
      <li><b>Scroll:</b> Mouse wheel movement</li>
    </ul>
  </div>
  <div style="background: #f3e5f5; padding: 15px; border-radius: 10px; text-align: center;">
    <h4>‚å®Ô∏è Keyboard Events</h4>
    <ul style="text-align: left;">
      <li><b>Key press:</b> Any key pressed</li>
      <li><b>Key release:</b> Key released</li>
      <li><b>Special keys:</b> Enter, Escape, etc.</li>
      <li><b>Key combinations:</b> Ctrl+C, Alt+F4</li>
      <li><b>Typing:</b> Character input</li>
    </ul>
  </div>
  <div style="background: #e8f5e8; padding: 15px; border-radius: 10px; text-align: center;">
    <h4>üì± Window Events</h4>
    <ul style="text-align: left;">
      <li><b>Resize:</b> Window size changed</li>
      <li><b>Minimize/Maximize:</b> Window state</li>
      <li><b>Close:</b> Window closing</li>
      <li><b>Focus:</b> Window gains/loses focus</li>
      <li><b>Move:</b> Window position changed</li>
    </ul>
  </div>
</div>

<h3>Button Widget Deep Dive</h3>
<pre style="background: #36454f; color: white; padding: 15px; border-radius: 5px;">
import tkinter as tk
from tkinter import ttk

# ==============================================
# BASIC BUTTON CREATION
# ==============================================

root = tk.Tk()
root.title("Button Masterclass")
root.geometry("500x400")

# 1. SIMPLE BUTTON WITH COMMAND
def say_hello():
    print("Hello, Tkinter!")
    # We'll learn to update GUI instead of printing later

btn_simple = tk.Button(
    root,
    text="Click Me!",
    command=say_hello,          # Function to call when clicked
    font=("Arial", 12),
    bg="lightblue",
    fg="darkblue",
    padx=20,
    pady=10
)
btn_simple.pack(pady=20)

# 2. BUTTON WITH LAMBDA FUNCTION
# Lambda allows passing arguments to command
btn_lambda = tk.Button(
    root,
    text="Say 'Hello User'",
    command=lambda: print("Hello, User!"),  # Inline function
    font=("Arial", 12),
    bg="lightgreen"
)
btn_lambda.pack(pady=10)

# 3. BUTTON THAT CHANGES ITSELF
def toggle_button():
    if btn_toggle["text"] == "ON":
        btn_toggle.config(text="OFF", bg="red", fg="white")
    else:
        btn_toggle.config(text="ON", bg="green", fg="white")

btn_toggle = tk.Button(
    root,
    text="ON",
    command=toggle_button,
    font=("Arial", 14, "bold"),
    bg="green",
    fg="white",
    width=10,
    height=2
)
btn_toggle.pack(pady=20)

# 4. DISABLED BUTTON (CAN'T BE CLICKED)
btn_disabled = tk.Button(
    root,
    text="Disabled Button",
    state="disabled",           # Can be "normal", "disabled", or "active"
    font=("Arial", 12),
    bg="gray",
    fg="white"
)
btn_disabled.pack(pady=10)

# 5. BUTTON WITH IMAGE (USING EMOJI AS PLACEHOLDER)
btn_image = tk.Button(
    root,
    text="üìÅ Open File",        # Emoji + text
    font=("Arial", 12),
    compound="left",            # Position image relative to text
    padx=15,
    pady=5
)
btn_image.pack(pady=10)

# 6. BUTTON STYLES WITH TTK (THEMED TKINTER)
style = ttk.Style()
style.configure("Success.TButton", font=("Arial", 12), padding=10)

btn_ttk = ttk.Button(
    root,
    text="TTK Themed Button",
    style="Success.TButton"
)
btn_ttk.pack(pady=20)

root.mainloop()

# ==============================================
# KEY BUTTON PROPERTIES:
# ==============================================
# command: Function to call when button is clicked
# text: Text displayed on button
# state: "normal", "disabled", or "active"
# bg/fg: Background and foreground colors
# font: Text font
# width/height: Size in characters or pixels
# padx/pady: Internal padding
# relief: Border style ("flat", "raised", "sunken", etc.)
# bd: Border width
# cursor: Mouse cursor when hovering ("hand2", "arrow", etc.)
</pre>

<h3>Event Binding System</h3>
<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 15px 0;">
  <div style="background: #fff3cd; padding: 15px; border-radius: 10px;">
    <h4>üéØ Event Types & Modifiers</h4>
    <p><b>Mouse Events:</b></p>
    <ul>
      <li><code>&lt;Button-1&gt;</code> - Left mouse click</li>
      <li><code>&lt;Button-2&gt;</code> - Middle mouse click</li>
      <li><code>&lt;Button-3&gt;</code> - Right mouse click</li>
      <li><code>&lt;Double-Button-1&gt;</code> - Double click</li>
      <li><code>&lt;B1-Motion&gt;</code> - Drag with left button</li>
      <li><code>&lt;Enter&gt;</code> - Mouse enters widget</li>
      <li><code>&lt;Leave&gt;</code> - Mouse leaves widget</li>
    </ul>
    <p><b>Keyboard Events:</b></p>
    <ul>
      <li><code>&lt;KeyPress&gt;</code> - Any key pressed</li>
      <li><code>&lt;KeyRelease&gt;</code> - Key released</li>
      <li><code>&lt;Return&gt;</code> - Enter/Return key</li>
      <li><code>&lt;Escape&gt;</code> - Escape key</li>
      <li><code>&lt;Control-c&gt;</code> - Ctrl+C</li>
    </ul>
  </div>
  <div style="background: #d4edda; padding: 15px; border-radius: 10px;">
    <h4>üîó Binding Methods</h4>
    <pre style="background: white; padding: 10px;">
# METHOD 1: Button command parameter
button = tk.Button(root, text="Click", command=my_function)

# METHOD 2: bind() method for any event
widget.bind("&lt;Button-1&gt;", my_function)

# METHOD 3: bind_class() for all widgets of type
root.bind_class("Button", "&lt;Enter&gt;", on_hover)

# METHOD 4: unbind() to remove binding
widget.unbind("&lt;Button-1&gt;")

# Event object (passed to bound functions):
def on_click(event):
    print(f"Clicked at ({event.x}, {event.y})")
    print(f"Widget: {event.widget}")
    print(f"Event type: {event.type}")
    
# Binding with parameters using lambda:
widget.bind("&lt;Button-1&gt;", 
           lambda e, param="hello": my_function(e, param))
    </pre>
  </div>
</div>

<h3>Complete Interactive Application</h3>
<pre style="background: #36454f; color: white; padding: 15px; border-radius: 5px; max-height: 600px; overflow-y: auto;">
import tkinter as tk
from tkinter import ttk

class InteractiveApp:
    def __init__(self, root):
        self.root = root
        self.root.title("Interactive Learning App")
        self.root.geometry("700x600")
        self.root.configure(bg='#f5f5f5')
        
        # Initialize variables
        self.click_count = 0
        self.mouse_position = "Not tracked"
        self.last_key = "None"
        
        self.create_widgets()
        self.bind_events()
    
    def create_widgets(self):
        # Title
        title = tk.Label(
            self.root,
            text="üéÆ Interactive Event Demonstrator",
            font=("Arial", 20, "bold"),
            bg='#f5f5f5',
            fg='darkblue'
        )
        title.pack(pady=20)
        
        # Main container
        main_frame = tk.Frame(self.root, bg='white', relief='raised', bd=2)
        main_frame.pack(padx=20, pady=10, fill='both', expand=True)
        
        # ==============================================
        # SECTION 1: BUTTON INTERACTIONS
        # ==============================================
        btn_section = tk.LabelFrame(
            main_frame,
            text="Button Interactions",
            font=("Arial", 14, "bold"),
            bg='#e8f4f8',
            padx=15,
            pady=15
        )
        btn_section.pack(fill='x', padx=20, pady=10)
        
        # Counter button
        self.counter_label = tk.Label(
            btn_section,
            text=f"Clicks: {self.click_count}",
            font=("Arial", 16),
            bg='white',
            relief='sunken',
            width=20,
            height=2
        )
        self.counter_label.pack(pady=10)
        
        btn_frame = tk.Frame(btn_section, bg='#e8f4f8')
        btn_frame.pack()
        
        tk.Button(btn_frame, text="‚ûï Increment", 
                 command=self.increment_count,
                 bg='lightgreen', padx=15).pack(side='left', padx=5)
        
        tk.Button(btn_frame, text="‚ûñ Decrement", 
                 command=self.decrement_count,
                 bg='lightcoral', padx=15).pack(side='left', padx=5)
        
        tk.Button(btn_frame, text="üîÑ Reset", 
                 command=self.reset_count,
                 bg='lightblue', padx=15).pack(side='left', padx=5)
        
        # ==============================================
        # SECTION 2: MOUSE EVENT TRACKING
        # ==============================================
        mouse_section = tk.LabelFrame(
            main_frame,
            text="Mouse Event Tracking",
            font=("Arial", 14, "bold"),
            bg='#f0f8ff',
            padx=15,
            pady=15
        )
        mouse_section.pack(fill='x', padx=20, pady=10)
        
        # Mouse tracking area
        self.track_area = tk.Frame(
            mouse_section,
            bg='lightgray',
            width=400,
            height=150,
            relief='sunken',
            bd=2
        )
        self.track_area.pack(pady=10)
        self.track_area.pack_propagate(False)  # Keep fixed size
        
        # Mouse position display
        pos_frame = tk.Frame(mouse_section, bg='#f0f8ff')
        pos_frame.pack()
        
        tk.Label(pos_frame, text="Mouse Position:", 
                font=("Arial", 12), bg='#f0f8ff').pack(side='left')
        
        self.pos_label = tk.Label(
            pos_frame,
            text=self.mouse_position,
            font=("Arial", 12, "bold"),
            bg='white',
            relief='ridge',
            width=30,
            padx=10,
            pady=5
        )
        self.pos_label.pack(side='left', padx=10)
        
        # Mouse event buttons
        event_btn_frame = tk.Frame(mouse_section, bg='#f0f8ff')
        event_btn_frame.pack(pady=10)
        
        tk.Button(event_btn_frame, text="Left Click Me", 
                 bg='lightblue').pack(side='left', padx=5)
        
        tk.Button(event_btn_frame, text="Right Click Me", 
                 bg='lightpink').pack(side='left', padx=5)
        
        tk.Button(event_btn_frame, text="Double Click Me", 
                 bg='lightgreen').pack(side='left', padx=5)
        
        # ==============================================
        # SECTION 3: KEYBOARD EVENT TRACKING
        # ==============================================
        key_section = tk.LabelFrame(
            main_frame,
            text="Keyboard Event Tracking",
            font=("Arial", 14, "bold"),
            bg='#fff0f5',
            padx=15,
            pady=15
        )
        key_section.pack(fill='x', padx=20, pady=10)
        
        # Key display
        key_display = tk.Frame(key_section, bg='#fff0f5')
        key_display.pack()
        
        tk.Label(key_display, text="Last Key Pressed:", 
                font=("Arial", 12), bg='#fff0f5').pack(side='left')
        
        self.key_label = tk.Label(
            key_display,
            text=self.last_key,
            font=("Courier", 14, "bold"),
            bg='black',
            fg='white',
            width=20,
            height=2
        )
        self.key_label.pack(side='left', padx=10)
        
        # Instruction label
        tk.Label(
            key_section,
            text="Click here and type something...",
            font=("Arial", 10, "italic"),
            bg='#fff0f5',
            fg='gray'
        ).pack(pady=5)
        
        # Entry widget for keyboard focus
        self.key_entry = tk.Entry(
            key_section,
            font=("Arial", 12),
            width=30
        )
        self.key_entry.pack(pady=10)
        
        # ==============================================
        # SECTION 4: COLOR CHANGER
        # ==============================================
        color_section = tk.LabelFrame(
            main_frame,
            text="Dynamic Color Changer",
            font=("Arial", 14, "bold"),
            bg='#f8f8f8',
            padx=15,
            pady=15
        )
        color_section.pack(fill='x', padx=20, pady=10)
        
        # Color preview
        self.color_preview = tk.Frame(
            color_section,
            bg='lightblue',
            width=200,
            height=50
        )
        self.color_preview.pack(pady=10)
        self.color_preview.pack_propagate(False)
        
        # Color buttons
        colors = ['red', 'green', 'blue', 'yellow', 'purple', 'orange']
        color_frame = tk.Frame(color_section, bg='#f8f8f8')
        color_frame.pack()
        
        for color in colors:
            btn = tk.Button(
                color_frame,
                text=color.title(),
                bg=color,
                fg='white' if color in ['blue', 'purple', 'green'] else 'black',
                command=lambda c=color: self.change_color(c),
                width=8
            )
            btn.pack(side='left', padx=2, pady=5)
    
    def bind_events(self):
        # Bind mouse motion to tracking area
        self.track_area.bind("<Motion>", self.track_mouse)
        self.track_area.bind("<Enter>", lambda e: self.track_area.config(bg='lightblue'))
        self.track_area.bind("<Leave>", lambda e: self.track_area.config(bg='lightgray'))
        
        # Bind mouse events to buttons in mouse section
        mouse_buttons = self.track_area.winfo_children()
        for i, btn in enumerate(mouse_buttons):
            if isinstance(btn, tk.Button):
                if i == 0:  # Left click button
                    btn.bind("<Button-1>", self.on_left_click)
                elif i == 1:  # Right click button
                    btn.bind("<Button-3>", self.on_right_click)
                elif i == 2:  # Double click button
                    btn.bind("<Double-Button-1>", self.on_double_click)
        
        # Bind keyboard events
        self.key_entry.bind("<KeyPress>", self.on_key_press)
        self.root.bind("<Control-q>", self.quit_app)
        self.root.bind("<F1>", self.show_help)
    
    # ==============================================
    # EVENT HANDLER FUNCTIONS
    # ==============================================
    
    def increment_count(self):
        self.click_count += 1
        self.counter_label.config(text=f"Clicks: {self.click_count}")
    
    def decrement_count(self):
        if self.click_count > 0:
            self.click_count -= 1
            self.counter_label.config(text=f"Clicks: {self.click_count}")
    
    def reset_count(self):
        self.click_count = 0
        self.counter_label.config(text=f"Clicks: {self.click_count}")
    
    def track_mouse(self, event):
        self.mouse_position = f"X: {event.x}, Y: {event.y}"
        self.pos_label.config(text=self.mouse_position)
    
    def on_left_click(self, event):
        tk.Label(self.track_area, text="LEFT!", 
                bg='red', fg='white').place(x=event.x, y=event.y)
    
    def on_right_click(self, event):
        tk.Label(self.track_area, text="RIGHT!", 
                bg='blue', fg='white').place(x=event.x, y=event.y)
    
    def on_double_click(self, event):
        tk.Label(self.track_area, text="DOUBLE!", 
                bg='green', fg='white').place(x=event.x, y=event.y)
    
    def on_key_press(self, event):
        # Update key display
        key_name = event.keysym
        if len(key_name) == 1:  # Single character
            display = f"'{key_name}' (Key {event.keycode})"
        else:  # Special key
            display = f"{key_name} (Key {event.keycode})"
        
        self.last_key = display
        self.key_label.config(text=display)
        
        # Clear on Escape
        if event.keysym == "Escape":
            self.key_entry.delete(0, tk.END)
    
    def change_color(self, color):
        self.color_preview.config(bg=color)
    
    def quit_app(self, event=None):
        if tk.messagebox.askyesno("Quit", "Are you sure you want to quit?"):
            self.root.destroy()
    
    def show_help(self, event=None):
        help_text = """
        Interactive App Help:
        
        Button Section:
        - Click buttons to increment/decrement counter
        - Reset button sets counter to zero
        
        Mouse Section:
        - Move mouse in gray area to track position
        - Click buttons with different mouse buttons
        - Colors indicate which button was used
        
        Keyboard Section:
        - Click in entry field and type
        - Last key pressed is displayed
        - Press Escape to clear entry field
        - Ctrl+Q to quit
        
        Color Section:
        - Click color buttons to change preview
        """
        tk.messagebox.showinfo("Help", help_text)

# Run the application
if __name__ == "__main__":
    root = tk.Tk()
    app = InteractiveApp(root)
    root.mainloop()
</pre>

<h3>Event Handler Best Practices</h3>
<div style="background: #f0f8ff; padding: 15px; border-radius: 10px; margin: 15px 0;">
  <h4>‚úÖ DO:</h4>
  <ul>
    <li><b>Keep handlers short:</b> Do minimal work in event handlers</li>
    <li><b>Use descriptive names:</b> <code>on_button_click()</code> not <code>func1()</code></li>
    <li><b>Separate logic:</b> Move complex logic to separate functions</li>
    <li><b>Update GUI in handlers:</b> Use <code>config()</code> to change widgets</li>
    <li><b>Use lambda for simple calls:</b> <code>command=lambda: func(param)</code></li>
    <li><b>Clean up bindings:</b> Use <code>unbind()</code> when done</li>
  </ul>
  
  <h4>‚ùå DON'T:</h4>
  <ul>
    <li><b>Block the mainloop:</b> Don't use <code>time.sleep()</code> in handlers</li>
    <li><b>Create infinite loops:</b> Event handlers should return quickly</li>
    <li><b>Forget error handling:</b> Wrap risky operations in try/except</li>
    <li><b>Overuse global variables:</b> Use class attributes instead</li>
    <li><b>Bind too many events:</b> Can cause performance issues</li>
    <li><b>Ignore event objects:</b> They contain useful information</li>
  </ul>
</div>

<h3>Today's Hands-On Exercises</h3>
<div style="background: #e8f5e8; padding: 15px; border-radius: 10px;">
  <b>Exercise 1: Calculator Interface (60 minutes)</b>
  <p>Create a basic calculator interface with functioning buttons:</p>
  
  <ul>
    <li>Display screen (Label widget) to show numbers</li>
    <li>Number buttons 0-9</li>
    <li>Operation buttons (+, -, √ó, √∑)</li>
    <li>Equals button (=)</li>
    <li>Clear button (C)</li>
    <li>Functionality:
      <ul>
        <li>Clicking numbers adds them to display</li>
        <li>Operations store current number and operation</li>
        <li>Equals performs calculation and shows result</li>
        <li>Clear resets everything</li>
      </ul>
    </li>
    <li>Bonus: Add decimal point and backspace</li>
  </ul>
  
  <b>Exercise 2: Paint Application (60 minutes)</b>
  <p>Create a simple paint/drawing application:</p>
  
  <ul>
    <li>Canvas widget for drawing area</li>
    <li>Color selection buttons</li>
    <li>Brush size selector</li>
    <li>Drawing tools:
      <ul>
        <li>Free draw (click and drag)</li>
        <li>Line tool (click two points)</li>
        <li>Rectangle tool</li>
        <li>Circle tool</li>
      </ul>
    </li>
    <li>Clear canvas button</li>
    <li>Save drawing (simulate with message box)</li>
    <li>Use mouse events: Button-1, B1-Motion, ButtonRelease-1</li>
  </ul>
</div>

<h3>Homework: Game Controller Simulator</h3>
<div style="background: #fff0e6; padding: 15px; border-radius: 10px;">
  <p>Create a video game controller simulator with the following features:</p>
  
  <ul>
    <li><b>Main Controller Layout:</b>
      <ul>
        <li>D-pad (4 directional buttons)</li>
        <li>Action buttons (A, B, X, Y)</li>
        <li>Shoulder buttons (L1, R1, L2, R2)</li>
        <li>Start and Select buttons</li>
        <li>Joystick visualization</li>
      </ul>
    </li>
    <li><b>Functionality:</b>
      <ul>
        <li>Each button highlights when clicked</li>
        <li>Display pressed button sequence</li>
        <li>Keyboard shortcuts for all buttons</li>
        <li>Record and playback button sequences</li>
        <li>Game mode simulation (simple game logic)</li>
      </ul>
    </li>
    <li><b>Technical Requirements:</b>
      <ul>
        <li>Use Button widgets for all controls</li>
        <li>Bind keyboard events for shortcuts</li>
        <li>Use event objects to get key information</li>
        <li>Create a game state machine</li>
        <li>Implement at least 5 different event handlers</li>
        <li>Use lambda functions for simple commands</li>
      </ul>
    </li>
    <li><b>Sample Games to Simulate:</b>
      <ul>
        <li>Button sequence memory game</li>
        <li>Reaction time tester</li>
        <li>Simple platformer (character moves with D-pad)</li>
        <li>Rhythm game (press buttons in time)</li>
      </ul>
    </li>
  </ul>
  
  <p><b>Advanced Features (Bonus):</b></p>
  <ul>
    <li>Vibration simulation (visual effect)</li>
    <li>Controller configuration (remap buttons)</li>
    <li>Multiple controller support</li>
    <li>Save/load controller profiles</li>
    <li>Game recording and playback</li>
  </ul>
</div>

<h3>Common Event Handling Issues</h3>
<div style="background: #f8d7da; padding: 15px; border-radius: 10px;">
  <h4>üö® Troubleshooting Guide</h4>
  
  <p><b>Problem:</b> Button click does nothing</p>
  <pre style="background: white; padding: 5px; margin: 5px 0;">
# Solution: Check command function
# ‚ùå Wrong - calling function immediately
button = tk.Button(root, text="Click", command=my_function())

# ‚úÖ Correct - pass function reference
button = tk.Button(root, text="Click", command=my_function)
# or use lambda
button = tk.Button(root, text="Click", command=lambda: my_function())
  </pre>
  
  <p><b>Problem:</b> Event handler not receiving event object</p>
  <pre style="background: white; padding: 5px; margin: 5px 0;">
# Solution: Function signature mismatch
# ‚ùå Wrong - missing event parameter
def on_click():  # ‚Üê No parameter
    print("Clicked")

# ‚úÖ Correct - include event parameter
def on_click(event):  # ‚Üê Includes event
    print(f"Clicked at {event.x}, {event.y}")

widget.bind("<Button-1>", on_click)
  </pre>
  
  <p><b>Problem:</b> Multiple bindings conflicting</p>
<pre style="background: white; padding: 5px; margin: 5px 0;">
# Solution: Use return "break" to stop event propagation
def on_click(event):
    print("This handler runs")
    return "break"  # ‚Üê Stops other handlers from running

widget.bind("<Button-1>", on_click)
</pre>

<p><b>Problem:</b> GUI freezes during long operation</p>
<pre style="background: white; padding: 5px; margin: 5px 0;">
# Solution: Use after() for long operations
def long_operation():
    # This would freeze GUI if called directly
    time.sleep(5)  # ‚ùå Don't do this!
    
# ‚úÖ Correct: Use after() for delayed execution
def long_operation():
    # Do small chunk of work
    chunk_of_work()
    # Schedule next chunk
    root.after(100, long_operation)  # Continue after 100ms
</pre>
</div>

<h3>Key Learning Points</h3>
<ol>
<li><b>Buttons</b> are interactive widgets that trigger actions</li>
<li>The <code>command</code> parameter connects buttons to functions</li>
<li><b>Event binding</b> (<code>bind()</code>) connects any event to any widget</li>
<li>Event handlers receive an <b>event object</b> with details</li>
<li>Use <b>lambda functions</b> to pass arguments to commands</li>
<li>Avoid blocking the <b>mainloop</b> - keep handlers fast</li>
<li>Practice with different <b>event types</b> (mouse, keyboard, window)</li>
</ol>

<div style="background: #e8f5e8; padding: 15px; border-radius: 10px; margin-top: 20px;">
<h3>üí° Pro Tip: Event-Driven Architecture</h3>
<p>Think of your GUI as a state machine that responds to events:</p>
<pre style="background: white; padding: 10px;">
# Good pattern: Separate state from event handlers
class MyApp:
    def __init__(self):
        self.state = {
            'counter': 0,
            'color': 'blue',
            'text': 'Hello'
        }
        self.create_widgets()
        self.bind_events()
        self.update_display()  # Initial display update
    
    def update_display(self):
        # Update all widgets based on current state
        self.counter_label.config(text=f"Count: {self.state['counter']}")
        self.color_frame.config(bg=self.state['color'])
        self.text_label.config(text=self.state['text'])
    
    def on_button_click(self, event):
        # Update state
        self.state['counter'] += 1
        self.state['color'] = 'green' if self.state['counter'] % 2 == 0 else 'red'
        
        # Update display
        self.update_display()
</pre>
</div>
`
  },
            "10-3": {
    "icon": "fa-keyboard",
    "title": "Entry Fields & Text Areas",
    "html": `<h1>Week 10, Day 3: Entry Fields and Text Areas</h1>
<p>Today we learn how to get user input through text fields. We'll explore Entry widgets for single-line input and Text widgets for multi-line input with advanced features.</p>

<div class="analogy-box">
    <b>Analogy: The Digital Form üìù</b><br/>
    
    Entry Field = Single-line form field (name, email)<br/>
    Text Widget = Multi-line notepad (comments, essays)<br/>
    StringVar = Live connection to input value<br/>
    Get/Set = Reading and writing form data<br/>
    Validation = Form field rules (required, format)<br/>
    Scrollbar = Page scrolling for long content<br/>
    Tags = Text formatting (bold, color, links)
</div>

<h3>Input Widget Comparison</h3>
<table style="width:100%; border-collapse: collapse; margin: 15px 0;">
  <tr style="background: #4A90E2; color: white;">
    <th style="padding: 10px;">Feature</th>
    <th style="padding: 10px;">Entry Widget</th>
    <th style="padding: 10px;">Text Widget</th>
    <th style="padding: 10px;">Spinbox</th>
    <th style="padding: 10px;">Combobox</th>
  </tr>
  <tr style="background: #f8f9fa;">
    <td style="padding: 8px; border: 1px solid #ddd;">Input Type</td>
    <td style="padding: 8px; border: 1px solid #ddd;">Single-line text</td>
    <td style="padding: 8px; border: 1px solid #ddd;">Multi-line text</td>
    <td style="padding: 8px; border: 1px solid #ddd;">Numeric with arrows</td>
    <td style="padding: 8px; border: 1px solid #ddd;">Dropdown selection</td>
  </tr>
  <tr style="background: white;">
    <td style="padding: 8px; border: 1px solid #ddd;">Best For</td>
    <td style="padding: 8px; border: 1px solid #ddd;">Short text (names, IDs)</td>
    <td style="padding: 8px; border: 1px solid #ddd;">Long text (comments, docs)</td>
    <td style="padding: 8px; border: 1px solid #ddd;">Numbers (age, quantity)</td>
    <td style="padding: 8px; border: 1px solid #ddd;">Predefined options</td>
  </tr>
  <tr style="background: #f8f9fa;">
    <td style="padding: 8px; border: 1px solid #ddd;">Capacity</td>
    <td style="padding: 8px; border: 1px solid #ddd;">Limited by width</td>
    <td style="padding: 8px; border: 1px solid #ddd;">Virtually unlimited</td>
    <td style="padding: 8px; border: 1px solid #ddd;">Numeric range</td>
    <td style="padding: 8px; border: 1px solid #ddd;">List items</td>
  </tr>
  <tr style="background: white;">
    <td style="padding: 8px; border: 1px solid #ddd;">Formatting</td>
    <td style="padding: 8px; border: 1px solid #ddd;">Basic (font, color)</td>
    <td style="padding: 8px; border: 1px solid #ddd;">Rich (bold, italic, etc.)</td>
    <td style="padding: 8px; border: 1px solid #ddd;">Number formatting</td>
    <td style="padding: 8px; border: 1px solid #ddd;">Text only</td>
  </tr>
</table>

<h3>Entry Widget Masterclass</h3>
<pre style="background: #36454f; color: white; padding: 15px; border-radius: 5px;">
import tkinter as tk
from tkinter import ttk

# ==============================================
# ENTRY WIDGET FUNDAMENTALS
# ==============================================

root = tk.Tk()
root.title("Entry Widget Tutorial")
root.geometry("500x500")

# 1. BASIC ENTRY FIELD
def show_entry_content():
    content = entry_basic.get()  # Get text from entry
    print(f"Entry content: '{content}'")
    # Update label with content
    result_label.config(text=f"You entered: {content}")

frame_basic = tk.LabelFrame(root, text="1. Basic Entry", padx=10, pady=10)
frame_basic.pack(padx=20, pady=10, fill='x')

tk.Label(frame_basic, text="Enter text:").pack(anchor='w')
entry_basic = tk.Entry(frame_basic, width=30)
entry_basic.pack(pady=5)

tk.Button(frame_basic, text="Show Content", 
         command=show_entry_content).pack(pady=5)

result_label = tk.Label(frame_basic, text="You entered: ")
result_label.pack(pady=5)

# 2. ENTRY WITH DEFAULT TEXT AND VARIABLE
frame_var = tk.LabelFrame(root, text="2. Entry with StringVar", padx=10, pady=10)
frame_var.pack(padx=20, pady=10, fill='x')

# StringVar provides live connection to entry content
text_var = tk.StringVar(value="Default text")

tk.Label(frame_var, text="Live updating:").pack(anchor='w')
entry_var = tk.Entry(frame_var, textvariable=text_var, width=30)
entry_var.pack(pady=5)

# Label that updates automatically with StringVar
live_label = tk.Label(frame_var, textvariable=text_var, 
                     bg='lightyellow', padx=10, pady=5)
live_label.pack(pady=5)

# 3. PASSWORD ENTRY (SHOW="*")
frame_password = tk.LabelFrame(root, text="3. Password Entry", padx=10, pady=10)
frame_password.pack(padx=20, pady=10, fill='x')

def toggle_password():
    if entry_password.cget('show') == '*':
        entry_password.config(show='')
        btn_toggle.config(text="Hide Password")
    else:
        entry_password.config(show='*')
        btn_toggle.config(text="Show Password")

tk.Label(frame_password, text="Password:").pack(anchor='w')
entry_password = tk.Entry(frame_password, show='*', width=30)
entry_password.pack(pady=5)

btn_toggle = tk.Button(frame_password, text="Show Password", 
                      command=toggle_password)
btn_toggle.pack(pady=5)

# 4. VALIDATED ENTRY (NUMBERS ONLY)
frame_validation = tk.LabelFrame(root, text="4. Validated Entry", padx=10, pady=10)
frame_validation.pack(padx=20, pady=10, fill='x')

def validate_number(char):
    """Allow only digits and backspace"""
    return char.isdigit() or char == ""

# Create validation command
vcmd = (root.register(validate_number), '%S')

tk.Label(frame_validation, text="Age (numbers only):").pack(anchor='w')
entry_number = tk.Entry(frame_validation, validate='key', 
                       validatecommand=vcmd, width=10)
entry_number.pack(pady=5)

# 5. ENTRY WITH PLACEHOLDER TEXT
frame_placeholder = tk.LabelFrame(root, text="5. Placeholder Text", padx=10, pady=10)
frame_placeholder.pack(padx=20, pady=10, fill='x')

def on_focus_in(event):
    if entry_placeholder.get() == "Enter your email here...":
        entry_placeholder.delete(0, tk.END)
        entry_placeholder.config(fg='black')

def on_focus_out(event):
    if entry_placeholder.get() == "":
        entry_placeholder.insert(0, "Enter your email here...")
        entry_placeholder.config(fg='gray')

tk.Label(frame_placeholder, text="Email:").pack(anchor='w')
entry_placeholder = tk.Entry(frame_placeholder, width=30, fg='gray')
entry_placeholder.pack(pady=5)
entry_placeholder.insert(0, "Enter your email here...")

# Bind focus events
entry_placeholder.bind("<FocusIn>", on_focus_in)
entry_placeholder.bind("<FocusOut>", on_focus_out)

# 6. ENTRY WITH KEY BINDINGS
frame_keys = tk.LabelFrame(root, text="6. Keyboard Shortcuts", padx=10, pady=10)
frame_keys.pack(padx=20, pady=10, fill='x')

def on_enter_key(event):
    content = entry_keys.get()
    print(f"Enter pressed: {content}")
    # Clear entry
    entry_keys.delete(0, tk.END)
    return "break"  # Prevent default behavior

def on_escape_key(event):
    entry_keys.delete(0, tk.END)
    print("Entry cleared with Escape")

tk.Label(frame_keys, text="Type and press Enter:").pack(anchor='w')
entry_keys = tk.Entry(frame_keys, width=30)
entry_keys.pack(pady=5)

# Bind keyboard events
entry_keys.bind("<Return>", on_enter_key)
entry_keys.bind("<Escape>", on_escape_key)

root.mainloop()

# ==============================================
# KEY ENTRY METHODS:
# ==============================================
# .get() - Get current text
# .insert(index, text) - Insert text at position
# .delete(first, last) - Delete text between positions
# .icursor(index) - Set insertion cursor position
# .selection_range(start, end) - Select text
# .selection_present() - Check if text is selected
# .xview_scroll(number, what) - Horizontal scrolling
</pre>

<h3>Text Widget Deep Dive</h3>
<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 15px 0;">
  <div style="background: #fff3cd; padding: 15px; border-radius: 10px;">
    <h4>üìù Text Widget Features</h4>
    <ul>
      <li><b>Multi-line editing</b> with word wrap</li>
      <li><b>Rich text formatting</b> (bold, italic, colors)</li>
      <li><b>Text tags</b> for styling specific ranges</li>
      <li><b>Embedded windows</b> and images</li>
      <li><b>Undo/Redo</b> functionality</li>
      <li><b>Search and replace</b> operations</li>
      <li><b>Line numbers</b> and syntax highlighting</li>
      <li><b>Mark management</b> for navigation</li>
    </ul>
  </div>
  <div style="background: #d4edda; padding: 15px; border-radius: 10px;">
    <h4>üî§ Text Index System</h4>
    <pre style="background: white; padding: 10px;">
# Text widget uses "line.column" indexing
# Line numbers start at 1, columns at 0

"1.0"      # First character (line 1, column 0)
"1.5"      # 5th character on line 1
"2.0"      # First character of line 2
"end"      # Just after last character
"end-1c"   # One character before end

# Modifiers:
"1.0 + 5 chars"   # 5 characters from start
"1.0 lineend"     # End of line 1
"1.0 linestart"   # Start of line 1
"insert"          # Current cursor position
"sel.first"       # Start of selection
"sel.last"        # End of selection

# Common operations:
text.get("1.0", "end")          # Get all text
text.insert("1.0", "Hello")     # Insert at beginning
text.delete("1.0", "1.5")       # Delete first 5 chars
text.see("insert")              # Scroll to cursor
    </pre>
  </div>
</div>

<h3>Complete Text Editor Application</h3>
<pre style="background: #36454f; color: white; padding: 15px; border-radius: 5px; max-height: 600px; overflow-y: auto;">
import tkinter as tk
from tkinter import ttk, scrolledtext, font

class SimpleTextEditor:
    def __init__(self, root):
        self.root = root
        self.root.title("Simple Text Editor")
        self.root.geometry("800x600")
        
        # Current file path
        self.current_file = None
        
        # Create widgets
        self.create_menu()
        self.create_toolbar()
        self.create_text_widget()
        self.create_status_bar()
        
        # Configure tags for syntax highlighting (simple)
        self.configure_tags()
    
    def create_menu(self):
        # Create menu bar
        menubar = tk.Menu(self.root)
        self.root.config(menu=menubar)
        
        # File menu
        file_menu = tk.Menu(menubar, tearoff=0)
        menubar.add_cascade(label="File", menu=file_menu)
        file_menu.add_command(label="New", command=self.new_file, accelerator="Ctrl+N")
        file_menu.add_command(label="Open", command=self.open_file, accelerator="Ctrl+O")
        file_menu.add_command(label="Save", command=self.save_file, accelerator="Ctrl+S")
        file_menu.add_command(label="Save As", command=self.save_as_file)
        file_menu.add_separator()
        file_menu.add_command(label="Exit", command=self.root.quit)
        
        # Edit menu
        edit_menu = tk.Menu(menubar, tearoff=0)
        menubar.add_cascade(label="Edit", menu=edit_menu)
        edit_menu.add_command(label="Undo", command=self.undo, accelerator="Ctrl+Z")
        edit_menu.add_command(label="Redo", command=self.redo, accelerator="Ctrl+Y")
        edit_menu.add_separator()
        edit_menu.add_command(label="Cut", command=self.cut, accelerator="Ctrl+X")
        edit_menu.add_command(label="Copy", command=self.copy, accelerator="Ctrl+C")
        edit_menu.add_command(label="Paste", command=self.paste, accelerator="Ctrl+V")
        edit_menu.add_separator()
        edit_menu.add_command(label="Select All", command=self.select_all, accelerator="Ctrl+A")
        edit_menu.add_command(label="Find", command=self.find_text, accelerator="Ctrl+F")
        
        # Format menu
        format_menu = tk.Menu(menubar, tearoff=0)
        menubar.add_cascade(label="Format", menu=format_menu)
        
        # Font submenu
        font_menu = tk.Menu(format_menu, tearoff=0)
        format_menu.add_cascade(label="Font", menu=font_menu)
        
        self.font_family = tk.StringVar(value="Arial")
        self.font_size = tk.IntVar(value=12)
        
        # Available fonts
        fonts = ["Arial", "Courier New", "Times New Roman", "Verdana", "Georgia"]
        for f in fonts:
            font_menu.add_radiobutton(label=f, variable=self.font_family, 
                                     value=f, command=self.change_font)
        
        # Font size submenu
        size_menu = tk.Menu(format_menu, tearoff=0)
        format_menu.add_cascade(label="Size", menu=size_menu)
        
        sizes = [8, 10, 12, 14, 16, 18, 20, 24]
        for s in sizes:
            size_menu.add_radiobutton(label=str(s), variable=self.font_size, 
                                     value=s, command=self.change_font)
        
        # Style submenu
        style_menu = tk.Menu(format_menu, tearoff=0)
        format_menu.add_cascade(label="Style", menu=style_menu)
        
        self.bold_var = tk.BooleanVar()
        self.italic_var = tk.BooleanVar()
        self.underline_var = tk.BooleanVar()
        
        style_menu.add_checkbutton(label="Bold", variable=self.bold_var, 
                                  command=self.change_style, accelerator="Ctrl+B")
        style_menu.add_checkbutton(label="Italic", variable=self.italic_var, 
                                  command=self.change_style, accelerator="Ctrl+I")
        style_menu.add_checkbutton(label="Underline", variable=self.underline_var, 
                                  command=self.change_style, accelerator="Ctrl+U")
        
        # Bind keyboard shortcuts
        self.root.bind("<Control-n>", lambda e: self.new_file())
        self.root.bind("<Control-o>", lambda e: self.open_file())
        self.root.bind("<Control-s>", lambda e: self.save_file())
        self.root.bind("<Control-f>", lambda e: self.find_text())
        self.root.bind("<Control-b>", lambda e: self.toggle_bold())
        self.root.bind("<Control-i>", lambda e: self.toggle_italic())
        self.root.bind("<Control-u>", lambda e: self.toggle_underline())
    
    def create_toolbar(self):
        # Create toolbar frame
        toolbar = tk.Frame(self.root, bd=1, relief=tk.RAISED)
        toolbar.pack(side=tk.TOP, fill=tk.X)
        
        # Toolbar buttons
        buttons = [
            ("üìÑ New", self.new_file),
            ("üìÇ Open", self.open_file),
            ("üíæ Save", self.save_file),
            ("", None),  # Separator
            ("‚úÇÔ∏è Cut", self.cut),
            ("üìã Copy", self.copy),
            ("üìù Paste", self.paste),
            ("", None),  # Separator
            ("üîç Find", self.find_text),
            ("üîÑ Undo", self.undo),
            ("‚Ü™Ô∏è Redo", self.redo)
        ]
        
        for text, command in buttons:
            if text == "":  # Separator
                tk.Label(toolbar, width=2).pack(side=tk.LEFT)
            else:
                btn = tk.Button(toolbar, text=text, command=command, 
                               relief=tk.FLAT, padx=5, pady=5)
                btn.pack(side=tk.LEFT, padx=2)
    
    def create_text_widget(self):
        # Create main frame for text widget and scrollbars
        text_frame = tk.Frame(self.root)
        text_frame.pack(expand=True, fill=tk.BOTH, padx=5, pady=5)
        
        # Vertical scrollbar
        v_scrollbar = tk.Scrollbar(text_frame)
        v_scrollbar.pack(side=tk.RIGHT, fill=tk.Y)
        
        # Horizontal scrollbar
        h_scrollbar = tk.Scrollbar(text_frame, orient=tk.HORIZONTAL)
        h_scrollbar.pack(side=tk.BOTTOM, fill=tk.X)
        
        # Text widget
        self.text = tk.Text(
            text_frame,
            wrap=tk.WORD,  # WORD, CHAR, or NONE
            undo=True,      # Enable undo/redo
            maxundo=-1,     # Unlimited undo
            yscrollcommand=v_scrollbar.set,
            xscrollcommand=h_scrollbar.set,
            font=("Arial", 12)
        )
        self.text.pack(expand=True, fill=tk.BOTH)
        
        # Configure scrollbars
        v_scrollbar.config(command=self.text.yview)
        h_scrollbar.config(command=self.text.xview)
        
        # Line numbers
        self.line_numbers = tk.Text(text_frame, width=4, padx=3, takefocus=0,
                                   border=0, background='lightgray', state='disabled')
        self.line_numbers.pack(side=tk.LEFT, fill=tk.Y)
        
        # Update line numbers when text changes
        self.text.bind("<<Modified>>", self.on_text_modified)
        self.text.bind("<KeyRelease>", self.update_line_numbers)
        self.text.bind("<MouseWheel>", self.update_line_numbers)
        
        # Track cursor position
        self.text.bind("<KeyRelease>", self.update_cursor_position)
        self.text.bind("<ButtonRelease>", self.update_cursor_position)
    
    def create_status_bar(self):
        # Create status bar
        self.status_bar = tk.Label(self.root, text="Ready", bd=1, relief=tk.SUNKEN, anchor=tk.W)
        self.status_bar.pack(side=tk.BOTTOM, fill=tk.X)
        
        # Cursor position label
        self.cursor_pos = tk.StringVar(value="Line: 1, Column: 0")
        cursor_label = tk.Label(self.status_bar, textvariable=self.cursor_pos, width=20)
        cursor_label.pack(side=tk.RIGHT, padx=5)
    
    def configure_tags(self):
        # Configure text tags for formatting
        self.text.tag_configure("bold", font=("Arial", 12, "bold"))
        self.text.tag_configure("italic", font=("Arial", 12, "italic"))
        self.text.tag_configure("underline", underline=True)
        self.text.tag_configure("highlight", background="yellow")
        
        # Syntax highlighting tags (simple Python)
        self.text.tag_configure("keyword", foreground="blue", font=("Courier New", 12, "bold"))
        self.text.tag_configure("string", foreground="green")
        self.text.tag_configure("comment", foreground="gray")
        self.text.tag_configure("number", foreground="purple")
    
    def on_text_modified(self, event=None):
        # Reset modified flag
        if self.text.edit_modified():
            self.text.edit_modified(False)
            # Update title if file is modified
            title = "Simple Text Editor"
            if self.current_file:
                title = f"*{self.current_file} - {title}"
            self.root.title(title)
    
    def update_line_numbers(self, event=None):
        # Update line numbers display
        self.line_numbers.config(state=tk.NORMAL)
        self.line_numbers.delete(1.0, tk.END)
        
        # Get number of lines
        line_count = self.text.index(tk.END).split('.')[0]
        
        # Add line numbers
        for i in range(1, int(line_count)):
            self.line_numbers.insert(tk.END, f"{i}\n")
        
        self.line_numbers.config(state=tk.DISABLED)
        
        # Sync scrolling with main text widget
        self.line_numbers.yview_moveto(self.text.yview()[0])
    
    def update_cursor_position(self, event=None):
        # Update cursor position in status bar
        cursor_index = self.text.index(tk.INSERT)
        line, col = cursor_index.split('.')
        self.cursor_pos.set(f"Line: {line}, Column: {col}")
    
    # ==============================================
    # FILE OPERATIONS
    # ==============================================
    
    def new_file(self):
        if self.text.edit_modified():
            if not tk.messagebox.askyesno("Save Changes", "Save changes to current file?"):
                return
        
        self.text.delete(1.0, tk.END)
        self.current_file = None
        self.root.title("Simple Text Editor")
        self.status_bar.config(text="New file created")
    
    def open_file(self):
        # In a real app, you would use filedialog
        # For now, we'll simulate with a simple input
        from tkinter import simpledialog
        
        filename = simpledialog.askstring("Open File", "Enter file path:")
        if filename:
            try:
                with open(filename, 'r') as file:
                    content = file.read()
                    self.text.delete(1.0, tk.END)
                    self.text.insert(1.0, content)
                    self.current_file = filename
                    self.root.title(f"{filename} - Simple Text Editor")
                    self.status_bar.config(text=f"Opened: {filename}")
                    
                    # Apply simple syntax highlighting
                    self.apply_syntax_highlighting()
            except Exception as e:
                tk.messagebox.showerror("Error", f"Could not open file: {str(e)}")
    
    def save_file(self):
        if self.current_file:
            try:
                content = self.text.get(1.0, tk.END)
                with open(self.current_file, 'w') as file:
                    file.write(content)
                self.text.edit_modified(False)
                self.root.title(f"{self.current_file} - Simple Text Editor")
                self.status_bar.config(text=f"Saved: {self.current_file}")
            except Exception as e:
                tk.messagebox.showerror("Error", f"Could not save file: {str(e)}")
        else:
            self.save_as_file()
    
    def save_as_file(self):
        from tkinter import simpledialog
        
        filename = simpledialog.askstring("Save As", "Enter file name:")
        if filename:
            self.current_file = filename
            self.save_file()
    
    # ==============================================
    # EDIT OPERATIONS
    # ==============================================
    
    def undo(self):
        try:
            self.text.edit_undo()
        except:
            pass  # Nothing to undo
    
    def redo(self):
        try:
            self.text.edit_redo()
        except:
            pass  # Nothing to redo
    
    def cut(self):
        self.text.event_generate("<<Cut>>")
    
    def copy(self):
        self.text.event_generate("<<Copy>>")
    
    def paste(self):
        self.text.event_generate("<<Paste>>")
    
    def select_all(self):
        self.text.tag_add(tk.SEL, "1.0", tk.END)
        self.text.mark_set(tk.INSERT, "1.0")
        self.text.see(tk.INSERT)
    
    def find_text(self):
        from tkinter import simpledialog
        
        search_term = simpledialog.askstring("Find", "Enter text to find:")
        if search_term:
            # Remove previous highlights
            self.text.tag_remove("highlight", "1.0", tk.END)
            
            # Search for term
            start_pos = "1.0"
            while True:
                start_pos = self.text.search(search_term, start_pos, stopindex=tk.END)
                if not start_pos:
                    break
                
                end_pos = f"{start_pos}+{len(search_term)}c"
                self.text.tag_add("highlight", start_pos, end_pos)
                start_pos = end_pos
            
            # Move cursor to first occurrence
            self.text.mark_set(tk.INSERT, "1.0")
            self.text.see(tk.INSERT)
    
    # ==============================================
    # FORMAT OPERATIONS
    # ==============================================
    
    def change_font(self):
        font_family = self.font_family.get()
        font_size = self.font_size.get()
        
        # Get current style
        font_weight = "bold" if self.bold_var.get() else "normal"
        font_slant = "italic" if self.italic_var.get() else "roman"
        font_underline = self.underline_var.get()
        
        # Create font tuple
        new_font = (font_family, font_size, font_weight, font_slant)
        
        # Configure text widget font
        self.text.config(font=new_font)
        
        # Update tags with new font
        self.text.tag_configure("bold", font=(font_family, font_size, "bold", font_slant))
        self.text.tag_configure("italic", font=(font_family, font_size, font_weight, "italic"))
    
    def change_style(self):
        # Apply styles to selected text or configure default
        sel_start = self.text.index(tk.SEL_FIRST)
        sel_end = self.text.index(tk.SEL_LAST) if self.text.tag_ranges(tk.SEL) else None
        
        if sel_start and sel_end:
            # Apply to selected text
            tags = []
            if self.bold_var.get():
                tags.append("bold")
            if self.italic_var.get():
                tags.append("italic")
            if self.underline_var.get():
                tags.append("underline")
            
            # Remove existing style tags
            for tag in ["bold", "italic", "underline"]:
                self.text.tag_remove(tag, sel_start, sel_end)
            
            # Add new tags
            for tag in tags:
                self.text.tag_add(tag, sel_start, sel_end)
        else:
            # Just update font configuration
            self.change_font()
    
    def toggle_bold(self):
        self.bold_var.set(not self.bold_var.get())
        self.change_style()
    
    def toggle_italic(self):
        self.italic_var.set(not self.italic_var.get())
        self.change_style()
    
    def toggle_underline(self):
        self.underline_var.set(not self.underline_var.get())
        self.change_style()
    
    # ==============================================
    # SYNTAX HIGHLIGHTING (SIMPLE VERSION)
    # ==============================================
    
    def apply_syntax_highlighting(self):
        # Simple Python syntax highlighting
        python_keywords = [
            'def', 'class', 'if', 'else', 'elif', 'while', 'for',
            'in', 'import', 'from', 'as', 'try', 'except', 'finally',
            'return', 'yield', 'with', 'assert', 'raise', 'pass',
            'break', 'continue', 'global', 'nonlocal', 'lambda',
            'True', 'False', 'None', 'and', 'or', 'not', 'is'
        ]
        
        content = self.text.get(1.0, tk.END)
        lines = content.split('\n')
        
        # Remove existing syntax tags
        for tag in ["keyword", "string", "comment", "number"]:
            self.text.tag_remove(tag, "1.0", tk.END)
        
        line_num = 1
        for line in lines:
            # Highlight comments
            if '#' in line:
                comment_start = line.find('#')
                start_pos = f"{line_num}.{comment_start}"
                end_pos = f"{line_num}.{len(line)}"
                self.text.tag_add("comment", start_pos, end_pos)
            
            # Highlight keywords
            words = line.split()
            col = 0
            for word in words:
                # Clean word (remove punctuation)
                clean_word = word.strip('.,:;()[]{}"\'').strip()
                if clean_word in python_keywords:
                    # Find position of word in line
                    word_start = line.find(word, col)
                    if word_start >= 0:
                        start_pos = f"{line_num}.{word_start}"
                        end_pos = f"{line_num}.{word_start + len(word)}"
                        self.text.tag_add("keyword", start_pos, end_pos)
                    col = word_start + len(word)
                else:
                    # Try to find numbers
                    if clean_word and clean_word[0].isdigit():
                        try:
                            float(clean_word)
                            word_start = line.find(word, col)
                            if word_start >= 0:
                                start_pos = f"{line_num}.{word_start}"
                                end_pos = f"{line_num}.{word_start + len(word)}"
                                self.text.tag_add("number", start_pos, end_pos)
                        except ValueError:
                            pass
                
                # Highlight strings (simple detection)
                if '"' in word or "'" in word:
                    # This is simplified - real string detection is more complex
                    pass
            
            line_num += 1

# Run the application
if __name__ == "__main__":
    root = tk.Tk()
    app = SimpleTextEditor(root)
    root.mainloop()
</pre>

<h3>Input Validation Techniques</h3>
<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 15px 0;">
  <div style="background: #e3f2fd; padding: 15px; border-radius: 10px;">
    <h4>‚úÖ Validation Methods</h4>
    <pre style="background: white; padding: 10px;">
# METHOD 1: Validate parameter
def validate_digit(char):
    return char.isdigit() or char == ""

vcmd = (root.register(validate_digit), '%S')
entry = tk.Entry(root, validate='key', validatecommand=vcmd)

# METHOD 2: Trace on StringVar
def on_text_change(*args):
    text = var.get()
    if len(text) > 10:
        var.set(text[:10])  # Truncate

var = tk.StringVar()
var.trace('w', on_text_change)  # 'w' for write
entry = tk.Entry(root, textvariable=var)

# METHOD 3: Event binding
def on_key_release(event):
    text = entry.get()
    if not text.isdigit():
        entry.config(bg='pink')
    else:
        entry.config(bg='white')

entry.bind('<KeyRelease>', on_key_release)

# METHOD 4: Focus out validation
def validate_on_focusout(event):
    text = entry.get()
    if "@" not in text or "." not in text:
        entry.config(bg='pink')
        return False
    return True

entry.bind('<FocusOut>', validate_on_focusout)
    </pre>
  </div>
  <div style="background: #f3e5f5; padding: 15px; border-radius: 10px;">
    <h4>üéØ Common Validation Patterns</h4>
    <ul>
      <li><b>Required Field:</b> Cannot be empty</li>
      <li><b>Email Format:</b> Must contain @ and .</li>
      <li><b>Phone Number:</b> Digits only, specific length</li>
      <li><b>Password Strength:</b> Minimum length, mixed characters</li>
      <li><b>Number Range:</b> Between min and max values</li>
      <li><b>Date Format:</b> DD/MM/YYYY or MM/DD/YYYY</li>
      <li><b>Username:</b> Letters, numbers, underscores only</li>
      <li><b>Currency:</b> Proper decimal format</li>
    </ul>
    <p><b>Validation Event Types:</b></p>
    <ul>
      <li><code>'key'</code> - On each keystroke</li>
      <li><code>'focusin'</code> - When widget gets focus</li>
      <li><code>'focusout'</code> - When widget loses focus</li>
      <li><code>'focus'</code> - Both focusin and focusout</li>
      <li><code>'all'</code> - All validation times</li>
    </ul>
  </div>
</div>

<h3>Today's Hands-On Exercises</h3>
<div style="background: #e8f5e8; padding: 15px; border-radius: 10px;">
  <b>Exercise 1: Contact Form Application (60 minutes)</b>
  <p>Create a complete contact form with validation:</p>
  
  <ul>
    <li>Personal Information Section:
      <ul>
        <li>First Name (required, letters only)</li>
        <li>Last Name (required, letters only)</li>
        <li>Email (required, email format validation)</li>
        <li>Phone (optional, digits only, 10 characters)</li>
      </ul>
    </li>
    <li>Message Section:
      <ul>
        <li>Subject dropdown (Inquiry, Support, Feedback, Other)</li>
        <li>Message text area (minimum 10 characters)</li>
        <li>Character counter showing remaining characters (max 500)</li>
      </ul>
    </li>
    <li>Controls:
      <ul>
        <li>Submit button (validate all fields, show summary)</li>
        <li>Clear button (reset all fields)</li>
        <li>Preview button (show formatted message)</li>
      </ul>
    </li>
    <li>Validation:
      <ul>
        <li>Real-time validation with color coding</li>
        <li>Error messages for invalid fields</li>
        <li>Submit only if all validations pass</li>
      </ul>
    </li>
  </ul>
  
  <b>Exercise 2: Code Snippet Manager (60 minutes)</b>
  <p>Create an application to save and manage code snippets:</p>
  
  <ul>
    <li>Input Fields:
      <ul>
        <li>Snippet name/title</li>
        <li>Programming language dropdown</li>
        <li>Tags entry (comma-separated)</li>
        <li>Description text area</li>
        <li>Code text area with syntax highlighting</li>
      </ul>
    </li>
    <li>Features:
      <ul>
        <li>Save snippet to memory (list/dictionary)</li>
        <li>Load saved snippets in a listbox</li>
        <li>Search snippets by name, language, or tags</li>
        <li>Copy code to clipboard button</li>
        <li>Export snippets to file</li>
      </ul>
    </li>
    <li>Syntax Highlighting:
      <ul>
        <li>Simple highlighting for Python keywords</li>
        <li>Different colors for strings and comments</li>
        <li>Toggle line numbers</li>
      </ul>
    </li>
  </ul>
</div>

<h3>Homework: Advanced Form Builder</h3>
<div style="background: #fff0e6; padding: 15px; border-radius: 10px;">
  <p>Create a dynamic form builder application that allows users to create custom forms:</p>
  
  <ul>
    <li><b>Form Designer Interface:</b>
      <ul>
        <li>Toolbox with form elements (Label, Entry, Text, Button, etc.)</li>
        <li>Design canvas to drag and drop elements</li>
        <li>Properties panel to configure selected element</li>
        <li>Preview mode to test the form</li>
      </ul>
    </li>
    <li><b>Supported Form Elements:</b>
      <ul>
        <li>Label (static text)</li>
        <li>Entry field (with validation rules)</li>
        <li>Text area (multi-line)</li>
        <li>Checkbutton (multiple selection)</li>
        <li>Radiobutton (single selection)</li>
        <li>Combobox (dropdown)</li>
        <li>Spinbox (numeric with arrows)</li>
        <li>Button (with action)</li>
        <li>Separator (visual divider)</li>
      </ul>
    </li>
    <li><b>Features:</b>
      <ul>
        <li>Drag and drop form elements</li>
        <li>Configure element properties (text, size, validation)</li>
        <li>Save form templates to JSON file</li>
        <li>Load existing form templates</li>
        <li>Generate Python code for the form</li>
        <li>Export form as HTML (basic structure)</li>
        <li>Form validation rules builder</li>
      </ul>
    </li>
    <li><b>Advanced Requirements:</b>
      <ul>
        <li>Conditional logic (show/hide fields based on other fields)</li>
        <li>Form calculations (auto-calculate fields)</li>
        <li>Tabbed forms support</li>
        <li>Form wizard (multiple pages)</li>
        <li>Data persistence (save form responses)</li>
        <li>Form analytics (track field usage)</li>
      </ul>
    </li>
  </ul>
  
  <p><b>Technical Implementation Tips:</b></p>
  <ul>
    <li>Use Canvas widget for the design area</li>
    <li>Create a FormElement base class</li>
    <li>Use JSON for form template storage</li>
    <li>Implement undo/redo for design actions</li>
    <li>Use event binding for drag and drop</li>
    <li>Create a properties editor using Entry and Text widgets</li>
  </ul>
</div>

<h3>Common Input Field Issues</h3>
<div style="background: #f8d7da; padding: 15px; border-radius: 10px;">
  <h4>üö® Troubleshooting Guide</h4>
  
  <p><b>Problem:</b> Entry field shows nothing or wrong text</p>
  <pre style="background: white; padding: 5px; margin: 5px 0;">
# Solution: Check StringVar usage
# ‚ùå Wrong - direct assignment
entry = tk.Entry(root)
entry.set("text")  # Entry has no .set() method!

# ‚úÖ Correct - use StringVar
text_var = tk.StringVar(value="Initial text")
entry = tk.Entry(root, textvariable=text_var)
# or use insert
entry.insert(0, "Initial text")
  </pre>
  
  <p><b>Problem:</b> Text widget not scrolling properly</p>
  <pre style="background: white; padding: 5px; margin: 5px 0;">
# Solution: Proper scrollbar configuration
# ‚ùå Wrong - missing configuration
text = tk.Text(root)
scrollbar = tk.Scrollbar(root)
scrollbar.pack(side=tk.RIGHT)

# ‚úÖ Correct - bidirectional configuration
text = tk.Text(root, yscrollcommand=scrollbar.set)
scrollbar = tk.Scrollbar(root, command=text.yview)
  </pre>
  
  <p><b>Problem:</b> Validation not working</p>
<pre style="background: white; padding: 5px; margin: 5px 0;">
# Solution: Check validatecommand return value
# ‚ùå Wrong - not returning True/False
def validate(char):
    print(f"Validating: {char}")

# ‚úÖ Correct - must return boolean
def validate(char):
    return char.isdigit() or char == ""

# Also ensure validation is enabled
entry = tk.Entry(root, validate='key', validatecommand=vcmd)
</pre>

<p><b>Problem:</b> Text widget performance with large content</p>
<pre style="background: white; padding: 5px; margin: 5px 0;">
# Solution: Optimize operations
# ‚ùå Wrong - getting all text frequently
def process_text():
    all_text = text.get(1.0, tk.END)  # Slow for large text
    # process...

# ‚úÖ Better - process in chunks or use indexes
def process_line_by_line():
    line_count = int(text.index(tk.END).split('.')[0])
    for i in range(1, line_count):
        line = text.get(f"{i}.0", f"{i}.end")
        # process line
</pre>
</div>

<h3>Key Learning Points</h3>
<ol>
<li><b>Entry widgets</b> are for single-line text input</li>
<li><b>Text widgets</b> are for multi-line text with rich formatting</li>
<li>Use <b>StringVar</b> for live variable binding to Entry widgets</li>
<li>Text widgets use <b>line.column indexing</b> (e.g., "1.0", "2.5")</li>
<li>Implement <b>validation</b> to ensure correct user input</li>
<li>Add <b>scrollbars</b> to Text widgets for large content</li>
<li>Use <b>tags</b> for text formatting and syntax highlighting</li>
</ol>

<div style="background: #e8f5e8; padding: 15px; border-radius: 10px; margin-top: 20px;">
<h3>üí° Pro Tip: Building Reusable Form Components</h3>
<p>Create custom form field classes for consistent validation:</p>
<pre style="background: white; padding: 10px;">
class ValidatedEntry(tk.Frame):
    def __init__(self, parent, label, validator=None, **kwargs):
        super().__init__(parent)
        
        self.label = tk.Label(self, text=label)
        self.label.pack(anchor='w')
        
        self.entry = tk.Entry(self, **kwargs)
        self.entry.pack(fill='x', pady=2)
        
        self.error_label = tk.Label(self, text="", fg='red')
        self.error_label.pack(anchor='w')
        
        self.validator = validator
        
        # Bind validation
        if validator:
            self.entry.bind('<FocusOut>', self.validate)
    
    def validate(self, event=None):
        if self.validator:
            value = self.get()
            is_valid, message = self.validator(value)
            
            if is_valid:
                self.entry.config(bg='white')
                self.error_label.config(text="")
            else:
                self.entry.config(bg='#ffdddd')
                self.error_label.config(text=message)
            
            return is_valid
        return True
    
    def get(self):
        return self.entry.get()
    
    def set(self, value):
        self.entry.delete(0, tk.END)
        self.entry.insert(0, value)

# Usage example:
def validate_email(email):
    if not email:
        return False, "Email is required"
    if "@" not in email or "." not in email:
        return False, "Invalid email format"
    return True, ""

email_field = ValidatedEntry(root, "Email:", validate_email, width=30)
email_field.pack(pady=10)
</pre>
</div>
`
  },
            "10-4": {
    "icon": "fa-th",
    "title": "Layout Management (Grid vs Pack)",
    "html": `<h1>Week 10, Day 4: Layout Management - Grid vs Pack</h1>
<p>Today we master the art of widget positioning. We'll compare Grid and Pack managers, learn when to use each, and create professional, responsive layouts.</p>

<div class="analogy-box">
    <b>Analogy: Furniture Arrangement in a Room ü™ë</b><br/>
    
    Pack Manager = Stacking boxes in a closet<br/>
    Grid Manager = Organizing desks in an office<br/>
    Place Manager = Exact GPS coordinates<br/>
    Frames = Rooms in a house<br/>
    Padding = Space between furniture<br/>
    Sticky = Nails keeping furniture in place<br/>
    Weight = Importance of space allocation
</div>

<h3>Layout Manager Comparison</h3>
<table style="width:100%; border-collapse: collapse; margin: 15px 0;">
  <tr style="background: #4A90E2; color: white;">
    <th style="padding: 10px;">Feature</th>
    <th style="padding: 10px;">Pack Manager</th>
    <th style="padding: 10px;">Grid Manager</th>
    <th style="padding: 10px;">Place Manager</th>
  </tr>
  <tr style="background: #f8f9fa;">
    <td style="padding: 8px; border: 1px solid #ddd;">Philosophy</td>
    <td style="padding: 8px; border: 1px solid #ddd;">"Stack boxes"</td>
    <td style="padding: 8px; border: 1px solid #ddd;">"Spreadsheet cells"</td>
    <td style="padding: 8px; border: 1px solid #ddd;">"Pixel-perfect"</td>
  </tr>
  <tr style="background: white;">
    <td style="padding: 8px; border: 1px solid #ddd;">Best For</td>
    <td style="padding: 8px; border: 1px solid #ddd;">Simple layouts</td>
    <td style="padding: 8px; border: 1px solid #ddd;">Complex forms</td>
    <td style="padding: 8px; border: 1px solid #ddd;">Custom positioning</td>
  </tr>
  <tr style="background: #f8f9fa;">
    <td style="padding: 8px; border: 1px solid #ddd;">Learning Curve</td>
    <td style="padding: 8px; border: 1px solid #ddd;">Easiest</td>
    <td style="padding: 8px; border: 1px solid #ddd;">Moderate</td>
    <td style="padding: 8px; border: 1px solid #ddd;">Hardest</td>
  </tr>
  <tr style="background: white;">
    <td style="padding: 8px; border: 1px solid #ddd;">Responsiveness</td>
    <td style="padding: 8px; border: 1px solid #ddd;">Good</td>
    <td style="padding: 8px; border: 1px solid #ddd;">Excellent</td>
    <td style="padding: 8px; border: 1px solid #ddd;">Poor</td>
  </tr>
  <tr style="background: #f8f9fa;">
    <td style="padding: 8px; border: 1px solid #ddd;">Use Case</td>
    <td style="padding: 8px; border: 1px solid #ddd;">70% of apps</td>
    <td style="padding: 8px; border: 1px solid #ddd;">25% of apps</td>
    <td style="padding: 8px; border: 1px solid #ddd;">5% of apps</td>
  </tr>
</table>

<h3>Pack Manager Deep Dive</h3>
<pre style="background: #36454f; color: white; padding: 15px; border-radius: 5px;">
import tkinter as tk

# ==============================================
# PACK MANAGER COMPREHENSIVE GUIDE
# ==============================================

root = tk.Tk()
root.title("Pack Manager Tutorial")
root.geometry("700x600")

# Title
title = tk.Label(root, text="üì¶ Pack Manager Demonstration", 
                font=("Arial", 18, "bold"))
title.pack(pady=20)

# ==============================================
# 1. BASIC PACKING OPTIONS
# ==============================================
frame_basic = tk.LabelFrame(root, text="1. Basic Packing", padx=10, pady=10)
frame_basic.pack(padx=20, pady=10, fill='x')

# Default (top)
tk.Label(frame_basic, text="Default (top):", width=15, bg='lightblue').pack()
tk.Label(frame_basic, text="Item 1", bg='lightgray').pack()
tk.Label(frame_basic, text="Item 2", bg='lightgray').pack()

# Side packing
tk.Label(frame_basic, text="Side=LEFT:", width=15, bg='lightgreen').pack(side='left')
tk.Label(frame_basic, text="A", bg='yellow').pack(side='left', padx=2)
tk.Label(frame_basic, text="B", bg='yellow').pack(side='left', padx=2)

# Bottom packing
tk.Label(frame_basic, text="Side=BOTTOM:", width=15, bg='lightcoral').pack(side='bottom')
tk.Label(frame_basic, text="Bottom 1", bg='pink').pack(side='bottom')
tk.Label(frame_basic, text="Bottom 2", bg='pink').pack(side='bottom')

# ==============================================
# 2. FILL OPTIONS
# ==============================================
frame_fill = tk.LabelFrame(root, text="2. Fill Options", padx=10, pady=10)
frame_fill.pack(padx=20, pady=10, fill='x')

# No fill (default)
tk.Label(frame_fill, text="No fill:", width=10).grid(row=0, column=0)
frame_no_fill = tk.Frame(frame_fill, bg='gray', height=30)
frame_no_fill.pack(in_=frame_fill, side='left', padx=5)
tk.Label(frame_no_fill, text="Short", bg='lightblue').pack()

# Fill X
tk.Label(frame_fill, text="Fill X:", width=10).grid(row=0, column=1)
frame_fill_x = tk.Frame(frame_fill, bg='gray', height=30)
frame_fill_x.pack(in_=frame_fill, side='left', padx=5, fill='x')
tk.Label(frame_fill_x, text="Expands horizontally", bg='lightgreen').pack(fill='x')

# Fill Y
tk.Label(frame_fill, text="Fill Y:", width=10).grid(row=1, column=0)
frame_fill_y = tk.Frame(frame_fill, bg='gray', width=100, height=60)
frame_fill_y.pack(in_=frame_fill, side='left', padx=5)
tk.Label(frame_fill_y, text="Expands\nvertically", bg='lightcoral').pack(fill='y')

# Fill Both
tk.Label(frame_fill, text="Fill Both:", width=10).grid(row=1, column=1)
frame_fill_both = tk.Frame(frame_fill, bg='gray', width=100, height=60)
frame_fill_both.pack(in_=frame_fill, side='left', padx=5)
tk.Label(frame_fill_both, text="Expands\nboth ways", bg='lightyellow').pack(fill='both', expand=True)

# ==============================================
# 3. EXPAND OPTION
# ==============================================
frame_expand = tk.LabelFrame(root, text="3. Expand Option", padx=10, pady=10)
frame_expand.pack(padx=20, pady=10, fill='both', expand=True)

# Create container with three sections
container = tk.Frame(frame_expand, bg='white')
container.pack(fill='both', expand=True)

# Section 1: No expand
section1 = tk.Frame(container, bg='lightblue', relief='raised', bd=1)
section1.pack(side='left', fill='both', expand=False)
tk.Label(section1, text="NO EXPAND\n(Takes minimal space)", 
        bg='lightblue', pady=20).pack()

# Section 2: Expand
section2 = tk.Frame(container, bg='lightgreen', relief='raised', bd=1)
section2.pack(side='left', fill='both', expand=True)
tk.Label(section2, text="EXPAND=True\n(Takes available space)", 
        bg='lightgreen', pady=20).pack()

# Section 3: Also expand
section3 = tk.Frame(container, bg='lightcoral', relief='raised', bd=1)
section3.pack(side='left', fill='both', expand=True)
tk.Label(section3, text="Also EXPAND=True\n(Equal sharing)", 
        bg='lightcoral', pady=20).pack()

# ==============================================
# 4. ANCHOR OPTIONS
# ==============================================
frame_anchor = tk.LabelFrame(root, text="4. Anchor Positions", padx=10, pady=10)
frame_anchor.pack(padx=20, pady=10, fill='x')

# Create demonstration frame
anchor_frame = tk.Frame(frame_anchor, bg='gray', height=100)
anchor_frame.pack(fill='x', pady=10)

anchors = ['nw', 'n', 'ne', 'w', 'center', 'e', 'sw', 's', 'se']
positions = [(0,0), (1,0), (2,0), (0,1), (1,1), (2,1), (0,2), (1,2), (2,2)]

for anchor, (row, col) in zip(anchors, positions):
    label = tk.Label(anchor_frame, text=anchor.upper(), 
                    bg='lightblue', padx=10, pady=5)
    label.place(relx=col/3, rely=row/3, anchor=anchor)

tk.Label(frame_anchor, text="Anchors control widget position within allocated space",
        font=("Arial", 9, "italic")).pack()

# ==============================================
# 5. PADDING OPTIONS
# ==============================================
frame_padding = tk.LabelFrame(root, text="5. Padding Examples", padx=10, pady=10)
frame_padding.pack(padx=20, pady=10, fill='x')

# Internal vs External padding
tk.Label(frame_padding, text="Internal (ipadx=20):", 
        bg='lightblue').pack(ipadx=20, ipady=5, pady=5)

tk.Label(frame_padding, text="External (padx=20):", 
        bg='lightgreen').pack(padx=20, pady=5)

tk.Label(frame_padding, text="Both (padx=10, ipadx=10):", 
        bg='lightcoral').pack(padx=10, ipadx=10, pady=5)

# ==============================================
# 6. REAL-WORLD EXAMPLE: LOGIN FORM WITH PACK
# ==============================================
frame_example = tk.LabelFrame(root, text="6. Real Example: Login Form", padx=10, pady=10)
frame_example.pack(padx=20, pady=10, fill='x')

# Form container
form_frame = tk.Frame(frame_example)
form_frame.pack(fill='x', padx=20, pady=10)

# Username row
username_frame = tk.Frame(form_frame)
username_frame.pack(fill='x', pady=5)

tk.Label(username_frame, text="Username:", width=10, anchor='w').pack(side='left')
username_entry = tk.Entry(username_frame)
username_entry.pack(side='left', fill='x', expand=True)

# Password row
password_frame = tk.Frame(form_frame)
password_frame.pack(fill='x', pady=5)

tk.Label(password_frame, text="Password:", width=10, anchor='w').pack(side='left')
password_entry = tk.Entry(password_frame, show='*')
password_entry.pack(side='left', fill='x', expand=True)

# Remember me checkbox
remember_frame = tk.Frame(form_frame)
remember_frame.pack(fill='x', pady=5)

remember_var = tk.BooleanVar()
tk.Checkbutton(remember_frame, text="Remember me", 
              variable=remember_var).pack(anchor='w')

# Button row
button_frame = tk.Frame(form_frame)
button_frame.pack(fill='x', pady=10)

tk.Button(button_frame, text="Login", width=10, 
         bg='green', fg='white').pack(side='left', padx=5)
tk.Button(button_frame, text="Cancel", width=10,
         command=root.quit).pack(side='left', padx=5)

# ==============================================
# KEY PACK OPTIONS SUMMARY:
# ==============================================
# side: 'top', 'bottom', 'left', 'right' (default: 'top')
# fill: 'none', 'x', 'y', 'both' (default: 'none')
# expand: True/False (default: False)
# anchor: 'n', 's', 'e', 'w', 'center', 'nw', 'ne', 'sw', 'se'
# padx/pady: External padding (outside widget)
# ipadx/ipady: Internal padding (inside widget)
# before/after: Insert widget before/after another

root.mainloop()
</pre>

<h3>Grid Manager Masterclass</h3>
<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 15px 0;">
  <div style="background: #fff3cd; padding: 15px; border-radius: 10px;">
    <h4>üìä Grid Fundamentals</h4>
    <ul>
      <li><b>Rows & Columns:</b> Zero-indexed grid system</li>
      <li><b>Sticky:</b> Widget alignment within cell (N, S, E, W)</li>
      <li><b>Columnspan/Rowspan:</b> Merge cells</li>
      <li><b>Weight:</b> Relative space allocation</li>
      <li><b>Padding:</b> padx/pady for cell spacing</li>
      <li><b>Uniform:</b> Equal column/row sizing</li>
      <li><b>Minimum Size:</b> minsize parameter</li>
    </ul>
    <pre style="background: white; padding: 10px; margin-top: 10px;">
# Basic grid layout
widget.grid(row=0, column=0)

# Span multiple cells
widget.grid(row=0, column=0, columnspan=2)

# Sticky alignment (combine directions)
widget.grid(sticky='nsew')  # North, South, East, West

# Configure row/column weights
root.grid_rowconfigure(0, weight=1)
root.grid_columnconfigure(0, weight=1)
    </pre>
  </div>
  <div style="background: #d4edda; padding: 15px; border-radius: 10px;">
    <h4>üéØ Grid vs Pack Comparison</h4>
    <p><b>Use Grid when:</b></p>
    <ul>
      <li>Form-like layouts (labels next to entries)</li>
      <li>Tabular data display</li>
      <li>Complex alignments needed</li>
      <li>Responsive layouts required</li>
      <li>Need cell spanning</li>
    </ul>
    <p><b>Use Pack when:</b></p>
    <ul>
      <li>Simple vertical/horizontal stacking</li>
      <li>Toolbars or menus</li>
      <li>Quick prototypes</li>
      <li>Nested frame structures</li>
      <li>Don't need precise alignment</li>
    </ul>
  </div>
</div>

<h3>Complete Grid Layout Application</h3>
<pre style="background: #36454f; color: white; padding: 15px; border-radius: 5px; max-height: 600px; overflow-y: auto;">
import tkinter as tk
from tkinter import ttk

class GridLayoutDemo:
    def __init__(self, root):
        self.root = root
        self.root.title("Grid Layout Masterclass")
        self.root.geometry("900x700")
        
        # Configure root grid
        self.root.grid_rowconfigure(0, weight=1)
        self.root.grid_columnconfigure(0, weight=1)
        
        self.create_widgets()
    
    def create_widgets(self):
        # Main container frame
        main_frame = tk.Frame(self.root, bg='white')
        main_frame.grid(row=0, column=0, sticky='nsew')
        
        # Configure main frame grid
        main_frame.grid_rowconfigure(0, weight=0)  # Title
        main_frame.grid_rowconfigure(1, weight=1)  # Content
        main_frame.grid_rowconfigure(2, weight=0)  # Controls
        main_frame.grid_columnconfigure(0, weight=1)
        
        # ==============================================
        # TITLE SECTION
        # ==============================================
        title_frame = tk.Frame(main_frame, bg='#4A90E2', height=60)
        title_frame.grid(row=0, column=0, sticky='ew', pady=(0, 10))
        title_frame.grid_propagate(False)  # Keep fixed height
        
        tk.Label(title_frame, text="üî≤ Grid Layout Manager", 
                font=("Arial", 20, "bold"), 
                bg='#4A90E2', fg='white').pack(pady=15)
        
        # ==============================================
        # MAIN CONTENT AREA
        # ==============================================
        content_frame = tk.Frame(main_frame, bg='#f5f5f5')
        content_frame.grid(row=1, column=0, sticky='nsew', padx=20, pady=10)
        
        # Configure content frame as 2x2 grid
        content_frame.grid_rowconfigure(0, weight=1)
        content_frame.grid_rowconfigure(1, weight=1)
        content_frame.grid_columnconfigure(0, weight=1)
        content_frame.grid_columnconfigure(1, weight=1)
        
        # Create four demonstration quadrants
        self.create_quadrant(content_frame, 0, 0, "1. Basic Grid", 
                           "Simple row/column layout")
        self.create_quadrant(content_frame, 0, 1, "2. Cell Spanning", 
                           "Columnspan and rowspan")
        self.create_quadrant(content_frame, 1, 0, "3. Sticky Options", 
                           "Widget alignment in cells")
        self.create_quadrant(content_frame, 1, 1, "4. Weight System", 
                           "Responsive space allocation")
        
        # ==============================================
        # CONTROL PANEL
        # ==============================================
        control_frame = tk.Frame(main_frame, bg='#e8e8e8', height=100)
        control_frame.grid(row=2, column=0, sticky='ew', pady=(10, 0))
        control_frame.grid_propagate(False)
        
        # Add some controls
        tk.Label(control_frame, text="Grid Controls:", 
                font=("Arial", 12, "bold"), 
                bg='#e8e8e8').pack(side='left', padx=20)
        
        # Grid configuration controls
        controls = tk.Frame(control_frame, bg='#e8e8e8')
        controls.pack(side='left', padx=20, pady=10)
        
        # Row configuration
        tk.Label(controls, text="Rows:", bg='#e8e8e8').grid(row=0, column=0, sticky='w')
        self.row_var = tk.IntVar(value=3)
        tk.Spinbox(controls, from_=1, to=10, textvariable=self.row_var, 
                  width=5).grid(row=0, column=1, padx=5)
        
        # Column configuration
        tk.Label(controls, text="Columns:", bg='#e8e8e8').grid(row=0, column=2, padx=(20,5))
        self.col_var = tk.IntVar(value=3)
        tk.Spinbox(controls, from_=1, to=10, textvariable=self.col_var, 
                  width=5).grid(row=0, column=3, padx=5)
        
        # Update button
        tk.Button(controls, text="Update Grid", 
                 command=self.update_grid).grid(row=0, column=4, padx=20)
        
        # Show grid lines checkbox
        self.grid_lines_var = tk.BooleanVar(value=True)
        tk.Checkbutton(controls, text="Show Grid Lines", 
                      variable=self.grid_lines_var, 
                      command=self.toggle_grid_lines).grid(row=0, column=5, padx=10)
    
    def create_quadrant(self, parent, row, col, title, description):
        """Create a demonstration quadrant"""
        quadrant = tk.Frame(parent, bg='white', relief='solid', bd=1)
        quadrant.grid(row=row, column=col, sticky='nsew', padx=10, pady=10)
        
        # Configure quadrant grid
        quadrant.grid_rowconfigure(0, weight=0)  # Title
        quadrant.grid_rowconfigure(1, weight=0)  # Description
        quadrant.grid_rowconfigure(2, weight=1)  # Content
        quadrant.grid_columnconfigure(0, weight=1)
        
        # Title
        tk.Label(quadrant, text=title, font=("Arial", 14, "bold"), 
                bg='white').grid(row=0, column=0, sticky='w', padx=10, pady=(10,5))
        
        # Description
        tk.Label(quadrant, text=description, font=("Arial", 9), 
                bg='white', fg='gray').grid(row=1, column=0, sticky='w', padx=10)
        
        # Content area
        content = tk.Frame(quadrant, bg='#f8f9fa')
        content.grid(row=2, column=0, sticky='nsew', padx=10, pady=10)
        
        # Add demonstration based on quadrant
        if row == 0 and col == 0:
            self.demo_basic_grid(content)
        elif row == 0 and col == 1:
            self.demo_cell_spanning(content)
        elif row == 1 and col == 0:
            self.demo_sticky_options(content)
        elif row == 1 and col == 1:
            self.demo_weight_system(content)
    
    def demo_basic_grid(self, parent):
        """Demonstrate basic grid layout"""
        # Configure 3x3 grid
        for i in range(3):
            parent.grid_rowconfigure(i, weight=1)
            parent.grid_columnconfigure(i, weight=1)
        
        # Create 3x3 button grid
        for row in range(3):
            for col in range(3):
                btn = tk.Button(parent, text=f"({row},{col})", 
                              font=("Arial", 10))
                btn.grid(row=row, column=col, sticky='nsew', padx=2, pady=2)
    
    def demo_cell_spanning(self, parent):
        """Demonstrate columnspan and rowspan"""
        # Configure 4x4 grid
        for i in range(4):
            parent.grid_rowconfigure(i, weight=1)
            parent.grid_columnconfigure(i, weight=1)
        
        # Create various spanning elements
        colors = ['#FF6B6B', '#4ECDC4', '#FFD166', '#06D6A0', '#118AB2']
        
        # Full width header
        header = tk.Label(parent, text="Header (colspan=4)", 
                         bg=colors[0], fg='white', font=("Arial", 12, "bold"))
        header.grid(row=0, column=0, columnspan=4, sticky='nsew', padx=2, pady=2)
        
        # Sidebar (rowspan)
        sidebar = tk.Label(parent, text="Sidebar\n(rowspan=3)", 
                          bg=colors[1], fg='white')
        sidebar.grid(row=1, column=0, rowspan=3, sticky='nsew', padx=2, pady=2)
        
        # Main content (colspan + rowspan)
        main = tk.Label(parent, text="Main Content\n(colspan=3, rowspan=2)", 
                       bg=colors[2])
        main.grid(row=1, column=1, columnspan=3, rowspan=2, 
                 sticky='nsew', padx=2, pady=2)
        
        # Footer items
        footer1 = tk.Label(parent, text="Footer 1", bg=colors[3])
        footer1.grid(row=3, column=1, sticky='nsew', padx=2, pady=2)
        
        footer2 = tk.Label(parent, text="Footer 2", bg=colors[3])
        footer2.grid(row=3, column=2, sticky='nsew', padx=2, pady=2)
        
        footer3 = tk.Label(parent, text="Footer 3", bg=colors[4], fg='white')
        footer3.grid(row=3, column=3, sticky='nsew', padx=2, pady=2)
    
    def demo_sticky_options(self, parent):
        """Demonstrate sticky parameter options"""
        # Configure 3x3 grid
        for i in range(3):
            parent.grid_rowconfigure(i, weight=1)
            parent.grid_columnconfigure(i, weight=1)
        
        # Sticky options to demonstrate
        sticky_options = ['nw', 'n', 'ne', 'w', 'center', 'e', 'sw', 's', 'se']
        positions = [(0,0), (0,1), (0,2), (1,0), (1,1), (1,2), (2,0), (2,1), (2,2)]
        
        for sticky, (row, col) in zip(sticky_options, positions):
            label = tk.Label(parent, text=f"sticky=\n'{sticky}'", 
                           bg='#E9ECEF', relief='solid', bd=1)
            label.grid(row=row, column=col, sticky=sticky, padx=5, pady=5)
            
            # Add visual indicators for non-center alignments
            if 'n' in sticky:
                tk.Label(parent, text="‚Üë", fg='red').place(
                    in_=label, relx=0.5, rely=0, anchor='s')
            if 's' in sticky:
                tk.Label(parent, text="‚Üì", fg='red').place(
                    in_=label, relx=0.5, rely=1, anchor='n')
            if 'w' in sticky:
                tk.Label(parent, text="‚Üê", fg='blue').place(
                    in_=label, relx=0, rely=0.5, anchor='e')
            if 'e' in sticky:
                tk.Label(parent, text="‚Üí", fg='blue').place(
                    in_=label, relx=1, rely=0.5, anchor='w')
    
    def demo_weight_system(self, parent):
        """Demonstrate grid weight system"""
        # Create control panel
        control_panel = tk.Frame(parent, bg='white')
        control_panel.pack(fill='x', pady=(0, 10))
        
        tk.Label(control_panel, text="Column Weights:", 
                font=("Arial", 10)).pack(side='left', padx=5)
        
        # Weight sliders for 3 columns
        self.weight_vars = []
        for i in range(3):
            var = tk.IntVar(value=1)
            self.weight_vars.append(var)
            
            frame = tk.Frame(control_panel, bg='white')
            frame.pack(side='left', padx=10)
            
            tk.Label(frame, text=f"Col {i}:").pack()
            tk.Scale(frame, from_=0, to=5, variable=var, 
                    orient='horizontal', length=80,
                    command=lambda v, idx=i: self.update_weights(idx)).pack()
        
        # Demo grid area
        demo_area = tk.Frame(parent, bg='#f8f9fa')
        demo_area.pack(fill='both', expand=True)
        
        # Configure 1x3 grid for demo
        demo_area.grid_rowconfigure(0, weight=1)
        for i in range(3):
            demo_area.grid_columnconfigure(i, weight=self.weight_vars[i].get())
        
        # Create demo columns
        self.demo_columns = []
        colors = ['#FFADAD', '#A0C4FF', '#BDB2FF']
        for i in range(3):
            col = tk.Frame(demo_area, bg=colors[i], relief='raised', bd=2)
            col.grid(row=0, column=i, sticky='nsew', padx=2, pady=2)
            
            label = tk.Label(col, text=f"Column {i}\nWeight: {self.weight_vars[i].get()}", 
                           bg=colors[i], font=("Arial", 11, "bold"))
            label.pack(pady=20)
            
            self.demo_columns.append(col)
    
    def update_weights(self, column_idx):
        """Update column weights based on slider values"""
        demo_area = self.demo_columns[0].master
        
        # Update all column weights
        for i in range(3):
            weight = self.weight_vars[i].get()
            demo_area.grid_columnconfigure(i, weight=weight)
            
            # Update label text
            label = self.demo_columns[i].winfo_children()[0]
            label.config(text=f"Column {i}\nWeight: {weight}")
    
    def update_grid(self):
        """Update grid dimensions based on controls"""
        # This would update the demonstration grids
        print(f"Updating grid to {self.row_var.get()}x{self.col_var.get()}")
        # In a real implementation, you'd recreate the demos with new dimensions
    
    def toggle_grid_lines(self):
        """Toggle grid line visibility"""
        show = self.grid_lines_var.get()
        # This would show/hide grid lines in demonstrations
        print(f"Grid lines: {'ON' if show else 'OFF'}")

# Run the application
if __name__ == "__main__":
    root = tk.Tk()
    app = GridLayoutDemo(root)
    root.mainloop()
</pre>

<h3>Hybrid Approach: Combining Pack and Grid</h3>
<div style="background: #f0f8ff; padding: 15px; border-radius: 10px; margin: 15px 0;">
  <h4>üé® Best of Both Worlds</h4>
  <p><b>Golden Rule:</b> Never mix pack and grid in the same container! But you can use different managers in different frames.</p>
  
  <pre style="background: white; padding: 10px;">
# ‚úÖ GOOD: Different managers in different frames
root = tk.Tk()

# Frame 1 uses pack
frame1 = tk.Frame(root)
frame1.pack(fill='x', pady=10)
tk.Label(frame1, text="Toolbar").pack(side='left')
tk.Button(frame1, text="File").pack(side='left')
tk.Button(frame1, text="Edit").pack(side='left')

# Frame 2 uses grid
frame2 = tk.Frame(root)
frame2.pack(fill='both', expand=True)

tk.Label(frame2, text="Name:").grid(row=0, column=0, sticky='e')
tk.Entry(frame2).grid(row=0, column=1, sticky='ew')
tk.Label(frame2, text="Email:").grid(row=1, column=0, sticky='e')
tk.Entry(frame2).grid(row=1, column=1, sticky='ew')

# Configure grid weights
frame2.grid_columnconfigure(1, weight=1)

# ‚ùå BAD: Mixing in same container
frame = tk.Frame(root)
tk.Label(frame, text="Hello").pack()      # Pack
tk.Button(frame, text="Click").grid(row=0, column=0)  # Grid - ERROR!
  </pre>
  
  <p><b>When to combine:</b></p>
  <ul>
    <li>Use <b>Pack</b> for main window structure (toolbars, status bars)</li>
    <li>Use <b>Grid</b> for form areas and complex layouts</li>
    <li>Use <b>Pack</b> inside grid cells for simple stacking</li>
    <li>Nest frames appropriately for clean separation</li>
  </ul>
</div>

<h3>Today's Hands-On Exercises</h3>
<div style="background: #e8f5e8; padding: 15px; border-radius: 10px;">
  <b>Exercise 1: Responsive Dashboard Layout (60 minutes)</b>
  <p>Create a responsive dashboard interface:</p>
  
  <ul>
    <li><b>Header:</b> Full width, contains logo and user menu (use pack)</li>
    <li><b>Sidebar:</b> Fixed width on left, navigation menu (use pack)</li>
    <li><b>Main Content:</b> Responsive grid area (use grid)</li>
    <li><b>Footer:</b> Full width, status information (use pack)</li>
    <li><b>Main Content Grid:</b>
      <ul>
        <li>Create a 2x2 grid of dashboard widgets</li>
        <li>Each widget should resize proportionally</li>
        <li>Use columnspan for wider widgets</li>
        <li>Implement a "toggle sidebar" button that hides/shows sidebar</li>
        <li>Make layout responsive to window resizing</li>
      </ul>
    </li>
    <li><b>Widget Examples:</b>
      <ul>
        <li>Statistics card (numbers with icons)</li>
        <li>Chart placeholder (canvas with grid lines)</li>
        <li>Recent activity list</li>
        <li>Quick action buttons</li>
      </ul>
    </li>
  </ul>
  
  <b>Exercise 2: Calendar Application Layout (60 minutes)</b>
  <p>Create a monthly calendar interface:</p>
  
  <ul>
    <li><b>Calendar Header:</b> Month/Year navigation (use pack)</li>
    <li><b>Day Names Row:</b> Sun, Mon, Tue, etc. (use grid)</li>
    <li><b>Calendar Grid:</b> 6x7 grid for days (use grid)</li>
    <li><b>Side Panel:</b> Event details and controls (use pack)</li>
    <li><b>Requirements:</b>
      <ul>
        <li>Properly align day numbers in grid cells</li>
        <li>Highlight current day</li>
        <li>Add events as small labels in day cells</li>
        <li>Make calendar resize with window</li>
        <li>Implement month navigation buttons</li>
        <li>Add "Add Event" form in side panel</li>
      </ul>
    </li>
    <li><b>Advanced Features:</b>
      <ul>
        <li>Week view and day view tabs</li>
        <li>Drag and drop event rescheduling</li>
        <li>Color coding for event types</li>
        <li>Print layout option</li>
      </ul>
    </li>
  </ul>
</div>

<h3>Homework: Complete IDE Interface</h3>
<div style="background: #fff0e6; padding: 15px; border-radius: 10px;">
  <p>Create a complete Integrated Development Environment (IDE) interface:</p>
  
  <ul>
    <li><b>Main Window Layout:</b>
      <ul>
        <li>Menu bar (top, pack manager)</li>
        <li>Toolbar (below menu, pack manager)</li>
        <li>Main workspace (rest of window, grid manager)</li>
        <li>Status bar (bottom, pack manager)</li>
      </ul>
    </li>
    <li><b>Workspace Layout (3-pane design):</b>
      <ul>
        <li><b>Left Pane:</b> Project explorer (treeview of files)</li>
        <li><b>Center Pane:</b> Code editor (text widget with tabs)</li>
        <li><b>Right Pane:</b> Tool windows (console, problems, etc.)</li>
        <li>All panes should be resizable with dividers</li>
      </ul>
    </li>
    <li><b>Detailed Requirements:</b>
      <ul>
        <li><b>Project Explorer:</b>
          <ul>
            <li>Treeview for file hierarchy</li>
            <li>Collapsible folders</li>
            <li>File type icons</li>
            <li>Context menu on right-click</li>
          </ul>
        </li>
        <li><b>Code Editor:</b>
          <ul>
            <li>Tabbed interface for multiple files</li>
            <li>Line numbers in left gutter</li>
            <li>Syntax highlighting (basic)</li>
            <li>Find/replace bar</li>
          </ul>
        </li>
        <li><b>Tool Windows:</b>
          <ul>
            <li>Tabbed interface for different tools</li>
            <li>Console/output window</li>
            <li>Problems/errors list</li>
            <li>Terminal emulator</li>
            <li>Git version control panel</li>
          </ul>
        </li>
        <li><b>Status Bar:</b>
          <ul>
            <li>Cursor position (line:column)</li>
            <li>File encoding</li>
            <li>Git branch status</li>
            <li>Memory usage indicator</li>
          </ul>
        </li>
      </ul>
    </li>
    <li><b>Advanced Features:</b>
      <ul>
        <li>Dockable tool windows (drag and drop)</li>
        <li>Split view for multiple editors</li>
        <li>Theme switcher (light/dark mode)</li>
        <li>Layout presets (save/load layouts)</li>
        <li>Zoom controls for text</li>
        <li>Minimap scrollbar</li>
      </ul>
    </li>
  </ul>
  
  <p><b>Technical Implementation Tips:</b></p>
  <ul>
    <li>Use PanedWindow for resizable panes</li>
    <li>Implement Notebook widget for tabbed interfaces</li>
    <li>Use Treeview for project explorer</li>
    <li>Create custom widget classes for each major component</li>
    <li>Use grid manager within each pane for precise control</li>
    <li>Implement drag and drop for file opening</li>
  </ul>
</div>

<h3>Common Layout Issues & Solutions</h3>
<div style="background: #f8d7da; padding: 15px; border-radius: 10px;">
  <h4>üö® Troubleshooting Guide</h4>
  
  <p><b>Problem:</b> Widgets not appearing or wrong size</p>
  <pre style="background: white; padding: 5px; margin: 5px 0;">
# Solution: Check geometry manager usage
# ‚ùå Wrong - forgot geometry manager
label = tk.Label(root, text="Hello")
# label.pack() or label.grid() missing!

# ‚úÖ Correct - always use a geometry manager
label = tk.Label(root, text="Hello")
label.pack()  # or label.grid(row=0, column=0)
  </pre>
  
  <p><b>Problem:</b> Widgets overlapping or in wrong positions</p>
  <pre style="background: white; padding: 5px; margin: 5px 0;">
# Solution: Check row/column assignments
# ‚ùå Wrong - overlapping grid positions
button1.grid(row=0, column=0)
button2.grid(row=0, column=0)  # Same cell!

# ‚úÖ Correct - unique positions
button1.grid(row=0, column=0)
button2.grid(row=0, column=1)  # Different column

# Or use pack with proper side options
button1.pack(side='left')
button2.pack(side='left')
  </pre>
  
  <p><b>Problem:</b> Layout not responsive to window resize</p>
<pre style="background: white; padding: 5px; margin: 5px 0;">
# Solution: Configure weights
# ‚ùå Wrong - no weights configured
frame.grid(row=0, column=0)

# ‚úÖ Correct - configure row and column weights
root.grid_rowconfigure(0, weight=1)      # Row 0 expands
root.grid_columnconfigure(0, weight=1)   # Column 0 expands
frame.grid(row=0, column=0, sticky='nsew')

# For pack manager:
frame.pack(fill='both', expand=True)
</pre>

<p><b>Problem:</b> "TclError: cannot use geometry manager grid inside . which already has slaves managed by pack"</p>
<pre style="background: white; padding: 5px; margin: 5px 0;">
# Solution: Don't mix pack and grid in same container
# ‚ùå Wrong - mixing managers
frame = tk.Frame(root)
label1 = tk.Label(frame, text="Label 1")
label1.pack()                           # Using pack
label2 = tk.Label(frame, text="Label 2")
label2.grid(row=0, column=0)           # ERROR: Using grid in same frame!

# ‚úÖ Correct - use separate frames
frame1 = tk.Frame(root)                 # For pack widgets
frame1.pack()
label1 = tk.Label(frame1, text="Label 1")
label1.pack()

frame2 = tk.Frame(root)                 # For grid widgets
frame2.pack()
label2 = tk.Label(frame2, text="Label 2")
label2.grid(row=0, column=0)
</pre>
</div>

<h3>Key Learning Points</h3>
<ol>
<li><b>Pack manager</b> is simple and great for stacking widgets</li>
<li><b>Grid manager</b> is powerful for complex, table-like layouts</li>
<li>Never mix <b>pack and grid</b> in the same container</li>
<li>Use <b>sticky</b> to control widget alignment within grid cells</li>
<li>Configure <b>row and column weights</b> for responsive layouts</li>
<li>Use <b>frames</b> to organize complex interfaces</li>
<li>Combine managers by using different frames for different sections</li>
</ol>

<div style="background: #e8f5e8; padding: 15px; border-radius: 10px; margin-top: 20px;">
<h3>üí° Pro Tip: Responsive Design Principles</h3>
<p>Create layouts that work well at different window sizes:</p>
<pre style="background: white; padding: 10px;">
class ResponsiveApp:
    def __init__(self, root):
        self.root = root
        
        # Configure root grid for responsiveness
        self.root.grid_rowconfigure(0, weight=0)    # Header (fixed)
        self.root.grid_rowconfigure(1, weight=1)    # Content (expands)
        self.root.grid_rowconfigure(2, weight=0)    # Footer (fixed)
        self.root.grid_columnconfigure(0, weight=1) # Full width
        
        self.create_widgets()
        self.setup_responsive_bindings()
    
    def setup_responsive_bindings(self):
        # Reconfigure layout on window resize
        self.root.bind("<Configure>", self.on_window_resize)
    
    def on_window_resize(self, event):
        width = event.width
        height = event.height
        
        # Adjust layout based on window size
        if width < 600:  # Mobile layout
            self.sidebar.pack_forget()  # Hide sidebar
            self.content.grid_columnconfigure(0, weight=1)
        else:  # Desktop layout
            self.sidebar.pack(side='left', fill='y')  # Show sidebar
            self.content.grid_columnconfigure(0, weight=0)  # Fixed sidebar
            self.content.grid_columnconfigure(1, weight=1)  # Expanding content
        
        # Update font sizes based on window dimensions
        base_font_size = max(10, int(height / 50))
        self.update_font_sizes(base_font_size)
    
    def update_font_sizes(self, base_size):
        # Update all widget fonts
        widgets = [self.header, self.footer, self.sidebar, self.content]
        for widget in widgets:
            if hasattr(widget, 'config'):
                current_font = widget.cget('font')
                if current_font:
                    # Create new font with adjusted size
                    new_font = (current_font[0], base_size) + current_font[2:]
                    widget.config(font=new_font)
</pre>
</div>
`
  },

            "11-1": {
                icon: "fa-bars",
                title: "GUI Menus & Navigation Bars",
                html: `<h1>Week 11, Day 1: Advanced GUI ‚Äì Menus & Navigation Bars</h1>
    <p>Today we move from simple buttons to <b>professional desktop application navigation</b> using menus and menu bars.</p>

    <div class="analogy-box">
        <b>Analogy: Restaurant Menu üçΩÔ∏è</b><br/>
        <ul style="margin-top: 10px;">
            <li><b>Menu Bar</b> = The menu book itself</li>
            <li><b>Menu</b> = Sections like Starters, Main Course</li>
            <li><b>Menu Item</b> = Individual food options</li>
            <li><b>Separator</b> = Line between food categories</li>
            <li><b>Shortcut</b> = Ordering your usual without reading</li>
        </ul>
    </div>

    <h3>Key Topics</h3>
    <ul>
        <li>What GUI Menus Are</li>
        <li>Menu Bar Structure</li>
        <li>Dropdown Menus</li>
        <li>Menu Commands & Callbacks</li>
        <li>Keyboard Shortcuts</li>
    </ul>

    <hr/>

    <h3>Why Menus Matter</h3>
    <div style="background-color:#f0f8ff; padding:15px; border-radius:5px;">
        <ul>
            <li>They make apps look <b>professional</b></li>
            <li>They reduce clutter (fewer buttons)</li>
            <li>They follow <b>desktop OS standards</b></li>
            <li>Users already understand them</li>
        </ul>
    </div>

    <hr/>

    <h3>Menu Structure (Visual Diagram)</h3>
    <div style="background-color:#f9f9f9; padding:15px; border-radius:5px; font-family:monospace;">
        Window<br/>
        ‚îî‚îÄ‚îÄ Menu Bar<br/>
        &nbsp;&nbsp;&nbsp;&nbsp;‚îú‚îÄ‚îÄ File<br/>
        &nbsp;&nbsp;&nbsp;&nbsp;‚îÇ&nbsp;&nbsp;‚îú‚îÄ‚îÄ New<br/>
        &nbsp;&nbsp;&nbsp;&nbsp;‚îÇ&nbsp;&nbsp;‚îú‚îÄ‚îÄ Open<br/>
        &nbsp;&nbsp;&nbsp;&nbsp;‚îÇ&nbsp;&nbsp;‚îú‚îÄ‚îÄ Save<br/>
        &nbsp;&nbsp;&nbsp;&nbsp;‚îÇ&nbsp;&nbsp;‚îî‚îÄ‚îÄ Exit<br/>
        &nbsp;&nbsp;&nbsp;&nbsp;‚îú‚îÄ‚îÄ Edit<br/>
        &nbsp;&nbsp;&nbsp;&nbsp;‚îÇ&nbsp;&nbsp;‚îú‚îÄ‚îÄ Cut<br/>
        &nbsp;&nbsp;&nbsp;&nbsp;‚îÇ&nbsp;&nbsp;‚îú‚îÄ‚îÄ Copy<br/>
        &nbsp;&nbsp;&nbsp;&nbsp;‚îÇ&nbsp;&nbsp;‚îî‚îÄ‚îÄ Paste<br/>
        &nbsp;&nbsp;&nbsp;&nbsp;‚îî‚îÄ‚îÄ Help<br/>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;‚îî‚îÄ‚îÄ About
    </div>

    <hr/>

    <h3>Creating a Menu Bar (Tkinter)</h3>

    <b>Step 1: Create the Main Window</b>
    <div style="background-color:#e0e0e0; padding:15px; border-radius:5px;">
        <pre>
import tkinter as tk

root = tk.Tk()
root.title("Inventory Manager")
root.geometry("600x400")
        </pre>
    </div>

    <b>Step 2: Create the Menu Bar</b>
    <div style="background-color:#e0e0e0; padding:15px; border-radius:5px;">
        <pre>
menu_bar = tk.Menu(root)
root.config(menu=menu_bar)
        </pre>
        <small>- Menu bar must be attached to the window</small>
    </div>

    <b>Step 3: Create a Dropdown Menu</b>
    <div style="background-color:#e0e0e0; padding:15px; border-radius:5px;">
        <pre>
file_menu = tk.Menu(menu_bar, tearoff=0)
menu_bar.add_cascade(label="File", menu=file_menu)
        </pre>
        <small>- <code>tearoff=0</code> disables floating menus</small>
    </div>

    <hr/>

    <h3>Adding Menu Items (Commands)</h3>

    <div style="background-color:#e0e0e0; padding:15px; border-radius:5px;">
        <pre>
def new_file():
    print("New file created")

def exit_app():
    root.quit()

file_menu.add_command(label="New", command=new_file)
file_menu.add_separator()
file_menu.add_command(label="Exit", command=exit_app)
        </pre>
    </div>

    <b>Rule:</b>
    <div style="background-color:#f0f8ff; padding:10px; border-radius:5px;">
        Menu items always trigger <b>functions</b>, never direct code.
    </div>

    <hr/>

    <h3>Keyboard Shortcuts (Accelerators)</h3>

    <div style="background-color:#e0e0e0; padding:15px; border-radius:5px;">
        <pre>
file_menu.add_command(
    label="Save",
    accelerator="Ctrl+S",
    command=lambda: print("Saved")
)

root.bind("&lt;Control-s&gt;", lambda e: print("Saved"))
        </pre>
    </div>

    <b>Shortcut Mapping Table</b>
    <div style="background-color:#f9f9f9; padding:15px; border-radius:5px;">
        <table border="1" cellpadding="8" cellspacing="0">
            <tr>
                <th>Shortcut</th>
                <th>Binding</th>
            </tr>
            <tr>
                <td>Ctrl + S</td>
                <td>&lt;Control-s&gt;</td>
            </tr>
            <tr>
                <td>Ctrl + N</td>
                <td>&lt;Control-n&gt;</td>
            </tr>
            <tr>
                <td>Ctrl + Q</td>
                <td>&lt;Control-q&gt;</td>
            </tr>
        </table>
    </div>

    <hr/>

    <h3>Multiple Menus Example</h3>
    <div style="background-color:#e0e0e0; padding:15px; border-radius:5px;">
        <pre>
edit_menu = tk.Menu(menu_bar, tearoff=0)
menu_bar.add_cascade(label="Edit", menu=edit_menu)

edit_menu.add_command(label="Cut")
edit_menu.add_command(label="Copy")
edit_menu.add_command(label="Paste")
        </pre>
    </div>

    <hr/>

    <h3>Common Menu Design Standards</h3>
    <div style="background-color:#f0f8ff; padding:15px; border-radius:5px;">
        <ul>
            <li><b>File</b> ‚Üí New, Open, Save, Exit</li>
            <li><b>Edit</b> ‚Üí Cut, Copy, Paste</li>
            <li><b>View</b> ‚Üí Zoom, Layout</li>
            <li><b>Help</b> ‚Üí About</li>
        </ul>
    </div>

    <hr/>

    <h3>Hands-On Exercise: Build an App Menu</h3>
    <b>Task:</b> Add a professional menu to your Warehouse Manager app.

    <div style="background-color:#f0f8ff; padding:15px; border-radius:5px;">
        <b>Requirements:</b><br/>
        1. Menu bar at top<br/>
        2. File menu with New, Save, Exit<br/>
        3. Edit menu with Cut, Copy, Paste<br/>
        4. Help menu with About popup (placeholder)<br/>
        5. At least one keyboard shortcut
    </div>

    <hr/>

    <h3>Common Mistakes</h3>

    <b>Mistake 1: Forgetting to attach menu to window</b>
    <div style="background-color:#ffe6e6; padding:15px; border-radius:5px;">
        <pre>
menu = tk.Menu()
# Won't appear unless attached to root
        </pre>
    </div>

    <b>Mistake 2: Writing logic directly in menu</b>
    <div style="background-color:#ffe6e6; padding:15px; border-radius:5px;">
        <pre>
# WRONG
add_command(label="Exit", command=root.quit())
        </pre>
    </div>

    <hr/>

    <div class="assignment-box">
        <h4>Assignment</h4>
        <p>Create a fully working menu system for your app.</p>

        <ul>
            <li>Menus must trigger functions</li>
            <li>Use at least one separator</li>
            <li>Include one shortcut key</li>
            <li>Test menu responsiveness</li>
        </ul>

        <p><b>Bonus:</b> Disable a menu item dynamically using <code>entryconfig</code>.</p>
    </div>`
            },
            "11-2": {
                icon: "fa-comment-dots",
                title: "Pop-ups & Message Boxes",
                html: `<h1>Week 11, Day 2: Advanced GUI ‚Äì Pop-ups & Message Boxes</h1>
    <p>Today we learn how applications <b>communicate with users</b> using pop-ups: alerts, confirmations, warnings, and input dialogs.</p>

    <div class="analogy-box">
        <b>Analogy: Phone Notifications üì±</b><br/>
        <ul style="margin-top: 10px;">
            <li><b>Info Box</b> = WhatsApp message received</li>
            <li><b>Warning Box</b> = Low battery alert</li>
            <li><b>Error Box</b> = App crash message</li>
            <li><b>Confirm Box</b> = ‚ÄúAre you sure you want to delete?‚Äù</li>
            <li><b>Input Dialog</b> = Enter your PIN</li>
        </ul>
    </div>

    <h3>Key Topics</h3>
    <ul>
        <li>Why Pop-ups Matter</li>
        <li>Message Box Types</li>
        <li>Handling User Responses</li>
        <li>Custom Dialog Windows</li>
        <li>Real-world GUI Scenarios</li>
    </ul>

    <hr/>

    <h3>Why Pop-ups Are Important</h3>
    <div style="background-color:#f0f8ff; padding:15px; border-radius:5px;">
        <ul>
            <li>Guide user decisions</li>
            <li>Prevent destructive actions</li>
            <li>Display errors clearly</li>
            <li>Collect quick user input</li>
            <li>Improve usability & trust</li>
        </ul>
    </div>

    <hr/>

    <h3>Types of Message Boxes</h3>

    <div style="background-color:#f9f9f9; padding:15px; border-radius:5px;">
        <table border="1" cellpadding="8" cellspacing="0">
            <tr>
                <th>Type</th>
                <th>Purpose</th>
                <th>Example</th>
            </tr>
            <tr>
                <td>showinfo</td>
                <td>General information</td>
                <td>‚ÄúItem saved successfully‚Äù</td>
            </tr>
            <tr>
                <td>showwarning</td>
                <td>Potential issue</td>
                <td>‚ÄúLow stock warning‚Äù</td>
            </tr>
            <tr>
                <td>showerror</td>
                <td>Critical problem</td>
                <td>‚ÄúFailed to save file‚Äù</td>
            </tr>
            <tr>
                <td>askyesno</td>
                <td>Confirmation</td>
                <td>‚ÄúDelete this item?‚Äù</td>
            </tr>
            <tr>
                <td>askokcancel</td>
                <td>Confirm / cancel</td>
                <td>‚ÄúProceed with changes?‚Äù</td>
            </tr>
        </table>
    </div>

    <hr/>

    <h3>Using Message Boxes in Tkinter</h3>

    <b>Step 1: Import Messagebox</b>
    <div style="background-color:#e0e0e0; padding:15px; border-radius:5px;">
        <pre>
from tkinter import messagebox
        </pre>
    </div>

    <b>Step 2: Information Pop-up</b>
    <div style="background-color:#e0e0e0; padding:15px; border-radius:5px;">
        <pre>
messagebox.showinfo(
    "Success",
    "Item added successfully!"
)
        </pre>
    </div>

    <b>Step 3: Warning Pop-up</b>
    <div style="background-color:#e0e0e0; padding:15px; border-radius:5px;">
        <pre>
messagebox.showwarning(
    "Low Stock",
    "Only 2 items left in inventory!"
)
        </pre>
    </div>

    <b>Step 4: Error Pop-up</b>
    <div style="background-color:#e0e0e0; padding:15px; border-radius:5px;">
        <pre>
messagebox.showerror(
    "Error",
    "Failed to connect to database"
)
        </pre>
    </div>

    <hr/>

    <h3>Confirmation Dialogs (User Decision)</h3>

    <div style="background-color:#e0e0e0; padding:15px; border-radius:5px;">
        <pre>
response = messagebox.askyesno(
    "Confirm Delete",
    "Are you sure you want to delete this item?"
)

if response:
    print("Item deleted")
else:
    print("Action cancelled")
        </pre>
    </div>

    <b>Important:</b>
    <div style="background-color:#f0f8ff; padding:10px; border-radius:5px;">
        Confirmation dialogs always return <b>True or False</b>.
    </div>

    <hr/>

    <h3>Dialog Flow Diagram</h3>
    <div style="background-color:#f9f9f9; padding:15px; border-radius:5px; font-family:monospace;">
        User clicks button<br/>
        ‚îî‚îÄ‚îÄ Show popup<br/>
        &nbsp;&nbsp;&nbsp;&nbsp;‚îú‚îÄ‚îÄ User confirms ‚Üí Execute action<br/>
        &nbsp;&nbsp;&nbsp;&nbsp;‚îî‚îÄ‚îÄ User cancels ‚Üí Do nothing
    </div>

    <hr/>

    <h3>Input Dialogs (Getting User Data)</h3>

    <div style="background-color:#e0e0e0; padding:15px; border-radius:5px;">
        <pre>
from tkinter.simpledialog import askstring

name = askstring(
    "Item Name",
    "Enter product name:"
)

if name:
    print("Product:", name)
        </pre>
    </div>

    <b>Use Cases:</b>
    <div style="background-color:#f0f8ff; padding:10px; border-radius:5px;">
        - Rename items<br/>
        - Enter passwords<br/>
        - Quick data capture
    </div>

    <hr/>

    <h3>Custom Pop-up Windows</h3>
    <p>Sometimes built-in dialogs are not enough. We create custom pop-ups using <code>Toplevel</code>.</p>

    <div style="background-color:#e0e0e0; padding:15px; border-radius:5px;">
        <pre>
popup = tk.Toplevel(root)
popup.title("About App")
popup.geometry("300x150")

tk.Label(popup, text="Warehouse Manager v1.0").pack(pady=10)
tk.Button(popup, text="Close", command=popup.destroy).pack()
        </pre>
    </div>

    <b>Difference Table</b>
    <div style="background-color:#f9f9f9; padding:15px; border-radius:5px;">
        <table border="1" cellpadding="8">
            <tr>
                <th>Messagebox</th>
                <th>Custom Popup</th>
            </tr>
            <tr>
                <td>Quick & simple</td>
                <td>Fully customizable</td>
            </tr>
            <tr>
                <td>Limited design</td>
                <td>Custom layout & widgets</td>
            </tr>
            <tr>
                <td>One purpose</td>
                <td>Complex workflows</td>
            </tr>
        </table>
    </div>

    <hr/>

    <h3>Hands-On Exercise: Inventory Alerts</h3>
    <b>Task:</b> Add pop-up logic to your Warehouse Manager.

    <div style="background-color:#f0f8ff; padding:15px; border-radius:5px;">
        <b>Requirements:</b><br/>
        1. Show success popup when item is added<br/>
        2. Show warning if stock &lt; 5<br/>
        3. Confirm before deleting item<br/>
        4. Show error if input is empty<br/>
        5. Add an About popup window
    </div>

    <hr/>

    <h3>Common Mistakes</h3>

    <b>Mistake 1: Ignoring user response</b>
    <div style="background-color:#ffe6e6; padding:15px; border-radius:5px;">
        <pre>
messagebox.askyesno("Delete", "Sure?")
# Response not stored ‚Üí useless
        </pre>
    </div>

    <b>Mistake 2: Blocking logic confusion</b>
    <div style="background-color:#ffe6e6; padding:15px; border-radius:5px;">
        Messageboxes pause code execution until user responds.
    </div>

    <b>Mistake 3: Overusing pop-ups</b>
    <div style="background-color:#ffe6e6; padding:15px; border-radius:5px;">
        Too many pop-ups frustrate users. Use only when necessary.
    </div>

    <hr/>

    <div class="assignment-box">
        <h4>Assignment</h4>
        <p>Upgrade your app using smart pop-ups.</p>

        <ul>
            <li>At least 3 different popup types</li>
            <li>One confirmation dialog</li>
            <li>One custom popup window</li>
            <li>Clean user flow (no spam)</li>
        </ul>

        <p><b>Bonus:</b> Disable buttons unless confirmation is accepted.</p>
    </div>`
            },
            "11-3": {
                icon: "fa-paint-brush",
                title: "Canvas & Images",
                html: `<h1>Week 11, Day 3: Advanced GUI ‚Äì Canvas & Images</h1>
    <p>Today we learn how to <b>draw, visualize, and display images</b> inside GUI applications using the Canvas widget.</p>

    <div class="analogy-box">
        <b>Analogy: Whiteboard üñäÔ∏è</b><br/>
        <ul style="margin-top: 10px;">
            <li><b>Canvas</b> = The whiteboard</li>
            <li><b>Shapes</b> = Drawings on the board</li>
            <li><b>Images</b> = Stickers placed on the board</li>
            <li><b>Coordinates</b> = Where you draw</li>
        </ul>
    </div>

    <h3>Key Topics</h3>
    <ul>
        <li>What Canvas Is</li>
        <li>Canvas Coordinates System</li>
        <li>Drawing Shapes</li>
        <li>Displaying Images</li>
        <li>Practical Visual Use Cases</li>
    </ul>

    <hr/>

    <h3>What Is a Canvas?</h3>
    <div style="background-color:#f0f8ff; padding:15px; border-radius:5px;">
        <p>A Canvas is a <b>free drawing surface</b> where you can:</p>
        <ul>
            <li>Draw shapes</li>
            <li>Place images</li>
            <li>Create charts</li>
            <li>Build custom UI elements</li>
        </ul>
    </div>

    <hr/>

    <h3>Canvas Coordinate System</h3>
    <div style="background-color:#f9f9f9; padding:15px; border-radius:5px; font-family:monospace;">
        (0,0) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂ X<br/>
          ‚îÇ<br/>
          ‚îÇ<br/>
          ‚ñº<br/>
          Y
    </div>

    <small>Top-left corner is (0,0)</small>

    <hr/>

    <h3>Creating a Canvas</h3>
    <div style="background-color:#e0e0e0; padding:15px; border-radius:5px;">
        <pre>
canvas = tk.Canvas(
    root,
    width=400,
    height=300,
    bg="white"
)
canvas.pack()
        </pre>
    </div>

    <hr/>

    <h3>Drawing Shapes</h3>

    <b>Rectangle</b>
    <div style="background-color:#e0e0e0; padding:15px; border-radius:5px;">
        <pre>
canvas.create_rectangle(
    50, 50, 200, 150,
    fill="lightblue",
    outline="black"
)
        </pre>
    </div>

    <b>Circle (Oval)</b>
    <div style="background-color:#e0e0e0; padding:15px; border-radius:5px;">
        <pre>
canvas.create_oval(
    100, 100, 200, 200,
    fill="lightgreen"
)
        </pre>
    </div>

    <b>Line</b>
    <div style="background-color:#e0e0e0; padding:15px; border-radius:5px;">
        <pre>
canvas.create_line(
    0, 0, 300, 200,
    fill="red",
    width=3
)
        </pre>
    </div>

    <hr/>

    <h3>Canvas Shape Summary</h3>
    <div style="background-color:#f9f9f9; padding:15px; border-radius:5px;">
        <table border="1" cellpadding="8">
            <tr>
                <th>Method</th>
                <th>Purpose</th>
            </tr>
            <tr>
                <td>create_rectangle</td>
                <td>Boxes, cards</td>
            </tr>
            <tr>
                <td>create_oval</td>
                <td>Circles, indicators</td>
            </tr>
            <tr>
                <td>create_line</td>
                <td>Graphs, dividers</td>
            </tr>
            <tr>
                <td>create_text</td>
                <td>Custom labels</td>
            </tr>
        </table>
    </div>

    <hr/>

    <h3>Displaying Images</h3>

    <div style="background-color:#ffe6e6; padding:15px; border-radius:5px;">
        <b>Important Rule:</b> Image objects must be stored in a variable, or they disappear!
    </div>

    <div style="background-color:#e0e0e0; padding:15px; border-radius:5px;">
        <pre>
from PIL import Image, ImageTk

img = Image.open("logo.png")
img = img.resize((100, 100))
photo = ImageTk.PhotoImage(img)

canvas.create_image(
    200, 150,
    image=photo
)
        </pre>
    </div>

    <hr/>

    <h3>Real-World Uses</h3>
    <div style="background-color:#f0f8ff; padding:15px; border-radius:5px;">
        <ul>
            <li>App logos</li>
            <li>Charts & dashboards</li>
            <li>Drawing tools</li>
            <li>Game boards</li>
        </ul>
    </div>

    <hr/>

    <h3>Hands-On Exercise</h3>
    <div style="background-color:#f0f8ff; padding:15px; border-radius:5px;">
        <b>Task:</b> Build a dashboard canvas<br/><br/>
        1. Draw a header rectangle<br/>
        2. Add an app logo image<br/>
        3. Draw 3 status circles (green/yellow/red)<br/>
        4. Add text labels
    </div>

    <hr/>

    <div class="assignment-box">
        <h4>Assignment</h4>
        <p>Create a visual dashboard using Canvas.</p>
        <ul>
            <li>At least 3 shapes</li>
            <li>At least 1 image</li>
            <li>Use correct coordinates</li>
        </ul>
        <p><b>Bonus:</b> Change colors dynamically.</p>
    </div>`
            },
            "11-4": {
                icon: "fa-keyboard",
                title: "Keyboard Bindings & Shortcuts",
                html: `<h1>Week 11, Day 4: Advanced GUI ‚Äì Keyboard Bindings & Shortcuts</h1>
    <p>Today we turn our app into a <b>power-user tool</b> by controlling it with the keyboard.</p>

    <div class="analogy-box">
        <b>Analogy: Video Games üéÆ</b><br/>
        <ul style="margin-top: 10px;">
            <li><b>Mouse</b> = Casual player</li>
            <li><b>Keyboard</b> = Pro player</li>
            <li><b>Shortcuts</b> = Special moves</li>
        </ul>
    </div>

    <h3>Key Topics</h3>
    <ul>
        <li>Key Events</li>
        <li>Binding Keys</li>
        <li>Keyboard Shortcuts</li>
        <li>Event Objects</li>
        <li>Accessibility Benefits</li>
    </ul>

    <hr/>

    <h3>What Is Key Binding?</h3>
    <div style="background-color:#f0f8ff; padding:15px; border-radius:5px;">
        <p>Key binding allows your app to <b>listen and react</b> to keyboard input.</p>
    </div>

    <hr/>

    <h3>Binding a Key</h3>
    <div style="background-color:#e0e0e0; padding:15px; border-radius:5px;">
        <pre>
def say_hello(event):
    print("Hello!")

root.bind("&lt;h&gt;", say_hello)
        </pre>
    </div>

    <small>Pressing <b>H</b> triggers the function.</small>

    <hr/>

    <h3>Special Keys</h3>
    <div style="background-color:#f9f9f9; padding:15px; border-radius:5px;">
        <table border="1" cellpadding="8">
            <tr>
                <th>Key</th>
                <th>Binding</th>
            </tr>
            <tr>
                <td>Enter</td>
                <td>&lt;Return&gt;</td>
            </tr>
            <tr>
                <td>Escape</td>
                <td>&lt;Escape&gt;</td>
            </tr>
            <tr>
                <td>Arrow Up</td>
                <td>&lt;Up&gt;</td>
            </tr>
            <tr>
                <td>Arrow Down</td>
                <td>&lt;Down&gt;</td>
            </tr>
        </table>
    </div>

    <hr/>

    <h3>Shortcut Keys (Ctrl / Alt)</h3>
    <div style="background-color:#e0e0e0; padding:15px; border-radius:5px;">
        <pre>
root.bind("&lt;Control-s&gt;", lambda e: print("Saved"))
root.bind("&lt;Control-q&gt;", lambda e: root.quit())
        </pre>
    </div>

    <hr/>

    <h3>Understanding the Event Object</h3>
    <div style="background-color:#e0e0e0; padding:15px; border-radius:5px;">
        <pre>
def key_info(event):
    print("Key:", event.keysym)
    print("Key code:", event.keycode)

root.bind("&lt;Key&gt;", key_info)
        </pre>
    </div>

    <hr/>

    <h3>Event Flow Diagram</h3>
    <div style="background-color:#f9f9f9; padding:15px; font-family:monospace;">
        Key Pressed<br/>
        ‚îî‚îÄ‚îÄ Event Created<br/>
        &nbsp;&nbsp;&nbsp;&nbsp;‚îî‚îÄ‚îÄ Bound Function Executes
    </div>

    <hr/>

    <h3>Practical Examples</h3>
    <div style="background-color:#f0f8ff; padding:15px;">
        <ul>
            <li>Enter key submits a form</li>
            <li>Esc closes popup</li>
            <li>Ctrl+S saves data</li>
            <li>Arrow keys navigate lists</li>
        </ul>
    </div>

    <hr/>

    <h3>Hands-On Exercise</h3>
    <div style="background-color:#f0f8ff; padding:15px;">
        <b>Task:</b> Add keyboard control to your app<br/><br/>
        1. Ctrl+S ‚Üí Save<br/>
        2. Ctrl+Q ‚Üí Exit<br/>
        3. Enter ‚Üí Submit form<br/>
        4. Esc ‚Üí Close popup
    </div>

    <hr/>

    <h3>Common Mistakes</h3>
    <div style="background-color:#ffe6e6; padding:15px;">
        <ul>
            <li>Forgetting the <code>event</code> parameter</li>
            <li>Binding keys to the wrong widget</li>
            <li>Overlapping shortcuts</li>
        </ul>
    </div>

    <hr/>

    <div class="assignment-box">
        <h4>Week 11 Final Assignment</h4>
        <p>Upgrade your app to be keyboard-friendly.</p>
        <ul>
            <li>At least 4 shortcuts</li>
            <li>One popup closed by Esc</li>
            <li>One form submitted by Enter</li>
        </ul>
        <p><b>Bonus:</b> Display pressed key names on screen.</p>
    </div>`
            },

            "12-1": {
    "icon": "fa-database",
    "title": "Introduction to Databases & SQLite",
    "html": `<h1>Week 12, Day 1: Connecting to SQLite</h1>
<p>Today we transition from text files to real databases, learn SQL basics, and connect Python to SQLite.</p>

<div class="analogy-box">
    <b>Analogy: The Digital Filing Cabinet üìÇ</b><br/>
    
    Database = Filing Cabinet<br/>
    Table = File Folder<br/>
    Row = One sheet of paper (record)<br/>
    Column = Field on the sheet (name, age, etc.)<br/>
    SQL = Instructions to the filing clerk<br/>
    Connection = Opening the cabinet<br/>
    Cursor = Your hand pointing at a record
</div>

<h3>Why Use a Database?</h3>
<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 15px 0;">
  <div style="background: #e3f2fd; padding: 15px; border-radius: 10px;">
    <h4>üìÅ Text/CSV Files</h4>
    <ul>
      <li>Simple for small data</li>
      <li>No structure enforcement</li>
      <li>Slow for large data</li>
      <li>No built-in search</li>
      <li>Concurrency issues</li>
      <li>No data validation</li>
    </ul>
  </div>
  <div style="background: #f3e5f5; padding: 15px; border-radius: 10px;">
    <h4>üóÉÔ∏è Databases (SQLite)</h4>
    <ul>
      <li>Structured tables</li>
      <li>Fast querying</li>
      <li>Data integrity</li>
      <li>Concurrent access</li>
      <li>Built-in security</li>
      <li>Scalable</li>
    </ul>
  </div>
</div>

<h3>SQLite vs Other Databases</h3>
<table style="width:100%; border-collapse: collapse; margin: 15px 0;">
  <tr style="background: #4A90E2; color: white;">
    <th style="padding: 10px;">Feature</th>
    <th style="padding: 10px;">SQLite</th>
    <th style="padding: 10px;">MySQL</th>
    <th style="padding: 10px;">PostgreSQL</th>
  </tr>
  <tr style="background: #f8f9fa;">
    <td style="padding: 8px; border: 1px solid #ddd;">Type</td>
    <td style="padding: 8px; border: 1px solid #ddd;">File-based</td>
    <td style="padding: 8px; border: 1px solid #ddd;">Server-based</td>
    <td style="padding: 8px; border: 1px solid #ddd;">Server-based</td>
  </tr>
  <tr style="background: white;">
    <td style="padding: 8px; border: 1px solid #ddd;">Setup</td>
    <td style="padding: 8px; border: 1px solid #ddd;">Zero configuration</td>
    <td style="padding: 8px; border: 1px solid #ddd;">Requires server</td>
    <td style="padding: 8px; border: 1px solid #ddd;">Requires server</td>
  </tr>
  <tr style="background: #f8f9fa;">
    <td style="padding: 8px; border: 1px solid #ddd;">Portability</td>
    <td style="padding: 8px; border: 1px solid #ddd;">Single file</td>
    <td style="padding: 8px; border: 1px solid #ddd;">Database server</td>
    <td style="padding: 8px; border: 1px solid #ddd;">Database server</td>
  </tr>
  <tr style="background: white;">
    <td style="padding: 8px; border: 1px solid #ddd;">Best for</td>
    <td style="padding: 8px; border: 1px solid #ddd;">Desktop apps, mobile, small projects</td>
    <td style="padding: 8px; border: 1px solid #ddd;">Web apps, medium projects</td>
    <td style="padding: 8px; border: 1px solid #ddd;">Complex apps, large data</td>
  </tr>
</table>

<h3>Installing SQLite in Python</h3>
<pre style="background: #36454f; color: white; padding: 15px; border-radius: 5px;">
# SQLite is built into Python!
import sqlite3

# Connect to a database (creates if doesn't exist)
conn = sqlite3.connect('warehouse.db')
cursor = conn.cursor()

print("‚úÖ Connected to SQLite database!")
</pre>

<h3>Creating Your First Database Table</h3>
<pre style="background: #f1f1f1; padding: 15px; border-radius: 5px;">
import sqlite3

def create_products_table():
    conn = sqlite3.connect('warehouse.db')
    cursor = conn.cursor()
    
    # SQL to create products table
    create_table_sql = """
    CREATE TABLE IF NOT EXISTS products (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        sku TEXT UNIQUE NOT NULL,
        name TEXT NOT NULL,
        category TEXT,
        price REAL CHECK(price >= 0),
        stock INTEGER DEFAULT 0 CHECK(stock >= 0),
        created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
    )
    """
    
    cursor.execute(create_table_sql)
    conn.commit()
    print("‚úÖ Products table created successfully!")
    conn.close()

# Run it
create_products_table()
</pre>

<h3>Basic SQL Operations (CRUD)</h3>
<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 15px 0;">
  <div style="background: #e8f5e8; padding: 15px; border-radius: 10px;">
    <h4>üìù CREATE - Insert Data</h4>
    <pre style="background: white; padding: 10px;">
INSERT INTO products 
(sku, name, category, price, stock)
VALUES 
('LAP001', 'Gaming Laptop', 'Electronics', 1299.99, 15)
    </pre>
  </div>
  <div style="background: #fff3cd; padding: 15px; border-radius: 10px;">
    <h4>üëÅÔ∏è READ - Select Data</h4>
    <pre style="background: white; padding: 10px;">
SELECT * FROM products
WHERE category = 'Electronics'
ORDER BY price DESC
    </pre>
  </div>
  <div style="background: #ffe6e6; padding: 15px; border-radius: 10px;">
    <h4>‚úèÔ∏è UPDATE - Modify Data</h4>
    <pre style="background: white; padding: 10px;">
UPDATE products 
SET price = 1199.99, stock = stock - 1
WHERE sku = 'LAP001'
    </pre>
  </div>
  <div style="background: #e6f3ff; padding: 15px; border-radius: 10px;">
    <h4>üóëÔ∏è DELETE - Remove Data</h4>
    <pre style="background: white; padding: 10px;">
DELETE FROM products 
WHERE stock = 0
    </pre>
  </div>
</div>

<h3>Hands-On: Complete Database Manager</h3>
<pre style="background: #36454f; color: white; padding: 15px; border-radius: 5px;">
import sqlite3

class WarehouseDB:
    def __init__(self, db_name='warehouse.db'):
        self.conn = sqlite3.connect(db_name)
        self.cursor = self.conn.cursor()
        self.create_tables()
    
    def create_tables(self):
        # Products table
        self.cursor.execute('''
        CREATE TABLE IF NOT EXISTS products (
            id INTEGER PRIMARY KEY AUTOINCREMENT,
            sku TEXT UNIQUE NOT NULL,
            name TEXT NOT NULL,
            category TEXT,
            price REAL,
            stock INTEGER DEFAULT 0,
            created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
        )
        ''')
        
        # Sales table (for tracking)
        self.cursor.execute('''
        CREATE TABLE IF NOT EXISTS sales (
            id INTEGER PRIMARY KEY AUTOINCREMENT,
            product_sku TEXT,
            quantity INTEGER,
            sale_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
            FOREIGN KEY (product_sku) REFERENCES products(sku)
        )
        ''')
        
        self.conn.commit()
        print("üì¶ Database tables ready!")
    
    def add_product(self, sku, name, category, price, stock=0):
        try:
            self.cursor.execute('''
            INSERT INTO products (sku, name, category, price, stock)
            VALUES (?, ?, ?, ?, ?)
            ''', (sku, name, category, price, stock))
            self.conn.commit()
            return True
        except sqlite3.IntegrityError:
            print(f"‚ö†Ô∏è Product with SKU {sku} already exists!")
            return False
    
    def get_all_products(self):
        self.cursor.execute('SELECT * FROM products ORDER BY name')
        return self.cursor.fetchall()
    
    def search_products(self, keyword):
        self.cursor.execute('''
        SELECT * FROM products 
        WHERE name LIKE ? OR sku LIKE ? OR category LIKE ?
        ''', (f'%{keyword}%', f'%{keyword}%', f'%{keyword}%'))
        return self.cursor.fetchall()
    
    def close(self):
        self.conn.close()

# Test it
db = WarehouseDB()
db.add_product('LAP001', 'Gaming Laptop', 'Electronics', 1299.99, 15)
db.add_product('MOUSE01', 'Wireless Mouse', 'Accessories', 29.99, 50)
db.add_product('KEYB01', 'Mechanical Keyboard', 'Accessories', 89.99, 25)

print("üìã All Products:")
for product in db.get_all_products():
    print(product)

db.close()
</pre>

<h3>Today's Exercises</h3>
<div style="background: #f0f8ff; padding: 15px; border-radius: 10px;">
  <b>Exercise 1: Library Database (60 minutes)</b>
  <p>Create a library management system with:</p>
  <ul>
    <li>Books table (id, isbn, title, author, genre, year, available)</li>
    <li>Members table (id, name, email, join_date)</li>
    <li>Borrowings table (track who borrowed what and when)</li>
    <li>Functions to add books, register members, borrow/return books</li>
  </ul>
  
  <b>Exercise 2: Student Grades Database (60 minutes)</b>
  <p>Create a student grading system:</p>
  <ul>
    <li>Students table</li>
    <li>Courses table</li>
    <li>Grades table (links student + course + grade)</li>
    <li>Calculate GPA per student</li>
    <li>Find top performers</li>
    <li>Generate report cards</li>
  </ul>
</div>

<h3>Homework: Restaurant Menu Database</h3>
<div style="background: #fff0e6; padding: 15px; border-radius: 10px;">
  <p>Create a restaurant management database with:</p>
  <ul>
    <li>Menu items (name, category, price, calories, vegetarian flag)</li>
    <li>Orders table</li>
    <li>Order items (linking orders to menu items)</li>
    <li>Calculate total bill</li>
    <li>Most popular items report</li>
    <li>Daily sales summary</li>
  </ul>
  <p><b>Bonus:</b> Add employees table with shifts and salaries.</p>
</div>
`
  },
            "12-2": {
    "icon": "fa-code",
    "title": "Executing SQL from Python GUI",
    "html": `<h1>Week 12, Day 2: GUI + Database Integration</h1>
<p>Today we connect Tkinter GUI to SQLite, create data entry forms, and build a complete CRUD application.</p>

<div class="analogy-box">
    <b>Analogy: Restaurant Order System üçΩÔ∏è</b><br/>
    
    GUI = Menu & Order Form<br/>
    Database = Kitchen & Inventory<br/>
    SQL Commands = Order Tickets<br/>
    User Input = Customer Requests<br/>
    Data Display = Order Summary Screen<br/>
    Error Handling = "Sorry, we're out of that"
</div>

<h3>Designing the GUI Database App</h3>
<div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 15px; margin: 15px 0;">
  <div style="background: #e3f2fd; padding: 15px; border-radius: 10px; text-align: center;">
    <h4>üìã 1. Data Entry Form</h4>
    <p>Labels + Entry fields<br>Add/Update buttons<br>Input validation</p>
  </div>
  <div style="background: #f3e5f5; padding: 15px; border-radius: 10px; text-align: center;">
    <h4>üìä 2. Data Display</h4>
    <p>Treeview table<br>Search/filter<br>Sort columns</p>
  </div>
  <div style="background: #e8f5e8; padding: 15px; border-radius: 10px; text-align: center;">
    <h4>‚öôÔ∏è 3. Operations</h4>
    <p>CRUD buttons<br>Import/Export<br>Reports</p>
  </div>
</div>

<h3>Complete Warehouse GUI Application</h3>
<pre style="background: #36454f; color: white; padding: 15px; border-radius: 5px; max-height: 600px; overflow-y: auto;">
import tkinter as tk
from tkinter import ttk, messagebox
import sqlite3
from datetime import datetime

class WarehouseApp:
    def __init__(self, root):
        self.root = root
        self.root.title("üì¶ Warehouse Management System")
        self.root.geometry("1200x700")
        
        # Database connection
        self.conn = sqlite3.connect('warehouse.db')
        self.cursor = self.conn.cursor()
        self.create_table()
        
        # Style
        self.setup_styles()
        
        # Layout
        self.setup_layout()
        
        # Load initial data
        self.load_products()
        
    def setup_styles(self):
        style = ttk.Style()
        style.theme_use('clam')
        
    def setup_layout(self):
        # Top Frame - Title and Stats
        top_frame = ttk.Frame(self.root, padding="10")
        top_frame.grid(row=0, column=0, sticky=(tk.W, tk.E))
        
        ttk.Label(top_frame, text="üè¨ Warehouse Management System", 
                 font=('Arial', 20, 'bold')).grid(row=0, column=0, sticky=tk.W)
        
        # Stats Frame
        stats_frame = ttk.Frame(top_frame)
        stats_frame.grid(row=1, column=0, pady=10, sticky=tk.W)
        
        self.total_items_var = tk.StringVar(value="Total Items: 0")
        self.total_value_var = tk.StringVar(value="Total Value: $0.00")
        
        ttk.Label(stats_frame, textvariable=self.total_items_var).grid(row=0, column=0, padx=20)
        ttk.Label(stats_frame, textvariable=self.total_value_var).grid(row=0, column=1, padx=20)
        
        # Left Frame - Add/Edit Form
        left_frame = ttk.LabelFrame(self.root, text="Product Details", padding="15")
        left_frame.grid(row=1, column=0, padx=10, pady=10, sticky=(tk.N, tk.W, tk.E))
        
        # Form Fields
        fields = ['SKU:', 'Name:', 'Category:', 'Price:', 'Stock:']
        self.entries = {}
        
        for i, field in enumerate(fields):
            ttk.Label(left_frame, text=field).grid(row=i, column=0, sticky=tk.W, pady=5)
            entry = ttk.Entry(left_frame, width=30)
            entry.grid(row=i, column=1, pady=5, padx=(0, 10))
            self.entries[field[:-1].lower()] = entry
        
        # Buttons
        button_frame = ttk.Frame(left_frame)
        button_frame.grid(row=len(fields), column=0, columnspan=2, pady=15)
        
        ttk.Button(button_frame, text="‚ûï Add Product", 
                  command=self.add_product).pack(side=tk.LEFT, padx=5)
        ttk.Button(button_frame, text="‚úèÔ∏è Update", 
                  command=self.update_product).pack(side=tk.LEFT, padx=5)
        ttk.Button(button_frame, text="üóëÔ∏è Delete", 
                  command=self.delete_product).pack(side=tk.LEFT, padx=5)
        ttk.Button(button_frame, text="üîÑ Clear", 
                  command=self.clear_form).pack(side=tk.LEFT, padx=5)
        
        # Search Frame
        search_frame = ttk.Frame(left_frame)
        search_frame.grid(row=len(fields)+1, column=0, columnspan=2, pady=10, sticky=(tk.W, tk.E))
        
        ttk.Label(search_frame, text="Search:").pack(side=tk.LEFT)
        self.search_var = tk.StringVar()
        search_entry = ttk.Entry(search_frame, textvariable=self.search_var, width=20)
        search_entry.pack(side=tk.LEFT, padx=5)
        search_entry.bind('<KeyRelease>', self.on_search)
        
        # Right Frame - Product List
        right_frame = ttk.LabelFrame(self.root, text="Product Inventory", padding="10")
        right_frame.grid(row=1, column=1, padx=10, pady=10, sticky=(tk.N, tk.S, tk.W, tk.E))
        
        # Treeview
        columns = ('ID', 'SKU', 'Name', 'Category', 'Price', 'Stock', 'Added')
        self.tree = ttk.Treeview(right_frame, columns=columns, show='headings', height=20)
        
        # Define headings
        width_map = {'ID': 50, 'SKU': 100, 'Name': 200, 'Category': 120, 
                    'Price': 80, 'Stock': 60, 'Added': 120}
        
        for col in columns:
            self.tree.heading(col, text=col)
            self.tree.column(col, width=width_map.get(col, 100))
        
        # Scrollbar
        scrollbar = ttk.Scrollbar(right_frame, orient=tk.VERTICAL, command=self.tree.yview)
        self.tree.configure(yscrollcommand=scrollbar.set)
        
        # Grid tree and scrollbar
        self.tree.grid(row=0, column=0, sticky=(tk.N, tk.S, tk.W, tk.E))
        scrollbar.grid(row=0, column=1, sticky=(tk.N, tk.S))
        
        # Bind selection
        self.tree.bind('<<TreeviewSelect>>', self.on_item_select)
        
        # Configure grid weights
        self.root.columnconfigure(1, weight=1)
        self.root.rowconfigure(1, weight=1)
        right_frame.columnconfigure(0, weight=1)
        right_frame.rowconfigure(0, weight=1)
    
    def create_table(self):
        self.cursor.execute('''
        CREATE TABLE IF NOT EXISTS products (
            id INTEGER PRIMARY KEY AUTOINCREMENT,
            sku TEXT UNIQUE NOT NULL,
            name TEXT NOT NULL,
            category TEXT,
            price REAL CHECK(price >= 0),
            stock INTEGER DEFAULT 0 CHECK(stock >= 0),
            created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
        )
        ''')
        self.conn.commit()
    
    def load_products(self):
        # Clear tree
        for item in self.tree.get_children():
            self.tree.delete(item)
        
        # Load from database
        self.cursor.execute('SELECT * FROM products ORDER BY name')
        products = self.cursor.fetchall()
        
        # Insert into tree
        for product in products:
            self.tree.insert('', tk.END, values=product)
        
        # Update stats
        self.update_stats()
    
    def update_stats(self):
        self.cursor.execute('SELECT COUNT(*), SUM(price * stock) FROM products')
        count, total_value = self.cursor.fetchone()
        
        if total_value is None:
            total_value = 0
        
        self.total_items_var.set(f"Total Items: {count}")
        self.total_value_var.set(f"Total Value: \${total_value:,.2f}")
    
    def add_product(self):
        try:
            sku = self.entries['sku'].get().strip()
            name = self.entries['name'].get().strip()
            category = self.entries['category'].get().strip()
            price = float(self.entries['price'].get())
            stock = int(self.entries['stock'].get())
            
            if not sku or not name:
                messagebox.showwarning("Input Error", "SKU and Name are required!")
                return
            
            self.cursor.execute('''
            INSERT INTO products (sku, name, category, price, stock)
            VALUES (?, ?, ?, ?, ?)
            ''', (sku, name, category, price, stock))
            
            self.conn.commit()
            self.load_products()
            self.clear_form()
            messagebox.showinfo("Success", f"Product '{name}' added successfully!")
            
        except ValueError:
            messagebox.showerror("Input Error", "Please enter valid numbers for price and stock!")
        except sqlite3.IntegrityError:
            messagebox.showerror("Database Error", f"SKU '{sku}' already exists!")
        except Exception as e:
            messagebox.showerror("Error", f"An error occurred: {str(e)}")
    
    def update_product(self):
        selected = self.tree.selection()
        if not selected:
            messagebox.showwarning("Selection Error", "Please select a product to update!")
            return
        
        try:
            item_id = self.tree.item(selected[0])['values'][0]
            sku = self.entries['sku'].get().strip()
            name = self.entries['name'].get().strip()
            category = self.entries['category'].get().strip()
            price = float(self.entries['price'].get())
            stock = int(self.entries['stock'].get())
            
            self.cursor.execute('''
            UPDATE products 
            SET sku=?, name=?, category=?, price=?, stock=?
            WHERE id=?
            ''', (sku, name, category, price, stock, item_id))
            
            self.conn.commit()
            self.load_products()
            messagebox.showinfo("Success", "Product updated successfully!")
            
        except ValueError:
            messagebox.showerror("Input Error", "Please enter valid numbers!")
    
    def delete_product(self):
        selected = self.tree.selection()
        if not selected:
            messagebox.showwarning("Selection Error", "Please select a product to delete!")
            return
        
        if messagebox.askyesno("Confirm Delete", "Are you sure you want to delete this product?"):
            item_id = self.tree.item(selected[0])['values'][0]
            
            self.cursor.execute('DELETE FROM products WHERE id=?', (item_id,))
            self.conn.commit()
            self.load_products()
            self.clear_form()
            messagebox.showinfo("Success", "Product deleted successfully!")
    
    def clear_form(self):
        for entry in self.entries.values():
            entry.delete(0, tk.END)
    
    def on_item_select(self, event):
        selected = self.tree.selection()
        if not selected:
            return
        
        values = self.tree.item(selected[0])['values']
        
        # Fill form with selected item
        fields = ['sku', 'name', 'category', 'price', 'stock']
        for field, value in zip(fields, values[1:6]):  # Skip ID and created_at
            if field in self.entries:
                self.entries[field].delete(0, tk.END)
                self.entries[field].insert(0, str(value))
    
    def on_search(self, event):
        search_term = self.search_var.get().strip()
        
        # Clear tree
        for item in self.tree.get_children():
            self.tree.delete(item)
        
        if search_term:
            self.cursor.execute('''
            SELECT * FROM products 
            WHERE name LIKE ? OR sku LIKE ? OR category LIKE ?
            ORDER BY name
            ''', (f'%{search_term}%', f'%{search_term}%', f'%{search_term}%'))
        else:
            self.cursor.execute('SELECT * FROM products ORDER BY name')
        
        products = self.cursor.fetchall()
        
        for product in products:
            self.tree.insert('', tk.END, values=product)
    
    def __del__(self):
        if hasattr(self, 'conn'):
            self.conn.close()

# Run the application
if __name__ == "__main__":
    root = tk.Tk()
    app = WarehouseApp(root)
    root.mainloop()
</pre>

<h3>Key Components Explained</h3>
<div style="background: #f0f8ff; padding: 15px; border-radius: 10px;">
  <h4>üîó Database Connection Pattern</h4>
  <pre style="background: white; padding: 10px;">
# Always follow this pattern:
1. Connect to database
2. Create cursor
3. Execute SQL
4. Commit changes (for INSERT/UPDATE/DELETE)
5. Close connection when done
  </pre>
  
  <h4>üìù Form Validation</h4>
  <pre style="background: white; padding: 10px;">
# Validate before database operations:
1. Check required fields not empty
2. Validate data types (int, float)
3. Check for duplicates
4. Handle database constraints
5. Provide user-friendly error messages
  </pre>
  
  <h4>üîÑ Real-time Updates</h4>
  <pre style="background: white; padding: 10px;">
# After database operations:
1. Clear and reload Treeview
2. Update statistics
3. Clear form fields
4. Show success/error messages
  </pre>
</div>

<h3>Today's Exercises</h3>
<div style="background: #fff0e6; padding: 15px; border-radius: 10px;">
  <b>Exercise 1: Enhance Warehouse App (60 minutes)</b>
  <ul>
    <li>Add a "Categories" table and dropdown</li>
    <li>Add image upload for products</li>
    <li>Add "Low Stock" warning (stock < 5)</li>
    <li>Add export to CSV/Excel feature</li>
    <li>Add barcode generator for SKU</li>
  </ul>
  
  <b>Exercise 2: Library Management GUI (60 minutes)</b>
  <p>Convert yesterday's library database to GUI:</p>
  <ul>
    <li>Book entry form</li>
    <li>Member registration</li>
    <li>Borrow/return system</li>
    <li>Search by title/author</li>
    <li>Overdue books report</li>
  </ul>
</div>

<h3>Homework: Complete CRM System</h3>
<div style="background: #e8f5e8; padding: 15px; border-radius: 10px;">
  <p>Build a Customer Relationship Management (CRM) system:</p>
  <ul>
    <li><b>Customers table:</b> name, email, phone, company</li>
    <li><b>Contacts table:</b> interaction history</li>
    <li><b>Sales table:</b> opportunities, amounts</li>
    <li><b>Features:</b>
      <ul>
        <li>Add/edit/delete customers</li>
        <li>Log interactions</li>
        <li>Track sales pipeline</li>
        <li>Generate reports</li>
        <li>Email integration (simulated)</li>
      </ul>
    </li>
  </ul>
</div>
`
  },
            "12-3": {
    "icon": "fa-table",
    "title": "Displaying Database Records in GUI Tables",
    "html": `<h1>Week 12, Day 3: Advanced Data Display & Treeview</h1>
<p>Today we master Treeview widgets, implement advanced search, sorting, and create professional data displays.</p>

<div class="analogy-box">
    <b>Analogy: The Smart Spreadsheet üìä</b><br/>
    
    Treeview = Excel spreadsheet<br/>
    Columns = Sheet columns<br/>
    Rows = Data rows<br/>
    Sorting = Click column headers<br/>
    Filtering = Search boxes<br/>
    Styling = Conditional formatting<br/>
    Selection = Highlighting rows
</div>

<h3>Advanced Treeview Features</h3>
<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 15px 0;">
  <div style="background: #e3f2fd; padding: 15px; border-radius: 10px;">
    <h4>üé® Styling & Formatting</h4>
    <ul>
      <li>Alternating row colors</li>
      <li>Column width auto-adjust</li>
      <li>Cell formatting (currency, dates)</li>
      <li>Conditional coloring</li>
      <li>Font customization</li>
      <li>Tooltips on hover</li>
    </ul>
  </div>
  <div style="background: #f3e5f5; padding: 15px; border-radius: 10px;">
    <h4>üîç Advanced Search</h4>
    <ul>
      <li>Multi-field search</li>
      <li>Range filters (price, date)</li>
      <li>Category dropdown filters</li>
      <li>Real-time filtering</li>
      <li>Save search queries</li>
      <li>Export filtered results</li>
    </ul>
  </div>
</div>

<h3>Professional Treeview Implementation</h3>
<pre style="background: #36454f; color: white; padding: 15px; border-radius: 5px; max-height: 600px; overflow-y: auto;">
import tkinter as tk
from tkinter import ttk, messagebox
from datetime import datetime
import sqlite3

class AdvancedTreeviewDemo:
    def __init__(self, root):
        self.root = root
        self.root.title("Advanced Treeview Demo")
        self.root.geometry("1400x800")
        
        # Sample data
        self.products = [
            ('P001', 'Gaming Laptop', 'Electronics', 1299.99, 15, '2024-01-15'),
            ('P002', 'Wireless Mouse', 'Accessories', 29.99, 50, '2024-01-10'),
            ('P003', 'Mechanical Keyboard', 'Accessories', 89.99, 25, '2024-01-12'),
            ('P004', '4K Monitor', 'Electronics', 399.99, 8, '2024-01-05'),
            ('P005', 'USB-C Hub', 'Accessories', 49.99, 40, '2024-01-18'),
            ('P006', 'Laptop Stand', 'Accessories', 34.99, 30, '2024-01-20'),
            ('P007', 'Webcam HD', 'Electronics', 79.99, 20, '2024-01-08'),
            ('P008', 'Noise Cancelling Headphones', 'Electronics', 199.99, 12, '2024-01-22'),
            ('P009', 'External SSD 1TB', 'Electronics', 129.99, 18, '2024-01-14'),
            ('P010', 'Ergonomic Chair', 'Furniture', 299.99, 5, '2024-01-25'),
        ]
        
        self.setup_ui()
        self.populate_treeview()
    
    def setup_ui(self):
        # Create main frames
        control_frame = ttk.Frame(self.root, padding="10")
        control_frame.grid(row=0, column=0, columnspan=2, sticky=(tk.W, tk.E))
        
        tree_frame = ttk.Frame(self.root, padding="10")
        tree_frame.grid(row=1, column=0, columnspan=2, sticky=(tk.N, tk.S, tk.W, tk.E))
        
        # Configure grid weights
        self.root.columnconfigure(0, weight=1)
        self.root.rowconfigure(1, weight=1)
        tree_frame.rowconfigure(0, weight=1)
        tree_frame.columnconfigure(0, weight=1)
        
        # Search Controls
        ttk.Label(control_frame, text="Search:").grid(row=0, column=0, padx=(0, 5))
        self.search_var = tk.StringVar()
        search_entry = ttk.Entry(control_frame, textvariable=self.search_var, width=30)
        search_entry.grid(row=0, column=1, padx=(0, 20))
        search_entry.bind('<KeyRelease>', self.on_search)
        
        # Category Filter
        ttk.Label(control_frame, text="Category:").grid(row=0, column=2, padx=(20, 5))
        self.category_var = tk.StringVar(value="All")
        categories = ["All", "Electronics", "Accessories", "Furniture"]
        category_combo = ttk.Combobox(control_frame, textvariable=self.category_var, 
                                     values=categories, state="readonly", width=15)
        category_combo.grid(row=0, column=3, padx=(0, 20))
        category_combo.bind('<<ComboboxSelected>>', self.on_filter)
        
        # Price Range Filter
        ttk.Label(control_frame, text="Price Range:").grid(row=0, column=4, padx=(20, 5))
        
        self.min_price_var = tk.StringVar(value="0")
        self.max_price_var = tk.StringVar(value="9999")
        
        ttk.Entry(control_frame, textvariable=self.min_price_var, width=8).grid(row=0, column=5, padx=(0, 5))
        ttk.Label(control_frame, text="to").grid(row=0, column=6)
        ttk.Entry(control_frame, textvariable=self.max_price_var, width=8).grid(row=0, column=7, padx=(5, 20))
        
        ttk.Button(control_frame, text="Apply Price Filter", 
                  command=self.on_price_filter).grid(row=0, column=8, padx=(0, 20))
        
        # Sort Controls
        ttk.Label(control_frame, text="Sort By:").grid(row=0, column=9, padx=(20, 5))
        self.sort_var = tk.StringVar(value="Name")
        sort_combo = ttk.Combobox(control_frame, textvariable=self.sort_var,
                                 values=["Name", "Category", "Price", "Stock", "Date"], 
                                 state="readonly", width=12)
        sort_combo.grid(row=0, column=10, padx=(0, 5))
        sort_combo.bind('<<ComboboxSelected>>', self.on_sort)
        
        # Action Buttons
        ttk.Button(control_frame, text="üîÑ Refresh", 
                  command=self.refresh_data).grid(row=0, column=11, padx=(20, 5))
        ttk.Button(control_frame, text="üìä Stats", 
                  command=self.show_stats).grid(row=0, column=12, padx=5)
        ttk.Button(control_frame, text="üì§ Export CSV", 
                  command=self.export_csv).grid(row=0, column=13, padx=5)
        
        # Create Treeview with style
        self.create_styled_treeview(tree_frame)
    
    def create_styled_treeview(self, parent):
        # Define columns
        columns = ('sku', 'name', 'category', 'price', 'stock', 'date')
        
        # Create Treeview with custom style
        style = ttk.Style()
        style.configure("Custom.Treeview", 
                       background="#f0f0f0",
                       fieldbackground="#f0f0f0",
                       foreground="black",
                       rowheight=25)
        
        style.configure("Custom.Treeview.Heading",
                       background="#4A90E2",
                       foreground="white",
                       relief="flat",
                       font=('Arial', 10, 'bold'))
        
        style.map("Custom.Treeview.Heading",
                 background=[('active', '#357ABD')])
        
        # Create Treeview
        self.tree = ttk.Treeview(parent, columns=columns, show='headings',
                                style="Custom.Treeview", height=20)
        
        # Define headings
        headings = {
            'sku': ('SKU', 100),
            'name': ('Product Name', 250),
            'category': ('Category', 120),
            'price': ('Price', 100),
            'stock': ('Stock', 80),
            'date': ('Added Date', 120)
        }
        
        for col, (text, width) in headings.items():
            self.tree.heading(col, text=text, 
                             command=lambda c=col: self.sort_by_column(c, False))
            self.tree.column(col, width=width, anchor='center')
        
        # Add tag for alternating colors
        self.tree.tag_configure('oddrow', background='#f8f9fa')
        self.tree.tag_configure('evenrow', background='white')
        self.tree.tag_configure('lowstock', background='#fff3cd')  # Warning for low stock
        self.tree.tag_configure('nostock', background='#f8d7da')   # Danger for no stock
        
        # Add scrollbars
        v_scrollbar = ttk.Scrollbar(parent, orient=tk.VERTICAL, command=self.tree.yview)
        h_scrollbar = ttk.Scrollbar(parent, orient=tk.HORIZONTAL, command=self.tree.xview)
        self.tree.configure(yscrollcommand=v_scrollbar.set, xscrollcommand=h_scrollbar.set)
        
        # Grid layout
        self.tree.grid(row=0, column=0, sticky=(tk.N, tk.S, tk.W, tk.E))
        v_scrollbar.grid(row=0, column=1, sticky=(tk.N, tk.S))
        h_scrollbar.grid(row=1, column=0, sticky=(tk.W, tk.E))
        
        # Bind events
        self.tree.bind('<Button-1>', self.on_tree_click)
        self.tree.bind('<Double-Button-1>', self.on_tree_double_click)
        
        # Tooltip
        self.tooltip = None
        self.tree.bind('<Motion>', self.show_tooltip)
        self.tree.bind('<Leave>', self.hide_tooltip)
    
    def populate_treeview(self):
        # Clear existing items
        for item in self.tree.get_children():
            self.tree.delete(item)
        
        # Add data with alternating colors
        for i, product in enumerate(self.products):
            tags = ('evenrow',) if i % 2 == 0 else ('oddrow',)
            
            # Add warning tags for low stock
            if product[4] < 5:
                tags = tags + ('lowstock',)
            if product[4] == 0:
                tags = tags + ('nostock',)
            
            # Format price with currency
            formatted_product = list(product)
            formatted_product[3] = f"\${product[3]:,.2f}"
            
            self.tree.insert('', tk.END, values=formatted_product, tags=tags)
    
    def on_search(self, event):
        search_term = self.search_var.get().lower().strip()
        category_filter = self.category_var.get()
        
        # Clear selection
        for item in self.tree.selection():
            self.tree.selection_remove(item)
        
        # Highlight matching items
        for item in self.tree.get_children():
            values = self.tree.item(item)['values']
            item_text = ' '.join(str(v).lower() for v in values)
            
            matches_search = not search_term or search_term in item_text
            matches_category = (category_filter == "All" or 
                              category_filter.lower() in str(values[2]).lower())
            
            if matches_search and matches_category:
                self.tree.item(item, tags=self.tree.item(item)['tags'])
                # Scroll to first match
                if search_term and self.tree.selection() == ():
                    self.tree.selection_add(item)
                    self.tree.see(item)
            else:
                # Grey out non-matching items
                current_tags = list(self.tree.item(item)['tags'])
                if 'hidden' not in current_tags:
                    current_tags.append('hidden')
                self.tree.item(item, tags=tuple(current_tags))
    
    def on_filter(self, event):
        self.on_search(None)
    
    def on_price_filter(self):
        try:
            min_price = float(self.min_price_var.get())
            max_price = float(self.max_price_var.get())
            
            for item in self.tree.get_children():
                values = self.tree.item(item)['values']
                # Remove $ and commas from price string
                price_str = str(values[3]).replace('$', '').replace(',', '')
                price = float(price_str)
                
                if min_price <= price <= max_price:
                    current_tags = list(self.tree.item(item)['tags'])
                    if 'hidden' in current_tags:
                        current_tags.remove('hidden')
                    self.tree.item(item, tags=tuple(current_tags))
                else:
                    current_tags = list(self.tree.item(item)['tags'])
                    if 'hidden' not in current_tags:
                        current_tags.append('hidden')
                    self.tree.item(item, tags=tuple(current_tags))
                    
        except ValueError:
            messagebox.showerror("Input Error", "Please enter valid numbers for price range!")
    
    def sort_by_column(self, col, reverse):
        # Get all items
        items = [(self.tree.set(child, col), child) 
                for child in self.tree.get_children()]
        
        # Sort items
        try:
            # Try to convert to numbers for numeric columns
            if col in ['price', 'stock']:
                items.sort(key=lambda x: float(x[0].replace('$', '').replace(',', '')), 
                          reverse=reverse)
            else:
                items.sort(key=lambda x: x[0].lower(), reverse=reverse)
        except:
            items.sort(key=lambda x: x[0], reverse=reverse)
        
        # Rearrange items in treeview
        for index, (_, child) in enumerate(items):
            self.tree.move(child, '', index)
            # Update row colors
            tags = ('evenrow',) if index % 2 == 0 else ('oddrow',)
            current_tags = list(self.tree.item(child)['tags'])
            # Keep warning tags
            for tag in ['lowstock', 'nostock']:
                if tag in current_tags:
                    tags = tags + (tag,)
            self.tree.item(child, tags=tags)
        
        # Reverse sort order for next time
        self.tree.heading(col, 
                         command=lambda: self.sort_by_column(col, not reverse))
    
    def on_sort(self, event):
        col_map = {
            'Name': 'name',
            'Category': 'category',
            'Price': 'price',
            'Stock': 'stock',
            'Date': 'date'
        }
        
        col = col_map.get(self.sort_var.get(), 'name')
        self.sort_by_column(col, False)
    
    def on_tree_click(self, event):
        region = self.tree.identify_region(event.x, event.y)
        if region == "heading":
            # Let the heading command handle sorting
            return
    
    def on_tree_double_click(self, event):
        item = self.tree.selection()
        if item:
            values = self.tree.item(item[0])['values']
            details = f"""
            SKU: {values[0]}
            Name: {values[1]}
            Category: {values[2]}
            Price: {values[3]}
            Stock: {values[4]}
            Added: {values[5]}
            """
            messagebox.showinfo("Product Details", details)
    
    def show_tooltip(self, event):
        region = self.tree.identify_region(event.x, event.y)
        if region == "cell":
            item = self.tree.identify_row(event.y)
            col = self.tree.identify_column(event.x)
            
            if item and col:
                # Get column index
                col_index = int(col.replace('#', '')) - 1
                value = self.tree.item(item)['values'][col_index]
                
                # Create tooltip
                if self.tooltip:
                    self.tooltip.destroy()
                
                self.tooltip = tk.Toplevel()
                self.tooltip.wm_overrideredirect(True)
                self.tooltip.wm_geometry(f"+{event.x_root+10}+{event.y_root+10}")
                
                label = tk.Label(self.tooltip, text=str(value), 
                                background="#ffffe0", relief="solid", borderwidth=1)
                label.pack()
    
    def hide_tooltip(self, event):
        if self.tooltip:
            self.tooltip.destroy()
            self.tooltip = None
    
    def refresh_data(self):
        self.populate_treeview()
        messagebox.showinfo("Refreshed", "Data has been refreshed!")
    
    def show_stats(self):
        total_items = len(self.tree.get_children())
        total_value = 0
        low_stock = 0
        
        for item in self.tree.get_children():
            values = self.tree.item(item)['values']
            # Get numeric values
            price = float(values[3].replace('$', '').replace(',', ''))
            stock = int(values[4])
            total_value += price * stock
            
            if stock < 5:
                low_stock += 1
        
        stats = f"""
        üìä Inventory Statistics:
        
        Total Products: {total_items}
        Total Inventory Value: \${total_value:,.2f}
        Low Stock Items (<5): {low_stock}
        """
        
        messagebox.showinfo("Inventory Stats", stats)
    
    def export_csv(self):
        import csv
        
        with open('inventory_export.csv', 'w', newline='') as file:
            writer = csv.writer(file)
            # Write header
            writer.writerow(['SKU', 'Name', 'Category', 'Price', 'Stock', 'Added Date'])
            
            # Write data
            for item in self.tree.get_children():
                values = self.tree.item(item)['values']
                writer.writerow(values)
        
        messagebox.showinfo("Export Complete", "Data exported to inventory_export.csv!")

if __name__ == "__main__":
    root = tk.Tk()
    app = AdvancedTreeviewDemo(root)
    root.mainloop()
</pre>

<h3>Treeview Best Practices</h3>
<div style="background: #e8f5e8; padding: 15px; border-radius: 10px;">
  <h4>‚úÖ DO:</h4>
  <ul>
    <li>Use alternating row colors for readability</li>
    <li>Auto-adjust column widths to content</li>
    <li>Add tooltips for truncated text</li>
    <li>Implement column sorting</li>
    <li>Use tags for conditional formatting</li>
    <li>Provide multiple filtering options</li>
  </ul>
  
  <h4>‚ùå DON'T:</h4>
  <ul>
    <li>Load thousands of rows at once</li>
    <li>Use hardcoded column widths</li>
    <li>Forget to handle selection events</li>
    <li>Skip input validation</li>
    <li>Leave database connections open</li>
  </ul>
</div>

<h3>Today's Exercises</h3>
<div style="background: #f0f8ff; padding: 15px; border-radius: 10px;">
  <b>Exercise 1: Sales Dashboard (60 minutes)</b>
  <p>Create a sales dashboard with:</p>
  <ul>
    <li>Treeview showing sales transactions</li>
    <li>Filters by date range, product, salesperson</li>
    <li>Summary statistics (total sales, average, count)</li>
    <li>Chart visualization (use tkinter canvas)</li>
    <li>Export to PDF/Excel</li>
  </ul>
  
  <b>Exercise 2: Employee Directory (60 minutes)</b>
  <p>Create an employee management system:</p>
  <ul>
    <li>Employee details with photos</li>
    <li>Department filter</li>
    <li>Search by skills/position</li>
    <li>Birthday reminders</li>
    <li>Export contact lists</li>
    <li>Organizational chart view</li>
  </ul>
</div>

<h3>Homework: Complete ERP System Interface</h3>
<div style="background: #fff0e6; padding: 15px; border-radius: 10px;">
  <p>Design a complete Enterprise Resource Planning (ERP) interface:</p>
  <ul>
    <li><b>Inventory Module:</b> Products, stock levels, suppliers</li>
    <li><b>Sales Module:</b> Orders, invoices, customers</li>
    <li><b>HR Module:</b> Employees, payroll, attendance</li>
    <li><b>Accounting Module:</b> Expenses, revenue, reports</li>
    <li><b>Features:</b>
      <ul>
        <li>Tabbed interface for modules</li>
        <li>Dashboard with KPIs</li>
        <li>Role-based access (simulated)</li>
        <li>Data validation across modules</li>
        <li>Backup/restore functionality</li>
      </ul>
    </li>
  </ul>
</div>
`
  },
            "12-4": {
    "icon": "fa-search",
    "title": "Building Search Features & Advanced Queries",
    "html": `<h1>Week 12, Day 4: Advanced Search & SQL Optimization</h1>
<p>Today we build sophisticated search systems, optimize database queries, and implement full-text search capabilities.</p>

<div class="analogy-box">
    <b>Analogy: The Library Research System üìö</b><br/>
    
    Simple Search = Card catalog (by title only)<br/>
    Advanced Search = Research database (multiple criteria)<br/>
    Full-text Search = Google for your library<br/>
    Indexes = Library organization system<br/>
    Query Optimization = Efficient research strategy<br/>
    Results Ranking = Most relevant results first
</div>

<h3>Search Strategy Comparison</h3>
<table style="width:100%; border-collapse: collapse; margin: 15px 0;">
  <tr style="background: #4A90E2; color: white;">
    <th style="padding: 10px;">Search Type</th>
    <th style="padding: 10px;">Use Case</th>
    <th style="padding: 10px;">SQL Example</th>
    <th style="padding: 10px;">Performance</th>
  </tr>
  <tr style="background: #f8f9fa;">
    <td style="padding: 8px; border: 1px solid #ddd;"><b>Basic Search</b></td>
    <td style="padding: 8px; border: 1px solid #ddd;">Simple text matching</td>
    <td style="padding: 8px; border: 1px solid #ddd;"><code>WHERE name LIKE '%laptop%'</code></td>
    <td style="padding: 8px; border: 1px solid #ddd;">Slow on large data</td>
  </tr>
  <tr style="background: white;">
    <td style="padding: 8px; border: 1px solid #ddd;"><b>Advanced Filter</b></td>
    <td style="padding: 8px; border: 1px solid #ddd;">Multiple criteria</td>
    <td style="padding: 8px; border: 1px solid #ddd;"><code>WHERE category='Electronics' AND price BETWEEN 100 AND 500</code></td>
    <td style="padding: 8px; border: 1px solid #ddd;">Good with indexes</td>
  </tr>
  <tr style="background: #f8f9fa;">
    <td style="padding: 8px; border: 1px solid #ddd;"><b>Full-text Search</b></td>
    <td style="padding: 8px; border: 1px solid #ddd;">Content searching</td>
    <td style="padding: 8px; border: 1px solid #ddd;"><code>WHERE MATCH(description) AGAINST('gaming laptop')</code></td>
    <td style="padding: 8px; border: 1px solid #ddd;">Very fast</td>
  </tr>
  <tr style="background: white;">
    <td style="padding: 8px; border: 1px solid #ddd;"><b>Fuzzy Search</b></td>
    <td style="padding: 8px; border: 1px solid #ddd;">Typos, similar words</td>
    <td style="padding: 8px; border: 1px solid #ddd;">Levenshtein distance<br>Soundex algorithm</td>
    <td style="padding: 8px; border: 1px solid #ddd;">Can be slow</td>
  </tr>
</table>

<h3>Complete Advanced Search System</h3>
<pre style="background: #36454f; color: white; padding: 15px; border-radius: 5px; max-height: 600px; overflow-y: auto;">
import tkinter as tk
from tkinter import ttk, messagebox
import sqlite3
from datetime import datetime, timedelta

class AdvancedSearchSystem:
    def __init__(self, root):
        self.root = root
        self.root.title("üîç Advanced Search System")
        self.root.geometry("1400x800")
        
        # Initialize database
        self.init_database()
        self.insert_sample_data()
        
        # Setup UI
        self.setup_ui()
        
    def init_database(self):
        self.conn = sqlite3.connect(':memory:')  # In-memory for demo
        self.cursor = self.conn.cursor()
        
        # Create products table with more fields for better search
        self.cursor.execute('''
        CREATE TABLE products (
            id INTEGER PRIMARY KEY AUTOINCREMENT,
            sku TEXT UNIQUE NOT NULL,
            name TEXT NOT NULL,
            description TEXT,
            category TEXT,
            subcategory TEXT,
            brand TEXT,
            price REAL,
            cost REAL,
            stock INTEGER,
            min_stock INTEGER,
            max_stock INTEGER,
            supplier TEXT,
            location TEXT,
            weight_kg REAL,
            dimensions TEXT,
            rating REAL,
            tags TEXT,
            created_at TIMESTAMP,
            last_updated TIMESTAMP
        )
        ''')
        
        # Create indexes for faster search
        self.cursor.execute('CREATE INDEX idx_name ON products(name)')
        self.cursor.execute('CREATE INDEX idx_category ON products(category)')
        self.cursor.execute('CREATE INDEX idx_price ON products(price)')
        self.cursor.execute('CREATE INDEX idx_brand ON products(brand)')
        
        # Create search log table
        self.cursor.execute('''
        CREATE TABLE search_log (
            id INTEGER PRIMARY KEY AUTOINCREMENT,
            search_term TEXT,
            filters TEXT,
            results_count INTEGER,
            search_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP
        )
        ''')
        
        self.conn.commit()
    
    def insert_sample_data(self):
        sample_products = [
            ('LAP-GM-001', 'Gaming Laptop Pro X', 
             'High-performance gaming laptop with RTX 4080, 32GB RAM, 2TB SSD',
             'Electronics', 'Laptops', 'GameMaster', 2499.99, 1800.00, 
             15, 5, 50, 'TechSuppliers Inc', 'Aisle 3, Shelf B', 2.5,
             '15.6x10.2x0.9', 4.7, 'gaming,laptop,computer,games,rtx'),
             
            ('LAP-BZ-001', 'Business Ultrabook Pro',
             'Lightweight business laptop with long battery life, 16GB RAM, 1TB SSD',
             'Electronics', 'Laptops', 'BusinessTech', 1499.99, 1100.00,
             25, 10, 100, 'OfficeSupplies Co', 'Aisle 3, Shelf A', 1.2,
             '13.3x9.2x0.6', 4.5, 'business,laptop,office,portable'),
             
            ('PHN-SM-001', 'Smartphone X Pro Max',
             'Flagship smartphone with 200MP camera, 8K video, 512GB storage',
             'Electronics', 'Phones', 'PhoneTech', 1199.99, 850.00,
             40, 20, 200, 'MobileDistributors', 'Aisle 2, Shelf C', 0.24,
             '6.7x3.0x0.3', 4.8, 'smartphone,phone,mobile,camera'),
             
            ('TAB-DR-001', 'Drawing Tablet Pro',
             'Professional drawing tablet with pen, 16-inch display, 8192 pressure levels',
             'Electronics', 'Tablets', 'DrawTech', 899.99, 600.00,
             18, 5, 30, 'CreativeSupplies', 'Aisle 4, Shelf A', 1.1,
             '16.0x10.0x0.4', 4.6, 'tablet,drawing,art,creative,pen'),
             
            ('MON-4K-001', '4K Gaming Monitor',
             '27-inch 4K monitor with 144Hz refresh rate, HDR, G-Sync',
             'Electronics', 'Monitors', 'DisplayPro', 699.99, 450.00,
             22, 8, 40, 'DisplayDistributors', 'Aisle 1, Shelf D', 5.8,
             '27.0x23.5x7.2', 4.4, 'monitor,gaming,4k,display'),
             
            ('CHA-ERG-001', 'Ergonomic Office Chair',
             'Adjustable ergonomic chair with lumbar support, mesh back',
             'Furniture', 'Chairs', 'ComfortSeat', 399.99, 250.00,
             12, 3, 25, 'FurnitureSuppliers', 'Warehouse Zone 2', 12.5,
             '26x27x45', 4.2, 'chair,office,ergonomic,furniture'),
             
            ('DESK-ST-001', 'Standing Desk Pro',
             'Electric height-adjustable standing desk, 60x30 inches',
             'Furniture', 'Desks', 'WorkSpace', 599.99, 380.00,
             8, 2, 20, 'FurnitureSuppliers', 'Warehouse Zone 2', 32.0,
             '60x30x30', 4.3, 'desk,standing,office,furniture'),
             
            ('BAG-LP-001', 'Laptop Backpack Pro',
             'Water-resistant laptop backpack with USB charging port, 17-inch',
             'Accessories', 'Bags', 'CarryTech', 89.99, 45.00,
             50, 15, 100, 'AccessoryDistributors', 'Aisle 5, Shelf B', 1.1,
             '18x13x8', 4.1, 'bag,backpack,laptop,accessory'),
        ]
        
        for product in sample_products:
            self.cursor.execute('''
            INSERT INTO products 
            (sku, name, description, category, subcategory, brand, price, cost, 
             stock, min_stock, max_stock, supplier, location, weight_kg, dimensions, 
             rating, tags, created_at, last_updated)
            VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
            ''', (*product, datetime.now(), datetime.now()))
        
        self.conn.commit()
    
    def setup_ui(self):
        # Main container
        main_container = ttk.Frame(self.root, padding="10")
        main_container.grid(row=0, column=0, sticky=(tk.N, tk.S, tk.W, tk.E))
        
        # Configure grid weights
        self.root.columnconfigure(0, weight=1)
        self.root.rowconfigure(0, weight=1)
        main_container.columnconfigure(1, weight=1)
        main_container.rowconfigure(1, weight=1)
        
        # Search Panel (Left)
        search_panel = ttk.LabelFrame(main_container, text="üîç Search Filters", padding="15")
        search_panel.grid(row=0, column=0, rowspan=2, padx=(0, 10), sticky=(tk.N, tk.S, tk.W))
        
        # Results Panel (Right)
        results_panel = ttk.LabelFrame(main_container, text="üìã Search Results", padding="10")
        results_panel.grid(row=0, column=1, rowspan=2, sticky=(tk.N, tk.S, tk.W, tk.E))
        
        # Build search filters
        self.build_search_filters(search_panel)
        
        # Build results display
        self.build_results_display(results_panel)
        
        # Status bar
        self.status_var = tk.StringVar(value="Ready to search...")
        status_bar = ttk.Label(main_container, textvariable=self.status_var, 
                              relief=tk.SUNKEN, padding="5")
        status_bar.grid(row=2, column=0, columnspan=2, sticky=(tk.W, tk.E), pady=(10, 0))
    
    def build_search_filters(self, parent):
        row = 0
        
        # Quick Search
        ttk.Label(parent, text="Quick Search:", font=('Arial', 10, 'bold')).grid(
            row=row, column=0, columnspan=2, sticky=tk.W, pady=(0, 10))
        row += 1
        
        self.quick_search_var = tk.StringVar()
        quick_search_entry = ttk.Entry(parent, textvariable=self.quick_search_var, width=30)
        quick_search_entry.grid(row=row, column=0, columnspan=2, sticky=tk.W, pady=(0, 15))
        quick_search_entry.bind('<Return>', lambda e: self.perform_search())
        row += 1
        
        # Category Filter
        ttk.Label(parent, text="Category:").grid(row=row, column=0, sticky=tk.W, pady=2)
        self.category_var = tk.StringVar(value="All")
        categories = ["All", "Electronics", "Furniture", "Accessories"]
        category_combo = ttk.Combobox(parent, textvariable=self.category_var, 
                                     values=categories, state="readonly", width=20)
        category_combo.grid(row=row, column=1, sticky=tk.W, pady=2, padx=(5, 0))
        row += 1
        
        # Subcategory Filter
        ttk.Label(parent, text="Subcategory:").grid(row=row, column=0, sticky=tk.W, pady=2)
        self.subcategory_var = tk.StringVar(value="All")
        self.subcategory_combo = ttk.Combobox(parent, textvariable=self.subcategory_var, 
                                            state="readonly", width=20)
        self.subcategory_combo.grid(row=row, column=1, sticky=tk.W, pady=2, padx=(5, 0))
        row += 1
        
        # Brand Filter
        ttk.Label(parent, text="Brand:").grid(row=row, column=0, sticky=tk.W, pady=2)
        self.brand_var = tk.StringVar(value="All")
        self.brand_combo = ttk.Combobox(parent, textvariable=self.brand_var, 
                                       state="readonly", width=20)
        self.brand_combo.grid(row=row, column=1, sticky=tk.W, pady=2, padx=(5, 0))
        row += 1
        
        # Price Range
        ttk.Label(parent, text="Price Range:", font=('Arial', 10, 'bold')).grid(
            row=row, column=0, columnspan=2, sticky=tk.W, pady=(10, 5))
        row += 1
        
        price_frame = ttk.Frame(parent)
        price_frame.grid(row=row, column=0, columnspan=2, sticky=tk.W, pady=2)
        
        self.min_price_var = tk.StringVar(value="0")
        self.max_price_var = tk.StringVar(value="9999")
        
        ttk.Entry(price_frame, textvariable=self.min_price_var, width=10).pack(side=tk.LEFT)
        ttk.Label(price_frame, text=" to ").pack(side=tk.LEFT, padx=2)
        ttk.Entry(price_frame, textvariable=self.max_price_var, width=10).pack(side=tk.LEFT)
        row += 1
        
        # Stock Status
        ttk.Label(parent, text="Stock Status:").grid(row=row, column=0, sticky=tk.W, pady=2)
        self.stock_var = tk.StringVar(value="Any")
        stock_combo = ttk.Combobox(parent, textvariable=self.stock_var,
                                  values=["Any", "In Stock", "Low Stock", "Out of Stock"],
                                  state="readonly", width=20)
        stock_combo.grid(row=row, column=1, sticky=tk.W, pady=2, padx=(5, 0))
        row += 1
        
        # Rating Filter
        ttk.Label(parent, text="Minimum Rating:").grid(row=row, column=0, sticky=tk.W, pady=2)
        self.rating_var = tk.StringVar(value="0")
        rating_combo = ttk.Combobox(parent, textvariable=self.rating_var,
                                   values=["0", "1", "2", "3", "4", "4.5"],
                                   state="readonly", width=20)
        rating_combo.grid(row=row, column=1, sticky=tk.W, pady=2, padx=(5, 0))
        row += 1
        
        # Supplier Filter
        ttk.Label(parent, text="Supplier:").grid(row=row, column=0, sticky=tk.W, pady=2)
        self.supplier_var = tk.StringVar(value="All")
        self.supplier_combo = ttk.Combobox(parent, textvariable=self.supplier_var,
                                         state="readonly", width=20)
        self.supplier_combo.grid(row=row, column=1, sticky=tk.W, pady=2, padx=(5, 0))
        row += 1
        
        # Search Fields
        ttk.Label(parent, text="Search In:", font=('Arial', 10, 'bold')).grid(
            row=row, column=0, columnspan=2, sticky=tk.W, pady=(10, 5))
        row += 1
        
        self.search_name_var = tk.BooleanVar(value=True)
        self.search_desc_var = tk.BooleanVar(value=True)
        self.search_tags_var = tk.BooleanVar(value=True)
        
        ttk.Checkbutton(parent, text="Product Name", 
                       variable=self.search_name_var).grid(row=row, column=0, columnspan=2, sticky=tk.W)
        row += 1
        ttk.Checkbutton(parent, text="Description", 
                       variable=self.search_desc_var).grid(row=row, column=0, columnspan=2, sticky=tk.W)
        row += 1
        ttk.Checkbutton(parent, text="Tags", 
                       variable=self.search_tags_var).grid(row=row, column=0, columnspan=2, sticky=tk.W)
        row += 1
        
        # Sort Options
        ttk.Label(parent, text="Sort By:", font=('Arial', 10, 'bold')).grid(
            row=row, column=0, columnspan=2, sticky=tk.W, pady=(10, 5))
        row += 1
        
        self.sort_by_var = tk.StringVar(value="name")
        sort_options = [
            ("Name A-Z", "name ASC"),
            ("Name Z-A", "name DESC"),
            ("Price: Low to High", "price ASC"),
            ("Price: High to Low", "price DESC"),
            ("Rating: High to Low", "rating DESC"),
            ("Stock: High to Low", "stock DESC"),
            ("Recently Added", "created_at DESC")
        ]
        
        for text, value in sort_options:
            rb = ttk.Radiobutton(parent, text=text, variable=self.sort_by_var, value=value)
            rb.grid(row=row, column=0, columnspan=2, sticky=tk.W)
            row += 1
        
        # Action Buttons
        button_frame = ttk.Frame(parent)
        button_frame.grid(row=row, column=0, columnspan=2, pady=(20, 0))
        
        ttk.Button(button_frame, text="üîç Search", 
                  command=self.perform_search, width=15).pack(side=tk.LEFT, padx=2)
        ttk.Button(button_frame, text="üîÑ Reset", 
                  command=self.reset_filters, width=15).pack(side=tk.LEFT, padx=2)
        ttk.Button(button_frame, text="üìä Advanced", 
                  command=self.show_advanced_stats, width=15).pack(side=tk.LEFT, padx=2)
        
        # Load dynamic filter options
        self.load_filter_options()
    
    def load_filter_options(self):
        # Load subcategories
        self.cursor.execute("SELECT DISTINCT subcategory FROM products ORDER BY subcategory")
        subcategories = ["All"] + [row[0] for row in self.cursor.fetchall()]
        self.subcategory_combo['values'] = subcategories
        
        # Load brands
        self.cursor.execute("SELECT DISTINCT brand FROM products ORDER BY brand")
        brands = ["All"] + [row[0] for row in self.cursor.fetchall()]
        self.brand_combo['values'] = brands
        
        # Load suppliers
        self.cursor.execute("SELECT DISTINCT supplier FROM products ORDER BY supplier")
        suppliers = ["All"] + [row[0] for row in self.cursor.fetchall()]
        self.supplier_combo['values'] = suppliers
    
    def build_results_display(self, parent):
        # Create Treeview
        columns = ('sku', 'name', 'category', 'brand', 'price', 'stock', 'rating')
        
        self.tree = ttk.Treeview(parent, columns=columns, show='headings', height=20)
        
        # Define headings
        headings = {
            'sku': ('SKU', 100),
            'name': ('Product Name', 250),
            'category': ('Category', 120),
            'brand': ('Brand', 100),
            'price': ('Price', 80),
            'stock': ('Stock', 60),
            'rating': ('Rating', 70)
        }
        
        for col, (text, width) in headings.items():
            self.tree.heading(col, text=text)
            self.tree.column(col, width=width, anchor='center')
        
        # Add scrollbars
        v_scrollbar = ttk.Scrollbar(parent, orient=tk.VERTICAL, command=self.tree.yview)
        h_scrollbar = ttk.Scrollbar(parent, orient=tk.HORIZONTAL, command=self.tree.xview)
        self.tree.configure(yscrollcommand=v_scrollbar.set, xscrollcommand=h_scrollbar.set)
        
        # Grid layout
        self.tree.grid(row=0, column=0, sticky=(tk.N, tk.S, tk.W, tk.E))
        v_scrollbar.grid(row=0, column=1, sticky=(tk.N, tk.S))
        h_scrollbar.grid(row=1, column=0, sticky=(tk.W, tk.E))
        
        # Configure grid weights
        parent.columnconfigure(0, weight=1)
        parent.rowconfigure(0, weight=1)
        
        # Results counter
        self.results_count_var = tk.StringVar(value="0 results")
        ttk.Label(parent, textvariable=self.results_count_var).grid(
            row=2, column=0, sticky=tk.W, pady=(5, 0))
    
    def build_search_query(self):
        # Start building WHERE clause
        conditions = []
        params = []
        
        # Quick search across multiple fields
        search_term = self.quick_search_var.get().strip()
        if search_term:
            search_conditions = []
            search_params = []
            
            if self.search_name_var.get():
                search_conditions.append("name LIKE ?")
                search_params.append(f"%{search_term}%")
            
            if self.search_desc_var.get():
                search_conditions.append("description LIKE ?")
                search_params.append(f"%{search_term}%")
            
            if self.search_tags_var.get():
                search_conditions.append("tags LIKE ?")
                search_params.append(f"%{search_term}%")
            
            if search_conditions:
                conditions.append(f"({' OR '.join(search_conditions)})")
                params.extend(search_params)
        
        # Category filter
        category = self.category_var.get()
        if category != "All":
            conditions.append("category = ?")
            params.append(category)
        
        # Subcategory filter
        subcategory = self.subcategory_var.get()
        if subcategory != "All":
            conditions.append("subcategory = ?")
            params.append(subcategory)
        
        # Brand filter
        brand = self.brand_var.get()
        if brand != "All":
            conditions.append("brand = ?")
            params.append(brand)
        
        # Price range
        try:
            min_price = float(self.min_price_var.get())
            max_price = float(self.max_price_var.get())
            conditions.append("price BETWEEN ? AND ?")
            params.extend([min_price, max_price])
        except ValueError:
            pass
        
        # Stock status
        stock_status = self.stock_var.get()
        if stock_status == "In Stock":
            conditions.append("stock > 0")
        elif stock_status == "Low Stock":
            conditions.append("stock BETWEEN 1 AND min_stock")
        elif stock_status == "Out of Stock":
            conditions.append("stock = 0")
        
        # Minimum rating
        try:
            min_rating = float(self.rating_var.get())
            if min_rating > 0:
                conditions.append("rating >= ?")
                params.append(min_rating)
        except ValueError:
            pass
        
        # Supplier filter
        supplier = self.supplier_var.get()
        if supplier != "All":
            conditions.append("supplier = ?")
            params.append(supplier)
        
        # Build final query
        where_clause = " AND ".join(conditions) if conditions else "1=1"
        order_clause = self.sort_by_var.get()
        
        query = f"""
        SELECT sku, name, category, brand, price, stock, rating
        FROM products
        WHERE {where_clause}
        ORDER BY {order_clause}
        """
        
        return query, params
    
    def perform_search(self):
        try:
            start_time = datetime.now()
            
            # Build and execute query
            query, params = self.build_search_query()
            self.cursor.execute(query, params)
            results = self.cursor.fetchall()
            
            # Clear current results
            for item in self.tree.get_children():
                self.tree.delete(item)
            
            # Display results
            for i, row in enumerate(results):
                # Format values
                formatted_row = list(row)
                formatted_row[4] = f"\${row[4]:,.2f}"  # Format price
                formatted_row[6] = f"{row[6]:.1f}‚òÖ"   # Format rating
                
                # Add to treeview
                tags = ('evenrow',) if i % 2 == 0 else ('oddrow',)
                if row[5] == 0:  # No stock
                    tags = tags + ('nostock',)
                elif row[5] < 5:  # Low stock
                    tags = tags + ('lowstock',)
                
                self.tree.insert('', tk.END, values=formatted_row, tags=tags)
            
            # Update results count
            elapsed = (datetime.now() - start_time).total_seconds()
            self.results_count_var.set(f"{len(results)} results found in {elapsed:.3f} seconds")
            
            # Log the search
            filters = {
                'quick_search': self.quick_search_var.get(),
                'category': self.category_var.get(),
                'subcategory': self.subcategory_var.get(),
                'brand': self.brand_var.get(),
                'price_range': f"{self.min_price_var.get()}-{self.max_price_var.get()}",
                'stock_status': self.stock_var.get(),
                'min_rating': self.rating_var.get()
            }
            
            self.cursor.execute('''
            INSERT INTO search_log (search_term, filters, results_count)
            VALUES (?, ?, ?)
            ''', (self.quick_search_var.get(), str(filters), len(results)))
            self.conn.commit()
            
            self.status_var.set(f"Search completed. Found {len(results)} products.")
            
        except Exception as e:
            messagebox.showerror("Search Error", f"An error occurred: {str(e)}")
            self.status_var.set("Search failed.")
    
    def reset_filters(self):
        self.quick_search_var.set("")
        self.category_var.set("All")
        self.subcategory_var.set("All")
        self.brand_var.set("All")
        self.min_price_var.set("0")
        self.max_price_var.set("9999")
        self.stock_var.set("Any")
        self.rating_var.set("0")
        self.supplier_var.set("All")
        self.search_name_var.set(True)
        self.search_desc_var.set(True)
        self.search_tags_var.set(True)
        self.sort_by_var.set("name ASC")
        
        # Clear results
        for item in self.tree.get_children():
            self.tree.delete(item)
        
        self.results_count_var.set("0 results")
        self.status_var.set("Filters reset. Ready to search.")
    
    def show_advanced_stats(self):
        # Get search history
        self.cursor.execute('''
        SELECT 
            COUNT(*) as total_searches,
            AVG(results_count) as avg_results,
            MAX(search_time) as last_search
        FROM search_log
        ''')
        stats = self.cursor.fetchone()
        
        # Get popular search terms
        self.cursor.execute('''
        SELECT search_term, COUNT(*) as frequency
        FROM search_log
        WHERE search_term != ''
        GROUP BY search_term
        ORDER BY frequency DESC
        LIMIT 5
        ''')
        popular_terms = self.cursor.fetchall()
        
        # Get inventory stats
        self.cursor.execute('''
        SELECT 
            COUNT(*) as total_products,
            SUM(stock) as total_stock,
            AVG(price) as avg_price,
            SUM(price * stock) as total_value
        FROM products
        ''')
        inventory_stats = self.cursor.fetchone()
        
        # Build stats message
        stats_text = f"""
        üìä Advanced Statistics
        
        Search Statistics:
        ‚Ä¢ Total searches performed: {stats[0]}
        ‚Ä¢ Average results per search: {stats[1]:.1f}
        ‚Ä¢ Last search time: {stats[2]}
        
        Most Popular Search Terms:
        """
        
        for term, freq in popular_terms:
            stats_text += f"\n‚Ä¢ '{term}' ({freq} times)"
        
        stats_text += f"""
        
        Inventory Overview:
        ‚Ä¢ Total products: {inventory_stats[0]}
        ‚Ä¢ Total items in stock: {inventory_stats[1]}
        ‚Ä¢ Average product price: \${inventory_stats[2]:.2f}
        ‚Ä¢ Total inventory value: \${inventory_stats[3]:,.2f}
        
        Database Information:
        ‚Ä¢ Database: SQLite (in-memory for demo)
        ‚Ä¢ Table: products ({inventory_stats[0]} records)
        ‚Ä¢ Indexes: name, category, price, brand
        """
        
        messagebox.showinfo("Advanced Statistics", stats_text)

if __name__ == "__main__":
    root = tk.Tk()
    app = AdvancedSearchSystem(root)
    root.mainloop()
</pre>

<h3>Search Optimization Techniques</h3>
<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 15px 0;">
  <div style="background: #e3f2fd; padding: 15px; border-radius: 10px;">
    <h4>üöÄ Performance Tips</h4>
    <ul>
      <li><b>Use INDEXES:</b> Create indexes on frequently searched columns</li>
      <li><b>Avoid SELECT *:</b> Only select needed columns</li>
      <li><b>Limit results:</b> Use LIMIT for large datasets</li>
      <li><b>Parameterize queries:</b> Prevents SQL injection</li>
      <li><b>Cache results:</b> Store frequent searches</li>
      <li><b>Batch updates:</b> Group database operations</li>
    </ul>
  </div>
  <div style="background: #f3e5f5; padding: 15px; border-radius: 10px;">
    <h4>üîç Search Algorithms</h4>
    <ul>
      <li><b>Prefix Search:</b> LIKE 'term%' (uses indexes)</li>
      <li><b>Full-text Search:</b> SQLite FTS5 extension</li>
      <li><b>Fuzzy Search:</b> Levenshtein distance</li>
      <li><b>Soundex:</b> Phonetic matching</li>
      <li><b>Boolean Search:</b> AND/OR/NOT operators</li>
      <li><b>Weighted Search:</b> Boost certain fields</li>
    </ul>
  </div>
</div>

<h3>Today's Exercises</h3>
<div style="background: #f0f8ff; padding: 15px; border-radius: 10px;">
  <b>Exercise 1: E-commerce Search Engine (60 minutes)</b>
  <p>Build an Amazon-style search system:</p>
  <ul>
    <li>Multiple search modes (keyword, category, filter)</li>
    <li>Search suggestions as you type</li>
    <li>Faceted search (refine by multiple attributes)</li>
    <li>Search history and recent searches</li>
    <li>"People also searched for" suggestions</li>
    <li>Search ranking by relevance</li>
  </ul>
  
  <b>Exercise 2: Document Search System (60 minutes)</b>
  <p>Create a document management search:</p>
  <ul>
    <li>Full-text search across documents</li>
    <li>PDF/TXT/DOCX file indexing</li>
    <li>Search within specific document sections</li>
    <li>Boolean search operators</li>
    <li>Search result highlighting</li>
    <li>Document preview on hover</li>
  </ul>
</div>

<h3>Final Project: Complete Search Analytics Dashboard</h3>
<div style="background: #e8f5e8; padding: 15px; border-radius: 10px;">
  <p>Build a comprehensive search analytics system:</p>
  
  <h4>üìà Search Analytics Features:</h4>
  <ul>
    <li><b>Real-time Search Monitoring:</b> Live search activity</li>
    <li><b>Conversion Tracking:</b> Which searches lead to purchases</li>
    <li><b>Zero Results Analysis:</b> What searches return no results</li>
    <li><b>Trending Searches:</b> Popular searches over time</li>
    <li><b>User Behavior:</b> Click-through rates, time on page</li>
    <li><b>A/B Testing:</b> Compare different search algorithms</li>
  </ul>
  
  <h4>üìä Dashboard Components:</h4>
  <ul>
    <li><b>Search Volume Chart:</b> Searches per hour/day</li>
    <li><b>Top Searches Table:</b> Most frequent queries</li>
    <li><b>Zero Results Report:</b> Common failed searches</li>
    <li><b>Conversion Funnel:</b> Search ‚Üí View ‚Üí Purchase</li>
    <li><b>User Segmentation:</b> Search patterns by user type</li>
    <li><b>Performance Metrics:</b> Search speed, accuracy</li>
  </ul>
  
  <h4>üéØ Advanced Features:</h4>
  <ul>
    <li>Machine learning search suggestions</li>
    <li>Natural language query understanding</li>
    <li>Multilingual search support</li>
    <li>Voice search integration (simulated)</li>
    <li>Search personalization based on history</li>
    <li>Predictive search (what users will search for)</li>
  </ul>
  
  <h4>üìã Implementation Requirements:</h4>
  <ul>
    <li>Use SQLite with FTS5 for full-text search</li>
    <li>Implement search query logging</li>
    <li>Create data visualization with charts</li>
    <li>Build admin interface for search tuning</li>
    <li>Add export functionality (CSV, PDF)</li>
    <li>Implement search result A/B testing</li>
  </ul>
</div>

<h3>Week 12 Summary & Key Takeaways</h3>
<div style="background: #fff0e6; padding: 15px; border-radius: 10px;">
  <h4>‚úÖ What We Covered This Week:</h4>
  <ol>
    <li><b>Day 1:</b> SQLite fundamentals, CRUD operations, database design</li>
    <li><b>Day 2:</b> GUI + Database integration, complete CRUD application</li>
    <li><b>Day 3:</b> Advanced Treeview features, professional data display</li>
    <li><b>Day 4:</b> Advanced search systems, query optimization, analytics</li>
  </ol>
  
  <h4>üéØ Key Skills Learned:</h4>
  <ul>
    <li>Design and implement relational databases</li>
    <li>Connect Python applications to SQLite</li>
    <li>Build professional data entry and display interfaces</li>
    <li>Implement advanced search and filtering systems</li>
    <li>Optimize database queries for performance</li>
    <li>Create search analytics and reporting systems</li>
  </ul>
  
  <h4>üöÄ Next Steps:</h4>
  <ul>
    <li><b>Week 13:</b> Software Lifecycle & Version Control (Git, SDLC, Testing)</li>
    <li><b>Week 14:</b> Final Capstone & Application Packaging</li>
    <li><b>Beyond:</b> Web development, APIs, cloud deployment, mobile apps</li>
  </ul>
</div>
`
  },

            "13-1": {
                "icon": "fa-code-branch",
                "title": "Introduction to Git & GitHub",
                "html": "<h1>Week 13, Day 1: Introduction to Git & GitHub</h1>\n    <p>Today, you'll learn how developers track changes, collaborate, and manage versions of their code using Git and GitHub.</p>\n\n    <div class=\"analogy-box\">\n        <b>Analogy: Time Traveling Notebook üìò</b><br/>\n        <ul style=\"margin-top: 10px;\">\n            <li><b>Git</b> = A personal notebook where you save drafts and can go back to any page</li>\n            <li><b>GitHub</b> = A public library where everyone can borrow, read, and suggest edits to your notebook</li>\n            <li><b>Commit</b> = Saving a new version of your story</li>\n            <li><b>Branch</b> = Writing a side story without messing up the main plot</li>\n            <li><b>Merge</b> = Combining your side story into the main book</li>\n        </ul>\n    </div>\n\n    <h3>Key Topics</h3>\n    <ul>\n        <li>What is Version Control?</li>\n        <li>Git Basics: Repository, Commit, Branch</li>\n        <li>GitHub: Remote Repositories & Collaboration</li>\n        <li>Hands-On: First Git Project</li>\n    </ul>\n\n    <h3>In-Depth Explanation</h3>\n\n    <b>a. Why Version Control?</b><br/>\n    <div style=\"background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;\">\n        <small>- Track every change to your code</small><br/>\n        <small>- Revert to previous versions if something breaks</small><br/>\n        <small>- Collaborate without overwriting each other's work</small><br/>\n        <small>- Deploy code confidently knowing you have backups</small>\n    </div>\n\n    <b>Git vs. GitHub:</b>\n    <div style=\"background-color: #f9f9f9; padding: 15px; margin: 10px 0; border-radius: 5px; font-family: monospace;\">\n        <b>Git</b> (Local)<br/>\n        ‚îî‚îÄ Tracks changes on YOUR computer<br/>\n        ‚îî‚îÄ Creates history of your project<br/>\n        ‚îî‚îÄ Works offline<br/><br/>\n\n        <b>GitHub</b> (Cloud)<br/>\n        ‚îî‚îÄ Hosts your Git repositories online<br/>\n        ‚îî‚îÄ Enables collaboration<br/>\n        ‚îî‚îÄ Acts as a backup & portfolio<br/>\n    </div>\n\n    <hr/>\n\n    <b>b. Installing & Setting Up Git</b>\n    <div style=\"background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;\">\n        <b>Step 1: Download & Install</b><br/>\n        - Download from: <a href=\"https://git-scm.com/\" target=\"_blank\">git-scm.com</a><br/>\n        - Follow installation wizard (default options are fine)<br/><br/>\n\n        <b>Step 2: Configure Your Identity</b><br/>\n        <pre style=\"background: white; padding: 10px; border-radius: 3px;\">\ngit config --global user.name \"Your Name\"\ngit config --global user.email \"your.email@example.com\"\n        </pre>\n    </div>\n\n    <hr/>\n\n    <b>c. Git Workflow: The Three Areas</b>\n    <div style=\"background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;\">\n        <b>1. Working Directory</b><br/>\n        - Where you edit files<br/>\n        - Untracked changes live here<br/><br/>\n\n        <b>2. Staging Area (Index)</b><br/>\n        - Prepares changes for commit<br/>\n        - You choose what to include<br/><br/>\n\n        <b>3. Repository (Local History)</b><br/>\n        - Permanent saved versions<br/>\n        - Each commit is a snapshot<br/><br/>\n\n        <div style=\"text-align: center; margin: 15px 0;\">\n            <b>Workflow:</b><br/>\n            Working Directory ‚Üí <code>git add</code> ‚Üí Staging Area ‚Üí <code>git commit</code> ‚Üí Repository\n        </div>\n    </div>\n\n    <hr/>\n\n    <b>d. Essential Git Commands</b>\n    <table style=\"width:100%; border-collapse: collapse; margin: 15px 0;\">\n        <tr style=\"background-color: #2c3e50; color: white;\">\n            <th style=\"padding: 10px;\">Command</th>\n            <th style=\"padding: 10px;\">Description</th>\n            <th style=\"padding: 10px;\">Example</th>\n        </tr>\n        <tr>\n            <td style=\"border: 1px solid #ddd; padding: 8px;\"><code>git init</code></td>\n            <td style=\"border: 1px solid #ddd; padding: 8px;\">Start tracking a folder</td>\n            <td style=\"border: 1px solid #ddd; padding: 8px;\"><code>git init</code></td>\n        </tr>\n        <tr>\n            <td style=\"border: 1px solid #ddd; padding: 8px;\"><code>git status</code></td>\n            <td style=\"border: 1px solid #ddd; padding: 8px;\">See what's changed</td>\n            <td style=\"border: 1px solid #ddd; padding: 8px;\"><code>git status</code></td>\n        </tr>\n        <tr>\n            <td style=\"border: 1px solid #ddd; padding: 8px;\"><code>git add</code></td>\n            <td style=\"border: 1px solid #ddd; padding: 8px;\">Stage changes</td>\n            <td style=\"border: 1px solid #ddd; padding: 8px;\"><code>git add .</code></td>\n        </tr>\n        <tr>\n            <td style=\"border: 1px solid #ddd; padding: 8px;\"><code>git commit</code></td>\n            <td style=\"border: 1px solid #ddd; padding: 8px;\">Save changes</td>\n            <td style=\"border: 1px solid #ddd; padding: 8px;\"><code>git commit -m \"Added login feature\"</code></td>\n        </tr>\n        <tr>\n            <td style=\"border: 1px solid #ddd; padding: 8px;\"><code>git log</code></td>\n            <td style=\"border: 1px solid #ddd; padding: 8px;\">View commit history</td>\n            <td style=\"border: 1px solid #ddd; padding: 8px;\"><code>git log --oneline</code></td>\n        </tr>\n        <tr>\n            <td style=\"border: 1px solid #ddd; padding: 8px;\"><code>git checkout</code></td>\n            <td style=\"border: 1px solid #ddd; padding: 8px;\">Switch versions</td>\n            <td style=\"border: 1px solid #ddd; padding: 8px;\"><code>git checkout abc123</code></td>\n        </tr>\n    </table>\n\n    <hr/>\n\n    <b>e. Your First Git Repository</b>\n    <div style=\"background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;\">\n        <b>Step-by-Step Walkthrough:</b><br/><br/>\n\n        <b>1. Create Project Folder</b>\n        <pre style=\"background: white; padding: 10px; border-radius: 3px;\">\nmkdir my-first-git-project\ncd my-first-git-project\n        </pre>\n\n        <b>2. Initialize Git</b>\n        <pre style=\"background: white; padding: 10px; border-radius: 3px;\">\ngit init\n        </pre>\n\n        <b>3. Create Your First File</b>\n        <pre style=\"background: white; padding: 10px; border-radius: 3px;\">\necho \"# My First Git Project\" > README.md\n        </pre>\n\n        <b>4. Check Status</b>\n        <pre style=\"background: white; padding: 10px; border-radius: 3px;\">\ngit status\n        </pre>\n\n        <b>5. Stage Changes</b>\n        <pre style=\"background: white; padding: 10px; border-radius: 3px;\">\ngit add README.md\n        </pre>\n\n        <b>6. Commit Changes</b>\n        <pre style=\"background: white; padding: 10px; border-radius: 3px;\">\ngit commit -m \"Added README file\"\n        </pre>\n\n        <b>7. View History</b>\n        <pre style=\"background: white; padding: 10px; border-radius: 3px;\">\ngit log\n        </pre>\n    </div>\n\n    <hr/>\n\n    <b>f. Introduction to GitHub</b>\n    <div style=\"background-color: #f9f9f9; padding: 15px; margin: 10px 0; border-radius: 5px;\">\n        <b>1. Create GitHub Account</b><br/>\n        - Go to <a href=\"https://github.com\" target=\"_blank\">github.com</a><br/>\n        - Sign up (it's free!)<br/><br/>\n\n        <b>2. Create New Repository</b><br/>\n        - Click \"+\" ‚Üí \"New repository\"<br/>\n        - Name: \"my-first-git-project\"<br/>\n        - Public (visible to everyone)<br/>\n        - Don't initialize with README (we already have one)<br/><br/>\n\n        <b>3. Connect Local to Remote</b><br/>\n        <pre style=\"background: white; padding: 10px; border-radius: 3px;\">\ngit remote add origin https://github.com/YOUR-USERNAME/my-first-git-project.git\ngit branch -M main\ngit push -u origin main\n        </pre>\n    </div>\n\n    <hr/>\n\n    <h3>Hands-On Exercise: Git Timeline Project</h3>\n    <b>Task:</b> Create a timeline of your software development journey using Git commits.<br/><br/>\n\n    <b>Requirements:</b>\n    <div style=\"background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;\">\n        1. Create a new folder called \"dev-journey\"<br/>\n        2. Initialize Git repository<br/>\n        3. Create timeline.txt file<br/>\n        4. Make at least 5 commits with meaningful messages<br/>\n        5. Push to GitHub<br/>\n        6. View your commit history as a timeline\n    </div>\n\n    <b>Example Commits:</b>\n    <div style=\"background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;\">\n        <pre style=\"background: white; padding: 10px; border-radius: 3px;\">\n# First commit\necho \"Week 1: Learned variables and loops\" >> timeline.txt\ngit add timeline.txt\ngit commit -m \"Started my coding journey\"\n\n# Second commit\necho \"Week 5: Built banking console app\" >> timeline.txt\ngit add timeline.txt\ngit commit -m \"Completed first project\"\n\n# Continue for weeks 6-12...\n        </pre>\n    </div>\n\n    <hr/>\n\n    <h3>Common Git Mistakes & Fixes</h3>\n\n    <b>Mistake 1: Committed wrong message</b>\n    <div style=\"background-color: #ffe6e6; padding: 15px; margin: 10px 0; border-radius: 5px;\">\n        <pre style=\"background: white; padding: 10px; border-radius: 3px;\">\n# Fix:\ngit commit --amend -m \"New correct message\"\n        </pre>\n    </div>\n\n    <b>Mistake 2: Forgot to add a file</b>\n    <div style=\"background-color: #ffe6e6; padding: 15px; margin: 10px 0; border-radius: 5px;\">\n        <pre style=\"background: white; padding: 10px; border-radius: 3px;\">\n# Fix:\ngit add missing-file.py\ngit commit --amend --no-edit\n        </pre>\n    </div>\n\n    <b>Mistake 3: Want to undo last commit (but keep changes)</b>\n    <div style=\"background-color: #ffe6e6; padding: 15px; margin: 10px 0; border-radius: 5px;\">\n        <pre style=\"background: white; padding: 10px; border-radius: 3px;\">\n# Fix:\ngit reset --soft HEAD~1\n        </pre>\n    </div>\n\n    <b>Mistake 4: Want to completely discard last commit</b>\n    <div style=\"background-color: #ffe6e6; padding: 15px; margin: 10px 0; border-radius: 5px;\">\n        <pre style=\"background: white; padding: 10px; border-radius: 3px;\">\n# Fix:\ngit reset --hard HEAD~1\n# WARNING: This deletes changes permanently!\n        </pre>\n    </div>\n\n    <hr/>\n\n    <div class=\"assignment-box\">\n        <h4>Assignment: Version Control Your Warehouse Manager</h4>\n        <p>Apply Git to your existing Warehouse Manager project from previous weeks.</p>\n        \n        <div style=\"background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;\">\n            <b>Part 1: Initialize Repository</b><br/>\n            1. Navigate to your project folder<br/>\n            2. Run <code>git init</code><br/>\n            3. Create <code>.gitignore</code> file with:\n            <pre style=\"background: white; padding: 10px; border-radius: 3px;\">\n__pycache__/\n*.pyc\n.DS_Store\nvenv/\n*.exe\n            </pre><br/>\n            \n            <b>Part 2: First Commit</b><br/>\n            1. Add all files: <code>git add .</code><br/>\n            2. Commit: <code>git commit -m \"Initial commit: Warehouse Manager v1.0\"</code><br/><br/>\n            \n            <b>Part 3: Feature Commits</b><br/>\n            1. Add a new feature (e.g., \"Search by category\")<br/>\n            2. Commit with message: <code>\"Added search by category feature\"</code><br/>\n            3. Fix a bug<br/>\n            4. Commit with message: <code>\"Fixed price calculation bug\"</code><br/><br/>\n            \n            <b>Part 4: GitHub Setup</b><br/>\n            1. Create repository on GitHub<br/>\n            2. Connect your local repository<br/>\n            3. Push your code<br/>\n            4. Share the link with your classmates<br/><br/>\n            \n            <b>Part 5: Documentation</b><br/>\n            1. Create README.md with project description<br/>\n            2. Add installation instructions<br/>\n            3. Include screenshots<br/>\n            4. Commit: <code>\"Added project documentation\"</code>\n        </div>\n        \n        <p><b>Bonus Challenge:</b> Create a \"CHANGELOG.md\" file that summarizes each version of your project based on your Git history.</p>\n    </div>\n\n    <hr/>\n\n    <h3>Resources & Cheat Sheet</h3>\n    <div style=\"background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;\">\n        <b>Git Cheat Sheet:</b><br/>\n        <pre style=\"background: white; padding: 10px; border-radius: 3px;\">\n# Basics\ngit status                      # Check status\ngit add [file]                 # Stage file\ngit commit -m \"message\"        # Commit changes\ngit log                        # View history\n\n# Undoing\ngit checkout -- [file]         # Discard changes\ngit reset HEAD [file]          # Unstage file\n\n# Remote\ngit remote -v                  # View remotes\ngit push origin main           # Push to GitHub\ngit pull origin main           # Pull from GitHub\n\n# Branching (Preview)\ngit branch                     # List branches\ngit branch [name]              # Create branch\ngit checkout [branch]          # Switch branch\n        </pre>\n        \n        <b>Recommended Resources:</b><br/>\n        - <a href=\"https://git-scm.com/book\" target=\"_blank\">Pro Git Book (Free)</a><br/>\n        - <a href=\"https://learngitbranching.js.org/\" target=\"_blank\">Learn Git Branching (Interactive)</a><br/>\n        - <a href=\"https://github.com/\" target=\"_blank\">GitHub Guides</a>\n    </div>\n\n    <div style=\"background-color: #d4edda; padding: 15px; margin: 20px 0; border-radius: 5px; border-left: 5px solid #155724;\">\n        <h4>üéØ Key Takeaway</h4>\n        <p>Git is your project's safety net. Every commit is a checkpoint you can return to. Start using Git with every project, even small ones. It will save you countless hours of frustration when things break!</p>\n        <p><b>Remember:</b> Commit early, commit often, write meaningful messages.</p>\n    </div>"
            },
            "13-2": {
                "icon": "fa-sitemap",
                "title": "Committing Code and Branching",
                "html": "<h1>Week 13, Day 2: Committing Code and Branching</h1>\n    <p>Today we dive deeper into Git's power features: meaningful commits, branching strategies, and collaboration workflows.</p>\n\n    <div class=\"analogy-box\">\n        <b>Analogy: Construction Site üèóÔ∏è</b><br/>\n        <ul style=\"margin-top: 10px;\">\n            <li><b>Main Branch</b> = Completed, stable building</li>\n            <li><b>Feature Branch</b> = Temporary scaffolding for new rooms</li>\n            <li><b>Commit</b> = Adding a finished wall or window</li>\n            <li><b>Merge</b> = Adding the new room to the main building</li>\n            <li><b>Conflict</b> = Two workers trying to install the same window</li>\n        </ul>\n    </div>\n\n    <h3>Key Topics</h3>\n    <ul>\n        <li>Writing Effective Commit Messages</li>\n        <li>Branching Strategies & Git Flow</li>\n        <li>Merging Branches & Handling Conflicts</li>\n        <li>Collaborative Development with GitHub</li>\n    </ul>\n\n    <h3>In-Depth Explanation</h3>\n\n    <b>a. The Art of Commit Messages</b><br/>\n    <div style=\"background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;\">\n        <b>Conventional Commits Format:</b><br/>\n        <pre style=\"background: white; padding: 10px; border-radius: 3px;\">\n&lt;type&gt;(&lt;scope&gt;): &lt;description&gt;\n\n[optional body]\n\n[optional footer]\n        </pre>\n        \n        <b>Types:</b><br/>\n        ‚Ä¢ <code>feat</code>: New feature<br/>\n        ‚Ä¢ <code>fix</code>: Bug fix<br/>\n        ‚Ä¢ <code>docs</code>: Documentation changes<br/>\n        ‚Ä¢ <code>style</code>: Formatting, missing semi colons, etc.<br/>\n        ‚Ä¢ <code>refactor</code>: Code refactoring<br/>\n        ‚Ä¢ <code>test</code>: Adding or fixing tests<br/>\n        ‚Ä¢ <code>chore</code>: Maintenance tasks<br/>\n        \n        <b>Good vs Bad Examples:</b><br/>\n        <div style=\"display: flex; gap: 20px; margin-top: 10px;\">\n            <div style=\"flex: 1; background-color: #d4edda; padding: 10px; border-radius: 5px;\">\n                <b>‚úÖ GOOD</b><br/>\n                <code>feat(auth): add login with Google</code><br/>\n                <code>fix(payment): correct currency conversion</code><br/>\n                <code>docs(readme): update installation steps</code>\n            </div>\n            <div style=\"flex: 1; background-color: #f8d7da; padding: 10px; border-radius: 5px;\">\n                <b>‚ùå BAD</b><br/>\n                <code>fixed stuff</code><br/>\n                <code>update</code><br/>\n                <code>changes</code>\n            </div>\n        </div>\n    </div>\n\n    <hr/>\n\n    <b>b. Branching: Why and How</b><br/>\n    <div style=\"background-color: #f9f9f9; padding: 15px; margin: 10px 0; border-radius: 5px;\">\n        <b>Common Branching Strategy (Git Flow):</b><br/>\n        <div style=\"font-family: monospace; margin: 10px 0;\">\n            main (or master) ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ release/v1.0\n                               ‚îú‚îÄ‚îÄ develop ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ feature/login\n                               ‚îÇ             ‚îú‚îÄ‚îÄ feature/search\n                               ‚îÇ             ‚îî‚îÄ‚îÄ hotfix/crash-bug\n                               ‚îî‚îÄ‚îÄ release/v1.1\n        </div>\n        \n        <b>Branch Types:</b><br/>\n        1. <b>main/master</b> - Production-ready code<br/>\n        2. <b>develop</b> - Integration branch for features<br/>\n        3. <b>feature/*</b> - New features (temporary)<br/>\n        4. <b>release/*</b> - Preparing for release<br/>\n        5. <b>hotfix/*</b> - Emergency production fixes\n    </div>\n\n    <hr/>\n\n    <b>c. Branch Commands in Action</b>\n    <table style=\"width:100%; border-collapse: collapse; margin: 15px 0;\">\n        <tr style=\"background-color: #2c3e50; color: white;\">\n            <th style=\"padding: 10px;\">Command</th>\n            <th style=\"padding: 10px;\">Description</th>\n            <th style=\"padding: 10px;\">Example</th>\n        </tr>\n        <tr>\n            <td style=\"border: 1px solid #ddd; padding: 8px;\"><code>git branch</code></td>\n            <td style=\"border: 1px solid #ddd; padding: 8px;\">List all branches</td>\n            <td style=\"border: 1px solid #ddd; padding: 8px;\"><code>git branch -a</code></td>\n        </tr>\n        <tr>\n            <td style=\"border: 1px solid #ddd; padding: 8px;\"><code>git checkout</code></td>\n            <td style=\"border: 1px solid #ddd; padding: 8px;\">Switch branches</td>\n            <td style=\"border: 1px solid #ddd; padding: 8px;\"><code>git checkout feature/login</code></td>\n        </tr>\n        <tr>\n            <td style=\"border: 1px solid #ddd; padding: 8px;\"><code>git checkout -b</code></td>\n            <td style=\"border: 1px solid #ddd; padding: 8px;\">Create & switch</td>\n            <td style=\"border: 1px solid #ddd; padding: 8px;\"><code>git checkout -b feature/search</code></td>\n        </tr>\n        <tr>\n            <td style=\"border: 1px solid #ddd; padding: 8px;\"><code>git merge</code></td>\n            <td style=\"border: 1px solid #ddd; padding: 8px;\">Combine branches</td>\n            <td style=\"border: 1px solid #ddd; padding: 8px;\"><code>git merge feature/login</code></td>\n        </tr>\n        <tr>\n            <td style=\"border: 1px solid #ddd; padding: 8px;\"><code>git branch -d</code></td>\n            <td style=\"border: 1px solid #ddd; padding: 8px;\">Delete branch</td>\n            <td style=\"border: 1px solid #ddd; padding: 8px;\"><code>git branch -d feature/login</code></td>\n        </tr>\n    </table>\n\n    <hr/>\n\n    <b>d. Complete Feature Workflow Example</b>\n    <div style=\"background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;\">\n        <b>Scenario:</b> Add \"Search Products\" feature to Warehouse Manager<br/><br/>\n\n        <b>Step 1: Create Feature Branch</b>\n        <pre style=\"background: white; padding: 10px; border-radius: 3px;\">\ngit checkout main                    # Start from main\ngit pull origin main                 # Get latest changes\ngit checkout -b feature/search       # Create branch\n        </pre>\n\n        <b>Step 2: Develop Feature</b>\n        <pre style=\"background: white; padding: 10px; border-radius: 3px;\">\n# Make changes to search.py, test.py, etc.\ngit add .\ngit commit -m \"feat(search): add product search by name\"\ngit commit -m \"test(search): add unit tests for search feature\"\n        </pre>\n\n        <b>Step 3: Push to GitHub</b>\n        <pre style=\"background: white; padding: 10px; border-radius: 3px;\">\ngit push -u origin feature/search\n        </pre>\n\n        <b>Step 4: Create Pull Request (GitHub)</b>\n        1. Go to GitHub repository<br/>\n        2. Click \"Compare & pull request\"<br/>\n        3. Add description and reviewers<br/>\n        4. Wait for approval<br/><br/>\n\n        <b>Step 5: Merge to Main</b>\n        <pre style=\"background: white; padding: 10px; border-radius: 3px;\">\ngit checkout main\ngit merge feature/search            # Merge changes\ngit push origin main                # Update remote\ngit branch -d feature/search        # Clean up\n        </pre>\n    </div>\n\n    <hr/>\n\n    <b>e. Handling Merge Conflicts</b>\n    <div style=\"background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;\">\n        <b>What is a Conflict?</b><br/>\n        - Git can't automatically merge two changes<br/>\n        - Same file modified in different branches<br/>\n        - You need to decide which changes to keep<br/><br/>\n\n        <b>Conflict Resolution Process:</b><br/>\n        1. Git shows conflict markers<br/>\n        2. Edit file to choose correct version<br/>\n        3. Mark as resolved<br/>\n        4. Commit the resolution\n\n        <b>Example Conflict:</b>\n        <pre style=\"background: white; padding: 10px; border-radius: 3px; border-left: 4px solid #dc3545;\">\n<<<<<<< HEAD\nprice = quantity * 10  # Original price calculation\n=======\nprice = quantity * 15  # New price calculation from feature branch\n>>>>>>> feature/new-pricing\n        </pre>\n\n        <b>Resolution Steps:</b>\n        <pre style=\"background: white; padding: 10px; border-radius: 3px;\">\n# 1. See conflicting files\ngit status\n\n# 2. Open each file, edit to resolve\n#    Remove <<<<<<<, =======, >>>>>>> lines\n#    Keep the correct code\n\n# 3. Mark as resolved\ngit add resolved-file.py\n\n# 4. Complete merge\ngit commit -m \"Merge branch 'feature/new-pricing'\"\n        </pre>\n    </div>\n\n    <hr/>\n\n    <h3>Hands-On Exercise: Branching Simulation</h3>\n    <b>Task:</b> Simulate a team working on Warehouse Manager with branching.<br/><br/>\n\n    <b>Setup:</b>\n    <div style=\"background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;\">\n        <b>Team Roles:</b><br/>\n        ‚Ä¢ <b>Developer A</b>: Add \"Filter by Category\" feature<br/>\n        ‚Ä¢ <b>Developer B</b>: Fix \"Price Calculation Bug\"<br/>\n        ‚Ä¢ <b>Developer C</b>: Update documentation<br/><br/>\n\n        <b>Workflow:</b><br/>\n        1. All start from main branch<br/>\n        2. Each creates their own feature branch<br/>\n        3. Make changes independently<br/>\n        4. Create pull requests on GitHub<br/>\n        5. Merge one at a time, handle conflicts<br/>\n    </div>\n\n    <b>Step-by-Step Guide:</b>\n    <div style=\"background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;\">\n        <b>Phase 1: Parallel Development</b>\n        <pre style=\"background: white; padding: 10px; border-radius: 3px;\">\n# Developer A (Filter Feature)\ngit checkout -b feature/filter\necho \"def filter_by_category(): pass\" > filter.py\ngit add .\ngit commit -m \"feat(filter): add category filtering\"\n\n# Developer B (Bug Fix)\ngit checkout main\ngit checkout -b fix/price-calculation\n# Edit warehouse.py to fix bug\ngit commit -m \"fix(price): correct tax calculation\"\n\n# Developer C (Docs)\ngit checkout main\ngit checkout -b docs/update\n# Update README.md\ngit commit -m \"docs: add installation instructions\"\n        </pre>\n\n        <b>Phase 2: Create Conflict Scenario</b>\n        <pre style=\"background: white; padding: 10px; border-radius: 3px;\">\n# Both Developer A and Developer B modify the same function\n# In warehouse.py:\n# Developer A changes line 45: return price * 1.15\n# Developer B changes line 45: return price * 1.20\n        </pre>\n\n        <b>Phase 3: Merge and Resolve</b>\n        <pre style=\"background: white; padding: 10px; border-radius: 3px;\">\n# Merge Developer B's fix first\ngit checkout main\ngit merge fix/price-calculation\n\n# Try to merge Developer A's feature\ngit merge feature/filter  # CONFLICT!\n\n# Resolve conflict, then:\ngit add warehouse.py\ngit commit -m \"Merge: combine filter feature with price fix\"\n        </pre>\n    </div>\n\n    <hr/>\n\n    <h3>Advanced Git Techniques</h3>\n\n    <b>Interactive Rebase</b>\n    <div style=\"background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;\">\n        <b>Clean up commit history before merging:</b>\n        <pre style=\"background: white; padding: 10px; border-radius: 3px;\">\ngit checkout feature/branch\ngit rebase -i main\n        </pre>\n        \n        <b>Options in rebase:</b><br/>\n        ‚Ä¢ <code>pick</code>: Keep commit as-is<br/>\n        ‚Ä¢ <code>reword</code>: Change commit message<br/>\n        ‚Ä¢ <code>edit</code>: Modify commit content<br/>\n        ‚Ä¢ <code>squash</code>: Combine with previous commit<br/>\n        ‚Ä¢ <code>fixup</code>: Combine and discard message<br/>\n        ‚Ä¢ <code>drop</code>: Remove commit\n    </div>\n\n    <b>Stashing Changes</b>\n    <div style=\"background-color: #f9f9f9; padding: 15px; margin: 10px 0; border-radius: 5px;\">\n        <b>Save work without committing:</b>\n        <pre style=\"background: white; padding: 10px; border-radius: 3px;\">\n# Save current work\ngit stash\n\n# Switch branches\ngit checkout other-branch\n\n# Later, get work back\ngit stash pop\n        </pre>\n    </div>\n\n    <hr/>\n\n    <div class=\"assignment-box\">\n        <h4>Assignment: Complete Branching Workflow</h4>\n        <p>Implement a full Git workflow for your Warehouse Manager.</p>\n        \n        <div style=\"background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;\">\n            <b>Part 1: Set Up Branch Structure</b><br/>\n            1. Create main branch (if not exists)<br/>\n            2. Create develop branch from main<br/>\n            3. Set up remote tracking for both<br/><br/>\n            \n            <b>Part 2: Feature Development</b><br/>\n            1. Create <code>feature/export-data</code> branch<br/>\n            2. Add export to CSV functionality<br/>\n            3. Make at least 3 meaningful commits<br/>\n            4. Push to GitHub<br/><br/>\n            \n            <b>Part 3: Bug Fix Parallel</b><br/>\n            1. Create <code>hotfix/login-bug</code> from main<br/>\n            2. Fix a bug in login functionality<br/>\n            3. Commit with proper message<br/><br/>\n            \n            <b>Part 4: Merge Operations</b><br/>\n            1. Merge hotfix to main<br/>\n            2. Merge feature to develop<br/>\n            3. Create artificial conflict and resolve it<br/>\n            4. Delete merged branches<br/><br/>\n            \n            <b>Part 5: Pull Request Practice</b><br/>\n            1. Create pull request on GitHub<br/>\n            2. Add description and labels<br/>\n            3. Request review from a classmate\n        </div>\n        \n        <p><b>Bonus Challenge:</b> Use interactive rebase to squash your 3 feature commits into 1 clean commit before merging.</p>\n    </div>\n\n    <div style=\"background-color: #d4edda; padding: 15px; margin: 20px 0; border-radius: 5px; border-left: 5px solid #155724;\">\n        <h4>üéØ Key Takeaway</h4>\n        <p>Branches are your playground for experimentation. They let you try new ideas without breaking what works. A good branching strategy keeps your project organized and your team productive.</p>\n        <p><b>Remember:</b> One feature, one branch. Small commits, clear messages.</p>\n    </div>"
            },
            "13-3": {
                "icon": "fa-project-diagram",
                "title": "SDLC: Planning to Testing",
                "html": "<h1>Week 13, Day 3: Software Development Life Cycle (SDLC)</h1>\n    <p>Today we explore how professional software is built from idea to deployment, covering planning, design, development, and testing phases.</p>\n\n    <div class=\"analogy-box\">\n        <b>Analogy: Building a House üè†</b><br/>\n        <ul style=\"margin-top: 10px;\">\n            <li><b>Requirements</b> = Client's wish list (3 bedrooms, garage, garden)</li>\n            <li><b>Design</b> = Blueprints and architectural plans</li>\n            <li><b>Development</b> = Construction phase</li>\n            <li><b>Testing</b> = Building inspections</li>\n            <li><b>Deployment</b> = Moving in day</li>\n            <li><b>Maintenance</b> = Repairs and renovations</li>\n        </ul>\n    </div>\n\n    <h3>Key Topics</h3>\n    <ul>\n        <li>SDLC Models: Waterfall, Agile, DevOps</li>\n        <li>Requirements Gathering & Analysis</li>\n        <li>System Design & Architecture</li>\n        <li>Development Methodologies</li>\n        <li>Testing Strategies & Quality Assurance</li>\n    </ul>\n\n    <h3>In-Depth Explanation</h3>\n\n    <b>a. SDLC Phases Overview</b>\n    <div style=\"background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;\">\n        <b>The 7 Phases of SDLC:</b><br/>\n        <div style=\"display: grid; grid-template-columns: repeat(7, 1fr); gap: 5px; margin: 15px 0; text-align: center;\">\n            <div style=\"background: #3498db; color: white; padding: 10px; border-radius: 5px;\">1. Planning</div>\n            <div style=\"background: #2ecc71; color: white; padding: 10px; border-radius: 5px;\">2. Analysis</div>\n            <div style=\"background: #e74c3c; color: white; padding: 10px; border-radius: 5px;\">3. Design</div>\n            <div style=\"background: #f39c12; color: white; padding: 10px; border-radius: 5px;\">4. Development</div>\n            <div style=\"background: #9b59b6; color: white; padding: 10px; border-radius: 5px;\">5. Testing</div>\n            <div style=\"background: #1abc9c; color: white; padding: 10px; border-radius: 5px;\">6. Deployment</div>\n            <div style=\"background: #34495e; color: white; padding: 10px; border-radius: 5px;\">7. Maintenance</div>\n        </div>\n\n        <b>Phase Details:</b>\n        <table style=\"width:100%; border-collapse: collapse; margin: 10px 0;\">\n            <tr>\n                <td style=\"border: 1px solid #ddd; padding: 8px; background-color: #3498db20;\"><b>Planning</b></td>\n                <td style=\"border: 1px solid #ddd; padding: 8px;\">Define scope, resources, timeline, costs</td>\n            </tr>\n            <tr>\n                <td style=\"border: 1px solid #ddd; padding: 8px; background-color: #2ecc7120;\"><b>Analysis</b></td>\n                <td style=\"border: 1px solid #ddd; padding: 8px;\">Gather requirements, define what to build</td>\n            </tr>\n            <tr>\n                <td style=\"border: 1px solid #ddd; padding: 8px; background-color: #e74c3c20;\"><b>Design</b></td>\n                <td style=\"border: 1px solid #ddd; padding: 8px;\">Create architecture, UI mockups, database design</td>\n            </tr>\n            <tr>\n                <td style=\"border: 1px solid #ddd; padding: 8px; background-color: #f39c1220;\"><b>Development</b></td>\n                <td style=\"border: 1px solid #ddd; padding: 8px;\">Write code, implement features</td>\n            </tr>\n            <tr>\n                <td style=\"border: 1px solid #ddd; padding: 8px; background-color: #9b59b620;\"><b>Testing</b></td>\n                <td style=\"border: 1px solid #ddd; padding: 8px;\">Find bugs, ensure quality, validate requirements</td>\n            </tr>\n            <tr>\n                <td style=\"border: 1px solid #ddd; padding: 8px; background-color: #1abc9c20;\"><b>Deployment</b></td>\n                <td style=\"border: 1px solid #ddd; padding: 8px;\">Release to production, user training</td>\n            </tr>\n            <tr>\n                <td style=\"border: 1px solid #ddd; padding: 8px; background-color: #34495e20;\"><b>Maintenance</b></td>\n                <td style=\"border: 1px solid #ddd; padding: 8px;\">Updates, bug fixes, enhancements</td>\n            </tr>\n        </table>\n    </div>\n\n    <hr/>\n\n    <b>b. SDLC Models Comparison</b>\n    <div style=\"background-color: #f9f9f9; padding: 15px; margin: 10px 0; border-radius: 5px;\">\n        <table style=\"width:100%; border-collapse: collapse; margin: 10px 0;\">\n            <tr style=\"background-color: #2c3e50; color: white;\">\n                <th style=\"padding: 10px;\">Model</th>\n                <th style=\"padding: 10px;\">Description</th>\n                <th style=\"padding: 10px;\">When to Use</th>\n                <th style=\"padding: 10px;\">Pros & Cons</th>\n            </tr>\n            <tr>\n                <td style=\"border: 1px solid #ddd; padding: 8px;\"><b>Waterfall</b></td>\n                <td style=\"border: 1px solid #ddd; padding: 8px;\">Linear, sequential phases</td>\n                <td style=\"border: 1px solid #ddd; padding: 8px;\">Well-defined requirements, government projects</td>\n                <td style=\"border: 1px solid #ddd; padding: 8px;\">‚úÖ Clear structure<br/>‚ùå Inflexible to changes</td>\n            </tr>\n            <tr>\n                <td style=\"border: 1px solid #ddd; padding: 8px;\"><b>Agile</b></td>\n                <td style=\"border: 1px solid #ddd; padding: 8px;\">Iterative, incremental</td>\n                <td style=\"border: 1px solid #ddd; padding: 8px;\">Changing requirements, startups</td>\n                <td style=\"border: 1px solid #ddd; padding: 8px;\">‚úÖ Flexible, customer-focused<br/>‚ùå Requires discipline</td>\n            </tr>\n            <tr>\n                <td style=\"border: 1px solid #ddd; padding: 8px;\"><b>Scrum</b></td>\n                <td style=\"border: 1px solid #ddd; padding: 8px;\">Agile framework with sprints</td>\n                <td style=\"border: 1px solid #ddd; padding: 8px;\">Complex projects, team collaboration</td>\n                <td style=\"border: 1px solid #ddd; padding: 8px;\">‚úÖ Regular delivery, transparency<br/>‚ùå Meetings overhead</td>\n            </tr>\n            <tr>\n                <td style=\"border: 1px solid #ddd; padding: 8px;\"><b>DevOps</b></td>\n                <td style=\"border: 1px solid #ddd; padding: 8px;\">Development + Operations</td>\n                <td style=\"border: 1px solid #ddd; padding: 8px;\">Continuous delivery, cloud projects</td>\n                <td style=\"border: 1px solid #ddd; padding: 8px;\">‚úÖ Fast deployment, automation<br/>‚ùå Cultural shift needed</td>\n            </tr>\n        </table>\n\n        <b>Visual Comparison:</b><br/>\n        <div style=\"display: flex; justify-content: space-between; margin-top: 15px;\">\n            <div style=\"text-align: center;\">\n                <b>Waterfall</b><br/>\n                üìã ‚Üí üé® ‚Üí üî® ‚Üí üß™ ‚Üí üöÄ<br/>\n                (One direction)\n            </div>\n            <div style=\"text-align: center;\">\n                <b>Agile</b><br/>\n                üîÑ (Plan ‚Üí Build ‚Üí Test ‚Üí Review)<br/>\n                (Repeat in cycles)\n            </div>\n            <div style=\"text-align: center;\">\n                <b>DevOps</b><br/>\n                üî® ‚ÜîÔ∏è üöÄ<br/>\n                (Continuous loop)\n            </div>\n        </div>\n    </div>\n\n    <hr/>\n\n    <b>c. Requirements Gathering & Analysis</b>\n    <div style=\"background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;\">\n        <b>Types of Requirements:</b><br/>\n        <div style=\"display: flex; gap: 20px; margin: 10px 0;\">\n            <div style=\"flex: 1; background: white; padding: 10px; border-radius: 5px;\">\n                <b>Functional</b> (What it does)<br/>\n                ‚Ä¢ User can login<br/>\n                ‚Ä¢ System calculates tax<br/>\n                ‚Ä¢ Report generates PDF<br/>\n            </div>\n            <div style=\"flex: 1; background: white; padding: 10px; border-radius: 5px;\">\n                <b>Non-Functional</b> (How it does)<br/>\n                ‚Ä¢ Loads in < 2 seconds<br/>\n                ‚Ä¢ Supports 1000 users<br/>\n                ‚Ä¢ 99.9% uptime<br/>\n            </div>\n        </div>\n\n        <b>Requirements Template:</b>\n        <pre style=\"background: white; padding: 10px; border-radius: 3px;\">\nID: WM-001\nTitle: Product Search Feature\nType: Functional\nPriority: High\nDescription: Users should be able to search products by name, category, or price range.\nAcceptance Criteria:\n1. Search box appears in header\n2. Results update as user types\n3. Filters by category dropdown\n4. Sorts by price/name\n5. Shows \"No results\" message\n        </pre>\n    </div>\n\n    <hr/>\n\n    <b>d. System Design & Architecture</b>\n    <div style=\"background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;\">\n        <b>Warehouse Manager Architecture Example:</b><br/>\n        <div style=\"text-align: center; margin: 15px 0; font-family: monospace;\">\n            ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n            ‚îÇ   User Interface ‚îÇ\n            ‚îÇ   (Tkinter GUI)  ‚îÇ\n            ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n                     ‚Üì\n            ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n            ‚îÇ Business Logic  ‚îÇ\n            ‚îÇ  (Python Code)  ‚îÇ\n            ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n                     ‚Üì\n            ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n            ‚îÇ Data Access Layer‚îÇ\n            ‚îÇ   (SQLite DB)   ‚îÇ\n            ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n        </div>\n\n        <b>Database Schema Design:</b>\n        <pre style=\"background: white; padding: 10px; border-radius: 3px;\">\n-- Products Table\nCREATE TABLE products (\n    id INTEGER PRIMARY KEY,\n    name TEXT NOT NULL,\n    category TEXT,\n    price REAL,\n    stock INTEGER,\n    created_at TIMESTAMP\n);\n\n-- Users Table\nCREATE TABLE users (\n    id INTEGER PRIMARY KEY,\n    username TEXT UNIQUE,\n    password_hash TEXT,\n    role TEXT  -- 'admin' or 'staff'\n);\n        </pre>\n    </div>\n\n    <hr/>\n\n    <b>e. Development Methodologies</b>\n    <div style=\"background-color: #f9f9f9; padding: 15px; margin: 10px 0; border-radius: 5px;\">\n        <b>Agile Scrum Framework:</b><br/>\n        <div style=\"display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin: 15px 0;\">\n            <div style=\"background: #e3f2fd; padding: 10px; border-radius: 5px; text-align: center;\">\n                <b>Product Backlog</b><br/>\n                All features to build\n            </div>\n            <div style=\"background: #f3e5f5; padding: 10px; border-radius: 5px; text-align: center;\">\n                <b>Sprint Planning</b><br/>\n                2-week work cycles\n            </div>\n            <div style=\"background: #e8f5e8; padding: 10px; border-radius: 5px; text-align: center;\">\n                <b>Daily Standup</b><br/>\n                15-min team sync\n            </div>\n            <div style=\"background: #fff3e0; padding: 10px; border-radius: 5px; text-align: center;\">\n                <b>Sprint Review</b><br/>\n                Demo & feedback\n            </div>\n        </div>\n\n        <b>Kanban Board Example:</b><br/>\n        <div style=\"display: grid; grid-template-columns: repeat(4, 1fr); gap: 5px; margin: 15px 0; min-height: 200px; background: #f5f5f5; padding: 10px; border-radius: 5px;\">\n            <div style=\"background: #bbdefb; padding: 10px; border-radius: 3px;\">\n                <b>To Do</b><br/>\n                ‚Ä¢ Add export feature<br/>\n                ‚Ä¢ Fix login bug<br/>\n                ‚Ä¢ Update documentation\n            </div>\n            <div style=\"background: #fff9c4; padding: 10px; border-radius: 3px;\">\n                <b>In Progress</b><br/>\n                ‚Ä¢ Search functionality<br/>\n                ‚Ä¢ Unit tests\n            </div>\n            <div style=\"background: #c8e6c9; padding: 10px; border-radius: 3px;\">\n                <b>Review</b><br/>\n                ‚Ä¢ Database optimization\n            </div>\n            <div style=\"background: #dcedc8; padding: 10px; border-radius: 3px;\">\n                <b>Done</b><br/>\n                ‚Ä¢ User authentication<br/>\n                ‚Ä¢ Basic CRUD operations\n            </div>\n        </div>\n    </div>\n\n    <hr/>\n\n    <b>f. Testing Strategies</b>\n    <div style=\"background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;\">\n        <b>Testing Pyramid:</b><br/>\n        <div style=\"text-align: center; margin: 15px 0;\">\n            <div style=\"background: #4caf50; color: white; padding: 20px; width: 200px; margin: 0 auto;\">\n                <b>E2E Tests</b><br/>\n                Few, high-level\n            </div>\n            <div style=\"background: #ff9800; color: white; padding: 20px; width: 300px; margin: 0 auto;\">\n                <b>Integration Tests</b><br/>\n                Medium amount\n            </div>\n            <div style=\"background: #f44336; color: white; padding: 20px; width: 400px; margin: 0 auto;\">\n                <b>Unit Tests</b><br/>\n                Many, low-level\n            </div>\n        </div>\n\n        <b>Test Types Comparison:</b>\n        <table style=\"width:100%; border-collapse: collapse; margin: 10px 0;\">\n            <tr>\n                <td style=\"border: 1px solid #ddd; padding: 8px;\"><b>Unit Testing</b></td>\n                <td style=\"border: 1px solid #ddd; padding: 8px;\">Test individual functions/methods</td>\n                <td style=\"border: 1px solid #ddd; padding: 8px;\"><code>test_calculate_total()</code></td>\n            </tr>\n            <tr>\n                <td style=\"border: 1px solid #ddd; padding: 8px;\"><b>Integration Testing</b></td>\n                <td style=\"border: 1px solid #ddd; padding: 8px;\">Test component interactions</td>\n                <td style=\"border: 1px solid #ddd; padding: 8px;\"><code>test_database_connection()</code></td>\n            </tr>\n            <tr>\n                <td style=\"border: 1px solid #ddd; padding: 8px;\"><b>System Testing</b></td>\n                <td style=\"border: 1px solid #ddd; padding: 8px;\">Test complete system</td>\n                <td style=\"border: 1px solid #ddd; padding: 8px;\"><code>test_full_workflow()</code></td>\n            </tr>\n            <tr>\n                <td style=\"border: 1px solid #ddd; padding: 8px;\"><b>UAT</b></td>\n                <td style=\"border: 1px solid #ddd; padding: 8px;\">User Acceptance Testing</td>\n                <td style=\"border: 1px solid #ddd; padding: 8px;\">Real users test in production-like environment</td>\n            </tr>\n        </table>\n    </div>\n\n    <hr/>\n\n    <h3>Hands-On Exercise: SDLC for Warehouse Manager</h3>\n    <b>Task:</b> Apply SDLC principles to plan version 2.0 of Warehouse Manager.<br/><br/>\n\n    <b>Phase 1: Requirements Gathering</b>\n    <div style=\"background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;\">\n        <b>Stakeholder Interviews:</b><br/>\n        ‚Ä¢ Warehouse Manager: \"Need barcode scanning\"<br/>\n        ‚Ä¢ Sales Team: \"Want sales reports\"<br/>\n        ‚Ä¢ Accountant: \"Need tax calculations\"<br/><br/>\n\n        <b>Requirements Document:</b>\n        <pre style=\"background: white; padding: 10px; border-radius: 3px;\">\nProject: Warehouse Manager v2.0\nObjectives:\n1. Reduce inventory counting time by 50%\n2. Generate monthly sales reports\n3. Automate tax calculations\n\nKey Features:\n- Barcode scanner integration\n- Report generation (PDF/Excel)\n- Multi-user roles (admin, staff, viewer)\n- Email notifications for low stock\n        </pre>\n    </div>\n\n    <b>Phase 2: System Design</b>\n    <div style=\"background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;\">\n        <b>Architecture Upgrade:</b>\n        <pre style=\"background: white; padding: 10px; border-radius: 3px;\">\nCurrent: Desktop App (Tkinter + SQLite)\n\nv2.0 Options:\nOption A: Web Application (Flask/Django)\nOption B: Desktop + Cloud Sync\nOption C: Mobile App + Web Dashboard\n\nRecommended: Option B\n- Keep desktop for speed\n- Add cloud backup\n- Web dashboard for reports\n        </pre>\n\n        <b>Database Schema v2:</b>\n        <pre style=\"background: white; padding: 10px; border-radius: 3px;\">\n-- New tables for v2.0\nCREATE TABLE barcodes (\n    product_id INTEGER,\n    barcode TEXT UNIQUE,\n    FOREIGN KEY(product_id) REFERENCES products(id)\n);\n\nCREATE TABLE reports (\n    id INTEGER PRIMARY KEY,\n    type TEXT,\n    generated_at TIMESTAMP,\n    data JSON\n);\n\nCREATE TABLE notifications (\n    id INTEGER PRIMARY KEY,\n    user_id INTEGER,\n    message TEXT,\n    sent_at TIMESTAMP\n);\n        </pre>\n    </div>\n\n    <b>Phase 3: Sprint Planning</b>\n    <div style=\"background-color: #f9f9f9; padding: 15px; margin: 10px 0; border-radius: 5px;\">\n        <b>Sprint 1 (2 weeks): Authentication & Roles</b><br/>\n        ‚Ä¢ User login system<br/>\n        ‚Ä¢ Role-based permissions<br/>\n        ‚Ä¢ Password reset<br/><br/>\n\n        <b>Sprint 2 (2 weeks): Barcode Integration</b><br/>\n        ‚Ä¢ Barcode scanning UI<br/>\n        ‚Ä¢ Barcode database<br/>\n        ‚Ä¢ Quick add products<br/><br/>\n\n        <b>Sprint 3 (2 weeks): Reporting</b><br/>\n        ‚Ä¢ Sales reports<br/>\n        ‚Ä¢ Inventory reports<br/>\n        ‚Ä¢ Export functionality\n    </div>\n\n    <hr/>\n\n    <div class=\"assignment-box\">\n        <h4>Assignment: Complete SDLC Documentation</h4>\n        <p>Create comprehensive SDLC documentation for Warehouse Manager v2.0.</p>\n        \n        <div style=\"background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;\">\n            <b>Part 1: Requirements Specification</b><br/>\n            1. Create 10 functional requirements<br/>\n            2. Create 5 non-functional requirements<br/>\n            3. Prioritize (Must have, Should have, Could have)<br/>\n            4. Define acceptance criteria for each<br/><br/>\n            \n            <b>Part 2: System Design</b><br/>\n            1. Draw architecture diagram<br/>\n            2. Design database schema with relationships<br/>\n            3. Create UI wireframes (paper or digital)<br/>\n            4. Choose technology stack<br/><br/>\n            \n            <b>Part 3: Project Planning</b><br/>\n            1. Create project timeline (Gantt chart)<br/>\n            2. Estimate effort (in hours)<br/>\n            3. Identify risks and mitigations<br/>\n            4. Define success metrics<br/><br/>\n            \n            <b>Part 4: Testing Strategy</b><br/>\n            1. Create test plan document<br/>\n            2. List test cases for key features<br/>\n            3. Define testing environments<br/>\n            4. Plan UAT with sample users\n        </div>\n        \n        <p><b>Bonus Challenge:</b> Create a project proposal presentation for \"investors\" (your classmates) pitching Warehouse Manager v2.0.</p>\n    </div>\n\n    <div style=\"background-color: #d4edda; padding: 15px; margin: 20px 0; border-radius: 5px; border-left: 5px solid #155724;\">\n        <h4>üéØ Key Takeaway</h4>\n        <p>Good software isn't built by accident. The SDLC provides a roadmap from idea to product. Understanding these phases helps you build better software faster and with fewer bugs.</p>\n        <p><b>Remember:</b> Plan twice, code once. Documentation is as important as the code itself.</p>\n    </div>"
            },
            "13-4": {
                "icon": "fa-vial",
                "title": "Unit Testing & Quality Assurance",
                "html": "<h1>Week 13, Day 4: Unit Testing & Quality Assurance</h1>\n    <p>Today we learn how to write tests that ensure your code works correctly, catches bugs early, and makes your software reliable and maintainable.</p>\n\n    <div class=\"analogy-box\">\n        <b>Analogy: Car Manufacturing üöó</b><br/>\n        <ul style=\"margin-top: 10px;\">\n            <li><b>Unit Testing</b> = Testing individual parts (engine, brakes, lights)</li>\n            <li><b>Integration Testing</b> = Testing parts work together (engine + transmission)</li>\n            <li><b>Regression Testing</b> = After fixing a tire issue, making sure brakes still work</li>\n            <li><b>Test-Driven Development</b> = Designing tests before building the car</li>\n            <li><b>Continuous Integration</b> = Assembly line that tests each part as it's added</li>\n        </ul>\n    </div>\n\n    <h3>Key Topics</h3>\n    <ul>\n        <li>Why Test? Benefits of Automated Testing</li>\n        <li>Python unittest Framework</li>\n        <li>Test-Driven Development (TDD)</li>\n        <li>Mocking & Test Isolation</li>\n        <li>Testing Best Practices</li>\n        <li>Continuous Integration Basics</li>\n    </ul>\n\n    <h3>In-Depth Explanation</h3>\n\n    <b>a. Why Write Tests?</b>\n    <div style=\"background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;\">\n        <b>The Testing Payoff:</b><br/>\n        <div style=\"display: flex; justify-content: space-between; margin: 15px 0;\">\n            <div style=\"text-align: center; background: #d4edda; padding: 10px; border-radius: 5px; flex: 1; margin: 0 5px;\">\n                <b>üöÄ Speed</b><br/>\n                Catch bugs in 2 minutes vs. 2 days\n            </div>\n            <div style=\"text-align: center; background: #d1ecf1; padding: 10px; border-radius: 5px; flex: 1; margin: 0 5px;\">\n                <b>üõ°Ô∏è Safety</b><br/>\n                Change code without fear\n            </div>\n            <div style=\"text-align: center; background: #fff3cd; padding: 10px; border-radius: 5px; flex: 1; margin: 0 5px;\">\n                <b>üìö Documentation</b><br/>\n                Tests show how code should work\n            </div>\n            <div style=\"text-align: center; background: #f8d7da; padding: 10px; border-radius: 5px; flex: 1; margin: 0 5px;\">\n                <b>üíº Professional</b><br/>\n                Industry standard practice\n            </div>\n        </div>\n\n        <b>Cost of Bugs:</b><br/>\n        <div style=\"text-align: center; margin: 15px 0;\">\n            Requirements ‚Üí Design ‚Üí Development ‚Üí Testing ‚Üí Production<br/>\n            $1 ‚Üí $10 ‚Üí $100 ‚Üí $1,000 ‚Üí $10,000+<br/>\n            <small>(Cost to fix a bug increases exponentially at each stage)</small>\n        </div>\n    </div>\n\n    <hr/>\n\n    <b>b. Python unittest Framework</b>\n    <div style=\"background-color: #f9f9f9; padding: 15px; margin: 10px 0; border-radius: 5px;\">\n        <b>Basic Test Structure:</b>\n        <pre style=\"background: white; padding: 10px; border-radius: 3px;\">\nimport unittest\n\n# Code to test\ndef add(a, b):\n    return a + b\n\n# Test class\nclass TestMathFunctions(unittest.TestCase):\n    \n    def test_add_positive_numbers(self):\n        result = add(2, 3)\n        self.assertEqual(result, 5)  # Assertion\n    \n    def test_add_negative_numbers(self):\n        self.assertEqual(add(-1, -1), -2)\n    \n    def test_add_zero(self):\n        self.assertEqual(add(5, 0), 5)\n\nif __name__ == '__main__':\n    unittest.main()\n        </pre>\n\n        <b>Common Assertions:</b>\n        <table style=\"width:100%; border-collapse: collapse; margin: 10px 0;\">\n            <tr>\n                <td style=\"border: 1px solid #ddd; padding: 8px;\"><code>self.assertEqual(a, b)</code></td>\n                <td style=\"border: 1px solid #ddd; padding: 8px;\">a == b</td>\n            </tr>\n            <tr>\n                <td style=\"border: 1px solid #ddd; padding: 8px;\"><code>self.assertNotEqual(a, b)</code></td>\n                <td style=\"border: 1px solid #ddd; padding: 8px;\">a != b</td>\n            </tr>\n            <tr>\n                <td style=\"border: 1px solid #ddd; padding: 8px;\"><code>self.assertTrue(x)</code></td>\n                <td style=\"border: 1px solid #ddd; padding: 8px;\">bool(x) is True</td>\n            </tr>\n            <tr>\n                <td style=\"border: 1px solid #ddd; padding: 8px;\"><code>self.assertFalse(x)</code></td>\n                <td style=\"border: 1px solid #ddd; padding: 8px;\">bool(x) is False</td>\n            </tr>\n            <tr>\n                <td style=\"border: 1px solid #ddd; padding: 8px;\"><code>self.assertIsNone(x)</code></td>\n                <td style=\"border: 1px solid #ddd; padding: 8px;\">x is None</td>\n            </tr>\n            <tr>\n                <td style=\"border: 1px solid #ddd; padding: 8px;\"><code>self.assertIn(a, b)</code></td>\n                <td style=\"border: 1px solid #ddd; padding: 8px;\">a in b</td>\n            </tr>\n            <tr>\n                <td style=\"border: 1px solid #ddd; padding: 8px;\"><code>self.assertRaises(Error, func)</code></td>\n                <td style=\"border: 1px solid #ddd; padding: 8px;\">func raises Error</td>\n            </tr>\n        </table>\n    </div>\n\n    <hr/>\n\n    <b>c. Test-Driven Development (TDD) Cycle</b>\n    <div style=\"background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;\">\n        <b>The Red-Green-Refactor Cycle:</b><br/>\n        <div style=\"text-align: center; margin: 15px 0;\">\n            <div style=\"display: inline-block; background: #f8d7da; color: #721c24; padding: 15px; border-radius: 50%; width: 100px; height: 100px; line-height: 70px;\">\n                <b>1. RED</b><br/>Write failing test\n            </div>\n            ‚Üí\n            <div style=\"display: inline-block; background: #d4edda; color: #155724; padding: 15px; border-radius: 50%; width: 100px; height: 100px; line-height: 70px;\">\n                <b>2. GREEN</b><br/>Write minimal code to pass\n            </div>\n            ‚Üí\n            <div style=\"display: inline-block; background: #d1ecf1; color: #0c5460; padding: 15px; border-radius: 50%; width: 100px; height: 100px; line-height: 70px;\">\n                <b>3. REFACTOR</b><br/>Improve code\n            </div>\n        </div>\n\n        <b>TDD Example: Calculate Discount</b>\n        <pre style=\"background: white; padding: 10px; border-radius: 3px;\">\n# Step 1: Write test (RED)\ndef test_calculate_discount(self):\n    result = calculate_discount(100, 10)  # Function doesn't exist yet!\n    self.assertEqual(result, 90)\n\n# Step 2: Implement (GREEN)\ndef calculate_discount(price, discount):\n    return price - discount  # Simple implementation\n\n# Step 3: Refactor\ndef calculate_discount(price, discount):\n    if discount > price:\n        return 0\n    return price - discount\n\n# Step 4: Add more tests\ndef test_discount_exceeds_price(self):\n    result = calculate_discount(50, 60)\n    self.assertEqual(result, 0)\n        </pre>\n    </div>\n\n    <hr/>\n\n    <b>d. Testing Warehouse Manager Code</b>\n    <div style=\"background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;\">\n        <b>Example: Testing Product Class</b>\n        <pre style=\"background: white; padding: 10px; border-radius: 3px;\">\n# product.py\nclass Product:\n    def __init__(self, name, price, quantity):\n        self.name = name\n        self.price = price\n        self.quantity = quantity\n    \n    def total_value(self):\n        return self.price * self.quantity\n    \n    def apply_discount(self, percentage):\n        if 0 <= percentage <= 100:\n            self.price *= (1 - percentage/100)\n\n# test_product.py\nimport unittest\nfrom product import Product\n\nclass TestProduct(unittest.TestCase):\n    \n    def setUp(self):\n        \"\"\"Run before each test\"\"\"\n        self.product = Product(\"Laptop\", 1000, 5)\n    \n    def tearDown(self):\n        \"\"\"Run after each test\"\"\"\n        pass  # Clean up if needed\n    \n    def test_total_value(self):\n        self.assertEqual(self.product.total_value(), 5000)\n    \n    def test_apply_discount_valid(self):\n        self.product.apply_discount(10)  # 10% discount\n        self.assertEqual(self.product.price, 900)\n    \n    def test_apply_discount_invalid_high(self):\n        self.product.apply_discount(150)  # Should do nothing\n        self.assertEqual(self.product.price, 1000)\n    \n    def test_apply_discount_invalid_low(self):\n        self.product.apply_discount(-10)  # Should do nothing\n        self.assertEqual(self.product.price, 1000)\n\nif __name__ == '__main__':\n    unittest.main()\n        </pre>\n    </div>\n\n    <hr/>\n\n    <b>e. Mocking & Test Isolation</b>\n    <div style=\"background-color: #f9f9f9; padding: 15px; margin: 10px 0; border-radius: 5px;\">\n        <b>Why Mock?</b><br/>\n        ‚Ä¢ Test database code without real database<br/>\n        ‚Ä¢ Test network calls without internet<br/>\n        ‚Ä¢ Isolate unit under test<br/>\n        ‚Ä¢ Speed up tests<br/><br/>\n\n        <b>Example: Mocking Database</b>\n        <pre style=\"background: white; padding: 10px; border-radius: 3px;\">\nfrom unittest.mock import Mock, patch\nimport sqlite3\n\n# Function that uses database\ndef get_product_count():\n    conn = sqlite3.connect('warehouse.db')\n    cursor = conn.cursor()\n    cursor.execute(\"SELECT COUNT(*) FROM products\")\n    count = cursor.fetchone()[0]\n    conn.close()\n    return count\n\n# Test with mock\nclass TestDatabaseFunctions(unittest.TestCase):\n    \n    @patch('sqlite3.connect')\n    def test_get_product_count(self, mock_connect):\n        # Create mock objects\n        mock_cursor = Mock()\n        mock_conn = Mock()\n        \n        # Configure mock chain\n        mock_connect.return_value = mock_conn\n        mock_conn.cursor.return_value = mock_cursor\n        mock_cursor.fetchone.return_value = (42,)  # Return tuple\n        \n        # Call function\n        result = get_product_count()\n        \n        # Verify\n        self.assertEqual(result, 42)\n        mock_cursor.execute.assert_called_with(\"SELECT COUNT(*) FROM products\")\n        mock_conn.close.assert_called_once()\n        </pre>\n    </div>\n\n    <hr/>\n\n    <b>f. Test Organization & Best Practices</b>\n    <div style=\"background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;\">\n        <b>Project Structure:</b>\n        <pre style=\"background: white; padding: 10px; border-radius: 3px;\">\nwarehouse_manager/\n‚îú‚îÄ‚îÄ src/\n‚îÇ   ‚îú‚îÄ‚îÄ __init__.py\n‚îÇ   ‚îú‚îÄ‚îÄ product.py\n‚îÇ   ‚îú‚îÄ‚îÄ database.py\n‚îÇ   ‚îî‚îÄ‚îÄ gui.py\n‚îú‚îÄ‚îÄ tests/\n‚îÇ   ‚îú‚îÄ‚îÄ __init__.py\n‚îÇ   ‚îú‚îÄ‚îÄ test_product.py\n‚îÇ   ‚îú‚îÄ‚îÄ test_database.py\n‚îÇ   ‚îî‚îÄ‚îÄ test_gui.py\n‚îú‚îÄ‚îÄ requirements.txt\n‚îî‚îÄ‚îÄ README.md\n        </pre>\n\n        <b>Running Tests:</b>\n        <pre style=\"background: white; padding: 10px; border-radius: 3px;\">\n# Run all tests\npython -m unittest discover tests\n\n# Run specific test file\npython -m unittest tests.test_product\n\n# Run with verbose output\npython -m unittest discover tests -v\n\n# Run with coverage report\ncoverage run -m unittest discover tests\ncoverage report -m\n        </pre>\n\n        <b>Testing Best Practices:</b><br/>\n        ‚úì One assertion per test (mostly)<br/>\n        ‚úì Test edge cases (empty, null, boundaries)<br/>\n        ‚úì Test fails fast (don't continue after failure)<br/>\n        ‚úì Use descriptive test names<br/>\n        ‚úì Keep tests independent<br/>\n        ‚úì Mock external dependencies<br/>\n        ‚úì Aim for >80% test coverage\n    </div>\n\n    <hr/>\n\n    <b>g. Continuous Integration (CI) Basics</b>\n    <div style=\"background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;\">\n        <b>What is CI?</b><br/>\n        ‚Ä¢ Automatically run tests on every commit<br/>\n        ‚Ä¢ Catch integration issues early<br/>\n        ‚Ä¢ Ensure code quality<br/><br/>\n\n        <b>GitHub Actions Example:</b>\n        <pre style=\"background: white; padding: 10px; border-radius: 3px;\">\n# .github/workflows/test.yml\nname: Python Tests\n\non: [push, pull_request]\n\njobs:\n  test:\n    runs-on: ubuntu-latest\n    \n    steps:\n    - uses: actions/checkout@v2\n    \n    - name: Set up Python\n      uses: actions/setup-python@v2\n      with:\n        python-version: '3.9'\n    \n    - name: Install dependencies\n      run: |\n        python -m pip install --upgrade pip\n        pip install -r requirements.txt\n    \n    - name: Run tests\n      run: |\n        python -m pytest tests/ --cov=src --cov-report=xml\n    \n    - name: Upload coverage\n      uses: codecov/codecov-action@v2\n        </pre>\n    </div>\n\n    <hr/>\n\n    <h3>Hands-On Exercise: Test Your Warehouse Manager</h3>\n    <b>Task:</b> Create comprehensive tests for your Warehouse Manager project.<br/><br/>\n\n    <b>Phase 1: Unit Tests for Core Functions</b>\n    <div style=\"background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;\">\n        <b>Test Cases to Implement:</b><br/>\n        1. <code>test_product_creation()</code> - Verify product attributes<br/>\n        2. <code>test_price_calculation()</code> - Test total value calculation<br/>\n        3. <code>test_stock_update()</code> - Verify stock increase/decrease<br/>\n        4. <code>test_discount_application()</code> - Test discount logic<br/>\n        5. <code>test_invalid_input()</code> - Test error handling<br/><br/>\n\n        <b>Example Implementation:</b>\n        <pre style=\"background: white; padding: 10px; border-radius: 3px;\">\ndef test_stock_update(self):\n    product = Product(\"Widget\", 10, 5)\n    \n    # Test add stock\n    product.add_stock(3)\n    self.assertEqual(product.quantity, 8)\n    \n    # Test remove stock\n    product.remove_stock(2)\n    self.assertEqual(product.quantity, 6)\n    \n    # Test remove too much\n    with self.assertRaises(ValueError):\n        product.remove_stock(10)\n        </pre>\n    </div>\n\n    <b>Phase 2: Integration Tests</b>\n    <div style=\"background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;\">\n        <b>Test Database Integration:</b>\n        <pre style=\"background: white; padding: 10px; border-radius: 3px;\">\nclass TestDatabaseIntegration(unittest.TestCase):\n    \n    def setUp(self):\n        # Create in-memory database for testing\n        self.conn = sqlite3.connect(':memory:')\n        self.create_test_tables()\n    \n    def tearDown(self):\n        self.conn.close()\n    \n    def test_save_and_load_product(self):\n        # Create product\n        product = Product(\"Test\", 100, 5)\n        \n        # Save to database\n        save_product(self.conn, product)\n        \n        # Load from database\n        loaded = load_product(self.conn, product.id)\n        \n        # Verify\n        self.assertEqual(loaded.name, \"Test\")\n        self.assertEqual(loaded.price, 100)\n        </pre>\n    </div>\n\n    <b>Phase 3: GUI Testing (Basic)</b>\n    <div style=\"background-color: #f9f9f9; padding: 15px; margin: 10px 0; border-radius: 5px;\">\n        <b>Test GUI Components:</b>\n        <pre style=\"background: white; padding: 10px; border-radius: 3px;\">\n# Requires: pip install pytest-tkinter\n\ndef test_add_button_creates_product():\n    # Create main window\n    app = WarehouseApp()\n    \n    # Fill in form fields\n    app.name_entry.insert(0, \"Test Product\")\n    app.price_entry.insert(0, \"99.99\")\n    app.quantity_entry.insert(0, \"10\")\n    \n    # Click add button\n    app.add_button.invoke()\n    \n    # Verify product was added\n    assert len(app.products) == 1\n    assert app.products[0].name == \"Test Product\"\n        </pre>\n    </div>\n\n    <hr/>\n\n    <div class=\"assignment-box\">\n        <h4>Assignment: Complete Test Suite</h4>\n        <p>Create a comprehensive test suite for your Warehouse Manager with at least 80% code coverage.</p>\n        \n        <div style=\"background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;\">\n            <b>Part 1: Unit Tests (50 points)</b><br/>\n            1. Test all Product class methods (10 tests minimum)<br/>\n            2. Test utility functions (calculate_tax, format_price, etc.)<br/>\n            3. Test error conditions and edge cases<br/>\n            4. Use both unittest and pytest frameworks<br/><br/>\n            \n            <b>Part 2: Integration Tests (30 points)</b><br/>\n            1. Test database operations (CRUD)<br/>\n            2. Test file I/O operations<br/>\n            3. Test module interactions<br/>\n            4. Use mocking for external dependencies<br/><br/>\n            \n            <b>Part 3: Test Infrastructure (20 points)</b><br/>\n            1. Set up test directory structure<br/>\n            2. Create test configuration<br/>\n            3. Add test requirements to requirements.txt<br/>\n            4. Create test runner script<br/><br/>\n            \n            <b>Part 4: CI Pipeline (Bonus)</b><br/>\n            1. Set up GitHub Actions workflow<br/>\n            2. Configure automated test running<br/>\n            3. Add coverage reporting\n        </div>\n        \n        <p><b>Testing Checklist:</b></p>\n        <div style=\"background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;\">\n            ‚úì Tests run without errors<br/>\n            ‚úì All business logic is covered<br/>\n            ‚úì Edge cases are tested<br/>\n            ‚úì Mock external dependencies<br/>\n            ‚úì Tests are independent<br/>\n            ‚úì Test names are descriptive<br/>\n            ‚úì Setup/teardown used properly<br/>\n            ‚úì Coverage > 80%<br/>\n            ‚úì CI pipeline working<br/>\n        </div>\n    </div>\n\n    <div style=\"background-color: #d4edda; padding: 15px; margin: 20px 0; border-radius: 5px; border-left: 5px solid #155724;\">\n        <h4>üéØ Key Takeaway</h4>\n        <p>Tests are not a burden‚Äîthey're your safety net. Writing tests saves time in the long run, prevents bugs from reaching users, and gives you confidence to refactor and improve your code.</p>\n        <p><b>Remember:</b> Untested code is broken code. If you can't test it, you can't trust it.</p>\n    </div>\n\n    <hr/>\n\n    <h3>Resources & Tools</h3>\n    <div style=\"background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;\">\n        <b>Python Testing Libraries:</b><br/>\n        ‚Ä¢ <b>unittest</b>: Built-in testing framework<br/>\n        ‚Ä¢ <b>pytest</b>: More features, simpler syntax<br/>\n        ‚Ä¢ <b>coverage.py</b>: Measure test coverage<br/>\n        ‚Ä¢ <b>mock</b>: Built-in mocking library<br/><br/>\n\n        <b>Testing Tools:</b><br/>\n        ‚Ä¢ <a href=\"https://docs.pytest.org/\" target=\"_blank\">pytest Documentation</a><br/>\n        ‚Ä¢ <a href=\"https://coverage.readthedocs.io/\" target=\"_blank\">coverage.py</a><br/>\n        ‚Ä¢ <a href=\"https://docs.github.com/en/actions\" target=\"_blank\">GitHub Actions</a><br/>\n        ‚Ä¢ <a href=\"https://www.jetbrains.com/pycharm/\" target=\"_blank\">PyCharm</a> (built-in test runner)<br/><br/>\n\n        <b>Testing Principles:</b><br/>\n        ‚Ä¢ Test Pyramid: Many unit, some integration, few UI tests<br/>\n        ‚Ä¢ FIRST Principles: Fast, Independent, Repeatable, Self-validating, Timely<br/>\n        ‚Ä¢ AAA Pattern: Arrange, Act, Assert<br/>\n    </div>"
            },

            "14-1": {
                "icon": "fa-box",
                "title": "Finalizing Desktop Applications - Planning & Architecture",
                "html": `<h1>Week 14, Day 1: Finalizing Desktop Applications - Planning & Architecture</h1>
<p>Today marks the beginning of our <b>final capstone project</b>! We'll learn how to plan, structure, and build a complete desktop application ready for real-world use.</p>

<div class="analogy-box">
    <b>Analogy: Building a House üè†</b><br/>
    <ul style="margin-top: 10px;">
        <li><b>Requirements</b> = Blueprints and client wishes</li>
        <li><b>Architecture</b> = Foundation and structural plans</li>
        <li><b>Modules</b> = Rooms with specific purposes</li>
        <li><b>UI/UX Design</b> = Interior design and flow</li>
        <li><b>Testing</b> = Building inspections</li>
        <li><b>Deployment</b> = Handing over the keys</li>
    </ul>
</div>

<h3>Key Topics</h3>
<ul>
    <li>Application Planning & Requirements Gathering</li>
    <li>Software Architecture Patterns for Desktop Apps</li>
    <li>Project Structure & Organization</li>
    <li>Modular Code Design</li>
    <li>Error Handling Strategy</li>
    <li>User Experience Considerations</li>
</ul>

<h3>In-Depth Explanation</h3>

<b>a. Application Planning Process</b><br/>

<b>1. Requirements Gathering Template:</b>
<div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <pre>
        PROJECT: Inventory Management System
        
        <b>1. CORE FEATURES (Must Have):</b>
        - Add/Edit/Delete inventory items
        - Search and filter items
        - Track stock levels with alerts
        - Generate basic reports
        - Export data to CSV
        
        <b>2. USER ROLES:</b>
        - Admin: Full access
        - Manager: Can view/edit, can't delete
        - Viewer: Read-only access
        
        <b>3. TECHNICAL REQUIREMENTS:</b>
        - SQLite database for storage
        - Tkinter GUI
        - Runs on Windows 10+
        - Single .exe file deployment
        
        <b>4. NON-FUNCTIONAL REQUIREMENTS:</b>
        - Response time < 2 seconds
        - Support 1000+ items
        - Offline functionality
        - Simple error messages
    </pre>
</div>

<b>2. User Stories Format:</b>
<div style="background-color: #f9f9f9; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <pre>
        <b>As a</b> store manager,
        <b>I want to</b> see low stock alerts,
        <b>so that</b> I can reorder before running out.
        
        <b>As a</b> salesperson,
        <b>I want to</b> quickly search for products,
        <b>so that</b> I can check availability for customers.
        
        <b>As an</b> administrator,
        <b>I want to</b> export monthly reports,
        <b>so that</b> I can analyze sales trends.
    </pre>
</div>

<hr/>

<b>b. Software Architecture Patterns</b><br/>

<b>1. Model-View-Controller (MVC) for Desktop Apps:</b>
<div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px; position: relative; height: 300px;">
    <div style="position: absolute; left: 10%; top: 20%; width: 150px; height: 80px; background-color: #ffcccc; border: 2px solid #cc0000; padding: 10px; border-radius: 5px;">
        <b>View</b><br/>
        GUI Windows<br/>
        Tkinter Widgets
    </div>
    <div style="position: absolute; left: 40%; top: 20%; width: 150px; height: 80px; background-color: #ccffcc; border: 2px solid #00cc00; padding: 10px; border-radius: 5px;">
        <b>Controller</b><br/>
        Event Handlers<br/>
        Button Clicks
    </div>
    <div style="position: absolute; left: 70%; top: 20%; width: 150px; height: 80px; background-color: #ccccff; border: 2px solid #0000cc; padding: 10px; border-radius: 5px;">
        <b>Model</b><br/>
        Database<br/>
        Business Logic
    </div>
    
    <div style="position: absolute; left: 25%; top: 50%;">User Action ‚Üí</div>
    <div style="position: absolute; left: 55%; top: 50%;">Update ‚Üí</div>
    <div style="position: absolute; left: 25%; top: 70%;">‚Üê Display Data</div>
    <div style="position: absolute; left: 55%; top: 70%;">‚Üê Get Data</div>
</div>

<b>2. Layered Architecture Example:</b>
<div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <pre>
        inventory_app/
        ‚îú‚îÄ‚îÄ <b>presentation/</b>          # GUI Layer
        ‚îÇ   ‚îú‚îÄ‚îÄ main_window.py
        ‚îÇ   ‚îú‚îÄ‚îÄ item_form.py
        ‚îÇ   ‚îî‚îÄ‚îÄ report_viewer.py
        ‚îÇ
        ‚îú‚îÄ‚îÄ <b>business/</b>              # Business Logic Layer
        ‚îÇ   ‚îú‚îÄ‚îÄ inventory_manager.py
        ‚îÇ   ‚îú‚îÄ‚îÄ alert_system.py
        ‚îÇ   ‚îî‚îÄ‚îÄ report_generator.py
        ‚îÇ
        ‚îú‚îÄ‚îÄ <b>data/</b>                  # Data Access Layer
        ‚îÇ   ‚îú‚îÄ‚îÄ database.py
        ‚îÇ   ‚îú‚îÄ‚îÄ models.py
        ‚îÇ   ‚îî‚îÄ‚îÄ repositories.py
        ‚îÇ
        ‚îú‚îÄ‚îÄ <b>common/</b>                # Shared Utilities
        ‚îÇ   ‚îú‚îÄ‚îÄ constants.py
        ‚îÇ   ‚îú‚îÄ‚îÄ helpers.py
        ‚îÇ   ‚îî‚îÄ‚îÄ validators.py
        ‚îÇ
        ‚îî‚îÄ‚îÄ <b>main.py</b>                # Application Entry Point
    </pre>
</div>

<hr/>

<b>c. Project Structure Best Practices</b><br/>

<b>1. Complete Project Structure:</b>
<div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <pre>
        InventorySystem/
        ‚îÇ
        ‚îú‚îÄ‚îÄ src/                          # Source code
        ‚îÇ   ‚îú‚îÄ‚îÄ models/                   # Data models
        ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ item.py
        ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ category.py
        ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ user.py
        ‚îÇ   ‚îÇ
        ‚îÇ   ‚îú‚îÄ‚îÄ views/                    # GUI components
        ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ main_window.py
        ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dialogs/
        ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ widgets/
        ‚îÇ   ‚îÇ
        ‚îÇ   ‚îú‚îÄ‚îÄ controllers/              # Business logic
        ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ inventory_controller.py
        ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ report_controller.py
        ‚îÇ   ‚îÇ
        ‚îÇ   ‚îú‚îÄ‚îÄ database/                 # Database handling
        ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ connection.py
        ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ queries.py
        ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ migrations/
        ‚îÇ   ‚îÇ
        ‚îÇ   ‚îî‚îÄ‚îÄ utils/                    # Utilities
        ‚îÇ       ‚îú‚îÄ‚îÄ validators.py
        ‚îÇ       ‚îú‚îÄ‚îÄ formatters.py
        ‚îÇ       ‚îî‚îÄ‚îÄ logger.py
        ‚îÇ
        ‚îú‚îÄ‚îÄ tests/                        # Test files
        ‚îÇ   ‚îú‚îÄ‚îÄ test_inventory.py
        ‚îÇ   ‚îî‚îÄ‚îÄ test_database.py
        ‚îÇ
        ‚îú‚îÄ‚îÄ data/                         # Data files
        ‚îÇ   ‚îú‚îÄ‚îÄ database.db
        ‚îÇ   ‚îî‚îÄ‚îÄ config.json
        ‚îÇ
        ‚îú‚îÄ‚îÄ assets/                       # Images, icons, etc.
        ‚îÇ   ‚îú‚îÄ‚îÄ icons/
        ‚îÇ   ‚îú‚îÄ‚îÄ images/
        ‚îÇ   ‚îî‚îÄ‚îÄ styles/
        ‚îÇ
        ‚îú‚îÄ‚îÄ docs/                         # Documentation
        ‚îÇ   ‚îú‚îÄ‚îÄ user_manual.md
        ‚îÇ   ‚îî‚îÄ‚îÄ api_reference.md
        ‚îÇ
        ‚îú‚îÄ‚îÄ requirements.txt              # Dependencies
        ‚îú‚îÄ‚îÄ main.py                       # Entry point
        ‚îî‚îÄ‚îÄ README.md                     # Project overview
    </pre>
</div>

<b>2. Configuration Management:</b>
<div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <pre>
        # config.py
        import json
        import os
        
        class Config:
            def __init__(self):
                self.config_file = "config.json"
                self.default_config = {
                    "database": {
                        "name": "inventory.db",
                        "backup_path": "./backups/"
                    },
                    "application": {
                        "name": "Inventory Manager",
                        "version": "1.0.0",
                        "company": "Your Company"
                    },
                    "ui": {
                        "theme": "light",
                        "font_size": 11,
                        "auto_save": True
                    },
                    "business": {
                        "low_stock_threshold": 5,
                        "currency": "USD",
                        "tax_rate": 0.15
                    }
                }
                
            def load_config(self):
                if os.path.exists(self.config_file):
                    with open(self.config_file, 'r') as f:
                        return json.load(f)
                return self.default_config
                
            def save_config(self, config_data):
                with open(self.config_file, 'w') as f:
                    json.dump(config_data, f, indent=4)
    </pre>
</div>

<hr/>

<b>d. Modular Code Design</b><br/>

<b>1. Creating Reusable Components:</b>
<div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <pre>
        # widgets/custom_widgets.py
        import tkinter as tk
        from tkinter import ttk
        
        class LabeledEntry(tk.Frame):
            """Custom widget: Label + Entry combination"""
            
            def __init__(self, parent, label_text, **kwargs):
                super().__init__(parent)
                
                self.label = tk.Label(self, text=label_text, width=15, anchor="e")
                self.label.pack(side="left", padx=(0, 10))
                
                self.entry = tk.Entry(self, **kwargs)
                self.entry.pack(side="left", fill="x", expand=True)
                
            def get(self):
                return self.entry.get()
                
            def set(self, value):
                self.entry.delete(0, tk.END)
                self.entry.insert(0, value)
                
            def clear(self):
                self.entry.delete(0, tk.END)
                
        # Usage in main application:
        # name_field = LabeledEntry(form_frame, "Product Name:", width=30)
        # name_field.pack(fill="x", pady=5)
    </pre>
</div>

<b>2. Database Abstraction Layer:</b>
<div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <pre>
        # database/item_repository.py
        import sqlite3
        from models.item import Item
        
        class ItemRepository:
            def __init__(self, db_connection):
                self.conn = db_connection
                self.create_table()
                
            def create_table(self):
                query = """
                CREATE TABLE IF NOT EXISTS items (
                    id INTEGER PRIMARY KEY AUTOINCREMENT,
                    name TEXT NOT NULL,
                    category TEXT,
                    quantity INTEGER DEFAULT 0,
                    price REAL,
                    min_stock INTEGER DEFAULT 5,
                    last_updated TIMESTAMP DEFAULT CURRENT_TIMESTAMP
                )
                """
                self.conn.execute(query)
                self.conn.commit()
                
            def add_item(self, item):
                query = """
                INSERT INTO items (name, category, quantity, price, min_stock)
                VALUES (?, ?, ?, ?, ?)
                """
                self.conn.execute(query, (item.name, item.category, 
                                         item.quantity, item.price, item.min_stock))
                self.conn.commit()
                return self.conn.lastrowid
            
            def get_low_stock_items(self):
                query = """
                SELECT * FROM items 
                WHERE quantity <= min_stock
                ORDER BY quantity ASC
                """
                cursor = self.conn.execute(query)
                return [Item(*row) for row in cursor.fetchall()]
    </pre>
</div>

<hr/>

<h3>Hands-On Exercise: Plan Your Capstone Project</h3>
<b>Task:</b> Choose and plan ONE of these capstone projects:<br/><br/>

<div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin: 20px 0;">
    <div style="background-color: #e6f7ff; padding: 15px; border-radius: 5px; border: 2px solid #91d5ff;">
        <b>Option 1: Library Management</b><br/>
        ‚Ä¢ Track books & members<br/>
        ‚Ä¢ Check-in/out system<br/>
        ‚Ä¢ Overdue fines<br/>
        ‚Ä¢ Search & catalog
    </div>
    <div style="background-color: #f6ffed; padding: 15px; border-radius: 5px; border: 2px solid #b7eb8f;">
        <b>Option 2: Personal Finance</b><br/>
        ‚Ä¢ Income/expense tracking<br/>
        ‚Ä¢ Budget categories<br/>
        ‚Ä¢ Reports & charts<br/>
        ‚Ä¢ Bill reminders
    </div>
    <div style="background-color: #fff0e6; padding: 15px; border-radius: 5px; border: 2px solid #ffbb96;">
        <b>Option 3: Task Manager</b><br/>
        ‚Ä¢ Projects & tasks<br/>
        ‚Ä¢ Team collaboration<br/>
        ‚Ä¢ Progress tracking<br/>
        ‚Ä¢ Deadline alerts
    </div>
</div>

<b>Planning Template to Complete:</b>
<div style="background-color: #fff0e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <pre>
        <b>PROJECT: __________________________</b>
        
        1. MAIN FEATURES (List 5-7):
           a. _________________________
           b. _________________________
           c. _________________________
           d. _________________________
           e. _________________________
        
        2. USER ROLES/PERSONAS:
           ‚Ä¢ _________________________ (what they need)
           ‚Ä¢ _________________________ (what they need)
        
        3. DATA MODEL (Main Tables/Classes):
           ‚Ä¢ _________________________ (fields: _____, _____, _____)
           ‚Ä¢ _________________________ (fields: _____, _____, _____)
        
        4. KEY SCREENS/INTERFACES:
           ‚Ä¢ Main Dashboard: _________________________
           ‚Ä¢ Data Entry Form: _________________________
           ‚Ä¢ Report Viewer: _________________________
        
        5. TECHNICAL STACK:
           ‚Ä¢ GUI: Tkinter
           ‚Ä¢ Database: SQLite
           ‚Ä¢ Architecture: MVC
           ‚Ä¢ Deployment: PyInstaller
    </pre>
</div>

<hr/>

<h3>Common Architecture Mistakes</h3>

<b>Mistake 1: God Object (Putting everything in one file)</b>
<div style="background-color: #ffe6e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <pre>
        # WRONG - 1000+ lines in main.py
        class EverythingApp:
            def handle_gui(self): ...   # 300 lines
            def handle_database(self): ...  # 300 lines
            def handle_business_logic(self): ...  # 400 lines
            
        # RIGHT - Modular approach
        main.py              # 50 lines
        gui/main_window.py   # 200 lines
        database/db.py       # 150 lines
        business/logic.py    # 150 lines
    </pre>
</div>

<b>Mistake 2: No separation of concerns</b>
<div style="background-color: #ffe6e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <pre>
        # WRONG - GUI handling database directly
        def save_button_click():
            name = entry_name.get()
            # Database code mixed with GUI!
            conn = sqlite3.connect('db.sqlite')
            conn.execute(f"INSERT INTO items VALUES ('{name}')")  # SQL injection risk!
            
        # RIGHT - Use controller/service layer
        def save_button_click():
            name = entry_name.get()
            item_controller.save_item(name)  # Delegates to business layer
    </pre>
</div>

<b>Mistake 3: Hardcoded values everywhere</b>
<div style="background-color: #ffe6e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <pre>
        # WRONG - Magic numbers/strings everywhere
        if quantity < 5:  # What is 5?
            send_alert("low")  # What does "low" mean?
            
        # RIGHT - Use constants/config
        LOW_STOCK_THRESHOLD = 5
        ALERT_TYPE_LOW_STOCK = "low_stock"
        
        if quantity < LOW_STOCK_THRESHOLD:
            send_alert(ALERT_TYPE_LOW_STOCK)
    </pre>
</div>

<hr/>

<div class="assignment-box">
    <h4>Assignment: Complete Project Planning Document</h4>
    <p>Create a comprehensive planning document for your chosen capstone project.</p>
    
    <div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <b>Part 1: Requirements Specification (1 page)</b><br/>
        - Project overview and purpose<br/>
        - List of all features (prioritized as Must/Should/Could/Will Not)<br/>
        - User stories for each feature<br/>
        - Technical constraints and requirements<br/><br/>
        
        <b>Part 2: System Design (1 page)</b><br/>
        - Architecture diagram (MVC or layered)<br/>
        - Database schema (tables and relationships)<br/>
        - Class diagram (main Python classes)<br/>
        - File/folder structure plan<br/><br/>
        
        <b>Part 3: UI/UX Design (1 page)</b><br/>
        - Wireframe sketches of main screens<br/>
        - User flow diagram<br/>
        - Color scheme and styling decisions<br/>
        - List of required images/icons<br/><br/>
        
        <b>Part 4: Implementation Plan (1 page)</b><br/>
        - Development timeline (Days 1-3)<br/>
        - Risk assessment (what could go wrong?)<br/>
        - Testing strategy<br/>
        - Deployment checklist<br/><br/>
        
        <b>Deliverables:</b><br/>
        1. Project proposal document (PDF)<br/>
        2. Wireframe sketches (images)<br/>
        3. Database schema SQL file<br/>
        4. Project structure created with empty files
    </div>
    
    <p><b>Bonus Challenge:</b> Create a working prototype of your main screen with dummy data.</p>
    
    <div style="background-color: #e6ffed; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <h4>üéØ Capstone Week Schedule:</h4>
        <p><b>Day 1 (Today):</b> Planning & Architecture</p>
        <p><b>Day 2:</b> Core Implementation (Database & Business Logic)</p>
        <p><b>Day 3:</b> GUI Implementation & Integration</p>
        <p><b>Day 4:</b> Testing, Packaging & Deployment (.EXE)</p>
    </div>
    
    <p><b>Remember:</b> Planning saves coding time! A well-planned project is easier to build, debug, and maintain.</p>
</div>`
            },
            "14-2": {
                "icon": "fa-cogs",
                "title": "Core Implementation - Database & Business Logic",
                "html": `<h1>Week 14, Day 2: Core Implementation - Database & Business Logic</h1>
<p>Today we build the <b>foundation</b> of our application: the data models, database layer, and business logic that powers everything.</p>

<div class="analogy-box">
    <b>Analogy: Building the Engine üöó</b><br/>
    <ul style="margin-top: 10px;">
        <li><b>Database Schema</b> = Engine blueprint and parts</li>
        <li><b>Data Models</b> = Engine components (pistons, crankshaft)</li>
        <li><b>Business Logic</b> = How the engine works together</li>
        <li><b>Validation</b> = Quality control checks</li>
        <li><b>Error Handling</b> = Safety systems and fail-safes</li>
    </ul>
</div>

<h3>Key Topics</h3>
<ul>
    <li>Database Design & SQLite Implementation</li>
    <li>Data Models & ORM Patterns</li>
    <li>Business Logic Layer Implementation</li>
    <li>Input Validation & Data Sanitization</li>
    <li>Comprehensive Error Handling</li>
    <li>Logging & Debugging Systems</li>
</ul>

<h3>In-Depth Explanation</h3>

<b>a. Database Design & Implementation</b><br/>

<b>1. Complete Database Schema (Example: Inventory System):</b>
<div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <pre>
        -- inventory_system.sql
        -- Version: 1.0
        
        -- Users table
        CREATE TABLE IF NOT EXISTS users (
            id INTEGER PRIMARY KEY AUTOINCREMENT,
            username TEXT UNIQUE NOT NULL,
            password_hash TEXT NOT NULL,
            role TEXT CHECK(role IN ('admin', 'manager', 'viewer')) DEFAULT 'viewer',
            email TEXT,
            created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
            last_login TIMESTAMP
        );
        
        -- Categories table
        CREATE TABLE IF NOT EXISTS categories (
            id INTEGER PRIMARY KEY AUTOINCREMENT,
            name TEXT UNIQUE NOT NULL,
            description TEXT
        );
        
        -- Items table (main inventory)
        CREATE TABLE IF NOT EXISTS items (
            id INTEGER PRIMARY KEY AUTOINCREMENT,
            sku TEXT UNIQUE NOT NULL,
            name TEXT NOT NULL,
            category_id INTEGER,
            description TEXT,
            quantity INTEGER DEFAULT 0 CHECK(quantity >= 0),
            price REAL CHECK(price >= 0),
            cost REAL CHECK(cost >= 0),
            min_stock INTEGER DEFAULT 5,
            max_stock INTEGER DEFAULT 100,
            location TEXT,
            supplier TEXT,
            created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
            updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
            FOREIGN KEY (category_id) REFERENCES categories(id) ON DELETE SET NULL
        );
        
        -- Transactions log
        CREATE TABLE IF NOT EXISTS transactions (
            id INTEGER PRIMARY KEY AUTOINCREMENT,
            item_id INTEGER NOT NULL,
            user_id INTEGER NOT NULL,
            type TEXT CHECK(type IN ('purchase', 'sale', 'adjustment', 'transfer')),
            quantity_change INTEGER NOT NULL,
            previous_quantity INTEGER NOT NULL,
            new_quantity INTEGER NOT NULL,
            notes TEXT,
            created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
            FOREIGN KEY (item_id) REFERENCES items(id) ON DELETE CASCADE,
            FOREIGN KEY (user_id) REFERENCES users(id)
        );
        
        -- Settings table
        CREATE TABLE IF NOT EXISTS settings (
            key TEXT PRIMARY KEY,
            value TEXT,
            description TEXT
        );
        
        -- Insert default data
        INSERT OR IGNORE INTO categories (name, description) VALUES 
            ('Electronics', 'Electronic devices and components'),
            ('Office Supplies', 'Office stationery and supplies'),
            ('Furniture', 'Office furniture and equipment');
            
        INSERT OR IGNORE INTO settings (key, value, description) VALUES
            ('company_name', 'Inventory Inc.', 'Company name for reports'),
            ('currency', 'USD', 'Default currency'),
            ('tax_rate', '0.15', 'Default tax rate'),
            ('low_stock_threshold', '5', 'Alert when stock below this');
        
        -- Create indexes for performance
        CREATE INDEX IF NOT EXISTS idx_items_sku ON items(sku);
        CREATE INDEX IF NOT EXISTS idx_items_category ON items(category_id);
        CREATE INDEX IF NOT EXISTS idx_transactions_item ON transactions(item_id);
        CREATE INDEX IF NOT EXISTS idx_transactions_date ON transactions(created_at);
    </pre>
</div>

<b>2. Database Connection Manager:</b>
<div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <pre>
        # database/connection.py
        import sqlite3
        import logging
        from pathlib import Path
        
        logger = logging.getLogger(__name__)
        
        class DatabaseConnection:
            _instance = None
            
            def __new__(cls, db_path="inventory.db"):
                if cls._instance is None:
                    cls._instance = super().__new__(cls)
                    cls._instance.db_path = db_path
                    cls._instance.connection = None
                    cls._instance.setup_database()
                return cls._instance
            
            def setup_database(self):
                """Initialize database with schema"""
                try:
                    self.connection = sqlite3.connect(self.db_path)
                    self.connection.row_factory = sqlite3.Row  # Return dict-like rows
                    
                    # Enable foreign keys
                    self.connection.execute("PRAGMA foreign_keys = ON")
                    
                    # Create tables if they don't exist
                    with open('database/schema.sql', 'r') as f:
                        schema = f.read()
                        self.connection.executescript(schema)
                    
                    logger.info(f"Database initialized at {self.db_path}")
                    
                except sqlite3.Error as e:
                    logger.error(f"Database error: {e}")
                    raise
            
            def get_connection(self):
                """Get database connection, create if not exists"""
                if self.connection is None:
                    self.setup_database()
                return self.connection
            
            def execute_query(self, query, params=None, fetch_all=True):
                """Safe query execution with error handling"""
                conn = self.get_connection()
                try:
                    cursor = conn.cursor()
                    if params:
                        cursor.execute(query, params)
                    else:
                        cursor.execute(query)
                    
                    conn.commit()
                    
                    if fetch_all and query.strip().upper().startswith('SELECT'):
                        return cursor.fetchall()
                    else:
                        return cursor.lastrowid
                        
                except sqlite3.Error as e:
                    conn.rollback()
                    logger.error(f"Query failed: {query[:50]}... Error: {e}")
                    raise
            
            def backup_database(self, backup_path="backups/"):
                """Create database backup"""
                import shutil
                from datetime import datetime
                
                Path(backup_path).mkdir(exist_ok=True)
                timestamp = datetime.now().strftime("%Y%m%d_%H%M%S")
                backup_file = Path(backup_path) / f"inventory_backup_{timestamp}.db"
                
                shutil.copy2(self.db_path, backup_file)
                logger.info(f"Database backed up to {backup_file}")
                return backup_file
            
            def close(self):
                """Close database connection"""
                if self.connection:
                    self.connection.close()
                    self.connection = None
    </pre>
</div>

<hr/>

<b>b. Data Models Implementation</b><br/>

<b>1. Base Model Class:</b>
<div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <pre>
        # models/base_model.py
        from datetime import datetime
        from typing import Dict, Any
        
        class BaseModel:
            """Base class for all data models"""
            
            def __init__(self, **kwargs):
                for key, value in kwargs.items():
                    setattr(self, key, value)
            
            def to_dict(self) -> Dict[str, Any]:
                """Convert model to dictionary"""
                result = {}
                for key in self.__dict__:
                    if not key.startswith('_'):
                        value = getattr(self, key)
                        if isinstance(value, datetime):
                            result[key] = value.isoformat()
                        else:
                            result[key] = value
                return result
            
            @classmethod
            def from_dict(cls, data: Dict[str, Any]) -> 'BaseModel':
                """Create model from dictionary"""
                return cls(**data)
            
            def validate(self) -> bool:
                """Validate model data - override in subclasses"""
                return True
            
            def __repr__(self):
                return f"{self.__class__.__name__}({self.__dict__})"
    </pre>
</div>

<b>2. Item Model with Validation:</b>
<div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <pre>
        # models/item.py
        from .base_model import BaseModel
        from typing import Optional
        import re
        
        class Item(BaseModel):
            def __init__(self, 
                       sku: str,
                       name: str,
                       quantity: int = 0,
                       price: float = 0.0,
                       cost: float = 0.0,
                       category_id: Optional[int] = None,
                       min_stock: int = 5,
                       max_stock: int = 100,
                       **kwargs):
                super().__init__(**kwargs)
                self.sku = sku
                self.name = name
                self.quantity = quantity
                self.price = price
                self.cost = cost
                self.category_id = category_id
                self.min_stock = min_stock
                self.max_stock = max_stock
                
                # Auto-generated fields
                if 'id' in kwargs:
                    self.id = kwargs['id']
                if 'created_at' in kwargs:
                    self.created_at = kwargs['created_at']
                if 'updated_at' in kwargs:
                    self.updated_at = kwargs['updated_at']
            
            def validate(self) -> tuple[bool, str]:
                """Validate item data"""
                errors = []
                
                # SKU validation
                if not self.sku or len(self.sku.strip()) < 3:
                    errors.append("SKU must be at least 3 characters")
                if not re.match(r'^[A-Za-z0-9-_]+$', self.sku):
                    errors.append("SKU can only contain letters, numbers, dash, and underscore")
                
                # Name validation
                if not self.name or len(self.name.strip()) < 2:
                    errors.append("Name must be at least 2 characters")
                
                # Quantity validation
                if not isinstance(self.quantity, int) or self.quantity < 0:
                    errors.append("Quantity must be a non-negative integer")
                
                # Price validation
                if not isinstance(self.price, (int, float)) or self.price < 0:
                    errors.append("Price must be a non-negative number")
                
                # Stock range validation
                if self.min_stock >= self.max_stock:
                    errors.append("Minimum stock must be less than maximum stock")
                
                # Check if low stock
                self.is_low_stock = self.quantity <= self.min_stock
                
                if errors:
                    return False, "; ".join(errors)
                return True, "Valid"
            
            def calculate_value(self) -> float:
                """Calculate total value of inventory"""
                return self.quantity * self.cost
            
            def calculate_profit_margin(self) -> float:
                """Calculate profit margin percentage"""
                if self.cost == 0:
                    return 0
                return ((self.price - self.cost) / self.cost) * 100
            
            def needs_reorder(self) -> bool:
                """Check if item needs reordering"""
                return self.quantity <= self.min_stock
            
            def can_sell(self, quantity: int) -> tuple[bool, str]:
                """Check if item can be sold in given quantity"""
                if quantity <= 0:
                    return False, "Quantity must be positive"
                if quantity > self.quantity:
                    return False, f"Insufficient stock. Available: {self.quantity}"
                return True, "OK"
    </pre>
</div>

<hr/>

<b>c. Business Logic Layer</b><br/>

<b>1. Inventory Manager Service:</b>
<div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <pre>
        # business/inventory_manager.py
        from typing import List, Optional, Tuple
        from models.item import Item
        from database.item_repository import ItemRepository
        import logging
        
        logger = logging.getLogger(__name__)
        
        class InventoryManager:
            def __init__(self, db_connection):
                self.item_repo = ItemRepository(db_connection)
                self.low_stock_threshold = 5
            
            def add_item(self, item_data: dict) -> Tuple[bool, str, Optional[int]]:
                """Add new item to inventory"""
                try:
                    # Create item model
                    item = Item(**item_data)
                    
                    # Validate
                    is_valid, message = item.validate()
                    if not is_valid:
                        return False, message, None
                    
                    # Check if SKU already exists
                    if self.item_repo.get_by_sku(item.sku):
                        return False, f"SKU {item.sku} already exists", None
                    
                    # Save to database
                    item_id = self.item_repo.create(item)
                    logger.info(f"Item added: {item.sku} (ID: {item_id})")
                    
                    return True, "Item added successfully", item_id
                    
                except Exception as e:
                    logger.error(f"Error adding item: {e}")
                    return False, f"Error adding item: {str(e)}", None
            
            def update_item(self, item_id: int, update_data: dict) -> Tuple[bool, str]:
                """Update existing item"""
                try:
                    # Get current item
                    current_item = self.item_repo.get_by_id(item_id)
                    if not current_item:
                        return False, f"Item ID {item_id} not found"
                    
                    # Update fields
                    for key, value in update_data.items():
                        if hasattr(current_item, key):
                            setattr(current_item, key, value)
                    
                    # Validate
                    is_valid, message = current_item.validate()
                    if not is_valid:
                        return False, message
                    
                    # Update in database
                    self.item_repo.update(current_item)
                    logger.info(f"Item updated: ID {item_id}")
                    
                    return True, "Item updated successfully"
                    
                except Exception as e:
                    logger.error(f"Error updating item {item_id}: {e}")
                    return False, f"Error updating item: {str(e)}"
            
            def process_sale(self, item_id: int, quantity: int, user_id: int) -> Tuple[bool, str]:
                """Process item sale"""
                try:
                    item = self.item_repo.get_by_id(item_id)
                    if not item:
                        return False, "Item not found"
                    
                    # Check if can sell
                    can_sell, message = item.can_sell(quantity)
                    if not can_sell:
                        return False, message
                    
                    # Calculate new quantity
                    new_quantity = item.quantity - quantity
                    
                    # Update quantity
                    self.item_repo.update_quantity(item_id, new_quantity)
                    
                    # Log transaction
                    self.item_repo.log_transaction(
                        item_id=item_id,
                        user_id=user_id,
                        transaction_type='sale',
                        quantity_change=-quantity,
                        previous_quantity=item.quantity,
                        new_quantity=new_quantity,
                        notes=f"Sale of {quantity} units"
                    )
                    
                    logger.info(f"Sale processed: {quantity} of {item.sku}")
                    return True, "Sale processed successfully"
                    
                except Exception as e:
                    logger.error(f"Error processing sale: {e}")
                    return False, f"Error processing sale: {str(e)}"
            
            def get_low_stock_items(self) -> List[Item]:
                """Get all items below minimum stock"""
                items = self.item_repo.get_all()
                return [item for item in items if item.needs_reorder()]
            
            def get_inventory_value(self) -> float:
                """Calculate total inventory value"""
                items = self.item_repo.get_all()
                return sum(item.calculate_value() for item in items)
            
            def search_items(self, search_term: str) -> List[Item]:
                """Search items by SKU or name"""
                return self.item_repo.search(search_term)
    </pre>
</div>

<hr/>

<h3>Hands-On Exercise: Implement Your Core Logic</h3>
<b>Task:</b> Based on your chosen capstone project, implement the core database and business logic.<br/><br/>

<b>Step-by-Step Implementation:</b>
<div style="background-color: #fff0e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <b>Step 1: Create Database Schema</b><br/>
    1. Design your database tables (3-5 main tables)<br/>
    2. Write SQL file with CREATE TABLE statements<br/>
    3. Add indexes and foreign key constraints<br/>
    4. Include sample data if needed<br/><br/>
    
    <b>Step 2: Implement Database Layer</b><br/>
    1. Create database connection manager<br/>
    2. Implement repository classes for each table<br/>
    3. Add error handling and logging<br/>
    4. Include backup functionality<br/><br/>
    
    <b>Step 3: Create Data Models</b><br/>
    1. Create base model class<br/>
    2. Implement main entity classes<br/>
    3. Add validation methods<br/>
    4. Include business calculation methods<br/><br/>
    
    <b>Step 4: Implement Business Logic</b><br/>
    1. Create service/manager classes<br/>
    2. Implement core operations (CRUD + business rules)<br/>
    3. Add transaction logging<br/>
    4. Include reporting calculations<br/>
</div>

<b>Testing Your Implementation:</b>
<div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <pre>
        # test_core.py
        from database.connection import DatabaseConnection
        from business.inventory_manager import InventoryManager
        
        def test_core_functionality():
            # Initialize database
            db = DatabaseConnection(":memory:")  # Use in-memory for testing
            
            # Create inventory manager
            manager = InventoryManager(db.get_connection())
            
            # Test adding item
            success, message, item_id = manager.add_item({
                'sku': 'TEST-001',
                'name': 'Test Product',
                'quantity': 10,
                'price': 29.99,
                'cost': 15.00
            })
            
            print(f"Add item: {success} - {message}")
            
            # Test getting item
            item = manager.item_repo.get_by_sku('TEST-001')
            print(f"Retrieved item: {item.name}")
            
            # Test sale processing
            success, message = manager.process_sale(item.id, 3, 1)
            print(f"Sale: {success} - {message}")
            
            # Test low stock check
            low_stock = manager.get_low_stock_items()
            print(f"Low stock items: {len(low_stock)}")
            
            # Test inventory value
            value = manager.get_inventory_value()
            print(f"Total inventory value: \\\${value:.2f}")
        
        if __name__ == "__main__":
            test_core_functionality()
    </pre>
</div>

<hr/>

<div class="assignment-box">
    <h4>Assignment: Complete Core Implementation</h4>
    <p>Implement the complete backend for your capstone project.</p>
    
    <div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <b>Part 1: Database Implementation</b><br/>
        - Create complete SQL schema file<br/>
        - Implement database connection manager<br/>
        - Create at least 3 repository classes<br/>
        - Add backup and recovery functionality<br/><br/>
        
        <b>Part 2: Data Models</b><br/>
        - Create base model class<br/>
        - Implement at least 3 main entity classes<br/>
        - Add comprehensive validation to each model<br/>
        - Include business calculation methods<br/><br/>
        
        <b>Part 3: Business Logic</b><br/>
        - Implement at least 2 service/manager classes<br/>
        - Cover all CRUD operations<br/>
        - Implement at least 3 business rules<br/>
        - Add transaction logging<br/>
        - Include error handling throughout<br/><br/>
        
        <b>Part 4: Testing</b><br/>
        - Create test database (in-memory)<br/>
        - Write unit tests for each repository<br/>
        - Test business logic with various scenarios<br/>
        - Test error conditions<br/>
    </div>
    
    <p><b>Deliverables:</b></p>
    <ul>
        <li>Complete database schema (.sql file)</li>
        <li>All Python files for database layer</li>
        <li>All Python files for business logic layer</li>
        <li>Test script demonstrating functionality</li>
        <li>Documentation of your API/interface</li>
    </ul>
    
    <p><b>Pro Tip:</b> Use Python's <code>unittest</code> or <code>pytest</code> framework for professional testing.</p>
    
    <div style="background-color: #e6ffed; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <h4>‚úÖ Today's Checklist:</h4>
        <ul>
            <li>‚úì Database schema designed and implemented</li>
            <li>‚úì Database connection working</li>
            <li>‚úì Data models created with validation</li>
            <li>‚úì Business logic implemented</li>
            <li>‚úì Core functionality tested</li>
            <li>‚úì Error handling in place</li>
        </ul>
        <p><b>Tomorrow:</b> We'll build the GUI interface and connect it to your backend!</p>
    </div>
</div>`
            },
            "14-3": {
                "icon": "fa-desktop",
                "title": "GUI Implementation & Integration",
                "html": `<h1>Week 14, Day 3: GUI Implementation & Integration</h1>
<p>Today we bring your application to life! We'll build a professional GUI and connect it to the backend logic you created yesterday.</p>

<div class="analogy-box">
    <b>Analogy: Building the Car Interior üöó</b><br/>
    <ul style="margin-top: 10px;">
        <li><b>Main Window</b> = Dashboard with all controls</li>
        <li><b>Forms & Dialogs</b> = Steering wheel, pedals, knobs</li>
        <li><b>Data Display</b> = Speedometer, fuel gauge, GPS screen</li>
        <li><b>Integration</b> = Connecting controls to engine</li>
        <li><b>User Experience</b> = Comfort, visibility, ease of use</li>
    </ul>
</div>

<h3>Key Topics</h3>
<ul>
    <li>Main Application Window Design</li>
    <li>Custom Widgets & Reusable Components</li>
    <li>Data Binding & Controller Integration</li>
    <li>Asynchronous Operations & Threading</li>
    <li>Professional Styling & Theming</li>
    <li>User Experience Best Practices</li>
</ul>

<h3>In-Depth Explanation</h3>

<b>a. Main Application Window Architecture</b><br/>

<b>1. Application Structure with MVC Pattern:</b>
<div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <pre>
        # app/main_window.py
        import tkinter as tk
        from tkinter import ttk, messagebox
        import logging
        from controllers.inventory_controller import InventoryController
        from views.dashboard_view import DashboardView
        from views.items_view import ItemsView
        from views.reports_view import ReportsView
        
        logger = logging.getLogger(__name__)
        
        class MainApplication(tk.Tk):
            def __init__(self):
                super().__init__()
                
                self.title("Inventory Management System")
                self.geometry("1200x700")
                self.minsize(1000, 600)
                
                # Setup controllers
                self.controller = InventoryController()
                
                # Setup UI
                self.setup_styles()
                self.create_widgets()
                self.setup_menu()
                self.setup_bindings()
                
                # Load initial data
                self.after(100, self.load_initial_data)
                
                logger.info("Application started")
            
            def setup_styles(self):
                """Configure application styles"""
                style = ttk.Style()
                style.theme_use('clam')  # Modern theme
                
                # Custom styles
                style.configure('Title.TLabel', font=('Arial', 16, 'bold'))
                style.configure('Header.TLabel', font=('Arial', 12, 'bold'))
                style.configure('Success.TLabel', foreground='green')
                style.configure('Warning.TLabel', foreground='orange')
                style.configure('Error.TLabel', foreground='red')
                
                style.configure('Primary.TButton', 
                               font=('Arial', 10, 'bold'),
                               padding=6)
                
                style.map('Primary.TButton',
                         foreground=[('pressed', 'white'), ('active', 'white')],
                         background=[('pressed', '#0066cc'), ('active', '#0088ff')])
            
            def create_widgets(self):
                """Create main window widgets"""
                # Main container
                self.main_container = ttk.Frame(self)
                self.main_container.pack(fill="both", expand=True, padx=10, pady=10)
                
                # Top toolbar
                self.create_toolbar()
                
                # Content area (notebook for tabs)
                self.create_content_area()
                
                # Status bar
                self.create_status_bar()
            
            def create_toolbar(self):
                """Create application toolbar"""
                toolbar = ttk.Frame(self.main_container)
                toolbar.pack(fill="x", pady=(0, 10))
                
                # Logo/Title
                ttk.Label(toolbar, text="üì¶ Inventory Manager", 
                         style="Title.TLabel").pack(side="left")
                
                # Navigation buttons
                nav_frame = ttk.Frame(toolbar)
                nav_frame.pack(side="right")
                
                buttons = [
                    ("Dashboard", self.show_dashboard),
                    ("Items", self.show_items),
                    ("Categories", self.show_categories),
                    ("Reports", self.show_reports),
                    ("Settings", self.show_settings)
                ]
                
                for text, command in buttons:
                    btn = ttk.Button(nav_frame, text=text, command=command)
                    btn.pack(side="left", padx=2)
            
            def create_content_area(self):
                """Create tabbed content area"""
                # Notebook for tabs
                self.notebook = ttk.Notebook(self.main_container)
                self.notebook.pack(fill="both", expand=True)
                
                # Create tab views
                self.dashboard_view = DashboardView(self.notebook, self.controller)
                self.items_view = ItemsView(self.notebook, self.controller)
                self.reports_view = ReportsView(self.notebook, self.controller)
                
                # Add tabs
                self.notebook.add(self.dashboard_view, text="Dashboard")
                self.notebook.add(self.items_view, text="Items")
                self.notebook.add(self.reports_view, text="Reports")
            
            def create_status_bar(self):
                """Create status bar at bottom"""
                self.status_bar = ttk.Frame(self.main_container, relief="sunken")
                self.status_bar.pack(fill="x", pady=(10, 0))
                
                # Status message
                self.status_label = ttk.Label(self.status_bar, text="Ready")
                self.status_label.pack(side="left", padx=5)
                
                # Progress bar (hidden by default)
                self.progress = ttk.Progressbar(self.status_bar, mode='indeterminate')
                
                # Stats
                self.stats_label = ttk.Label(self.status_bar, text="")
                self.stats_label.pack(side="right", padx=5)
            
            def setup_menu(self):
                """Create application menu bar"""
                menubar = tk.Menu(self)
                self.config(menu=menubar)
                
                # File menu
                file_menu = tk.Menu(menubar, tearoff=0)
                menubar.add_cascade(label="File", menu=file_menu)
                file_menu.add_command(label="New Item", command=self.new_item)
                file_menu.add_command(label="Open...", command=self.open_file)
                file_menu.add_separator()
                file_menu.add_command(label="Export CSV", command=self.export_csv)
                file_menu.add_separator()
                file_menu.add_command(label="Exit", command=self.quit)
                
                # Edit menu
                edit_menu = tk.Menu(menubar, tearoff=0)
                menubar.add_cascade(label="Edit", menu=edit_menu)
                edit_menu.add_command(label="Preferences", command=self.show_preferences)
                
                # Help menu
                help_menu = tk.Menu(menubar, tearoff=0)
                menubar.add_cascade(label="Help", menu=help_menu)
                help_menu.add_command(label="About", command=self.show_about)
            
            def setup_bindings(self):
                """Setup keyboard shortcuts"""
                self.bind('<Control-n>', lambda e: self.new_item())
                self.bind('<Control-s>', lambda e: self.save_item())
                self.bind('<Control-f>', lambda e: self.search_focus())
                self.bind('<F5>', lambda e: self.refresh_data())
            
            def load_initial_data(self):
                """Load initial data asynchronously"""
                self.show_loading("Loading inventory data...")
                
                # Use thread to prevent GUI freeze
                import threading
                thread = threading.Thread(target=self._load_data_thread)
                thread.daemon = True
                thread.start()
            
            def _load_data_thread(self):
                """Thread function for loading data"""
                try:
                    # Load data through controller
                    stats = self.controller.load_initial_data()
                    
                    # Update GUI in main thread
                    self.after(0, self._update_ui_with_data, stats)
                    
                except Exception as e:
                    self.after(0, self._show_error, str(e))
            
            def _update_ui_with_data(self, stats):
                """Update UI with loaded data"""
                self.hide_loading()
                self.update_status(f"Loaded {stats['item_count']} items")
                self.update_stats(stats)
                
                # Refresh views
                self.dashboard_view.refresh()
                self.items_view.refresh()
            
            # ... Additional methods for events and updates
    </pre>
</div>

<hr/>

<b>b. Custom Widgets & Reusable Components</b><br/>

<b>1. Search Bar Component:</b>
<div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <pre>
        # widgets/search_bar.py
        import tkinter as tk
        from tkinter import ttk
        
        class SearchBar(ttk.Frame):
            def __init__(self, parent, on_search=None, on_clear=None, **kwargs):
                super().__init__(parent, **kwargs)
                
                self.on_search = on_search
                self.on_clear = on_clear
                
                self.create_widgets()
            
            def create_widgets(self):
                """Create search bar widgets"""
                # Search label
                ttk.Label(self, text="Search:").pack(side="left", padx=(0, 5))
                
                # Search entry
                self.search_var = tk.StringVar()
                self.search_entry = ttk.Entry(self, textvariable=self.search_var, width=30)
                self.search_entry.pack(side="left", padx=5)
                
                # Bind Enter key for search
                self.search_entry.bind('<Return>', lambda e: self.perform_search())
                
                # Search button
                self.search_btn = ttk.Button(self, text="üîç", 
                                           command=self.perform_search,
                                           width=3)
                self.search_btn.pack(side="left", padx=2)
                
                # Clear button
                self.clear_btn = ttk.Button(self, text="Clear",
                                          command=self.clear_search)
                self.clear_btn.pack(side="left", padx=2)
                
                # Search options
                self.search_by_var = tk.StringVar(value="name")
                search_options = ttk.Combobox(self, 
                                            textvariable=self.search_by_var,
                                            values=["name", "sku", "category"],
                                            state="readonly",
                                            width=10)
                search_options.pack(side="left", padx=5)
            
            def perform_search(self):
                """Execute search"""
                search_term = self.search_var.get().strip()
                search_by = self.search_by_var.get()
                
                if search_term and self.on_search:
                    self.on_search(search_term, search_by)
            
            def clear_search(self):
                """Clear search"""
                self.search_var.set("")
                if self.on_clear:
                    self.on_clear()
            
            def get_search_term(self):
                """Get current search term"""
                return self.search_var.get().strip()
            
            def set_search_term(self, term):
                """Set search term"""
                self.search_var.set(term)
            
            def focus_search(self):
                """Focus on search entry"""
                self.search_entry.focus_set()
    </pre>
</div>

<b>2. Data Table Widget:</b>
<div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <pre>
        # widgets/data_table.py
        import tkinter as tk
        from tkinter import ttk
        from typing import List, Dict, Callable
        
        class DataTable(ttk.Frame):
            def __init__(self, parent, columns: List[Dict], data: List = None, 
                       on_select: Callable = None, **kwargs):
                super().__init__(parent, **kwargs)
                
                self.columns = columns
                self.data = data or []
                self.on_select = on_select
                
                self.create_widgets()
                if self.data:
                    self.load_data(self.data)
            
            def create_widgets(self):
                """Create table with scrollbars"""
                # Create Treeview with scrollbars
                self.tree_frame = ttk.Frame(self)
                self.tree_frame.pack(fill="both", expand=True)
                
                # Vertical scrollbar
                v_scrollbar = ttk.Scrollbar(self.tree_frame)
                v_scrollbar.pack(side="right", fill="y")
                
                # Horizontal scrollbar
                h_scrollbar = ttk.Scrollbar(self.tree_frame, orient="horizontal")
                h_scrollbar.pack(side="bottom", fill="x")
                
                # Treeview
                self.tree = ttk.Treeview(self.tree_frame,
                                        columns=[col['id'] for col in self.columns],
                                        yscrollcommand=v_scrollbar.set,
                                        xscrollcommand=h_scrollbar.set,
                                        selectmode="browse")
                self.tree.pack(fill="both", expand=True)
                
                # Configure scrollbars
                v_scrollbar.config(command=self.tree.yview)
                h_scrollbar.config(command=self.tree.xview)
                
                # Setup columns
                self.tree.heading("#0", text="", anchor="w")
                self.tree.column("#0", width=0, stretch=False)
                
                for col in self.columns:
                    self.tree.heading(col['id'], text=col['text'], anchor="w")
                    width = col.get('width', 100)
                    self.tree.column(col['id'], width=width, anchor="w")
                
                # Bind selection event
                self.tree.bind('<<TreeviewSelect>>', self.on_item_select)
                
                # Context menu
                self.setup_context_menu()
            
            def setup_context_menu(self):
                """Setup right-click context menu"""
                self.context_menu = tk.Menu(self, tearoff=0)
                self.context_menu.add_command(label="Edit", command=self.edit_selected)
                self.context_menu.add_command(label="Delete", command=self.delete_selected)
                self.context_menu.add_separator()
                self.context_menu.add_command(label="Copy", command=self.copy_selected)
                
                self.tree.bind("<Button-3>", self.show_context_menu)
            
            def show_context_menu(self, event):
                """Show context menu on right-click"""
                item = self.tree.identify_row(event.y)
                if item:
                    self.tree.selection_set(item)
                    self.context_menu.post(event.x_root, event.y_root)
            
            def load_data(self, data: List[Dict]):
                """Load data into table"""
                self.clear()
                self.data = data
                
                for item in data:
                    values = [item.get(col['id'], '') for col in self.columns]
                    
                    # Add item to tree
                    item_id = self.tree.insert("", "end", values=values)
                    
                    # Store original data
                    self.tree.set(item_id, "data", item)
                    
                    # Apply formatting
                    self.apply_formatting(item_id, item)
            
            def apply_formatting(self, item_id, item_data):
                """Apply custom formatting based on data"""
                # Example: Color low stock items red
                if item_data.get('quantity', 0) <= item_data.get('min_stock', 5):
                    self.tree.tag_configure('low_stock', foreground='red')
                    self.tree.item(item_id, tags=('low_stock',))
            
            def on_item_select(self, event):
                """Handle item selection"""
                selected = self.tree.selection()
                if selected and self.on_select:
                    item_id = selected[0]
                    item_data = self.tree.set(item_id, "data")
                    self.on_select(item_data)
            
            def get_selected_data(self):
                """Get data of selected item"""
                selected = self.tree.selection()
                if selected:
                    return self.tree.set(selected[0], "data")
                return None
            
            def clear(self):
                """Clear all data"""
                for item in self.tree.get_children():
                    self.tree.delete(item)
            
            def refresh(self, new_data=None):
                """Refresh table with new data"""
                if new_data:
                    self.data = new_data
                self.load_data(self.data)
            
            # ... Additional methods for sorting, filtering, etc.
    </pre>
</div>

<hr/>

<b>c. Controller Integration Pattern</b><br/>

<b>1. Controller Connecting GUI to Business Logic:</b>
<div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <pre>
        # controllers/inventory_controller.py
        import logging
        from typing import List, Dict, Optional, Tuple
        from business.inventory_manager import InventoryManager
        from database.connection import DatabaseConnection
        from models.item import Item
        
        logger = logging.getLogger(__name__)
        
        class InventoryController:
            def __init__(self):
                # Initialize database connection
                self.db = DatabaseConnection()
                self.connection = self.db.get_connection()
                
                # Initialize business logic
                self.inventory_manager = InventoryManager(self.connection)
                
                # GUI callbacks
                self.on_data_changed = None
                
                # Cache for performance
                self._items_cache = None
                self._stats_cache = None
            
            def set_data_changed_callback(self, callback):
                """Set callback for when data changes"""
                self.on_data_changed = callback
            
            def notify_data_changed(self):
                """Notify GUI that data has changed"""
                if self.on_data_changed:
                    self.on_data_changed()
                
                # Clear cache
                self._items_cache = None
                self._stats_cache = None
            
            # Item operations
            def get_all_items(self, force_refresh=False) -> List[Item]:
                """Get all items with caching"""
                if self._items_cache is None or force_refresh:
                    self._items_cache = self.inventory_manager.item_repo.get_all()
                return self._items_cache
            
            def get_item(self, item_id: int) -> Optional[Item]:
                """Get item by ID"""
                return self.inventory_manager.item_repo.get_by_id(item_id)
            
            def add_item(self, item_data: Dict) -> Tuple[bool, str]:
                """Add new item"""
                try:
                    success, message, item_id = self.inventory_manager.add_item(item_data)
                    if success:
                        self.notify_data_changed()
                        logger.info(f"Item added: {item_id}")
                    return success, message
                except Exception as e:
                    logger.error(f"Error adding item: {e}")
                    return False, f"Error: {str(e)}"
            
            def update_item(self, item_id: int, update_data: Dict) -> Tuple[bool, str]:
                """Update existing item"""
                try:
                    success, message = self.inventory_manager.update_item(item_id, update_data)
                    if success:
                        self.notify_data_changed()
                        logger.info(f"Item updated: {item_id}")
                    return success, message
                except Exception as e:
                    logger.error(f"Error updating item: {e}")
                    return False, f"Error: {str(e)}"
            
            def delete_item(self, item_id: int) -> Tuple[bool, str]:
                """Delete item"""
                try:
                    success, message = self.inventory_manager.delete_item(item_id)
                    if success:
                        self.notify_data_changed()
                        logger.info(f"Item deleted: {item_id}")
                    return success, message
                except Exception as e:
                    logger.error(f"Error deleting item: {e}")
                    return False, f"Error: {str(e)}"
            
            # Search operations
            def search_items(self, search_term: str, search_by: str = "name") -> List[Item]:
                """Search items"""
                return self.inventory_manager.search_items(search_term, search_by)
            
            # Statistics
            def get_statistics(self) -> Dict:
                """Get application statistics"""
                if self._stats_cache is None:
                    items = self.get_all_items()
                    low_stock = self.inventory_manager.get_low_stock_items()
                    total_value = self.inventory_manager.get_inventory_value()
                    
                    self._stats_cache = {
                        'total_items': len(items),
                        'low_stock_count': len(low_stock),
                        'total_value': total_value,
                        'categories_count': len(set(item.category_id for item in items if item.category_id)),
                        'last_updated': max((item.updated_at for item in items if hasattr(item, 'updated_at')), default=None)
                    }
                return self._stats_cache
            
            # Export operations
            def export_to_csv(self, filepath: str) -> Tuple[bool, str]:
                """Export data to CSV"""
                try:
                    items = self.get_all_items()
                    
                    import csv
                    with open(filepath, 'w', newline='', encoding='utf-8') as f:
                        writer = csv.DictWriter(f, fieldnames=['sku', 'name', 'quantity', 'price'])
                        writer.writeheader()
                        for item in items:
                            writer.writerow({
                                'sku': item.sku,
                                'name': item.name,
                                'quantity': item.quantity,
                                'price': item.price
                            })
                    
                    logger.info(f"Data exported to {filepath}")
                    return True, f"Exported {len(items)} items to {filepath}"
                    
                except Exception as e:
                    logger.error(f"Export error: {e}")
                    return False, f"Export failed: {str(e)}"
            
            # Bulk operations
            def import_from_csv(self, filepath: str) -> Tuple[bool, str, int]:
                """Import data from CSV"""
                try:
                    import csv
                    imported_count = 0
                    errors = []
                    
                    with open(filepath, 'r', encoding='utf-8') as f:
                        reader = csv.DictReader(f)
                        for row_num, row in enumerate(reader, 1):
                            try:
                                # Convert row to item data
                                item_data = {
                                    'sku': row.get('sku', '').strip(),
                                    'name': row.get('name', '').strip(),
                                    'quantity': int(row.get('quantity', 0)),
                                    'price': float(row.get('price', 0)),
                                    'cost': float(row.get('cost', 0))
                                }
                                
                                success, message, _ = self.inventory_manager.add_item(item_data)
                                if success:
                                    imported_count += 1
                                else:
                                    errors.append(f"Row {row_num}: {message}")
                                    
                            except (ValueError, KeyError) as e:
                                errors.append(f"Row {row_num}: Invalid data - {e}")
                    
                    if imported_count > 0:
                        self.notify_data_changed()
                    
                    if errors:
                        return False, f"Import completed with {len(errors)} errors: {'; '.join(errors[:3])}", imported_count
                    else:
                        return True, f"Successfully imported {imported_count} items", imported_count
                        
                except Exception as e:
                    logger.error(f"Import error: {e}")
                    return False, f"Import failed: {str(e)}", 0
    </pre>
</div>

<hr/>

<h3>Hands-On Exercise: Build Your Main Interface</h3>
<b>Task:</b> Create the main GUI interface for your capstone project and connect it to your backend.<br/><br/>

<b>Implementation Checklist:</b>
<div style="background-color: #fff0e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <b>Step 1: Create Main Window Structure</b><br/>
    1. Set up main application class inheriting from tk.Tk<br/>
    2. Configure window size, title, and minimum size<br/>
    3. Create menu bar with File, Edit, Help menus<br/>
    4. Setup keyboard shortcuts (Ctrl+S, Ctrl+N, etc.)<br/><br/>
    
    <b>Step 2: Implement Custom Widgets</b><br/>
    1. Create at least 2 custom widgets (SearchBar, DataTable)<br/>
    2. Add styling and theming<br/>
    3. Implement context menus<br/>
    4. Add tooltips for important controls<br/><br/>
    
    <b>Step 3: Create View Classes</b><br/>
    1. Dashboard view with statistics and charts<br/>
    2. Data management view (CRUD operations)<br/>
    3. Reports view with data visualization<br/>
    4. Settings/Preferences view<br/><br/>
    
    <b>Step 4: Implement Controller</b><br/>
    1. Create controller connecting GUI to business logic<br/>
    2. Implement data caching for performance<br/>
    3. Add error handling and user feedback<br/>
    4. Implement async operations for long tasks<br/><br/>
    
    <b>Step 5: Add Polish</b><br/>
    1. Add loading indicators<br/>
    2. Implement status bar updates<br/>
    3. Add confirmation dialogs for destructive actions<br/>
    4. Implement data validation in forms<br/>
    5. Add export/import functionality<br/>
</div>

<hr/>

<div class="assignment-box">
    <h4>Assignment: Complete GUI Implementation</h4>
    <p>Build the complete GUI interface for your capstone project and connect it to your backend.</p>
    
    <div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <b>Part 1: Main Application Window</b><br/>
        - Professional-looking main window with menu bar<br/>
        - Responsive layout that works at different sizes<br/>
        - Tabbed interface or navigation system<br/>
        - Status bar with real-time updates<br/>
        - Keyboard shortcuts for common actions<br/><br/>
        
        <b>Part 2: Core Views/Screens</b><br/>
        - Dashboard with statistics and overview<br/>
        - Data entry/management screen with forms<br/>
        - Data display screen with search and filter<br/>
        - Reports/analytics screen<br/>
        - Settings/preferences screen<br/><br/>
        
        <b>Part 3: Custom Widgets</b><br/>
        - Create at least 3 reusable custom widgets<br/>
        - Implement proper styling and theming<br/>
        - Add tooltips and help text<br/>
        - Ensure accessibility (keyboard navigation)<br/><br/>
        
        <b>Part 4: Controller & Integration</b><br/>
        - Complete controller connecting GUI to backend<br/>
        - Async loading for large datasets<br/>
        - Error handling with user-friendly messages<br/>
        - Data validation in forms<br/>
        - Import/export functionality<br/><br/>
        
        <b>Part 5: User Experience</b><br/>
        - Loading indicators for long operations<br/>
        - Confirmation dialogs for deletions<br/>
        - Auto-save where appropriate<br/>
        - Undo/redo functionality (bonus)<br/>
        - Data backup reminders<br/>
    </div>
    
    <p><b>Testing Checklist:</b></p>
    <ul>
        <li>‚úì Application starts without errors</li>
        <li>‚úì All buttons and menus work</li>
        <li>‚úì Data loads and displays correctly</li>
        <li>‚úì Forms validate input properly</li>
        <li>‚úì Error messages are user-friendly</li>
        <li>‚úì Application responds to window resizing</li>
        <li>‚úì Keyboard shortcuts work</li>
        <li>‚úì Search and filter functions work</li>
    </ul>
    
    <div style="background-color: #e6ffed; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <h4>üé® Pro UI Tips:</h4>
        <ul>
            <li>Use consistent spacing and alignment</li>
            <li>Choose a color scheme and stick to it</li>
            <li>Add icons for better visual recognition</li>
            <li>Provide feedback for all user actions</li>
            <li>Test with both mouse and keyboard</li>
            <li>Consider users with visual impairments</li>
        </ul>
        <p><b>Tomorrow:</b> We'll test, package, and deploy your application as a standalone .EXE file!</p>
    </div>
</div>`
            },
            "14-4": {
                "icon": "fa-shipping-fast",
                "title": "Testing, Packaging & Deployment (.EXE)",
                "html": `<h1>Week 14, Day 4: Testing, Packaging & Deployment (.EXE)</h1>
<p>Today we complete our journey! We'll test our application, package it for distribution, and create a professional installer.</p>

<div class="analogy-box">
    <b>Analogy: Car Manufacturing & Delivery üöó</b><br/>
    <ul style="margin-top: 10px;">
        <li><b>Testing</b> = Quality control & test drives</li>
        <li><b>Packaging</b> = Final assembly & detailing</li>
        <li><b>Dependencies</b> = All parts included in the car</li>
        <li><b>Installer</b> = Delivery to customer's driveway</li>
        <li><b>Documentation</b> = Owner's manual</li>
    </ul>
</div>

<h3>Key Topics</h3>
<ul>
    <li>Comprehensive Testing Strategies</li>
    <li>Dependency Management & Virtual Environments</li>
    <li>Packaging with PyInstaller (.EXE creation)</li>
    <li>Creating Professional Installers</li>
    <li>Documentation & User Guides</li>
    <li>Deployment Best Practices</li>
</ul>

<h3>In-Depth Explanation</h3>

<b>a. Comprehensive Testing Strategy</b><br/>

<b>1. Unit Tests with unittest:</b>
<div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <pre>
        # tests/test_inventory.py
        import unittest
        import sqlite3
        import tempfile
        import os
        from models.item import Item
        from business.inventory_manager import InventoryManager
        
        class TestInventory(unittest.TestCase):
            def setUp(self):
                """Set up test database"""
                # Create temporary database
                self.db_file = tempfile.NamedTemporaryFile(delete=False, suffix='.db')
                self.db_path = self.db_file.name
                self.conn = sqlite3.connect(self.db_path)
                
                # Initialize with test schema
                with open('database/schema.sql', 'r') as f:
                    schema = f.read()
                    self.conn.executescript(schema)
                
                # Create inventory manager
                self.manager = InventoryManager(self.conn)
            
            def tearDown(self):
                """Clean up test database"""
                self.conn.close()
                os.unlink(self.db_path)
            
            def test_add_item_valid(self):
                """Test adding a valid item"""
                item_data = {
                    'sku': 'TEST-001',
                    'name': 'Test Product',
                    'quantity': 10,
                    'price': 29.99,
                    'cost': 15.00
                }
                
                success, message, item_id = self.manager.add_item(item_data)
                
                self.assertTrue(success)
                self.assertIsNotNone(item_id)
                self.assertIn('successfully', message.lower())
            
            def test_add_item_invalid_sku(self):
                """Test adding item with invalid SKU"""
                item_data = {
                    'sku': 'A',  # Too short
                    'name': 'Test',
                    'quantity': 10,
                    'price': 10.00
                }
                
                success, message, _ = self.manager.add_item(item_data)
                
                self.assertFalse(success)
                self.assertIn('sku', message.lower())
            
            def test_process_sale_sufficient_stock(self):
                """Test sale with sufficient stock"""
                # First add an item
                item_data = {'sku': 'SALE-001', 'name': 'Sale Item', 'quantity': 10, 'price': 10}
                _, _, item_id = self.manager.add_item(item_data)
                
                # Process sale
                success, message = self.manager.process_sale(item_id, 3, 1)
                
                self.assertTrue(success)
                
                # Check quantity updated
                item = self.manager.item_repo.get_by_id(item_id)
                self.assertEqual(item.quantity, 7)
            
            def test_process_sale_insufficient_stock(self):
                """Test sale with insufficient stock"""
                item_data = {'sku': 'SALE-002', 'name': 'Low Stock', 'quantity': 2, 'price': 10}
                _, _, item_id = self.manager.add_item(item_data)
                
                success, message = self.manager.process_sale(item_id, 5, 1)
                
                self.assertFalse(success)
                self.assertIn('insufficient', message.lower())
            
            def test_low_stock_detection(self):
                """Test low stock detection"""
                # Add item below threshold
                item_data = {
                    'sku': 'LOW-001',
                    'name': 'Low Item',
                    'quantity': 3,  # Below default min_stock of 5
                    'price': 10,
                    'min_stock': 5
                }
                self.manager.add_item(item_data)
                
                low_stock_items = self.manager.get_low_stock_items()
                
                self.assertEqual(len(low_stock_items), 1)
                self.assertEqual(low_stock_items[0].sku, 'LOW-001')
        
        if __name__ == '__main__':
            unittest.main()
    </pre>
</div>

<b>2. GUI Testing with unittest and mock:</b>
<div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <pre>
        # tests/test_gui.py
        import unittest
        from unittest.mock import Mock, patch
        import tkinter as tk
        from app.main_window import MainApplication
        
        class TestGUI(unittest.TestCase):
            def setUp(self):
                """Set up test environment"""
                # Mock the controller to avoid database dependencies
                self.mock_controller = Mock()
                self.mock_controller.get_statistics.return_value = {
                    'total_items': 5,
                    'low_stock_count': 2,
                    'total_value': 1500.00
                }
                
                # Create root window (hidden)
                self.root = tk.Tk()
                self.root.withdraw()  # Hide window during tests
            
            def test_main_window_creation(self):
                """Test main window can be created"""
                with patch('app.main_window.InventoryController', return_value=self.mock_controller):
                    app = MainApplication()
                    
                    # Check window properties
                    self.assertIsNotNone(app)
                    self.assertEqual(app.title(), "Inventory Management System")
                    
                    app.destroy()
            
            def test_menu_creation(self):
                """Test menu creation"""
                with patch('app.main_window.InventoryController', return_value=self.mock_controller):
                    app = MainApplication()
                    
                    # Check menu exists
                    menu = app.cget('menu')
                    self.assertIsNotNone(menu)
                    
                    # Check menu items
                    menu_entries = menu.index('end')
                    self.assertGreater(menu_entries, 0)  # Should have menu items
                    
                    app.destroy()
            
            def test_status_bar_updates(self):
                """Test status bar functionality"""
                with patch('app.main_window.InventoryController', return_value=self.mock_controller):
                    app = MainApplication()
                    
                    # Test status update
                    test_message = "Testing status update"
                    app.update_status(test_message)
                    
                    self.assertEqual(app.status_label.cget('text'), test_message)
                    
                    app.destroy()
            
            def tearDown(self):
                """Clean up"""
                self.root.destroy()
        
        # Run GUI tests in headless mode
        if __name__ == '__main__':
            # Set DISPLAY environment variable for headless testing
            import os
            os.environ['DISPLAY'] = ':0'
            
            unittest.main()
    </pre>
</div>

<hr/>

<b>b. Dependency Management with requirements.txt</b><br/>

<b>1. Complete requirements.txt:</b>
<div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <pre>
        # requirements.txt
        # Inventory Management System Dependencies
        
        # Core Python (included in standard library)
        # No additional packages needed for: sqlite3, tkinter, unittest, json, csv
        
        # Third-party packages
        # Add these only if you actually use them
        
        # Development dependencies
        pylint==2.17.4          # Code linting
        black==23.3.0           # Code formatting
        pytest==7.3.1           # Testing framework
        
        # Optional: For enhanced GUI
        # ttkthemes==3.2.2       # Additional Tkinter themes
        # pillow==9.5.0          # Image processing for icons
        
        # Packaging tools
        pyinstaller==5.11.0     # For creating .exe files
        cx-freeze==6.15.0       # Alternative to pyinstaller
        
        # Version constraints
        # >= for minimum version, <= for maximum, ~= for compatible
        
        # Environment markers (optional)
        ; sys_platform == "win32"
        ; python_version >= "3.8"
        
        # Generate with: pip freeze > requirements.txt
        # Install with: pip install -r requirements.txt
    </pre>
</div>

<b>2. Virtual Environment Setup Script:</b>
<div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <pre>
        # setup_env.bat (Windows)
        @echo off
        echo Setting up development environment...
        
        REM Create virtual environment
        python -m venv venv
        
        REM Activate virtual environment
        call venv\Scripts\activate.bat
        
        REM Upgrade pip
        python -m pip install --upgrade pip
        
        REM Install dependencies
        pip install -r requirements.txt
        
        echo Environment setup complete!
        echo.
        echo To activate: venv\Scripts\activate.bat
        echo To run: python main.py
        
        pause
        
        # setup_env.sh (Linux/Mac)
        #!/bin/bash
        echo "Setting up development environment..."
        
        # Create virtual environment
        python3 -m venv venv
        
        # Activate virtual environment
        source venv/bin/activate
        
        # Upgrade pip
        python -m pip install --upgrade pip
        
        # Install dependencies
        pip install -r requirements.txt
        
        echo "Environment setup complete!"
        echo ""
        echo "To activate: source venv/bin/activate"
        echo "To run: python main.py"
    </pre>
</div>

<hr/>

<b>c. Packaging with PyInstaller</b><br/>

<b>1. Basic PyInstaller Command:</b>
<div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <pre>
        # Basic packaging command
        pyinstaller --onefile --windowed --name "InventoryManager" main.py
        
        # Explanation of flags:
        # --onefile          : Package into single .exe file
        # --windowed         : Don't show console window (for GUI apps)
        # --name "Name"      : Name of output executable
        # --icon=icon.ico    : Add custom icon
        # --add-data         : Include additional files
        
        # Full production command:
        pyinstaller --onefile --windowed --name "InventorySystem" \
                   --icon="assets/icon.ico" \
                   --add-data="database/schema.sql;database" \
                   --add-data="assets;assets" \
                   --hidden-import=tkinter \
                   --clean \
                   main.py
    </pre>
</div>

<b>2. Professional build.py Script:</b>
<div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <pre>
        # build.py - Professional build script
        import PyInstaller.__main__
        import os
        import shutil
        from datetime import datetime
        import subprocess
        
        def clean_build():
            """Clean previous build artifacts"""
            folders = ['build', 'dist', '__pycache__']
            for folder in folders:
                if os.path.exists(folder):
                    shutil.rmtree(folder)
                    print(f"Cleaned {folder}")
            
            # Clean .spec files
            for file in os.listdir('.'):
                if file.endswith('.spec'):
                    os.remove(file)
                    print(f"Removed {file}")
        
        def run_tests():
            """Run tests before building"""
            print("Running tests...")
            result = subprocess.run(['python', '-m', 'pytest', 'tests/', '-v'], 
                                  capture_output=True, text=True)
            print(result.stdout)
            if result.returncode != 0:
                print("Tests failed! Build aborted.")
                print(result.stderr)
                return False
            return True
        
        def create_version_file():
            """Create version info file"""
            version = "1.0.0"
            build_date = datetime.now().strftime("%Y-%m-%d %H:%M:%S")
            
            version_content = f'''# Auto-generated version file
            __version__ = "{version}"
            __build_date__ = "{build_date}"
            __author__ = "Your Company"
            '''
            
            with open('version.py', 'w') as f:
                f.write(version_content)
            
            return version
        
        def build_executable(version):
            """Build executable with PyInstaller"""
            print(f"\nBuilding version {version}...")
            
            # PyInstaller arguments
            args = [
                'main.py',               # Main script
                '--onefile',             # Single executable
                '--windowed',            # GUI application
                f'--name=InventorySystem_v{version.replace(".", "_")}',
                '--icon=assets/icon.ico',
                '--add-data=database/schema.sql;database',
                '--add-data=assets;assets',
                '--add-data=config.json;.',
                '--hidden-import=tkinter',
                '--hidden-import=sqlite3',
                '--clean',
                '--noconfirm',          # Don't ask for confirmation
                '--log-level=WARN'      # Reduce log verbosity
            ]
            
            # Add version info if file exists
            if os.path.exists('version_info.txt'):
                args.append('--version-file=version_info.txt')
            
            PyInstaller.__main__.run(args)
            
            print("Build completed!")
        
        def package_for_distribution(version):
            """Create distribution package"""
            print("\nCreating distribution package...")
            
            dist_folder = 'dist'
            package_name = f'InventorySystem_v{version}'
            package_folder = os.path.join(dist_folder, package_name)
            
            # Create package folder
            os.makedirs(package_folder, exist_ok=True)
            
            # Copy executable
            exe_name = f'InventorySystem_v{version.replace(".", "_")}.exe'
            exe_src = os.path.join(dist_folder, exe_name)
            exe_dst = os.path.join(package_folder, 'InventorySystem.exe')
            
            if os.path.exists(exe_src):
                shutil.copy2(exe_src, exe_dst)
            
            # Copy documentation
            docs = ['README.md', 'LICENSE', 'CHANGELOG.md']
            for doc in docs:
                if os.path.exists(doc):
                    shutil.copy2(doc, package_folder)
            
            # Create sample data
            sample_data = os.path.join(package_folder, 'sample_data.csv')
            with open(sample_data, 'w') as f:
                f.write("sku,name,quantity,price ")
                f.write("ITEM-001,Sample Product,10,29.99 ")
                f.write("ITEM-002,Another Product,5,19.99 ")
            
            # Create installer script
            create_installer_script(package_folder, version)
            
            # Create zip archive
            shutil.make_archive(package_name, 'zip', dist_folder, package_name)
            
            print(f"Package created: {package_name}.zip")
        
        def create_installer_script(folder, version):
            """Create simple installer script"""
            installer_content = f'''@echo off
            echo Inventory Management System v{version}
            echo ======================================
            echo.
            echo This package contains:
            echo 1. InventorySystem.exe - Main application
            echo 2. README.md - Instructions
            echo 3. sample_data.csv - Sample data
            echo.
            echo Installation:
            echo 1. Extract all files to a folder
            echo 2. Double-click InventorySystem.exe to run
            echo 3. No installation required!
            echo.
            echo System requirements:
            echo - Windows 10 or later
            echo - 4GB RAM minimum
            echo - 100MB free disk space
            echo.
            pause
            '''
            
            with open(os.path.join(folder, 'INSTALL.txt'), 'w') as f:
                f.write(installer_content)
        
        def main():
            """Main build process"""
            print("=== Inventory System Build Process ===")
            
            # Step 1: Clean
            clean_build()
            
            # Step 2: Run tests
            if not run_tests():
                return
            
            # Step 3: Create version
            version = create_version_file()
            
            # Step 4: Build executable
            build_executable(version)
            
            # Step 5: Create distribution package
            package_for_distribution(version)
            
            print(f" === Build Complete ===")
            print(f"Version: {version}")
            print(f"Output: dist/InventorySystem_v{version}.zip")
        
        if __name__ == '__main__':
            main()
    </pre>
</div>

<hr/>

<b>d. Creating an Installer with Inno Setup (Windows)</b><br/>

<b>1. Inno Setup Script (installer.iss):</b>
<div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <pre>
        ; installer.iss
        ; Inno Setup Script for Inventory Management System
        
        [Setup]
        AppName=Inventory Management System
        AppVersion=1.0.0
        AppPublisher=Your Company
        AppPublisherURL=https://www.yourcompany.com
        AppSupportURL=https://www.yourcompany.com/support
        AppUpdatesURL=https://www.yourcompany.com/updates
        DefaultDirName={pf}\InventorySystem
        DefaultGroupName=Inventory System
        AllowNoIcons=yes
        LicenseFile=LICENSE
        OutputDir=installer
        OutputBaseFilename=InventorySystem_Setup
        Compression=lzma2
        SolidCompression=yes
        UninstallDisplayIcon={app}\InventorySystem.exe
        SetupIconFile=assets\icon.ico
        
        [Languages]
        Name: "english"; MessagesFile: "compiler:Default.isl"
        
        [Tasks]
        Name: "desktopicon"; Description: "{cm:CreateDesktopIcon}"; GroupDescription: "{cm:AdditionalIcons}"
        Name: "quicklaunchicon"; Description: "{cm:CreateQuickLaunchIcon}"; GroupDescription: "{cm:AdditionalIcons}"; Flags: unchecked
        
        [Files]
        ; Main executable
        Source: "dist\InventorySystem.exe"; DestDir: "{app}"; Flags: ignoreversion
        ; Documentation
        Source: "README.md"; DestDir: "{app}"; Flags: ignoreversion
        Source: "CHANGELOG.md"; DestDir: "{app}"; Flags: ignoreversion
        ; Sample data
        Source: "sample_data.csv"; DestDir: "{app}"; Flags: ignoreversion
        ; Database schema
        Source: "database\schema.sql"; DestDir: "{app}\database"; Flags: ignoreversion
        ; Configuration
        Source: "config.json"; DestDir: "{app}"; Flags: onlyifdoesntexist
        ; Assets
        Source: "assets\*"; DestDir: "{app}\assets"; Flags: ignoreversion recursesubdirs createallsubdirs
        
        [Icons]
        Name: "{group}\Inventory System"; Filename: "{app}\InventorySystem.exe"
        Name: "{group}\{cm:UninstallProgram,Inventory System}"; Filename: "{uninstallexe}"
        Name: "{commondesktop}\Inventory System"; Filename: "{app}\InventorySystem.exe"; Tasks: desktopicon
        Name: "{userappdata}\Microsoft\Internet Explorer\Quick Launch\Inventory System"; Filename: "{app}\InventorySystem.exe"; Tasks: quicklaunchicon
        
        [Run]
        Filename: "{app}\InventorySystem.exe"; Description: "{cm:LaunchProgram,Inventory System}"; Flags: nowait postinstall skipifsilent
        
        [UninstallDelete]
        Type: filesandordirs; Name: "{app}\logs"
        Type: files; Name: "{app}\inventory.db"
        
        [Code]
        function InitializeSetup(): Boolean;
        begin
          Result := True;
          // Check for .NET Framework or other prerequisites
          // if not IsDotNetInstalled then begin
          //   MsgBox('This application requires .NET Framework 4.8. Please install it first.', mbError, MB_OK);
          //   Result := False;
          // end;
        end;
        
        procedure CurStepChanged(CurStep: TSetupStep);
        begin
          if CurStep = ssPostInstall then begin
            // Create initial database on first run
            Exec(ExpandConstant('{app}\InventorySystem.exe'), '--init-db', '', SW_HIDE, ewWaitUntilTerminated, ResultCode);
          end;
        end;
    </pre>
</div>

<hr/>

<h3>Hands-On Exercise: Package Your Application</h3>
<b>Task:</b> Package your capstone project into a standalone executable and create an installer.<br/><br/>

<b>Step-by-Step Packaging Process:</b>
<div style="background-color: #fff0e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <b>Step 1: Prepare Your Project</b><br/>
    1. Run all tests and fix any issues<br/>
    2. Clean up unused files and debug code<br/>
    3. Update version numbers and documentation<br/>
    4. Create requirements.txt if using external packages<br/><br/>
    
    <b>Step 2: Test PyInstaller Locally</b><br/>
    1. Install PyInstaller: <code>pip install pyinstaller</code><br/>
    2. Test basic packaging: <code>pyinstaller --onefile main.py</code><br/>
    3. Test the generated .exe file<br/>
    4. Fix any missing module errors<br/><br/>
    
    <b>Step 3: Create Production Build</b><br/>
    1. Create build.py script with all options<br/>
    2. Include all data files (images, databases, configs)<br/>
    3. Add custom icon to .exe<br/>
    4. Build with: <code>python build.py</code><br/><br/>
    
    <b>Step 4: Test on Clean System</b><br/>
    1. Copy .exe to a different computer (or VM)<br/>
    2. Run without Python installed<br/>
    3. Test all functionality<br/>
    4. Fix any path or dependency issues<br/><br/>
    
    <b>Step 5: Create Installer (Optional)</b><br/>
    1. Download Inno Setup (Windows)<br/>
    2. Create installer.iss script<br/>
    3. Build installer<br/>
    4. Test installation process<br/>
</div>

<hr/>

<div class="assignment-box">
    <h4>Assignment: Complete Deployment Package</h4>
    <p>Create a complete deployment package for your capstone project.</p>
    
    <div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <b>Part 1: Testing & Quality Assurance</b><br/>
        - Write at least 10 unit tests covering core functionality<br/>
        - Perform manual testing of all GUI features<br/>
        - Test edge cases and error conditions<br/>
        - Fix all bugs before packaging<br/><br/>
        
        <b>Part 2: Packaging Configuration</b><br/>
        - Create requirements.txt with dependencies<br/>
        - Create build.py script for automated building<br/>
        - Configure PyInstaller with all necessary options<br/>
        - Include all data files and assets<br/>
        - Add custom application icon<br/><br/>
        
        <b>Part 3: Create Standalone Executable</b><br/>
        - Build .exe file using PyInstaller<br/>
        - Test .exe on your development machine<br/>
        - Test .exe on a clean machine (no Python)<br/>
        - Fix any runtime errors<br/><br/>
        
        <b>Part 4: Documentation & Distribution</b><br/>
        - Create user manual (README.md)<br/>
        - Create installation instructions<br/>
        - Create troubleshooting guide<br/>
        - Optional: Create Inno Setup installer<br/>
        - Package everything in a zip file<br/><br/>
        
        <b>Part 5: Final Validation</b><br/>
        - Install and run on different Windows versions<br/>
        - Test with antivirus software (false positives)<br/>
        - Verify file size is reasonable<br/>
        - Check startup time and performance<br/>
    </div>
    
    <p><b>Final Deliverables:</b></p>
    <ul>
        <li>Complete source code with comments</li>
        <li>Standalone .exe file</li>
        <li>User documentation</li>
        <li>Installation package (zip file)</li>
        <li>Test report and bug fixes</li>
    </ul>
    
    <div style="background-color: #e6ffed; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <h4>üéâ CONGRATULATIONS! üéâ</h4>
        <p><b>You've completed the 14-week Software Development Course!</b></p>
        
        <p><b>What you've accomplished:</b></p>
        <ul>
            <li>‚úÖ Learned Python programming fundamentals</li>
            <li>‚úÖ Mastered Object-Oriented Programming</li>
            <li>‚úÖ Built desktop applications with GUI</li>
            <li>‚úÖ Worked with databases (SQLite)</li>
            <li>‚úÖ Learned software architecture patterns</li>
            <li>‚úÖ Created a complete capstone project</li>
            <li>‚úÖ Packaged and deployed a professional application</li>
        </ul>
        
        <p><b>Next Steps:</b></p>
        <ul>
            <li>Add your project to your portfolio</li>
            <li>Share with friends and get feedback</li>
            <li>Consider adding more features</li>
            <li>Explore web development (Flask/Django)</li>
            <li>Learn about APIs and cloud services</li>
        </ul>
        
        <p style="font-size: 1.2em; font-weight: bold; color: #1890ff;">
            You are now a software developer! üöÄ
        </p>
    </div>
    
    <div style="background-color: #fff7e6; padding: 15px; margin: 10px 0; border-radius: 5px; border-left: 4px solid #ffa940;">
        <h4>üìö Course Completion Certificate</h4>
        <p>To receive your certificate of completion:</p>
        <ol>
            <li>Submit your capstone project</li>
            <li>Complete all weekly assignments</li>
            <li>Pass the final project review</li>
            <li>Email your instructor with your completed work</li>
        </ol>
        <p><b>Thank you for your hard work and dedication!</b></p>
    </div>
</div>`
            },

        };

        function showDashboard() {
            const display = document.getElementById('main-content');
            document.querySelectorAll('.nav-item').forEach(item => item.classList.remove('active'));

            let gridHtml = `<h1>Software Development: 14-Week Curriculum</h1>
    <p>Navigate through the levels below to access instructor notes and analogies.</p>
    <div class="topic-grid">`;

            for (const key in contentData) {
                if (contentData.hasOwnProperty(key)) {
                    gridHtml += `
                <div class="grid-card" onclick="loadContent(${key.split('-')[0]}, ${key.split('-')[1]})">
                    <i class="${contentData[key].icon.startsWith('fab') ? 'fab' : 'fa-solid'} ${contentData[key].icon}"></i>
                    <span>${contentData[key].title}</span>
                </div>
            `;
                }
            }

            gridHtml += `</div>`;
            display.innerHTML = gridHtml;
        }

        function loadContent(week, day) {
            const key = week + "-" + day;
            console.log("Loading content for key:", key); // Debug line
            console.log("Content exists?", key in contentData); // Debug line
            const data = contentData[key];
            const display = document.getElementById('main-content');
            document.querySelectorAll('.nav-item').forEach(item => item.classList.remove('active'));
            const activeNav = document.getElementById('nav-' + key);
            if (activeNav) activeNav.classList.add('active');

            if (data) {
                display.innerHTML = data.html;
            } else {
                display.innerHTML = `<h1>Day ${day} Content</h1><p>Lesson plan for Week ${week} Day ${day} is following the curriculum schedule: 2 hours of lab practice based on the previous lecture.</p>`;
            }
            display.scrollTop = 0;
        }

        window.onload = showDashboard;
    </script>
</body>

</html>