<?php
session_start();
if (!isset($_SESSION['loggedin']) || $_SESSION['loggedin'] !== true) {
    header("Location: index.php");
    exit;
}
?>

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kids Coding Portal | Tier Three</title>
    <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"> -->
    <script src="https://kit.fontawesome.com/192436698a.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="../css/style.css">
    <link rel="icon" href="../assets/logo.png" type="image/png">

</head>

<body class="portal-body">

    <header class="portal-header">
        <div>
            <a href="../landing.php" class="back-btn"><i class="fa-solid fa-caret-left"></i> Catalog</a>
            <a href="../kids-coding.php" class="back-btn">
                <i class="fa-solid fa-arrow-up-from-bracket"></i> Tiers
            </a>
            <strong>Code Master</strong> | Instructor Guide
        </div>
        <div style="display: flex; gap: 15px; align-items: center;">
            <div onclick="showDashboard()" style="cursor:pointer"><i class="fa-solid fa-table-cells"></i> Dashboard View</div>
            <a href="../logout.php" class="back-btn" style="background: #c0392b; border: none;">
                <i class="fa-solid fa-power-off"></i> Logout
            </a>
        </div>
    </header>

    <div class="portal-container">
        <div class="sidebar">
            <h3>Month 1: Python Foundations</h3>

            <div class="nav-item" id="nav-1-1" onclick="loadContent(1,1)">Week 1: Python Syntax & The Shell</div>
            <div class="nav-item" id="nav-1-2" onclick="loadContent(1,2)">Week 2: Control Flow (Deep If/Else)</div>
            <div class="nav-item" id="nav-1-3" onclick="loadContent(1,3)">Week 3: Collection Data (Lists & Dictionaries)</div>
            <div class="nav-item" id="nav-1-4" onclick="loadContent(1,4)">Week 4: Month 1 Project -- The Virtual ATM</div>

            <h3>Month 2: Automation Specialist (Functions & Loops)</h3>

            <div class="nav-item" id="nav-2-5" onclick="loadContent(2,5)">Week 5: Reusable Code (Functions)</div>
            <div class="nav-item" id="nav-2-6" onclick="loadContent(2,6)">Week 6: Advanced Loops (For & While)</div>
            <div class="nav-item" id="nav-2-7" onclick="loadContent(2,7)">Week 7: Error Handling (Try/Except)</div>
            <div class="nav-item" id="nav-2-8" onclick="loadContent(2,8)">Week 8: Month 2 Project -- The Inventory Manager</div>

            <h3>Month 3: The File Master (Reading & Writing Data)</h3>

            <div class="nav-item" id="nav-3-9" onclick="loadContent(3,9)">Week 9: Working with Text Files (.txt)</div>
            <div class="nav-item" id="nav-3-10" onclick="loadContent(3,10)">Week 10: CSV Data (The Excel Connection)</div>
            <div class="nav-item" id="nav-3-11" onclick="loadContent(3,11)">Week 11: Python Libraries (The Toolkit)</div>
            <div class="nav-item" id="nav-3-12" onclick="loadContent(3,12)">Week 12: Quarter 1 Finale -- The Student Grading System</div>

            <h3>Month 4: Intro to SQL</h3>

            <div class="nav-item" id="nav-4-13" onclick="loadContent(4,13)">Week 13: Database Basics & SQL Introduction</div>
            <div class="nav-item" id="nav-4-14" onclick="loadContent(4,14)">Week 14: Creating Tables & Data Types</div>
            <div class="nav-item" id="nav-4-15" onclick="loadContent(4,15)">Week 15: INSERT & UPDATE Operations</div>
            <div class="nav-item" id="nav-4-16" onclick="loadContent(4,16)">Week 16: SELECT Queries & Data Retrieval</div>

            <h3>Month 5: Relational Data</h3>

            <div class="nav-item" id="nav-5-17" onclick="loadContent(5,17)">Week 17: Tables Relationships & JOIN Operations</div>
            <div class="nav-item" id="nav-5-18" onclick="loadContent(5,18)">Week 18: Advanced SQL & Database Optimization</div>
            <div class="nav-item" id="nav-5-19" onclick="loadContent(5,19)">Week 19: Advanced Table Relationships</div>
            <div class="nav-item" id="nav-5-20" onclick="loadContent(5,20)">Week 20: Database Optimization & Indexes</div>

            <h3>Month 6: Python + SQL</h3>

            <div class="nav-item" id="nav-6-21" onclick="loadContent(6,21)">Week 21: Python + SQL: Database Connections</div>
            <div class="nav-item" id="nav-6-22" onclick="loadContent(6,22)">Week 22: Building Login Systems with Python + SQL</div>
            <div class="nav-item" id="nav-6-23" onclick="loadContent(6,23)">Week 23: Database Security & Protection</div>
            <div class="nav-item" id="nav-6-24" onclick="loadContent(6,24)">Week 24: Quarter 2 Final Project: Complete Database System</div>

            <h3>Month 7: Web Scraping</h3>

            <div class="nav-item" id="nav-7-25" onclick="loadContent(7,25)">Week 25: Web Scraping Basics & HTML Parsing</div>
            <div class="nav-item" id="nav-7-26" onclick="loadContent(7,26)">Week 26: Advanced Web Scraping with Selenium</div>
            <div class="nav-item" id="nav-7-27" onclick="loadContent(7,27)">Week 27: Web Scraping with BeautifulSoup</div>
            <div class="nav-item" id="nav-7-28" onclick="loadContent(7,28)">Week 28: Advanced Web Scraping: JS & Dynamic Content</div>

            <h3>Month 8: APIs (Application Programming Interface)</h3>

            <div class="nav-item" id="nav-8-29" onclick="loadContent(8,29)">Week 29: APIs - The Universal Connectors</div>
            <div class="nav-item" id="nav-8-30" onclick="loadContent(8,30)">Week 30: APIs in Action - Google Maps & Location Services</div>
            <div class="nav-item" id="nav-8-31" onclick="loadContent(8,31)">Week 31: Communication APIs: WhatsApp, Email & SMS</div>
            <div class="nav-item" id="nav-8-32" onclick="loadContent(8,32)">Week 32: Entertainment APIs - Spotify, Youtube & Games</div>

            <h3>Month 9: Automation Bots</h3>

            <div class="nav-item" id="nav-9-33" onclick="loadContent(9,33)">Week 33: Intro to Automation Bots</div>
            <div class="nav-item" id="nav-9-34" onclick="loadContent(9,34)">Week 34: Web Automation & Scraping Bots</div>
            <div class="nav-item" id="nav-9-35" onclick="loadContent(9,35)">Week 35: AI & Machine Learning Bots</div>
            <div class="nav-item" id="nav-9-36" onclick="loadContent(9,36)">Week 36: Deploying & Scaling Automation Bots</div>

            <h3>Month 10: Project Scoping</h3>

            <div class="nav-item" id="nav-10-37" onclick="loadContent(10,37)">Week 37: Capstone Kickoff</div>
            <div class="nav-item" id="nav-10-38" onclick="loadContent(10,38)">Week 38: Defining Requirements & User Stories</div>
            <div class="nav-item" id="nav-10-39" onclick="loadContent(10,39)">Week 39: Designing Database Schema</div>
            <div class="nav-item" id="nav-10-40" onclick="loadContent(10,40)">Week 40: Code Structure & Setup</div>

            <h3>Month 11: The Build</h3>

            <div class="nav-item" id="nav-11-41" onclick="loadContent(11,41)">Week 41: Build Database & Core Models</div>
            <div class="nav-item" id="nav-11-42" onclick="loadContent(11,42)">Week 42: User Authentication System</div>
            <div class="nav-item" id="nav-11-43" onclick="loadContent(11,43)">Week 43: Build Core Features & CRUD</div>
            <div class="nav-item" id="nav-11-44" onclick="loadContent(11,44)">Week 44: Advanced Features & Polish</div>

            <h3>Month 12: Deployment & Graduation </h3>

            <div class="nav-item" id="nav-12-45" onclick="loadContent(12,45)">Week 45: Testing & Debugging</div>
            <div class="nav-item" id="nav-12-46" onclick="loadContent(12,46)">Week 46: Deployment Preparation</div>
            <div class="nav-item" id="nav-12-47" onclick="loadContent(12,47)">Week 47: Deloyment & Cloud</div>
            <div class="nav-item" id="nav-12-48" onclick="loadContent(12,48)">Week 48: Graduation & Certification</div>
        </div>


        <div class="content" id="main-content">
        </div>
    </div>

    <footer>
        <div><i class="fa-brands fa-whatsapp me-1"></i> Support: UTS IT Academy</div>
        <div>&copy; 2026 Kids Coding | Tier 3 (48-Week Curriculum)</div>
    </footer>

    <script>
        const contentData = {

            "1-1": {
                "icon": "fa-terminal",
                "title": "Python Syntax & The Shell",
                "html": `<h1>Week 1, Month 1: Welcome to Python! ğŸ</h1>
<p>Today weâ€™ll learn what Python is, how to write our first lines of code, and understand the â€œClean Roomâ€ philosophy of Python.</p>

<div class="analogy-box">
    <h3>ğŸ§¼ The Clean Room Philosophy</h3>
    <p>Imagine writing code like cleaning your room:</p>
    <ul>
        <li><b>Spaces (Indentation)</b> = How you organize items on shelves</li>
        <li><b>No curly braces {}</b> = No messy brackets lying around</li>
        <li><b>Clean, readable code</b> = A tidy room where everything has a place</li>
    </ul>
    <p>Python uses <b>indentation</b> (spaces or tabs) to organize code instead of brackets. This makes it easy to read!</p>
</div>

<h3>ğŸ¯ Todayâ€™s Learning Goals:</h3>
<ol>
    <li>What is Python and why do we use it?</li>
    <li>How to write and run a Python script</li>
    <li>Using <code>print()</code> to talk to the computer</li>
    <li>Creating and using variables</li>
    <li>Basic math in Python</li>
</ol>

<div style="background-color: #e8f4fc; padding: 20px; border-radius: 10px; margin: 20px 0;">
    <h3>ğŸ What is Python?</h3>
    <p>Python is a programming language that lets us tell computers what to do. Itâ€™s used for:</p>
    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; text-align: center;">
        <div style="background: white; padding: 15px; border-radius: 8px;">
            <span style="font-size: 2em;">ğŸ¤–</span><br>
            <b>Robots & Games</b>
        </div>
        <div style="background: white; padding: 15px; border-radius: 8px;">
            <span style="font-size: 2em;">ğŸ“Š</span><br>
            <b>Data Science</b>
        </div>
        <div style="background: white; padding: 15px; border-radius: 8px;">
            <span style="font-size: 2em;">ğŸŒ</span><br>
            <b>Websites</b>
        </div>
        <div style="background: white; padding: 15px; border-radius: 8px;">
            <span style="font-size: 2em;">ğŸ”</span><br>
            <b>Hacking (Ethical!)</b>
        </div>
        <div style="background: white; padding: 15px; border-radius: 8px;">
            <span style="font-size: 2em;">ğŸ¤¯</span><br>
            <b>AI & Machine Learning</b>
        </div>
        <div style="background: white; padding: 15px; border-radius: 8px;">
            <span style="font-size: 2em;">ğŸ“±</span><br>
            <b>Apps & Automation</b>
        </div>
    </div>
</div>

<h3>ğŸ–¥ï¸ Your First Python Program</h3>
<div style="background: #2d2d2d; color: #f8f8f2; padding: 20px; border-radius: 10px; margin: 15px 0;">
    <h4 style="color: #66d9ef;">ğŸ‘‰ Letâ€™s Write Code!</h4>
    <pre style="color: #f8f8f2;">
# This is a COMMENT - Python ignores it
# Comments help humans understand code

print("Hello, World!")
print("I am learning Python!")
    </pre>
    <p><b>Try it:</b> Type this in your Python editor and run it!</p>
</div>

<h3>ğŸ“¦ Variables: Boxes for Your Data</h3>
<div class="analogy-box">
    <h4>ğŸ“¦ Variable Analogy</h4>
    <p>Variables are like labeled boxes where we store information:</p>
    <div style="display: flex; gap: 20px; flex-wrap: wrap;">
        <div style="border: 2px solid #4A90E2; padding: 10px; border-radius: 5px; min-width: 150px;">
            <div style="background: #4A90E2; color: white; padding: 5px; text-align: center;">name_box</div>
            <div style="padding: 10px; text-align: center;">"Alex"</div>
        </div>
        <div style="border: 2px solid #E24A4A; padding: 10px; border-radius: 5px; min-width: 150px;">
            <div style="background: #E24A4A; color: white; padding: 5px; text-align: center;">age_box</div>
            <div style="padding: 10px; text-align: center;">12</div>
        </div>
        <div style="border: 2px solid #4AE24A; padding: 10px; border-radius: 5px; min-width: 150px;">
            <div style="background: #4AE24A; color: white; padding: 5px; text-align: center;">score_box</div>
            <div style="padding: 10px; text-align: center;">98.5</div>
        </div>
    </div>
</div>

<div style="background: #2d2d2d; color: #f8f8f2; padding: 20px; border-radius: 10px; margin: 15px 0;">
    <h4 style="color: #66d9ef;">ğŸ‘‰ Creating Variables</h4>
    <pre style="color: #f8f8f2;">
# String (text) variable
name = "Sam"
school = "Code Academy"

# Integer (whole number) variable
age = 10
grade = 5

# Float (decimal number) variable
height = 4.5
weight = 75.2

# Boolean (True/False) variable
is_student = True
likes_pizza = False
    </pre>
</div>

<h3>â•â– Basic Math in Python</h3>
<div style="background: #fff5e6; padding: 20px; border-radius: 10px; margin: 15px 0;">
    <h4>ğŸ§® Math Operators</h4>
    <table style="width: 100%; border-collapse: collapse;">
        <tr style="background: #ff9966; color: white;">
            <th style="padding: 10px;">Operator</th>
            <th style="padding: 10px;">Symbol</th>
            <th style="padding: 10px;">Example</th>
            <th style="padding: 10px;">Result</th>
        </tr>
        <tr style="background: #fff0e6;">
            <td style="padding: 8px;">Addition</td>
            <td style="padding: 8px;">+</td>
            <td style="padding: 8px;">5 + 3</td>
            <td style="padding: 8px;">8</td>
        </tr>
        <tr style="background: #ffe6cc;">
            <td style="padding: 8px;">Subtraction</td>
            <td style="padding: 8px;">-</td>
            <td style="padding: 8px;">10 - 4</td>
            <td style="padding: 8px;">6</td>
        </tr>
        <tr style="background: #fff0e6;">
            <td style="padding: 8px;">Multiplication</td>
            <td style="padding: 8px;">*</td>
            <td style="padding: 8px;">6 * 7</td>
            <td style="padding: 8px;">42</td>
        </tr>
        <tr style="background: #ffe6cc;">
            <td style="padding: 8px;">Division</td>
            <td style="padding: 8px;">/</td>
            <td style="padding: 8px;">15 / 3</td>
            <td style="padding: 8px;">5.0</td>
        </tr>
        <tr style="background: #fff0e6;">
            <td style="padding: 8px;">Exponent (Power)</td>
            <td style="padding: 8px;">**</td>
            <td style="padding: 8px;">2 ** 3</td>
            <td style="padding: 8px;">8</td>
        </tr>
    </table>
</div>

<div style="background: #2d2d2d; color: #f8f8f2; padding: 20px; border-radius: 10px; margin: 15px 0;">
    <h4 style="color: #66d9ef;">ğŸ‘‰ Math Examples</h4>
    <pre style="color: #f8f8f2;">
# Basic math
apples = 5
oranges = 3
total_fruit = apples + oranges
print("Total fruit:", total_fruit)

# More examples
pizza_slices = 8
friends = 4
slices_per_friend = pizza_slices / friends
print("Each friend gets:", slices_per_friend, "slices")

# Using variables in calculations
score1 = 85
score2 = 92
score3 = 78
average = (score1 + score2 + score3) / 3
print("Average score:", average)
    </pre>
</div>

<h3>ğŸ® Interactive Practice Time!</h3>
<div style="background: #e8f5e8; padding: 20px; border-radius: 10px; margin: 15px 0;">
    <h4>ğŸ”„ Activity 1: The Talking Computer (15 minutes)</h4>
    <p>Create a program that has a conversation with the user:</p>
    <pre style="background: white; padding: 15px; border-radius: 5px;">
# Your code here!
print("Hi! I'm ChatBot 3000")
print("What's your name?")
name = input("Type your name: ")
print("Nice to meet you, " + name + "!")
    </pre>
</div>

<div style="background: #e6f2ff; padding: 20px; border-radius: 10px; margin: 15px 0;">
    <h4>ğŸ§© Activity 2: Math Wizard (20 minutes)</h4>
    <p>Create a calculator that does 4 different math problems:</p>
    <ul>
        <li>Add two numbers</li>
        <li>Subtract two numbers</li>
        <li>Multiply two numbers</li>
        <li>Divide two numbers</li>
    </ul>
    <pre style="background: white; padding: 15px; border-radius: 5px;">
# Your calculator code here
num1 = 10
num2 = 5

print("Addition:", num1 + num2)
print("Subtraction:", num1 - num2)
# Add more operations!
    </pre>
</div>

<h3>ğŸ“ Today's Main Project: Identity Card Generator</h3>
<div style="background: #f0e6ff; padding: 20px; border-radius: 10px; margin: 15px 0;">
    <h4>ğŸªª Build Your Digital ID Card</h4>
    <p><b>Goal:</b> Create a program that asks for user information and prints a fancy ID card.</p>
    
    <div style="border: 2px dashed #8a2be2; padding: 15px; margin: 15px 0; background: white;">
        <h4 style="text-align: center;">ğŸ’³ SAMPLE ID CARD</h4>
        <hr>
        <p><b>Name:</b> Alex Johnson</p>
        <p><b>Age:</b> 12</p>
        <p><b>Grade:</b> 6</p>
        <p><b>School:</b> Code Academy</p>
        <p><b>Hobby:</b> Coding & Soccer</p>
        <hr>
        <p style="text-align: center;">â­ Student ID: CA-2024-001 â­</p>
    </div>
    
    <h5>Step-by-Step Instructions:</h5>
    <ol>
        <li>Ask for the user's name using <code>input()</code></li>
        <li>Ask for their age</li>
        <li>Ask for their grade</li>
        <li>Ask for their school</li>
        <li>Ask for their favorite hobby</li>
        <li>Print everything in a nice format using <code>print()</code></li>
    </ol>
    
    <h5>ğŸ’¡ Challenge Tasks (Extra Credit!):</h5>
    <ul>
        <li>Add a student ID number (use random numbers!)</li>
        <li>Calculate and show their birth year (2024 - age)</li>
        <li>Add ASCII art borders around the ID card</li>
        <li>Save the ID card to a text file</li>
    </ul>
</div>

<h3>ğŸ† Badge Progress: The Python Initiate</h3>
<div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px; border-radius: 10px; margin: 15px 0;">
    <div style="display: flex; align-items: center; gap: 20px;">
        <div style="font-size: 3em;">ğŸ–ï¸</div>
        <div>
            <h3 style="margin: 0;">The Python Initiate</h3>
            <p>Complete today's Identity Card project to earn your first badge!</p>
            <div style="background: rgba(255,255,255,0.2); padding: 10px; border-radius: 5px;">
                <div style="display: flex; justify-content: space-between;">
                    <span>Today's Progress:</span>
                    <span>0/5 Tasks</span>
                </div>
                <div style="background: rgba(255,255,255,0.3); height: 10px; border-radius: 5px; margin-top: 5px;">
                    <div style="background: #4CAF50; width: 0%; height: 100%; border-radius: 5px;"></div>
                </div>
            </div>
        </div>
    </div>
</div>

<h3>ğŸ“š Homework Assignment</h3>
<div style="background: #fff5e6; padding: 20px; border-radius: 10px; margin: 15px 0;">
    <h4>Create a "Superhero Profile Generator"</h4>
    <p>Build a program that creates a superhero profile with:</p>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
        <div style="background: white; padding: 15px; border-radius: 8px;">
            <h5>ğŸ¦¸ Required Features:</h5>
            <ul>
                <li>Superhero name</li>
                <li>Secret identity</li>
                <li>Superpowers (at least 3)</li>
                <li>Weakness</li>
                <li>Origin story</li>
                <li>Catchphrase</li>
            </ul>
        </div>
        <div style="background: white; padding: 15px; border-radius: 8px;">
            <h5>ğŸŒŸ Bonus Features:</h5>
            <ul>
                <li>Power level (1-100)</li>
                <li>Arch-nemesis</li>
                <li>Headquarters location</li>
                <li>Sidekick name</li>
                <li>Superhero logo (using ASCII art)</li>
            </ul>
        </div>
    </div>
    
    <div style="margin-top: 15px; padding: 15px; background: #f0f7ff; border-radius: 5px;">
        <h5>ğŸ’» Code Template to Get Started:</h5>
        <pre style="background: white; padding: 10px; border-radius: 5px;">
print("=== SUPERHERO CREATOR ===")
hero_name = input("Enter superhero name: ")
secret_id = input("Enter secret identity: ")
power1 = input("First superpower: ")
# Add more inputs here!

print("=== SUPERHERO PROFILE ===")
print("Hero Name: " + hero_name)
print("Secret Identity: " + secret_id)
print("Powers: " + power1)
# Add more prints here!
        </pre>
    </div>
</div>

<h3>ğŸ“ Key Learning Points</h3>
<div style="background: #f0f8ff; padding: 20px; border-radius: 10px; margin: 15px 0;">
    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px;">
        <div style="background: white; padding: 15px; border-radius: 8px; border-left: 5px solid #4A90E2;">
            <h5>âœ… What We Learned:</h5>
            <ul>
                <li>Python uses indentation instead of brackets</li>
                <li><code>print()</code> displays text</li>
                <li>Variables store information</li>
                <li><code>input()</code> gets user input</li>
                <li>Basic math operations in Python</li>
            </ul>
        </div>
        <div style="background: white; padding: 15px; border-radius: 8px; border-left: 5px solid #E24A4A;">
            <h5>ğŸš€ Next Time:</h5>
            <ul>
                <li>Making decisions with if/else</li>
                <li>Comparing values (greater than, less than)</li>
                <li>Creating interactive games</li>
                <li>More about data types</li>
            </ul>
        </div>
    </div>
</div>

<div style="background: #e8f5e8; padding: 20px; border-radius: 10px; margin: 20px 0; text-align: center;">
    <h3>ğŸ‰ Great Job Today! ğŸ‰</h3>
    <p>You've written your first Python code! Remember:</p>
    <div style="font-size: 1.2em; margin: 15px 0;">
        <span style="display: inline-block; margin: 0 10px;">ğŸ’» <b>Code</b></span>
        <span style="display: inline-block; margin: 0 10px;">â• <b>Create</b></span>
        <span style="display: inline-block; margin: 0 10px;">ğŸš€ <b>Conquer</b></span>
    </div>
    <p><i>"Every expert was once a beginner. Keep coding!"</i></p>
</div>

<h3>ğŸ”— Resources for Further Learning</h3>
<ul>
    <li><a href="https://www.codecademy.com/learn/learn-python-3" target="_blank">Codecademy Python Course</a></li>
    <li><a href="https://www.w3schools.com/python/" target="_blank">W3Schools Python Tutorial</a></li>
    <li><a href="https://hourofpython.com/" target="_blank">Hour of Python (Games!)</a></li>
    <li><a href="https://trinket.io/python" target="_blank">Trinket - Code in Browser</a></li>
</ul>
`
            },
            "1-2": {
                "icon": "fa-code-branch",
                "title": "Control Flow (Deep If/Else)",
                "html": `<h1>Month 1, Week 2: Control Flow (Deep If/Else) ğŸ®</h1>
<p>Welcome back, apprentice! This week, we're turning your code into a <b>smart decision-maker</b>. We'll learn how to make Python choose between different paths, just like a choose-your-own-adventure book!</p>

<div class="analogy-box" style="background-color: #e3f2fd; border-left: 5px solid #2196F3; padding: 20px; margin: 20px 0; border-radius: 8px;">
    <b>ğŸ­ Analogy: The Adventure Game Director ğŸ¬</b><br/><br/>
    
    Your code is like a movie director making decisions:<br/>
    â€¢ <b>if statements</b> = "If the hero has a sword..."<br/>
    â€¢ <b>else statements</b> = "Otherwise, if they only have a stick..."<br/>
    â€¢ <b>elif statements</b> = "Or maybe if they have magic powers..."<br/>
    â€¢ <b>Conditions</b> = The rules of the story world<br/>
    â€¢ <b>Indentation</b> = Scene changes in the script<br/>
    â€¢ <b>Boolean values</b> = True/False answers to questions
</div>

<div style="background-color: #fff8e1; border-left: 5px solid #FFC107; padding: 15px; margin: 15px 0; border-radius: 8px;">
    <h3>ğŸ“š Quick Review: The Building Blocks</h3>
    <table style="width:100%; border-collapse: collapse; margin-top: 10px;">
        <tr style="background-color: #FFF3E0;">
            <th style="padding: 10px; border: 1px solid #FFE0B2; text-align: left;">Concept</th>
            <th style="padding: 10px; border: 1px solid #FFE0B2; text-align: left;">Symbol</th>
            <th style="padding: 10px; border: 1px solid #FFE0B2; text-align: left;">Example</th>
            <th style="padding: 10px; border: 1px solid #FFE0B2; text-align: left;">Meaning</th>
        </tr>
        <tr>
            <td style="padding: 8px; border: 1px solid #FFE0B2;">Equals</td>
            <td style="padding: 8px; border: 1px solid #FFE0B2;">==</td>
            <td style="padding: 8px; border: 1px solid #FFE0B2;">age == 13</td>
            <td style="padding: 8px; border: 1px solid #FFE0B2;">Is age equal to 13?</td>
        </tr>
        <tr style="background-color: #FFF8E1;">
            <td style="padding: 8px; border: 1px solid #FFE0B2;">Not equal</td>
            <td style="padding: 8px; border: 1px solid #FFE0B2;">!=</td>
            <td style="padding: 8px; border: 1px solid #FFE0B2;">password != "123"</td>
            <td style="padding: 8px; border: 1px solid #FFE0B2;">Is password different from "123"?</td>
        </tr>
        <tr>
            <td style="padding: 8px; border: 1px solid #FFE0B2;">Greater than</td>
            <td style="padding: 8px; border: 1px solid #FFE0B2;">></td>
            <td style="padding: 8px; border: 1px solid #FFE0B2;">score > 80</td>
            <td style="padding: 8px; border: 1px solid #FFE0B2;">Is score more than 80?</td>
        </tr>
        <tr style="background-color: #FFF8E1;">
            <td style="padding: 8px; border: 1px solid #FFE0B2;">Less than</td>
            <td style="padding: 8px; border: 1px solid #FFE0B2;"><</td>
            <td style="padding: 8px; border: 1px solid #FFE0B2;">temperature < 0</td>
            <td style="padding: 8px; border: 1px solid #FFE0B2;">Is temperature below freezing?</td>
        </tr>
        <tr>
            <td style="padding: 8px; border: 1px solid #FFE0B2;">Greater or equal</td>
            <td style="padding: 8px; border: 1px solid #FFE0B2;">>=</td>
            <td style="padding: 8px; border: 1px solid #FFE0B2;">height >= 120</td>
            <td style="padding: 8px; border: 1px solid #FFE0B2;">Is height 120cm or more?</td>
        </tr>
        <tr style="background-color: #FFF8E1;">
            <td style="padding: 8px; border: 1px solid #FFE0B2;">Less or equal</td>
            <td style="padding: 8px; border: 1px solid #FFE0B2;"><=</td>
            <td style="padding: 8px; border: 1px solid #FFE0B2;">age <= 12</td>
            <td style="padding: 8px; border: 1px solid #FFE0B2;">Is age 12 or younger?</td>
        </tr>
    </table>
</div>

<h2>ğŸ§  Part 1: Simple Decisions - The Basic If/Else</h2>

<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">
    <div style="background-color: #f9f9f9; padding: 15px; border-radius: 8px; border: 2px solid #4CAF50;">
        <h4>ğŸ¯ Example 1: Can You Ride the Roller Coaster? ğŸ¢</h4>
        <pre style="background-color: #e8f5e9; padding: 10px; border-radius: 5px;">
height = float(input("How tall are you (in cm)? "))

if height >= 120:
    print("ğŸ‰ You can ride the roller coaster!")
else:
    print("ğŸš« Sorry, you're too short for this ride.")
    print("Maybe try the kiddie rides instead!")
        </pre>
    </div>
    
    <div style="background-color: #f9f9f9; padding: 15px; border-radius: 8px; border: 2px solid #2196F3;">
        <h4>ğŸ¯ Example 2: School Grade Checker ğŸ“š</h4>
        <pre style="background-color: #E3F2FD; padding: 10px; border-radius: 5px;">
score = int(input("Enter your test score (0-100): "))

if score >= 90:
    print("ğŸ† Excellent! You got an A!")
elif score >= 80:
    print("ğŸ¯ Good job! You got a B!")
elif score >= 70:
    print("ğŸ‘ Not bad! You got a C.")
elif score >= 60:
    print("ğŸ˜… You passed with a D.")
else:
    print("âŒ You failed. Study more next time!")
        </pre>
    </div>
</div>

<h2>ğŸ”— Part 2: Combining Conditions with AND, OR, NOT</h2>

<div class="visual-guide" style="background-color: #F3E5F5; padding: 20px; border-radius: 10px; margin: 20px 0;">
    <h3>ğŸ¤ The Logic Superheroes</h3>
    
    <div style="display: flex; justify-content: space-around; margin: 20px 0; flex-wrap: wrap;">
        <div style="text-align: center; margin: 10px;">
            <div style="background-color: #4CAF50; color: white; padding: 15px; border-radius: 50%; width: 80px; height: 80px; display: flex; align-items: center; justify-content: center; margin: 0 auto;">
                <b>AND</b>
            </div>
            <p style="margin-top: 10px;"><b>The Perfectionist</b><br>BOTH must be true</p>
            <small>True AND True = True<br>True AND False = False</small>
        </div>
        
        <div style="text-align: center; margin: 10px;">
            <div style="background-color: #2196F3; color: white; padding: 15px; border-radius: 50%; width: 80px; height: 80px; display: flex; align-items: center; justify-content: center; margin: 0 auto;">
                <b>OR</b>
            </div>
            <p style="margin-top: 10px;"><b>The Flexible One</b><br>EITHER can be true</p>
            <small>True OR False = True<br>False OR False = False</small>
        </div>
        
        <div style="text-align: center; margin: 10px;">
            <div style="background-color: #FF9800; color: white; padding: 15px; border-radius: 50%; width: 80px; height: 80px; display: flex; align-items: center; justify-content: center; margin: 0 auto;">
                <b>NOT</b>
            </div>
            <p style="margin-top: 10px;"><b>The Reverser</b><br>Flips true to false</p>
            <small>NOT True = False<br>NOT False = True</small>
        </div>
    </div>
</div>

<div style="background-color: #E8F5E9; padding: 20px; border-radius: 8px; margin: 20px 0;">
    <h3>ğŸ® Real-World Examples with Combined Conditions</h3>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 15px;">
        <div>
            <h4>ğŸ€ Sports Team Tryouts</h4>
            <pre style="background-color: white; padding: 10px; border-radius: 5px;">
age = int(input("How old are you? "))
height = float(input("How tall are you (in cm)? "))

# Basketball team requirements
if age >= 12 and height >= 150:
    print("ğŸ† You qualify for the basketball team!")
elif age >= 12 and height < 150:
    print("ğŸ¤” You're old enough but too short.")
elif age < 12 and height >= 150:
    print("ğŸ¤” You're tall enough but too young.")
else:
    print("ğŸ˜¢ Keep practicing and try next year!")
            </pre>
        </div>
        
        <div>
            <h4>ğŸ¬ Movie Theater Rules</h4>
            <pre style="background-color: white; padding: 10px; border-radius: 5px;">
age = int(input("How old are you? "))
has_ticket = input("Do you have a ticket? (yes/no): ")
with_parent = input("Are you with a parent? (yes/no): ")

# Movie theater rules
if age >= 13 or (age >= 8 and with_parent == "yes"):
    if has_ticket == "yes":
        print("ğŸ‰ Enjoy the movie!")
    else:
        print("ğŸ’³ You need to buy a ticket first.")
else:
    print("ğŸš« Sorry, you're too young for this movie.")
    print("Try a G-rated movie instead!")
            </pre>
        </div>
    </div>
</div>

<h2>ğŸ’¼ Part 3: Week 2 Assignment - "Loan Approver" ğŸ¦</h2>

<div style="background-color: #E1F5FE; padding: 20px; border-radius: 10px; margin: 20px 0;">
    <h3>ğŸ† Your Mission: Build a Bank Loan Approval System</h3>
    
    <div style="background-color: white; padding: 15px; border-radius: 8px; margin: 15px 0;">
        <h4>ğŸ“‹ Bank Rules (Write These Down!)</h4>
        <ol>
            <li><b>Age Rule:</b> Must be 18 years or older</li>
            <li><b>Income Rule:</b> Must earn at least $25,000 per year</li>
            <li><b>Debt Rule:</b> Monthly debt payments must be less than 40% of monthly income</li>
            <li><b>Bonus Rule:</b> If income is over $50,000, age can be 17+</li>
            <li><b>Special Rule:</b> If debt is $0, income requirement drops to $20,000</li>
        </ol>
    </div>
    
    <div style="background-color: #FFF3E0; padding: 15px; border-radius: 8px;">
        <h4>ğŸš€ Step-by-Step Guide</h4>
        
        <div style="margin: 15px 0;">
            <h5>Step 1: Get User Information</h5>
            <pre style="background-color: white; padding: 10px; border-radius: 5px;">
print("ğŸ¦ Welcome to Python Bank Loan System ğŸ¦")
print("=" * 40)

# Get user information
name = input("Enter your name: ")
age = int(input("Enter your age: "))
salary = float(input("Enter your yearly salary: $"))
debt = float(input("Enter your monthly debt payments: $"))
            </pre>
        </div>
        
        <div style="margin: 15px 0;">
            <h5>Step 2: Calculate Monthly Income</h5>
            <pre style="background-color: white; padding: 10px; border-radius: 5px;">
# Calculate monthly income (yearly salary Ã· 12)
monthly_income = salary / 12

# Calculate debt ratio (debt Ã· monthly income)
debt_ratio = debt / monthly_income
            </pre>
        </div>
        
        <div style="margin: 15px 0;">
            <h5>Step 3: Start Building Your Conditions</h5>
            <pre style="background-color: white; padding: 10px; border-radius: 5px;">
# Check basic rules first
if age >= 18 and salary >= 25000 and debt_ratio < 0.4:
    print(f"âœ… Congratulations {name}! Loan APPROVED!")
    print(f"Your debt ratio is {debt_ratio:.2%} (good!)")
            </pre>
        </div>
        
        <div style="margin: 15px 0;">
            <h5>Step 4: Add Special Cases with elif</h5>
            <pre style="background-color: white; padding: 10px; border-radius: 5px;">
elif age >= 17 and salary >= 50000 and debt_ratio < 0.4:
    print(f"âœ… Special approval! Loan APPROVED!")
    print("High income exception applied.")
            </pre>
        </div>
        
        <div style="margin: 15px 0;">
            <h5>Step 5: Handle Rejections with else</h5>
            <pre style="background-color: white; padding: 10px; border-radius: 5px;">
else:
    print(f"âŒ Sorry {name}, loan DENIED.")
    
    # Tell them why
    if age < 18:
        print(f"- You need to be at least 18 (you're {age})")
    if salary < 25000:
        print(f"- You need at least $25,000 salary (you earn \${salary:,.2f})")
    if debt_ratio >= 0.4:
        print(f"- Your debt ratio is too high: {debt_ratio:.2%}")
            </pre>
        </div>
    </div>
</div>

<h2>ğŸ¯ Challenge Activities (Choose Your Level!)</h2>

<div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 20px; margin: 20px 0;">
    <div style="background-color: #C8E6C9; padding: 15px; border-radius: 8px;">
        <h4>ğŸ¥‰ Bronze Level</h4>
        <p><b>Weather Advisor â˜”</b></p>
        <ul>
            <li>Ask for temperature</li>
            <li>Ask if it's raining</li>
            <li>Recommend clothing</li>
            <li>Suggest indoor/outdoor activities</li>
        </ul>
    </div>
    
    <div style="background-color: #BBDEFB; padding: 15px; border-radius: 8px;">
        <h4>ğŸ¥ˆ Silver Level</h4>
        <p><b>Video Game Character Creator ğŸ®</b></p>
        <ul>
            <li>Choose character class</li>
            <li>Allocate skill points</li>
            <li>Check if valid build</li>
            <li>Suggest weapons based on class</li>
        </ul>
    </div>
    
    <div style="background-color: #FFECB3; padding: 15px; border-radius: 8px;">
        <h4>ğŸ¥‡ Gold Level</h4>
        <p><b>Smart Home System ğŸ </b></p>
        <ul>
            <li>Time of day detection</li>
            <li>Temperature control</li>
            <li>Light automation</li>
            <li>Security checks</li>
            <li>Energy saving mode</li>
        </ul>
    </div>
</div>

<h2>ğŸ› Common Mistakes & How to Fix Them</h2>

<div style="background-color: #FFEBEE; padding: 20px; border-radius: 8px; margin: 20px 0;">
    <table style="width:100%; border-collapse: collapse;">
        <tr style="background-color: #FFCDD2;">
            <th style="padding: 10px; border: 1px solid #FF5252;">Mistake</th>
            <th style="padding: 10px; border: 1px solid #FF5252;">Wrong Code</th>
            <th style="padding: 10px; border: 1px solid #FF5252;">Right Code</th>
            <th style="padding: 10px; border: 1px solid #FF5252;">Why It Matters</th>
        </tr>
        <tr>
            <td style="padding: 8px; border: 1px solid #FF5252;">Single equals</td>
            <td style="padding: 8px; border: 1px solid #FF5252;">if age = 18:</td>
            <td style="padding: 8px; border: 1px solid #FF5252;">if age == 18:</td>
            <td style="padding: 8px; border: 1px solid #FF5252;">= assigns, == compares</td>
        </tr>
        <tr style="background-color: #FFEBEE;">
            <td style="padding: 8px; border: 1px solid #FF5252;">Missing colon</td>
            <td style="padding: 8px; border: 1px solid #FF5252;">if age > 18</td>
            <td style="padding: 8px; border: 1px solid #FF5252;">if age > 18:</td>
            <td style="padding: 8px; border: 1px solid #FF5252;">Python needs : after conditions</td>
        </tr>
        <tr>
            <td style="padding: 8px; border: 1px solid #FF5252;">Wrong indentation</td>
            <td style="padding: 8px; border: 1px solid #FF5252;">if age > 18:<br>print("Adult")</td>
            <td style="padding: 8px; border: 1px solid #FF5252;">if age > 18:<br>    print("Adult")</td>
            <td style="padding: 8px; border: 1px solid #FF5252;">Python uses indentation for blocks</td>
        </tr>
        <tr style="background-color: #FFEBEE;">
            <td style="padding: 8px; border: 1px solid #FF5252;">Chaining comparisons</td>
            <td style="padding: 8px; border: 1px solid #FF5252;">if 13 < age < 19:</td>
            <td style="padding: 8px; border: 1px solid #FF5252;">if age > 13 and age < 19:</td>
            <td style="padding: 8px; border: 1px solid #FF5252;">Both work, but first is cleaner!</td>
        </tr>
    </table>
</div>

<h2>ğŸ“ Homework: Adventure Game Story</h2>

<div style="background-color: #F3E5F5; padding: 20px; border-radius: 10px; margin: 20px 0;">
    <h3>ğŸ§™â€â™‚ï¸ Create a Choose-Your-Own-Adventure Game</h3>
    
    <p><b>Requirements:</b></p>
    <ul>
        <li>At least <b>5 different decision points</b></li>
        <li>Use <b>if/elif/else</b> for each choice</li>
        <li>Include <b>AND, OR, NOT</b> in conditions</li>
        <li>Track <b>player score or inventory</b></li>
        <li>Have at least <b>3 different endings</b></li>
    </ul>
    
    <p><b>Story Ideas:</b></p>
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin: 15px 0;">
        <div style="background-color: white; padding: 10px; border-radius: 5px;">
            <b>ğŸ° Castle Escape</b>
            <ul>
                <li>Find hidden keys</li>
                <li>Solve riddles</li>
                <li>Avoid guards</li>
                <li>Choose escape route</li>
            </ul>
        </div>
        <div style="background-color: white; padding: 10px; border-radius: 5px;">
            <b>ğŸš€ Space Mission</b>
            <ul>
                <li>Navigate asteroid field</li>
                <li>Fix broken systems</li>
                <li>Make alien contact</li>
                <li>Choose landing site</li>
            </ul>
        </div>
    </div>
    
    <div style="background-color: white; padding: 15px; border-radius: 8px; margin-top: 15px;">
        <h4>ğŸ’¡ Starter Code Template</h4>
        <pre style="background-color: #f5f5f5; padding: 10px; border-radius: 5px;">
print("ğŸ§™â€â™‚ï¸ WELCOME TO THE MAGICAL FOREST ğŸ§™â€â™‚ï¸")
print("=" * 40)

# Player starts with these
health = 100
gold = 0
has_sword = False

print("You stand at a crossroads...")
print("1. Take the left path (dark forest)")
print("2. Take the right path (sunny meadow)")
print("3. Go straight ahead (mysterious cave)")

choice = input("Enter 1, 2, or 3: ")

if choice == "1":
    print("You enter the dark forest...")
    # Add your story here!
elif choice == "2":
    print("You walk through the sunny meadow...")
    # Add your story here!
else:
    print("You approach the mysterious cave...")
    # Add your story here!
        </pre>
    </div>
</div>

<div style="background-color: #E8F5E9; padding: 20px; border-radius: 10px; margin: 20px 0;">
    <h3>ğŸ–ï¸ This Week's Badge: "The Decision Maker" ğŸ…</h3>
    
    <div style="text-align: center; margin: 20px;">
        <div style="background-color: #4CAF50; color: white; width: 150px; height: 150px; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto; font-size: 24px;">
            ğŸ¤” â¡ï¸ ğŸ¯
        </div>
        <p style="margin-top: 15px; font-size: 18px;">
            <b>Earn this badge by:</b><br>
            1. Completing the Loan Approver assignment<br>
            2. Building your adventure game<br>
            3. Using all three: if, elif, and else<br>
            4. Including AND, OR, NOT in your code
        </p>
    </div>
</div>

<h3>ğŸ’¡ Pro Tips for Decision Making in Code:</h3>
<ol>
    <li><b>Start Simple:</b> Write basic if/else first, then add complexity</li>
    <li><b>Test All Paths:</b> Make sure to test every possible choice</li>
    <li><b>Use Comments:</b> Write what each condition checks</li>
    <li><b>Check Boundaries:</b> What happens at exactly age 18? Salary $25,000?</li>
    <li><b>Keep It Readable:</b> Break complex conditions into smaller parts</li>
    <li><b>Plan First:</b> Draw a flowchart before writing code</li>
</ol>

<div style="text-align: center; margin: 30px 0; padding: 20px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border-radius: 10px;">
    <h2>ğŸš€ Ready to Make Decisions?</h2>
    <p>Remember: Every great program makes smart choices. Your code is about to get a whole lot smarter!</p>
    <p><b>Next Week:</b> We'll learn about Lists & Dictionaries - storing whole collections of data!</p>
</div>`
            },
            "1-3": {
                "icon": "fa-list",
                "title": "Lists & Dictionaries",
                "html": `<h1>Week 3, Month 1: Lists & Dictionaries ğŸ“š</h1>
<p>Today we learn how to store collections of data using lists and dictionaries!</p>

<div class="analogy-box">
    <h3>ğŸ“¦ The Toy Box Analogy</h3>
    <div style="display: flex; gap: 30px; margin: 15px 0;">
        <div style="flex: 1;">
            <h4>ğŸ“‹ Lists = Numbered Toy Boxes</h4>
            <div style="background: #e6f2ff; padding: 15px; border-radius: 8px;">
                <p><b>Position matters!</b> Each toy has a number:</p>
                <div style="display: flex; gap: 10px; margin: 10px 0;">
                    <div style="text-align: center;">
                        <div style="background: #4A90E2; color: white; width: 30px; height: 30px; border-radius: 50%; line-height: 30px;">0</div>
                        <div>Teddy Bear</div>
                    </div>
                    <div style="text-align: center;">
                        <div style="background: #4A90E2; color: white; width: 30px; height: 30px; border-radius: 50%; line-height: 30px;">1</div>
                        <div>Race Car</div>
                    </div>
                    <div style="text-align: center;">
                        <div style="background: #4A90E2; color: white; width: 30px; height: 30px; border-radius: 50%; line-height: 30px;">2</div>
                        <div>Lego Set</div>
                    </div>
                </div>
                <p><code>toys[0] = "Teddy Bear"</code></p>
            </div>
        </div>
        <div style="flex: 1;">
            <h4>ğŸ”‘ Dictionaries = Labeled Toy Boxes</h4>
            <div style="background: #f0e6ff; padding: 15px; border-radius: 8px;">
                <p><b>Labels matter!</b> Each toy has a name tag:</p>
                <div style="margin: 10px 0;">
                    <div style="display: flex; justify-content: space-between;">
                        <span><b>"favorite"</b></span>
                        <span>â†’ Teddy Bear</span>
                    </div>
                    <div style="display: flex; justify-content: space-between;">
                        <span><b>"fast"</b></span>
                        <span>â†’ Race Car</span>
                    </div>
                    <div style="display: flex; justify-content: space-between;">
                        <span><b>"building"</b></span>
                        <span>â†’ Lego Set</span>
                    </div>
                </div>
                <p><code>toys["favorite"] = "Teddy Bear"</code></p>
            </div>
        </div>
    </div>
</div>

<h3>ğŸ¯ Today's Learning Goals:</h3>
<ol>
    <li>Creating and accessing lists</li>
    <li>List methods (append, remove, sort)</li>
    <li>Creating and accessing dictionaries</li>
    <li>Dictionary methods (keys, values, items)</li>
    <li>When to use lists vs dictionaries</li>
</ol>

<h3>ğŸ“‹ Lists: Ordered Collections</h3>
<div style="background: #e6f2ff; padding: 20px; border-radius: 10px; margin: 15px 0;">
    <h4>Creating and Using Lists</h4>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
        <div>
            <h5>ğŸ® Game Character Inventory</h5>
            <pre style="background: white; padding: 15px; border-radius: 5px;">
# Creating a list
inventory = ["Sword", "Shield", "Health Potion", "Magic Scroll"]

# Accessing items (Python starts counting at 0!)
print("First item:", inventory[0])      # Sword
print("Second item:", inventory[1])     # Shield
print("Last item:", inventory[-1])      # Magic Scroll

# Changing items
inventory[0] = "Golden Sword"
print("Upgraded:", inventory[0])

# Adding items
inventory.append("Dragon Scale")
print("After finding treasure:", inventory)

# Removing items
inventory.remove("Shield")
print("After losing shield:", inventory)

# Checking if item exists
if "Health Potion" in inventory:
    print("You have a health potion!")
            </pre>
        </div>
        <div>
            <h5>ğŸ“Š List Methods Cheat Sheet</h5>
            <table style="width: 100%; background: white; border-radius: 5px; padding: 10px;">
                <tr style="background: #4A90E2; color: white;">
                    <th style="padding: 8px;">Method</th>
                    <th style="padding: 8px;">Description</th>
                    <th style="padding: 8px;">Example</th>
                </tr>
                <tr>
                    <td style="padding: 8px;"><code>.append(x)</code></td>
                    <td style="padding: 8px;">Add item to end</td>
                    <td style="padding: 8px;"><code>list.append(5)</code></td>
                </tr>
                <tr style="background: #f0f8ff;">
                    <td style="padding: 8px;"><code>.remove(x)</code></td>
                    <td style="padding: 8px;">Remove first item with value x</td>
                    <td style="padding: 8px;"><code>list.remove(3)</code></td>
                </tr>
                <tr>
                    <td style="padding: 8px;"><code>.pop(i)</code></td>
                    <td style="padding: 8px;">Remove item at position i</td>
                    <td style="padding: 8px;"><code>list.pop(0)</code></td>
                </tr>
                <tr style="background: #f0f8ff;">
                    <td style="padding: 8px;"><code>.sort()</code></td>
                    <td style="padding: 8px;">Sort the list</td>
                    <td style="padding: 8px;"><code>list.sort()</code></td>
                </tr>
                <tr>
                    <td style="padding: 8px;"><code>.reverse()</code></td>
                    <td style="padding: 8px;">Reverse the list</td>
                    <td style="padding: 8px;"><code>list.reverse()</code></td>
                </tr>
                <tr style="background: #f0f8ff;">
                    <td style="padding: 8px;"><code>len(list)</code></td>
                    <td style="padding: 8px;">Get length</td>
                    <td style="padding: 8px;"><code>len(my_list)</code></td>
                </tr>
            </table>
            
            <div style="margin-top: 15px; padding: 10px; background: #fff3cd; border-radius: 5px;">
                <h5>âš ï¸ Important: List Indexes Start at 0!</h5>
                <p>Python (and most programming languages) start counting at 0:</p>
                <p><code>colors = ["red", "green", "blue"]</code></p>
                <p><code>colors[0] = "red"</code>, <code>colors[1] = "green"</code>, <code>colors[2] = "blue"</code></p>
            </div>
        </div>
    </div>
</div>

<h3>ğŸ”‘ Dictionaries: Key-Value Pairs</h3>
<div style="background: #f0e6ff; padding: 20px; border-radius: 10px; margin: 15px 0;">
    <h4>Creating and Using Dictionaries</h4>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
        <div>
            <h5>ğŸ‘¤ Student Profile Dictionary</h5>
            <pre style="background: white; padding: 15px; border-radius: 5px;">
# Creating a dictionary
student = {
    "name": "Alex Johnson",
    "age": 12,
    "grade": 6,
    "subjects": ["Math", "Science", "English"],
    "grades": {"Math": "A", "Science": "B+", "English": "A-"},
    "is_active": True
}

# Accessing values
print("Name:", student["name"])
print("Age:", student["age"])
print("Subjects:", student["subjects"])

# Adding new key-value pairs
student["favorite_color"] = "Blue"
student["hobbies"] = ["Coding", "Soccer", "Reading"]

# Changing values
student["grade"] = 7  # Alex got promoted!

# Checking if key exists
if "email" not in student:
    student["email"] = "alex@school.edu"

# Removing items
removed_grade = student.pop("grades")  # Remove and get value
print("Removed grades:", removed_grade)

# Getting all keys and values
print("Keys:", student.keys())
print("Values:", student.values())
            </pre>
        </div>
        <div>
            <h5>ğŸ“Š Dictionary Methods Cheat Sheet</h5>
            <table style="width: 100%; background: white; border-radius: 5px; padding: 10px;">
                <tr style="background: #8a2be2; color: white;">
                    <th style="padding: 8px;">Method</th>
                    <th style="padding: 8px;">Description</th>
                    <th style="padding: 8px;">Example</th>
                </tr>
                <tr>
                    <td style="padding: 8px;"><code>.get(key)</code></td>
                    <td style="padding: 8px;">Get value, no error if missing</td>
                    <td style="padding: 8px;"><code>dict.get("name")</code></td>
                </tr>
                <tr style="background: #f0e6ff;">
                    <td style="padding: 8px;"><code>.keys()</code></td>
                    <td style="padding: 8px;">Get all keys</td>
                    <td style="padding: 8px;"><code>dict.keys()</code></td>
                </tr>
                <tr>
                    <td style="padding: 8px;"><code>.values()</code></td>
                    <td style="padding: 8px;">Get all values</td>
                    <td style="padding: 8px;"><code>dict.values()</code></td>
                </tr>
                <tr style="background: #f0e6ff;">
                    <td style="padding: 8px;"><code>.items()</code></td>
                    <td style="padding: 8px;">Get key-value pairs</td>
                    <td style="padding: 8px;"><code>dict.items()</code></td>
                </tr>
                <tr>
                    <td style="padding: 8px;"><code>.pop(key)</code></td>
                    <td style="padding: 8px;">Remove key and return value</td>
                    <td style="padding: 8px;"><code>dict.pop("age")</code></td>
                </tr>
                <tr style="background: #f0e6ff;">
                    <td style="padding: 8px;"><code>.update()</code></td>
                    <td style="padding: 8px;">Merge dictionaries</td>
                    <td style="padding: 8px;"><code>dict1.update(dict2)</code></td>
                </tr>
            </table>
            
            <div style="margin-top: 15px; padding: 10px; background: #e6f2ff; border-radius: 5px;">
                <h5>ğŸ’¡ When to Use Lists vs Dictionaries:</h5>
                <p><b>Use Lists when:</b></p>
                <ul>
                    <li>Order matters (todo list, playlist)</li>
                    <li>You need to access items by position</li>
                    <li>You have similar items (all numbers, all strings)</li>
                </ul>
                <p><b>Use Dictionaries when:</b></p>
                <ul>
                    <li>You need labeled data (name, age, email)</li>
                    <li>Fast lookup by name/key is important</li>
                    <li>Data has different types (mixed types)</li>
                </ul>
            </div>
        </div>
    </div>
</div>

<h3>ğŸ® Interactive Practice Time!</h3>
<div style="background: #e8f5e8; padding: 20px; border-radius: 10px; margin: 15px 0;">
    <h4>ğŸ”„ Activity 1: Shopping List Manager (20 minutes)</h4>
    <p>Create a program that manages a shopping list:</p>
    
    <div style="background: white; padding: 15px; border-radius: 8px; margin: 10px 0;">
        <h5>Features to Implement:</h5>
        <ul>
            <li>Add items to the list</li>
            <li>Remove items from the list</li>
            <li>Mark items as purchased</li>
            <li>Show all items</li>
            <li>Clear the entire list</li>
            <li>Sort items alphabetically</li>
        </ul>
    </div>
    
    <pre style="background: #f5f5f5; padding: 15px; border-radius: 5px;">
# Shopping List Starter Code
shopping_list = []

while True:
    print("\n=== SHOPPING LIST MANAGER ===")
    print("1. Add item")
    print("2. Remove item")
    print("3. View list")
    print("4. Sort list")
    print("5. Exit")
    
    choice = input("Enter your choice (1-5): ")
    
    if choice == "1":
        item = input("Enter item to add: ")
        shopping_list.append(item)
        print(f"Added '{item}' to list.")
    elif choice == "2":
        # Add your code here!
        pass
    # Add more options!
    </pre>
</div>

<div style="background: #fff5e6; padding: 20px; border-radius: 10px; margin: 15px 0;">
    <h4>ğŸ² Activity 2: RPG Character Creator (25 minutes)</h4>
    <p>Create a character creator for a role-playing game:</p>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
        <div style="background: white; padding: 15px; border-radius: 8px;">
            <h5>Character Attributes:</h5>
            <ul>
                <li>Name, Class, Level</li>
                <li>Health, Mana, Stamina</li>
                <li>Skills (list of strings)</li>
                <li>Equipment (dictionary)</li>
                <li>Stats (dictionary)</li>
            </ul>
        </div>
        <div style="background: white; padding: 15px; border-radius: 8px;">
            <h5>Game Actions:</h5>
            <ul>
                <li>Level up character</li>
                <li>Add/remove equipment</li>
                <li>Learn new skills</li>
                <li>Take damage/heal</li>
                <li>Show character sheet</li>
            </ul>
        </div>
    </div>
    
    <pre style="background: #f5f5f5; padding: 15px; border-radius: 5px; margin-top: 15px;">
# RPG Character Starter Code
character = {
    "name": "",
    "class": "Warrior",
    "level": 1,
    "health": 100,
    "mana": 50,
    "skills": ["Slash", "Block"],
    "equipment": {
        "weapon": "Iron Sword",
        "armor": "Leather Armor",
        "shield": "Wooden Shield"
    },
    "stats": {
        "strength": 10,
        "defense": 8,
        "magic": 5
    }
}

# Your game code here!
print("Welcome to RPG Character Creator!")
character["name"] = input("Enter character name: ")
print(f"Created {character['name']} the {character['class']}!")
    </pre>
</div>

<h3>ğŸ“ Today's Main Project: Digital Contact Book ğŸ“±</h3>
<div style="background: #e6f2ff; padding: 20px; border-radius: 10px; margin: 15px 0;">
    <h4>ğŸ‘¥ Build a Contact Management System</h4>
    <p><b>Goal:</b> Create a program where users can add, search, update, and delete contacts.</p>
    
    <div style="background: white; padding: 15px; border-radius: 8px; margin: 15px 0; border: 2px solid #4A90E2;">
        <h4>ğŸ“‹ Project Requirements:</h4>
        <ol>
            <li><b>Add Contact:</b> Name, phone number, email, group (family, friends, work)</li>
            <li><b>Search Contact:</b> Search by name or phone number</li>
            <li><b>Update Contact:</b> Change any contact information</li>
            <li><b>Delete Contact:</b> Remove a contact completely</li>
            <li><b>View All Contacts:</b> Show all contacts with details</li>
            <li><b>Group Contacts:</b> Show contacts by group</li>
        </ol>
    </div>
    
    <h5>ğŸ’¡ Data Structure Design:</h5>
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin: 15px 0;">
        <div>
            <h6>Option 1: List of Dictionaries</h6>
            <pre style="background: #f5f5f5; padding: 10px; border-radius: 5px;">
contacts = [
    {
        "name": "Mom",
        "phone": "555-1234",
        "email": "mom@family.com",
        "group": "family"
    },
    {
        "name": "Best Friend",
        "phone": "555-5678",
        "email": "friend@school.edu",
        "group": "friends"
    }
]
            </pre>
        </div>
        <div>
            <h6>Option 2: Dictionary of Dictionaries</h6>
            <pre style="background: #f5f5f5; padding: 10px; border-radius: 5px;">
contacts = {
    "Mom": {
        "phone": "555-1234",
        "email": "mom@family.com",
        "group": "family"
    },
    "Best Friend": {
        "phone": "555-5678",
        "email": "friend@school.edu",
        "group": "friends"
    }
}
            </pre>
        </div>
    </div>
    
    <div style="background: #2d2d2d; color: #f8f8f2; padding: 20px; border-radius: 10px; margin: 15px 0;">
        <h4 style="color: #66d9ef;">ğŸ’¡ Starter Code Template</h4>
        <pre style="color: #f8f8f2;">
# Digital Contact Book
contacts = []

def add_contact():
    print("\n=== ADD NEW CONTACT ===")
    name = input("Enter name: ")
    phone = input("Enter phone number: ")
    email = input("Enter email: ")
    group = input("Enter group (family/friends/work): ")
    
    contact = {
        "name": name,
        "phone": phone,
        "email": email,
        "group": group
    }
    
    contacts.append(contact)
    print(f"Added {name} to contacts!")

def search_contact():
    print("\n=== SEARCH CONTACT ===")
    search_term = input("Enter name or phone number to search: ")
    
    found = False
    for contact in contacts:
        if search_term.lower() in contact["name"].lower() or search_term in contact["phone"]:
            print(f"Found: {contact['name']} - {contact['phone']} - {contact['email']}")
            found = True
    
    if not found:
        print("No contacts found.")

# Add more functions for update, delete, view all

# Main program loop
while True:
    print("\n=== DIGITAL CONTACT BOOK ===")
    print("1. Add Contact")
    print("2. Search Contact")
    print("3. View All Contacts")
    print("4. Update Contact")
    print("5. Delete Contact")
    print("6. Exit")
    
    choice = input("Enter your choice (1-6): ")
    
    if choice == "1":
        add_contact()
    elif choice == "2":
        search_contact()
    # Add more choices here!
        </pre>
    </div>
    
    <h5>ğŸŒŸ Challenge Tasks (Extra Credit!):</h5>
    <ul>
        <li>Add birthday field and show upcoming birthdays</li>
        <li>Save contacts to a file (so they don't disappear when program closes)</li>
        <li>Add favorite contacts (starred)</li>
        <li>Search by multiple criteria (name AND group)</li>
        <li>Export contacts to CSV format</li>
        <li>Add profile pictures (ASCII art!)</li>
    </ul>
</div>

<h3>ğŸ“š Homework Assignment</h3>
<div style="background: #f0e6ff; padding: 20px; border-radius: 10px; margin: 15px 0;">
    <h4>Create a "Personal Library Manager" ğŸ“š</h4>
    
    <div style="background: white; padding: 15px; border-radius: 8px; margin: 10px 0;">
        <h5>Book Information to Track:</h5>
        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px;">
            <div>
                <h6>ğŸ“– Basic Info</h6>
                <ul>
                    <li>Title</li>
                    <li>Author</li>
                    <li>ISBN</li>
                    <li>Genre</li>
                </ul>
            </div>
            <div>
                <h6>ğŸ“Š Status Info</h6>
                <ul>
                    <li>Read/Unread</li>
                    <li>Rating (1-5 stars)</li>
                    <li>Date Read</li>
                    <li>Notes</li>
                </ul>
            </div>
            <div>
                <h6>ğŸ·ï¸ Categorization</h6>
                <ul>
                    <li>Shelf Location</li>
                    <li>Tags</li>
                    <li>Series Info</li>
                    <li>Loan Status</li>
                </ul>
            </div>
        </div>
    </div>
    
    <h5>Required Features:</h5>
    <ul>
        <li><b>Add Book:</b> Enter all book details</li>
        <li><b>Search:</b> Find books by title, author, or genre</li>
        <li><b>Update:</b> Change book status (read/unread), add rating</li>
        <li><b>Delete:</b> Remove books from library</li>
        <li><b>Statistics:</b> Show total books, read vs unread, average rating</li>
        <li><b>Recommendations:</b> Suggest books based on genre or rating</li>
    </ul>
    
    <div style="background: #f5f5f5; padding: 15px; border-radius: 5px; margin-top: 15px;">
        <h5>ğŸ’¡ Data Structure Idea:</h5>
        <pre style="background: white; padding: 10px; border-radius: 5px;">
library = {
    "books": [
        {
            "title": "Harry Potter",
            "author": "J.K. Rowling",
            "genre": "Fantasy",
            "read": True,
            "rating": 5,
            "tags": ["magic", "wizard", "school"]
        },
        # More books...
    ],
    "statistics": {
        "total": 0,
        "read": 0,
        "average_rating": 0.0
    }
}
        </pre>
    </div>
    
    <h5>Bonus Challenges:</h5>
    <ul>
        <li>Sort books by rating, title, or author</li>
        <li>Export reading list to a text file</li>
        <li>Import books from a CSV file</li>
        <li>Create a "Currently Reading" section</li>
        <li>Add wishlist for books you want to buy</li>
        <li>Generate reading report (books per month, etc.)</li>
    </ul>
</div>

<h3>ğŸ“ Key Learning Points</h3>
<div style="background: #f0f8ff; padding: 20px; border-radius: 10px; margin: 15px 0;">
    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px;">
        <div style="background: white; padding: 15px; border-radius: 8px; border-left: 5px solid #4A90E2;">
            <h5>âœ… What We Learned:</h5>
            <ul>
                <li>Lists store ordered collections with indexes</li>
                <li>Dictionaries store key-value pairs for labeled data</li>
                <li>Important list methods: append, remove, sort</li>
                <li>Important dict methods: get, keys, values, items</li>
                <li>Choosing between lists and dictionaries</li>
            </ul>
        </div>
        <div style="background: white; padding: 15px; border-radius: 8px; border-left: 5px solid #8a2be2;">
            <h5>ğŸš€ Pro Tips:</h5>
            <ul>
                <li><b>Lists:</b> Great for sequences, order matters</li>
                <li><b>Dictionaries:</b> Great for records, fast lookup</li>
                <li><b>Combine them:</b> Lists of dictionaries are powerful!</li>
                <li><b>Use .get()</b> to avoid KeyError in dictionaries</li>
                <li>Remember: Python indexing starts at 0!</li>
            </ul>
        </div>
    </div>
</div>

<div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px; border-radius: 10px; margin: 15px 0; text-align: center;">
    <h3>ğŸ® Real-World Applications</h3>
    <div style="display: flex; justify-content: space-around; margin: 15px 0;">
        <div>
            <div style="font-size: 2em;">ğŸ“±</div>
            <p><b>Phone Contacts</b></p>
            <p>Like our project!</p>
        </div>
        <div>
            <div style="font-size: 2em;">ğŸ›’</div>
            <p><b>Shopping Carts</b></p>
            <p>Lists of items</p>
        </div>
        <div>
            <div style="font-size: 2em;">ğŸ‘¤</div>
            <p><b>User Profiles</b></p>
            <p>Dictionaries for user data</p>
        </div>
        <div>
            <div style="font-size: 2em;">ğŸµ</div>
            <p><b>Music Playlists</b></p>
            <p>Lists of songs</p>
        </div>
    </div>
</div>

<h3>ğŸ”— Practice Resources</h3>
<ul>
    <li><a href="https://www.w3schools.com/python/python_lists.asp" target="_blank">W3Schools Python Lists</a></li>
    <li><a href="https://www.w3schools.com/python/python_dictionaries.asp" target="_blank">W3Schools Python Dictionaries</a></li>
    <li><a href="https://pythontutor.com/" target="_blank">Python Tutor (Visualize code execution)</a></li>
</ul>

<div style="background: #e8f5e8; padding: 20px; border-radius: 10px; margin: 20px 0; text-align: center;">
    <h3>ğŸŒŸ You're Building Real Applications! ğŸŒŸ</h3>
    <p>Today you learned data structures that power real-world applications. Keep practicing!</p>
    <p><i>"Data is the new oil." - Clive Humby</i></p>
</div>
`
            },
            "1-4": {
                "icon": "fa-bank",
                "title": "Month 1 Project - Virtual ATM",
                "html": `<h1>Week 4: Month 1 Project - Virtual ATM ğŸ’°</h1>
<p>Today we'll build a complete console-based ATM system with multiple banking features!</p>

<div class="analogy-box">
    <h3>ğŸ¦ The Bank Teller Analogy</h3>
    <p>Think of your program as a bank teller that needs to:</p>
    <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin: 15px 0;">
        <div style="background: #e6f2ff; padding: 10px; border-radius: 5px; text-align: center;">
            <div style="font-size: 2em;">ğŸ”</div>
            <b>Verify Identity</b><br>
            Check PIN before access
        </div>
        <div style="background: #e6f2ff; padding: 10px; border-radius: 5px; text-align: center;">
            <div style="font-size: 2em;">ğŸ’µ</div>
            <b>Handle Money</b><br>
            Withdrawals & deposits
        </div>
        <div style="background: #e6f2ff; padding: 10px; border-radius: 5px; text-align: center;">
            <div style="font-size: 2em;">ğŸ“Š</div>
            <b>Track Accounts</b><br>
            Balance & transaction history
        </div>
        <div style="background: #e6f2ff; padding: 10px; border-radius: 5px; text-align: center;">
            <div style="font-size: 2em;">ğŸ”„</div>
            <b>Stay Available</b><br>
            Keep running until logout
        </div>
    </div>
</div>

<h3>ğŸ¯ Project Requirements:</h3>
<div style="background: #fff5e6; padding: 20px; border-radius: 10px; margin: 15px 0;">
    <h4>ğŸ“‹ Must-Have Features:</h4>
    <ol>
        <li><b>PIN Verification:</b> User must enter correct 4-digit PIN</li>
        <li><b>Main Menu:</b> Display options in a loop</li>
        <li><b>Balance Inquiry:</b> Show current balance</li>
        <li><b>Cash Withdrawal:</b> Withdraw money (check sufficient funds)</li>
        <li><b>Cash Deposit:</b> Add money to account</li>
        <li><b>Transaction History:</b> Show recent transactions</li>
        <li><b>Exit/Logout:</b> Return to PIN screen or exit completely</li>
    </ol>
    
    <h4>ğŸŒŸ Bonus Features (Extra Credit):</h4>
    <ul>
        <li>Multiple user accounts</li>
        <li>Transfer between accounts</li>
        <li>Change PIN functionality</li>
        <li>Save data to file (persistent storage)</li>
        <li>Admin mode with special features</li>
        <li>ATM cash limit (machine runs out of money)</li>
    </ul>
</div>

<h3>ğŸ’¡ Project Planning</h3>
<div style="background: #e6f2ff; padding: 20px; border-radius: 10px; margin: 15px 0;">
    <h4>ğŸ§© Breaking Down the Problem</h4>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 15px 0;">
        <div>
            <h5>ğŸ“ Data We Need:</h5>
            <pre style="background: white; padding: 15px; border-radius: 5px;">
# User account data
accounts = {
    "123456": {  # Account number
        "pin": "1234",
        "name": "John Doe",
        "balance": 1000.00,
        "transactions": [
            {"date": "2024-01-15", "type": "deposit", "amount": 500},
            {"date": "2024-01-20", "type": "withdrawal", "amount": 100}
        ]
    },
    # More accounts...
}

# ATM machine data
atm = {
    "cash_available": 10000.00,
    "max_withdrawal": 500.00,
    "daily_limit": 1000.00
}
            </pre>
        </div>
        <div>
            <h5>ğŸ”„ Program Flow:</h5>
            <div style="background: white; padding: 15px; border-radius: 5px;">
                <ol>
                    <li>Start ATM â†’ Show welcome message</li>
                    <li>Ask for account number</li>
                    <li>Verify PIN (3 attempts max)</li>
                    <li>Show main menu</li>
                    <li>Process user choice</li>
                    <li>Return to menu or logout</li>
                    <li>Log transaction</li>
                    <li>Update balance</li>
                </ol>
            </div>
        </div>
    </div>
</div>

<h3>ğŸ—ï¸ Building Step by Step</h3>
<div style="background: #f0f8ff; padding: 20px; border-radius: 10px; margin: 15px 0;">
    <h4>Step 1: Basic Structure</h4>
    
    <div style="background: #2d2d2d; color: #f8f8f2; padding: 20px; border-radius: 10px; margin: 15px 0;">
        <h4 style="color: #66d9ef;">ğŸ“ Starter Code Template</h4>
        <pre style="color: #f8f8f2;">
# ============ VIRTUAL ATM SYSTEM ============

# Sample account data
accounts = {
    "1001": {
        "pin": "1234",
        "name": "Alex Johnson",
        "balance": 1500.00,
        "transactions": []
    },
    "1002": {
        "pin": "5678",
        "name": "Sam Wilson",
        "balance": 2500.00,
        "transactions": []
    }
}

def show_welcome():
    print("""
    ====================================
            WELCOME TO PYTHON BANK
    ====================================
    """)

def verify_pin(account_number):
    """Verify PIN with 3 attempts"""
    attempts = 3
    while attempts > 0:
        pin = input("Enter your 4-digit PIN: ")
        
        if pin == accounts[account_number]["pin"]:
            print(f"Welcome, {accounts[account_number]['name']}!")
            return True
        else:
            attempts -= 1
            print(f"Invalid PIN. {attempts} attempts remaining.")
    
    print("Too many failed attempts. Card retained.")
    return False

def show_menu(account_number):
    """Display main menu and handle choices"""
    while True:
        print("""
    =========== MAIN MENU ===========
    1. Check Balance
    2. Withdraw Cash
    3. Deposit Cash
    4. View Transactions
    5. Change PIN
    6. Logout
        """)
        
        choice = input("Enter your choice (1-6): ")
        
        if choice == "1":
            check_balance(account_number)
        elif choice == "2":
            withdraw_cash(account_number)
        elif choice == "3":
            deposit_cash(account_number)
        elif choice == "4":
            view_transactions(account_number)
        elif choice == "5":
            change_pin(account_number)
        elif choice == "6":
            print("Thank you for banking with us!")
            break
        else:
            print("Invalid choice. Please try again.")

def check_balance(account_number):
    """Show current balance"""
    balance = accounts[account_number]["balance"]
    print(f" Your current balance: \${balance:.2f}")

def withdraw_cash(account_number):
    """Handle cash withdrawal"""
    print(" === WITHDRAW CASH ===")
    
    # Get withdrawal amount
    try:
        amount = float(input("Enter amount to withdraw: $"))
    except ValueError:
        print("Invalid amount. Please enter a number.")
        return
    
    # Check if amount is positive
    if amount <= 0:
        print("Amount must be greater than 0.")
        return
    
    # Check sufficient funds
    if amount > accounts[account_number]["balance"]:
        print("Insufficient funds.")
        return
    
    # Process withdrawal
    accounts[account_number]["balance"] -= amount
    
    # Log transaction
    transaction = {
        "type": "withdrawal",
        "amount": amount,
        "balance_after": accounts[account_number]["balance"]
    }
    accounts[account_number]["transactions"].append(transaction)
    
    print(f"Withdrawal successful. New balance: \${accounts[account_number]['balance']:.2f}")
    print("Please take your cash.")

# TODO: Add other functions (deposit_cash, view_transactions, change_pin)

# Main program
def main():
    show_welcome()
    
    # Get account number
    account_number = input("Enter your account number: ")
    
    if account_number not in accounts:
        print("Account not found.")
        return
    
    # Verify PIN
    if verify_pin(account_number):
        show_menu(account_number)

if __name__ == "__main__":
    main()
        </pre>
    </div>
</div>

<h3>ğŸ”§ Feature Implementation Guide</h3>
<div style="background: #fff0e6; padding: 20px; border-radius: 10px; margin: 15px 0;">
    <h4>Implementing Remaining Features</h4>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin: 15px 0;">
        <div>
            <h5>ğŸ’° Deposit Cash Function</h5>
            <pre style="background: white; padding: 10px; border-radius: 5px;">
def deposit_cash(account_number):
    print(" === DEPOSIT CASH ===")
    
    try:
        amount = float(input("Enter amount to deposit: $"))
    except ValueError:
        print("Invalid amount.")
        return
    
    if amount <= 0:
        print("Amount must be positive.")
        return
    
    # Add to balance
    accounts[account_number]["balance"] += amount
    
    # Log transaction
    transaction = {
        "type": "deposit",
        "amount": amount,
        "balance_after": accounts[account_number]["balance"]
    }
    accounts[account_number]["transactions"].append(transaction)
    
    print(f"Deposit successful. New balance: \${accounts[account_number]['balance']:.2f}")
            </pre>
        </div>
        <div>
            <h5>ğŸ“œ View Transactions Function</h5>
            <pre style="background: white; padding: 10px; border-radius: 5px;">
def view_transactions(account_number):
    print(" === TRANSACTION HISTORY ===")
    
    transactions = accounts[account_number]["transactions"]
    
    if not transactions:
        print("No transactions yet.")
        return
    
    for i, trans in enumerate(transactions[-5:], 1):  # Show last 5
        print(f"{i}. {trans['type'].upper()}: \${trans['amount']:.2f}")
        print(f"   Balance after: \${trans['balance_after']:.2f}")
        print()
            </pre>
        </div>
        <div>
            <h5>ğŸ” Change PIN Function</h5>
            <pre style="background: white; padding: 10px; border-radius: 5px;">
def change_pin(account_number):
    print(" === CHANGE PIN ===")
    
    # Verify current PIN
    current_pin = input("Enter current PIN: ")
    if current_pin != accounts[account_number]["pin"]:
        print("Incorrect current PIN.")
        return
    
    # Get new PIN
    new_pin = input("Enter new 4-digit PIN: ")
    if len(new_pin) != 4 or not new_pin.isdigit():
        print("PIN must be 4 digits.")
        return
    
    confirm_pin = input("Confirm new PIN: ")
    if new_pin != confirm_pin:
        print("PINs do not match.")
        return
    
    # Update PIN
    accounts[account_number]["pin"] = new_pin
    print("PIN changed successfully!")
            </pre>
        </div>
        <div>
            <h5>ğŸ’¸ Transfer Function (Bonus)</h5>
            <pre style="background: white; padding: 10px; border-radius: 5px;">
def transfer_funds(from_account):
    print(" === TRANSFER FUNDS ===")
    
    to_account = input("Enter recipient account number: ")
    
    if to_account not in accounts:
        print("Recipient account not found.")
        return
    
    try:
        amount = float(input("Enter amount to transfer: $"))
    except ValueError:
        print("Invalid amount.")
        return
    
    # Check sufficient funds
    if amount > accounts[from_account]["balance"]:
        print("Insufficient funds.")
        return
    
    # Process transfer
    accounts[from_account]["balance"] -= amount
    accounts[to_account]["balance"] += amount
    
    print(f"Transfer successful!")
    print(f"New balance: \${accounts[from_account]['balance']:.2f}")
            </pre>
        </div>
    </div>
</div>

<h3>ğŸ¨ Enhancing the User Experience</h3>
<div style="background: #e8f5e8; padding: 20px; border-radius: 10px; margin: 15px 0;">
    <h4>Making Your ATM Professional</h4>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin: 15px 0;">
        <div>
            <h5>ğŸ¯ Input Validation</h5>
            <pre style="background: white; padding: 10px; border-radius: 5px;">
def get_valid_amount(prompt):
    """Get a valid positive amount from user"""
    while True:
        try:
            amount = float(input(prompt))
            if amount <= 0:
                print("Amount must be positive.")
                continue
            return amount
        except ValueError:
            print("Please enter a valid number.")

# Usage:
amount = get_valid_amount("Enter amount: $")
            </pre>
        </div>
        <div>
            <h5>ğŸ’¾ Save/Load Data</h5>
            <pre style="background: white; padding: 10px; border-radius: 5px;">
import json
import os

DATA_FILE = "atm_data.json"

def save_data():
    """Save account data to file"""
    with open(DATA_FILE, 'w') as f:
        json.dump(accounts, f, indent=2)
    print("Data saved successfully.")

def load_data():
    """Load account data from file"""
    global accounts
    if os.path.exists(DATA_FILE):
        with open(DATA_FILE, 'r') as f:
            accounts = json.load(f)
        print("Data loaded successfully.")
    else:
        print("No saved data found. Starting fresh.")
            </pre>
        </div>
        <div>
            <h5>ğŸ­ ASCII Art Interface</h5>
            <pre style="background: white; padding: 10px; border-radius: 5px;">
def print_receipt(account_number, transaction):
    """Print a transaction receipt"""
    print("""
                    â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
                    â•‘        PYTHON BANK ATM       â•‘
                    â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
                    â•‘ RECEIPT                      â•‘
                    â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
                    â•‘ Account: {:<15}              â•‘
                    â•‘ Transaction: {:<12}          â•‘
                    â•‘ Amount: \${:<17.2f}          â•‘
                    â•‘ New Balance: \${:<13.2f}     â•‘
                    â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
                    â•‘ Thank you for banking with usâ•‘
                    â•‘        Have a nice day!      â•‘
                    â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    """.format(account_number, 
               transaction['type'],
               transaction['amount'],
               transaction['balance_after']))
            </pre>
        </div>
        <div>
            <h5>ğŸ“± Menu with Error Handling</h5>
            <pre style="background: white; padding: 10px; border-radius: 5px;">
def get_menu_choice(options):
    """Display menu and get valid choice"""
    while True:
        for key, value in options.items():
            print(f"{key}. {value}")
        
        choice = input(" Enter your choice: ")
        
        if choice in options:
            return choice
        else:
            print(f"Invalid choice. Please enter {', '.join(options.keys())}")
            </pre>
        </div>
    </div>
</div>

<h3>ğŸ§ª Testing Your ATM</h3>
<div style="background: #f0e6ff; padding: 20px; border-radius: 10px; margin: 15px 0;">
    <h4>Test Cases to Verify</h4>
    
    <table style="width: 100%; background: white; border-radius: 5px; padding: 10px;">
        <tr style="background: #8a2be2; color: white;">
            <th style="padding: 10px;">Test Scenario</th>
            <th style="padding: 10px;">Expected Result</th>
            <th style="padding: 10px;">Test Data</th>
        </tr>
        <tr>
            <td style="padding: 8px;">Correct PIN</td>
            <td style="padding: 8px;">Access granted</td>
            <td style="padding: 8px;">Account: 1001, PIN: 1234</td>
        </tr>
        <tr style="background: #f0e6ff;">
            <td style="padding: 8px;">Wrong PIN 3 times</td>
            <td style="padding: 8px;">Card retained</td>
            <td style="padding: 8px;">Any wrong PIN x3</td>
        </tr>
        <tr>
            <td style="padding: 8px;">Withdraw less than balance</td>
            <td style="padding: 8px;">Success</td>
            <td style="padding: 8px;">Balance: 1000, Withdraw: 500</td>
        </tr>
        <tr style="background: #f0e6ff;">
            <td style="padding: 8px;">Withdraw more than balance</td>
            <td style="padding: 8px;">Error message</td>
            <td style="padding: 8px;">Balance: 1000, Withdraw: 1500</td>
        </tr>
        <tr>
            <td style="padding: 8px;">Deposit positive amount</td>
            <td style="padding: 8px;">Balance increases</td>
            <td style="padding: 8px;">Deposit: 200</td>
        </tr>
        <tr style="background: #f0e6ff;">
            <td style="padding: 8px;">Deposit negative amount</td>
            <td style="padding: 8px;">Error message</td>
            <td style="padding: 8px;">Deposit: -100</td>
        </tr>
        <tr>
            <td style="padding: 8px;">View empty transactions</td>
            <td style="padding: 8px;">"No transactions" message</td>
            <td style="padding: 8px;">New account</td>
        </tr>
    </table>
</div>

<h3>ğŸš€ Advanced Features Challenge</h3>
<div style="background: #e6f2ff; padding: 20px; border-radius: 10px; margin: 15px 0;">
    <h4>Take Your ATM to the Next Level</h4>
    
    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin: 15px 0;">
        <div style="background: white; padding: 15px; border-radius: 8px;">
            <h5>ğŸ­ Admin Mode</h5>
            <ul>
                <li>Special admin PIN (9999)</li>
                <li>View all accounts</li>
                <li>Reset user PINs</li>
                <li>Add/remove accounts</li>
                <li>View ATM cash status</li>
            </ul>
        </div>
        <div style="background: white; padding: 15px; border-radius: 8px;">
            <h5>ğŸ’³ Multiple Account Types</h5>
            <ul>
                <li>Checking vs Savings</li>
                <li>Different interest rates</li>
                <li>Overdraft protection</li>
                <li>Account fees</li>
                <li>Minimum balance requirements</li>
            </ul>
        </div>
        <div style="background: white; padding: 15px; border-radius: 8px;">
            <h5>ğŸ“Š Reporting</h5>
            <ul>
                <li>Monthly statements</li>
                <li>Transaction summaries</li>
                <li>Tax documents</li>
                <li>Spending categories</li>
                <li>Budget tracking</li>
            </ul>
        </div>
        <div style="background: white; padding: 15px; border-radius: 8px;">
            <h5>ğŸ” Security Features</h5>
            <ul>
                <li>Two-factor authentication</li>
                <li>Transaction limits</li>
                <li>Suspicious activity alerts</li>
                <li>Encrypted data storage</li>
                <li>Login history</li>
            </ul>
        </div>
        <div style="background: white; padding: 15px; border-radius: 8px;">
            <h5>ğŸŒ Network Features</h5>
            <ul>
                <li>Multiple ATM machines</li>
                <li>Shared database</li>
                <li>Online banking interface</li>
                <li>Mobile app integration</li>
                <li>Email notifications</li>
            </ul>
        </div>
        <div style="background: white; padding: 15px; border-radius: 8px;">
            <h5>ğŸ® Gamification</h5>
            <ul>
                <li>Saving goals with progress</li>
                <li>Financial literacy quizzes</li>
                <li>Rewards for good habits</li>
                <li>Investment simulation</li>
                <li>Budgeting games</li>
            </ul>
        </div>
    </div>
</div>

<h3>ğŸ“ Project Submission Checklist</h3>
<div style="background: #fff5e6; padding: 20px; border-radius: 10px; margin: 15px 0;">
    <h4>âœ… Before You Submit:</h4>
    
    <div style="background: white; padding: 15px; border-radius: 8px; margin: 10px 0;">
        <label style="display: block; margin: 5px 0;">
            <input type="checkbox"> PIN verification works (3 attempts max)
        </label>
        <label style="display: block; margin: 5px 0;">
            <input type="checkbox"> Balance check shows correct amount
        </label>
        <label style="display: block; margin: 5px 0;">
            <input type="checkbox"> Withdrawals check for sufficient funds
        </label>
        <label style="display: block; margin: 5px 0;">
            <input type="checkbox"> Deposits increase balance correctly
        </label>
        <label style="display: block; margin: 5px 0;">
            <input type="checkbox"> Transaction history shows recent transactions
        </label>
        <label style="display: block; margin: 5px 0;">
            <input type="checkbox"> Menu loops until logout
        </label>
        <label style="display: block; margin: 5px 0;">
            <input type="checkbox"> Error handling for invalid inputs
        </label>
        <label style="display: block; margin: 5px 0;">
            <input type="checkbox"> Code is commented and organized
        </label>
        <label style="display: block; margin: 5px 0;">
            <input type="checkbox"> At least one bonus feature implemented
        </label>
    </div>
</div>

<h3>ğŸ† Badge Progress: The Python Initiate</h3>
<div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px; border-radius: 10px; margin: 15px 0;">
    <div style="display: flex; align-items: center; gap: 20px;">
        <div style="font-size: 3em;">ğŸ–ï¸</div>
        <div>
            <h3 style="margin: 0;">The Python Initiate</h3>
            <p>Complete the Virtual ATM project to earn your first major badge!</p>
            <div style="background: rgba(255,255,255,0.2); padding: 10px; border-radius: 5px;">
                <div style="display: flex; justify-content: space-between;">
                    <span>Project Progress:</span>
                    <span>0/7 Core Features</span>
                </div>
                <div style="background: rgba(255,255,255,0.3); height: 10px; border-radius: 5px; margin-top: 5px;">
                    <div style="background: #4CAF50; width: 0%; height: 100%; border-radius: 5px;"></div>
                </div>
            </div>
        </div>
    </div>
</div>

<h3>ğŸ“ Key Learning Points</h3>
<div style="background: #f0f8ff; padding: 20px; border-radius: 10px; margin: 15px 0;">
    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px;">
        <div style="background: white; padding: 15px; border-radius: 8px; border-left: 5px solid #4A90E2;">
            <h5>âœ… Skills Demonstrated:</h5>
            <ul>
                <li>Complex program structure</li>
                <li>User authentication (PIN)</li>
                <li>Menu-driven interfaces</li>
                <li>Data validation and error handling</li>
                <li>State management (account balance)</li>
                <li>Transaction logging</li>
            </ul>
        </div>
        <div style="background: white; padding: 15px; border-radius: 8px; border-left: 5px solid #E24A4A;">
            <h5>ğŸš€ Real-World Applications:</h5>
            <ul>
                <li>Banking systems</li>
                <li>E-commerce checkouts</li>
                <li>User account management</li>
                <li>Transaction processing</li>
                <li>Security systems</li>
            </ul>
        </div>
    </div>
</div>

<div style="background: #e8f5e8; padding: 20px; border-radius: 10px; margin: 20px 0; text-align: center;">
    <h3>ğŸŒŸ Congratulations! ğŸŒŸ</h3>
    <p>You've built a complete banking system! This project combines everything you've learned so far.</p>
    <p><i>"The only way to do great work is to love what you do." - Steve Jobs</i></p>
    
    <div style="margin-top: 15px; display: flex; justify-content: center; gap: 20px;">
        <div style="padding: 10px 20px; background: #4CAF50; color: white; border-radius: 5px;">
            ğŸ† Project Complete!
        </div>
        <div style="padding: 10px 20px; background: #2196F3; color: white; border-radius: 5px;">
            ğŸ–ï¸ Badge Earned!
        </div>
        <div style="padding: 10px 20px; background: #FF9800; color: white; border-radius: 5px;">
            ğŸš€ Ready for Next Level!
        </div>
    </div>
</div>

<h3>ğŸ”— Resources for Further Learning</h3>
<ul>
    <li><a href="https://realpython.com/python-project-structure/" target="_blank">Python Project Structure Best Practices</a></li>
    <li><a href="https://github.com/topics/banking-system" target="_blank">GitHub Banking System Projects</a></li>
    <li><a href="https://www.freecodecamp.org/news/python-projects-for-beginners/" target="_blank">More Python Projects for Beginners</a></li>
</ul>
`
            },

            "2-5": {
                "icon": "fa-f",
                "title": "Reusable Code (Functions)",
                "html": `<h1>Week 5, Month 2: Functions - Writing Reusable Code ğŸ”„</h1>
<p>Today we'll learn how to create functions - reusable blocks of code that make programming faster and easier!</p>

<div class="analogy-box">
    <h3>ğŸ³ The Recipe Book Analogy</h3>
    <div style="display: flex; gap: 20px; margin: 15px 0;">
        <div style="flex: 1; background: #fff5e6; padding: 15px; border-radius: 8px;">
            <h4>ğŸ“– Functions are like Recipes</h4>
            <p><b>Function Definition</b> = Writing the recipe<br>
            <b>Function Call</b> = Following the recipe<br>
            <b>Parameters</b> = Ingredients list<br>
            <b>Return Value</b> = Finished dish<br>
            <b>Function Name</b> = Recipe title</p>
        </div>
        <div style="flex: 1; background: #e6f2ff; padding: 15px; border-radius: 8px;">
            <h4>ğŸ‘¨â€ğŸ³ Why Use Functions?</h4>
            <ul>
                <li><b>Reuse:</b> Cook the same dish many times</li>
                <li><b>Organize:</b> Keep recipes in one place</li>
                <li><b>Simplify:</b> Complex tasks become simple steps</li>
                <li><b>Fix Once:</b> Update recipe in one place</li>
            </ul>
        </div>
    </div>
</div>

<h3>ğŸ¯ Today's Learning Goals:</h3>
<ol>
    <li>Understanding what functions are and why we use them</li>
    <li>Creating functions with <code>def</code></li>
    <li>Using parameters and arguments</li>
    <li>Returning values from functions</li>
    <li>Calling functions with different inputs</li>
</ol>

<h3>ğŸ“ Function Basics</h3>
<div style="background: #e6f2ff; padding: 20px; border-radius: 10px; margin: 15px 0;">
    <h4>Anatomy of a Function</h4>
    
    <div style="background: white; padding: 20px; border-radius: 8px; margin: 15px 0;">
        <h5>ğŸ§¬ Function Structure</h5>
        <pre style="background: #f5f5f5; padding: 15px; border-radius: 5px;">
def function_name(parameters):    # â† Function Header
    '''Docstring - What the function does'''   # â† Documentation
    # Function body - Code here
    result = do_something()
    return result                  # â† Return value (optional)

# Calling the function
function_name(arguments)           # â† Function Call
        </pre>
        
        <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin-top: 15px;">
            <div style="text-align: center; padding: 10px; background: #fff3cd; border-radius: 5px;">
                <div style="font-size: 1.5em;">ğŸ“</div>
                <b>def</b><br>Starts function definition
            </div>
            <div style="text-align: center; padding: 10px; background: #d4edda; border-radius: 5px;">
                <div style="font-size: 1.5em;">ğŸ·ï¸</div>
                <b>Parameters</b><br>Input variables
            </div>
            <div style="text-align: center; padding: 10px; background: #d1ecf1; border-radius: 5px;">
                <div style="font-size: 1.5em;">ğŸ“„</div>
                <b>Docstring</b><br>Function description
            </div>
            <div style="text-align: center; padding: 10px; background: #f8d7da; border-radius: 5px;">
                <div style="font-size: 1.5em;">ğŸ”™</div>
                <b>return</b><br>Output value
            </div>
        </div>
    </div>
</div>

<h3>ğŸ”§ Building Different Types of Functions</h3>
<div style="background: #f0e6ff; padding: 20px; border-radius: 10px; margin: 15px 0;">
    <h4>Function Examples</h4>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 15px 0;">
        <div>
            <h5>1ï¸âƒ£ No Parameters, No Return</h5>
            <pre style="background: white; padding: 15px; border-radius: 5px;">
def greet():
    """Prints a greeting message"""
    print("Hello! Welcome to Python!")
    print("How are you today?")

# Calling the function
greet()  # Prints the greeting
            </pre>
        </div>
        <div>
            <h5>2ï¸âƒ£ With Parameters, No Return</h5>
            <pre style="background: white; padding: 15px; border-radius: 5px;">
def greet_person(name):
    """Greets a specific person"""
    print(f"Hello, {name}! ğŸ‘‹")
    print(f"Nice to meet you, {name}!")

# Calling with arguments
greet_person("Alex")
greet_person("Sam")
greet_person("Taylor")
            </pre>
        </div>
        <div>
            <h5>3ï¸âƒ£ With Parameters and Return</h5>
            <pre style="background: white; padding: 15px; border-radius: 5px;">
def calculate_area(length, width):
    """Calculates area of a rectangle"""
    area = length * width
    return area

# Using the return value
room_area = calculate_area(10, 5)
print(f"Room area: {room_area} square meters")

# Can use directly in calculations
total_area = calculate_area(10, 5) + calculate_area(3, 3)
print(f"Total area: {total_area}")
            </pre>
        </div>
        <div>
            <h5>4ï¸âƒ£ Multiple Parameters</h5>
            <pre style="background: white; padding: 15px; border-radius: 5px;">
def create_student_profile(name, age, grade, subjects):
    """Creates a formatted student profile"""
    profile = f"""
    ===== STUDENT PROFILE =====
    Name: {name}
    Age: {age}
    Grade: {grade}
    Subjects: {', '.join(subjects)}
    ============================
    """
    return profile

# Calling the function
student_info = create_student_profile(
    "Alex", 
    12, 
    6, 
    ["Math", "Science", "Coding"]
)
print(student_info)
            </pre>
        </div>
    </div>
</div>

<h3>ğŸ”„ Today's Main Project: Unit Converter ğŸ”„</h3>
<div style="background: #fff5e6; padding: 20px; border-radius: 10px; margin: 15px 0;">
    <h4>ğŸ“ Build a Comprehensive Unit Converter</h4>
    <p><b>Goal:</b> Create a program with multiple conversion functions for different units.</p>
    
    <div style="background: white; padding: 15px; border-radius: 8px; margin: 15px 0; border: 2px solid #FF9800;">
        <h4>ğŸ“‹ Conversion Functions to Create:</h4>
        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px;">
            <div>
                <h5>ğŸŒ¡ï¸ Temperature</h5>
                <ul>
                    <li>Celsius to Fahrenheit</li>
                    <li>Fahrenheit to Celsius</li>
                    <li>Celsius to Kelvin</li>
                </ul>
            </div>
            <div>
                <h5>ğŸ“ Length</h5>
                <ul>
                    <li>Meters to Feet</li>
                    <li>Feet to Meters</li>
                    <li>Kilometers to Miles</li>
                </ul>
            </div>
            <div>
                <h5>âš–ï¸ Weight</h5>
                <ul>
                    <li>Kilograms to Pounds</li>
                    <li>Pounds to Kilograms</li>
                    <li>Grams to Ounces</li>
                </ul>
            </div>
        </div>
    </div>
    
    <h5>Step-by-Step Implementation:</h5>
    
    <div style="background: #2d2d2d; color: #f8f8f2; padding: 20px; border-radius: 10px; margin: 15px 0;">
        <h4 style="color: #66d9ef;">ğŸ’¡ Starter Code Template</h4>
        <pre style="color: #f8f8f2;">
# ============ UNIT CONVERTER ============

# Temperature Conversion Functions
def celsius_to_fahrenheit(celsius):
    """Convert Celsius to Fahrenheit"""
    fahrenheit = (celsius * 9/5) + 32
    return fahrenheit

def fahrenheit_to_celsius(fahrenheit):
    """Convert Fahrenheit to Celsius"""
    celsius = (fahrenheit - 32) * 5/9
    return celsius

def celsius_to_kelvin(celsius):
    """Convert Celsius to Kelvin"""
    kelvin = celsius + 273.15
    return kelvin

# Length Conversion Functions
def meters_to_feet(meters):
    """Convert meters to feet"""
    feet = meters * 3.28084
    return feet

def feet_to_meters(feet):
    """Convert feet to meters"""
    meters = feet / 3.28084
    return meters

def kilometers_to_miles(km):
    """Convert kilometers to miles"""
    miles = km * 0.621371
    return miles

# Weight Conversion Functions
def kilograms_to_pounds(kg):
    """Convert kilograms to pounds"""
    pounds = kg * 2.20462
    return pounds

def pounds_to_kilograms(pounds):
    """Convert pounds to kilograms"""
    kg = pounds / 2.20462
    return kg

def grams_to_ounces(grams):
    """Convert grams to ounces"""
    ounces = grams * 0.035274
    return ounces

# Menu System
def show_menu():
    """Display the conversion menu"""
    print("""
    ===== UNIT CONVERTER =====
    1. Temperature Conversions
    2. Length Conversions
    3. Weight Conversions
    4. Exit
    ==========================
    """)

def temperature_menu():
    """Display temperature conversion options"""
    print("""
    === TEMPERATURE CONVERSIONS ===
    1. Celsius to Fahrenheit
    2. Fahrenheit to Celsius
    3. Celsius to Kelvin
    4. Back to Main Menu
    """)
    
    choice = input("Enter your choice (1-4): ")
    
    if choice == "1":
        c = float(input("Enter temperature in Celsius: "))
        f = celsius_to_fahrenheit(c)
        print(f"{c}Â°C = {f:.2f}Â°F")
    elif choice == "2":
        f = float(input("Enter temperature in Fahrenheit: "))
        c = fahrenheit_to_celsius(f)
        print(f"{f}Â°F = {c:.2f}Â°C")
    elif choice == "3":
        c = float(input("Enter temperature in Celsius: "))
        k = celsius_to_kelvin(c)
        print(f"{c}Â°C = {k:.2f}K")
    elif choice == "4":
        return
    else:
        print("Invalid choice!")

# Similar functions for length_menu() and weight_menu()

# Main Program
def main():
    while True:
        show_menu()
        choice = input("Enter your choice (1-4): ")
        
        if choice == "1":
            temperature_menu()
        elif choice == "2":
            length_menu()  # You'll create this!
        elif choice == "3":
            weight_menu()  # You'll create this!
        elif choice == "4":
            print("Thank you for using Unit Converter!")
            break
        else:
            print("Invalid choice. Please try again.")

if __name__ == "__main__":
    main()
        </pre>
    </div>
    
    <h5>ğŸŒŸ Challenge Tasks (Extra Credit!):</h5>
    <ul>
        <li>Add volume conversions (liters to gallons)</li>
        <li>Add currency conversions (with fixed rates)</li>
        <li>Add time conversions (hours to minutes, etc.)</li>
        <li>Create a "favorite conversions" system</li>
        <li>Add conversion history that saves to a file</li>
        <li>Create a graphical version with ASCII art</li>
    </ul>
</div>

<h3>ğŸ® Interactive Practice Time!</h3>
<div style="background: #e8f5e8; padding: 20px; border-radius: 10px; margin: 15px 0;">
    <h4>ğŸ”„ Activity 1: Math Function Library (30 minutes)</h4>
    <p>Create a collection of math functions:</p>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin: 15px 0;">
        <div style="background: white; padding: 15px; border-radius: 8px;">
            <h5>ğŸ”¢ Basic Math Functions:</h5>
            <ul>
                <li><code>add(a, b)</code> - Returns sum</li>
                <li><code>subtract(a, b)</code> - Returns difference</li>
                <li><code>multiply(a, b)</code> - Returns product</li>
                <li><code>divide(a, b)</code> - Returns quotient (handle divide by zero!)</li>
                <li><code>power(base, exponent)</code> - Returns base^exponent</li>
            </ul>
        </div>
        <div style="background: white; padding: 15px; border-radius: 8px;">
            <h5>ğŸ“ Geometry Functions:</h5>
            <ul>
                <li><code>circle_area(radius)</code> - Ï€rÂ²</li>
                <li><code>circle_circumference(radius)</code> - 2Ï€r</li>
                <li><code>triangle_area(base, height)</code> - Â½bh</li>
                <li><code>rectangle_area(length, width)</code> - lÃ—w</li>
                <li><code>cylinder_volume(radius, height)</code> - Ï€rÂ²h</li>
            </ul>
        </div>
    </div>
    
    <pre style="background: #f5f5f5; padding: 15px; border-radius: 5px;">
# Math Library Starter Code
import math

def add(a, b):
    return a + b

def subtract(a, b):
    return a - b

def multiply(a, b):
    return a * b

def divide(a, b):
    if b == 0:
        return "Error: Cannot divide by zero!"
    return a / b

# Test your functions
print("Testing Math Library:")
print(f"5 + 3 = {add(5, 3)}")
print(f"10 - 4 = {subtract(10, 4)}")
print(f"6 Ã— 7 = {multiply(6, 7)}")
print(f"15 Ã· 3 = {divide(15, 3)}")
print(f"5 Ã· 0 = {divide(5, 0)}")
    </pre>
</div>

<div style="background: #e6f2ff; padding: 20px; border-radius: 10px; margin: 15px 0;">
    <h4>ğŸ² Activity 2: Game Character Creator (25 minutes)</h4>
    <p>Create functions to build and modify game characters:</p>
    
    <pre style="background: #f5f5f5; padding: 15px; border-radius: 5px;">
# RPG Character Functions
def create_character(name, character_class, level=1):
    """Creates a new game character"""
    character = {
        "name": name,
        "class": character_class,
        "level": level,
        "health": 100 * level,
        "mana": 50 * level,
        "experience": 0,
        "inventory": []
    }
    return character

def level_up(character):
    """Levels up a character"""
    character["level"] += 1
    character["health"] = 100 * character["level"]
    character["mana"] = 50 * character["level"]
    print(f"{character['name']} leveled up to {character['level']}!")
    return character

def add_item(character, item):
    """Adds an item to character's inventory"""
    character["inventory"].append(item)
    print(f"{character['name']} got {item}!")
    return character

def show_character(character):
    """Displays character information"""
    print(f"""
    ===== {character['name'].upper()} =====
    Class: {character['class']}
    Level: {character['level']}
    Health: {character['health']}
    Mana: {character['mana']}
    Inventory: {', '.join(character['inventory']) if character['inventory'] else 'Empty'}
    =========================
    """)

# Create and test characters
hero = create_character("Aragon", "Warrior")
hero = add_item(hero, "Sword")
hero = add_item(hero, "Shield")
hero = level_up(hero)
show_character(hero)
    </pre>
</div>

<h3>ğŸ”¬ Function Concepts Deep Dive</h3>
<div style="background: #f0e6ff; padding: 20px; border-radius: 10px; margin: 15px 0;">
    <h4>Advanced Function Features</h4>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin: 15px 0;">
        <div>
            <h5>ğŸ”¤ Default Parameters</h5>
            <pre style="background: white; padding: 10px; border-radius: 5px;">
def greet(name="Guest", message="Welcome"):
    """Greet someone with optional parameters"""
    print(f"{message}, {name}!")

# Different ways to call
greet()                      # Uses defaults
greet("Alex")                # Uses default message
greet("Sam", "Hello")        # Uses both provided
greet(message="Hi")          # Uses default name

def create_account(username, email, is_admin=False):
    """Create user account with admin flag"""
    account = {
        "username": username,
        "email": email,
        "is_admin": is_admin,
        "created_at": "2024-01-01"
    }
    return account

# Create regular and admin accounts
user1 = create_account("alex", "alex@email.com")
user2 = create_account("admin", "admin@email.com", True)
            </pre>
        </div>
        <div>
            <h5>ğŸ”¢ Multiple Return Values</h5>
            <pre style="background: white; padding: 10px; border-radius: 5px;">
def calculate_stats(numbers):
    """Calculate multiple statistics"""
    total = sum(numbers)
    count = len(numbers)
    average = total / count if count > 0 else 0
    maximum = max(numbers) if numbers else 0
    minimum = min(numbers) if numbers else 0
    
    # Return multiple values as a tuple
    return total, count, average, maximum, minimum

# Using multiple return values
scores = [85, 92, 78, 90, 88]
total, count, avg, max_score, min_score = calculate_stats(scores)

print(f"Total: {total}")
print(f"Count: {count}")
print(f"Average: {avg:.2f}")
print(f"Highest: {max_score}")
print(f"Lowest: {min_score}")

# Or get as a single tuple
stats = calculate_stats(scores)
print(f"All stats: {stats}")
            </pre>
        </div>
        <div>
            <h5>ğŸ”„ Recursive Functions</h5>
            <pre style="background: white; padding: 10px; border-radius: 5px;">
def factorial(n):
    """Calculate factorial using recursion"""
    if n == 0 or n == 1:
        return 1
    else:
        return n * factorial(n - 1)

def fibonacci(n):
    """Calculate Fibonacci sequence"""
    if n <= 0:
        return 0
    elif n == 1:
        return 1
    else:
        return fibonacci(n-1) + fibonacci(n-2)

# Testing recursive functions
print(f"Factorial of 5: {factorial(5)}")  # 120
print(f"Fibonacci(6): {fibonacci(6)}")    # 8
            </pre>
        </div>
        <div>
            <h5>ğŸ­ Lambda Functions (Mini-functions)</h5>
            <pre style="background: white; padding: 10px; border-radius: 5px;">
# Lambda functions are small, anonymous functions
# Syntax: lambda arguments: expression

# Regular function
def square(x):
    return x ** 2

# Lambda equivalent
square_lambda = lambda x: x ** 2

print(square(5))           # 25
print(square_lambda(5))    # 25

# Useful with map(), filter(), sort()
numbers = [1, 2, 3, 4, 5]

# Map: apply function to all items
squared = list(map(lambda x: x**2, numbers))
print(f"Squared: {squared}")  # [1, 4, 9, 16, 25]

# Filter: keep items that meet condition
evens = list(filter(lambda x: x % 2 == 0, numbers))
print(f"Evens: {evens}")      # [2, 4]

# Sort with custom key
students = [{"name": "Alex", "grade": 85},
            {"name": "Sam", "grade": 92},
            {"name": "Taylor", "grade": 78}]

# Sort by grade
sorted_students = sorted(students, key=lambda s: s["grade"])
print(sorted_students)
            </pre>
        </div>
    </div>
</div>

<h3>ğŸ“š Homework Assignment</h3>
<div style="background: #fff0e6; padding: 20px; border-radius: 10px; margin: 15px 0;">
    <h4>Build a "Scientific Calculator Library" ğŸ”¬</h4>
    
    <div style="background: white; padding: 15px; border-radius: 8px; margin: 10px 0;">
        <h5>Required Functions:</h5>
        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px;">
            <div>
                <h6>ğŸ“Š Statistics Functions</h6>
                <ul>
                    <li>Mean, median, mode</li>
                    <li>Standard deviation</li>
                    <li>Variance</li>
                    <li>Range</li>
                </ul>
            </div>
            <div>
                <h6>ğŸ“ Geometry Functions</h6>
                <ul>
                    <li>Area of different shapes</li>
                    <li>Volume of 3D shapes</li>
                    <li>Surface area</li>
                    <li>Perimeter/circumference</li>
                </ul>
            </div>
            <div>
                <h6>ğŸ”¢ Advanced Math</h6>
                <ul>
                    <li>Prime number checker</li>
                    <li>GCD/LCM calculator</li>
                    <li>Number base converter</li>
                    <li>Matrix operations</li>
                </ul>
            </div>
        </div>
    </div>
    
    <h5>Requirements:</h5>
    <ul>
        <li>Create at least 15 different functions</li>
        <li>Organize functions into categories</li>
        <li>Include comprehensive docstrings for each function</li>
        <li>Add input validation and error handling</li>
        <li>Create a menu system to access all functions</li>
        <li>Save calculation history to a file</li>
    </ul>
    
    <div style="background: #f5f5f5; padding: 15px; border-radius: 5px; margin-top: 15px;">
        <h5>ğŸ’¡ Sample Function Structure:</h5>
        <pre style="background: white; padding: 10px; border-radius: 5px;">
def calculate_mean(numbers):
    """
    Calculate the arithmetic mean of a list of numbers.
    
    Parameters:
    numbers (list): List of numerical values
    
    Returns:
    float: The mean value
    str: Error message if input is invalid
    """
    # Check if input is valid
    if not numbers:
        return "Error: Empty list provided"
    
    if not all(isinstance(n, (int, float)) for n in numbers):
        return "Error: All items must be numbers"
    
    # Calculate mean
    total = sum(numbers)
    mean = total / len(numbers)
    return mean

# Test cases
print(calculate_mean([1, 2, 3, 4, 5]))      # 3.0
print(calculate_mean([]))                    # Error message
print(calculate_mean([1, 2, 'three', 4]))   # Error message
        </pre>
    </div>
    
    <h5>Bonus Challenges:</h5>
    <ul>
        <li>Create a graphing function using ASCII art</li>
        <li>Add unit testing for each function</li>
        <li>Create a web interface using Flask (advanced!)</li>
        <li>Add scientific constants database</li>
        <li>Implement complex number operations</li>
    </ul>
</div>

<h3>ğŸ“ Key Learning Points</h3>
<div style="background: #f0f8ff; padding: 20px; border-radius: 10px; margin: 15px 0;">
    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px;">
        <div style="background: white; padding: 15px; border-radius: 8px; border-left: 5px solid #4A90E2;">
            <h5>âœ… What We Learned:</h5>
            <ul>
                <li>Functions help organize and reuse code</li>
                <li><code>def</code> keyword starts function definition</li>
                <li>Parameters are inputs, arguments are values passed</li>
                <li><code>return</code> sends a value back from function</li>
                <li>Docstrings document what functions do</li>
                <li>Functions can call other functions</li>
            </ul>
        </div>
        <div style="background: white; padding: 15px; border-radius: 8px; border-left: 5px solid #E24A4A;">
            <h5>ğŸ’¡ Best Practices:</h5>
            <ul>
                <li><b>One job:</b> Each function should do one thing well</li>
                <li><b>Good names:</b> Use verbs (calculate, print, get)</li>
                <li><b>Document:</b> Always write docstrings</li>
                <li><b>Test:</b> Test functions with different inputs</li>
                <li><b>Keep small:</b> Functions should be short and focused</li>
                <li><b>Default values:</b> Use for optional parameters</li>
            </ul>
        </div>
    </div>
</div>

<div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px; border-radius: 10px; margin: 15px 0; text-align: center;">
    <h3>ğŸ¯ Function Writing Rules</h3>
    <div style="display: flex; justify-content: space-around; margin: 15px 0;">
        <div>
            <div style="font-size: 2em;">ğŸ“</div>
            <p><b>Start with def</b></p>
            <p><code>def function_name():</code></p>
        </div>
        <div>
            <div style="font-size: 2em;">ğŸ“„</div>
            <p><b>Add Docstring</b></p>
            <p>'''What it does'''</p>
        </div>
        <div>
            <div style="font-size: 2em;">ğŸ”¢</div>
            <p><b>Write Code</b></p>
            <p>Indented body</p>
        </div>
        <div>
            <div style="font-size: 2em;">ğŸ”™</div>
            <p><b>Return Value</b></p>
            <p>(optional)</p>
        </div>
    </div>
</div>

<h3>ğŸ”— Resources for Practice</h3>
<ul>
    <li><a href="https://www.w3schools.com/python/python_functions.asp" target="_blank">W3Schools Python Functions</a></li>
    <li><a href="https://realpython.com/defining-your-own-python-function/" target="_blank">Real Python Functions Guide</a></li>
    <li><a href="https://exercism.org/tracks/python/concepts/functions" target="_blank">Exercism Functions Practice</a></li>
</ul>

<div style="background: #e8f5e8; padding: 20px; border-radius: 10px; margin: 20px 0; text-align: center;">
    <h3>ğŸŒŸ You're Building Code Superpowers! ğŸŒŸ</h3>
    <p>Functions give you the power to write code once and use it everywhere!</p>
    <p><i>"Don't repeat yourself (DRY) - use functions!"</i></p>
    
    <div style="margin-top: 15px; display: flex; justify-content: center; gap: 20px;">
        <div style="padding: 10px 20px; background: #4CAF50; color: white; border-radius: 5px;">
            ğŸ”„ Reusable Code
        </div>
        <div style="padding: 10px 20px; background: #2196F3; color: white; border-radius: 5px;">
            ğŸ§© Organized Programs
        </div>
        <div style="padding: 10px 20px; background: #FF9800; color: white; border-radius: 5px;">
            ğŸš€ Faster Development
        </div>
    </div>
</div>
`
            },
            "2-6": {
                "icon": "fa-repeat",
                "title": "Advanced Loops (For & While)",
                "html": `<h1>Week 6, Month 2: Advanced Loops - Automating Repetitive Tasks ğŸ”„</h1>
<p>Today we'll master loops to automate repetitive tasks and process collections of data efficiently!</p>

<div class="analogy-box">
    <h3>ğŸƒâ€â™‚ï¸ The Assembly Line Analogy</h3>
    <div style="display: flex; gap: 20px; margin: 15px 0;">
        <div style="flex: 1; background: #e6f2ff; padding: 15px; border-radius: 8px;">
            <h4>ğŸ” For Loops = Counting Steps</h4>
            <p>Like an assembly line that processes <b>known number</b> of items:</p>
            <ul>
                <li><b>range()</b> = Number of items to process</li>
                <li><b>item</b> = Current item being processed</li>
                <li><b>Loop body</b> = Action on each item</li>
            </ul>
            <p><code>for item in collection:</code></p>
        </div>
        <div style="flex: 1; background: #fff0e6; padding: 15px; border-radius: 8px;">
            <h4>â™¾ï¸ While Loops = Until Condition</h4>
            <p>Like working <b>until</b> a condition is met:</p>
            <ul>
                <li><b>Condition</b> = When to stop</li>
                <li><b>Update</b> = Change to reach condition</li>
                <li><b>Break</b> = Emergency stop</li>
            </ul>
            <p><code>while condition:</code></p>
        </div>
    </div>
</div>

<h3>ğŸ¯ Today's Learning Goals:</h3>
<ol>
    <li>Mastering <code>for</code> loops with <code>range()</code></li>
    <li>Looping through lists, dictionaries, and strings</li>
    <li>Using <code>while</code> loops for conditional repetition</li>
    <li>Loop control: <code>break</code>, <code>continue</code>, <code>pass</code></li>
    <li>Nested loops for complex patterns</li>
</ol>

<h3>ğŸ”„ For Loops Deep Dive</h3>
<div style="background: #e6f2ff; padding: 20px; border-radius: 10px; margin: 15px 0;">
    <h4>Looping Through Different Data Types</h4>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 15px 0;">
        <div>
            <h5>ğŸ“Š Looping Through Lists</h5>
            <pre style="background: white; padding: 15px; border-radius: 5px;">
# Basic list looping
fruits = ["apple", "banana", "cherry", "date", "elderberry"]

print("=== FRUIT MARKET ===")
for fruit in fruits:
    print(f"ğŸ {fruit.capitalize()}")

print("\n=== WITH INDEXES ===")
for i, fruit in enumerate(fruits):
    print(f"{i+1}. {fruit}")

print("\n=== REVERSE ORDER ===")
for fruit in reversed(fruits):
    print(fruit)

# Looping with conditions
print("\n=== FRUITS WITH 'A' ===")
for fruit in fruits:
    if 'a' in fruit.lower():
        print(f"âœ… {fruit} contains 'a'")
            </pre>
        </div>
        <div>
            <h5>ğŸ”‘ Looping Through Dictionaries</h5>
            <pre style="background: white; padding: 15px; border-radius: 5px;">
# Student grades dictionary
grades = {
    "Alex": 85,
    "Sam": 92,
    "Taylor": 78,
    "Jordan": 95,
    "Casey": 88
}

print("=== STUDENT GRADES ===")
# Loop through keys
for name in grades:
    print(f"{name}: {grades[name]}")

print("\n=== USING .items() ===")
for name, score in grades.items():
    print(f"{name}: {score}")

print("\n=== USING .keys() AND .values() ===")
for name in grades.keys():
    print(f"Student: {name}")

for score in grades.values():
    print(f"Score: {score}")

# Finding average
total = 0
count = 0
for score in grades.values():
    total += score
    count += 1

average = total / count
print(f"\nClass Average: {average:.1f}")
            </pre>
        </div>
    </div>
    
    <div style="margin-top: 20px;">
        <h5>ğŸ¯ The <code>range()</code> Function</h5>
        <div style="background: white; padding: 15px; border-radius: 8px;">
            <table style="width: 100%; border-collapse: collapse;">
                <tr style="background: #4A90E2; color: white;">
                    <th style="padding: 10px;">range() Format</th>
                    <th style="padding: 10px;">Description</th>
                    <th style="padding: 10px;">Example</th>
                    <th style="padding: 10px;">Output</th>
                </tr>
                <tr>
                    <td style="padding: 8px;"><code>range(stop)</code></td>
                    <td style="padding: 8px;">0 to stop-1</td>
                    <td style="padding: 8px;"><code>range(5)</code></td>
                    <td style="padding: 8px;">0, 1, 2, 3, 4</td>
                </tr>
                <tr style="background: #f0f8ff;">
                    <td style="padding: 8px;"><code>range(start, stop)</code></td>
                    <td style="padding: 8px;">start to stop-1</td>
                    <td style="padding: 8px;"><code>range(2, 6)</code></td>
                    <td style="padding: 8px;">2, 3, 4, 5</td>
                </tr>
                <tr>
                    <td style="padding: 8px;"><code>range(start, stop, step)</code></td>
                    <td style="padding: 8px;">Count by step</td>
                    <td style="padding: 8px;"><code>range(0, 10, 2)</code></td>
                    <td style="padding: 8px;">0, 2, 4, 6, 8</td>
                </tr>
                <tr style="background: #f0f8ff;">
                    <td style="padding: 8px;"><code>range(start, stop, -step)</code></td>
                    <td style="padding: 8px;">Count backwards</td>
                    <td style="padding: 8px;"><code>range(5, 0, -1)</code></td>
                    <td style="padding: 8px;">5, 4, 3, 2, 1</td>
                </tr>
            </table>
            
            <pre style="background: #f5f5f5; padding: 15px; border-radius: 5px; margin-top: 15px;">
# range() examples
print("=== COUNTING ===")
for i in range(5):
    print(f"Count: {i}")

print("\n=== CUSTOM RANGE ===")
for i in range(10, 21, 2):  # Even numbers 10-20
    print(f"Even: {i}")

print("\n=== COUNTDOWN ===")
for i in range(10, 0, -1):
    print(f"T-minus {i}...")
print("Blast off! ğŸš€")

print("\n=== MULTIPLICATION TABLE ===")
number = 7
for i in range(1, 11):
    print(f"{number} Ã— {i} = {number * i}")
            </pre>
        </div>
    </div>
</div>

<h3>â™¾ï¸ While Loops Mastery</h3>
<div style="background: #fff0e6; padding: 20px; border-radius: 10px; margin: 15px 0;">
    <h4>When to Use While Loops</h4>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 15px 0;">
        <div>
            <h5>ğŸ® Game Loops</h5>
            <pre style="background: white; padding: 15px; border-radius: 5px;">
# Simple number guessing game
import random

def number_guessing_game():
    """Number guessing game with while loop"""
    secret_number = random.randint(1, 100)
    attempts = 0
    max_attempts = 10
    
    print("ğŸ¯ Guess the Number (1-100) ğŸ¯")
    print(f"You have {max_attempts} attempts.")
    
    while attempts < max_attempts:
        guess = int(input(f"\nAttempt {attempts + 1}/{max_attempts}: "))
        attempts += 1
        
        if guess < secret_number:
            print("Too low! ğŸ“‰")
        elif guess > secret_number:
            print("Too high! ğŸ“ˆ")
        else:
            print(f"ğŸ‰ Correct! The number was {secret_number}")
            print(f"You found it in {attempts} attempts!")
            return True
    
    print(f"\nğŸ’€ Game Over! The number was {secret_number}")
    return False

# Play the game
number_guessing_game()
            </pre>
        </div>
        <div>
            <h5>ğŸ”„ Menu Systems</h5>
            <pre style="background: white; padding: 15px; border-radius: 5px;">
# ATM Menu with while loop
def atm_menu():
    """ATM system that runs until logout"""
    balance = 1000.00
    logged_in = True
    
    print("=== WELCOME TO PYTHON BANK ===")
    
    while logged_in:
        print(f"\nCurrent Balance: \${balance:.2f}")
        print("""
        1. Deposit
        2. Withdraw
        3. View Balance
        4. Logout
        """)
        
        choice = input("Enter choice (1-4): ")
        
        if choice == "1":
            amount = float(input("Deposit amount: $"))
            if amount > 0:
                balance += amount
                print(f"Deposited \${amount:.2f}")
            else:
                print("Invalid amount!")
                
        elif choice == "2":
            amount = float(input("Withdraw amount: $"))
            if 0 < amount <= balance:
                balance -= amount
                print(f"Withdrew \${amount:.2f}")
            else:
                print("Invalid amount or insufficient funds!")
                
        elif choice == "3":
            print(f"Balance: \${balance:.2f}")
            
        elif choice == "4":
            print("Thank you for banking with us!")
            logged_in = False
            
        else:
            print("Invalid choice!")
    
    print("Goodbye! ğŸ‘‹")

# Run the ATM
atm_menu()
            </pre>
        </div>
    </div>
</div>

<h3>ğŸ­ Loop Control Statements</h3>
<div style="background: #f0e6ff; padding: 20px; border-radius: 10px; margin: 15px 0;">
    <h4>Controlling Loop Execution</h4>
    
    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin: 15px 0;">
        <div style="background: white; padding: 15px; border-radius: 8px;">
            <h5>ğŸš« break - Exit Loop</h5>
            <pre style="background: #f5f5f5; padding: 10px; border-radius: 5px;">
# Find first even number
numbers = [1, 3, 5, 8, 9, 11, 14]

for num in numbers:
    if num % 2 == 0:
        print(f"Found first even: {num}")
        break  # Exit loop immediately
    print(f"Checking {num}...")

print("Loop ended.")

# Password attempt limit
password = "secret123"
attempts = 3

while attempts > 0:
    guess = input("Enter password: ")
    if guess == password:
        print("Access granted! ğŸ‰")
        break
    attempts -= 1
    print(f"Wrong! {attempts} attempts left.")
else:
    print("Too many attempts! ğŸ”’")
            </pre>
        </div>
        <div style="background: white; padding: 15px; border-radius: 8px;">
            <h5>â­ï¸ continue - Skip to Next</h5>
            <pre style="background: #f5f5f5; padding: 10px; border-radius: 5px;">
# Skip negative numbers
numbers = [10, -5, 3, -8, 15, -1, 7]

print("Processing positive numbers:")
for num in numbers:
    if num < 0:
        continue  # Skip negative numbers
    print(f"Processing {num}...")
    result = num * 2
    print(f"Result: {result}")

print("\nDone!")

# Skip weekends in schedule
days = ["Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"]

print("Weekday schedule:")
for day in days:
    if day in ["Sat", "Sun"]:
        continue  # Skip weekends
    print(f"{day}: Work day")
            </pre>
        </div>
        <div style="background: white; padding: 15px; border-radius: 8px;">
            <h5>ğŸ”² pass - Placeholder</h5>
            <pre style="background: #f5f5f5; padding: 10px; border-radius: 5px;">
# pass as placeholder
for i in range(5):
    pass  # TODO: Add code later

# Empty function
def future_feature():
    pass  # Will implement later

# Conditional placeholder
ages = [12, 15, 18, 21, 25]

print("Age categories:")
for age in ages:
    if age < 13:
        print(f"{age}: Child")
    elif age < 18:
        print(f"{age}: Teenager")
    elif age < 21:
        pass  # Handle differently later
    else:
        print(f"{age}: Adult")

print("\nUsing pass vs continue:")
# pass does nothing
for i in range(3):
    pass  # Just moves to next iteration
    print(f"After pass: {i}")

# continue skips rest of loop body
for i in range(3):
    continue  # Skips print statement
    print(f"This won't print: {i}")
            </pre>
        </div>
    </div>
</div>

<h3>ğŸ“§ Today's Main Project: Bulk Emailer Simulator ğŸ“§</h3>
<div style="background: #e8f5e8; padding: 20px; border-radius: 10px; margin: 15px 0;">
    <h4>ğŸ’Œ Build an Email Marketing System</h4>
    <p><b>Goal:</b> Create a program that sends personalized emails to a list of contacts.</p>
    
    <div style="background: white; padding: 15px; border-radius: 8px; margin: 15px 0; border: 2px solid #4CAF50;">
        <h4>ğŸ“‹ Project Requirements:</h4>
        <ol>
            <li>Load contacts from a list or file</li>
            <li>Personalize each email with recipient's name</li>
            <li>Track sent emails and failures</li>
            <li>Allow bulk sending or individual sending</li>
            <li>Create different email templates</li>
            <li>Schedule emails (simulated)</li>
        </ol>
    </div>
    
    <div style="background: #2d2d2d; color: #f8f8f2; padding: 20px; border-radius: 10px; margin: 15px 0;">
        <h4 style="color: #66d9ef;">ğŸ’¡ Starter Code Template</h4>
        <pre style="color: #f8f8f2;">
# ============ BULK EMAILER SIMULATOR ============

# Sample contact list
contacts = [
    {"name": "Alex Johnson", "email": "alex@email.com", "group": "friends"},
    {"name": "Sam Wilson", "email": "sam@company.com", "group": "work"},
    {"name": "Taylor Smith", "email": "taylor@school.edu", "group": "family"},
    {"name": "Jordan Lee", "email": "jordan@gmail.com", "group": "friends"},
    {"name": "Casey Brown", "email": "casey@business.org", "group": "work"},
    # Add more contacts...
]

# Email templates
templates = {
    "welcome": {
        "subject": "Welcome to Our Community!",
        "body": "Hello {name},\n\nWelcome to our community! We're excited to have you join us."
    },
    "newsletter": {
        "subject": "Monthly Newsletter - {month}",
        "body": "Dear {name},\n\nHere's our latest newsletter with exciting updates!"
    },
    "promotion": {
        "subject": "Special Offer Just for You!",
        "body": "Hi {name},\n\nWe have a special promotion just for our valued contacts."
    }
}

def send_email(contact, template_name, **kwargs):
    """Send a personalized email to one contact"""
    template = templates[template_name]
    
    # Personalize the email
    subject = template["subject"].format(name=contact["name"], **kwargs)
    body = template["body"].format(name=contact["name"], **kwargs)
    
    # Simulate sending email
    print(f"\nğŸ“§ Sending email to: {contact['name']} <{contact['email']}>")
    print(f"Subject: {subject}")
    print(f"Body:\n{body}")
    print("-" * 40)
    
    # Return success status (simulated)
    return True

def send_bulk_emails(contact_list, template_name, **kwargs):
    """Send emails to multiple contacts"""
    successful = 0
    failed = 0
    
    print(f"\nğŸš€ Starting bulk email send...")
    print(f"Template: {template_name}")
    print(f"Contacts: {len(contact_list)}")
    print("=" * 40)
    
    for contact in contact_list:
        try:
            if send_email(contact, template_name, **kwargs):
                successful += 1
            else:
                failed += 1
        except Exception as e:
            print(f"âŒ Failed to send to {contact['name']}: {e}")
            failed += 1
    
    print(f"\nâœ… Summary:")
    print(f"Successful: {successful}")
    print(f"Failed: {failed}")
    print(f"Total: {successful + failed}")

def filter_contacts_by_group(contact_list, group):
    """Filter contacts by group"""
    filtered = []
    for contact in contact_list:
        if contact["group"] == group:
            filtered.append(contact)
    return filtered

def show_contact_stats(contact_list):
    """Show statistics about contacts"""
    print("\nğŸ“Š Contact Statistics:")
    print(f"Total contacts: {len(contact_list)}")
    
    # Count by group
    groups = {}
    for contact in contact_list:
        group = contact["group"]
        groups[group] = groups.get(group, 0) + 1
    
    for group, count in groups.items():
        print(f"  {group}: {count}")

# Main menu
def main_menu():
    while True:
        print("""
        ===== BULK EMAILER SIMULATOR =====
        1. Send Welcome Emails
        2. Send Newsletter
        3. Send Promotion
        4. Send to Specific Group
        5. Show Contact Stats
        6. Exit
        ===================================
        """)
        
        choice = input("Enter your choice (1-6): ")
        
        if choice == "1":
            send_bulk_emails(contacts, "welcome")
        elif choice == "2":
            month = input("Enter month: ")
            send_bulk_emails(contacts, "newsletter", month=month)
        elif choice == "3":
            send_bulk_emails(contacts, "promotion")
        elif choice == "4":
            print("Available groups: friends, work, family")
            group = input("Enter group to send to: ")
            filtered = filter_contacts_by_group(contacts, group)
            if filtered:
                template = input("Enter template (welcome/newsletter/promotion): ")
                send_bulk_emails(filtered, template)
            else:
                print(f"No contacts in group: {group}")
        elif choice == "5":
            show_contact_stats(contacts)
        elif choice == "6":
            print("Goodbye! ğŸ‘‹")
            break
        else:
            print("Invalid choice!")

# Run the program
if __name__ == "__main__":
    main_menu()
        </pre>
    </div>
    
    <h5>ğŸŒŸ Challenge Tasks (Extra Credit!):</h5>
    <ul>
        <li>Load contacts from a CSV file</li>
        <li>Add unsubscribe functionality</li>
        <li>Track email open rates (simulated)</li>
        <li>Add A/B testing for different templates</li>
        <li>Schedule emails for future dates</li>
        <li>Add email validation before sending</li>
        <li>Create HTML email templates</li>
    </ul>
</div>

<h3>ğŸ”¢ Nested Loops & Patterns</h3>
<div style="background: #e6f2ff; padding: 20px; border-radius: 10px; margin: 15px 0;">
    <h4>Creating Patterns with Nested Loops</h4>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin: 15px 0;">
        <div>
            <h5>â­ Star Patterns</h5>
            <pre style="background: white; padding: 10px; border-radius: 5px;">
# Square pattern
size = 5
print("Square Pattern:")
for i in range(size):
    for j in range(size):
        print("*", end=" ")
    print()  # New line

print("\nTriangle Pattern:")
# Right triangle
for i in range(1, 6):
    for j in range(i):
        print("*", end=" ")
    print()

print("\nPyramid Pattern:")
# Pyramid
rows = 5
for i in range(1, rows + 1):
    # Print spaces
    for j in range(rows - i):
        print(" ", end=" ")
    # Print stars
    for k in range(2 * i - 1):
        print("*", end=" ")
    print()

print("\nDiamond Pattern:")
# Diamond
rows = 5
# Upper half
for i in range(1, rows + 1):
    print(" " * (rows - i) + "* " * i)
# Lower half
for i in range(rows - 1, 0, -1):
    print(" " * (rows - i) + "* " * i)
            </pre>
        </div>
        <div>
            <h5>ğŸ”¢ Number Patterns</h5>
            <pre style="background: white; padding: 10px; border-radius: 5px;">
# Multiplication table
print("Multiplication Table:")
for i in range(1, 6):
    for j in range(1, 6):
        product = i * j
        print(f"{product:3}", end=" ")  # 3 spaces width
    print()

print("\nNumber Pyramid:")
# Number pyramid
for i in range(1, 6):
    # Print numbers
    for j in range(1, i + 1):
        print(j, end=" ")
    print()

print("\nFloyd's Triangle:")
# Floyd's Triangle
number = 1
for i in range(1, 6):
    for j in range(i):
        print(number, end=" ")
        number += 1
    print()

print("\nChess Board Pattern:")
# Chess board
for i in range(8):
    for j in range(8):
        if (i + j) % 2 == 0:
            print("â–ˆâ–ˆ", end="")
        else:
            print("  ", end="")
    print()
            </pre>
        </div>
    </div>
</div>

<h3>ğŸ® Interactive Practice Time!</h3>
<div style="background: #fff5e6; padding: 20px; border-radius: 10px; margin: 15px 0;">
    <h4>ğŸ”„ Activity 1: Data Analysis with Loops (30 minutes)</h4>
    <p>Analyze a dataset of student scores:</p>
    
    <pre style="background: #f5f5f5; padding: 15px; border-radius: 5px;">
# Student data analysis
students = [
    {"name": "Alex", "scores": [85, 92, 78, 90]},
    {"name": "Sam", "scores": [88, 76, 95, 82]},
    {"name": "Taylor", "scores": [91, 89, 94, 87]},
    {"name": "Jordan", "scores": [72, 85, 79, 88]},
    {"name": "Casey", "scores": [95, 92, 96, 98]},
]

print("=== STUDENT PERFORMANCE ANALYSIS ===\n")

# Calculate statistics for each student
for student in students:
    scores = student["scores"]
    
    # Calculate average
    total = 0
    for score in scores:
        total += score
    average = total / len(scores)
    
    # Find highest and lowest
    highest = scores[0]
    lowest = scores[0]
    for score in scores:
        if score > highest:
            highest = score
        if score < lowest:
            lowest = score
    
    # Count grades
    grade_counts = {"A": 0, "B": 0, "C": 0, "D": 0, "F": 0}
    for score in scores:
        if score >= 90:
            grade_counts["A"] += 1
        elif score >= 80:
            grade_counts["B"] += 1
        elif score >= 70:
            grade_counts["C"] += 1
        elif score >= 60:
            grade_counts["D"] += 1
        else:
            grade_counts["F"] += 1
    
    print(f"Student: {student['name']}")
    print(f"  Average: {average:.1f}")
    print(f"  Highest: {highest}")
    print(f"  Lowest: {lowest}")
    print(f"  Grades: {grade_counts}")
    print()

# Class statistics
print("=== CLASS STATISTICS ===")
all_scores = []
for student in students:
    all_scores.extend(student["scores"])

# Calculate class average
class_total = 0
for score in all_scores:
    class_total += score
class_average = class_total / len(all_scores)

print(f"Class Average: {class_average:.1f}")
print(f"Total Students: {len(students)}")
print(f"Total Tests: {len(all_scores)}")
    </pre>
</div>

<h3>ğŸ“š Homework Assignment</h3>
<div style="background: #f0e6ff; padding: 20px; border-radius: 10px; margin: 15px 0;">
    <h4>Create a "Data Processing Pipeline" ğŸ“Š</h4>
    
    <div style="background: white; padding: 15px; border-radius: 8px; margin: 10px 0;">
        <h5>Dataset to Process:</h5>
        <pre style="background: #f5f5f5; padding: 10px; border-radius: 5px;">
# Sample sales data
sales_data = [
    {"product": "Laptop", "price": 999.99, "quantity": 5, "category": "Electronics"},
    {"product": "Mouse", "price": 29.99, "quantity": 20, "category": "Electronics"},
    {"product": "Notebook", "price": 5.99, "quantity": 50, "category": "Stationery"},
    {"product": "Pen", "price": 1.99, "quantity": 100, "category": "Stationery"},
    {"product": "Headphones", "price": 149.99, "quantity": 8, "category": "Electronics"},
    {"product": "Backpack", "price": 49.99, "quantity": 15, "category": "Accessories"},
    {"product": "Water Bottle", "price": 19.99, "quantity": 30, "category": "Accessories"},
    {"product": "Calculator", "price": 24.99, "quantity": 12, "category": "Electronics"},
]
        </pre>
    </div>
    
    <h5>Required Processing Tasks:</h5>
    <ol>
        <li><b>Calculate total revenue</b> (price Ã— quantity for each product)</li>
        <li><b>Find best-selling product</b> (highest quantity sold)</li>
        <li><b>Calculate revenue by category</b></li>
        <li><b>Find average price per category</b></li>
        <li><b>Identify low stock items</b> (quantity < 10)</li>
        <li><b>Generate sales report</b> with all statistics</li>
    </ol>
    
    <h5>Bonus Challenges:</h5>
    <ul>
        <li>Load data from CSV file instead of hardcoded list</li>
        <li>Add functionality to filter data by date range</li>
        <li>Create visualizations using ASCII art bar charts</li>
        <li>Export processed data to a new CSV file</li>
        <li>Add sorting functionality (by price, quantity, revenue)</li>
        <li>Create a search function to find specific products</li>
    </ul>
    
    <div style="background: #f5f5f5; padding: 15px; border-radius: 5px; margin-top: 15px;">
        <h5>ğŸ’¡ Sample Output Format:</h5>
        <pre style="background: white; padding: 10px; border-radius: 5px;">
=== SALES ANALYSIS REPORT ===

Total Revenue: $XXXX.XX
Total Products Sold: XXX
Average Price: $XX.XX

=== BY CATEGORY ===
Electronics: $XXXX.XX (XX items)
Stationery: $XXXX.XX (XX items)
Accessories: $XXXX.XX (XX items)

=== BEST SELLERS ===
1. Product Name: XXX units, $XXXX.XX revenue
2. Product Name: XXX units, $XXXX.XX revenue
3. Product Name: XXX units, $XXXX.XX revenue

=== LOW STOCK ALERT ===
âš ï¸ These products need restocking:
- Product Name (X in stock)
- Product Name (X in stock)
        </pre>
    </div>
</div>

<h3>ğŸ“ Key Learning Points</h3>
<div style="background: #f0f8ff; padding: 20px; border-radius: 10px; margin: 15px 0;">
    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px;">
        <div style="background: white; padding: 15px; border-radius: 8px; border-left: 5px solid #4A90E2;">
            <h5>âœ… What We Learned:</h5>
            <ul>
                <li><code>for</code> loops iterate over sequences (lists, strings, ranges)</li>
                <li><code>while</code> loops repeat until condition is False</li>
                <li><code>break</code> exits loops, <code>continue</code> skips to next iteration</li>
                <li><code>range()</code> generates number sequences for counting</li>
                <li>Nested loops create patterns and process 2D data</li>
                <li>Looping through dictionaries uses <code>.items()</code>, <code>.keys()</code>, <code>.values()</code></li>
            </ul>
        </div>
        <div style="background: white; padding: 15px; border-radius: 8px; border-left: 5px solid #E24A4A;">
            <h5>âš ï¸ Common Loop Mistakes:</h5>
            <ul>
                <li><b>Infinite loops:</b> Forgetting to update while loop condition</li>
                <li><b>Off-by-one errors:</b> <code>range(5)</code> gives 0-4, not 1-5</li>
                <li><b>Modifying list while looping:</b> Can cause unexpected behavior</li>
                <li><b>Nested loop confusion:</b> Keep track of different loop variables</li>
                <li><b>Forgetting enumerate():</b> Use when you need index AND value</li>
            </ul>
        </div>
    </div>
</div>

<div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px; border-radius: 10px; margin: 15px 0; text-align: center;">
    <h3>ğŸ¯ Loop Performance Tips</h3>
    <div style="display: flex; justify-content: space-around; margin: 15px 0;">
        <div>
            <div style="font-size: 2em;">âš¡</div>
            <p><b>Use List Comprehensions</b></p>
            <p>Faster than for loops</p>
        </div>
        <div>
            <div style="font-size: 2em;">ğŸ“Š</div>
            <p><b>Precompute Values</b></p>
            <p>Outside loops when possible</p>
        </div>
        <div>
            <div style="font-size: 2em;">ğŸ”</div>
            <p><b>Break Early</b></p>
            <p>Exit loops when done</p>
        </div>
        <div>
            <div style="font-size: 2em;">ğŸ§®</div>
            <p><b>Use Built-in Functions</b></p>
            <p>sum(), max(), min()</p>
        </div>
    </div>
</div>

<h3>ğŸ”— Resources for Practice</h3>
<ul>
    <li><a href="https://www.w3schools.com/python/python_for_loops.asp" target="_blank">W3Schools Python For Loops</a></li>
    <li><a href="https://www.w3schools.com/python/python_while_loops.asp" target="_blank">W3Schools Python While Loops</a></li>
    <li><a href="https://codingbat.com/python" target="_blank">CodingBat Loop Practice Problems</a></li>
</ul>

<div style="background: #e8f5e8; padding: 20px; border-radius: 10px; margin: 20px 0; text-align: center;">
    <h3>ğŸŒŸ You're an Automation Wizard! ğŸŒŸ</h3>
    <p>Loops give you the power to process thousands of items with just a few lines of code!</p>
    <p><i>"The best thing about loops is they never get tired of repeating!"</i></p>
    
    <div style="margin-top: 15px; display: flex; justify-content: center; gap: 20px;">
        <div style="padding: 10px 20px; background: #4CAF50; color: white; border-radius: 5px;">
            ğŸ”„ Automation
        </div>
        <div style="padding: 10px 20px; background: #2196F3; color: white; border-radius: 5px;">
            ğŸ“Š Data Processing
        </div>
        <div style="padding: 10px 20px; background: #FF9800; color: white; border-radius: 5px;">
            ğŸ­ Pattern Creation
        </div>
    </div>
</div>
`
            },
            "2-7": {
                "icon": "fa-exclamation-triangle",
                "title": "Error Handling (Try/Except)",
                "html": `<h1>Week 7, Month 2: Error Handling - Making Programs Bulletproof ğŸ›¡ï¸</h1>
<p>Today we'll learn how to handle errors gracefully so our programs don't crash when something unexpected happens!</p>

<div class="analogy-box">
    <h3>ğŸš‘ The Emergency Room Analogy</h3>
    <div style="display: flex; gap: 20px; margin: 15px 0;">
        <div style="flex: 1; background: #fff5e6; padding: 15px; border-radius: 8px;">
            <h4>ğŸš¨ Errors are like Injuries</h4>
            <p><b>try:</b> Attempt risky operation<br>
            <b>except:</b> Treat the injury if it occurs<br>
            <b>else:</b> What to do if no injury<br>
            <b>finally:</b> Always do this (cleanup)<br>
            <b>raise:</b> Call for help (re-raise error)</p>
        </div>
        <div style="flex: 1; background: #e6f2ff; padding: 15px; border-radius: 8px;">
            <h4>ğŸ©¹ Why Handle Errors?</h4>
            <ul>
                <li><b>Prevent crashes:</b> Keep program running</li>
                <li><b>User-friendly:</b> Show helpful messages</li>
                <li><b>Debug easier:</b> Know where problems occur</li>
                <li><b>Professional:</b> Real software handles errors</li>
                <li><b>Safe:</b> Prevent data loss or corruption</li>
            </ul>
        </div>
    </div>
</div>

<h3>ğŸ¯ Today's Learning Goals:</h3>
<ol>
    <li>Understanding different types of Python errors</li>
    <li>Using <code>try</code>/<code>except</code> blocks</li>
    <li>Handling specific vs general exceptions</li>
    <li>Using <code>else</code> and <code>finally</code> clauses</li>
    <li>Creating custom exceptions</li>
    <li>Best practices for error handling</li>
</ol>

<h3>ğŸš¨ Common Python Errors</h3>
<div style="background: #ffe6e6; padding: 20px; border-radius: 10px; margin: 15px 0;">
    <h4>Error Types and What They Mean</h4>
    
    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin: 15px 0;">
        <div style="background: white; padding: 15px; border-radius: 8px; border-left: 5px solid #ff3333;">
            <h5>ğŸ”¤ Syntax Errors</h5>
            <p>Code can't be understood by Python</p>
            <pre style="background: #f5f5f5; padding: 10px; border-radius: 5px;">
print("Hello"  # Missing closing )
if x = 5:      # = instead of ==
for i range(5):# Missing in
            </pre>
            <p><b>Fix:</b> Check your code syntax!</p>
        </div>
        <div style="background: white; padding: 15px; border-radius: 8px; border-left: 5px solid #ff9900;">
            <h5>ğŸ”¢ Runtime Errors</h5>
            <p>Code runs but hits problems</p>
            <pre style="background: #f5f5f5; padding: 10px; border-radius: 5px;">
x = 10 / 0      # ZeroDivisionError
nums[10]        # IndexError
value + "text"  # TypeError
            </pre>
            <p><b>Fix:</b> Use try/except blocks</p>
        </div>
        <div style="background: white; padding: 15px; border-radius: 8px; border-left: 5px solid #3366ff;">
            <h5>ğŸ” Logic Errors</h5>
            <p>Code runs but gives wrong results</p>
            <pre style="background: #f5f5f5; padding: 10px; border-radius: 5px;">
if age >= 18:   # Should be >
    print("Adult")

average = total / count  
# What if count is 0?
            </pre>
            <p><b>Fix:</b> Test with different inputs</p>
        </div>
    </div>
    
    <div style="background: white; padding: 15px; border-radius: 8px; margin-top: 15px;">
        <h5>ğŸ“Š Common Exception Hierarchy</h5>
        <pre style="background: #f5f5f5; padding: 15px; border-radius: 5px;">
BaseException
â”œâ”€â”€ KeyboardInterrupt    (Ctrl+C pressed)
â”œâ”€â”€ SystemExit           (sys.exit() called)
â””â”€â”€ Exception
    â”œâ”€â”€ ArithmeticError
    â”‚   â”œâ”€â”€ ZeroDivisionError
    â”‚   â””â”€â”€ OverflowError
    â”œâ”€â”€ AssertionError
    â”œâ”€â”€ AttributeError
    â”œâ”€â”€ EOFError
    â”œâ”€â”€ ImportError
    â”œâ”€â”€ LookupError
    â”‚   â”œâ”€â”€ IndexError      (list[10] when list has 5 items)
    â”‚   â””â”€â”€ KeyError        (dict['missing_key'])
    â”œâ”€â”€ MemoryError
    â”œâ”€â”€ NameError          (undefined variable)
    â”œâ”€â”€ OSError
    â”‚   â””â”€â”€ FileNotFoundError
    â”œâ”€â”€ RuntimeError
    â”œâ”€â”€ StopIteration
    â”œâ”€â”€ TypeError          (wrong type operation)
    â”œâ”€â”€ ValueError         (right type, wrong value)
    â””â”€â”€ Warning
        </pre>
    </div>
</div>

<h3>ğŸ›¡ï¸ Basic Error Handling</h3>
<div style="background: #e6f2ff; padding: 20px; border-radius: 10px; margin: 15px 0;">
    <h4>try/except Block Structure</h4>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 15px 0;">
        <div>
            <h5>1ï¸âƒ£ Basic Error Handling</h5>
            <pre style="background: white; padding: 15px; border-radius: 5px;">
# Without error handling
print("Before risky code")
result = 10 / 0  # This will crash!
print("After risky code")  # Never reaches here

# With error handling
print(" === WITH TRY/EXCEPT ===")
try:
    print("Before risky code")
    result = 10 / 0
    print(f"Result: {result}")
except:
    print("Oops! Something went wrong!")
print("After try/except - program continues!")

# Example: Safe division
def safe_divide(a, b):
    try:
        result = a / b
        return result
    except:
        return "Error: Cannot divide by zero!"

print(f"10 / 2 = {safe_divide(10, 2)}")
print(f"10 / 0 = {safe_divide(10, 0)}")
            </pre>
        </div>
        <div>
            <h5>2ï¸âƒ£ Multiple Exception Types</h5>
            <pre style="background: white; padding: 15px; border-radius: 5px;">
# Handling specific exceptions
def process_user_input():
    try:
        age = int(input("Enter your age: "))
        print(f"Next year you'll be {age + 1}")
        
        # Simulate other potential errors
        numbers = [1, 2, 3]
        print(f"Third number is {numbers[2]}")
        
        data = {"name": "Alex"}
        print(f"Name: {data['name']}")
        
    except ValueError:
        print("Please enter a valid number!")
    except IndexError:
        print("List index out of range!")
    except KeyError:
        print("Dictionary key not found!")
    except Exception as e:
        print(f"Unexpected error: {type(e).__name__} - {e}")

# Test different errors
print("Test 1 - Valid input:")
process_user_input()  # Try entering valid age

print(" Test 2 - Invalid number:")
process_user_input()  # Try entering "abc"

# Multiple exceptions in one line
def safe_operation(x, y):
    try:
        result = x / y
        return result
    except (ZeroDivisionError, TypeError) as e:
        return f"Error occurred: {type(e).__name__}"
            </pre>
        </div>
    </div>
</div>

<h3>ğŸ”§ Advanced Error Handling</h3>
<div style="background: #fff0e6; padding: 20px; border-radius: 10px; margin: 15px 0;">
    <h4>Using else, finally, and Custom Exceptions</h4>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin: 15px 0;">
        <div>
            <h5>âœ… else Clause</h5>
            <pre style="background: white; padding: 10px; border-radius: 5px;">
# else runs if NO exception occurred
def read_file_safely(filename):
    try:
        file = open(filename, 'r')
        content = file.read()
    except FileNotFoundError:
        print(f"Error: File '{filename}' not found!")
        return None
    except PermissionError:
        print("Error: No permission to read file!")
        return None
    else:
        print("File read successfully!")
        return content
    finally:
        print("Cleanup: Closing file if open...")
        # File closing logic would go here

# Test the function
result = read_file_safely("data.txt")
if result:
    print(f"Content: {result[:50]}...")

# Another example
def calculate_average(numbers):
    try:
        total = sum(numbers)
        count = len(numbers)
    except TypeError:
        print("Error: Input must be a list of numbers!")
        return None
    except ZeroDivisionError:
        print("Error: Cannot calculate average of empty list!")
        return None
    else:
        average = total / count
        return average
    finally:
        print("Calculation complete.")
            </pre>
        </div>
        <div>
            <h5>ğŸ finally Clause</h5>
            <pre style="background: white; padding: 10px; border-radius: 5px;">
# finally ALWAYS runs (cleanup code)
def process_data(data):
    resource = None
    try:
        print("Allocating resource...")
        resource = "Database Connection"  # Simulated resource
        print(f"Processing with {resource}")
        
        if not data:
            raise ValueError("No data provided!")
        
        result = len(data) * 2  # Some processing
        return result
        
    except ValueError as e:
        print(f"Processing error: {e}")
        return None
        
    finally:
        # This always runs, even if return or break happens
        if resource:
            print(f"Cleaning up: Closing {resource}")
        print("Cleanup complete!")

# Test with different scenarios
print("Test 1 - Normal execution:")
result1 = process_data([1, 2, 3])
print(f"Result: {result1}")

print(" Test 2 - Error case:")
result2 = process_data([])
print(f"Result: {result2}")

print(" Test 3 - Early return in try:")
def test_finally():
    try:
        print("In try block")
        return "Returning from try"
    finally:
        print("In finally block - runs before return!")

print(test_finally())
            </pre>
        </div>
        <div>
            <h5>ğŸ­ Custom Exceptions</h5>
            <pre style="background: white; padding: 10px; border-radius: 5px;">
# Creating custom exception classes
class InvalidAgeError(Exception):
    """Raised when age is invalid"""
    pass

class TooYoungError(InvalidAgeError):
    """Raised when age is too young"""
    def __init__(self, age, min_age):
        self.age = age
        self.min_age = min_age
        self.message = f"Age {age} is too young. Minimum age is {min_age}"
        super().__init__(self.message)

class TooOldError(InvalidAgeError):
    """Raised when age is too old"""
    def __init__(self, age, max_age):
        self.age = age
        self.max_age = max_age
        self.message = f"Age {age} is too old. Maximum age is {max_age}"
        super().__init__(self.message)

def check_age(age):
    """Check if age is valid for amusement park"""
    MIN_AGE = 5
    MAX_AGE = 100
    
    if age < MIN_AGE:
        raise TooYoungError(age, MIN_AGE)
    elif age > MAX_AGE:
        raise TooOldError(age, MAX_AGE)
    elif age < 0:
        raise ValueError("Age cannot be negative!")
    else:
        return True

# Test custom exceptions
test_ages = [3, 25, 120, -5]

for age in test_ages:
    try:
        if check_age(age):
            print(f"Age {age}: Valid âœ“")
    except TooYoungError as e:
        print(f"Age {age}: {e}")
    except TooOldError as e:
        print(f"Age {age}: {e}")
    except ValueError as e:
        print(f"Age {age}: {e}")
            </pre>
        </div>
        <div>
            <h5>ğŸš€ Raising Exceptions</h5>
            <pre style="background: white; padding: 10px; border-radius: 5px;">
# Raising exceptions intentionally
def withdraw_money(balance, amount):
    """Withdraw money with validation"""
    if amount <= 0:
        raise ValueError("Amount must be positive!")
    
    if amount > balance:
        raise InsufficientFundsError(balance, amount)
    
    if amount > 1000:
        raise TransactionLimitError("Daily limit exceeded!")
    
    balance -= amount
    return balance

class InsufficientFundsError(Exception):
    def __init__(self, balance, amount):
        self.balance = balance
        self.amount = amount
        super().__init__(f"Insufficient funds: \${balance} available, tried to withdraw \${amount}")

class TransactionLimitError(Exception):
    pass

# Test the function
def process_withdrawal(balance, amount):
    try:
        new_balance = withdraw_money(balance, amount)
        print(f"Withdrawal successful! New balance: \${new_balance}")
        return new_balance
    except ValueError as e:
        print(f"Error: {e}")
    except InsufficientFundsError as e:
        print(f"Error: {e}")
    except TransactionLimitError as e:
        print(f"Error: {e}")
    except Exception as e:
        print(f"Unexpected error: {e}")

# Test cases
print("Test 1 - Valid withdrawal:")
process_withdrawal(1000, 500)

print(" Test 2 - Insufficient funds:")
process_withdrawal(100, 500)

print(" Test 3 - Negative amount:")
process_withdrawal(1000, -50)

print(" Test 4 - Exceeds limit:")
process_withdrawal(5000, 2000)
            </pre>
        </div>
    </div>
</div>

<h3>ğŸ§® Today's Main Project: Safe Calculator ğŸ§®</h3>
<div style="background: #e8f5e8; padding: 20px; border-radius: 10px; margin: 15px 0;">
    <h4>ğŸ›¡ï¸ Build an Unbreakable Calculator</h4>
    <p><b>Goal:</b> Create a calculator that handles all possible user errors gracefully.</p>
    
    <div style="background: white; padding: 15px; border-radius: 8px; margin: 15px 0; border: 2px solid #4CAF50;">
        <h4>ğŸ“‹ Error Scenarios to Handle:</h4>
        <ol>
            <li>Division by zero</li>
            <li>Invalid mathematical expressions</li>
            <li>Non-numeric inputs</li>
            <li>Memory overflow (very large numbers)</li>
            <li>Invalid operations (sqrt of negative numbers)</li>
            <li>File I/O errors (for saving calculations)</li>
            <li>Network errors (for currency conversion)</li>
        </ol>
    </div>
    
    <div style="background: #2d2d2d; color: #f8f8f2; padding: 20px; border-radius: 10px; margin: 15px 0;">
        <h4 style="color: #66d9ef;">ğŸ’¡ Starter Code Template</h4>
        <pre style="color: #f8f8f2;">
# ============ SAFE CALCULATOR ============

class CalculatorError(Exception):
    """Base exception for calculator errors"""
    pass

class DivisionByZeroError(CalculatorError):
    """Raised when attempting division by zero"""
    def __init__(self):
        super().__init__("Cannot divide by zero!")

class InvalidExpressionError(CalculatorError):
    """Raised when expression cannot be evaluated"""
    def __init__(self, expression):
        super().__init__(f"Cannot evaluate expression: '{expression}'")

class MemoryError(CalculatorError):
    """Raised when calculation exceeds limits"""
    def __init__(self, value):
        super().__init__(f"Value too large: {value}")

class Calculator:
    def __init__(self):
        self.memory = 0
        self.history = []
    
    def add(self, a, b):
        """Safely add two numbers"""
        try:
            a = self._validate_number(a)
            b = self._validate_number(b)
            result = a + b
            self._check_limits(result)
            self._record_operation(f"{a} + {b}", result)
            return result
        except CalculatorError as e:
            raise
        except Exception as e:
            raise CalculatorError(f"Addition error: {e}")
    
    def subtract(self, a, b):
        """Safely subtract two numbers"""
        try:
            a = self._validate_number(a)
            b = self._validate_number(b)
            result = a - b
            self._check_limits(result)
            self._record_operation(f"{a} - {b}", result)
            return result
        except CalculatorError as e:
            raise
        except Exception as e:
            raise CalculatorError(f"Subtraction error: {e}")
    
    def multiply(self, a, b):
        """Safely multiply two numbers"""
        try:
            a = self._validate_number(a)
            b = self._validate_number(b)
            result = a * b
            self._check_limits(result)
            self._record_operation(f"{a} Ã— {b}", result)
            return result
        except CalculatorError as e:
            raise
        except Exception as e:
            raise CalculatorError(f"Multiplication error: {e}")
    
    def divide(self, a, b):
        """Safely divide two numbers"""
        try:
            a = self._validate_number(a)
            b = self._validate_number(b)
            
            if b == 0:
                raise DivisionByZeroError()
            
            result = a / b
            self._check_limits(result)
            self._record_operation(f"{a} Ã· {b}", result)
            return result
        except CalculatorError as e:
            raise
        except Exception as e:
            raise CalculatorError(f"Division error: {e}")
    
    def power(self, base, exponent):
        """Safely calculate power"""
        try:
            base = self._validate_number(base)
            exponent = self._validate_number(exponent)
            
            if base == 0 and exponent < 0:
                raise CalculatorError("0 raised to negative power is undefined")
            
            result = base ** exponent
            self._check_limits(result)
            self._record_operation(f"{base}^{exponent}", result)
            return result
        except CalculatorError as e:
            raise
        except OverflowError:
            raise MemoryError(f"{base}^{exponent}")
        except Exception as e:
            raise CalculatorError(f"Power calculation error: {e}")
    
    def square_root(self, number):
        """Safely calculate square root"""
        try:
            number = self._validate_number(number)
            
            if number < 0:
                raise CalculatorError("Cannot calculate square root of negative number")
            
            result = number ** 0.5
            self._check_limits(result)
            self._record_operation(f"âˆš{number}", result)
            return result
        except CalculatorError as e:
            raise
        except Exception as e:
            raise CalculatorError(f"Square root error: {e}")
    
    def _validate_number(self, value):
        """Convert and validate input as number"""
        try:
            # Try to convert to float
            if isinstance(value, str):
                value = float(value)
            elif isinstance(value, (int, float)):
                return value
            else:
                raise ValueError(f"Invalid type: {type(value)}")
        except (ValueError, TypeError):
            raise CalculatorError(f"Invalid number: {value}")
    
    def _check_limits(self, value):
        """Check if value is within safe limits"""
        MAX_VALUE = 1e100  # Very large number
        MIN_VALUE = -1e100
        
        if value > MAX_VALUE:
            raise MemoryError(value)
        elif value < MIN_VALUE:
            raise MemoryError(value)
    
    def _record_operation(self, expression, result):
        """Record operation in history"""
        self.history.append({
            "expression": expression,
            "result": result,
            "timestamp": "2024-01-01"  # Would use datetime in real app
        })
    
    def evaluate_expression(self, expression):
        """Safely evaluate a mathematical expression"""
        try:
            # Very basic expression evaluation
            # In real app, you'd use eval() with precautions or a parser
            result = eval(expression, {"__builtins__": {}})
            self._check_limits(result)
            self._record_operation(expression, result)
            return result
        except ZeroDivisionError:
            raise DivisionByZeroError()
        except (SyntaxError, NameError, TypeError):
            raise InvalidExpressionError(expression)
        except Exception as e:
            raise CalculatorError(f"Expression evaluation failed: {e}")

# User interface
def calculator_menu():
    calc = Calculator()
    
    while True:
        print("""
        ===== SAFE CALCULATOR =====
        1. Add
        2. Subtract
        3. Multiply
        4. Divide
        5. Power
        6. Square Root
        7. Evaluate Expression
        8. Show History
        9. Clear Memory
        0. Exit
        ===========================
        """)
        
        choice = input("Enter choice (0-9): ")
        
        if choice == "0":
            print("Goodbye! ğŸ‘‹")
            break
        
        try:
            if choice in ["1", "2", "3", "4", "5"]:
                a = input("Enter first number: ")
                b = input("Enter second number: ")
                
                if choice == "1":
                    result = calc.add(a, b)
                elif choice == "2":
                    result = calc.subtract(a, b)
                elif choice == "3":
                    result = calc.multiply(a, b)
                elif choice == "4":
                    result = calc.divide(a, b)
                elif choice == "5":
                    result = calc.power(a, b)
                
                print(f"Result: {result}")
                
            elif choice == "6":
                num = input("Enter number: ")
                result = calc.square_root(num)
                print(f"âˆš{num} = {result}")
                
            elif choice == "7":
                expr = input("Enter expression (e.g., 2+3*4): ")
                result = calc.evaluate_expression(expr)
                print(f"{expr} = {result}")
                
            elif choice == "8":
                print("=== CALCULATION HISTORY ===")
                for i, entry in enumerate(calc.history[-10:], 1):
                    print(f"{i}. {entry['expression']} = {entry['result']}")
                    
            elif choice == "9":
                calc.memory = 0
                print("Memory cleared!")
                
        except CalculatorError as e:
            print(f"âŒ Calculator Error: {e}")
        except Exception as e:
            print(f"ğŸ’€ Unexpected Error: {e}")
        finally:
            input("Press Enter to continue...")

# Run the calculator
if __name__ == "__main__":
    calculator_menu()
        </pre>
    </div>
    
    <h5>ğŸŒŸ Challenge Tasks (Extra Credit!):</h5>
    <ul>
        <li>Add trigonometric functions (sin, cos, tan) with degree/radian support</li>
        <li>Implement memory functions (M+, M-, MR, MC)</li>
        <li>Add unit conversion capabilities</li>
        <li>Save calculation history to a file</li>
        <li>Add scientific notation for very large/small numbers</li>
        <li>Create a graphical interface using tkinter</li>
        <li>Add undo/redo functionality</li>
    </ul>
</div>

<h3>ğŸ® Interactive Practice Time!</h3>
<div style="background: #e6f2ff; padding: 20px; border-radius: 10px; margin: 15px 0;">
    <h4>ğŸ”„ Activity: File Processing with Error Handling (30 minutes)</h4>
    <p>Create a robust file processing system that handles all possible file errors:</p>
    
    <pre style="background: #f5f5f5; padding: 15px; border-radius: 5px;">
# File Processor with Comprehensive Error Handling
class FileProcessor:
    """Process files with complete error handling"""
    
    def __init__(self):
        self.processed_files = []
        self.failed_files = []
    
    def process_file(self, filename, operation="read"):
        """Process a file with error handling"""
        file = None
        try:
            print(f" Processing '{filename}'...")
            
            # Try to open the file
            if operation == "read":
                file = open(filename, 'r')
                content = file.read()
                print(f"Successfully read {len(content)} characters")
                return content
                
            elif operation == "write":
                file = open(filename, 'w')
                data = "Sample data to write"
                file.write(data)
                print(f"Successfully wrote to file")
                return True
                
            elif operation == "append":
                file = open(filename, 'a')
                file.write(" Appended data")
                print("Successfully appended to file")
                return True
                
            else:
                raise ValueError(f"Invalid operation: {operation}")
        
        except FileNotFoundError:
            print(f"âŒ Error: File '{filename}' not found!")
            self.failed_files.append({"file": filename, "error": "File not found"})
            return None
            
        except PermissionError:
            print(f"âŒ Error: No permission to access '{filename}'!")
            self.failed_files.append({"file": filename, "error": "Permission denied"})
            return None
            
        except IsADirectoryError:
            print(f"âŒ Error: '{filename}' is a directory, not a file!")
            self.failed_files.append({"file": filename, "error": "Is a directory"})
            return None
            
        except UnicodeDecodeError:
            print(f"âŒ Error: Cannot decode file '{filename}' (binary file?)")
            self.failed_files.append({"file": filename, "error": "Decoding error"})
            return None
            
        except ValueError as e:
            print(f"âŒ Error: {e}")
            self.failed_files.append({"file": filename, "error": str(e)})
            return None
            
        except Exception as e:
            print(f"âŒ Unexpected error: {type(e).__name__} - {e}")
            self.failed_files.append({"file": filename, "error": str(e)})
            return None
            
        finally:
            # Always try to close the file if it was opened
            if file:
                try:
                    file.close()
                    print("âœ“ File closed successfully")
                except Exception as e:
                    print(f"âš ï¸ Warning: Error closing file: {e}")
            
            print("Processing complete for this file")
    
    def batch_process(self, file_list, operation="read"):
        """Process multiple files"""
        results = []
        
        for filename in file_list:
            result = self.process_file(filename, operation)
            if result is not None:
                self.processed_files.append(filename)
                results.append(result)
        
        return results
    
    def show_report(self):
        """Show processing report"""
        print(" " + "="*50)
        print("PROCESSING REPORT")
        print("="*50)
        print(f"Files processed successfully: {len(self.processed_files)}")
        print(f"Files failed: {len(self.failed_files)}")
        
        if self.failed_files:
            print(" Failed files:")
            for failed in self.failed_files:
                print(f"  - {failed['file']}: {failed['error']}")

# Test the file processor
processor = FileProcessor()

# Test with various files
test_files = [
    "existing_file.txt",      # Should work if file exists
    "nonexistent_file.txt",   # FileNotFoundError
    "/root/protected.txt",    # PermissionError (on Unix)
    ".",                      # IsADirectoryError
    "binary_file.bin",        # UnicodeDecodeError (if text mode)
]

print("=== STARTING BATCH PROCESSING ===")
results = processor.batch_process(test_files)
processor.show_report()
    </pre>
</div>

<h3>ğŸ“š Homework Assignment</h3>
<div style="background: #f0e6ff; padding: 20px; border-radius: 10px; margin: 15px 0;">
    <h4>Build an "Error-Resistant Student Management System" ğŸ“</h4>
    
    <div style="background: white; padding: 15px; border-radius: 8px; margin: 10px 0;">
        <h5>System Features to Implement:</h5>
        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px;">
            <div>
                <h6>ğŸ“ Student Operations</h6>
                <ul>
                    <li>Add new students</li>
                    <li>Update student information</li>
                    <li>Delete students</li>
                    <li>Search students</li>
                </ul>
            </div>
            <div>
                <h6>ğŸ“Š Grade Management</h6>
                <ul>
                    <li>Add grades</li>
                    <li>Calculate averages</li>
                    <li>Generate report cards</li>
                    <li>Check for missing grades</li>
                </ul>
            </div>
            <div>
                <h6>ğŸ’¾ Data Persistence</h6>
                <ul>
                    <li>Save to CSV files</li>
                    <li>Load from CSV files</li>
                    <li>Export reports</li>
                    <li>Backup/restore data</li>
                </ul>
            </div>
        </div>
    </div>
    
    <h5>Error Scenarios to Handle:</h5>
    <ul>
        <li><b>Input Validation:</b> Invalid names, ages, grades</li>
        <li><b>File Operations:</b> Missing files, permission errors, corrupted data</li>
        <li><b>Data Integrity:</b> Duplicate student IDs, missing required fields</li>
        <li><b>Calculation Errors:</b> Division by zero, invalid grade ranges</li>
        <li><b>Memory Issues:</b> Very large datasets</li>
        <li><b>Network Errors:</b> If adding cloud sync feature</li>
    </ul>
    
    <h5>Requirements:</h5>
    <ul>
        <li>Create custom exception classes for different error types</li>
        <li>Use try/except/else/finally blocks appropriately</li>
        <li>Implement comprehensive input validation</li>
        <li>Create a logging system to record errors</li>
        <li>Provide user-friendly error messages</li>
        <li>Implement data recovery mechanisms</li>
        <li>Test with both valid and invalid inputs</li>
    </ul>
    
    <div style="background: #f5f5f5; padding: 15px; border-radius: 5px; margin-top: 15px;">
        <h5>ğŸ’¡ Sample Custom Exceptions:</h5>
        <pre style="background: white; padding: 10px; border-radius: 5px;">
class StudentManagementError(Exception):
    """Base exception for student management system"""
    pass

class InvalidStudentError(StudentManagementError):
    """Raised when student data is invalid"""
    pass

class DuplicateStudentError(StudentManagementError):
    """Raised when student ID already exists"""
    pass

class GradeRangeError(StudentManagementError):
    """Raised when grade is outside valid range (0-100)"""
    pass

class FileOperationError(StudentManagementError):
    """Raised when file operations fail"""
    pass

class DataCorruptionError(StudentManagementError):
    """Raised when data file is corrupted"""
    pass
        </pre>
    </div>
    
    <h5>Bonus Challenges:</h5>
    <ul>
        <li>Add audit logging for all operations</li>
        <li>Implement data validation using regular expressions</li>
        <li>Create a data recovery tool for corrupted files</li>
        <li>Add email notification for critical errors</li>
        <li>Implement retry logic for file operations</li>
        <li>Create a web interface with error pages</li>
    </ul>
</div>

<h3>ğŸ“ Key Learning Points</h3>
<div style="background: #f0f8ff; padding: 20px; border-radius: 10px; margin: 15px 0;">
    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px;">
        <div style="background: white; padding: 15px; border-radius: 8px; border-left: 5px solid #4A90E2;">
            <h5>âœ… What We Learned:</h5>
            <ul>
                <li><code>try</code>/<code>except</code> blocks catch and handle exceptions</li>
                <li>Handle specific exceptions for better error messages</li>
                <li><code>else</code> runs when no exception occurs</li>
                <li><code>finally</code> always runs (great for cleanup)</li>
                <li><code>raise</code> creates new exceptions</li>
                <li>Custom exceptions make error handling more descriptive</li>
            </ul>
        </div>
        <div style="background: white; padding: 15px; border-radius: 8px; border-left: 5px solid #E24A4A;">
            <h5>ğŸ’¡ Error Handling Best Practices:</h5>
            <ul>
                <li><b>Be specific:</b> Catch specific exceptions, not all</li>
                <li><b>Don't ignore:</b> Never use empty except blocks</li>
                <li><b>Clean up:</b> Use finally for resource cleanup</li>
                <li><b>Log errors:</b> Record what went wrong for debugging</li>
                <li><b>User-friendly:</b> Show helpful messages to users</li>
                <li><b>Fail gracefully:</b> Don't crash, recover when possible</li>
            </ul>
        </div>
    </div>
</div>

<div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px; border-radius: 10px; margin: 15px 0; text-align: center;">
    <h3>ğŸ¯ Error Handling Strategy</h3>
    <div style="display: flex; justify-content: space-around; margin: 15px 0;">
        <div>
            <div style="font-size: 2em;">ğŸ›¡ï¸</div>
            <p><b>Prevent</b></p>
            <p>Validate inputs first</p>
        </div>
        <div>
            <div style="font-size: 2em;">ğŸš¨</div>
            <p><b>Catch</b></p>
            <p>Handle expected errors</p>
        </div>
        <div>
            <div style="font-size: 2em;">ğŸ’¬</div>
            <p><b>Inform</b></p>
            <p>Show helpful messages</p>
        </div>
        <div>
            <div style="font-size: 2em;">ğŸ”„</div>
            <p><b>Recover</b></p>
            <p>Continue if possible</p>
        </div>
    </div>
</div>

<h3>ğŸ”— Resources for Practice</h3>
<ul>
    <li><a href="https://www.w3schools.com/python/python_try_except.asp" target="_blank">W3Schools Python Try Except</a></li>
    <li><a href="https://realpython.com/python-exceptions/" target="_blank">Real Python Exceptions Guide</a></li>
    <li><a href="https://docs.python.org/3/tutorial/errors.html" target="_blank">Python Official Error Tutorial</a></li>
</ul>

<div style="background: #e8f5e8; padding: 20px; border-radius: 10px; margin: 20px 0; text-align: center;">
    <h3>ğŸŒŸ You're Building Professional Software! ğŸŒŸ</h3>
    <p>Error handling separates amateur code from professional software. You're learning real-world skills!</p>
    <p><i>"A program that never crashes is like a car that never breaks down - both require good error handling!"</i></p>
    
    <div style="margin-top: 15px; display: flex; justify-content: center; gap: 20px;">
        <div style="padding: 10px 20px; background: #4CAF50; color: white; border-radius: 5px;">
            ğŸ›¡ï¸ Bulletproof Code
        </div>
        <div style="padding: 10px 20px; background: #2196F3; color: white; border-radius: 5px;">
            ğŸ˜Š Happy Users
        </div>
        <div style="padding: 10px 20px; background: #FF9800; color: white; border-radius: 5px;">
            ğŸ”§ Easy Maintenance
        </div>
    </div>
</div>
`
            },
            "2-8": {
                "icon": "fa-boxes",
                "title": "Month 2 Project - Inventory Manager",
                "html": `<h1>Week 8, Month 2: Month 2 Project - Inventory Manager ğŸ“¦</h1>
<p>Today we'll build a complete inventory management system for a shop, tracking items, stock levels, and values!</p>

<div class="analogy-box">
    <h3>ğŸª The Supermarket Analogy</h3>
    <div style="display: flex; gap: 20px; margin: 15px 0;">
        <div style="flex: 1; background: #e6f2ff; padding: 15px; border-radius: 8px;">
            <h4>ğŸ“¦ Inventory Items = Products on Shelves</h4>
            <p><b>Item ID:</b> Unique barcode<br>
            <b>Name:</b> Product name<br>
            <b>Quantity:</b> How many in stock<br>
            <b>Price:</b> Cost per item<br>
            <b>Category:</b> Where it belongs</p>
        </div>
        <div style="flex: 1; background: #fff0e6; padding: 15px; border-radius: 8px;">
            <h4>ğŸ“Š Inventory Management = Store Operations</h4>
            <ul>
                <li><b>Restocking:</b> Adding new items</li>
                <li><b>Selling:</b> Reducing quantities</li>
                <li><b>Tracking:</b> Watching stock levels</li>
                <li><b>Valuing:</b> Calculating total worth</li>
                <li><b>Reporting:</b> Making decisions</li>
            </ul>
        </div>
    </div>
</div>

<h3>ğŸ¯ Project Requirements:</h3>
<div style="background: #fff5e6; padding: 20px; border-radius: 10px; margin: 15px 0;">
    <h4>ğŸ“‹ Core Features (Must Have):</h4>
    <ol>
        <li><b>Add Items:</b> Add new products to inventory</li>
        <li><b>Remove Items:</b> Delete products from inventory</li>
        <li><b>Update Quantities:</b> Change stock levels</li>
        <li><b>View All Items:</b> Show complete inventory</li>
        <li><b>Check Low Stock:</b> Identify items needing restock</li>
        <li><b>Calculate Total Value:</b> Sum of all inventory worth</li>
        <li><b>Search Items:</b> Find products by name or category</li>
        <li><b>Save/Load Data:</b> Persistent storage</li>
    </ol>
    
    <h4>ğŸŒŸ Advanced Features (Extra Credit):</h4>
    <ul>
        <li>Barcode/QR code generation</li>
        <li>Sales tracking and reporting</li>
        <li>Supplier management</li>
        <li>Purchase order generation</li>
        <li>Expiry date tracking</li>
        <li>Multiple location support</li>
        <li>Graphical reports and charts</li>
    </ul>
</div>

<h3>ğŸ’¡ Project Architecture</h3>
<div style="background: #e6f2ff; padding: 20px; border-radius: 10px; margin: 15px 0;">
    <h4>Designing the Inventory System</h4>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 15px 0;">
        <div>
            <h5>ğŸ“ Data Structure Design</h5>
            <pre style="background: white; padding: 15px; border-radius: 5px;">
# Inventory item structure
item_template = {
    "item_id": "PROD001",          # Unique identifier
    "name": "Laptop",              # Product name
    "description": "Gaming laptop with RTX 4090",
    "category": "Electronics",     # Grouping
    "quantity": 10,                # Current stock
    "price": 1299.99,              # Cost per unit
    "cost": 999.99,                # Purchase price
    "reorder_point": 5,            # When to restock
    "supplier": "TechCorp Inc.",   # Who supplies it
    "location": "Aisle 3, Shelf 2",# Where stored
    "last_updated": "2024-01-15"   # When last modified
}

# Complete inventory
inventory = {
    "PROD001": item_template,
    "PROD002": {
        "item_id": "PROD002",
        "name": "Wireless Mouse",
        "category": "Electronics",
        "quantity": 50,
        "price": 29.99,
        "cost": 15.00,
        "reorder_point": 20,
        "supplier": "Peripherals Co."
    },
    # More items...
}

# Alternative: List of dictionaries
inventory_list = [
    item_template,
    # More items...
]
            </pre>
        </div>
        <div>
            <h5>ğŸ”„ System Flow</h5>
            <div style="background: white; padding: 15px; border-radius: 8px;">
                <ol>
                    <li><b>Start Program</b> â†’ Load existing data</li>
                    <li><b>Show Main Menu</b> â†’ Display options</li>
                    <li><b>Process Choice</b> â†’ Call appropriate function</li>
                    <li><b>Validate Input</b> â†’ Check for errors</li>
                    <li><b>Update Data</b> â†’ Modify inventory</li>
                    <li><b>Save Changes</b> â†’ Write to file</li>
                    <li><b>Return to Menu</b> â†’ Continue or exit</li>
                </ol>
                
                <div style="margin-top: 15px; padding: 10px; background: #f0f8ff; border-radius: 5px;">
                    <h6>ğŸ’¡ Key Functions Needed:</h6>
                    <ul>
                        <li><code>add_item()</code> - Add new product</li>
                        <li><code>remove_item()</code> - Delete product</li>
                        <li><code>update_quantity()</code> - Change stock</li>
                        <li><code>view_inventory()</code> - Show all items</li>
                        <li><code>check_low_stock()</code> - Find items to restock</li>
                        <li><code>calculate_total_value()</code> - Sum inventory worth</li>
                        <li><code>search_items()</code> - Find by criteria</li>
                        <li><code>save_inventory()</code> - Save to file</li>
                        <li><code>load_inventory()</code> - Load from file</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>

<h3>ğŸ—ï¸ Building the Inventory Manager</h3>
<div style="background: #f0e6ff; padding: 20px; border-radius: 10px; margin: 15px 0;">
    <h4>Step-by-Step Implementation</h4>
    
    <div style="background: #2d2d2d; color: #f8f8f2; padding: 20px; border-radius: 10px; margin: 15px 0;">
        <h4 style="color: #66d9ef;">ğŸ’¡ Complete Starter Template</h4>
        <pre style="color: #f8f8f2;">
# ============ INVENTORY MANAGER ============

import json
import os
from datetime import datetime

# Custom Exceptions
class InventoryError(Exception):
    """Base exception for inventory errors"""
    pass

class ItemNotFoundError(InventoryError):
    """Raised when item is not found in inventory"""
    pass

class InvalidQuantityError(InventoryError):
    """Raised when quantity is invalid"""
    pass

class DuplicateItemError(InventoryError):
    """Raised when item ID already exists"""
    pass

# Main Inventory Class
class InventoryManager:
    def __init__(self, data_file="inventory.json"):
        self.data_file = data_file
        self.inventory = {}
        self.load_inventory()
    
    def load_inventory(self):
        """Load inventory from JSON file"""
        try:
            if os.path.exists(self.data_file):
                with open(self.data_file, 'r') as f:
                    self.inventory = json.load(f)
                print(f"âœ“ Loaded {len(self.inventory)} items from {self.data_file}")
            else:
                print("â„¹ï¸ No existing inventory found. Starting fresh.")
                self.inventory = {}
        except json.JSONDecodeError:
            print("âš ï¸ Warning: Inventory file corrupted. Starting fresh.")
            self.inventory = {}
        except Exception as e:
            print(f"âŒ Error loading inventory: {e}")
            self.inventory = {}
    
    def save_inventory(self):
        """Save inventory to JSON file"""
        try:
            with open(self.data_file, 'w') as f:
                json.dump(self.inventory, f, indent=2)
            print(f"âœ“ Inventory saved to {self.data_file}")
            return True
        except Exception as e:
            print(f"âŒ Error saving inventory: {e}")
            return False
    
    def generate_item_id(self, category):
        """Generate unique item ID based on category"""
        prefix = category[:3].upper()
        existing_ids = [id for id in self.inventory.keys() if id.startswith(prefix)]
        
        if not existing_ids:
            return f"{prefix}001"
        
        # Find highest number
        numbers = []
        for item_id in existing_ids:
            try:
                num = int(item_id[3:])
                numbers.append(num)
            except ValueError:
                continue
        
        if numbers:
            next_num = max(numbers) + 1
        else:
            next_num = 1
        
        return f"{prefix}{next_num:03d}"
    
    def add_item(self):
        """Add new item to inventory"""
        print(" " + "="*50)
        print("ADD NEW ITEM")
        print("="*50)
        
        try:
            # Get item details
            name = input("Item Name: ").strip()
            if not name:
                raise ValueError("Item name cannot be empty")
            
            category = input("Category: ").strip() or "General"
            description = input("Description: ").strip() or "No description"
            
            # Generate unique ID
            item_id = self.generate_item_id(category)
            
            # Check if ID already exists (shouldn't happen with our generator)
            if item_id in self.inventory:
                raise DuplicateItemError(f"Item ID {item_id} already exists")
            
            # Get quantity with validation
            try:
                quantity = int(input("Initial Quantity: ").strip() or "0")
                if quantity < 0:
                    raise InvalidQuantityError("Quantity cannot be negative")
            except ValueError:
                raise InvalidQuantityError("Quantity must be a number")
            
            # Get price with validation
            try:
                price = float(input("Selling Price: $").strip() or "0.0")
                if price < 0:
                    raise ValueError("Price cannot be negative")
            except ValueError:
                raise ValueError("Price must be a number")
            
            # Get cost with validation
            try:
                cost = float(input("Cost Price: $").strip() or "0.0")
                if cost < 0:
                    raise ValueError("Cost cannot be negative")
            except ValueError:
                raise ValueError("Cost must be a number")
            
            # Get reorder point
            try:
                reorder_point = int(input("Reorder Point: ").strip() or "5")
                if reorder_point < 0:
                    reorder_point = 5
            except ValueError:
                reorder_point = 5
            
            # Get supplier
            supplier = input("Supplier: ").strip() or "Unknown"
            
            # Create item dictionary
            item = {
                "item_id": item_id,
                "name": name,
                "description": description,
                "category": category,
                "quantity": quantity,
                "price": price,
                "cost": cost,
                "reorder_point": reorder_point,
                "supplier": supplier,
                "location": "Warehouse",
                "date_added": datetime.now().strftime("%Y-%m-%d"),
                "last_updated": datetime.now().strftime("%Y-%m-%d %H:%M:%S")
            }
            
            # Add to inventory
            self.inventory[item_id] = item
            
            # Save changes
            self.save_inventory()
            
            print(f" âœ… Item added successfully!")
            print(f"   Item ID: {item_id}")
            print(f"   Name: {name}")
            print(f"   Category: {category}")
            print(f"   Quantity: {quantity}")
            print(f"   Value: \${quantity * cost:.2f}")
            
        except (ValueError, InventoryError) as e:
            print(f"âŒ Error: {e}")
        except Exception as e:
            print(f"âŒ Unexpected error: {e}")
    
    def remove_item(self):
        """Remove item from inventory"""
        print(" " + "="*50)
        print("REMOVE ITEM")
        print("="*50)
        
        item_id = input("Enter Item ID to remove: ").strip().upper()
        
        if item_id not in self.inventory:
            print(f"âŒ Item {item_id} not found in inventory")
            return
        
        # Show item details
        item = self.inventory[item_id]
        print(f" Found Item:")
        print(f"  Name: {item['name']}")
        print(f"  Category: {item['category']}")
        print(f"  Quantity: {item['quantity']}")
        print(f"  Value: \${item['quantity'] * item['cost']:.2f}")
        
        # Confirm deletion
        confirm = input(" Are you sure you want to remove this item? (yes/no): ").lower()
        
        if confirm == 'yes':
            del self.inventory[item_id]
            self.save_inventory()
            print(f"âœ… Item {item_id} removed successfully")
        else:
            print("âŒ Removal cancelled")
    
    def update_quantity(self):
        """Update item quantity"""
        print(" " + "="*50)
        print("UPDATE QUANTITY")
        print("="*50)
        
        item_id = input("Enter Item ID: ").strip().upper()
        
        if item_id not in self.inventory:
            print(f"âŒ Item {item_id} not found")
            return
        
        item = self.inventory[item_id]
        print(f" Current Quantity: {item['quantity']}")
        
        try:
            change_type = input("Change type (add/remove/set): ").lower()
            
            if change_type == 'add':
                amount = int(input("Amount to add: "))
                if amount < 0:
                    raise InvalidQuantityError("Cannot add negative amount")
                item['quantity'] += amount
                
            elif change_type == 'remove':
                amount = int(input("Amount to remove: "))
                if amount < 0:
                    raise InvalidQuantityError("Cannot remove negative amount")
                if amount > item['quantity']:
                    raise InvalidQuantityError(f"Cannot remove {amount}, only {item['quantity']} available")
                item['quantity'] -= amount
                
            elif change_type == 'set':
                new_quantity = int(input("New quantity: "))
                if new_quantity < 0:
                    raise InvalidQuantityError("Quantity cannot be negative")
                item['quantity'] = new_quantity
                
            else:
                print("âŒ Invalid change type")
                return
            
            # Update timestamp
            item['last_updated'] = datetime.now().strftime("%Y-%m-%d %H:%M:%S")
            
            self.save_inventory()
            print(f"âœ… Quantity updated to {item['quantity']}")
            
        except (ValueError, InvalidQuantityError) as e:
            print(f"âŒ Error: {e}")
    
    def view_inventory(self, filter_type=None, filter_value=None):
        """View inventory with optional filtering"""
        print(" " + "="*50)
        
        if filter_type and filter_value:
            print(f"INVENTORY - {filter_type.upper()}: {filter_value}")
        else:
            print("COMPLETE INVENTORY")
        
        print("="*50)
        
        if not self.inventory:
            print("Inventory is empty!")
            return
        
        # Filter items if needed
        items_to_show = {}
        if filter_type == 'category':
            items_to_show = {k: v for k, v in self.inventory.items() 
                           if v['category'].lower() == filter_value.lower()}
        elif filter_type == 'low_stock':
            items_to_show = {k: v for k, v in self.inventory.items() 
                           if v['quantity'] <= v['reorder_point']}
        else:
            items_to_show = self.inventory
        
        if not items_to_show:
            print(f"No items found for filter: {filter_type}={filter_value}")
            return
        
        # Display items
        total_value = 0
        total_items = 0
        
        for item_id, item in items_to_show.items():
            item_value = item['quantity'] * item['cost']
            total_value += item_value
            total_items += item['quantity']
            
            stock_status = "ğŸŸ¢"
            if item['quantity'] <= 0:
                stock_status = "ğŸ”´"
            elif item['quantity'] <= item['reorder_point']:
                stock_status = "ğŸŸ¡"
            
            print(f" {stock_status} {item_id}: {item['name']}")
            print(f"   Category: {item['category']}")
            print(f"   Quantity: {item['quantity']} (Reorder at {item['reorder_point']})")
            print(f"   Price: \${item['price']:.2f} | Cost: \${item['cost']:.2f}")
            print(f"   Value: \${item_value:.2f}")
            print(f"   Supplier: {item['supplier']}")
            print(f"   Last Updated: {item['last_updated']}")
        
        # Show summary
        print(" " + "="*50)
        print(f"SUMMARY: {len(items_to_show)} unique items")
        print(f"Total Quantity: {total_items} units")
        print(f"Total Value: \${total_value:.2f}")
        if filter_type == 'low_stock':
            print("âš ï¸ These items need restocking!")
    
    def check_low_stock(self):
        """Check for items that need restocking"""
        low_stock_items = {}
        
        for item_id, item in self.inventory.items():
            if item['quantity'] <= item['reorder_point']:
                low_stock_items[item_id] = item
        
        if not low_stock_items:
            print(" âœ… All items have sufficient stock!")
            return
        
        print(" " + "="*50)
        print("LOW STOCK ALERT")
        print("="*50)
        print("The following items need restocking: ")
        
        for item_id, item in low_stock_items.items():
            needed = item['reorder_point'] * 2 - item['quantity']
            print(f"ğŸŸ¡ {item_id}: {item['name']}")
            print(f"   Current: {item['quantity']} | Reorder Point: {item['reorder_point']}")
            print(f"   Need to order: {needed} more units")
            print()
    
    def calculate_total_value(self):
        """Calculate total value of inventory"""
        total_value = 0
        total_cost = 0
        
        for item in self.inventory.values():
            item_value = item['quantity'] * item['price']
            item_cost = item['quantity'] * item['cost']
            total_value += item_value
            total_cost += item_cost
        
        profit_potential = total_value - total_cost
        
        print(" " + "="*50)
        print("INVENTORY VALUATION")
        print("="*50)
        print(f"Total Items: {len(self.inventory)}")
        print(f"Total Cost Value: \${total_cost:.2f}")
        print(f"Total Selling Value: \${total_value:.2f}")
        print(f"Potential Profit: \${profit_potential:.2f}")
        print(f"Profit Margin: {(profit_potential/total_cost*100 if total_cost > 0 else 0):.1f}%")
    
    def search_items(self):
        """Search for items by various criteria"""
        print(" " + "="*50)
        print("SEARCH INVENTORY")
        print("="*50)
        print("Search by:")
        print("1. Name")
        print("2. Category")
        print("3. Supplier")
        print("4. Price Range")
        print("5. Quantity Range")
        
        choice = input(" Enter search type (1-5): ").strip()
        
        if choice == "1":
            search_term = input("Enter item name to search: ").lower()
            found_items = {k: v for k, v in self.inventory.items() 
                          if search_term in v['name'].lower()}
            
        elif choice == "2":
            category = input("Enter category: ").lower()
            found_items = {k: v for k, v in self.inventory.items() 
                          if category in v['category'].lower()}
            
        elif choice == "3":
            supplier = input("Enter supplier: ").lower()
            found_items = {k: v for k, v in self.inventory.items() 
                          if supplier in v['supplier'].lower()}
            
        elif choice == "4":
            try:
                min_price = float(input("Minimum price: $"))
                max_price = float(input("Maximum price: $"))
                found_items = {k: v for k, v in self.inventory.items() 
                              if min_price <= v['price'] <= max_price}
            except ValueError:
                print("âŒ Invalid price entered")
                return
                
        elif choice == "5":
            try:
                min_qty = int(input("Minimum quantity: "))
                max_qty = int(input("Maximum quantity: "))
                found_items = {k: v for k, v in self.inventory.items() 
                              if min_qty <= v['quantity'] <= max_qty}
            except ValueError:
                print("âŒ Invalid quantity entered")
                return
                
        else:
            print("âŒ Invalid choice")
            return
        
        if not found_items:
            print(" âŒ No items found matching your search")
            return
        
        print(f" âœ… Found {len(found_items)} items:")
        for item_id, item in found_items.items():
            print(f"  {item_id}: {item['name']} (Qty: {item['quantity']}, Price: \${item['price']:.2f})")
    
    def generate_report(self):
        """Generate inventory report"""
        print(" " + "="*50)
        print("GENERATING INVENTORY REPORT")
        print("="*50)
        
        # Calculate statistics
        total_items = len(self.inventory)
        total_quantity = sum(item['quantity'] for item in self.inventory.values())
        total_value = sum(item['quantity'] * item['cost'] for item in self.inventory.values())
        
        # Category breakdown
        categories = {}
        for item in self.inventory.values():
            cat = item['category']
            if cat not in categories:
                categories[cat] = {"count": 0, "value": 0, "quantity": 0}
            categories[cat]["count"] += 1
            categories[cat]["value"] += item['quantity'] * item['cost']
            categories[cat]["quantity"] += item['quantity']
        
        # Low stock items
        low_stock = [item for item in self.inventory.values() 
                    if item['quantity'] <= item['reorder_point']]
        
        # Generate report
        report = f"""
        ==============================
        INVENTORY REPORT
        Generated: {datetime.now().strftime("%Y-%m-%d %H:%M:%S")}
        ==============================
        
        SUMMARY:
        - Total Unique Items: {total_items}
        - Total Quantity: {total_quantity} units
        - Total Inventory Value: \${total_value:.2f}
        
        CATEGORY BREAKDOWN:
        """
        
        for category, stats in categories.items():
            percentage = (stats["value"] / total_value * 100) if total_value > 0 else 0
            report += f"  - {category}: {stats['count']} items, "
            report += f"{stats['quantity']} units, \${stats['value']:.2f} ({percentage:.1f}%) "
        
        if low_stock:
            report += f" LOW STOCK ITEMS ({len(low_stock)} items): "
            for item in low_stock:
                report += f"  - {item['name']}: {item['quantity']} left (reorder at {item['reorder_point']}) "
        else:
            report += " âœ… All items have sufficient stock "
        
        report += " " + "="*30
        
        # Save report to file
        report_file = f"inventory_report_{datetime.now().strftime('%Y%m%d_%H%M%S')}.txt"
        try:
            with open(report_file, 'w') as f:
                f.write(report)
            print(f"âœ… Report saved to {report_file}")
            print(" " + report)
        except Exception as e:
            print(f"âŒ Error saving report: {e}")

# Main Menu
def main():
    manager = InventoryManager()
    
    while True:
        print(" " + "="*50)
        print("INVENTORY MANAGEMENT SYSTEM")
        print("="*50)
        print("1. Add New Item")
        print("2. Remove Item")
        print("3. Update Quantity")
        print("4. View All Items")
        print("5. View by Category")
        print("6. Check Low Stock")
        print("7. Calculate Total Value")
        print("8. Search Items")
        print("9. Generate Report")
        print("10. Save Inventory")
        print("11. Exit")
        print("="*50)
        
        choice = input(" Enter your choice (1-11): ").strip()
        
        if choice == "1":
            manager.add_item()
        elif choice == "2":
            manager.remove_item()
        elif choice == "3":
            manager.update_quantity()
        elif choice == "4":
            manager.view_inventory()
        elif choice == "5":
            category = input("Enter category to view: ")
            manager.view_inventory(filter_type='category', filter_value=category)
        elif choice == "6":
            manager.check_low_stock()
        elif choice == "7":
            manager.calculate_total_value()
        elif choice == "8":
            manager.search_items()
        elif choice == "9":
            manager.generate_report()
        elif choice == "10":
            if manager.save_inventory():
                print("âœ… Inventory saved successfully!")
        elif choice == "11":
            # Ask to save before exit
            save = input(" Save inventory before exiting? (yes/no): ").lower()
            if save == 'yes':
                manager.save_inventory()
            print(" ğŸ‘‹ Goodbye! Thank you for using Inventory Manager.")
            break
        else:
            print("âŒ Invalid choice. Please try again.")
        
        input(" Press Enter to continue...")

# Run the program
if __name__ == "__main__":
    main()
        </pre>
    </div>
</div>

<h3>ğŸ”§ Advanced Features Implementation</h3>
<div style="background: #fff0e6; padding: 20px; border-radius: 10px; margin: 15px 0;">
    <h4>Taking Your Inventory Manager Further</h4>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin: 15px 0;">
        <div>
            <h5>ğŸ“ˆ Sales Tracking</h5>
            <pre style="background: white; padding: 10px; border-radius: 5px;">
class SalesTracker:
    def __init__(self, inventory_manager):
        self.inventory = inventory_manager
        self.sales_history = []
        self.load_sales_history()
    
    def record_sale(self, item_id, quantity, customer_name=""):
        """Record a sale transaction"""
        if item_id not in self.inventory.inventory:
            raise ItemNotFoundError(f"Item {item_id} not found")
        
        item = self.inventory.inventory[item_id]
        
        if quantity > item['quantity']:
            raise InvalidQuantityError(f"Only {item['quantity']} available")
        
        # Calculate sale details
        sale_value = quantity * item['price']
        profit = quantity * (item['price'] - item['cost'])
        
        sale_record = {
            "sale_id": f"SALE{len(self.sales_history) + 1:04d}",
            "item_id": item_id,
            "item_name": item['name'],
            "quantity": quantity,
            "unit_price": item['price'],
            "total_amount": sale_value,
            "profit": profit,
            "customer": customer_name,
            "date": datetime.now().strftime("%Y-%m-%d %H:%M:%S")
        }
        
        # Update inventory
        item['quantity'] -= quantity
        item['last_updated'] = datetime.now().strftime("%Y-%m-%d %H:%M:%S")
        
        # Record sale
        self.sales_history.append(sale_record)
        
        # Save both inventory and sales
        self.inventory.save_inventory()
        self.save_sales_history()
        
        return sale_record
    
    def get_sales_report(self, period="daily"):
        """Generate sales report for specified period"""
        # Filter sales by period
        today = datetime.now().date()
        
        if period == "daily":
            filtered_sales = [s for s in self.sales_history 
                            if datetime.strptime(s['date'], "%Y-%m-%d %H:%M:%S").date() == today]
        elif period == "weekly":
            # Logic for weekly filter
            pass
        # Add more periods...
        
        # Calculate totals
        total_sales = len(filtered_sales)
        total_revenue = sum(s['total_amount'] for s in filtered_sales)
        total_profit = sum(s['profit'] for s in filtered_sales)
        
        return {
            "period": period,
            "total_sales": total_sales,
            "total_revenue": total_revenue,
            "total_profit": total_profit,
            "sales": filtered_sales
        }
            </pre>
        </div>
        <div>
            <h5>ğŸ“Š Barcode Generation</h5>
            <pre style="background: white; padding: 10px; border-radius: 5px;">
# Requires: pip install python-barcode pillow
import barcode
from barcode.writer import ImageWriter
from PIL import Image
import os

class BarcodeManager:
    def __init__(self, inventory_manager):
        self.inventory = inventory_manager
        self.barcode_dir = "barcodes"
        os.makedirs(self.barcode_dir, exist_ok=True)
    
    def generate_barcode(self, item_id):
        """Generate barcode for an item"""
        if item_id not in self.inventory.inventory:
            raise ItemNotFoundError(f"Item {item_id} not found")
        
        # Create barcode
        barcode_class = barcode.get_barcode_class('code128')
        barcode_obj = barcode_class(item_id, writer=ImageWriter())
        
        # Save barcode image
        filename = os.path.join(self.barcode_dir, item_id)
        barcode_obj.save(filename)
        
        print(f"âœ… Barcode generated: {filename}.png")
        return f"{filename}.png"
    
    def generate_all_barcodes(self):
        """Generate barcodes for all items"""
        for item_id in self.inventory.inventory.keys():
            try:
                self.generate_barcode(item_id)
            except Exception as e:
                print(f"âŒ Failed to generate barcode for {item_id}: {e}")
    
    def display_barcode_ascii(self, item_id):
        """Display barcode as ASCII art (simplified)"""
        # Simple ASCII representation
        code = item_id
        
        print(f" Barcode for {item_id}:")
        print("â”Œ" + "â”€" * (len(code)*2 + 2) + "â”")
        
        # Top quiet zone
        print("â”‚" + " " * (len(code)*2 + 2) + "â”‚")
        
        # Barcode pattern (simplified)
        pattern = ""
        for char in code:
            if char.isdigit():
                pattern += "â–ˆâ–ˆ"
            else:
                pattern += "â–“â–“"
        
        print(f"â”‚ {pattern} â”‚")
        
        # Bottom quiet zone
        print("â”‚" + " " * (len(code)*2 + 2) + "â”‚")
        
        # Code text
        print(f"â”‚ {code.center(len(code)*2)} â”‚")
        print("â””" + "â”€" * (len(code)*2 + 2) + "â”˜")
            </pre>
        </div>
        <div>
            <h5>ğŸ“‹ Purchase Order Generation</h5>
            <pre style="background: white; padding: 10px; border-radius: 5px;">
class PurchaseOrderManager:
    def __init__(self, inventory_manager):
        self.inventory = inventory_manager
        self.purchase_orders = []
    
    def generate_purchase_order(self, supplier=None):
        """Generate purchase order for low stock items"""
        # Find items needing restock
        items_to_order = {}
        
        for item_id, item in self.inventory.inventory.items():
            if supplier and item['supplier'] != supplier:
                continue
            
            if item['quantity'] <= item['reorder_point']:
                order_quantity = item['reorder_point'] * 2 - item['quantity']
                items_to_order[item_id] = {
                    **item,
                    'order_quantity': order_quantity,
                    'total_cost': order_quantity * item['cost']
                }
        
        if not items_to_order:
            print("âœ… No items need ordering at this time")
            return None
        
        # Create purchase order
        po_number = f"PO{len(self.purchase_orders) + 1:04d}"
        total_cost = sum(item['total_cost'] for item in items_to_order.values())
        
        purchase_order = {
            "po_number": po_number,
            "date": datetime.now().strftime("%Y-%m-%d"),
            "supplier": supplier or "Multiple Suppliers",
            "items": items_to_order,
            "total_cost": total_cost,
            "status": "Pending"
        }
        
        self.purchase_orders.append(purchase_order)
        
        # Print purchase order
        self.print_purchase_order(purchase_order)
        
        return purchase_order
    
    def print_purchase_order(self, purchase_order):
        """Print purchase order in readable format"""
        print(" " + "="*60)
        print("PURCHASE ORDER")
        print("="*60)
        print(f"PO Number: {purchase_order['po_number']}")
        print(f"Date: {purchase_order['date']}")
        print(f"Supplier: {purchase_order['supplier']}")
        print("="*60)
        
        print(f"{'Item ID':<10} {'Item Name':<20} {'Qty':>6} {'Cost':>10} {'Total':>12}")
        print("-"*60)
        
        for item_id, item in purchase_order['items'].items():
            print(f"{item_id:<10} {item['name'][:20]:<20} "
                  f"{item['order_quantity']:>6} "
                  f"\${item['cost']:>9.2f} "
                  f"\${item['total_cost']:>11.2f}")
        
        print("="*60)
        print(f"{'TOTAL COST:':<48} \${purchase_order['total_cost']:>11.2f}")
        print(f"Status: {purchase_order['status']}")
            </pre>
        </div>
        <div>
            <h5>ğŸ“… Expiry Date Tracking</h5>
            <pre style="background: white; padding: 10px; border-radius: 5px;">
class ExpiryTracker:
    def __init__(self, inventory_manager):
        self.inventory = inventory_manager
    
    def add_expiry_date(self, item_id, expiry_date, batch_number=""):
        """Add expiry date to an item"""
        if item_id not in self.inventory.inventory:
            raise ItemNotFoundError(f"Item {item_id} not found")
        
        item = self.inventory.inventory[item_id]
        
        # Initialize expiry tracking if not exists
        if 'expiry_info' not in item:
            item['expiry_info'] = []
        
        # Add expiry record
        expiry_record = {
            "batch_number": batch_number or f"BATCH{len(item['expiry_info']) + 1:03d}",
            "expiry_date": expiry_date,
            "quantity": item.get('batch_quantity', item['quantity']),
            "added_date": datetime.now().strftime("%Y-%m-%d")
        }
        
        item['expiry_info'].append(expiry_record)
        self.inventory.save_inventory()
        
        print(f"âœ… Expiry date added for {item_id}")
    
    def check_expiring_items(self, days_ahead=30):
        """Check for items expiring soon"""
        today = datetime.now().date()
        expiring_items = []
        
        for item_id, item in self.inventory.inventory.items():
            if 'expiry_info' in item:
                for expiry in item['expiry_info']:
                    try:
                        expiry_date = datetime.strptime(expiry['expiry_date'], "%Y-%m-%d").date()
                        days_until_expiry = (expiry_date - today).days
                        
                        if 0 <= days_until_expiry <= days_ahead:
                            expiring_items.append({
                                "item_id": item_id,
                                "item_name": item['name'],
                                "batch": expiry['batch_number'],
                                "expiry_date": expiry['expiry_date'],
                                "days_until": days_until_expiry,
                                "quantity": expiry['quantity']
                            })
                    except ValueError:
                        continue
        
        if not expiring_items:
            print(f"âœ… No items expiring in the next {days_ahead} days")
            return []
        
        # Sort by days until expiry
        expiring_items.sort(key=lambda x: x['days_until'])
        
        # Print report
        print(f" âš ï¸  EXPIRING ITEMS (next {days_ahead} days):")
        print("="*70)
        print(f"{'Item ID':<10} {'Item Name':<20} {'Batch':<10} {'Expiry':<12} {'Days':<6} {'Qty':<6}")
        print("-"*70)
        
        for item in expiring_items:
            status = "ğŸ”´" if item['days_until'] <= 7 else "ğŸŸ¡"
            print(f"{status} {item['item_id']:<8} {item['item_name'][:20]:<20} "
                  f"{item['batch']:<10} {item['expiry_date']:<12} "
                  f"{item['days_until']:<6} {item['quantity']:<6}")
        
        return expiring_items
            </pre>
        </div>
    </div>
</div>

<h3>ğŸ§ª Testing Your Inventory Manager</h3>
<div style="background: #e8f5e8; padding: 20px; border-radius: 10px; margin: 15px 0;">
    <h4>Test Cases to Verify</h4>
    
    <table style="width: 100%; background: white; border-radius: 5px; padding: 10px;">
        <tr style="background: #4CAF50; color: white;">
            <th style="padding: 10px;">Test Scenario</th>
            <th style="padding: 10px;">Expected Result</th>
            <th style="padding: 10px;">Test Data</th>
        </tr>
        <tr>
            <td style="padding: 8px;">Add new item</td>
            <td style="padding: 8px;">Item appears in inventory</td>
            <td style="padding: 8px;">Name: "Test Item", Qty: 10, Price: 9.99</td>
        </tr>
        <tr style="background: #f0f8ff;">
            <td style="padding: 8px;">Remove existing item</td>
            <td style="padding: 8px;">Item removed from inventory</td>
            <td style="padding: 8px;">Use valid item ID</td>
        </tr>
        <tr>
            <td style="padding: 8px;">Update quantity</td>
            <td style="padding: 8px;">Quantity changes correctly</td>
            <td style="padding: 8px;">Add 5, Remove 3, Set to 20</td>
        </tr>
        <tr style="background: #f0f8ff;">
            <td style="padding: 8px;">View low stock</td>
            <td style="padding: 8px;">Shows items below reorder point</td>
            <td style="padding: 8px;">Item with quantity 2, reorder at 5</td>
        </tr>
        <tr>
            <td style="padding: 8px;">Calculate total value</td>
            <td style="padding: 8px;">Correct sum of inventory value</td>
            <td style="padding: 8px;">2 items: 10Ã—$5 + 5Ã—$10 = $100</td>
        </tr>
        <tr style="background: #f0f8ff;">
            <td style="padding: 8px;">Search items</td>
            <td style="padding: 8px;">Finds matching items</td>
            <td style="padding: 8px;">Search by name, category, price range</td>
        </tr>
        <tr>
            <td style="padding: 8px;">Save and load</td>
            <td style="padding: 8px;">Data persists between sessions</td>
            <td style="padding: 8px;">Add items, exit, restart, check</td>
        </tr>
        <tr style="background: #f0f8ff;">
            <td style="padding: 8px;">Invalid inputs</td>
            <td style="padding: 8px;">Error messages, no crashes</td>
            <td style="padding: 8px;">Negative quantities, text for numbers</td>
        </tr>
    </table>
    
    <div style="margin-top: 15px; padding: 15px; background: white; border-radius: 8px;">
        <h5>ğŸ” Sample Test Data</h5>
        <pre style="background: #f5f5f5; padding: 10px; border-radius: 5px;">
# Sample inventory for testing
test_inventory = {
    "ELE001": {
        "item_id": "ELE001",
        "name": "Gaming Laptop",
        "category": "Electronics",
        "quantity": 5,
        "price": 1299.99,
        "cost": 999.99,
        "reorder_point": 3
    },
    "ELE002": {
        "item_id": "ELE002",
        "name": "Wireless Mouse",
        "category": "Electronics",
        "quantity": 50,
        "price": 29.99,
        "cost": 15.00,
        "reorder_point": 20
    },
    "OFF001": {
        "item_id": "OFF001",
        "name": "Office Chair",
        "category": "Furniture",
        "quantity": 2,
        "price": 199.99,
        "cost": 120.00,
        "reorder_point": 5
    },
    "OFF002": {
        "item_id": "OFF002",
        "name": "Desk Lamp",
        "category": "Furniture",
        "quantity": 15,
        "price": 39.99,
        "cost": 25.00,
        "reorder_point": 10
    },
    "BOK001": {
        "item_id": "BOK001",
        "name": "Python Programming Book",
        "category": "Books",
        "quantity": 8,
        "price": 49.99,
        "cost": 30.00,
        "reorder_point": 5
    }
}
        </pre>
    </div>
</div>

<h3>ğŸ“ Project Submission Checklist</h3>
<div style="background: #fff5e6; padding: 20px; border-radius: 10px; margin: 15px 0;">
    <h4>âœ… Before You Submit:</h4>
    
    <div style="background: white; padding: 15px; border-radius: 8px; margin: 10px 0;">
        <label style="display: block; margin: 5px 0;">
            <input type="checkbox"> All 8 core features implemented
        </label>
        <label style="display: block; margin: 5px 0;">
            <input type="checkbox"> Error handling for invalid inputs
        </label>
        <label style="display: block; margin: 5px 0;">
            <input type="checkbox"> Data persists between sessions (saves to file)
        </label>
        <label style="display: block; margin: 5px 0;">
            <input type="checkbox"> Unique item IDs generated automatically
        </label>
        <label style="display: block; margin: 5px 0;">
            <input type="checkbox"> Low stock detection works correctly
        </label>
        <label style="display: block; margin: 5px 0;">
            <input type="checkbox"> Total value calculation is accurate
        </label>
        <label style="display: block; margin: 5px 0;">
            <input type="checkbox"> Search functionality works
        </label>
        <label style="display: block; margin: 5px 0;">
            <input type="checkbox"> Code is well-commented and organized
        </label>
        <label style="display: block; margin: 5px 0;">
            <input type="checkbox"> At least one advanced feature implemented
        </label>
        <label style="display: block; margin: 5px 0;">
            <input type="checkbox"> Tested with various scenarios
        </label>
    </div>
</div>

<h3>ğŸ† Badge Progress: The Scripting Scout</h3>
<div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px; border-radius: 10px; margin: 15px 0;">
    <div style="display: flex; align-items: center; gap: 20px;">
        <div style="font-size: 3em;">ğŸ–ï¸</div>
        <div>
            <h3 style="margin: 0;">The Scripting Scout</h3>
            <p>Complete the Inventory Manager project to earn your second major badge!</p>
            <div style="background: rgba(255,255,255,0.2); padding: 10px; border-radius: 5px;">
                <div style="display: flex; justify-content: space-between;">
                    <span>Project Progress:</span>
                    <span>0/8 Core Features</span>
                </div>
                <div style="background: rgba(255,255,255,0.3); height: 10px; border-radius: 5px; margin-top: 5px;">
                    <div style="background: #4CAF50; width: 0%; height: 100%; border-radius: 5px;"></div>
                </div>
            </div>
        </div>
    </div>
</div>

<h3>ğŸ“ Key Learning Points</h3>
<div style="background: #f0f8ff; padding: 20px; border-radius: 10px; margin: 15px 0;">
    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px;">
        <div style="background: white; padding: 15px; border-radius: 8px; border-left: 5px solid #4A90E2;">
            <h5>âœ… Skills Demonstrated:</h5>
            <ul>
                <li>Complex data structure design</li>
                <li>File I/O operations (JSON)</li>
                <li>Error handling and validation</li>
                <li>Menu-driven interface design</li>
                <li>Data persistence and state management</li>
                <li>Search and filtering algorithms</li>
                <li>Report generation</li>
            </ul>
        </div>
        <div style="background: white; padding: 15px; border-radius: 8px; border-left: 5px solid #E24A4A;">
            <h5>ğŸš€ Real-World Applications:</h5>
            <ul>
                <li>Retail inventory systems</li>
                <li>Warehouse management</li>
                <li>Library systems</li>
                <li>Asset tracking</li>
                <li>Supply chain management</li>
                <li>Small business operations</li>
            </ul>
        </div>
    </div>
</div>

<div style="background: #e8f5e8; padding: 20px; border-radius: 10px; margin: 20px 0; text-align: center;">
    <h3>ğŸŒŸ Congratulations! ğŸŒŸ</h3>
    <p>You've built a professional-grade inventory management system! This is real-world software development!</p>
    <p><i>"Good inventory management is the difference between profit and loss." - Business Wisdom</i></p>
    
    <div style="margin-top: 15px; display: flex; justify-content: center; gap: 20px;">
        <div style="padding: 10px 20px; background: #4CAF50; color: white; border-radius: 5px;">
            ğŸ† Project Complete!
        </div>
        <div style="padding: 10px 20px; background: #2196F3; color: white; border-radius: 5px;">
            ğŸ–ï¸ Badge Earned!
        </div>
        <div style="padding: 10px 20px; background: #FF9800; color: white; border-radius: 5px;">
            ğŸ’¼ Real Business Tool!
        </div>
    </div>
</div>

<h3>ğŸ”— Resources for Further Learning</h3>
<ul>
    <li><a href="https://realpython.com/python-json/" target="_blank">Python JSON Guide</a></li>
    <li><a href="https://github.com/topics/inventory-management" target="_blank">GitHub Inventory Projects</a></li>
    <li><a href="https://www.freecodecamp.org/news/python-projects-for-intermediate/" target="_blank">More Intermediate Python Projects</a></li>
</ul>
`
            },

            "3-9": {
                "icon": "fa-file-alt",
                "title": "Working with Text Files (.txt)",
                "html": `<h1>Month 3, Week 9: Working with Text Files ğŸ“</h1>
<p>Welcome to <b>Data Persistence</b>! This week, we learn how to save data <b>forever</b> - even after you close your program! No more losing your work!</p>

<div class="analogy-box" style="background-color: #e3f2fd; border-left: 5px solid #2196F3; padding: 20px; margin: 20px 0; border-radius: 8px;">
    <b>ğŸ“š Analogy: The Magical Diary âœ¨</b><br/><br/>
    
    â€¢ <b>Python Program</b> = Your brain (temporary memory)<br/>
    â€¢ <b>Text File</b> = A magical diary (permanent memory)<br/>
    â€¢ <b>open()</b> = Opening the diary cover<br/>
    â€¢ <b>read()</b> = Reading the diary<br/>
    â€¢ <b>write()</b> = Writing new pages<br/>
    â€¢ <b>close()</b> = Closing and locking the diary<br/>
    â€¢ <b>Paths</b> = Where the diary is kept (Desktop, Documents, etc.)
</div>

<div style="background-color: #FFF3E0; padding: 20px; border-radius: 10px; margin: 20px 0;">
    <h3>ğŸ“Š File Operations Cheat Sheet</h3>
    
    <table style="width:100%; border-collapse: collapse; margin-top: 15px;">
        <tr style="background-color: #FFE0B2;">
            <th style="padding: 12px; border: 2px solid #FF9800; text-align: left;">Mode</th>
            <th style="padding: 12px; border: 2px solid #FF9800; text-align: left;">Symbol</th>
            <th style="padding: 12px; border: 2px solid #FF9800; text-align: left;">Purpose</th>
            <th style="padding: 12px; border: 2px solid #FF9800; text-align: left;">File Exists?</th>
        </tr>
        <tr>
            <td style="padding: 10px; border: 1px solid #FFE0B2;">Read</td>
            <td style="padding: 10px; border: 1px solid #FFE0B2;"><code>'r'</code></td>
            <td style="padding: 10px; border: 1px solid #FFE0B2;">Read existing file</td>
            <td style="padding: 10px; border: 1px solid #FFE0B2;">Must exist</td>
        </tr>
        <tr style="background-color: #FFF8E1;">
            <td style="padding: 10px; border: 1px solid #FFE0B2;">Write</td>
            <td style="padding: 10px; border: 1px solid #FFE0B2;"><code>'w'</code></td>
            <td style="padding: 10px; border: 1px solid #FFE0B2;">Create new or overwrite</td>
            <td style="padding: 10px; border: 1px solid #FFE0B2;">Creates or replaces</td>
        </tr>
        <tr>
            <td style="padding: 10px; border: 1px solid #FFE0B2;">Append</td>
            <td style="padding: 10px; border: 1px solid #FFE0B2;"><code>'a'</code></td>
            <td style="padding: 10px; border: 1px solid #FFE0B2;">Add to end of file</td>
            <td style="padding: 10px; border: 1px solid #FFE0B2;">Creates if needed</td>
        </tr>
        <tr style="background-color: #FFF8E1;">
            <td style="padding: 10px; border: 1px solid #FFE0B2;">Read & Write</td>
            <td style="padding: 10px; border: 1px solid #FFE0B2;"><code>'r+'</code></td>
            <td style="padding: 10px; border: 1px solid #FFE0B2;">Read and write</td>
            <td style="padding: 10px; border: 1px solid #FFE0B2;">Must exist</td>
        </tr>
    </table>
</div>

<h2>ğŸ“ Part 1: Basic File Operations</h2>

<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">
    <div style="background-color: #E8F5E9; padding: 15px; border-radius: 8px;">
        <h4>ğŸ“„ Example 1: Writing Your First File</h4>
        <pre style="background-color: white; padding: 10px; border-radius: 5px;">
# Creating a secret diary
file = open("my_diary.txt", "w")  # 'w' for write

file.write("ğŸ“… Monday")
file.write("Today I learned Python file handling!")
file.write("It's like magic! âœ¨")

file.close()
print("âœ… Diary saved successfully!")
        </pre>
    </div>
    
    <div style="background-color: #E1F5FE; padding: 15px; border-radius: 8px;">
        <h4>ğŸ“– Example 2: Reading a File</h4>
        <pre style="background-color: white; padding: 10px; border-radius: 5px;">
# Reading the diary back
file = open("my_diary.txt", "r")  # 'r' for read

# Method 1: Read entire file
content = file.read()
print("ğŸ“– Full content:")
print(content)

file.close()

# Method 2: Read line by line
file = open("my_diary.txt", "r")
print("\nğŸ“ Line by line:")
for line in file:
    print(f"â†’ {line.strip()}")  # strip removes extra spaces/newlines

file.close()
        </pre>
    </div>
</div>

<h2>âœ¨ Week 9 Assignment: Digital Diary ğŸ““</h2>

<div style="background-color: #F3E5F5; padding: 20px; border-radius: 10px; margin: 20px 0;">
    <h3>ğŸ¯ Build a Personal Digital Diary</h3>
    
    <div style="background-color: white; padding: 15px; border-radius: 8px; margin: 15px 0;">
        <h4>ğŸ“‹ Features Required:</h4>
        <ol>
            <li><b>Write New Entry:</b> Add today's thoughts with date</li>
            <li><b>Read All Entries:</b> Display entire diary</li>
            <li><b>Search Entries:</b> Find entries containing specific words</li>
            <li><b>Entry Counter:</b> Show how many entries you have</li>
            <li><b>Mood Tracker:</b> Optional: track daily mood ğŸ˜ŠğŸ˜ğŸ˜¢</li>
        </ol>
    </div>
    
    <div style="background-color: #E8F5E9; padding: 15px; border-radius: 8px;">
        <h4>ğŸš€ Starter Code</h4>
        <pre style="background-color: white; padding: 10px; border-radius: 5px;">
import datetime

def digital_diary():
    print("ğŸ““ WELCOME TO YOUR DIGITAL DIARY ğŸ““")
    print("=" * 40)
    
    while True:
        print("What would you like to do?")
        print("1. Write new entry")
        print("2. Read all entries")
        print("3. Search entries")
        print("4. Exit")
        
        choice = input("Enter choice (1-4): ")
        
        if choice == "1":
            # Get today's date
            today = datetime.datetime.now()
            date_str = today.strftime("%B %d, %Y")
            
            print(f"ğŸ“… Today is: {date_str}")
            print("Write your thoughts (type 'END' on new line to finish):")
            
            # Collect multiple lines
            lines = []
            while True:
                line = input()
                if line == "END":
                    break
                lines.append(line)
            
            # Save to file
            with open("diary.txt", "a") as file:
                file.write(f"=== {date_str} ===")
                file.write("".join(lines))
                file.write("")
            
            print("âœ… Entry saved!")
            
        elif choice == "2":
            # Continue building...
            pass

digital_diary()
        </pre>
    </div>
</div>

<div style="background-color: #FFF3E0; padding: 20px; border-radius: 10px; margin: 20px 0;">
    <h3>ğŸ’¡ Advanced: The 'with' Statement (Best Practice!)</h3>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 15px;">
        <div>
            <h4>âŒ Old Way (Easy to forget close())</h4>
            <pre style="background-color: #FFEBEE; padding: 10px; border-radius: 5px;">
file = open("data.txt", "w")
file.write("Hello World")
# What if we forget this? â†“
# file.close()
            </pre>
            <p><small>If you forget close(), file might not save properly!</small></p>
        </div>
        
        <div>
            <h4>âœ… New Way (Automatic cleanup!)</h4>
            <pre style="background-color: #E8F5E9; padding: 10px; border-radius: 5px;">
with open("data.txt", "w") as file:
    file.write("Hello World")
# File automatically closes here! ğŸ‰
            </pre>
            <p><small>Python handles closing for you!</small></p>
        </div>
    </div>
    
    <div style="margin-top: 20px; background-color: white; padding: 15px; border-radius: 8px;">
        <h4>ğŸ“š Practical Example with 'with'</h4>
        <pre style="background-color: #f5f5f5; padding: 10px; border-radius: 5px;">
# Reading with 'with' - safer and cleaner!
with open("my_diary.txt", "r") as diary:
    lines = diary.readlines()
    
print(f"ğŸ“Š Diary Statistics:")
print(f"Total lines: {len(lines)}")
print(f"Total characters: {sum(len(line) for line in lines)}")

# Writing with 'with'
with open("backup_diary.txt", "w") as backup:
    backup.write("=== BACKUP ===")
    for line in lines:
        backup.write(line)

print("âœ… Backup created safely!")
        </pre>
    </div>
</div>

<h3>ğŸ® Challenge: Secret Message Encoder ğŸ”</h3>
<div style="background-color: #E1F5FE; padding: 20px; border-radius: 10px; margin: 20px 0;">
    <p><b>Create a program that:</b></p>
    <ul>
        <li>Encodes messages (shift letters by 3 positions)</li>
        <li>Saves encoded messages to secret files</li>
        <li>Decodes messages when you have the password</li>
        <li>Keeps a log of all encoded messages</li>
    </ul>
    
    <div style="background-color: white; padding: 15px; border-radius: 8px; margin-top: 15px;">
        <h5>ğŸ’¡ Encoding Hint</h5>
        <pre style="background-color: #f5f5f5; padding: 10px; border-radius: 5px;">
def encode_message(text):
    encoded = ""
    for char in text:
        if char.isalpha():
            shift = 3
            if char.islower():
                encoded += chr((ord(char) - ord('a') + shift) % 26 + ord('a'))
            else:
                encoded += chr((ord(char) - ord('A') + shift) % 26 + ord('A'))
        else:
            encoded += char
    return encoded

# Test it
message = "Hello Secret Agent!"
encoded = encode_message(message)
print(f"Original: {message}")
print(f"Encoded:  {encoded}")
        </pre>
    </div>
</div>`
            },
            "3-10": {
                "icon": "fa-file-excel",
                "title": "CSV Data (The Excel Connection)",
                "html": `<h1>Month 3, Week 10: CSV Data ğŸ“Š</h1>
<p>This week, we're connecting Python to <b>spreadsheets</b>! Learn to work with data like sports scores, grades, and game stats!</p>

<div class="analogy-box" style="background-color: #e3f2fd; border-left: 5px solid #2196F3; padding: 20px; margin: 20px 0; border-radius: 8px;">
    <b>ğŸ« Analogy: The School Gradebook ğŸ“š</b><br/><br/>
    
    â€¢ <b>CSV File</b> = Digital gradebook (Excel/Google Sheets)<br/>
    â€¢ <b>Rows</b> = Each student's information<br/>
    â€¢ <b>Columns</b> = Different data types (Name, Grade, Age)<br/>
    â€¢ <b>Comma Separated</b> = Different "boxes" in the row<br/>
    â€¢ <b>csv.reader()</b> = Reading the gradebook<br/>
    â€¢ <b>csv.writer()</b> = Writing new grades<br/>
    â€¢ <b>Headers</b> = Column titles (first row)
</div>

<div style="background-color: #FFF3E0; padding: 20px; border-radius: 10px; margin: 20px 0;">
    <h3>ğŸ“Š What is CSV? Visual Example</h3>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 15px;">
        <div style="background-color: white; padding: 15px; border-radius: 8px; border: 2px solid #4CAF50;">
            <h4>ğŸ‘€ CSV File Content</h4>
            <pre style="background-color: #E8F5E9; padding: 10px; border-radius: 5px;">
                    Name            Team        Goals       Assists

                    Messi           PSG           15          10
                    Ronaldo         ManU          12           8
                    Mbappe          PSG           20           5
                    Haaland         ManCity       25           3
                    Neymar          PSG            8           12
            </pre>
        </div>
        
        <div style="background-color: white; padding: 15px; border-radius: 8px; border: 2px solid #2196F3;">
            <h4>ğŸ“ˆ In Spreadsheet View</h4>
            <table style="width:100%; border-collapse: collapse;">
                <tr style="background-color: #BBDEFB;">
                    <th style="padding: 8px; border: 1px solid #2196F3;">Name</th>
                    <th style="padding: 8px; border: 1px solid #2196F3;">Team</th>
                    <th style="padding: 8px; border: 1px solid #2196F3;">Goals</th>
                    <th style="padding: 8px; border: 1px solid #2196F3;">Assists</th>
                </tr>
                <tr>
                    <td style="padding: 8px; border: 1px solid #2196F3;">Messi</td>
                    <td style="padding: 8px; border: 1px solid #2196F3;">PSG</td>
                    <td style="padding: 8px; border: 1px solid #2196F3;">15</td>
                    <td style="padding: 8px; border: 1px solid #2196F3;">10</td>
                </tr>
                <tr style="background-color: #E3F2FD;">
                    <td style="padding: 8px; border: 1px solid #2196F3;">Ronaldo</td>
                    <td style="padding: 8px; border: 1px solid #2196F3;">ManU</td>
                    <td style="padding: 8px; border: 1px solid #2196F3;">12</td>
                    <td style="padding: 8px; border: 1px solid #2196F3;">8</td>
                </tr>
                <tr>
                    <td style="padding: 8px; border: 1px solid #2196F3;">Mbappe</td>
                    <td style="padding: 8px; border: 1px solid #2196F3;">PSG</td>
                    <td style="padding: 8px; border: 1px solid #2196F3;">20</td>
                    <td style="padding: 8px; border: 1px solid #2196F3;">5</td>
                </tr>
            </table>
        </div>
    </div>
</div>

<h2>ğŸ“ Part 1: Reading CSV Files</h2>

<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">
    <div style="background-color: #E8F5E9; padding: 15px; border-radius: 8px;">
        <h4>ğŸ“– Example 1: Basic CSV Reading</h4>
        <pre style="background-color: white; padding: 10px; border-radius: 5px;">
import csv

# First, let's create a sample CSV file
with open("players.csv", "w") as file:
    file.write("""Name,Team,Goals,Assists
Messi,PSG,15,10
Ronaldo,ManU,12,8
Mbappe,PSG,20,5
Haaland,ManCity,25,3
Neymar,PSG,8,12""")

print("âœ… Created players.csv file")

# Now let's read it
with open("players.csv", "r") as file:
    reader = csv.reader(file)
    
    print("ğŸ† Football Players Stats:")
    print("-" * 40)
    
    for row in reader:
        print(f"Player: {row[0]} | Team: {row[1]} | Goals: {row[2]} | Assists: {row[3]}")
        </pre>
    </div>
    
    <div style="background-color: #E1F5FE; padding: 15px; border-radius: 8px;">
        <h4>ğŸ¯ Example 2: CSV with Headers (DictReader)</h4>
        <pre style="background-color: white; padding: 10px; border-radius: 5px;">
import csv

# DictReader gives us dictionaries instead of lists
with open("players.csv", "r") as file:
    reader = csv.DictReader(file)
    
    print("ğŸ“Š Player Statistics (using DictReader):")
    print("=" * 40)
    
    for player in reader:
        name = player['Name']
        goals = int(player['Goals'])
        assists = int(player['Assists'])
        
        # Calculate total points
        total_points = goals + assists
        
        print(f"{name}: {goals} goals + {assists} assists = {total_points} points")
        
        # Find the top scorer
        # (We'll store data and find max later)
        </pre>
    </div>
</div>

<h2>âš½ Week 10 Assignment: Sports Stats Analyzer</h2>

<div style="background-color: #F3E5F5; padding: 20px; border-radius: 10px; margin: 20px 0;">
    <h3>ğŸ† Analyze Football/Sports Statistics</h3>
    
    <div style="background-color: white; padding: 15px; border-radius: 8px; margin: 15px 0;">
        <h4>ğŸ“‹ Required Features:</h4>
        <ol>
            <li><b>Find Top Scorer:</b> Player with most goals</li>
            <li><b>Find Best Assister:</b> Player with most assists</li>
            <li><b>Calculate Points:</b> Goals + Assists for each player</li>
            <li><b>Team Statistics:</b> Total goals per team</li>
            <li><b>Average Calculator:</b> Average goals per player</li>
            <li><b>Search Function:</b> Find stats for specific player</li>
        </ol>
    </div>
    
    <div style="background-color: #E8F5E9; padding: 15px; border-radius: 8px;">
        <h4>ğŸš€ Starter Template</h4>
        <pre style="background-color: white; padding: 10px; border-radius: 5px;">
import csv

def sports_analyzer():
    print("âš½ SPORTS STATS ANALYZER âš½")
    print("=" * 40)
    
    # Read the data
    players = []
    with open("players.csv", "r") as file:
        reader = csv.DictReader(file)
        for row in reader:
            # Convert numbers from strings to integers
            row['Goals'] = int(row['Goals'])
            row['Assists'] = int(row['Assists'])
            players.append(row)
    
    while True:
        print("What would you like to analyze?")
        print("1. Find top scorer")
        print("2. Find best assister")
        print("3. Team statistics")
        print("4. Search player")
        print("5. Exit")
        
        choice = input("Enter choice (1-5): ")
        
        if choice == "1":
            # Find player with most goals
            top_scorer = max(players, key=lambda p: p['Goals'])
            print(f"ğŸ† Top Scorer: {top_scorer['Name']}")
            print(f"   Goals: {top_scorer['Goals']}")
            print(f"   Team: {top_scorer['Team']}")
            
        elif choice == "2":
            # Find player with most assists
            top_assister = max(players, key=lambda p: p['Assists'])
            print(f"ğŸ¯ Best Assister: {top_assister['Name']}")
            print(f"   Assists: {top_assister['Assists']}")
            
        # Continue with other options...

sports_analyzer()
        </pre>
    </div>
</div>

<h2>âœï¸ Part 2: Writing CSV Files</h2>

<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">
    <div style="background-color: #E8F5E9; padding: 15px; border-radius: 8px;">
        <h4>ğŸ“ Example 1: Creating a New CSV</h4>
        <pre style="background-color: white; padding: 10px; border-radius: 5px;">
import csv

# Create a video game library CSV
games = [
    ["Title", "Platform", "Rating", "Hours Played"],
    ["Minecraft", "PC", 9.5, 150],
    ["Fortnite", "PS5", 8.0, 80],
    ["Roblox", "Mobile", 7.5, 120],
    ["Among Us", "PC", 8.5, 40]
]

with open("games.csv", "w", newline='') as file:
    writer = csv.writer(file)
    writer.writerows(games)

print("âœ… Created games.csv with 5 entries!")
print("Open it in Excel/Sheets to see the table!")

# Let's verify by reading it back
with open("games.csv", "r") as file:
    print("ğŸ“– Games Library:")
    for row in csv.reader(file):
        print(f"{row[0]:15} | {row[1]:10} | {row[2]:6} | {row[3]} hours")
        </pre>
    </div>
    
    <div style="background-color: #E1F5FE; padding: 15px; border-radius: 8px;">
        <h4>ğŸ® Example 2: Adding to Existing CSV</h4>
        <pre style="background-color: white; padding: 10px; border-radius: 5px;">
import csv

def add_new_game():
    print("ğŸ® ADD NEW GAME TO LIBRARY ğŸ®")
    
    # Get game details from user
    title = input("Game title: ")
    platform = input("Platform (PC/PS5/Xbox/Mobile): ")
    rating = float(input("Your rating (0-10): "))
    hours = int(input("Hours played: "))
    
    # Add to CSV file
    with open("games.csv", "a", newline='') as file:
        writer = csv.writer(file)
        writer.writerow([title, platform, rating, hours])
    
    print(f"âœ… Added {title} to your library!")
    
    # Show updated library
    with open("games.csv", "r") as file:
        reader = list(csv.reader(file))
        print(f"ğŸ“Š Total games in library: {len(reader)-1}")  # -1 for header

add_new_game()
        </pre>
    </div>
</div>

<h3>ğŸ¯ Advanced Challenge: Game Tournament Tracker</h3>
<div style="background-color: #FFF3E0; padding: 20px; border-radius: 10px; margin: 20px 0;">
    <p><b>Create a tournament tracking system:</b></p>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin: 15px 0;">
        <div style="background-color: white; padding: 10px; border-radius: 5px;">
            <b>ğŸ“‹ Required Features</b>
            <ul>
                <li>Add tournament results</li>
                <li>Calculate team standings</li>
                <li>Track player stats</li>
                <li>Generate reports</li>
                <li>Find MVP (Most Valuable Player)</li>
            </ul>
        </div>
        <div style="background-color: white; padding: 10px; border-radius: 5px;">
            <b>ğŸ† Sample CSV Structure</b>
            <pre style="font-size: 12px;">
MatchID,Team1,Team2,Score1,Score2,MVP
1,TeamA,TeamB,3,2,Player1
2,TeamC,TeamD,1,4,Player8
3,TeamA,TeamC,2,2,Player3
            </pre>
        </div>
    </div>
    
    <div style="background-color: #f5f5f5; padding: 15px; border-radius: 8px; margin-top: 15px;">
        <h5>ğŸ’¡ Statistics Calculation Hint</h5>
        <pre style="background-color: white; padding: 10px; border-radius: 5px;">
def calculate_standings(matches):
    """Calculate team points from matches"""
    standings = {}
    
    for match in matches:
        team1 = match['Team1']
        team2 = match['Team2']
        score1 = int(match['Score1'])
        score2 = int(match['Score2'])
        
        # Initialize teams if not in standings
        if team1 not in standings:
            standings[team1] = {'W': 0, 'L': 0, 'D': 0, 'Points': 0}
        if team2 not in standings:
            standings[team2] = {'W': 0, 'L': 0, 'D': 0, 'Points': 0}
        
        # Update standings based on result
        if score1 > score2:
            standings[team1]['W'] += 1
            standings[team1]['Points'] += 3
            standings[team2]['L'] += 1
        elif score2 > score1:
            standings[team2]['W'] += 1
            standings[team2]['Points'] += 3
            standings[team1]['L'] += 1
        else:  # Draw
            standings[team1]['D'] += 1
            standings[team1]['Points'] += 1
            standings[team2]['D'] += 1
            standings[team2]['Points'] += 1
    
    return standings
        </pre>
    </div>
</div>`
            },
            "3-11": {
                "icon": "fa-toolbox",
                "title": "Python Libraries (The Toolkit)",
                "html": `<h1>Month 3, Week 11: Python Libraries ğŸ§°</h1>
<p>This week, we're becoming <b>superhero programmers</b>! Instead of building everything ourselves, we'll learn to use <b>other people's awesome code</b> to do amazing things!</p>

<div class="analogy-box" style="background-color: #e3f2fd; border-left: 5px solid #2196F3; padding: 20px; margin: 20px 0; border-radius: 8px;">
    <b>ğŸ”§ Analogy: The Programmer's Toolbox ğŸ› ï¸</b><br/><br/>
    
    â€¢ <b>Python</b> = Your basic toolkit (hammer, screwdriver)<br/>
    â€¢ <b>Libraries</b> = Specialized power tools (drill, saw, sander)<br/>
    â€¢ <b>import</b> = Opening the toolbox<br/>
    â€¢ <b>random</b> = Magic dice roller ğŸ²<br/>
    â€¢ <b>datetime</b> = Time machine â°<br/>
    â€¢ <b>os</b> = Computer remote control ğŸ–¥ï¸<br/>
    â€¢ <b>Pip</b> = Online tool delivery service ğŸ“¦<br/>
    â€¢ <b>Function calls</b> = Using the tools
</div>

<div style="background-color: #FFF3E0; padding: 20px; border-radius: 10px; margin: 20px 0;">
    <h3>ğŸ“š Python's Built-in Library Superstars</h3>
    
    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin-top: 15px;">
        <div style="background-color: #FFE0B2; padding: 15px; border-radius: 8px; text-align: center;">
            <h4>ğŸ² random</h4>
            <p><b>The Game Master</b></p>
            <small>Random numbers, choices, shuffling</small>
        </div>
        <div style="background-color: #BBDEFB; padding: 15px; border-radius: 8px; text-align: center;">
            <h4>â° datetime</h4>
            <p><b>The Time Traveler</b></p>
            <small>Dates, times, scheduling</small>
        </div>
        <div style="background-color: #C8E6C9; padding: 15px; border-radius: 8px; text-align: center;">
            <h4>ğŸ“ os</h4>
            <p><b>The File Explorer</b></p>
            <small>Files, folders, paths</small>
        </div>
        <div style="background-color: #F8BBD0; padding: 15px; border-radius: 8px; text-align: center;">
            <h4>ğŸ”¢ math</h4>
            <p><b>The Calculator Pro</b></p>
            <small>Advanced math functions</small>
        </div>
        <div style="background-color: #D1C4E9; padding: 15px; border-radius: 8px; text-align: center;">
            <h4>ğŸ”„ json</h4>
            <p><b>The Data Translator</b></p>
            <small>Web data, APIs, config files</small>
        </div>
        <div style="background-color: #B2EBF2; padding: 15px; border-radius: 8px; text-align: center;">
            <h4>ğŸŒ webbrowser</h4>
            <p><b>The Web Butler</b></p>
            <small>Open websites automatically</small>
        </div>
    </div>
</div>

<h2>ğŸ² Part 1: The Random Library - Game Time!</h2>

<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">
    <div style="background-color: #E8F5E9; padding: 15px; border-radius: 8px;">
        <h4>ğŸ¯ Example 1: Basic Random Functions</h4>
        <pre style="background-color: white; padding: 10px; border-radius: 5px;">
import random

print("ğŸ² RANDOM NUMBER GENERATOR ğŸ²")
print("=" * 40)

# 1. Random integer between 1 and 10
dice_roll = random.randint(1, 6)
print(f"ğŸ¯ Dice roll: {dice_roll}")

# 2. Random float between 0 and 1
probability = random.random()
print(f"ğŸ“Š Random probability: {probability:.3f}")

# 3. Random choice from a list
games = ["Minecraft", "Fortnite", "Roblox", "Among Us"]
game_of_day = random.choice(games)
print(f"ğŸ® Game of the day: {game_of_day}")

# 4. Shuffle a list
cards = ["Ace", "King", "Queen", "Jack", "10"]
random.shuffle(cards)
print(f"ğŸƒ Shuffled cards: {cards}")

# 5. Multiple random choices
lucky_numbers = random.sample(range(1, 51), 6)
print(f"ğŸ€ Lucky numbers: {sorted(lucky_numbers)}")
        </pre>
    </div>
    
    <div style="background-color: #E1F5FE; padding: 15px; border-radius: 8px;">
        <h4>ğŸ® Example 2: Random Adventure Game</h4>
        <pre style="background-color: white; padding: 10px; border-radius: 5px;">
import random

def random_adventure():
    print("ğŸ—ºï¸ RANDOM ADVENTURE GENERATOR ğŸ—ºï¸")
    print("=" * 40)
    
    # Random elements
    locations = ["Haunted Castle", "Dragon's Cave", "Lost Temple", "Space Station"]
    enemies = ["Goblin", "Dragon", "Alien", "Zombie", "Robot"]
    treasures = ["Gold Chest", "Magic Sword", "Ancient Scroll", "Crystal"]
    
    # Generate random adventure
    location = random.choice(locations)
    enemy = random.choice(enemies)
    treasure = random.choice(treasures)
    difficulty = random.randint(1, 10)
    
    # Calculate reward based on difficulty
    gold = difficulty * random.randint(10, 50)
    
    print(f"ğŸ“ Location: {location}")
    print(f"ğŸ‘¾ Enemy: {enemy}")
    print(f"â­ Difficulty: {difficulty}/10")
    print(f"ğŸ’° Treasure: {treasure}")
    print(f"ğŸª™ Gold reward: {gold}")
    
    # Random outcome
    success_rate = random.random()
    if success_rate > 0.3:
        print(f"ğŸ‰ SUCCESS! You defeated the {enemy}!")
        print(f"ğŸ† You found the {treasure} and earned {gold} gold!")
    else:
        print(f"ğŸ’€ DEFEAT! The {enemy} was too strong!")
        print("Try again adventurer!")

# Run multiple adventures
for i in range(3):
    print(f"{'='*40}")
    print(f"ADVENTURE #{i+1}")
    random_adventure()
        </pre>
    </div>
</div>

<h2>â° Part 2: The datetime Library - Time Mastery!</h2>

<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">
    <div style="background-color: #E8F5E9; padding: 15px; border-radius: 8px;">
        <h4>ğŸ“… Example 1: Working with Dates & Times</h4>
        <pre style="background-color: white; padding: 10px; border-radius: 5px;">
from datetime import datetime, timedelta

print("ğŸ“… DATE & TIME WIZARD â°")
print("=" * 40)

# 1. Current date and time
now = datetime.now()
print(f"ğŸ• Current datetime: {now}")
print(f"ğŸ“† Date only: {now.date()}")
print(f"â±ï¸ Time only: {now.time()}")

# 2. Formatting dates (make them pretty!)
print(f"ğŸ¨ Formatted dates:")
print(f"US Format: {now.strftime('%m/%d/%Y')}")
print(f"EU Format: {now.strftime('%d/%m/%Y')}")
print(f"Full Date: {now.strftime('%A, %B %d, %Y')}")
print(f"Time: {now.strftime('%I:%M %p')}")

# 3. Creating specific dates
birthday = datetime(2024, 8, 15, 14, 30)  # Aug 15, 2024 at 2:30 PM
print(f"ğŸ‚ Sample birthday: {birthday.strftime('%B %d at %I:%M %p')}")

# 4. Time differences
future_date = now + timedelta(days=7, hours=3)
print(f"â© One week from now: {future_date.strftime('%B %d')}")

# 5. Age calculator
def calculate_age(birth_year, birth_month, birth_day):
    today = datetime.now()
    birthday = datetime(today.year, birth_month, birth_day)
    
    if birthday > today:
        age = today.year - birth_year - 1
    else:
        age = today.year - birth_year
    
    return age

age = calculate_age(2010, 5, 20)
print(f"ğŸˆ Someone born May 20, 2010 is {age} years old")
        </pre>
    </div>
    
    <div style="background-color: #E1F5FE; padding: 15px; border-radius: 8px;">
        <h4>â³ Example 2: Countdown Timer & Scheduler</h4>
        <pre style="background-color: white; padding: 10px; border-radius: 5px;">
from datetime import datetime, timedelta
import time

def countdown_timer():
    print("â³ COUNTDOWN TIMER ğŸ¯")
    print("=" * 40)
    
    # Get target time from user
    minutes = int(input("Enter minutes to countdown: "))
    
    # Calculate end time
    end_time = datetime.now() + timedelta(minutes=minutes)
    
    print(f"â° Counting down {minutes} minutes...")
    print(f"â±ï¸ Will finish at: {end_time.strftime('%I:%M:%S %p')}")
    
    try:
        while datetime.now() < end_time:
            remaining = end_time - datetime.now()
            # Format remaining time nicely
            hours, remainder = divmod(remaining.seconds, 3600)
            minutes, seconds = divmod(remainder, 60)
            
            print(f"â±ï¸ Remaining: {hours:02d}:{minutes:02d}:{seconds:02d}", end='\\r')
            time.sleep(1)  # Wait 1 second
        
        print("" + "="*40)
        print("ğŸ‰ TIME'S UP! COUNTDOWN COMPLETE! ğŸ‰")
        print("="*40)
        
        # Fun celebration
        print("" + "ğŸ†" * 20)
        
    except KeyboardInterrupt:
        print("â¹ï¸ Countdown stopped by user")

def birthday_calculator():
    print("ğŸ‚ BIRTHDAY CALCULATOR ğŸ‚")
    
    # Get user's birthday
    birth_str = input("Enter your birthday (MM/DD/YYYY): ")
    birth_date = datetime.strptime(birth_str, "%m/%d/%Y")
    
    today = datetime.now()
    next_birthday = datetime(today.year, birth_date.month, birth_date.day)
    
    if next_birthday < today:
        next_birthday = datetime(today.year + 1, birth_date.month, birth_date.day)
    
    days_until = (next_birthday - today).days
    
    print(f"ğŸ“… Your next birthday: {next_birthday.strftime('%B %d, %Y')}")
    print(f"â³ Days until birthday: {days_until}")
    
    if days_until == 0:
        print("ğŸ‰ğŸ‚ HAPPY BIRTHDAY! ğŸ‚ğŸ‰")

# Run the functions
countdown_timer()
birthday_calculator()
        </pre>
    </div>
</div>

<h2>ğŸ” Week 11 Assignment: Password Generator</h2>

<div style="background-color: #F3E5F5; padding: 20px; border-radius: 10px; margin: 20px 0;">
    <h3>ğŸ¯ Build a Secure Password Generator & Manager</h3>
    
    <div style="background-color: white; padding: 15px; border-radius: 8px; margin: 15px 0;">
        <h4>ğŸ“‹ Requirements:</h4>
        <ol>
            <li><b>Generate Strong Passwords:</b> Mix of letters, numbers, symbols</li>
            <li><b>Customizable Length:</b> User chooses password length</li>
            <li><b>Save to File:</b> Store passwords securely</li>
            <li><b>Password Strength Checker:</b> Rate password security</li>
            <li><b>Password Categories:</b> Social media, email, games, etc.</li>
            <li><b>Search Function:</b> Find saved passwords</li>
        </ol>
    </div>
    
    <div style="background-color: #E8F5E9; padding: 15px; border-radius: 8px;">
        <h4>ğŸš€ Starter Code with Libraries</h4>
        <pre style="background-color: white; padding: 10px; border-radius: 5px;">
import random
import string
import datetime
import os

def generate_password(length=12, use_symbols=True):
    """Generate a random password"""
    
    # Define character sets
    letters = string.ascii_letters  # a-z and A-Z
    digits = string.digits          # 0-9
    symbols = "!@#$%^&*()_+-=[]{}|;:,.<>?" if use_symbols else ""
    
    # Combine based on user preference
    if use_symbols:
        all_chars = letters + digits + symbols
    else:
        all_chars = letters + digits
    
    # Generate password
    password = ''.join(random.choice(all_chars) for _ in range(length))
    
    return password

def check_password_strength(password):
    """Check how strong a password is"""
    
    score = 0
    feedback = []
    
    # Length check
    if len(password) >= 8:
        score += 1
    else:
        feedback.append("âŒ Too short (needs 8+ characters)")
    
    # Check for different character types
    if any(c.islower() for c in password):
        score += 1
    else:
        feedback.append("âŒ Add lowercase letters")
    
    if any(c.isupper() for c in password):
        score += 1
    else:
        feedback.append("âŒ Add uppercase letters")
    
    if any(c.isdigit() for c in password):
        score += 1
    else:
        feedback.append("âŒ Add numbers")
    
    symbols = "!@#$%^&*()_+-=[]{}|;:,.<>?"
    if any(c in symbols for c in password):
        score += 1
    else:
        feedback.append("âŒ Add symbols")
    
    # Strength rating
    if score == 5:
        rating = "ğŸ’ª VERY STRONG"
    elif score == 4:
        rating = "ğŸ‘ STRONG"
    elif score == 3:
        rating = "ğŸ˜ MEDIUM"
    else:
        rating = "ğŸ˜Ÿ WEAK"
    
    return score, rating, feedback

def save_password(service, username, password):
    """Save password to file with timestamp"""
    
    timestamp = datetime.datetime.now().strftime("%Y-%m-%d %H:%M:%S")
    
    # Create passwords folder if it doesn't exist
    if not os.path.exists("passwords"):
        os.makedirs("passwords")
    
    # Save to file
    filename = f"passwords/passwords_{datetime.datetime.now().strftime('%Y%m')}.txt"
    
    with open(filename, "a") as file:
        file.write(f"{'='*50}")
        file.write(f"Service: {service}")
        file.write(f"Username: {username}")
        file.write(f"Password: {password}")
        file.write(f"Created: {timestamp}")
        file.write(f"{'='*50}")
    
    return filename

# Main program continues...
        </pre>
    </div>
</div>

<h3>ğŸ® Challenge: Build a Game Console</h3>
<div style="background-color: #FFF3E0; padding: 20px; border-radius: 10px; margin: 20px 0;">
    <p><b>Create a game console that uses multiple libraries:</b></p>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin: 15px 0;">
        <div style="background-color: white; padding: 10px; border-radius: 5px;">
            <b>ğŸ² Games to Include</b>
            <ul>
                <li>Dice roller with statistics</li>
                <li>Random story generator</li>
                <li>Countdown timer game</li>
                <li>Password guessing game</li>
                <li>Daily fortune teller</li>
            </ul>
        </div>
        <div style="background-color: white; padding: 10px; border-radius: 5px;">
            <b>ğŸ“Š Use These Libraries</b>
            <ul>
                <li><code>random</code> - for game mechanics</li>
                <li><code>datetime</code> - for daily rewards</li>
                <li><code>os</code> - to save high scores</li>
                <li><code>time</code> - for delays and timers</li>
                <li><code>math</code> - for score calculations</li>
            </ul>
        </div>
    </div>
    
    <div style="background-color: #f5f5f5; padding: 15px; border-radius: 8px; margin-top: 15px;">
        <h5>ğŸ’¡ Daily Reward System Idea</h5>
        <pre style="background-color: white; padding: 10px; border-radius: 5px;">
def daily_reward_system():
    from datetime import datetime
    import random
    import os
    
    # Check if rewards file exists
    if not os.path.exists("rewards.txt"):
        # First time user
        with open("rewards.txt", "w") as f:
            f.write(datetime.now().strftime("%Y-%m-%d") + " ")
        streak = 1
        print("ğŸ Welcome! First day reward!")
    else:
        # Read last login date
        with open("rewards.txt", "r") as f:
            lines = f.readlines()
            last_date_str = lines[-1].strip()
        
        last_date = datetime.strptime(last_date_str, "%Y-%m-%d")
        today = datetime.now()
        
        # Check if consecutive day
        days_diff = (today.date() - last_date.date()).days
        
        if days_diff == 1:
            streak = len(lines) + 1
            print(f"ğŸ”¥ {streak} day streak! Keep it up!")
        elif days_diff == 0:
            streak = len(lines)
            print("âœ… Already claimed today's reward!")
            return
        else:
            streak = 1
            print("ğŸ’” Streak broken! Starting over...")
        
        # Save today's date
        with open("rewards.txt", "a") as f:
            f.write(today.strftime("%Y-%m-%d") + " ")
    
    # Give reward based on streak
    base_reward = random.randint(10, 50)
    streak_bonus = streak * 5
    total_reward = base_reward + streak_bonus
    
    print(f"ğŸ’° Reward: {base_reward} + {streak_bonus} (streak bonus)")
    print(f"ğŸ¯ Total: {total_reward} coins!")
    
    return total_reward
        </pre>
    </div>
</div>`
            },
            "3-12": {
                "icon": "fa-graduation-cap",
                "title": "Quarter 1 Finale - Student Grading System",
                "html": `<h1>Month 3, Week 12: Quarter 1 Finale ğŸ“</h1>
<p><b>CONGRATULATIONS!</b> You've made it to the Quarter 1 Finale! This week, we combine <b>everything we've learned</b> to build an amazing Student Grading System! ğŸ†</p>

<div class="analogy-box" style="background-color: #e3f2fd; border-left: 5px solid #2196F3; padding: 20px; margin: 20px 0; border-radius: 8px;">
    <b>ğŸ« Analogy: The Smart Teacher's Assistant ğŸ‘©â€ğŸ«</b><br/><br/>
    
    â€¢ <b>Python Program</b> = Your super-smart teaching assistant<br/>
    â€¢ <b>Files</b> = Digital gradebooks and student records<br/>
    â€¢ <b>CSV Data</b> = Organized student information<br/>
    â€¢ <b>Libraries</b> = Your assistant's special tools<br/>
    â€¢ <b>Calculations</b> = Grading and statistics<br/>
    â€¢ <b>Report Cards</b> = Professional student evaluations<br/>
    â€¢ <b>Automation</b> = Saving hours of manual work! â°
</div>

<div style="background-color: #FFF3E0; padding: 20px; border-radius: 10px; margin: 20px 0;">
    <h2>ğŸ¯ Final Project: Student Grading System</h2>
    <p><b>Mission:</b> Build a complete system that manages student grades, calculates statistics, and generates professional report cards!</p>
    
    <div style="background-color: white; padding: 15px; border-radius: 8px; margin: 15px 0;">
        <h3>ğŸ“‹ System Requirements</h3>
        
        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin-top: 15px;">
            <div style="border: 2px solid #4CAF50; border-radius: 8px; padding: 10px;">
                <h4>ğŸ“ File Management</h4>
                <ul>
                    <li>Read student data from CSV files</li>
                    <li>Save individual report cards</li>
                    <li>Create class statistics file</li>
                    <li>Backup important data</li>
                </ul>
            </div>
            <div style="border: 2px solid #2196F3; border-radius: 8px; padding: 10px;">
                <h4>ğŸ§® Calculations</h4>
                <ul>
                    <li>Calculate averages</li>
                    <li>Determine letter grades</li>
                    <li>Class statistics</li>
                    <li>Rank students</li>
                </ul>
            </div>
            <div style="border: 2px solid #FF9800; border-radius: 8px; padding: 10px;">
                <h4>ğŸ“Š Reports</h4>
                <ul>
                    <li>Individual report cards</li>
                    <li>Class summary report</li>
                    <li>Progress tracking</li>
                    <li>Grade distribution</li>
                </ul>
            </div>
            <div style="border: 2px solid #9C27B0; border-radius: 8px; padding: 10px;">
                <h4>âœ¨ Features</h4>
                <ul>
                    <li>Search for students</li>
                    <li>Add new students</li>
                    <li>Update grades</li>
                    <li>Error handling</li>
                </ul>
            </div>
        </div>
    </div>
</div>

<h2>ğŸ“š Part 1: Understanding the Data Structure</h2>

<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">
    <div style="background-color: #E8F5E9; padding: 15px; border-radius: 8px;">
        <h4>ğŸ“ Sample Student Data File (students.csv)</h4>
        <pre style="background-color: white; padding: 10px; border-radius: 5px;">
     StudentID        Name             Math     Science    English     History      Art
        1001,        Alex Johnson,       85,        92,        88,        79,         91
        1002,        Maria Garcia,       78,        85,        92,        88,         84
        1003,        David Chen,         92,        89,        85,        91,         87
        1004,        Sarah Williams,     88,        76,        92,        85,         79
        1005,        Jamal Brown,        79,        88,        84,        92,         85
        1006,        Emma Wilson,        91,        84,        79,        88,         92
        1007,        Liam Davis,         84,        91,        85,        79,         88
        1008,        Sophia Martinez,    88,        79,        91,        84,         85
        1009,        Noah Anderson,      92,        85,        88,        91,         79
        1010,        Isabella Taylor,    85,        92,        84,        88,         91
        </pre>
        <p><small>ğŸ“Š This is what we'll be working with!</small></p>
    </div>
    
    <div style="background-color: #E1F5FE; padding: 15px; border-radius: 8px;">
        <h4>ğŸ“ Grading Scale</h4>
        <table style="width:100%; border-collapse: collapse; margin-top: 10px;">
            <tr style="background-color: #BBDEFB;">
                <th style="padding: 10px; border: 1px solid #2196F3;">Percentage</th>
                <th style="padding: 10px; border: 1px solid #2196F3;">Letter Grade</th>
                <th style="padding: 10px; border: 1px solid #2196F3;">GPA</th>
            </tr>
            <tr>
                <td style="padding: 8px; border: 1px solid #90CAF9;">97-100</td>
                <td style="padding: 8px; border: 1px solid #90CAF9;">A+</td>
                <td style="padding: 8px; border: 1px solid #90CAF9;">4.0</td>
            </tr>
            <tr style="background-color: #E3F2FD;">
                <td style="padding: 8px; border: 1px solid #90CAF9;">93-96</td>
                <td style="padding: 8px; border: 1px solid #90CAF9;">A</td>
                <td style="padding: 8px; border: 1px solid #90CAF9;">4.0</td>
            </tr>
            <tr>
                <td style="padding: 8px; border: 1px solid #90CAF9;">90-92</td>
                <td style="padding: 8px; border: 1px solid #90CAF9;">A-</td>
                <td style="padding: 8px; border: 1px solid #90CAF9;">3.7</td>
            </tr>
            <tr style="background-color: #E3F2FD;">
                <td style="padding: 8px; border: 1px solid #90CAF9;">87-89</td>
                <td style="padding: 8px; border: 1px solid #90CAF9;">B+</td>
                <td style="padding: 8px; border: 1px solid #90CAF9;">3.3</td>
            </tr>
            <tr>
                <td style="padding: 8px; border: 1px solid #90CAF9;">83-86</td>
                <td style="padding: 8px; border: 1px solid #90CAF9;">B</td>
                <td style="padding: 8px; border: 1px solid #90CAF9;">3.0</td>
            </tr>
            <tr style="background-color: #E3F2FD;">
                <td style="padding: 8px; border: 1px solid #90CAF9;">80-82</td>
                <td style="padding: 8px; border: 1px solid #90CAF9;">B-</td>
                <td style="padding: 8px; border: 1px solid #90CAF9;">2.7</td>
            </tr>
            <tr>
                <td style="padding: 8px; border: 1px solid #90CAF9;">77-79</td>
                <td style="padding: 8px; border: 1px solid #90CAF9;">C+</td>
                <td style="padding: 8px; border: 1px solid #90CAF9;">2.3</td>
            </tr>
            <tr style="background-color: #E3F2FD;">
                <td style="padding: 8px; border: 1px solid #90CAF9;">73-76</td>
                <td style="padding: 8px; border: 1px solid #90CAF9;">C</td>
                <td style="padding: 8px; border: 1px solid #90CAF9;">2.0</td>
            </tr>
            <tr>
                <td style="padding: 8px; border: 1px solid #90CAF9;">70-72</td>
                <td style="padding: 8px; border: 1px solid #90CAF9;">C-</td>
                <td style="padding: 8px; border: 1px solid #90CAF9;">1.7</td>
            </tr>
        </table>
    </div>
</div>

<h2>ğŸš€ Part 2: Building the System Step-by-Step</h2>

<div style="background-color: #F3E5F5; padding: 20px; border-radius: 10px; margin: 20px 0;">
    <h3>Step 1: Core Functions - The Building Blocks</h3>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 15px;">
        <div>
            <h4>ğŸ“Š Function 1: Calculate Average & Grade</h4>
            <pre style="background-color: white; padding: 10px; border-radius: 5px;">
def calculate_average(grades):
    """Calculate average from list of grades"""
    return sum(grades) / len(grades)



    """Convert percentage to letter grade"""
def get_letter_grade(average):
    if average >= 97:
        return "A+", 4.0
    elif average >= 93:
        return "A", 4.0
    elif average >= 90:
        return "A-", 3.7
    elif average >= 87:
        return "B+", 3.3
    elif average >= 83:
        return "B", 3.0
    elif average >= 80:
        return "B-", 2.7
    elif average >= 77:
        return "C+", 2.3
    elif average >= 73:
        return "C", 2.0
    elif average >= 70:
        return "C-", 1.7
    elif average >= 67:
        return "D+", 1.3
    elif average >= 65:
        return "D", 1.0
    else:
        return "F", 0.0
            </pre>
        </div>
        
        <div>
            <h4>ğŸ“ Function 2: Read Student Data</h4>
            <pre style="background-color: white; padding: 10px; border-radius: 5px;">
import csv

def load_student_data(filename="students.csv"):
    """Load student data from CSV file"""
    students = []
    
    try:
        with open(filename, "r") as file:
            reader = csv.DictReader(file)
            
            for row in reader:
                # Convert grades to integers
                student = {
                    'id': row['StudentID'],
                    'name': row['Name'],
                    'grades': {
                        'Math': int(row['Math']),
                        'Science': int(row['Science']),
                        'English': int(row['English']),
                        'History': int(row['History']),
                        'Art': int(row['Art'])
                    }
                }
                students.append(student)
        
        print(f"âœ… Loaded {len(students)} students from {filename}")
        return students
        
    except FileNotFoundError:
        print(f"âŒ Error: Could not find {filename}")
        return []
            </pre>
        </div>
    </div>
</div>

<div style="background-color: #FFF3E0; padding: 20px; border-radius: 10px; margin: 20px 0;">
    <h3>Step 2: Generate Report Cards</h3>
    
    <div style="background-color: white; padding: 15px; border-radius: 8px; margin: 15px 0;">
        <h4>ğŸ“„ Function: Create Individual Report Card</h4>
        <pre style="background-color: #f5f5f5; padding: 10px; border-radius: 5px;">
from datetime import datetime

def generate_report_card(student, output_folder="report_cards"):
    """Generate a beautiful report card for one student"""
    
    import os
    
    # Create folder if it doesn't exist
    if not os.path.exists(output_folder):
        os.makedirs(output_folder)
    
    # Calculate statistics
    grades_list = list(student['grades'].values())
    average = calculate_average(grades_list)
    letter_grade, gpa = get_letter_grade(average)
    
    # Find best and worst subjects
    best_subject = max(student['grades'].items(), key=lambda x: x[1])
    worst_subject = min(student['grades'].items(), key=lambda x: x[1])
    
    # Create filename
    filename = f"{output_folder}/{student['name'].replace(' ', '_')}_Report.txt"
    
    # Generate report card content
    report = f"""
                {'='*60}
                            ACADEMIC REPORT CARD
                {'='*60}

                Student Information:
                Name: {student['name']}
                ID: {student['id']}
                Report Date: {datetime.now().strftime('%B %d, %Y')}

                {'='*60}
                            SUBJECT GRADES
                {'='*60}

            """
    
    # Add each subject grade
    for subject, grade in student['grades'].items():
        report += f"  {subject:15} {grade:3} / 100\n"
    
    report += f"""
                    {'='*60}
                                ACADEMIC SUMMARY
                    {'='*60}

                    Overall Average: {average:.1f}%
                    Letter Grade:    {letter_grade}
                    GPA:             {gpa:.1f}
                    
                    Best Subject:    {best_subject[0]} ({best_subject[1]}%)
                    Needs Improvement: {worst_subject[0]} ({worst_subject[1]}%)

                    {'='*60}
                                TEACHER'S COMMENTS
                    {'='*60}

                """
    

    # Add personalized comments based on performance
    if average >= 90:
        report += "  Outstanding work! Consistent excellence in all subjects."
        report += "  Continue challenging yourself with advanced material."
    elif average >= 80:
        report += "  Good performance! Solid understanding of course material."
        report += "  Focus on areas needing improvement for even better results."
    elif average >= 70:
        report += "  Satisfactory work. Meeting basic requirements."
        report += "  Consider extra help in weaker subjects."
    else:
        report += "  Needs improvement. Please schedule a parent-teacher meeting."
        report += "  Extra tutoring recommended."
    
    report += f"""
                    {'='*60}
                                NEXT STEPS
                    {'='*60}

                    â€¢ Review this report with parents/guardians
                    â€¢ Set academic goals for next quarter
                    â€¢ Focus improvement efforts on: {worst_subject[0]}
                    â€¢ Continue excellence in: {best_subject[0]}

                    {'='*60}
                """
    
        # Save to file
        with open(filename, "w") as file:
            file.write(report)
        
        print(f"âœ… Generated report card: {filename}")
        return filename
        </pre>
    </div>
</div>

<div style="background-color: #E8F5E9; padding: 20px; border-radius: 10px; margin: 20px 0;">
    <h3>Step 3: Class Statistics & Analysis</h3>
    
    <div style="background-color: white; padding: 15px; border-radius: 8px; margin: 15px 0;">
        <h4>ğŸ“ˆ Function: Generate Class Summary</h4>
        <pre style="background-color: #f5f5f5; padding: 10px; border-radius: 5px;">
def generate_class_summary(students, filename="class_summary.txt"):
    """Generate detailed class statistics"""
    
    if not students:
        print("âŒ No student data available")
        return
    
    # Calculate class statistics
    subject_totals = {'Math': 0, 'Science': 0, 'English': 0, 'History': 0, 'Art': 0}
    subject_counts = {'Math': 0, 'Science': 0, 'English': 0, 'History': 0, 'Art': 0}
    student_averages = []
    
    for student in students:
        grades = list(student['grades'].values())
        average = calculate_average(grades)
        student_averages.append(average)
        
        # Add to subject totals
        for subject, grade in student['grades'].items():
            subject_totals[subject] += grade
            subject_counts[subject] += 1
    
    # Calculate subject averages
    subject_averages = {}
    for subject in subject_totals:
        if subject_counts[subject] > 0:
            subject_averages[subject] = subject_totals[subject] / subject_counts[subject]
    
    # Calculate class average
    class_average = sum(student_averages) / len(student_averages)
    
    # Find top and bottom students
    top_student = max(students, key=lambda s: calculate_average(list(s['grades'].values())))
    bottom_student = min(students, key=lambda s: calculate_average(list(s['grades'].values())))
    
    # Generate summary report
                            summary = f"""
                        {'='*70}
                                        CLASS STATISTICS REPORT
                        {'='*70}

                        Class: Programming Mastery Class
                        Report Date: {datetime.now().strftime('%B %d, %Y')}
                        Total Students: {len(students)}

                        {'='*70}
                                    SUBJECT PERFORMANCE AVERAGES
                        {'='*70}

                        """
    
                        for subject, avg in subject_averages.items():
                            summary += f"  {subject:15} {avg:6.1f}%"
                        
                        summary += f"""
                    {'='*70}
                                OVERALL CLASS PERFORMANCE
                    {'='*70}

                Class Average: {class_average:.1f}%
                Highest Average: {calculate_average(list(top_student['grades'].values())):.1f}% 
                    ({top_student['name']})
                Lowest Average: {calculate_average(list(bottom_student['grades'].values())):.1f}%
                    ({bottom_student['name']})

                {'='*70}
                            GRADE DISTRIBUTION
                {'='*70}

                """
    

                    # Count letter grades
                    grade_distribution = {'A': 0, 'B': 0, 'C': 0, 'D': 0, 'F': 0}
                    
                    for avg in student_averages:
                        letter_grade, _ = get_letter_grade(avg)
                        first_letter = letter_grade[0]  # Get first letter (A, B, C, etc.)
                        if first_letter in grade_distribution:
                            grade_distribution[first_letter] += 1
                    
                    for grade, count in grade_distribution.items():
                        percentage = (count / len(students)) * 100
                        bar = "â–ˆ" * int(percentage / 5)  # Each â–ˆ represents 5%
                        summary += f"  {grade}: {count:2} students {bar} {percentage:5.1f}%"
                    
                summary += f"""
                        {'='*70}
                                    RECOMMENDATIONS
                        {'='*70}

                        â€¢ Strongest Subject: {max(subject_averages.items(), key=lambda x: x[1])[0]}
                        â€¢ Weakest Subject: {min(subject_averages.items(), key=lambda x: x[1])[0]}
                        â€¢ Focus Areas: Individual tutoring for students below 70%
                        â€¢ Enrichment: Advanced projects for top 20% of students

                        {'='*70}
                """
    
            # Save summary
            with open(filename, "w") as file:
                file.write(summary)
            
            print(f"âœ… Generated class summary: {filename}")
            return filename
        </pre>
    </div>
</div>

<h2>ğŸ® Part 3: The Main Program - Putting It All Together</h2>

<div style="background-color: #F3E5F5; padding: 20px; border-radius: 10px; margin: 20px 0;">
    <h3>ğŸš€ Complete Grading System</h3>
    
    <div style="background-color: white; padding: 15px; border-radius: 8px; margin: 15px 0;">
        <h4>ğŸ“‹ Main Menu & User Interface</h4>
        <pre style="background-color: #f5f5f5; padding: 10px; border-radius: 5px;">
def main():
    """Main grading system program"""
    
    print("ğŸ“" * 25)
    print("         STUDENT GRADING SYSTEM - QUARTER 1 FINALE")
    print("ğŸ“" * 25)
    
    # Load student data
    students = load_student_data()
    
    if not students:
        print("âŒ No student data loaded. Exiting...")
        return
    
    while True:
        print("\" + "="*60)
        print("MAIN MENU")
        print("="*60)
        print("1. View All Students")
        print("2. Generate Individual Report Cards")
        print("3. Generate Class Summary Report")
        print("4. Search for Student")
        print("5. Add New Student")
        print("6. View Class Statistics")
        print("7. Backup Student Data")
        print("8. Exit")
        print("="*60)
        
        choice = input("Enter your choice (1-8): ")
        
        if choice == "1":
            print("\ğŸ“š ALL STUDENTS:")
            print("-"*40)
            for student in students:
                grades = list(student['grades'].values())
                avg = calculate_average(grades)
                letter, _ = get_letter_grade(avg)
                print(f"{student['id']}: {student['name']} - Avg: {avg:.1f}% ({letter})")
        
        elif choice == "2":
            print("\ğŸ“„ GENERATING REPORT CARDS...")
            for student in students:
                generate_report_card(student)
            print(f"âœ… Generated {len(students)} report cards!")
        
        elif choice == "3":
            print("\ğŸ“Š GENERATING CLASS SUMMARY...")
            generate_class_summary(students)
            print("âœ… Class summary generated!")
        
        elif choice == "4":
            search_name = input("\Enter student name to search: ").lower()
            found = False
            for student in students:
                if search_name in student['name'].lower():
                    print(f"\ğŸ¯ Found: {student['name']} (ID: {student['id']})")
                    for subject, grade in student['grades'].items():
                        print(f"   {subject}: {grade}%")
                    found = True
                    break
            if not found:
                print("âŒ Student not found.")
        
        elif choice == "5":
            print("\ğŸ‘¤ ADD NEW STUDENT")
            # Implementation for adding new students
            print("Feature coming soon!")
        
        elif choice == "6":
            print("\ğŸ“ˆ CLASS STATISTICS")
            # Display quick statistics
            grades_all = [list(s['grades'].values()) for s in students]
            averages = [calculate_average(g) for g in grades_all]
            print(f"Class Average: {sum(averages)/len(averages):.1f}%")
            print(f"Highest Average: {max(averages):.1f}%")
            print(f"Lowest Average: {min(averages):.1f}%")
        
        elif choice == "7":
            print("\ğŸ’¾ BACKING UP DATA...")
            import shutil
            import datetime
            timestamp = datetime.datetime.now().strftime("%Y%m%d_%H%M%S")
            backup_file = f"students_backup_{timestamp}.csv"
            shutil.copy2("students.csv", backup_file)
            print(f"âœ… Backup created: {backup_file}")
        
        elif choice == "8":
            print("\ğŸ‘‹ Thank you for using the Student Grading System!")
            print("Good luck in Quarter 2! ğŸš€")
            break
        
        else:
            print("âŒ Invalid choice. Please try again.")

# Run the program
if __name__ == "__main__":
    main()
        </pre>
    </div>
</div>

<h2>ğŸ† Quarter 1 Achievement Badges</h2>

<div style="background-color: #FFF3E0; padding: 20px; border-radius: 10px; margin: 20px 0;">
    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; text-align: center;">
        <div style="background-color: #FFE0B2; padding: 20px; border-radius: 8px;">
            <div style="font-size: 40px;">ğŸ–ï¸</div>
            <h4>The Python Initiate</h4>
            <p>Mastered Python basics and logic</p>
        </div>
        <div style="background-color: #BBDEFB; padding: 20px; border-radius: 8px;">
            <div style="font-size: 40px;">ğŸ–ï¸</div>
            <h4>The Scripting Scout</h4>
            <p>Automated tasks with functions & loops</p>
        </div>
        <div style="background-color: #C8E6C9; padding: 20px; border-radius: 8px;">
            <div style="font-size: 40px;">ğŸ–ï¸</div>
            <h4>The Data Handler</h4>
            <p>Managed files and data like a pro</p>
        </div>
    </div>
    
    <div style="text-align: center; margin-top: 30px; padding: 20px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border-radius: 10px;">
        <h2>ğŸ‰ QUARTER 1 COMPLETE! ğŸ‰</h2>
        <h3>ğŸ† PROMOTION TO YEAR 3, QUARTER 2! ğŸ†</h3>
        <p>You are now ready to become...</p>
        <h2>ğŸ“Š THE DATA GUARDIAN ğŸ“Š</h2>
        <p>Next quarter: Databases, SQL, and protecting data!</p>
    </div>
</div>

<h3>ğŸ“š Final Homework: Enhance Your Grading System</h3>
<div style="background-color: #E8F5E9; padding: 20px; border-radius: 10px; margin: 20px 0;">
    <p><b>Choose 2+ features to add to your grading system:</b></p>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin: 15px 0;">
        <div style="background-color: white; padding: 10px; border-radius: 5px;">
            <b>ğŸŒŸ Bronze Level Features</b>
            <ul>
                <li>Add color to report cards</li>
                <li>Create HTML report cards</li>
                <li>Add attendance tracking</li>
                <li>Calculate term GPA</li>
            </ul>
        </div>
        <div style="background-color: white; padding: 10px; border-radius: 5px;">
            <b>ğŸš€ Silver Level Features</b>
            <ul>
                <li>Email report cards automatically</li>
                <li>Create graphs of grade distribution</li>
                <li>Predict future performance</li>
                <li>Add parent login system</li>
            </ul>
        </div>
        <div style="background-color: white; padding: 10px; border-radius: 5px;">
            <b>ğŸ’ Gold Level Features</b>
            <ul>
                <li>Web interface for the system</li>
                <li>Mobile app companion</li>
                <li>AI-powered grade predictions</li>
                <li>Integration with school systems</li>
            </ul>
        </div>
        <div style="background-color: white; padding: 10px; border-radius: 5px;">
            <b>ğŸ® Creative Features</b>
            <ul>
                <li>Gamify with achievement badges</li>
                <li>Add motivational messages</li>
                <li>Create study plan generator</li>
                <li>Build a virtual tutor</li>
            </ul>
        </div>
    </div>
</div>

<div style="text-align: center; margin: 30px 0; padding: 20px; background-color: #4CAF50; color: white; border-radius: 10px;">
    <h2>ğŸŠ CONGRATULATIONS PYTHON MASTERS! ğŸŠ</h2>
    <p>You have completed 12 weeks of intensive Python programming!</p>
    <p>You can now build real-world applications that solve actual problems!</p>
    <p><b>Remember:</b> This is just the beginning of your coding journey! ğŸš€</p>
</div>`
            },

            "4-13": {
                "icon": "fa-database",
                "title": "Database Basics & SQL Introduction",
                "html": `<h1>Month 4, Week 13: Welcome to Databases! ğŸ—„ï¸</h1>
<p>Welcome to <b>Quarter 2: The Data Guardian</b>! This quarter, we're leveling up from files to <b>real databases</b> - the technology that powers Facebook, Instagram, and every major app!</p>

<div class="analogy-box" style="background-color: #e3f2fd; border-left: 5px solid #2196F3; padding: 20px; margin: 20px 0; border-radius: 8px;">
    <b>ğŸ“š Analogy: The Ultimate Digital Library ğŸ“–</b><br/><br/>
    
    â€¢ <b>Database</b> = A magical infinite library<br/>
    â€¢ <b>Tables</b> = Different bookshelves (users, products, games)<br/>
    â€¢ <b>Rows</b> = Individual books on the shelf<br/>
    â€¢ <b>Columns</b> = Information about each book (title, author, pages)<br/>
    â€¢ <b>SQL</b> = The librarian's special language<br/>
    â€¢ <b>Primary Key</b> = Each book's unique ID number<br/>
    â€¢ <b>Relationships</b> = How different bookshelves connect
</div>

<div style="background-color: #FFF3E0; padding: 20px; border-radius: 10px; margin: 20px 0;">
    <h3>ğŸ“Š Why Databases Beat Files</h3>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 15px;">
        <div style="background-color: #FFEBEE; padding: 15px; border-radius: 8px;">
            <h4>ğŸ“ Files (Last Quarter)</h4>
            <ul>
                <li>ğŸ‘ Simple to use</li>
                <li>ğŸ‘ Good for small data</li>
                <li>âŒ Slow with lots of data</li>
                <li>âŒ Hard to search through</li>
                <li>âŒ No relationships</li>
                <li>âŒ Can crash with big files</li>
            </ul>
            <p><small>Like searching a book by reading every page!</small></p>
        </div>
        
        <div style="background-color: #E8F5E9; padding: 15px; border-radius: 8px;">
            <h4>ğŸ—„ï¸ Databases (This Quarter!)</h4>
            <ul>
                <li>ğŸ‘ Lightning fast searches</li>
                <li>ğŸ‘ Handles millions of records</li>
                <li>ğŸ‘ Multiple users at once</li>
                <li>ğŸ‘ Relationships between data</li>
                <li>ğŸ‘ Built-in security</li>
                <li>ğŸ‘ Never loses data</li>
            </ul>
            <p><small>Like asking a librarian for exactly what you need!</small></p>
        </div>
    </div>
</div>

<h2>ğŸ” Part 1: What is SQL?</h2>

<div style="background-color: #E1F5FE; padding: 20px; border-radius: 10px; margin: 20px 0;">
    <h3>ğŸ—£ï¸ SQL = Structured Query Language</h3>
    <p><b>It's how we talk to databases!</b> Just like Python has its own language, databases understand SQL.</p>
    
    <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; margin-top: 15px; text-align: center;">
        <div style="background-color: #BBDEFB; padding: 15px; border-radius: 8px;">
            <h4>ğŸ“ CREATE</h4>
            <p>"Make a new table"</p>
        </div>
        <div style="background-color: #C8E6C9; padding: 15px; border-radius: 8px;">
            <h4>ğŸ“¥ INSERT</h4>
            <p>"Add new data"</p>
        </div>
        <div style="background-color: #FFF9C4; padding: 15px; border-radius: 8px;">
            <h4>ğŸ” SELECT</h4>
            <p>"Find/read data"</p>
        </div>
        <div style="background-color: #F8BBD0; padding: 15px; border-radius: 8px;">
            <h4>âœï¸ UPDATE</h4>
            <p>"Change existing data"</p>
        </div>
    </div>
</div>

<h2>ğŸ—ï¸ Part 2: Your First Database - Video Game Collection</h2>

<div style="background-color: #F3E5F5; padding: 20px; border-radius: 10px; margin: 20px 0;">
    <h3>ğŸ® Let's Build a Game Collection Database</h3>
    
    <div style="background-color: white; padding: 15px; border-radius: 8px; margin: 15px 0;">
        <h4>ğŸ“‹ Planning Our Database Structure</h4>
        
        <div style="overflow-x: auto;">
            <table style="width:100%; border-collapse: collapse; margin-top: 10px;">
                <tr style="background-color: #D1C4E9;">
                    <th style="padding: 12px; border: 2px solid #7E57C2; text-align: left;">Column Name</th>
                    <th style="padding: 12px; border: 2px solid #7E57C2; text-align: left;">Data Type</th>
                    <th style="padding: 12px; border: 2px solid #7E57C2; text-align: left;">Description</th>
                    <th style="padding: 12px; border: 2px solid #7E57C2; text-align: left;">Example</th>
                </tr>
                <tr>
                    <td style="padding: 10px; border: 1px solid #D1C4E9;"><code>game_id</code></td>
                    <td style="padding: 10px; border: 1px solid #D1C4E9;">INTEGER</td>
                    <td style="padding: 10px; border: 1px solid #D1C4E9;">Unique ID for each game</td>
                    <td style="padding: 10px; border: 1px solid #D1C4E9;">1, 2, 3...</td>
                </tr>
                <tr style="background-color: #F3E5F5;">
                    <td style="padding: 10px; border: 1px solid #D1C4E9;"><code>title</code></td>
                    <td style="padding: 10px; border: 1px solid #D1C4E9;">VARCHAR(100)</td>
                    <td style="padding: 10px; border: 1px solid #D1C4E9;">Game title</td>
                    <td style="padding: 10px; border: 1px solid #D1C4E9;">"Minecraft"</td>
                </tr>
                <tr>
                    <td style="padding: 10px; border: 1px solid #D1C4E9;"><code>platform</code></td>
                    <td style="padding: 10px; border: 1px solid #D1C4E9;">VARCHAR(50)</td>
                    <td style="padding: 10px; border: 1px solid #D1C4E9;">Platform/console</td>
                    <td style="padding: 10px; border: 1px solid #D1C4E9;">"PC", "PS5"</td>
                </tr>
                <tr style="background-color: #F3E5F5;">
                    <td style="padding: 10px; border: 1px solid #D1C4E9;"><code>genre</code></td>
                    <td style="padding: 10px; border: 1px solid #D1C4E9;">VARCHAR(50)</td>
                    <td style="padding: 10px; border: 1px solid #D1C4E9;">Game genre</td>
                    <td style="padding: 10px; border: 1px solid #D1C4E9;">"Adventure", "RPG"</td>
                </tr>
                <tr>
                    <td style="padding: 10px; border: 1px solid #D1C4E9;"><code>release_year</code></td>
                    <td style="padding: 10px; border: 1px solid #D1C4E9;">INTEGER</td>
                    <td style="padding: 10px; border: 1px solid #D1C4E9;">Year released</td>
                    <td style="padding: 10px; border: 1px solid #D1C4E9;">2020, 2021</td>
                </tr>
                <tr style="background-color: #F3E5F5;">
                    <td style="padding: 10px; border: 1px solid #D1C4E9;"><code>rating</code></td>
                    <td style="padding: 10px; border: 1px solid #D1C4E9;">DECIMAL(3,1)</td>
                    <td style="padding: 10px; border: 1px solid #D1C4E9;">Rating out of 10</td>
                    <td style="padding: 10px; border: 1px solid #D1C4E9;">9.5, 8.0</td>
                </tr>
                <tr>
                    <td style="padding: 10px; border: 1px solid #D1C4E9;"><code>hours_played</code></td>
                    <td style="padding: 10px; border: 1px solid #D1C4E9;">INTEGER</td>
                    <td style="padding: 10px; border: 1px solid #D1C4E9;">Hours you've played</td>
                    <td style="padding: 10px; border: 1px solid #D1C4E9;">150, 80</td>
                </tr>
            </table>
        </div>
    </div>
</div>

<h2>ğŸ’» Part 3: Hands-On SQL with SQLite (No Installation Needed!)</h2>

<div style="background-color: #E8F5E9; padding: 20px; border-radius: 10px; margin: 20px 0;">
    <h3>ğŸ¯ Week 13 Assignment: Create Your First Database</h3>
    
    <div style="background-color: white; padding: 15px; border-radius: 8px; margin: 15px 0;">
        <h4>ğŸš€ Using Python's Built-in SQLite Database</h4>
        <pre style="background-color: #f5f5f5; padding: 10px; border-radius: 5px;">
import sqlite3

print("ğŸ® VIDEO GAME DATABASE MANAGER ğŸ®")
print("=" * 50)

# Step 1: Connect to database (creates it if doesn't exist)
connection = sqlite3.connect('games.db')
cursor = connection.cursor()

print("âœ… Connected to games.db database")

# Step 2: CREATE TABLE - Make our game collection table
create_table_sql = '''
CREATE TABLE IF NOT EXISTS games (
    game_id INTEGER PRIMARY KEY AUTOINCREMENT,
    title VARCHAR(100) NOT NULL,
    platform VARCHAR(50) NOT NULL,
    genre VARCHAR(50),
    release_year INTEGER,
    rating DECIMAL(3,1),
    hours_played INTEGER DEFAULT 0
)
'''

cursor.execute(create_table_sql)
print("âœ… Created 'games' table")

# Step 3: INSERT - Add some sample games
sample_games = [
    ('Minecraft', 'PC', 'Sandbox', 2011, 9.5, 150),
    ('Fortnite', 'PS5', 'Battle Royale', 2017, 8.0, 80),
    ('Roblox', 'Mobile', 'Sandbox', 2006, 7.5, 120),
    ('Among Us', 'PC', 'Social Deduction', 2018, 8.5, 40),
    ('The Legend of Zelda', 'Switch', 'Adventure', 2017, 9.8, 65),
    ('Mario Kart 8', 'Switch', 'Racing', 2014, 9.0, 30),
    ('Call of Duty', 'Xbox', 'FPS', 2022, 8.2, 55),
    ('FIFA 23', 'PS5', 'Sports', 2022, 8.5, 90)
]

insert_sql = '''
INSERT INTO games (title, platform, genre, release_year, rating, hours_played)
VALUES (?, ?, ?, ?, ?, ?)
'''

cursor.executemany(insert_sql, sample_games)
connection.commit()
print(f"âœ… Added {len(sample_games)} games to database")

# Step 4: SELECT - View all games
print("\ğŸ“‹ ALL GAMES IN COLLECTION:")
print("-" * 70)

cursor.execute('SELECT * FROM games')
all_games = cursor.fetchall()

for game in all_games:
    print(f"ID: {game[0]:3} | {game[1]:25} | {game[2]:8} | {game[3]:15} | {game[6]} hours")

# Step 5: Clean up
cursor.close()
connection.close()
print("\âœ… Database connection closed")
        </pre>
    </div>
</div>

<h2>ğŸ” Part 4: Basic SQL Queries - Finding Data</h2>

<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">
    <div style="background-color: #E8F5E9; padding: 15px; border-radius: 8px;">
        <h4>ğŸ¯ Example 1: Simple SELECT Queries</h4>
        <pre style="background-color: white; padding: 10px; border-radius: 5px;">
# Reconnect to database
conn = sqlite3.connect('games.db')
cur = conn.cursor()

print("ğŸ” SIMPLE SQL QUERIES")
print("=" * 50)

# Query 1: Get all games (basic select)
print("1ï¸âƒ£ All games:")
cur.execute('SELECT title, platform FROM games')
for row in cur.fetchall():
    print(f"  â€¢ {row[0]} ({row[1]})")

# Query 2: Get games with WHERE clause
print("2ï¸âƒ£ Switch games only:")
cur.execute("SELECT title FROM games WHERE platform = 'Switch'")
for row in cur.fetchall():
    print(f"  â€¢ {row[0]}")

# Query 3: Get high-rated games
print("3ï¸âƒ£ Highly rated games (9+):")
cur.execute("SELECT title, rating FROM games WHERE rating >= 9.0")
for row in cur.fetchall():
    print(f"  â€¢ {row[0]}: {row[1]}/10")

# Query 4: Order by rating
print("4ï¸âƒ£ Games sorted by rating (highest first):")
cur.execute("SELECT title, rating FROM games ORDER BY rating DESC")
for row in cur.fetchall():
    print(f"  â€¢ {row[0]}: {row[1]}")

conn.close()
        </pre>
    </div>
    
    <div style="background-color: #E1F5FE; padding: 15px; border-radius: 8px;">
        <h4>ğŸ® Example 2: Advanced SELECT Queries</h4>
        <pre style="background-color: white; padding: 10px; border-radius: 5px;">
conn = sqlite3.connect('games.db')
cur = conn.cursor()

print("ğŸ® ADVANCED SQL QUERIES")
print("=" * 50)

# Query 1: Count games by platform
print("1ï¸âƒ£ Games count by platform:")
cur.execute('''
    SELECT platform, COUNT(*) as game_count 
    FROM games 
    GROUP BY platform
    ORDER BY game_count DESC
''')
for row in cur.fetchall():
    print(f"  â€¢ {row[0]}: {row[1]} games")

# Query 2: Average rating by genre
print("2ï¸âƒ£ Average rating by genre:")
cur.execute('''
    SELECT genre, AVG(rating) as avg_rating 
    FROM games 
    GROUP BY genre
    ORDER BY avg_rating DESC
''')
for row in cur.fetchall():
    print(f"  â€¢ {row[0]}: {row[1]:.2f}/10")

# Query 3: Most played games
print("3ï¸âƒ£ Top 3 most played games:")
cur.execute('''
    SELECT title, hours_played 
    FROM games 
    ORDER BY hours_played DESC 
    LIMIT 3
''')
for i, row in enumerate(cur.fetchall(), 1):
    print(f"  {i}. {row[0]}: {row[1]} hours")

# Query 4: Games released in specific year
print("4ï¸âƒ£ Games released after 2020:")
cur.execute("SELECT title, release_year FROM games WHERE release_year > 2020")
for row in cur.fetchall():
    print(f"  â€¢ {row[0]} ({row[1]})")

# Query 5: Using LIKE for search
print("5ï¸âƒ£ Games containing 'Mari' (search):")
cur.execute("SELECT title FROM games WHERE title LIKE '%Mari%'")
for row in cur.fetchall():
    print(f"  â€¢ {row[0]}")

conn.close()
        </pre>
    </div>
</div>

<h3>ğŸ“Š Database Visual Guide</h3>
<div style="background-color: #FFF3E0; padding: 20px; border-radius: 10px; margin: 20px 0;">
    
    <div style="background-color: white; padding: 15px; border-radius: 8px; margin: 15px 0;">
        <h4>ğŸ® Our Games Table Visualized</h4>
        <div style="overflow-x: auto;">
            <table style="width:100%; border-collapse: collapse; font-family: monospace;">
                <tr style="background-color: #4CAF50; color: white;">
                    <th style="padding: 10px; border: 2px solid #388E3C;">game_id</th>
                    <th style="padding: 10px; border: 2px solid #388E3C;">title</th>
                    <th style="padding: 10px; border: 2px solid #388E3C;">platform</th>
                    <th style="padding: 10px; border: 2px solid #388E3C;">genre</th>
                    <th style="padding: 10px; border: 2px solid #388E3C;">release_year</th>
                    <th style="padding: 10px; border: 2px solid #388E3C;">rating</th>
                    <th style="padding: 10px; border: 2px solid #388E3C;">hours_played</th>
                </tr>
                <tr>
                    <td style="padding: 8px; border: 1px solid #C8E6C9; text-align: center;">1</td>
                    <td style="padding: 8px; border: 1px solid #C8E6C9;">Minecraft</td>
                    <td style="padding: 8px; border: 1px solid #C8E6C9;">PC</td>
                    <td style="padding: 8px; border: 1px solid #C8E6C9;">Sandbox</td>
                    <td style="padding: 8px; border: 1px solid #C8E6C9; text-align: center;">2011</td>
                    <td style="padding: 8px; border: 1px solid #C8E6C9; text-align: center;">9.5</td>
                    <td style="padding: 8px; border: 1px solid #C8E6C9; text-align: center;">150</td>
                </tr>
                <tr style="background-color: #F1F8E9;">
                    <td style="padding: 8px; border: 1px solid #C8E6C9; text-align: center;">2</td>
                    <td style="padding: 8px; border: 1px solid #C8E6C9;">Fortnite</td>
                    <td style="padding: 8px; border: 1px solid #C8E6C9;">PS5</td>
                    <td style="padding: 8px; border: 1px solid #C8E6C9;">Battle Royale</td>
                    <td style="padding: 8px; border: 1px solid #C8E6C9; text-align: center;">2017</td>
                    <td style="padding: 8px; border: 1px solid #C8E6C9; text-align: center;">8.0</td>
                    <td style="padding: 8px; border: 1px solid #C8E6C9; text-align: center;">80</td>
                </tr>
                <tr>
                    <td style="padding: 8px; border: 1px solid #C8E6C9; text-align: center;">3</td>
                    <td style="padding: 8px; border: 1px solid #C8E6C9;">Roblox</td>
                    <td style="padding: 8px; border: 1px solid #C8E6C9;">Mobile</td>
                    <td style="padding: 8px; border: 1px solid #C8E6C9;">Sandbox</td>
                    <td style="padding: 8px; border: 1px solid #C8E6C9; text-align: center;">2006</td>
                    <td style="padding: 8px; border: 1px solid #C8E6C9; text-align: center;">7.5</td>
                    <td style="padding: 8px; border: 1px solid #C8E6C9; text-align: center;">120</td>
                </tr>
                <tr style="background-color: #F1F8E9;">
                    <td style="padding: 8px; border: 1px solid #C8E6C9; text-align: center;">4</td>
                    <td style="padding: 8px; border: 1px solid #C8E6C9;">Among Us</td>
                    <td style="padding: 8px; border: 1px solid #C8E6C9;">PC</td>
                    <td style="padding: 8px; border: 1px solid #C8E6C9;">Social Deduction</td>
                    <td style="padding: 8px; border: 1px solid #C8E6C9; text-align: center;">2018</td>
                    <td style="padding: 8px; border: 1px solid #C8E6C9; text-align: center;">8.5</td>
                    <td style="padding: 8px; border: 1px solid #C8E6C9; text-align: center;">40</td>
                </tr>
            </table>
        </div>
        <p style="margin-top: 10px; font-size: 0.9em; color: #666;">
            ğŸ‘† This is what our database table looks like! Each row is a game, each column is information about the game.
        </p>
    </div>
</div>

<h3>ğŸ® Interactive Challenge: Game Store Database</h3>
<div style="background-color: #F3E5F5; padding: 20px; border-radius: 10px; margin: 20px 0;">
    <p><b>Build a complete game store database with these features:</b></p>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin: 15px 0;">
        <div style="background-color: white; padding: 10px; border-radius: 5px;">
            <b>ğŸ“‹ Required Tables</b>
            <ul>
                <li><code>games</code> - Game information</li>
                <li><code>customers</code> - Customer details</li>
                <li><code>purchases</code> - Who bought what</li>
                <li><code>reviews</code> - Customer reviews</li>
            </ul>
        </div>
        <div style="background-color: white; padding: 10px; border-radius: 5px;">
            <b>ğŸ” Required Queries</b>
            <ul>
                <li>Find most popular games</li>
                <li>Calculate total sales</li>
                <li>Find best customers</li>
                <li>Get average game ratings</li>
                <li>Search games by genre</li>
            </ul>
        </div>
    </div>
    
    <div style="background-color: #f5f5f5; padding: 15px; border-radius: 8px; margin-top: 15px;">
        <h5>ğŸ’¡ Starter Code for Customers Table</h5>
        <pre style="background-color: white; padding: 10px; border-radius: 5px;">
CREATE TABLE customers (
    customer_id INTEGER PRIMARY KEY AUTOINCREMENT,
    username VARCHAR(50) UNIQUE NOT NULL,
    email VARCHAR(100) UNIQUE NOT NULL,
    age INTEGER CHECK (age >= 13),
    join_date DATE DEFAULT CURRENT_DATE,
    total_spent DECIMAL(10,2) DEFAULT 0.00
);

-- Sample customers
INSERT INTO customers (username, email, age) VALUES
('gamer123', 'gamer123@email.com', 14),
('pro_player', 'pro@game.com', 16),
('minecraft_fan', 'minecraft@email.com', 12),
('cod_expert', 'cod@email.com', 15);
        </pre>
    </div>
</div>

<div style="background-color: #E8F5E9; padding: 20px; border-radius: 10px; margin: 20px 0;">
    <h3>ğŸ“š SQL Cheat Sheet - Week 13</h3>
    
    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin-top: 15px;">
        <div style="background-color: white; padding: 10px; border-radius: 5px; border: 1px solid #4CAF50;">
            <h5>ğŸ“ CREATE TABLE</h5>
            <pre style="background-color: #f5f5f5; padding: 5px; font-size: 0.9em;">
CREATE TABLE table_name (
    column1 TYPE,
    column2 TYPE,
    PRIMARY KEY(column1)
);
            </pre>
        </div>
        <div style="background-color: white; padding: 10px; border-radius: 5px; border: 1px solid #2196F3;">
            <h5>ğŸ“¥ INSERT</h5>
            <pre style="background-color: #f5f5f5; padding: 5px; font-size: 0.9em;">
INSERT INTO table_name 
(column1, column2)
VALUES 
(value1, value2);
            </pre>
        </div>
        <div style="background-color: white; padding: 10px; border-radius: 5px; border: 1px solid #FF9800;">
            <h5>ğŸ” SELECT</h5>
            <pre style="background-color: #f5f5f5; padding: 5px; font-size: 0.9em;">
SELECT column1, column2 
FROM table_name 
WHERE condition 
ORDER BY column1;
            </pre>
        </div>
        <div style="background-color: white; padding: 10px; border-radius: 5px; border: 1px solid #9C27B0;">
            <h5>ğŸ“Š AGGREGATE FUNCTIONS</h5>
            <pre style="background-color: #f5f5f5; padding: 5px; font-size: 0.9em;">
COUNT()  -- Count rows
SUM()    -- Add values
AVG()    -- Average
MAX()    -- Maximum
MIN()    -- Minimum
            </pre>
        </div>
    </div>
</div>

<h3>ğŸ† This Week's Achievement: "Database Explorer"</h3>
<div style="text-align: center; margin: 30px 0; padding: 20px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border-radius: 10px;">
    <h2>ğŸ‰ WELCOME TO DATABASES! ğŸ‰</h2>
    <p>You've taken your first step into the world of professional data management!</p>
    <p>Next week: More SQL power - UPDATE, DELETE, and complex queries!</p>
    <div style="margin-top: 15px; font-size: 24px;">
        ğŸ—„ï¸ â†’ ğŸ” â†’ ğŸ“Š â†’ ğŸš€
    </div>
</div>`
            },
            "4-14": {
                "icon": "fa-table",
                "title": "Creating Tables & Data Types",
                "html": `<h1>Month 4, Week 14: Creating Tables & Data Types ğŸ“‹</h1>
<p>This week, we become <b>database architects</b>! We'll learn to design perfect tables with the right data types - just like building with LEGO blocks! ğŸ§±</p>

<div class="analogy-box" style="background-color: #e3f2fd; border-left: 5px solid #2196F3; padding: 20px; margin: 20px 0; border-radius: 8px;">
    <b>ğŸ—ï¸ Analogy: The Database Architect's Blueprint ğŸ“</b><br/><br/>
    
    â€¢ <b>Database</b> = A new city being built<br/>
    â€¢ <b>Tables</b> = Different building types (apartments, shops, schools)<br/>
    â€¢ <b>Columns</b> = Rooms in each building (kitchen, bedroom, bathroom)<br/>
    â€¢ <b>Data Types</b> = What each room is for (INTEGER = bedrooms, VARCHAR = room names)<br/>
    â€¢ <b>Primary Key</b> = Each building's unique address<br/>
    â€¢ <b>Constraints</b> = Building rules (NOT NULL = must have a door)<br/>
    â€¢ <b>Default Values</b> = Standard furniture that comes with each room
</div>

<div style="background-color: #FFF3E0; padding: 20px; border-radius: 10px; margin: 20px 0;">
    <h2>ğŸ¯ Data Types: Choosing the Right "Box" for Your Data</h2>
    
    <div style="overflow-x: auto; margin-top: 15px;">
        <table style="width:100%; border-collapse: collapse;">
            <tr style="background-color: #FFE0B2;">
                <th style="padding: 12px; border: 2px solid #FF9800; text-align: left;">Data Type</th>
                <th style="padding: 12px; border: 2px solid #FF9800; text-align: left;">What It Stores</th>
                <th style="padding: 12px; border: 2px solid #FF9800; text-align: left;">Example</th>
                <th style="padding: 12px; border: 2px solid #FF9800; text-align: left;">Size Range</th>
                <th style="padding: 12px; border: 2px solid #FF9800; text-align: left;">When to Use</th>
            </tr>
            <tr>
                <td style="padding: 10px; border: 1px solid #FFE0B2;"><code>INTEGER</code></td>
                <td style="padding: 10px; border: 1px solid #FFE0B2;">Whole numbers</td>
                <td style="padding: 10px; border: 1px solid #FFE0B2;">-10, 0, 42, 1000</td>
                <td style="padding: 10px; border: 1px solid #FFE0B2;">-2Â³Â¹ to 2Â³Â¹-1</td>
                <td style="padding: 10px; border: 1px solid #FFE0B2;">Ages, counts, IDs</td>
            </tr>
            <tr style="background-color: #FFF8E1;">
                <td style="padding: 10px; border: 1px solid #FFE0B2;"><code>VARCHAR(n)</code></td>
                <td style="padding: 10px; border: 1px solid #FFE0B2;">Text/strings</td>
                <td style="padding: 10px; border: 1px solid #FFE0B2;">"Hello", "Python"</td>
                <td style="padding: 10px; border: 1px solid #FFE0B2;">Up to n characters</td>
                <td style="padding: 10px; border: 1px solid #FFE0B2;">Names, emails, addresses</td>
            </tr>
            <tr>
                <td style="padding: 10px; border: 1px solid #FFE0B2;"><code>DECIMAL(m,n)</code></td>
                <td style="padding: 10px; border: 1px solid #FFE0B2;">Exact decimal numbers</td>
                <td style="padding: 10px; border: 1px solid #FFE0B2;">99.99, 3.14159</td>
                <td style="padding: 10px; border: 1px solid #FFE0B2;">m total digits, n decimals</td>
                <td style="padding: 10px; border: 1px solid #FFE0B2;">Money, ratings, measurements</td>
            </tr>
            <tr style="background-color: #FFF8E1;">
                <td style="padding: 10px; border: 1px solid #FFE0B2;"><code>BOOLEAN</code></td>
                <td style="padding: 10px; border: 1px solid #FFE0B2;">True/False values</td>
                <td style="padding: 10px; border: 1px solid #FFE0B2;">TRUE, FALSE</td>
                <td style="padding: 10px; border: 1px solid #FFE0B2;">1 byte</td>
                <td style="padding: 10px; border: 1px solid #FFE0B2;">Yes/No questions, flags</td>
            </tr>
            <tr>
                <td style="padding: 10px; border: 1px solid #FFE0B2;"><code>DATE</code></td>
                <td style="padding: 10px; border: 1px solid #FFE0B2;">Dates (no time)</td>
                <td style="padding: 10px; border: 1px solid #FFE0B2;">'2024-01-15'</td>
                <td style="padding: 10px; border: 1px solid #FFE0B2;">YYYY-MM-DD</td>
                <td style="padding: 10px; border: 1px solid #FFE0B2;">Birthdays, events</td>
            </tr>
            <tr style="background-color: #FFF8E1;">
                <td style="padding: 10px; border: 1px solid #FFE0B2;"><code>TIMESTAMP</code></td>
                <td style="padding: 10px; border: 1px solid #FFE0B2;">Date + time</td>
                <td style="padding: 10px; border: 1px solid #FFE0B2;">'2024-01-15 14:30:00'</td>
                <td style="padding: 10px; border: 1px solid #FFE0B2;">YYYY-MM-DD HH:MM:SS</td>
                <td style="padding: 10px; border: 1px solid #FFE0B2;">Logins, purchases, messages</td>
            </tr>
            <tr>
                <td style="padding: 10px; border: 1px solid #FFE0B2;"><code>BLOB</code></td>
                <td style="padding: 10px; border: 1px solid #FFE0B2;">Binary data</td>
                <td style="padding: 10px; border: 1px solid #FFE0B2;">Images, files</td>
                <td style="padding: 10px; border: 1px solid #FFE0B2;">Up to 2GB</td>
                <td style="padding: 10px; border: 1px solid #FFE0B2;">Profile pictures, documents</td>
            </tr>
        </table>
    </div>
</div>

<h2>ğŸ—ï¸ Part 1: Building a Social Media Database</h2>

<div style="background-color: #F3E5F5; padding: 20px; border-radius: 10px; margin: 20px 0;">
    <h3>ğŸ“± Project: Mini Instagram Clone Database</h3>
    
    <div style="background-color: white; padding: 15px; border-radius: 8px; margin: 15px 0;">
        <h4>ğŸ“‹ Planning Our Social Media Platform</h4>
        
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 15px;">
            <div>
                <h5>ğŸ‘¤ Users Table</h5>
                <ul>
                    <li>User profiles</li>
                    <li>Login information</li>
                    <li>Profile settings</li>
                    <li>Account statistics</li>
                </ul>
            </div>
            <div>
                <h5>ğŸ“¸ Posts Table</h5>
                <ul>
                    <li>Photos/videos</li>
                    <li>Captions</li>
                    <li>Likes & comments</li>
                    <li>Timestamps</li>
                </ul>
            </div>
        </div>
    </div>
</div>

<div style="background-color: #E8F5E9; padding: 20px; border-radius: 10px; margin: 20px 0;">
    <h3>ğŸš€ Creating the Users Table</h3>
    
    <pre style="background-color: white; padding: 15px; border-radius: 8px; overflow-x: auto;">
import sqlite3
from datetime import datetime

print("ğŸ“± SOCIAL MEDIA DATABASE BUILDER ğŸ“±")
print("=" * 60)

# Connect to database
conn = sqlite3.connect('social_media.db')
cursor = conn.cursor()

print("âœ… Connected to social_media.db")

# ====================================================================
# TABLE 1: users - Store user information
# ====================================================================

create_users_table = '''
CREATE TABLE IF NOT EXISTS users (
    user_id INTEGER PRIMARY KEY AUTOINCREMENT,
    username VARCHAR(50) UNIQUE NOT NULL,
    email VARCHAR(100) UNIQUE NOT NULL,
    password_hash VARCHAR(255) NOT NULL,
    full_name VARCHAR(100),
    bio VARCHAR(500),
    age INTEGER CHECK (age >= 13 AND age <= 120),
    profile_picture_url VARCHAR(255),
    is_verified BOOLEAN DEFAULT FALSE,
    is_private BOOLEAN DEFAULT FALSE,
    followers_count INTEGER DEFAULT 0,
    following_count INTEGER DEFAULT 0,
    post_count INTEGER DEFAULT 0,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    last_login TIMESTAMP,
    
    -- Add constraints
    CONSTRAINT valid_email CHECK (email LIKE '%@%.%'),
    CONSTRAINT username_length CHECK (LENGTH(username) BETWEEN 3 AND 50)
)
'''

cursor.execute(create_users_table)
print("âœ… Created 'users' table")

# ====================================================================
# TABLE 2: posts - Store user posts
# ====================================================================

create_posts_table = '''
CREATE TABLE IF NOT EXISTS posts (
    post_id INTEGER PRIMARY KEY AUTOINCREMENT,
    user_id INTEGER NOT NULL,
    image_url VARCHAR(255) NOT NULL,
    caption VARCHAR(2200),
    location VARCHAR(100),
    like_count INTEGER DEFAULT 0,
    comment_count INTEGER DEFAULT 0,
    save_count INTEGER DEFAULT 0,
    is_archived BOOLEAN DEFAULT FALSE,
    is_deleted BOOLEAN DEFAULT FALSE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    
    -- Foreign key to users table
    FOREIGN KEY (user_id) REFERENCES users(user_id)
        ON DELETE CASCADE
        ON UPDATE CASCADE
)
'''

cursor.execute(create_posts_table)
print("âœ… Created 'posts' table")

# ====================================================================
# Add sample users
# ====================================================================

sample_users = [
    ('coder_kid', 'alex@email.com', 'hashed_pass_123', 'Alex Johnson', 'Python programmer and gamer ğŸğŸ®', 14, 'https://example.com/alex.jpg', True, False),
    ('gamer_girl', 'sarah@email.com', 'hashed_pass_456', 'Sarah Wilson', 'Minecraft builder and Roblox creator ğŸ°âœ¨', 13, 'https://example.com/sarah.jpg', False, True),
    ('tech_wizard', 'david@email.com', 'hashed_pass_789', 'David Chen', 'Future AI engineer learning Python ğŸ¤–', 15, 'https://example.com/david.jpg', True, False),
    ('art_queen', 'emma@email.com', 'hashed_pass_abc', 'Emma Martinez', 'Digital artist and anime fan ğŸ¨ğŸŒ¸', 14, 'https://example.com/emma.jpg', False, False),
    ('sports_star', 'jamal@email.com', 'hashed_pass_def', 'Jamal Brown', 'Basketball player coding in my free time ğŸ€ğŸ’»', 15, 'https://example.com/jamal.jpg', False, True)
]

insert_user_sql = '''
INSERT INTO users 
(username, email, password_hash, full_name, bio, age, profile_picture_url, is_verified, is_private)
VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
'''

cursor.executemany(insert_user_sql, sample_users)
print(f"âœ… Added {len(sample_users)} sample users")

# ====================================================================
# Add sample posts
# ====================================================================

sample_posts = [
    (1, 'https://example.com/python_code.jpg', 'Just finished my first Python game! #coding #python', 'Home', 42, 8, 5),
    (2, 'https://example.com/minecraft_build.jpg', 'Spent all weekend on this castle! #minecraft #building', 'Creative Server', 128, 24, 18),
    (3, 'https://example.com/ai_project.jpg', 'Working on an AI that plays chess! #ai #machinelearning', 'Code Club', 56, 12, 9),
    (4, 'https://example.com/digital_art.jpg', 'New digital painting inspired by Studio Ghibli âœ¨ #art #anime', None, 89, 31, 22),
    (5, 'https://example.com/basketball_court.jpg', 'Game winner + new high score in my basketball game app! ğŸ€', 'School Gym', 67, 15, 11),
    (1, 'https://example.com/pygame_project.jpg', 'Learning PyGame to make 2D games! Anyone have tips? #gamedev', None, 31, 7, 3),
    (3, 'https://example.com/robot_project.jpg', 'Built a robot that sorts LEGO by color using Python! #robotics', 'Robotics Club', 102, 42, 28)
]

insert_post_sql = '''
INSERT INTO posts 
(user_id, image_url, caption, location, like_count, comment_count, save_count)
VALUES (?, ?, ?, ?, ?, ?, ?)
'''

cursor.executemany(insert_post_sql, sample_posts)
print(f"âœ… Added {len(sample_posts)} sample posts")

# ====================================================================
# Commit and show results
# ====================================================================

conn.commit()

print("ğŸ“Š DATABASE SUMMARY:")
print("-" * 40)

# Count users
cursor.execute("SELECT COUNT(*) FROM users")
user_count = cursor.fetchone()[0]
print(f"ğŸ‘¤ Total users: {user_count}")

# Count posts
cursor.execute("SELECT COUNT(*) FROM posts")
post_count = cursor.fetchone()[0]
print(f"ğŸ“¸ Total posts: {post_count}")

# Show users
print("ğŸ‘¥ USER LIST:")
cursor.execute("SELECT username, full_name, age, followers_count FROM users")
for user in cursor.fetchall():
    print(f"  â€¢ {user[0]} ({user[1]}, Age: {user[2]}) - Followers: {user[3]}")

# Show posts with usernames
print("ğŸ“ RECENT POSTS:")
cursor.execute('''
    SELECT u.username, p.caption, p.like_count, p.created_at
    FROM posts p
    JOIN users u ON p.user_id = u.user_id
    ORDER BY p.created_at DESC
    LIMIT 5
''')
for post in cursor.fetchall():
    # Shorten caption if too long
    caption = post[1] if len(post[1]) <= 50 else post[1][:47] + "..."
    print(f"  @{post[0]}: {caption}")
    print(f"    ğŸ‘ {post[2]} likes | ğŸ“… {post[3][:10]}")

# Close connection
cursor.close()
conn.close()
print("âœ… Database connection closed")
    </pre>
</div>

<h2>ğŸ”§ Part 2: Table Constraints - The Rules of Your Database</h2>

<div style="background-color: #E1F5FE; padding: 20px; border-radius: 10px; margin: 20px 0;">
    <h3>âš¡ Constraints: Making Your Database Smart & Safe</h3>
    
    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin-top: 15px;">
        <div style="background-color: white; padding: 15px; border-radius: 8px; border: 2px solid #4CAF50;">
            <h4>ğŸ”‘ PRIMARY KEY</h4>
            <p>Unique identifier for each row</p>
            <pre style="background-color: #E8F5E9; padding: 5px; font-size: 0.9em;">
user_id INTEGER 
PRIMARY KEY AUTOINCREMENT
            </pre>
            <p><small>Each user gets unique ID automatically!</small></p>
        </div>
        
        <div style="background-color: white; padding: 15px; border-radius: 8px; border: 2px solid #2196F3;">
            <h4>ğŸš« NOT NULL</h4>
            <p>Must have a value</p>
            <pre style="background-color: #E3F2FD; padding: 5px; font-size: 0.9em;">
username VARCHAR(50) 
NOT NULL
            </pre>
            <p><small>Can't create user without username!</small></p>
        </div>
        
        <div style="background-color: white; padding: 15px; border-radius: 8px; border: 2px solid #FF9800;">
            <h4>ğŸ¯ UNIQUE</h4>
            <p>No duplicate values</p>
            <pre style="background-color: #FFF3E0; padding: 5px; font-size: 0.9em;">
email VARCHAR(100) 
UNIQUE
            </pre>
            <p><small>Each email can only be used once!</small></p>
        </div>
        
        <div style="background-color: white; padding: 15px; border-radius: 8px; border: 2px solid #9C27B0;">
            <h4>âœ… CHECK</h4>
            <p>Custom validation rules</p>
            <pre style="background-color: #F3E5F5; padding: 5px; font-size: 0.9em;">
age INTEGER CHECK 
(age >= 13 AND age <= 120)
            </pre>
            <p><small>Age must be realistic!</small></p>
        </div>
        
        <div style="background-color: white; padding: 15px; border-radius: 8px; border: 2px solid #00BCD4;">
            <h4>âš–ï¸ DEFAULT</h4>
            <p>Automatic default value</p>
            <pre style="background-color: #E0F7FA; padding: 5px; font-size: 0.9em;">
followers_count 
INTEGER DEFAULT 0
            </pre>
            <p><small>New users start with 0 followers!</small></p>
        </div>
        
        <div style="background-color: white; padding: 15px; border-radius: 8px; border: 2px solid #8BC34A;">
            <h4>ğŸ”— FOREIGN KEY</h4>
            <p>Link between tables</p>
            <pre style="background-color: #F1F8E9; padding: 5px; font-size: 0.9em;">
FOREIGN KEY (user_id) 
REFERENCES users(user_id)
            </pre>
            <p><small>Posts must belong to real users!</small></p>
        </div>
    </div>
</div>

<h2>ğŸ® Part 3: Building a Gaming Platform Database</h2>

<div style="background-color: #FFF3E0; padding: 20px; border-radius: 10px; margin: 20px 0;">
    <h3>ğŸ† Week 14 Assignment: Game Streaming Platform</h3>
    
    <div style="background-color: white; padding: 15px; border-radius: 8px; margin: 15px 0;">
        <h4>ğŸ“‹ Design Requirements:</h4>
        
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 10px;">
            <div>
                <h5>ğŸ® Games Table</h5>
                <ul>
                    <li>Game information</li>
                    <li>Price and ratings</li>
                    <li>System requirements</li>
                    <li>Download statistics</li>
                </ul>
            </div>
            <div>
                <h5>ğŸ‘¥ Players Table</h5>
                <ul>
                    <li>Player profiles</li>
                    <li>Achievements</li>
                    <li>Friends lists</li>
                    <li>Game libraries</li>
                </ul>
            </div>
        </div>
    </div>
    
    <pre style="background-color: #f5f5f5; padding: 15px; border-radius: 8px; overflow-x: auto;">
# ====================================================================
# GAMING PLATFORM DATABASE
# ====================================================================

import sqlite3

conn = sqlite3.connect('gaming_platform.db')
cursor = conn.cursor()

# Table 1: games - Available games on the platform
create_games_table = '''
CREATE TABLE IF NOT EXISTS games (
    game_id INTEGER PRIMARY KEY AUTOINCREMENT,
    title VARCHAR(100) NOT NULL,
    developer VARCHAR(100) NOT NULL,
    publisher VARCHAR(100),
    release_date DATE NOT NULL,
    price DECIMAL(10,2) CHECK (price >= 0),
    rating DECIMAL(3,1) CHECK (rating >= 0 AND rating <= 10),
    age_rating VARCHAR(5),
    genre VARCHAR(50),
    multiplayer_supported BOOLEAN DEFAULT FALSE,
    cross_platform BOOLEAN DEFAULT FALSE,
    storage_required_mb INTEGER CHECK (storage_required_mb > 0),
    download_count INTEGER DEFAULT 0,
    average_playtime_hours DECIMAL(6,1) DEFAULT 0,
    
    UNIQUE(title, developer),  -- Same game from same developer
    CONSTRAINT valid_age_rating CHECK (
        age_rating IN ('E', 'E10+', 'T', 'M', 'AO', 'RP')
    )
)
'''

# Table 2: players - Users of the platform
create_players_table = '''
CREATE TABLE IF NOT EXISTS players (
    player_id INTEGER PRIMARY KEY AUTOINCREMENT,
    username VARCHAR(50) UNIQUE NOT NULL,
    email VARCHAR(100) UNIQUE NOT NULL,
    password_hash VARCHAR(255) NOT NULL,
    display_name VARCHAR(50),
    country_code CHAR(2),
    date_of_birth DATE,
    total_games_owned INTEGER DEFAULT 0,
    total_playtime_hours DECIMAL(8,1) DEFAULT 0,
    account_balance DECIMAL(10,2) DEFAULT 0.00,
    is_premium BOOLEAN DEFAULT FALSE,
    created_date DATE DEFAULT CURRENT_DATE,
    last_login TIMESTAMP,
    
    CONSTRAINT valid_email CHECK (email LIKE '%@%.%'),
    CONSTRAINT username_format CHECK (
        username NOT LIKE '% %' AND  -- No spaces
        LENGTH(username) BETWEEN 3 AND 50
    ),
    CONSTRAINT future_birth CHECK (date_of_birth < CURRENT_DATE)
)
'''

# Table 3: player_games - Which players own which games
create_player_games_table = '''
CREATE TABLE IF NOT EXISTS player_games (
    ownership_id INTEGER PRIMARY KEY AUTOINCREMENT,
    player_id INTEGER NOT NULL,
    game_id INTEGER NOT NULL,
    purchase_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    purchase_price DECIMAL(10,2),
    hours_played DECIMAL(8,1) DEFAULT 0,
    last_played TIMESTAMP,
    achievements_unlocked INTEGER DEFAULT 0,
    is_installed BOOLEAN DEFAULT FALSE,
    
    FOREIGN KEY (player_id) REFERENCES players(player_id)
        ON DELETE CASCADE,
    FOREIGN KEY (game_id) REFERENCES games(game_id)
        ON DELETE CASCADE,
    
    UNIQUE(player_id, game_id)  -- Can't own same game twice
)
'''

# Table 4: friends - Player friendships
create_friends_table = '''
CREATE TABLE IF NOT EXISTS friends (
    friendship_id INTEGER PRIMARY KEY AUTOINCREMENT,
    player1_id INTEGER NOT NULL,
    player2_id INTEGER NOT NULL,
    status VARCHAR(20) DEFAULT 'pending',
    date_sent TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    date_accepted TIMESTAMP,
    
    FOREIGN KEY (player1_id) REFERENCES players(player_id),
    FOREIGN KEY (player2_id) REFERENCES players(player_id),
    
    CHECK (player1_id != player2_id),  -- Can't friend yourself!
    CHECK (status IN ('pending', 'accepted', 'blocked')),
    UNIQUE(player1_id, player2_id)  -- Unique friendship
)
'''

# Execute all table creations
cursor.execute(create_games_table)
cursor.execute(create_players_table)
cursor.execute(create_player_games_table)
cursor.execute(create_friends_table)

print("âœ… Created 4 tables for gaming platform")
print("  1. games - Available games")
print("  2. players - User accounts")
print("  3. player_games - Game ownership")
print("  4. friends - Friend relationships")

# Add sample data
# ... (sample data would go here)

conn.commit()
conn.close()
print("ğŸ® Gaming platform database ready!")
    </pre>
</div>

<h2>ğŸ“Š Data Type Decision Guide</h2>

<div style="background-color: #F3E5F5; padding: 20px; border-radius: 10px; margin: 20px 0;">
    <h3>ğŸ¤” Which Data Type Should I Use?</h3>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 15px;">
        <div style="background-color: white; padding: 15px; border-radius: 8px;">
            <h4>ğŸ“ For Text Data</h4>
            <ul>
                <li><b>Short text (username, name):</b> <code>VARCHAR(50)</code></li>
                <li><b>Email addresses:</b> <code>VARCHAR(100)</code></li>
                <li><b>Passwords (hashed):</b> <code>VARCHAR(255)</code></li>
                <li><b>Long text (bio, comments):</b> <code>VARCHAR(1000)</code> or <code>TEXT</code></li>
                <li><b>URLs:</b> <code>VARCHAR(255)</code></li>
            </ul>
        </div>
        
        <div style="background-color: white; padding: 15px; border-radius: 8px;">
            <h4>ğŸ”¢ For Number Data</h4>
            <ul>
                <li><b>Counts (likes, followers):</b> <code>INTEGER</code></li>
                <li><b>Money/decimals:</b> <code>DECIMAL(10,2)</code></li>
                <li><b>Ratings (0-10):</b> <code>DECIMAL(3,1)</code></li>
                <li><b>Percentages:</b> <code>DECIMAL(5,2)</code></li>
                <li><b>True/False:</b> <code>BOOLEAN</code></li>
            </ul>
        </div>
        
        <div style="background-color: white; padding: 15px; border-radius: 8px;">
            <h4>ğŸ“… For Date/Time Data</h4>
            <ul>
                <li><b>Birthdays:</b> <code>DATE</code></li>
                <li><b>Created/updated times:</b> <code>TIMESTAMP</code></li>
                <li><b>Simple dates:</b> <code>DATE</code></li>
                <li><b>Countdowns:</b> <code>DATETIME</code></li>
            </ul>
        </div>
        
        <div style="background-color: white; padding: 15px; border-radius: 8px;">
            <h4>ğŸ¯ Special Cases</h4>
            <ul>
                <li><b>Unique IDs:</b> <code>INTEGER PRIMARY KEY AUTOINCREMENT</code></li>
                <li><b>Phone numbers:</b> <code>VARCHAR(20)</code> (not INTEGER!)</li>
                <li><b>Zip codes:</b> <code>VARCHAR(10)</code> (can have letters!)</li>
                <li><b>File sizes:</b> <code>BIGINT</code> (for large files)</li>
            </ul>
        </div>
    </div>
</div>

<h3>ğŸ¯ Interactive Exercise: Design Your Own Database</h3>
<div style="background-color: #E8F5E9; padding: 20px; border-radius: 10px; margin: 20px 0;">
    <p><b>Choose one platform and design its database:</b></p>
    
    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin: 15px 0;">
        <div style="background-color: white; padding: 10px; border-radius: 5px; text-align: center;">
            <h5>ğŸµ Music Streaming</h5>
            <p>Artists, albums, songs, playlists, users</p>
        </div>
        <div style="background-color: white; padding: 10px; border-radius: 5px; text-align: center;">
            <h5>ğŸ“š Online Library</h5>
            <p>Books, authors, members, loans, reviews</p>
        </div>
        <div style="background-color: white; padding: 10px; border-radius: 5px; text-align: center;">
            <h5>ğŸ›’ E-commerce Store</h5>
            <p>Products, categories, customers, orders, reviews</p>
        </div>
    </div>
    
    <div style="background-color: white; padding: 15px; border-radius: 8px; margin-top: 15px;">
        <h5>ğŸ“‹ Design Checklist</h5>
        <ul>
            <li>âœ… List all needed tables (3-5 tables)</li>
            <li>âœ… Choose primary keys for each table</li>
            <li>âœ… List columns with appropriate data types</li>
            <li>âœ… Add constraints (NOT NULL, UNIQUE, CHECK)</li>
            <li>âœ… Plan relationships between tables</li>
            <li>âœ… Add sample data (5-10 rows per table)</li>
        </ul>
        
        <div style="margin-top: 15px;">
            <h6>ğŸ’¡ Template for Your Design</h6>
            <pre style="background-color: #f5f5f5; padding: 10px; border-radius: 5px;">
-- ========== [YOUR PLATFORM] DATABASE DESIGN ==========

-- Table 1: [table1_name]
-- Purpose: 
-- Columns:
--   â€¢ column1 (TYPE) - description
--   â€¢ column2 (TYPE) - description
--   â€¢ column3 (TYPE) - description
-- Constraints: 
--   â€¢ PRIMARY KEY: 
--   â€¢ FOREIGN KEYS: 
--   â€¢ UNIQUE: 
--   â€¢ CHECK: 

CREATE TABLE table1_name (
    -- Your design here
);

-- Repeat for other tables...
            </pre>
        </div>
    </div>
</div>

<div style="background-color: #FFF3E0; padding: 20px; border-radius: 10px; margin: 20px 0;">
    <h3>ğŸ“š SQL Best Practices for Table Design</h3>
    
    <div style="background-color: white; padding: 15px; border-radius: 8px; margin-top: 15px;">
        <ul>
            <li><b>âœ… Use meaningful table/column names:</b> <code>users</code> not <code>tbl1</code>, <code>email</code> not <code>col3</code></li>
            <li><b>âœ… Always have a primary key:</b> Every table needs a unique identifier</li>
            <li><b>âœ… Use appropriate VARCHAR lengths:</b> Don't use <code>VARCHAR(255)</code> for everything!</li>
            <li><b>âœ… Add constraints early:</b> It's harder to add them later with data</li>
            <li><b>âœ… Use foreign keys for relationships:</b> This keeps your data connected</li>
            <li><b>âœ… Add indexes for frequently searched columns:</b> Speeds up searches</li>
            <li><b>âœ… Document your design:</b> Add comments explaining complex tables</li>
            <li><b>âœ… Test with sample data:</b> Make sure your design works with real data</li>
        </ul>
    </div>
</div>

<div style="text-align: center; margin: 30px 0; padding: 20px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border-radius: 10px;">
    <h2>ğŸ‰ TABLE MASTER ACHIEVED! ğŸ‰</h2>
    <p>You can now design professional database tables with proper data types!</p>
    <p>Next week: INSERT, UPDATE, DELETE - Modifying your database data!</p>
    <div style="margin-top: 15px; font-size: 24px;">
        ğŸ—ï¸ â†’ ğŸ“‹ â†’ ğŸ”§ â†’ ğŸš€
    </div>
</div>`
            },
            "4-15": {
                "icon": "fa-edit",
                "title": "INSERT & UPDATE Operations",
                "html": `<h1>Month 4, Week 15: INSERT & UPDATE Operations ğŸ“</h1>
<p>This week, we learn how to <b>add new data</b> and <b>modify existing data</b> in our databases! Think of it like editing a shared Google Doc - but for databases! âœï¸</p>

<div class="analogy-box" style="background-color: #e3f2fd; border-left: 5px solid #2196F3; padding: 20px; margin: 20px 0; border-radius: 8px;">
    <b>ğŸ“š Analogy: The Classroom Register ğŸ“‹</b><br/><br/>
    
    â€¢ <b>INSERT</b> = Adding a new student to the class list<br/>
    â€¢ <b>UPDATE</b> = Changing a student's grade or seat number<br/>
    â€¢ <b>Database Table</b> = The class register/attendance sheet<br/>
    â€¢ <b>Primary Key</b> = Each student's unique ID number<br/>
    â€¢ <b>Columns</b> = Information categories (name, age, grade)<br/>
    â€¢ <b>WHERE clause</b> = Which specific student to update<br/>
    â€¢ <b>SET clause</b> = What information to change<br/>
    â€¢ <b>VALUES</b> = The new information being added
</div>

<div style="background-color: #FFF3E0; padding: 20px; border-radius: 10px; margin: 20px 0;">
    <h2>ğŸ“Š INSERT vs UPDATE: What's the Difference?</h2>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 15px;">
        <div style="background-color: #E8F5E9; padding: 15px; border-radius: 8px; text-align: center;">
            <div style="font-size: 48px; margin-bottom: 10px;">â•</div>
            <h3>INSERT</h3>
            <p><b>Adds NEW rows</b> to the table</p>
            <p><small>Like adding a new contact to your phone</small></p>
            <div style="background-color: white; padding: 10px; border-radius: 5px; margin-top: 10px;">
                <code style="color: #4CAF50;">INSERT INTO table VALUES (...)</code>
            </div>
        </div>
        
        <div style="background-color: #E1F5FE; padding: 15px; border-radius: 8px; text-align: center;">
            <div style="font-size: 48px; margin-bottom: 10px;">âœï¸</div>
            <h3>UPDATE</h3>
            <p><b>Modifies EXISTING rows</b> in the table</p>
            <p><small>Like editing a contact's phone number</small></p>
            <div style="background-color: white; padding: 10px; border-radius: 5px; margin-top: 10px;">
                <code style="color: #2196F3;">UPDATE table SET ... WHERE ...</code>
            </div>
        </div>
    </div>
</div>

<h2>ğŸš€ Part 1: INSERT - Adding New Data</h2>

<div style="background-color: #F3E5F5; padding: 20px; border-radius: 10px; margin: 20px 0;">
    <h3>ğŸ® Project: Building a Game Store Database</h3>
    
    <div style="background-color: white; padding: 15px; border-radius: 8px; margin: 15px 0;">
        <h4>ğŸ“‹ Our Game Store Tables</h4>
        
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 10px;">
            <div>
                <h5>ğŸ¯ games Table</h5>
                <ul>
                    <li>Game information</li>
                    <li>Prices and ratings</li>
                    <li>Release dates</li>
                </ul>
            </div>
            <div>
                <h5>ğŸ‘¤ customers Table</h5>
                <ul>
                    <li>Customer details</li>
                    <li>Purchase history</li>
                    <li>Account balances</li>
                </ul>
            </div>
        </div>
    </div>
    
    <pre style="background-color: #f5f5f5; padding: 15px; border-radius: 8px; overflow-x: auto;">
import sqlite3
from datetime import datetime

print("ğŸ›’ GAME STORE DATABASE MANAGER ğŸ›’")
print("=" * 60)

# Connect to database
conn = sqlite3.connect('game_store.db')
cursor = conn.cursor()

print("âœ… Connected to game_store.db")

# ====================================================================
# CREATE TABLES (if they don't exist)
# ====================================================================

# Games table
cursor.execute('''
CREATE TABLE IF NOT EXISTS games (
    game_id INTEGER PRIMARY KEY AUTOINCREMENT,
    title VARCHAR(100) NOT NULL,
    developer VARCHAR(100) NOT NULL,
    price DECIMAL(10,2) CHECK (price >= 0),
    rating DECIMAL(3,1) CHECK (rating >= 0 AND rating <= 10),
    release_date DATE,
    genre VARCHAR(50),
    multiplayer BOOLEAN DEFAULT FALSE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
)
''')

# Customers table
cursor.execute('''
CREATE TABLE IF NOT EXISTS customers (
    customer_id INTEGER PRIMARY KEY AUTOINCREMENT,
    username VARCHAR(50) UNIQUE NOT NULL,
    email VARCHAR(100) UNIQUE NOT NULL,
    age INTEGER CHECK (age >= 13),
    country VARCHAR(50),
    balance DECIMAL(10,2) DEFAULT 0.00,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
)
''')

print("âœ… Tables ready for data insertion")

# ====================================================================
# METHOD 1: INSERT single row
# ====================================================================

print("â• METHOD 1: Insert Single Game")
print("-" * 40)

insert_single_game = '''
INSERT INTO games (title, developer, price, rating, release_date, genre, multiplayer)
VALUES (?, ?, ?, ?, ?, ?, ?)
'''

# Single game data
game_data = (
    'The Legend of Zelda: Breath of the Wild',
    'Nintendo',
    59.99,
    9.7,
    '2017-03-03',
    'Action-Adventure',
    True
)

cursor.execute(insert_single_game, game_data)
conn.commit()
print(f"âœ… Added: {game_data[0]}")

# ====================================================================
# METHOD 2: INSERT multiple rows at once
# ====================================================================

print("â•â• METHOD 2: Insert Multiple Games")
print("-" * 40)

# List of games to add
more_games = [
    ('Minecraft', 'Mojang', 26.95, 9.0, '2011-11-18', 'Sandbox', True),
    ('Fortnite', 'Epic Games', 0.00, 8.2, '2017-07-25', 'Battle Royale', True),
    ('Cyberpunk 2077', 'CD Projekt Red', 49.99, 7.5, '2020-12-10', 'RPG', False),
    ('Among Us', 'InnerSloth', 4.99, 8.5, '2018-06-15', 'Social Deduction', True),
    ('Hades', 'Supergiant Games', 24.99, 9.4, '2020-09-17', 'Roguelike', False)
]

cursor.executemany(insert_single_game, more_games)
conn.commit()
print(f"âœ… Added {len(more_games)} more games")

# ====================================================================
# METHOD 3: INSERT with column specification
# ====================================================================

print("ğŸ¯ METHOD 3: Insert Specific Columns Only")
print("-" * 40)

# Sometimes we don't have all data yet
insert_partial = '''
INSERT INTO games (title, developer, price, genre)
VALUES (?, ?, ?, ?)
'''

partial_games = [
    ('Upcoming Game 1', 'New Studio', 39.99, 'Adventure'),
    ('Upcoming Game 2', 'Another Studio', 29.99, 'Strategy')
]

cursor.executemany(insert_partial, partial_games)
conn.commit()
print(f"âœ… Added {len(partial_games)} upcoming games (partial info)")

# ====================================================================
# INSERT customers
# ====================================================================

print("ğŸ‘¥ ADDING CUSTOMERS")
print("-" * 40)

# Insert customers
customers_data = [
    ('gamer123', 'alex@email.com', 14, 'USA', 50.00),
    ('pro_player', 'sarah@email.com', 15, 'Canada', 25.50),
    ('minecraft_fan', 'david@email.com', 13, 'UK', 100.00),
    ('cod_expert', 'jamal@email.com', 16, 'Australia', 10.25),
    ('roblox_queen', 'emma@email.com', 14, 'USA', 75.75)
]

insert_customer = '''
INSERT INTO customers (username, email, age, country, balance)
VALUES (?, ?, ?, ?, ?)
'''

cursor.executemany(insert_customer, customers_data)
conn.commit()
print(f"âœ… Added {len(customers_data)} customers")

# ====================================================================
# Show what we inserted
# ====================================================================

print("ğŸ“Š DATABASE STATUS AFTER INSERTS")
print("-" * 40)

# Count games
cursor.execute("SELECT COUNT(*) FROM games")
game_count = cursor.fetchone()[0]
print(f"ğŸ® Total games in store: {game_count}")

# Count customers
cursor.execute("SELECT COUNT(*) FROM customers")
customer_count = cursor.fetchone()[0]
print(f"ğŸ‘¤ Total customers: {customer_count}")

# Show all games
print("ğŸ›ï¸ AVAILABLE GAMES:")
cursor.execute('''
    SELECT title, developer, price, rating 
    FROM games 
    ORDER BY rating DESC
''')
for game in cursor.fetchall():
    price_display = f"\${game[2]}" if game[2] > 0 else "FREE"
    rating_display = f"{game[3]}/10" if game[3] else "No rating"
    print(f"  â€¢ {game[0]:40} | {game[1]:20} | {price_display:8} | {rating_display}")

# Show all customers
print("ğŸ‘¥ REGISTERED CUSTOMERS:")
cursor.execute('''
    SELECT username, age, country, balance 
    FROM customers 
    ORDER BY balance DESC
''')
for customer in cursor.fetchall():
    print(f"  â€¢ {customer[0]:15} | Age: {customer[1]:2} | {customer[2]:12} | Balance: \${customer[3]:.2f}")

conn.close()
print("âœ… Database operations complete!")
    </pre>
</div>

<h2>âœï¸ Part 2: UPDATE - Modifying Existing Data</h2>

<div style="background-color: #E8F5E9; padding: 20px; border-radius: 10px; margin: 20px 0;">
    <h3>ğŸ”„ UPDATE Operations in Action</h3>
    
    <div style="background-color: white; padding: 15px; border-radius: 8px; margin: 15px 0;">
        <h4>âš ï¸ IMPORTANT: Always Use WHERE with UPDATE!</h4>
        <div style="background-color: #FFEBEE; padding: 15px; border-radius: 5px; margin: 10px 0;">
            <p><b>ğŸš¨ DANGER ZONE ğŸš¨</b></p>
            <p><code>UPDATE customers SET balance = 0</code> â† <b>BAD!</b> Updates ALL customers!</p>
            <p><code>UPDATE customers SET balance = 0 WHERE customer_id = 3</code> â† <b>GOOD!</b> Updates only one customer</p>
        </div>
    </div>
    
    <pre style="background-color: #f5f5f5; padding: 15px; border-radius: 8px; overflow-x: auto;">
import sqlite3

print("âœï¸ DATABASE UPDATE OPERATIONS âœï¸")
print("=" * 60)

conn = sqlite3.connect('game_store.db')
cursor = conn.cursor()

print("âœ… Connected to game_store.db")

# ====================================================================
# Show current state before updates
# ====================================================================

print("ğŸ“‹ CURRENT GAME PRICES:")
cursor.execute("SELECT game_id, title, price FROM games WHERE price > 0")
for game in cursor.fetchall():
    print(f"  ID {game[0]}: {game[1]:40} | \${game[2]:.2f}")

# ====================================================================
# UPDATE 1: Change a single game's price
# ====================================================================

print("ğŸ’° UPDATE 1: Price Change for Cyberpunk 2077")
print("-" * 40)

# Find the game first
cursor.execute("SELECT game_id, title, price FROM games WHERE title LIKE '%Cyberpunk%'")
cyberpunk = cursor.fetchone()

if cyberpunk:
    old_price = cyberpunk[2]
    new_price = 29.99  # On sale!
    
    update_price = '''
    UPDATE games 
    SET price = ?, 
        updated_at = CURRENT_TIMESTAMP 
    WHERE game_id = ?
    '''
    
    cursor.execute(update_price, (new_price, cyberpunk[0]))
    conn.commit()
    
    print(f"âœ… Updated: {cyberpunk[1]}")
    print(f"   Old price: \${old_price:.2f}")
    print(f"   New price: \${new_price:.2f}")
    print(f"   Discount: {((old_price - new_price) / old_price * 100):.1f}% OFF!")
else:
    print("âŒ Game not found")

# ====================================================================
# UPDATE 2: Apply sale to multiple games
# ====================================================================

print("ğŸ‰ UPDATE 2: Summer Sale - 20% OFF Adventure Games!")
print("-" * 40)

# Get adventure games before sale
cursor.execute('''
    SELECT game_id, title, price 
    FROM games 
    WHERE genre = 'Adventure' AND price > 0
''')
adventure_games = cursor.fetchall()

if adventure_games:
    print(f"Found {len(adventure_games)} adventure games for sale:")
    
    for game in adventure_games:
        old_price = game[2]
        new_price = round(old_price * 0.8, 2)  # 20% off
        
        update_sale = '''
        UPDATE games 
        SET price = ? 
        WHERE game_id = ?
        '''
        
        cursor.execute(update_sale, (new_price, game[0]))
        print(f"  â€¢ {game[1]:35} | \${old_price:5.2f} â†’ \${new_price:5.2f}")
    
    conn.commit()
    print(f"âœ… Updated {len(adventure_games)} games with 20% discount")
else:
    print("âŒ No adventure games found")

# ====================================================================
# UPDATE 3: Increase customer balance (like adding gift card)
# ====================================================================

print("\ğŸ UPDATE 3: Gift Card Bonus for Top Customers")
print("-" * 40)

# Give $10 bonus to customers with balance over $50
update_bonus = '''
UPDATE customers 
SET balance = balance + 10.00
WHERE balance >= 50.00
'''

cursor.execute(update_bonus)
affected_rows = cursor.rowcount
conn.commit()

print(f"âœ… Added $10 bonus to {affected_rows} customers")
print("   (Customers with balance $50+ got bonus)")

# Show which customers got bonus
cursor.execute('''
    SELECT username, balance 
    FROM customers 
    WHERE balance >= 60.00  # They had $50+, now have $60+
    ORDER BY balance DESC
''')
print("\ğŸ’° CUSTOMERS WHO RECEIVED BONUS:")
for customer in cursor.fetchall():
    print(f"  â€¢ {customer[0]:15} | New balance: \${customer[1]:.2f}")

# ====================================================================
# UPDATE 4: Complex update with multiple SETs
# ====================================================================

print("\ğŸ† UPDATE 4: Game Rating Updates Based on Popularity")
print("-" * 40)

# Games with high sales get rating boost
update_ratings = '''
UPDATE games 
SET 
    rating = CASE 
        WHEN rating < 9.0 THEN rating + 0.2
        WHEN rating >= 9.0 THEN rating + 0.1
        ELSE rating
    END,
    updated_at = CURRENT_TIMESTAMP
WHERE title IN ('Minecraft', 'The Legend of Zelda: Breath of the Wild', 'Hades')
'''

cursor.execute(update_ratings)
conn.commit()

print("âœ… Updated ratings for popular games")
print("  â€¢ +0.2 for games under 9.0")
print("  â€¢ +0.1 for games 9.0+")

# Show updated ratings
cursor.execute('''
    SELECT title, rating 
    FROM games 
    WHERE title IN ('Minecraft', 'The Legend of Zelda: Breath of the Wild', 'Hades')
    ORDER BY rating DESC
''')
print("\â­ UPDATED RATINGS:")
for game in cursor.fetchall():
    print(f"  â€¢ {game[0]:40} | {game[1]:.1f}/10")

# ====================================================================
# UPDATE 5: Using mathematical operations in SET
# ====================================================================

print("\ğŸ“ˆ UPDATE 5: Price Increase for Old Games")
print("-" * 40)

# Increase price of games older than 2018 by 5%
update_old_games = '''
UPDATE games 
SET price = ROUND(price * 1.05, 2)
WHERE release_date < '2018-01-01' AND price > 0
'''

cursor.execute(update_old_games)
updated_count = cursor.rowcount
conn.commit()

print(f"âœ… Increased prices for {updated_count} older games by 5%")

# Show price changes
cursor.execute('''
    SELECT title, release_date, price 
    FROM games 
    WHERE release_date < '2018-01-01' AND price > 0
''')
print("\ğŸ•°ï¸ OLDER GAMES WITH INCREASED PRICES:")
for game in cursor.fetchall():
    print(f"  â€¢ {game[0]:30} | {game[1]} | \${game[2]:.2f}")

# ====================================================================
# Final database status
# ====================================================================

print("\ğŸ“Š FINAL DATABASE STATUS")
print("-" * 40)

# Total value of game inventory
cursor.execute("SELECT SUM(price) FROM games WHERE price > 0")
total_value = cursor.fetchone()[0]
print(f"ğŸ’° Total game inventory value: \${total_value:.2f}")

# Customer total balance
cursor.execute("SELECT SUM(balance) FROM customers")
total_balance = cursor.fetchone()[0]
print(f"ğŸ’³ Total customer balance: \${total_balance:.2f}")

# Average game rating
cursor.execute("SELECT AVG(rating) FROM games WHERE rating > 0")
avg_rating = cursor.fetchone()[0]
print(f"â­ Average game rating: {avg_rating:.2f}/10")

conn.close()
print("\âœ… All update operations completed successfully!")
    </pre>
</div>

<h2>ğŸ® Part 3: Interactive Game Store Manager</h2>

<div style="background-color: #FFF3E0; padding: 20px; border-radius: 10px; margin: 20px 0;">
    <h3>ğŸ›’ Week 15 Assignment: Build a Game Store Management System</h3>
    
    <div style="background-color: white; padding: 15px; border-radius: 8px; margin: 15px 0;">
        <h4>ğŸ“‹ Features to Implement:</h4>
        
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 10px;">
            <div>
                <h5>â• INSERT Features</h5>
                <ul>
                    <li>Add new games to store</li>
                    <li>Register new customers</li>
                    <li>Add game reviews</li>
                    <li>Record purchases</li>
                </ul>
            </div>
            <div>
                <h5>âœï¸ UPDATE Features</h5>
                <ul>
                    <li>Update game prices</li>
                    <li>Adjust customer balances</li>
                    <li>Update game ratings</li>
                    <li>Modify customer details</li>
                </ul>
            </div>
        </div>
    </div>
    
    <pre style="background-color: #f5f5f5; padding: 15px; border-radius: 8px; overflow-x: auto;">
# ====================================================================
# COMPLETE GAME STORE MANAGEMENT SYSTEM
# ====================================================================

import sqlite3
import sys

class GameStoreManager:
    def __init__(self):
        self.conn = sqlite3.connect('game_store_system.db')
        self.cursor = self.conn.cursor()
        self.setup_database()
    
    def setup_database(self):
        """Create all necessary tables"""
        
        # Games table
        self.cursor.execute('''
        CREATE TABLE IF NOT EXISTS games (
            game_id INTEGER PRIMARY KEY AUTOINCREMENT,
            title VARCHAR(100) NOT NULL,
            developer VARCHAR(100) NOT NULL,
            price DECIMAL(10,2) DEFAULT 0.00,
            stock_quantity INTEGER DEFAULT 0,
            rating DECIMAL(3,1) DEFAULT 0.0,
            created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
        )
        ''')
        
        # Customers table
        self.cursor.execute('''
        CREATE TABLE IF NOT EXISTS customers (
            customer_id INTEGER PRIMARY KEY AUTOINCREMENT,
            username VARCHAR(50) UNIQUE NOT NULL,
            full_name VARCHAR(100) NOT NULL,
            email VARCHAR(100) UNIQUE NOT NULL,
            loyalty_points INTEGER DEFAULT 0,
            total_spent DECIMAL(10,2) DEFAULT 0.00,
            created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
        )
        ''')
        
        # Purchases table
        self.cursor.execute('''
        CREATE TABLE IF NOT EXISTS purchases (
            purchase_id INTEGER PRIMARY KEY AUTOINCREMENT,
            customer_id INTEGER NOT NULL,
            game_id INTEGER NOT NULL,
            purchase_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
            price_paid DECIMAL(10,2) NOT NULL,
            quantity INTEGER DEFAULT 1,
            
            FOREIGN KEY (customer_id) REFERENCES customers(customer_id),
            FOREIGN KEY (game_id) REFERENCES games(game_id)
        )
        ''')
        
        self.conn.commit()
    
    def add_new_game(self):
        """INSERT: Add a new game to the store"""
        print("\â• ADD NEW GAME")
        print("-" * 40)
        
        title = input("Game title: ")
        developer = input("Developer: ")
        price = float(input("Price: $"))
        stock = int(input("Stock quantity: "))
        
        insert_sql = '''
        INSERT INTO games (title, developer, price, stock_quantity)
        VALUES (?, ?, ?, ?)
        '''
        
        self.cursor.execute(insert_sql, (title, developer, price, stock))
        self.conn.commit()
        
        print(f"âœ… Added '{title}' to store with {stock} copies at \${price:.2f}")
    
    def register_customer(self):
        """INSERT: Register a new customer"""
        print("\ğŸ‘¤ REGISTER NEW CUSTOMER")
        print("-" * 40)
        
        username = input("Username: ")
        full_name = input("Full name: ")
        email = input("Email: ")
        
        insert_sql = '''
        INSERT INTO customers (username, full_name, email)
        VALUES (?, ?, ?)
        '''
        
        try:
            self.cursor.execute(insert_sql, (username, full_name, email))
            self.conn.commit()
            print(f"âœ… Registered customer: {username}")
        except sqlite3.IntegrityError:
            print("âŒ Username or email already exists!")
    
    def update_game_price(self):
        """UPDATE: Change a game's price"""
        print("\ğŸ’° UPDATE GAME PRICE")
        print("-" * 40)
        
        # Show current games
        self.cursor.execute("SELECT game_id, title, price FROM games")
        games = self.cursor.fetchall()
        
        if not games:
            print("âŒ No games in store")
            return
        
        print("Current games:")
        for game in games:
            print(f"  {game[0]}. {game[1]} - \${game[2]:.2f}")
        
        try:
            game_id = int(input("\Enter game ID to update: "))
            new_price = float(input("New price: $"))
            
            update_sql = '''
            UPDATE games 
            SET price = ? 
            WHERE game_id = ?
            '''
            
            self.cursor.execute(update_sql, (new_price, game_id))
            
            if self.cursor.rowcount > 0:
                self.conn.commit()
                print(f"âœ… Updated price to \${new_price:.2f}")
            else:
                print("âŒ Game ID not found")
                
        except ValueError:
            print("âŒ Invalid input")
    
    def record_purchase(self):
        """INSERT: Record a game purchase"""
        print("\ğŸ›’ RECORD PURCHASE")
        print("-" * 40)
        
        # Get customer
        customer_id = int(input("Customer ID: "))
        
        # Check customer exists
        self.cursor.execute("SELECT username FROM customers WHERE customer_id = ?", (customer_id,))
        customer = self.cursor.fetchone()
        
        if not customer:
            print("âŒ Customer not found")
            return
        
        # Get game
        game_id = int(input("Game ID: "))
        
        # Check game exists and in stock
        self.cursor.execute("SELECT title, price, stock_quantity FROM games WHERE game_id = ?", (game_id,))
        game = self.cursor.fetchone()
        
        if not game:
            print("âŒ Game not found")
            return
        
        if game[2] <= 0:
            print("âŒ Game out of stock")
            return
        
        quantity = int(input("Quantity: "))
        
        if quantity > game[2]:
            print(f"âŒ Only {game[2]} copies available")
            return
        
        # Calculate total
        total_price = game[1] * quantity
        
        print(f"\ğŸ“‹ Purchase Summary:")
        print(f"   Customer: {customer[0]}")
        print(f"   Game: {game[0]}")
        print(f"   Quantity: {quantity}")
        print(f"   Price each: \${game[1]:.2f}")
        print(f"   Total: \${total_price:.2f}")
        
        confirm = input("\Confirm purchase? (yes/no): ").lower()
        
        if confirm == 'yes':
            # Record purchase
            insert_purchase = '''
            INSERT INTO purchases (customer_id, game_id, price_paid, quantity)
            VALUES (?, ?, ?, ?)
            '''
            
            self.cursor.execute(insert_purchase, (customer_id, game_id, total_price, quantity))
            
            # Update game stock
            update_stock = '''
            UPDATE games 
            SET stock_quantity = stock_quantity - ? 
            WHERE game_id = ?
            '''
            
            self.cursor.execute(update_stock, (quantity, game_id))
            
            # Update customer loyalty points (1 point per $10 spent)
            points_earned = int(total_price / 10)
            update_customer = '''
            UPDATE customers 
            SET 
                loyalty_points = loyalty_points + ?,
                total_spent = total_spent + ?
            WHERE customer_id = ?
            '''
            
            self.cursor.execute(update_customer, (points_earned, total_price, customer_id))
            
            self.conn.commit()
            
            print(f"âœ… Purchase recorded!")
            print(f"   {points_earned} loyalty points earned")
        else:
            print("âŒ Purchase cancelled")
    
    def show_statistics(self):
        """Show store statistics"""
        print("\ğŸ“Š STORE STATISTICS")
        print("-" * 40)
        
        # Game statistics
        self.cursor.execute("SELECT COUNT(*), SUM(stock_quantity), AVG(price) FROM games")
        games_stats = self.cursor.fetchone()
        print(f"ğŸ® Games in store: {games_stats[0]}")
        print(f"ğŸ“¦ Total stock: {games_stats[1] or 0} copies")
        print(f"ğŸ’° Average game price: \${games_stats[2] or 0:.2f}")
        
        # Customer statistics
        self.cursor.execute("SELECT COUNT(*), SUM(total_spent), AVG(loyalty_points) FROM customers")
        cust_stats = self.cursor.fetchone()
        print(f"\ğŸ‘¤ Total customers: {cust_stats[0]}")
        print(f"ğŸ’µ Total revenue: \${cust_stats[1] or 0:.2f}")
        print(f"ğŸ† Average loyalty points: {cust_stats[2] or 0:.0f}")
        
        # Recent purchases
        print("\ğŸ›’ RECENT PURCHASES:")
        self.cursor.execute('''
        SELECT c.username, g.title, p.quantity, p.price_paid, p.purchase_date
        FROM purchases p
        JOIN customers c ON p.customer_id = c.customer_id
        JOIN games g ON p.game_id = g.game_id
        ORDER BY p.purchase_date DESC
        LIMIT 5
        ''')
        
        purchases = self.cursor.fetchall()
        if purchases:
            for purchase in purchases:
                date_str = purchase[4][:16]  # Shorten timestamp
                print(f"  â€¢ {purchase[0]} bought {purchase[2]}x {purchase[1]} for \${purchase[3]:.2f} on {date_str}")
        else:
            print("  No purchases yet")
    
    def main_menu(self):
        """Display main menu"""
        while True:
            print("\" + "="*60)
            print("ğŸ›’ GAME STORE MANAGEMENT SYSTEM")
            print("="*60)
            print("1. Add new game")
            print("2. Register customer")
            print("3. Update game price")
            print("4. Record purchase")
            print("5. Show statistics")
            print("6. Exit")
            print("="*60)
            
            choice = input("Enter choice (1-6): ")
            
            if choice == '1':
                self.add_new_game()
            elif choice == '2':
                self.register_customer()
            elif choice == '3':
                self.update_game_price()
            elif choice == '4':
                self.record_purchase()
            elif choice == '5':
                self.show_statistics()
            elif choice == '6':
                print("\ğŸ‘‹ Goodbye!")
                break
            else:
                print("âŒ Invalid choice")
    
    def __del__(self):
        """Clean up database connection"""
        self.conn.close()

# Run the program
if __name__ == "__main__":
    store = GameStoreManager()
    store.main_menu()
    </pre>
</div>

<h2>ğŸ“š SQL INSERT/UPDATE Best Practices</h2>

<div style="background-color: #E8F5E9; padding: 20px; border-radius: 10px; margin: 20px 0;">
    <h3>ğŸ’¡ Tips for Safe Database Operations</h3>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 15px;">
        <div style="background-color: white; padding: 15px; border-radius: 8px;">
            <h4>âœ… INSERT Best Practices</h4>
            <ul>
                <li><b>Always specify columns:</b> <code>INSERT INTO table (col1, col2) VALUES (...)</code></li>
                <li><b>Use parameterized queries:</b> Prevents SQL injection attacks</li>
                <li><b>Check for duplicates:</b> Use UNIQUE constraints to prevent duplicates</li>
                <li><b>Validate data first:</b> Check inputs before inserting</li>
                <li><b>Use transactions:</b> Group related inserts together</li>
                <li><b>Handle errors:</b> Use try-except for database errors</li>
            </ul>
        </div>
        
        <div style="background-color: white; padding: 15px; border-radius: 8px;">
            <h4>âœ… UPDATE Best Practices</h4>
            <ul>
                <li><b>ALWAYS use WHERE:</b> Unless you want to update every row!</li>
                <li><b>Test with SELECT first:</b> <code>SELECT * FROM table WHERE ...</code></li>
                <li><b>Use transactions:</b> So you can rollback if something goes wrong</li>
                <li><b>Limit updates:</b> Use LIMIT if updating many rows</li>
                <li><b>Add updated_at timestamp:</b> Track when data was changed</li>
                <li><b>Backup before mass updates:</b> Always have a backup!</li>
            </ul>
        </div>
    </div>
</div>

<h3>ğŸ¯ Challenge: Database Maintenance Tasks</h3>
<div style="background-color: #FFF3E0; padding: 20px; border-radius: 10px; margin: 20px 0;">
    <p><b>Implement these maintenance features in your game store:</b></p>
    
    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin: 15px 0;">
        <div style="background-color: white; padding: 10px; border-radius: 5px;">
            <h5>ğŸ”„ Auto-Price Adjuster</h5>
            <ul>
                <li>Reduce price of old games</li>
                <li>Increase price of popular games</li>
                <li>Apply seasonal discounts</li>
                <li>Match competitor prices</li>
            </ul>
        </div>
        <div style="background-color: white; padding: 10px; border-radius: 5px;">
            <h5>ğŸ Loyalty Program</h5>
            <ul>
                <li>Auto-add loyalty points</li>
                <li>Tier upgrades (Silver, Gold, Platinum)</li>
                <li>Birthday bonuses</li>
                <li>Referral rewards</li>
            </ul>
        </div>
        <div style="background-color: white; padding: 10px; border-radius: 5px;">
            <h5>ğŸ“ˆ Sales Analytics</h5>
            <ul>
                <li>Update best-seller flags</li>
                <li>Adjust stock based on sales</li>
                <li>Calculate profit margins</li>
                <li>Identify trends</li>
            </ul>
        </div>
    </div>
    
    <div style="background-color: #f5f5f5; padding: 15px; border-radius: 8px; margin-top: 15px;">
        <h5>ğŸ’¡ Advanced UPDATE Example</h5>
        <pre style="background-color: white; padding: 10px; border-radius: 5px;">
-- Complex update with multiple conditions
UPDATE games 
SET 
    price = CASE 
        WHEN release_date < '2020-01-01' THEN price * 0.8  -- 20% off old games
        WHEN rating >= 9.0 THEN price * 1.1                -- 10% increase for top-rated
        ELSE price                                         -- No change for others
    END,
    stock_quantity = CASE 
        WHEN stock_quantity < 5 THEN stock_quantity + 10   -- Restock low inventory
        ELSE stock_quantity
    END,
    updated_at = CURRENT_TIMESTAMP
WHERE price > 0;  -- Only update paid games
        </pre>
    </div>
</div>

<div style="background-color: #F3E5F5; padding: 20px; border-radius: 10px; margin: 20px 0;">
    <h3>ğŸ“Š Common INSERT/UPDATE Patterns</h3>
    
    <div style="background-color: white; padding: 15px; border-radius: 8px; margin-top: 15px;">
        <table style="width:100%; border-collapse: collapse;">
            <tr style="background-color: #F3E5F5;">
                <th style="padding: 10px; border: 1px solid #D1C4E9;">Pattern</th>
                <th style="padding: 10px; border: 1px solid #D1C4E9;">SQL Example</th>
                <th style="padding: 10px; border: 1px solid #D1C4E9;">Use Case</th>
            </tr>
            <tr>
                <td style="padding: 8px; border: 1px solid #F3E5F5;">Insert or Update</td>
                <td style="padding: 8px; border: 1px solid #F3E5F5;"><code>INSERT OR REPLACE</code></td>
                <td style="padding: 8px; border: 1px solid #F3E5F5;">Update if exists, insert if not</td>
            </tr>
            <tr style="background-color: #F8F8F8;">
                <td style="padding: 8px; border: 1px solid #F3E5F5;">Bulk Insert</td>
                <td style="padding: 8px; border: 1px solid #F3E5F5;"><code>INSERT ... VALUES (...), (...), (...)</code></td>
                <td style="padding: 8px; border: 1px solid #F3E5F5;">Add multiple rows at once</td>
            </tr>
            <tr>
                <td style="padding: 8px; border: 1px solid #F3E5F5;">Update with Join</td>
                <td style="padding: 8px; border: 1px solid #F3E5F5;"><code>UPDATE ... FROM ... JOIN ...</code></td>
                <td style="padding: 8px; border: 1px solid #F3E5F5;">Update based on another table</td>
            </tr>
            <tr style="background-color: #F8F8F8;">
                <td style="padding: 8px; border: 1px solid #F3E5F5;">Incremental Update</td>
                <td style="padding: 8px; border: 1px solid #F3E5F5;"><code>SET balance = balance + 10</code></td>
                <td style="padding: 8px; border: 1px solid #F3E5F5;">Add to existing value</td>
            </tr>
            <tr>
                <td style="padding: 8px; border: 1px solid #F3E5F5;">Conditional Update</td>
                <td style="padding: 8px; border: 1px solid #F3E5F5;"><code>SET price = CASE WHEN ... THEN ... END</code></td>
                <td style="padding: 8px; border: 1px solid #F3E5F5;">Different updates for different rows</td>
            </tr>
        </table>
    </div>
</div>

<div style="text-align: center; margin: 30px 0; padding: 20px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border-radius: 10px;">
    <h2>ğŸ‰ DATA MODIFICATION MASTER! ğŸ‰</h2>
    <p>You can now add and modify data in databases like a pro!</p>
    <p>Next week: DELETE operations and database cleanup!</p>
    <div style="margin-top: 15px; font-size: 24px;">
        â• â†’ âœï¸ â†’ ğŸ”„ â†’ ğŸš€
    </div>
</div>`
            },
            "4-16": {
                "icon": "fa-search",
                "title": "SELECT Queries & Data Retrieval",
                "html": `<h1>Month 4, Week 16: SELECT Queries & Data Retrieval ğŸ”</h1>
<p>This week, we become <b>database detectives</b>! We'll learn to find <b>exactly what we're looking for</b> in huge databases - like finding a needle in a haystack, but with superpowers! ğŸ”</p>

<div class="analogy-box" style="background-color: #e3f2fd; border-left: 5px solid #2196F3; padding: 20px; margin: 20px 0; border-radius: 8px;">
    <b>ğŸ” Analogy: The Library Search Engine ğŸ“š</b><br/><br/>
    
    â€¢ <b>SELECT</b> = Asking the librarian for books<br/>
    â€¢ <b>FROM</b> = Which section of the library to search<br/>
    â€¢ <b>WHERE</b> = Specific requirements (author, genre, year)<br/>
    â€¢ <b>ORDER BY</b> = How to arrange the results (alphabetical, newest)<br/>
    â€¢ <b>LIMIT</b> = How many books to bring you<br/>
    â€¢ <b>JOIN</b> = Looking in multiple sections at once<br/>
    â€¢ <b>GROUP BY</b> = Organizing books by category<br/>
    â€¢ <b>Aggregate functions</b> = Statistics about the books
</div>

<div style="background-color: #FFF3E0; padding: 20px; border-radius: 10px; margin: 20px 0;">
    <h2>ğŸ“Š The SELECT Statement Structure</h2>
    
    <div style="background-color: white; padding: 20px; border-radius: 8px; margin-top: 15px;">
        <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 10px;">
            <div style="font-size: 24px;">ğŸ”</div>
            <div style="font-size: 18px; font-weight: bold;">SELECT</div>
            <div style="font-size: 24px;">ğŸ“</div>
            <div style="font-size: 18px; font-weight: bold;">FROM</div>
            <div style="font-size: 24px;">ğŸ¯</div>
            <div style="font-size: 18px; font-weight: bold;">WHERE</div>
            <div style="font-size: 24px;">ğŸ“ˆ</div>
            <div style="font-size: 18px; font-weight: bold;">ORDER BY</div>
            <div style="font-size: 24px;">ğŸª</div>
            <div style="font-size: 18px; font-weight: bold;">LIMIT</div>
        </div>
        
        <div style="background-color: #f5f5f5; padding: 15px; border-radius: 5px; font-family: monospace; font-size: 14px;">
            <span style="color: #2196F3;">SELECT</span> <span style="color: #4CAF50;">column1, column2, ...</span><br>
            <span style="color: #2196F3;">FROM</span> <span style="color: #FF9800;">table_name</span><br>
            <span style="color: #2196F3;">WHERE</span> <span style="color: #9C27B0;">condition</span><br>
            <span style="color: #2196F3;">ORDER BY</span> <span style="color: #00BCD4;">column_name</span> <span style="color: #795548;">ASC|DESC</span><br>
            <span style="color: #2196F3;">LIMIT</span> <span style="color: #E91E63;">number</span>;
        </div>
        
        <div style="margin-top: 15px; display: grid; grid-template-columns: repeat(5, 1fr); gap: 10px; text-align: center;">
            <div style="background-color: #E8F5E9; padding: 10px; border-radius: 5px;">
                <b>What to get</b><br><small>columns, calculations</small>
            </div>
            <div style="background-color: #E1F5FE; padding: 10px; border-radius: 5px;">
                <b>Where to look</b><br><small>table name</small>
            </div>
            <div style="background-color: #FFF3E0; padding: 10px; border-radius: 5px;">
                <b>Filter results</b><br><small>conditions</small>
            </div>
            <div style="background-color: #F3E5F5; padding: 10px; border-radius: 5px;">
                <b>Sort results</b><br><small>order</small>
            </div>
            <div style="background-color: #FCE4EC; padding: 10px; border-radius: 5px;">
                <b>How many</b><br><small>limit rows</small>
            </div>
        </div>
    </div>
</div>

<h2>ğŸš€ Part 1: Basic SELECT Queries</h2>

<div style="background-color: #F3E5F5; padding: 20px; border-radius: 10px; margin: 20px 0;">
    <h3>ğŸ® Project: Advanced Game Store Analytics</h3>
    
    <div style="background-color: white; padding: 15px; border-radius: 8px; margin: 15px 0;">
        <h4>ğŸ“‹ Enhanced Database Schema</h4>
        
        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-top: 10px;">
            <div>
                <h5>ğŸ¯ games</h5>
                <ul style="font-size: 0.9em;">
                    <li>Game details</li>
                    <li>Pricing info</li>
                    <li>Ratings</li>
                </ul>
            </div>
            <div>
                <h5>ğŸ‘¤ customers</h5>
                <ul style="font-size: 0.9em;">
                    <li>User profiles</li>
                    <li>Purchase history</li>
                    <li>Preferences</li>
                </ul>
            </div>
            <div>
                <h5>ğŸ›’ purchases</h5>
                <ul style="font-size: 0.9em;">
                    <li>Sales records</li>
                    <li>Transaction details</li>
                    <li>Date/time stamps</li>
                </ul>
            </div>
        </div>
    </div>
    
    <pre style="background-color: #f5f5f5; padding: 15px; border-radius: 8px; overflow-x: auto;">
import sqlite3
import pandas as pd  # For pretty printing

print("ğŸ” ADVANCED GAME STORE ANALYTICS ğŸ”")
print("=" * 70)

# Connect to database
conn = sqlite3.connect('game_store_analytics.db')
cursor = conn.cursor()

print("âœ… Connected to game_store_analytics.db")

# ====================================================================
# SETUP: Create and populate database
# ====================================================================

# Games table with more data
games_data = [
    (1, 'Cyberpunk 2077', 'CD Projekt Red', 49.99, 7.5, 'RPG', 2020, True),
    (2, 'The Witcher 3', 'CD Projekt Red', 39.99, 9.7, 'RPG', 2015, False),
    (3, 'Minecraft', 'Mojang', 26.95, 9.0, 'Sandbox', 2011, True),
    (4, 'Fortnite', 'Epic Games', 0.00, 8.2, 'Battle Royale', 2017, True),
    (5, 'Among Us', 'InnerSloth', 4.99, 8.5, 'Social Deduction', 2018, True),
    (6, 'Hades', 'Supergiant Games', 24.99, 9.4, 'Roguelike', 2020, False),
    (7, 'Stardew Valley', 'ConcernedApe', 14.99, 9.2, 'Simulation', 2016, True),
    (8, 'Valorant', 'Riot Games', 0.00, 8.1, 'FPS', 2020, True),
    (9, 'GTA V', 'Rockstar Games', 29.99, 9.0, 'Action', 2013, True),
    (10, 'Rocket League', 'Psyonix', 0.00, 8.7, 'Sports', 2015, True)
]

# Create games table
cursor.execute('''
CREATE TABLE IF NOT EXISTS games (
    game_id INTEGER PRIMARY KEY,
    title VARCHAR(100),
    developer VARCHAR(100),
    price DECIMAL(10,2),
    rating DECIMAL(3,1),
    genre VARCHAR(50),
    release_year INTEGER,
    multiplayer BOOLEAN
)
''')

# Insert games
cursor.executemany('''
INSERT OR REPLACE INTO games 
(game_id, title, developer, price, rating, genre, release_year, multiplayer)
VALUES (?, ?, ?, ?, ?, ?, ?, ?)
''', games_data)

print(f"âœ… Loaded {len(games_data)} games into database")

# ====================================================================
# LEVEL 1: Basic SELECT Queries
# ====================================================================

print(" " + "="*70)
print("LEVEL 1: BASIC SELECT QUERIES")
print("="*70)

# Query 1: Get all games
print("1ï¸âƒ£ ALL GAMES IN STORE:")
print("-" * 40)
cursor.execute("SELECT title, developer, price FROM games")
for game in cursor.fetchall():
    price_display = f"\${game[2]}" if game[2] > 0 else "FREE"
    print(f"  â€¢ {game[0]:25} | {game[1]:20} | {price_display:>8}")

# Query 2: Get specific columns
print("2ï¸âƒ£ GAME TITLES AND RATINGS ONLY:")
print("-" * 40)
cursor.execute("SELECT title, rating FROM games ORDER BY rating DESC")
for game in cursor.fetchall():
    print(f"  â€¢ {game[0]:25} | {game[1]}/10")

# Query 3: Get distinct values
print(" 3ï¸âƒ£ UNIQUE DEVELOPERS:")
print("-" * 40)
cursor.execute("SELECT DISTINCT developer FROM games ORDER BY developer")
for dev in cursor.fetchall():
    print(f"  â€¢ {dev[0]}")

# Query 4: Get count of games
print(" 4ï¸âƒ£ GAME COUNT BY GENRE:")
print("-" * 40)
cursor.execute("SELECT genre, COUNT(*) FROM games GROUP BY genre ORDER BY COUNT(*) DESC")
for genre in cursor.fetchall():
    print(f"  â€¢ {genre[0]:20} | {genre[1]} games")

# ====================================================================
# LEVEL 2: WHERE Clause - Filtering Results
# ====================================================================

print(" " + "="*70)
print("LEVEL 2: WHERE CLAUSE - FILTERING")
print("="*70)

# Query 5: Free games
print(" 5ï¸âƒ£ FREE GAMES:")
print("-" * 40)
cursor.execute("SELECT title, rating FROM games WHERE price = 0 ORDER BY rating DESC")
for game in cursor.fetchall():
    print(f"  â€¢ {game[0]:25} | Rating: {game[1]}/10")

# Query 6: High-rated games
print(" 6ï¸âƒ£ TOP-RATED GAMES (9.0+):")
print("-" * 40)
cursor.execute("SELECT title, developer, rating FROM games WHERE rating >= 9.0 ORDER BY rating DESC")
for game in cursor.fetchall():
    print(f"  â€¢ {game[0]:25} | {game[1]:20} | {game[2]}/10")

# Query 7: Recent games
print(" 7ï¸âƒ£ RECENT GAMES (2020+):")
print("-" * 40)
cursor.execute("SELECT title, release_year, genre FROM games WHERE release_year >= 2020")
for game in cursor.fetchall():
    print(f"  â€¢ {game[0]:25} | {game[1]} | {game[2]}")

# Query 8: Multiplayer games under $30
print(" 8ï¸âƒ£ MULTIPLAYER GAMES UNDER $30:")
print("-" * 40)
cursor.execute('''
    SELECT title, price, multiplayer 
    FROM games 
    WHERE multiplayer = 1 AND price > 0 AND price < 30
    ORDER BY price
''')
for game in cursor.fetchall():
    print(f"  â€¢ {game[0]:25} |  \${game[1]:.2f} | Multiplayer: {'Yes' if game[2] else 'No'}")

# Query 9: Games with LIKE (pattern matching)
print(" 9ï¸âƒ£ GAMES WITH 'CRAFT' IN NAME:")
print("-" * 40)
cursor.execute("SELECT title FROM games WHERE title LIKE '%craft%'")
for game in cursor.fetchall():
    print(f"  â€¢ {game[0]}")

# ====================================================================
# LEVEL 3: ORDER BY and LIMIT
# ====================================================================

print("\" + "="*70)
print("LEVEL 3: ORDERING AND LIMITING RESULTS")
print("="*70)

# Query 10: Most expensive games
print("ğŸ”Ÿ MOST EXPENSIVE GAMES:")
print("-" * 40)
cursor.execute('''
    SELECT title, price, developer 
    FROM games 
    WHERE price > 0 
    ORDER BY price DESC 
    LIMIT 3
''')
for i, game in enumerate(cursor.fetchall(), 1):
    print(f"  {i}. {game[0]:25} | \${game[1]:.2f} | {game[2]}")

# Query 11: Oldest games
print("1ï¸âƒ£1ï¸âƒ£ OLDEST GAMES:")
print("-" * 40)
cursor.execute('''
    SELECT title, release_year, developer 
    FROM games 
    ORDER BY release_year ASC 
    LIMIT 5
''')
for i, game in enumerate(cursor.fetchall(), 1):
    print(f"  {i}. {game[0]:25} | {game[1]} | {game[2]}")

# Query 12: Alphabetical list
print(" 1ï¸âƒ£2ï¸âƒ£ GAMES A-Z (FIRST 5):")
print("-" * 40)
cursor.execute("SELECT title FROM games ORDER BY title ASC LIMIT 5")
for i, game in enumerate(cursor.fetchall(), 1):
    print(f"  {i}. {game[0]}")

# Query 13: Random game picker
print(" 1ï¸âƒ£3ï¸âƒ£ RANDOM GAME RECOMMENDATION:")
print("-" * 40)
cursor.execute("SELECT title, genre, rating FROM games ORDER BY RANDOM() LIMIT 1")
game = cursor.fetchone()
print(f"  ğŸ® Try: {game[0]}")
print(f"  ğŸ“ Genre: {game[1]}")
print(f"  â­ Rating: {game[2]}/10")

# ====================================================================
# LEVEL 4: Aggregate Functions
# ====================================================================

print(" " + "="*70)
print("LEVEL 4: AGGREGATE FUNCTIONS")
print("="*70)

# Query 14: Game statistics
print(" 1ï¸âƒ£4ï¸âƒ£ GAME STORE STATISTICS:")
print("-" * 40)

# Total games
cursor.execute("SELECT COUNT(*) FROM games")
total_games = cursor.fetchone()[0]
print(f"  ğŸ“Š Total games: {total_games}")

# Average rating
cursor.execute("SELECT AVG(rating) FROM games")
avg_rating = cursor.fetchone()[0]
print(f"  â­ Average rating: {avg_rating:.2f}/10")

# Average price (excluding free games)
cursor.execute("SELECT AVG(price) FROM games WHERE price > 0")
avg_price = cursor.fetchone()[0]
print(f"  ğŸ’° Average price:  \${avg_price:.2f}")

# Most common genre
cursor.execute('''
    SELECT genre, COUNT(*) as count 
    FROM games 
    GROUP BY genre 
    ORDER BY count DESC 
    LIMIT 1
''')
top_genre = cursor.fetchone()
print(f"  ğŸ† Most common genre: {top_genre[0]} ({top_genre[1]} games)")

# Query 15: Price range
print("1ï¸âƒ£5ï¸âƒ£ PRICE ANALYSIS:")
print("-" * 40)
cursor.execute("SELECT MIN(price), MAX(price), SUM(price) FROM games")
price_stats = cursor.fetchone()
print(f"  ğŸ’µ Cheapest: \${price_stats[0]:.2f}")
print(f"  ğŸ’µ Most expensive: \${price_stats[1]:.2f}")
print(f"  ğŸ’µ Total value (if all purchased): \${price_stats[2]:.2f}")

# Query 16: Year statistics
print("1ï¸âƒ£6ï¸âƒ£ RELEASE YEAR STATISTICS:")
print("-" * 40)
cursor.execute('''
    SELECT release_year, COUNT(*) as games_count, AVG(rating) as avg_rating
    FROM games
    GROUP BY release_year
    ORDER BY release_year DESC
''')
for year in cursor.fetchall():
    print(f"  ğŸ“… {year[0]}: {year[1]:2} games | Avg rating: {year[2]:.1f}/10")

# ====================================================================
# LEVEL 5: Advanced WHERE Conditions
# ====================================================================

print(" " + "="*70)
print("LEVEL 5: ADVANCED FILTERING")
print("="*70)

# Query 17: Games in price range
print(" 1ï¸âƒ£7ï¸âƒ£ GAMES BETWEEN $20 AND $40:")
print("-" * 40)
cursor.execute('''
    SELECT title, price, rating 
    FROM games 
    WHERE price BETWEEN 20 AND 40 
    ORDER BY price
''')
for game in cursor.fetchall():
    print(f"  â€¢ {game[0]:25} | \${game[1]:.2f} | {game[2]}/10")

# Query 18: Games from specific developers
print("1ï¸âƒ£8ï¸âƒ£ GAMES FROM SELECT DEVELOPERS:")
print("-" * 40)
cursor.execute('''
    SELECT title, developer 
    FROM games 
    WHERE developer IN ('CD Projekt Red', 'Mojang', 'Rockstar Games')
    ORDER BY developer, title
''')
for game in cursor.fetchall():
    print(f"  â€¢ {game[0]:25} | {game[1]}")

# Query 19: Games with no multiplayer
print("1ï¸âƒ£9ï¸âƒ£ SINGLE-PLAYER GAMES WITH HIGH RATINGS:")
print("-" * 40)
cursor.execute('''
    SELECT title, rating, genre 
    FROM games 
    WHERE multiplayer = 0 AND rating >= 8.5
    ORDER BY rating DESC
''')
for game in cursor.fetchall():
    print(f"  â€¢ {game[0]:25} | {game[1]}/10 | {game[2]}")

# Query 20: Complex conditions
print("2ï¸âƒ£0ï¸âƒ£ COMPLEX SEARCH:")
print("-" * 40)
print("  Games that are:")
print("  â€¢ Free OR under $20")
print("  â€¢ Released after 2015")
print("  â€¢ Rating 8.0+")
print("-" * 40)

cursor.execute('''
    SELECT title, price, release_year, rating
    FROM games
    WHERE (price = 0 OR price < 20)
      AND release_year > 2015
      AND rating >= 8.0
    ORDER BY rating DESC
''')
for game in cursor.fetchall():
    price_display = f"\${game[1]}" if game[1] > 0 else "FREE"
    print(f"  â€¢ {game[0]:25} | {price_display:8} | {game[2]} | {game[3]}/10")

# ====================================================================
# BONUS: Pretty table output
# ====================================================================

print("" + "="*70)
print("ğŸ¯ BONUS: PRETTY TABLE OUTPUT")
print("="*70)

# Use pandas for nice table display
try:
    import pandas as pd
    
    print("ğŸ“Š COMPLETE GAME DATABASE TABLE:")
    print("-" * 70)
    
    # Get all data
    cursor.execute('''
        SELECT 
            title as "Game Title",
            developer as "Developer",
            CASE WHEN price = 0 THEN 'FREE' ELSE '$' || price END as "Price",
            rating as "Rating",
            genre as "Genre",
            release_year as "Year",
            CASE WHEN multiplayer = 1 THEN 'Yes' ELSE 'No' END as "Multiplayer"
        FROM games
        ORDER BY rating DESC
    ''')
    
    # Get column names
    columns = [desc[0] for desc in cursor.description]
    data = cursor.fetchall()
    
    # Create DataFrame
    df = pd.DataFrame(data, columns=columns)
    
    # Display table
    print(df.to_string(index=False))
    
except ImportError:
    print("  (Install pandas for prettier tables: pip install pandas)")

# ====================================================================
# Interactive query builder
# ====================================================================

print(" " + "="*70)
print("ğŸ”§ INTERACTIVE QUERY BUILDER")
print("="*70)

def interactive_query():
    """Let users build their own queries"""
    
    print(" Build your own game search query!")
    print("-" * 40)
    
    # Get user preferences
    print(" Search options:")
    print("1. Filter by genre")
    print("2. Filter by price range")
    print("3. Filter by rating")
    print("4. Filter by release year")
    print("5. Show all with sorting")
    
    choice = input(" Enter choice (1-5): ")
    
    base_query = "SELECT title, developer, price, rating, genre FROM games"
    conditions = []
    params = []
    
    if choice == '1':
        genre = input("Enter genre (RPG, Sandbox, FPS, etc.): ")
        conditions.append("genre = ?")
        params.append(genre)
    
    elif choice == '2':
        min_price = float(input("Minimum price (0 for free): "))
        max_price = float(input("Maximum price: "))
        conditions.append("price BETWEEN ? AND ?")
        params.extend([min_price, max_price])
    
    elif choice == '3':
        min_rating = float(input("Minimum rating (0-10): "))
        conditions.append("rating >= ?")
        params.append(min_rating)
    
    elif choice == '4':
        year = int(input("Released after year: "))
        conditions.append("release_year > ?")
        params.append(year)
    
    elif choice == '5':
        sort_by = input("Sort by (title, price, rating, release_year): ")
        order = input("Order (ASC for ascending, DESC for descending): ")
        conditions.append(f"1=1")  # Always true for sorting all
    
    # Build the query
    if conditions:
        base_query += " WHERE " + " AND ".join(conditions)
    
    # Add sorting for choice 5
    if choice == '5':
        base_query += f" ORDER BY {sort_by} {order}"
    elif conditions:  # For other choices, sort by rating by default
        base_query += " ORDER BY rating DESC"
    
    # Add limit
    base_query += " LIMIT 10"
    
    # Execute query
    print(f" ğŸ“‹ Your query: {base_query}")
    print(f"ğŸ” Parameters: {params}")
    print("-" * 40)
    
    try:
        cursor.execute(base_query, params)
        results = cursor.fetchall()
        
        if results:
            print("ğŸ® SEARCH RESULTS:")
            for game in results:
                price_display = f"\${game[2]}" if game[2] > 0 else "FREE"
                print(f"  â€¢ {game[0]:25} | {game[1]:20} | {price_display:8} | {game[3]}/10 | {game[4]}")
        else:
            print("âŒ No games found matching your criteria")
    
    except Exception as e:
        print(f"âŒ Error: {e}")

# Run interactive query
interactive_query()

# Close connection
conn.close()
print("âœ… Database operations complete!")
    </pre>
</div>

<h2>ğŸ¯ Part 2: Advanced SELECT Techniques</h2>

<div style="background-color: #E8F5E9; padding: 20px; border-radius: 10px; margin: 20px 0;">
    <h3>ğŸ“ˆ Week 16 Assignment: Game Analytics Dashboard</h3>
    
    <div style="background-color: white; padding: 15px; border-radius: 8px; margin: 15px 0;">
        <h4>ğŸ“‹ Create a Complete Analytics System</h4>
        
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 10px;">
            <div>
                <h5>ğŸ“Š Required Reports</h5>
                <ul>
                    <li>Sales trends by month</li>
                    <li>Customer demographics</li>
                    <li>Game popularity rankings</li>
                    <li>Revenue analytics</li>
                    <li>Inventory analysis</li>
                </ul>
            </div>
            <div>
                <h5>ğŸ” Required Queries</h5>
                <ul>
                    <li>GROUP BY with aggregations</li>
                    <li>HAVING clause filters</li>
                    <li>Subqueries</li>
                    <li>Date-based queries</li>
                    <li>Statistical calculations</li>
                </ul>
            </div>
        </div>
    </div>
    
    <pre style="background-color: #f5f5f5; padding: 15px; border-radius: 8px; overflow-x: auto;">
# ====================================================================
# GAME ANALYTICS DASHBOARD
# ====================================================================

import sqlite3
from datetime import datetime, timedelta

class GameAnalytics:
    def __init__(self):
        self.conn = sqlite3.connect('game_analytics.db')
        self.cursor = self.conn.cursor()
        self.setup_database()
    
    def setup_database(self):
        """Create enhanced database with sales data"""
        
        # Enhanced games table
        self.cursor.execute('''
        CREATE TABLE IF NOT EXISTS games (
            game_id INTEGER PRIMARY KEY,
            title VARCHAR(100),
            genre VARCHAR(50),
            price DECIMAL(10,2),
            cost DECIMAL(10,2),  -- What it costs us to buy
            release_date DATE,
            rating DECIMAL(3,1)
        )
        ''')
        
        # Enhanced customers table
        self.cursor.execute('''
        CREATE TABLE IF NOT EXISTS customers (
            customer_id INTEGER PRIMARY KEY,
            username VARCHAR(50),
            age INTEGER,
            country VARCHAR(50),
            join_date DATE
        )
        ''')
        
        # Sales table
        self.cursor.execute('''
        CREATE TABLE IF NOT EXISTS sales (
            sale_id INTEGER PRIMARY KEY,
            game_id INTEGER,
            customer_id INTEGER,
            sale_date DATE,
            quantity INTEGER,
            sale_price DECIMAL(10,2),
            
            FOREIGN KEY (game_id) REFERENCES games(game_id),
            FOREIGN KEY (customer_id) REFERENCES customers(customer_id)
        )
        ''')
        
        # Generate sample data if empty
        self.generate_sample_data()
    
    def generate_sample_data(self):
        """Generate realistic sample data for analytics"""
        
        # Check if we need to generate data
        self.cursor.execute("SELECT COUNT(*) FROM games")
        if self.cursor.fetchone()[0] > 0:
            return
        
        print("ğŸ“Š Generating sample analytics data...")
        
        # Sample games
        games = [
            (1, 'Cyberpunk 2077', 'RPG', 49.99, 30.00, '2020-12-10', 7.5),
            (2, 'Minecraft', 'Sandbox', 26.95, 15.00, '2011-11-18', 9.0),
            (3, 'Fortnite', 'Battle Royale', 0.00, 0.00, '2017-07-25', 8.2),
            (4, 'Among Us', 'Social Deduction', 4.99, 2.00, '2018-06-15', 8.5),
            (5, 'Hades', 'Roguelike', 24.99, 12.00, '2020-09-17', 9.4),
            (6, 'GTA V', 'Action', 29.99, 18.00, '2013-09-17', 9.0),
            (7, 'Rocket League', 'Sports', 0.00, 0.00, '2015-07-07', 8.7),
            (8, 'Valorant', 'FPS', 0.00, 0.00, '2020-06-02', 8.1),
            (9, 'Stardew Valley', 'Simulation', 14.99, 8.00, '2016-02-26', 9.2),
            (10, 'The Witcher 3', 'RPG', 39.99, 25.00, '2015-05-19', 9.7)
        ]
        
        self.cursor.executemany('''
        INSERT INTO games (game_id, title, genre, price, cost, release_date, rating)
        VALUES (?, ?, ?, ?, ?, ?, ?)
        ''', games)
        
        # Sample customers
        customers = []
        countries = ['USA', 'Canada', 'UK', 'Australia', 'Germany', 'Japan', 'France']
        
        for i in range(1, 51):  # 50 customers
            customers.append((
                i,
                f'gamer{i:03d}',
                13 + (i % 20),  # Ages 13-32
                countries[i % len(countries)],
                f'2023-{((i % 12) + 1):02d}-{(i % 28) + 1:02d}'
            ))
        
        self.cursor.executemany('''
        INSERT INTO customers (customer_id, username, age, country, join_date)
        VALUES (?, ?, ?, ?, ?)
        ''', customers)
        
        # Generate random sales data
        import random
        
        sales = []
        sale_id = 1
        
        # Generate sales for the past year
        for day in range(365):  # Past year
            sale_date = datetime(2023, 1, 1) + timedelta(days=day)
            date_str = sale_date.strftime('%Y-%m-%d')
            
            # Random number of sales per day (0-20)
            daily_sales = random.randint(0, 20)
            
            for _ in range(daily_sales):
                game_id = random.randint(1, 10)
                customer_id = random.randint(1, 50)
                quantity = random.randint(1, 3)
                
                # Get game price
                self.cursor.execute("SELECT price FROM games WHERE game_id = ?", (game_id,))
                price = self.cursor.fetchone()[0]
                
                # Sometimes apply discounts
                discount = random.choice([1.0, 0.9, 0.8, 0.7])
                sale_price = round(price * quantity * discount, 2)
                
                sales.append((
                    sale_id,
                    game_id,
                    customer_id,
                    date_str,
                    quantity,
                    sale_price
                ))
                
                sale_id += 1
        
        self.cursor.executemany('''
        INSERT INTO sales (sale_id, game_id, customer_id, sale_date, quantity, sale_price)
        VALUES (?, ?, ?, ?, ?, ?)
        ''', sales)
        
        self.conn.commit()
        print(f"âœ… Generated: {len(games)} games, {len(customers)} customers, {len(sales)} sales")
    
    def query_1_basic_sales(self):
        """Basic sales query"""
        print("\ğŸ“Š 1. TOTAL SALES OVERVIEW")
        print("-" * 40)
        
        # Total revenue
        self.cursor.execute("SELECT SUM(sale_price) FROM sales")
        total_revenue = self.cursor.fetchone()[0]
        print(f"ğŸ’° Total Revenue: \${total_revenue:,.2f}")
        
        # Total units sold
        self.cursor.execute("SELECT SUM(quantity) FROM sales")
        total_units = self.cursor.fetchone()[0]
        print(f"ğŸ“¦ Total Units Sold: {total_units:,}")
        
        # Total customers
        self.cursor.execute("SELECT COUNT(DISTINCT customer_id) FROM sales")
        total_customers = self.cursor.fetchone()[0]
        print(f"ğŸ‘¤ Unique Customers: {total_customers}")
        
        # Average sale value
        self.cursor.execute("SELECT AVG(sale_price) FROM sales WHERE sale_price > 0")
        avg_sale = self.cursor.fetchone()[0]
        print(f"ğŸ“ˆ Average Sale Value: \${avg_sale:.2f}")
    
    def query_2_top_selling_games(self):
        """Top selling games by revenue"""
        print("\ğŸ† 2. TOP SELLING GAMES")
        print("-" * 40)
        
        query = '''
        SELECT 
            g.title,
            g.genre,
            COUNT(s.sale_id) as sales_count,
            SUM(s.quantity) as units_sold,
            SUM(s.sale_price) as total_revenue,
            ROUND(AVG(g.rating), 1) as avg_rating
        FROM games g
        JOIN sales s ON g.game_id = s.game_id
        GROUP BY g.game_id
        ORDER BY total_revenue DESC
        LIMIT 5
        '''
        
        self.cursor.execute(query)
        
        print(f"{'Game':25} | {'Genre':15} | {'Sales':6} | {'Units':6} | {'Revenue':10} | {'Rating':6}")
        print("-" * 80)
        
        for row in self.cursor.fetchall():
            print(f"{row[0]:25} | {row[1]:15} | {row[2]:6} | {row[3]:6} | \${row[4]:8,.2f} | {row[5]:6}/10")
    
    def query_3_sales_by_month(self):
        """Monthly sales trends"""
        print("\ğŸ“… 3. MONTHLY SALES TRENDS")
        print("-" * 40)
        
        query = '''
        SELECT 
            strftime('%Y-%m', sale_date) as month,
            COUNT(sale_id) as sales_count,
            SUM(quantity) as units_sold,
            SUM(sale_price) as total_revenue,
            ROUND(AVG(sale_price), 2) as avg_sale_value
        FROM sales
        GROUP BY strftime('%Y-%m', sale_date)
        ORDER BY month
        '''
        
        self.cursor.execute(query)
        
        print(f"{'Month':10} | {'Sales':6} | {'Units':8} | {'Revenue':12} | {'Avg Sale':10}")
        print("-" * 65)
        
        for row in self.cursor.fetchall():
            print(f"{row[0]:10} | {row[1]:6} | {row[2]:8} | \${row[3]:10,.2f} | \${row[4]:9,.2f}")
    
    def query_4_customer_demographics(self):
        """Customer analysis by demographics"""
        print("\ğŸ‘¥ 4. CUSTOMER DEMOGRAPHICS")
        print("-" * 40)
        
        # By age group
        print("ğŸ“Š BY AGE GROUP:")
        query = '''
        SELECT 
            CASE 
                WHEN age < 13 THEN 'Under 13'
                WHEN age BETWEEN 13 AND 17 THEN '13-17'
                WHEN age BETWEEN 18 AND 24 THEN '18-24'
                WHEN age BETWEEN 25 AND 34 THEN '25-34'
                ELSE '35+'
            END as age_group,
            COUNT(DISTINCT c.customer_id) as customer_count,
            COUNT(s.sale_id) as purchase_count,
            SUM(s.sale_price) as total_spent,
            ROUND(AVG(s.sale_price), 2) as avg_spent
        FROM customers c
        LEFT JOIN sales s ON c.customer_id = s.customer_id
        GROUP BY age_group
        ORDER BY 
            CASE age_group
                WHEN 'Under 13' THEN 1
                WHEN '13-17' THEN 2
                WHEN '18-24' THEN 3
                WHEN '25-34' THEN 4
                ELSE 5
            END
        '''
        
        self.cursor.execute(query)
        
        print(f"{'Age Group':10} | {'Customers':10} | {'Purchases':10} | {'Total Spent':12} | {'Avg Spent':10}")
        print("-" * 70)
        
        for row in self.cursor.fetchall():
            total = f"\${row[3]:,.2f}" if row[3] else "$0.00"
            avg = f"\${row[4]:.2f}" if row[4] else "$0.00"
            print(f"{row[0]:10} | {row[1]:10} | {row[2]:10} | {total:12} | {avg:10}")
    
    def query_5_profitability_analysis(self):
        """Game profitability analysis"""
        print("\ğŸ’µ 5. PROFITABILITY ANALYSIS")
        print("-" * 40)
        
        query = '''
        SELECT 
            g.title,
            g.genre,
            g.price as retail_price,
            g.cost as our_cost,
            COUNT(s.sale_id) as sales_count,
            SUM(s.quantity) as units_sold,
            SUM(s.sale_price) as total_revenue,
            SUM(s.quantity * g.cost) as total_cost,
            SUM(s.sale_price) - SUM(s.quantity * g.cost) as total_profit,
            ROUND((SUM(s.sale_price) - SUM(s.quantity * g.cost)) / SUM(s.sale_price) * 100, 1) as profit_margin
        FROM games g
        JOIN sales s ON g.game_id = s.game_id
        WHERE g.cost > 0  -- Only paid games have costs
        GROUP BY g.game_id
        HAVING total_revenue > 0
        ORDER BY total_profit DESC
        '''
        
        self.cursor.execute(query)
        
        print(f"{'Game':20} | {'Units':6} | {'Revenue':10} | {'Cost':10} | {'Profit':10} | {'Margin':8}")
        print("-" * 78)
        
        for row in self.cursor.fetchall():
            print(f"{row[0]:20} | {row[5]:6} | \${row[6]:8,.2f} | \${row[7]:8,.2f} | \${row[8]:8,.2f} | {row[9]:7}%")
    
    def query_6_customer_segmentation(self):
        """Segment customers by spending"""
        print("\ğŸ¯ 6. CUSTOMER SEGMENTATION")
        print("-" * 40)
        
        query = '''
        SELECT 
            c.username,
            c.country,
            c.age,
            COUNT(s.sale_id) as purchase_count,
            SUM(s.sale_price) as total_spent,
            ROUND(AVG(s.sale_price), 2) as avg_purchase,
            MAX(s.sale_date) as last_purchase
        FROM customers c
        JOIN sales s ON c.customer_id = s.customer_id
        GROUP BY c.customer_id
        HAVING total_spent > 0
        ORDER BY total_spent DESC
        LIMIT 10
        '''
        
        self.cursor.execute(query)
        
        print(f"{'Customer':12} | {'Country':10} | {'Age':4} | {'Purchases':9} | {'Total Spent':12} | {'Avg':8} | {'Last Purchase':12}")
        print("-" * 90)
        
        for row in self.cursor.fetchall():
            last_date = row[6][5:10] if row[6] else "Never"  # MM-DD format
            print(f"{row[0]:12} | {row[1]:10} | {row[2]:4} | {row[3]:9} | \${row[4]:10,.2f} | \${row[5]:7,.2f} | {last_date:12}")
    
    def query_7_genre_performance(self):
        """Analyze performance by genre"""
        print("\ğŸ“ 7. GENRE PERFORMANCE")
        print("-" * 40)
        
        query = '''
        SELECT 
            g.genre,
            COUNT(DISTINCT g.game_id) as games_count,
            COUNT(s.sale_id) as sales_count,
            SUM(s.quantity) as units_sold,
            SUM(s.sale_price) as total_revenue,
            ROUND(AVG(g.rating), 2) as avg_rating,
            ROUND(SUM(s.sale_price) / COUNT(s.sale_id), 2) as revenue_per_sale
        FROM games g
        LEFT JOIN sales s ON g.game_id = s.game_id
        GROUP BY g.genre
        ORDER BY total_revenue DESC
        '''
        
        self.cursor.execute(query)
        
        print(f"{'Genre':15} | {'Games':6} | {'Sales':7} | {'Units':7} | {'Revenue':12} | {'Rating':8} | {'Rev/Sale':10}")
        print("-" * 90)
        
        for row in self.cursor.fetchall():
            revenue = f"\${row[4]:,.2f}" if row[4] else "$0.00"
            rev_per_sale = f"\${row[6]:.2f}" if row[6] else "$0.00"
            print(f"{row[0]:15} | {row[1]:6} | {row[2]:7} | {row[3]:7} | {revenue:12} | {row[5]:7}/10 | {rev_per_sale:10}")
    
    def query_8_advanced_analytics(self):
        """Advanced analytics with subqueries"""
        print("\ğŸ”¬ 8. ADVANCED ANALYTICS")
        print("-" * 40)
        
        # Query 8a: Games with above average ratings and sales
        print("ğŸ® Games with Above Average Ratings & Sales:")
        print("-" * 40)
        
        query = '''
        SELECT 
            g.title,
            g.genre,
            g.rating,
            sub.sales_count,
            sub.total_revenue
        FROM games g
        JOIN (
            SELECT 
                game_id,
                COUNT(*) as sales_count,
                SUM(sale_price) as total_revenue
            FROM sales
            GROUP BY game_id
        ) sub ON g.game_id = sub.game_id
        WHERE g.rating > (SELECT AVG(rating) FROM games WHERE rating > 0)
          AND sub.sales_count > (SELECT AVG(sales_count) FROM (
                SELECT COUNT(*) as sales_count FROM sales GROUP BY game_id
            ))
        ORDER BY g.rating DESC, sub.total_revenue DESC
        '''
        
        self.cursor.execute(query)
        
        for row in self.cursor.fetchall():
            print(f"  â€¢ {row[0]:25} | {row[1]:15} | {row[2]:4}/10 | {row[3]:3} sales | \${row[4]:7,.2f}")
    
    def interactive_dashboard(self):
        """Interactive analytics dashboard"""
        while True:
            print("\" + "="*70)
            print("ğŸ“ˆ GAME ANALYTICS DASHBOARD")
            print("="*70)
            print("1. Sales Overview")
            print("2. Top Selling Games")
            print("3. Monthly Trends")
            print("4. Customer Demographics")
            print("5. Profitability Analysis")
            print("6. Customer Segmentation")
            print("7. Genre Performance")
            print("8. Advanced Analytics")
            print("9. Custom Query Builder")
            print("0. Exit")
            print("="*70)
            
            choice = input("\Select report (1-9, 0 to exit): ")
            
            if choice == '1':
                self.query_1_basic_sales()
            elif choice == '2':
                self.query_2_top_selling_games()
            elif choice == '3':
                self.query_3_sales_by_month()
            elif choice == '4':
                self.query_4_customer_demographics()
            elif choice == '5':
                self.query_5_profitability_analysis()
            elif choice == '6':
                self.query_6_customer_segmentation()
            elif choice == '7':
                self.query_7_genre_performance()
            elif choice == '8':
                self.query_8_advanced_analytics()
            elif choice == '9':
                self.custom_query_builder()
            elif choice == '0':
                print("\ğŸ‘‹ Goodbye!")
                break
            else:
                print("âŒ Invalid choice")
    
    def custom_query_builder(self):
        """Allow users to write custom queries"""
        print("\ğŸ”§ CUSTOM QUERY BUILDER")
        print("-" * 40)
        print("Available tables:")
        print("  â€¢ games (game_id, title, genre, price, cost, release_date, rating)")
        print("  â€¢ customers (customer_id, username, age, country, join_date)")
        print("  â€¢ sales (sale_id, game_id, customer_id, sale_date, quantity, sale_price)")
        print("-" * 40)
        
        query = input("\Enter your SQL query: ")
        
        try:
            self.cursor.execute(query)
            
            # Get column names
            columns = [desc[0] for desc in self.cursor.description]
            
            # Get data
            rows = self.cursor.fetchall()
            
            if rows:
                # Display column names
                print("\ğŸ“Š RESULTS:")
                print("-" * 80)
                
                # Simple table display
                for i, row in enumerate(rows[:10]):  # Limit to 10 rows
                    if i == 0:
                        # Print column headers
                        header = " | ".join(f"{col:15}" for col in columns)
                        print(header)
                        print("-" * 80)
                    
                    # Print row data
                    row_display = " | ".join(f"{str(val):15}"[:15] for val in row)
                    print(row_display)
                
                if len(rows) > 10:
                    print(f"... and {len(rows) - 10} more rows")
            else:
                print("âœ… Query executed successfully (0 rows returned)")
                
        except Exception as e:
            print(f"âŒ Error: {e}")
    
    def __del__(self):
        """Clean up"""
        self.conn.close()

# Run the analytics dashboard
if __name__ == "__main__":
    analytics = GameAnalytics()
    analytics.interactive_dashboard()
    </pre>
</div>

<h2>ğŸ“š SQL SELECT Best Practices</h2>

<div style="background-color: #FFF3E0; padding: 20px; border-radius: 10px; margin: 20px 0;">
    <h3>ğŸ’¡ Tips for Efficient Queries</h3>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 15px;">
        <div style="background-color: white; padding: 15px; border-radius: 8px;">
            <h4>âœ… Query Optimization</h4>
            <ul>
                <li><b>Select only needed columns:</b> Don't use <code>SELECT *</code></li>
                <li><b>Use WHERE to filter early:</b> Reduce data before processing</li>
                <li><b>Add indexes:</b> For frequently searched columns</li>
                <li><b>Use LIMIT:</b> Especially during development</li>
                <li><b>Avoid functions in WHERE:</b> Can prevent index usage</li>
                <li><b>Use EXISTS instead of IN:</b> For large datasets</li>
            </ul>
        </div>
        
        <div style="background-color: white; padding: 15px; border-radius: 8px;">
            <h4>âœ… Readability & Maintenance</h4>
            <ul>
                <li><b>Use meaningful aliases:</b> <code>SELECT price AS retail_price</code></li>
                <li><b>Format your SQL:</b> Use consistent indentation</li>
                <li><b>Comment complex queries:</b> Explain what they do</li>
                <li><b>Use CTEs (Common Table Expressions):</b> For complex queries</li>
                <li><b>Test with small data first:</b> Before running on large tables</li>
                <li><b>Use parameterized queries:</b> For security and reuse</li>
            </ul>
        </div>
    </div>
</div>

<h3>ğŸ¯ Challenge: Create Your Own Analytics Reports</h3>
<div style="background-color: #E8F5E9; padding: 20px; border-radius: 10px; margin: 20px 0;">
    <p><b>Create these advanced analytics reports:</b></p>
    
    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin: 15px 0;">
        <div style="background-color: white; padding: 10px; border-radius: 5px;">
            <h5>ğŸ“ˆ Customer Lifetime Value</h5>
            <ul>
                <li>Calculate average customer value</li>
                <li>Predict future spending</li>
                <li>Identify high-value customers</li>
                <li>Calculate retention rates</li>
            </ul>
        </div>
        <div style="background-color: white; padding: 10px; border-radius: 5px;">
            <h5>ğŸ® Game Performance Metrics</h5>
            <ul>
                <li>Sales velocity (units/day)</li>
                <li>Rating vs sales correlation</li>
                <li>Price elasticity analysis</li>
                <li>Seasonal trends per genre</li>
            </ul>
        </div>
        <div style="background-color: white; padding: 10px; border-radius: 5px;">
            <h5>ğŸŒ Geographic Analysis</h5>
            <ul>
                <li>Sales by country/region</li>
                <li>Popular genres by location</li>
                <li>Average spend per country</li>
                <li>Time zone purchase patterns</li>
            </ul>
        </div>
    </div>
    
    <div style="background-color: #f5f5f5; padding: 15px; border-radius: 8px; margin-top: 15px;">
        <h5>ğŸ’¡ Advanced Query Example</h5>
        <pre style="background-color: white; padding: 10px; border-radius: 5px;">
-- Customer segmentation by RFM (Recency, Frequency, Monetary)
WITH customer_rfm AS (
    SELECT 
        c.customer_id,
        c.username,
        -- Recency: Days since last purchase
        JULIANDAY('2024-01-01') - JULIANDAY(MAX(s.sale_date)) as recency,
        -- Frequency: Number of purchases
        COUNT(s.sale_id) as frequency,
        -- Monetary: Total spent
        SUM(s.sale_price) as monetary
    FROM customers c
    LEFT JOIN sales s ON c.customer_id = s.customer_id
    GROUP BY c.customer_id
),
rfm_scores AS (
    SELECT 
        *,
        -- Score each dimension 1-5 (5 = best)
        NTILE(5) OVER (ORDER BY recency DESC) as r_score,  -- Recent is better
        NTILE(5) OVER (ORDER BY frequency) as f_score,     -- More frequent is better
        NTILE(5) OVER (ORDER BY monetary) as m_score       -- Higher spend is better
    FROM customer_rfm
)
SELECT 
    username,
    recency,
    frequency,
    monetary,
    r_score,
    f_score,
    m_score,
    CASE 
        WHEN r_score >= 4 AND f_score >= 4 AND m_score >= 4 THEN 'Champions'
        WHEN r_score >= 3 AND f_score >= 3 AND m_score >= 3 THEN 'Loyal Customers'
        WHEN r_score >= 2 THEN 'Potential Loyalists'
        WHEN f_score >= 2 AND m_score >= 2 THEN 'At Risk'
        ELSE 'Need Attention'
    END as segment
FROM rfm_scores
ORDER BY monetary DESC;
        </pre>
    </div>
</div>

<div style="background-color: #F3E5F5; padding: 20px; border-radius: 10px; margin: 20px 0;">
    <h3>ğŸ“Š Common SELECT Patterns Cheat Sheet</h3>
    
    <div style="background-color: white; padding: 15px; border-radius: 8px; margin-top: 15px;">
        <table style="width:100%; border-collapse: collapse; font-size: 0.9em;">
            <tr style="background-color: #F3E5F5;">
                <th style="padding: 10px; border: 1px solid #D1C4E9;">Pattern</th>
                <th style="padding: 10px; border: 1px solid #D1C4E9;">SQL Example</th>
                <th style="padding: 10px; border: 1px solid #D1C4E9;">Use Case</th>
            </tr>
            <tr>
                <td style="padding: 8px; border: 1px solid #F3E5F5;">Basic Select</td>
                <td style="padding: 8px; border: 1px solid #F3E5F5;"><code>SELECT * FROM table</code></td>
                <td style="padding: 8px; border: 1px solid #F3E5F5;">Quick data inspection</td>
            </tr>
            <tr style="background-color: #F8F8F8;">
                <td style="padding: 8px; border: 1px solid #F3E5F5;">Filter with WHERE</td>
                <td style="padding: 8px; border: 1px solid #F3E5F5;"><code>SELECT ... WHERE price > 10</code></td>
                <td style="padding: 8px; border: 1px solid #F3E5F5;">Find specific data</td>
            </tr>
            <tr>
                <td style="padding: 8px; border: 1px solid #F3E5F5;">Sort results</td>
                <td style="padding: 8px; border: 1px solid #F3E5F5;"><code>SELECT ... ORDER BY rating DESC</code></td>
                <td style="padding: 8px; border: 1px solid #F3E5F5;">Rank or prioritize data</td>
            </tr>
            <tr style="background-color: #F8F8F8;">
                <td style="padding: 8px; border: 1px solid #F3E5F5;">Group and aggregate</td>
                <td style="padding: 8px; border: 1px solid #F3E5F5;"><code>SELECT genre, COUNT(*) FROM games GROUP BY genre</code></td>
                <td style="padding: 8px; border: 1px solid #F3E5F5;">Summary statistics</td>
            </tr>
            <tr>
                <td style="padding: 8px; border: 1px solid #F3E5F5;">Filter groups</td>
                <td style="padding: 8px; border: 1px solid #F3E5F5;"><code>SELECT genre, AVG(rating) FROM games GROUP BY genre HAVING AVG(rating) > 8</code></td>
                <td style="padding: 8px; border: 1px solid #F3E5F5;">Filter aggregated results</td>
            </tr>
            <tr style="background-color: #F8F8F8;">
                <td style="padding: 8px; border: 1px solid #F3E5F5;">Join tables</td>
                <td style="padding: 8px; border: 1px solid #F3E5F5;"><code>SELECT g.title, s.sale_date FROM games g JOIN sales s ON g.id = s.game_id</code></td>
                <td style="padding: 8px; border: 1px solid #F3E5F5;">Combine related data</td>
            </tr>
            <tr>
                <td style="padding: 8px; border: 1px solid #F3E5F5;">Subquery</td>
                <td style="padding: 8px; border: 1px solid #F3E5F5;"><code>SELECT * FROM games WHERE rating > (SELECT AVG(rating) FROM games)</code></td>
                <td style="padding: 8px; border: 1px solid #F3E5F5;">Compare to aggregated values</td>
            </tr>
            <tr style="background-color: #F8F8F8;">
                <td style="padding: 8px; border: 1px solid #F3E5F5;">Pattern matching</td>
                <td style="padding: 8px; border: 1px solid #F3E5F5;"><code>SELECT * FROM games WHERE title LIKE '%craft%'</code></td>
                <td style="padding: 8px; border: 1px solid #F3E5F5;">Search for patterns in text</td>
            </tr>
            <tr>
                <td style="padding: 8px; border: 1px solid #F3E5F5;">Date range</td>
                <td style="padding: 8px; border: 1px solid #F3E5F5;"><code>SELECT * FROM sales WHERE sale_date BETWEEN '2023-01-01' AND '2023-12-31'</code></td>
                <td style="padding: 8px; border: 1px solid #F3E5F5;">Filter by date periods</td>
            </tr>
            <tr style="background-color: #F8F8F8;">
                <td style="padding: 8px; border: 1px solid #F3E5F5;">Limit results</td>
                <td style="padding: 8px; border: 1px solid #F3E5F5;"><code>SELECT * FROM games LIMIT 10 OFFSET 20</code></td>
                <td style="padding: 8px; border: 1px solid #F3E5F5;">Pagination (page 3 of 10 per page)</td>
            </tr>
        </table>
    </div>
</div>

<div style="text-align: center; margin: 30px 0; padding: 20px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border-radius: 10px;">
    <h2>ğŸ‰ QUERY MASTER ACHIEVED! ğŸ‰</h2>
    <p>You can now find any data in a database like a search wizard!</p>
    <p>Next week: Table relationships and JOIN operations!</p>
    <div style="margin-top: 15px; font-size: 24px;">
        ğŸ” â†’ ğŸ“Š â†’ ğŸ“ˆ â†’ ğŸš€
    </div>
</div>`
            },

            "5-17": {
                "icon": "fa-project-diagram",
                "title": "Table Relationships & JOIN Operations",
                "html": `<h1>Month 4, Week 17: Table Relationships & JOIN Operations ğŸ”—</h1>
<p>This week, we become <b>database relationship experts</b>! We'll learn how different tables <b>connect</b> to each other - like creating a family tree for your data! ğŸŒ³</p>

<div class="analogy-box" style="background-color: #e3f2fd; border-left: 5px solid #2196F3; padding: 20px; margin: 20px 0; border-radius: 8px;">
    <b>ğŸ« Analogy: The School Database Analogy ğŸ«</b><br/><br/>
    
    â€¢ <b>Students Table</b> = List of all students<br/>
    â€¢ <b>Classes Table</b> = List of all classes<br/>
    â€¢ <b>Enrollments Table</b> = Which students are in which classes<br/>
    â€¢ <b>Primary Key</b> = Student ID or Class ID<br/>
    â€¢ <b>Foreign Key</b> = Student ID in Enrollments table<br/>
    â€¢ <b>JOIN</b> = "Connect students with their classes"<br/>
    â€¢ <b>Relationship</b> = "Student X is in Class Y"<br/>
    â€¢ <b>One-to-Many</b> = One class has many students
</div>

<div style="background-color: #FFF3E0; padding: 20px; border-radius: 10px; margin: 20px 0;">
    <h2>ğŸ”— Understanding Table Relationships</h2>
    
    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-top: 15px;">
        <div style="background-color: #E8F5E9; padding: 15px; border-radius: 8px; text-align: center;">
            <div style="font-size: 36px;">1ï¸âƒ£ â†’ ğŸ“š</div>
            <h3>One-to-One</h3>
            <p><b>One record</b> links to <b>one record</b></p>
            <p><small>Example: Student â†” Student ID Card</small></p>
        </div>
        
        <div style="background-color: #E1F5FE; padding: 15px; border-radius: 8px; text-align: center;">
            <div style="font-size: 36px;">1ï¸âƒ£ â†’ ğŸ“šğŸ“šğŸ“š</div>
            <h3>One-to-Many</h3>
            <p><b>One record</b> links to <b>many records</b></p>
            <p><small>Example: Teacher â†” Students</small></p>
        </div>
        
        <div style="background-color: #F3E5F5; padding: 15px; border-radius: 8px; text-align: center;">
            <div style="font-size: 36px;">ğŸ“š â†” ğŸ“š</div>
            <h3>Many-to-Many</h3>
            <p><b>Many records</b> link to <b>many records</b></p>
            <p><small>Example: Students â†” Classes</small></p>
        </div>
    </div>
</div>

<h2>ğŸ® Part 1: Building a Gaming Social Network</h2>

<div style="background-color: #F3E5F5; padding: 20px; border-radius: 10px; margin: 20px 0;">
    <h3>ğŸ¯ Project: Gaming Social Network Database</h3>
    
    <div style="background-color: white; padding: 15px; border-radius: 8px; margin: 15px 0;">
        <h4>ğŸ“‹ Database Schema Design</h4>
        
        <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin-top: 10px;">
            <div style="background-color: #E8F5E9; padding: 10px; border-radius: 5px;">
                <h5>ğŸ‘¤ players</h5>
                <p>Player profiles</p>
            </div>
            <div style="background-color: #E1F5FE; padding: 10px; border-radius: 5px;">
                <h5>ğŸ® games</h5>
                <p>Game information</p>
            </div>
            <div style="background-color: #FFF3E0; padding: 10px; border-radius: 5px;">
                <h5>ğŸ¤ friendships</h5>
                <p>Friend connections</p>
            </div>
            <div style="background-color: #F3E5F5; padding: 10px; border-radius: 5px;">
                <h5>ğŸ† achievements</h5>
                <p>Player achievements</p>
            </div>
        </div>
    </div>
    
    <pre style="background-color: #f5f5f5; padding: 15px; border-radius: 8px; overflow-x: auto;">
import sqlite3

print("ğŸ® GAMING SOCIAL NETWORK DATABASE ğŸ®")
print("=" * 70)

# Connect to database
conn = sqlite3.connect('gaming_social_network.db')
cursor = conn.cursor()

print("âœ… Connected to gaming_social_network.db")

# ====================================================================
# CREATE TABLES WITH RELATIONSHIPS
# ====================================================================

print("\ğŸ”¨ CREATING TABLES WITH RELATIONSHIPS...")
print("-" * 40)

# Table 1: players - One-to-Many with achievements
create_players = '''
CREATE TABLE IF NOT EXISTS players (
    player_id INTEGER PRIMARY KEY AUTOINCREMENT,
    username VARCHAR(50) UNIQUE NOT NULL,
    email VARCHAR(100) UNIQUE NOT NULL,
    level INTEGER DEFAULT 1,
    experience_points INTEGER DEFAULT 0,
    join_date DATE DEFAULT CURRENT_DATE,
    country_code CHAR(2),
    
    CONSTRAINT valid_level CHECK (level BETWEEN 1 AND 100),
    CONSTRAINT valid_email CHECK (email LIKE '%@%.%')
)
'''

# Table 2: games - Independent table
create_games = '''
CREATE TABLE IF NOT EXISTS games (
    game_id INTEGER PRIMARY KEY AUTOINCREMENT,
    title VARCHAR(100) NOT NULL,
    genre VARCHAR(50),
    release_year INTEGER,
    multiplayer BOOLEAN DEFAULT TRUE,
    
    CONSTRAINT unique_game UNIQUE(title, release_year)
)
'''

# Table 3: player_games - Many-to-Many relationship table
create_player_games = '''
CREATE TABLE IF NOT EXISTS player_games (
    player_game_id INTEGER PRIMARY KEY AUTOINCREMENT,
    player_id INTEGER NOT NULL,
    game_id INTEGER NOT NULL,
    hours_played DECIMAL(8,1) DEFAULT 0.0,
    last_played DATE,
    skill_rating DECIMAL(4,1),
    
    -- Foreign keys creating relationships
    FOREIGN KEY (player_id) REFERENCES players(player_id)
        ON DELETE CASCADE,
    FOREIGN KEY (game_id) REFERENCES games(game_id)
        ON DELETE CASCADE,
    
    -- A player can't have the same game twice
    UNIQUE(player_id, game_id)
)
'''

# Table 4: friendships - Many-to-Many relationship table
create_friendships = '''
CREATE TABLE IF NOT EXISTS friendships (
    friendship_id INTEGER PRIMARY KEY AUTOINCREMENT,
    player1_id INTEGER NOT NULL,
    player2_id INTEGER NOT NULL,
    status VARCHAR(20) DEFAULT 'pending',
    friendship_date DATE DEFAULT CURRENT_DATE,
    
    FOREIGN KEY (player1_id) REFERENCES players(player_id),
    FOREIGN KEY (player2_id) REFERENCES players(player_id),
    
    CHECK (player1_id != player2_id),  -- Can't be friends with yourself!
    CHECK (status IN ('pending', 'accepted', 'blocked')),
    UNIQUE(player1_id, player2_id)
)
'''

# Table 5: achievements - One-to-Many from players
create_achievements = '''
CREATE TABLE IF NOT EXISTS achievements (
    achievement_id INTEGER PRIMARY KEY AUTOINCREMENT,
    player_id INTEGER NOT NULL,
    game_id INTEGER,
    achievement_name VARCHAR(100) NOT NULL,
    achievement_description TEXT,
    points INTEGER DEFAULT 10,
    unlocked_date DATE DEFAULT CURRENT_DATE,
    
    FOREIGN KEY (player_id) REFERENCES players(player_id),
    FOREIGN KEY (game_id) REFERENCES games(game_id)
)
'''

# Execute all table creations
tables = [
    ('players', create_players),
    ('games', create_games),
    ('player_games', create_player_games),
    ('friendships', create_friendships),
    ('achievements', create_achievements)
]

for table_name, create_sql in tables:
    cursor.execute(create_sql)
    print(f"âœ… Created '{table_name}' table")

# ====================================================================
# INSERT SAMPLE DATA
# ====================================================================

print("\ğŸ“ INSERTING SAMPLE DATA...")
print("-" * 40)

# Insert players
players = [
    ('gamer_pro', 'alex@email.com', 45, 12500, 'USA'),
    ('minecraft_queen', 'sarah@email.com', 32, 8500, 'UK'),
    ('cod_master', 'david@email.com', 28, 7200, 'Canada'),
    ('fortnite_fan', 'jamal@email.com', 19, 3100, 'Australia'),
    ('roblox_builder', 'emma@email.com', 27, 6800, 'USA'),
    ('valorant_pro', 'liam@email.com', 56, 18900, 'Germany'),
    ('stardew_farmer', 'sophia@email.com', 22, 4200, 'France'),
    ('among_us_crew', 'noah@email.com', 15, 2100, 'Japan')
]

cursor.executemany('''
INSERT INTO players (username, email, level, experience_points, country_code)
VALUES (?, ?, ?, ?, ?)
''', players)
print(f"âœ… Added {len(players)} players")

# Insert games
games = [
    ('Minecraft', 'Sandbox', 2011, True),
    ('Fortnite', 'Battle Royale', 2017, True),
    ('Call of Duty: Warzone', 'FPS', 2020, True),
    ('Among Us', 'Social Deduction', 2018, True),
    ('Valorant', 'FPS', 2020, True),
    ('Roblox', 'Sandbox', 2006, True),
    ('Stardew Valley', 'Simulation', 2016, False),
    ('League of Legends', 'MOBA', 2009, True),
    ('Counter-Strike 2', 'FPS', 2023, True),
    ('The Sims 4', 'Simulation', 2014, False)
]

cursor.executemany('''
INSERT INTO games (title, genre, release_year, multiplayer)
VALUES (?, ?, ?, ?)
''', games)
print(f"âœ… Added {len(games)} games")

# Insert player-game relationships (who plays what)
player_games = [
    (1, 1, 350.5, 4.8),   # gamer_pro plays Minecraft
    (1, 3, 220.0, 4.5),   # gamer_pro plays COD
    (2, 1, 580.0, 4.9),   # minecraft_queen plays Minecraft
    (2, 6, 120.5, 4.2),   # minecraft_queen plays Roblox
    (3, 3, 410.0, 4.7),   # cod_master plays COD
    (3, 5, 180.0, 4.3),   # cod_master plays Valorant
    (4, 2, 320.0, 4.1),   # fortnite_fan plays Fortnite
    (4, 4, 95.0, 3.8),    # fortnite_fan plays Among Us
    (5, 6, 650.0, 4.6),   # roblox_builder plays Roblox
    (5, 1, 210.0, 4.0),   # roblox_builder plays Minecraft
    (6, 5, 480.0, 4.9),   # valorant_pro plays Valorant
    (6, 9, 390.0, 4.7),   # valorant_pro plays CS2
    (7, 7, 280.0, 4.4),   # stardew_farmer plays Stardew Valley
    (8, 4, 180.0, 4.2)    # among_us_crew plays Among Us
]

cursor.executemany('''
INSERT INTO player_games (player_id, game_id, hours_played, skill_rating)
VALUES (?, ?, ?, ?)
''', player_games)
print(f"âœ… Added {len(player_games)} player-game relationships")

# Insert friendships
friendships = [
    (1, 2, 'accepted'),  # gamer_pro â†” minecraft_queen
    (1, 3, 'accepted'),  # gamer_pro â†” cod_master
    (2, 5, 'accepted'),  # minecraft_queen â†” roblox_builder
    (3, 6, 'accepted'),  # cod_master â†” valorant_pro
    (4, 8, 'accepted'),  # fortnite_fan â†” among_us_crew
    (5, 7, 'accepted'),  # roblox_builder â†” stardew_farmer
    (1, 6, 'pending'),   # gamer_pro â†’ valorant_pro (pending)
    (3, 4, 'blocked')    # cod_master â†” fortnite_fan (blocked)
]

cursor.executemany('''
INSERT INTO friendships (player1_id, player2_id, status)
VALUES (?, ?, ?)
''', friendships)
print(f"âœ… Added {len(friendships)} friendships")

# Insert achievements
achievements = [
    (1, 1, 'First Diamond', 'Mined your first diamond in Minecraft', 50),
    (1, 1, 'Ender Dragon Slayer', 'Defeated the Ender Dragon', 100),
    (2, 1, 'Master Builder', 'Built 100 different structures', 75),
    (2, 6, 'Roblox Architect', 'Created 50 Roblox games', 150),
    (3, 3, 'Warzone Champion', 'Won 100 Warzone matches', 200),
    (3, 5, 'Valorant Ace', 'Got 5 kills in one round', 50),
    (4, 2, 'Victory Royale', 'Won a Fortnite match', 100),
    (6, 5, 'Radiant Rank', 'Reached the highest rank in Valorant', 300),
    (6, 9, 'CS:GO Global Elite', 'Reached Global Elite rank', 250),
    (7, 7, 'Perfect Farm', 'Completed community center in 1 year', 150)
]

cursor.executemany('''
INSERT INTO achievements (player_id, game_id, achievement_name, achievement_description, points)
VALUES (?, ?, ?, ?, ?)
''', achievements)
print(f"âœ… Added {len(achievements)} achievements")

conn.commit()

# ====================================================================
# VISUALIZE RELATIONSHIPS
# ====================================================================

print("\" + "="*70)
print("ğŸ“Š DATABASE RELATIONSHIP DIAGRAM")
print("="*70)

print("""
    ğŸ‘¤ players
       â”‚
       â”œâ”€â”€â”€ğŸ”— One-to-Many â”€â”€â”€â–¶ ğŸ† achievements
       â”‚
       â”œâ”€â”€â”€ğŸ”— Many-to-Many â”€â”€â–¶ ğŸ® games (through player_games)
       â”‚                         â”‚
       â”‚                         â””â”€â”€â”€ğŸ”— One-to-Many â”€â”€â”€â–¶ ğŸ† achievements
       â”‚
       â””â”€â”€â”€ğŸ”— Many-to-Many â”€â”€â–¶ ğŸ‘¤ players (through friendships)
""")

print("\ğŸ¯ RELATIONSHIP TYPES:")
print("-" * 40)
print("â€¢ ğŸ‘¤ â†’ ğŸ† One-to-Many: One player has many achievements")
print("â€¢ ğŸ‘¤ â†” ğŸ® Many-to-Many: Players can play many games, games have many players")
print("â€¢ ğŸ‘¤ â†” ğŸ‘¤ Many-to-Many: Players can be friends with many players")
print("â€¢ ğŸ® â†’ ğŸ† One-to-Many: One game has many achievements")

conn.close()
print("\âœ… Database setup complete!")
    </pre>
</div>

<h2>ğŸ”— Part 2: JOIN Operations Explained</h2>

<div style="background-color: #E8F5E9; padding: 20px; border-radius: 10px; margin: 20px 0;">
    <h3>ğŸ”„ Types of JOINs - Visual Guide</h3>
    
    <div style="background-color: white; padding: 15px; border-radius: 8px; margin: 15px 0;">
        <h4>ğŸ¨ Venn Diagram of JOIN Types</h4>
        
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 15px;">
            <div style="text-align: center;">
                <div style="position: relative; height: 150px;">
                    <!-- INNER JOIN Visualization -->
                    <div style="position: absolute; left: 20%; width: 120px; height: 120px; border: 3px solid #4CAF50; border-radius: 50%; background-color: rgba(76, 175, 80, 0.2);"></div>
                    <div style="position: absolute; left: 40%; width: 120px; height: 120px; border: 3px solid #2196F3; border-radius: 50%; background-color: rgba(33, 150, 243, 0.2);"></div>
                    <div style="position: absolute; left: 30%; top: 30px; width: 100px; height: 60px; background-color: #FF9800; border-radius: 10px; z-index: 2;">
                        <div style="color: white; padding: 10px; font-weight: bold;">INNER</div>
                    </div>
                </div>
                <h5>INNER JOIN</h5>
                <p>Only matching rows from BOTH tables</p>
                <code style="background-color: #f5f5f5; padding: 5px;">FROM A INNER JOIN B ON A.id = B.id</code>
            </div>
            
            <div style="text-align: center;">
                <div style="position: relative; height: 150px;">
                    <!-- LEFT JOIN Visualization -->
                    <div style="position: absolute; left: 20%; width: 120px; height: 120px; border: 3px solid #4CAF50; border-radius: 50%; background-color: rgba(76, 175, 80, 0.2);"></div>
                    <div style="position: absolute; left: 40%; width: 120px; height: 120px; border: 3px solid #2196F3; border-radius: 50%; background-color: rgba(33, 150, 243, 0.2);"></div>
                    <div style="position: absolute; left: 15%; top: 30px; width: 130px; height: 60px; background-color: #FF9800; border-radius: 10px; z-index: 2;">
                        <div style="color: white; padding: 10px; font-weight: bold;">LEFT</div>
                    </div>
                </div>
                <h5>LEFT JOIN</h5>
                <p>All rows from LEFT table + matching from RIGHT</p>
                <code style="background-color: #f5f5f5; padding: 5px;">FROM A LEFT JOIN B ON A.id = B.id</code>
            </div>
        </div>
        
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px;">
            <div style="text-align: center;">
                <div style="position: relative; height: 150px;">
                    <!-- RIGHT JOIN Visualization -->
                    <div style="position: absolute; left: 20%; width: 120px; height: 120px; border: 3px solid #4CAF50; border-radius: 50%; background-color: rgba(76, 175, 80, 0.2);"></div>
                    <div style="position: absolute; left: 40%; width: 120px; height: 120px; border: 3px solid #2196F3; border-radius: 50%; background-color: rgba(33, 150, 243, 0.2);"></div>
                    <div style="position: absolute; left: 35%; top: 30px; width: 130px; height: 60px; background-color: #FF9800; border-radius: 10px; z-index: 2;">
                        <div style="color: white; padding: 10px; font-weight: bold;">RIGHT</div>
                    </div>
                </div>
                <h5>RIGHT JOIN</h5>
                <p>All rows from RIGHT table + matching from LEFT</p>
                <code style="background-color: #f5f5f5; padding: 5px;">FROM A RIGHT JOIN B ON A.id = B.id</code>
            </div>
            
            <div style="text-align: center;">
                <div style="position: relative; height: 150px;">
                    <!-- FULL OUTER JOIN Visualization -->
                    <div style="position: absolute; left: 20%; width: 120px; height: 120px; border: 3px solid #4CAF50; border-radius: 50%; background-color: rgba(76, 175, 80, 0.2);"></div>
                    <div style="position: absolute; left: 40%; width: 120px; height: 120px; border: 3px solid #2196F3; border-radius: 50%; background-color: rgba(33, 150, 243, 0.2);"></div>
                    <div style="position: absolute; left: 15%; top: 30px; width: 150px; height: 60px; background-color: #FF9800; border-radius: 10px; z-index: 2;">
                        <div style="color: white; padding: 10px; font-weight: bold;">FULL OUTER</div>
                    </div>
                </div>
                <h5>FULL OUTER JOIN</h5>
                <p>All rows from BOTH tables</p>
                <code style="background-color: #f5f5f5; padding: 5px;">FROM A FULL OUTER JOIN B ON A.id = B.id</code>
            </div>
        </div>
    </div>
</div>

<h2>ğŸš€ Part 3: JOIN in Action - Gaming Network Queries</h2>

<div style="background-color: #FFF3E0; padding: 20px; border-radius: 10px; margin: 20px 0;">
    <h3>ğŸ® Week 17 Assignment: Social Network Analytics</h3>
    
    <div style="background-color: white; padding: 15px; border-radius: 8px; margin: 15px 0;">
        <h4>ğŸ“‹ Build a Complete Social Network Query System</h4>
        
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 10px;">
            <div>
                <h5>ğŸ” Required JOIN Types</h5>
                <ul>
                    <li>INNER JOIN - Basic relationships</li>
                    <li>LEFT JOIN - Include all players</li>
                    <li>Multiple JOINs - Complex queries</li>
                    <li>Self JOIN - Friends of friends</li>
                    <li>Subqueries with JOINs</li>
                </ul>
            </div>
            <div>
                <h5>ğŸ“Š Required Reports</h5>
                <ul>
                    <li>Player game libraries</li>
                    <li>Friend networks</li>
                    <li>Achievement tracking</li>
                    <li>Game recommendations</li>
                    <li>Social circles</li>
                </ul>
            </div>
        </div>
    </div>
    
    <pre style="background-color: #f5f5f5; padding: 15px; border-radius: 8px; overflow-x: auto;">
# ====================================================================
# GAMING SOCIAL NETWORK ANALYTICS
# ====================================================================

import sqlite3

class GamingSocialNetwork:
    def __init__(self):
        self.conn = sqlite3.connect('gaming_social_network.db')
        self.cursor = self.conn.cursor()
    
    # ====================================================================
    # LEVEL 1: Basic INNER JOIN Queries
    # ====================================================================
    
    def query_1_basic_inner_join(self):
        """Basic INNER JOIN: Players and their games"""
        print(" 1ï¸âƒ£ BASIC INNER JOIN: Players & Their Games")
        print("-" * 70)
        
        query = '''
        SELECT 
            p.username,
            g.title,
            pg.hours_played,
            pg.skill_rating
        FROM players p
        INNER JOIN player_games pg ON p.player_id = pg.player_id
        INNER JOIN games g ON pg.game_id = g.game_id
        ORDER BY p.username, pg.hours_played DESC
        '''
        
        self.cursor.execute(query)
        
        print(f"{'Player':15} | {'Game':25} | {'Hours':8} | {'Rating':8}")
        print("-" * 70)
        
        for row in self.cursor.fetchall():
            print(f"{row[0]:15} | {row[1]:25} | {row[2]:8.1f} | {row[3]:8.1f}")
    
    # ====================================================================
    # LEVEL 2: LEFT JOIN (Include All Players)
    # ====================================================================
    
    def query_2_left_join_all_players(self):
        """LEFT JOIN: Show ALL players, even if they have no games"""
        print(" 2ï¸âƒ£ LEFT JOIN: All Players (Even Without Games)")
        print("-" * 70)
        
        query = '''
        SELECT 
            p.username,
            p.level,
            COUNT(pg.game_id) as games_played,
            COALESCE(SUM(pg.hours_played), 0) as total_hours
        FROM players p
        LEFT JOIN player_games pg ON p.player_id = pg.player_id
        GROUP BY p.player_id
        ORDER BY total_hours DESC
        '''
        
        self.cursor.execute(query)
        
        print(f"{'Player':15} | {'Level':6} | {'Games':7} | {'Total Hours':12}")
        print("-" * 70)
        
        for row in self.cursor.fetchall():
            print(f"{row[0]:15} | {row[1]:6} | {row[2]:7} | {row[3]:12.1f}")
    
    # ====================================================================
    # LEVEL 3: Multiple Table JOIN
    # ====================================================================
    
    def query_3_multiple_join(self):
        """Multiple JOINs: Players, Games, and Achievements"""
        print(" 3ï¸âƒ£ MULTIPLE JOINS: Players â†’ Games â†’ Achievements")
        print("-" * 70)
        
        query = '''
        SELECT 
            p.username,
            g.title,
            a.achievement_name,
            a.points,
            a.unlocked_date
        FROM players p
        INNER JOIN achievements a ON p.player_id = a.player_id
        LEFT JOIN games g ON a.game_id = g.game_id
        ORDER BY p.username, a.points DESC
        LIMIT 15
        '''
        
        self.cursor.execute(query)
        
        print(f"{'Player':12} | {'Game':20} | {'Achievement':25} | {'Points':8} | {'Date':10}")
        print("-" * 90)
        
        for row in self.cursor.fetchall():
            game = row[1] if row[1] else "General"
            date = row[4][:10] if row[4] else "Unknown"
            print(f"{row[0]:12} | {game:20} | {row[2]:25} | {row[3]:8} | {date:10}")
    
    # ====================================================================
    # LEVEL 4: Self JOIN (Friends Network)
    # ====================================================================
    
    def query_4_self_join_friends(self):
        """Self JOIN: Find friends of a player"""
        print(" 4ï¸âƒ£ SELF JOIN: Friends Network")
        print("-" * 70)
        
        # Show all accepted friendships
        query = '''
        SELECT 
            p1.username as player1,
            p2.username as player2,
            f.friendship_date
        FROM friendships f
        INNER JOIN players p1 ON f.player1_id = p1.player_id
        INNER JOIN players p2 ON f.player2_id = p2.player_id
        WHERE f.status = 'accepted'
        ORDER BY f.friendship_date
        '''
        
        self.cursor.execute(query)
        
        print(f"{'Player 1':15} | {'Player 2':15} | {'Friends Since':12}")
        print("-" * 70)
        
        for row in self.cursor.fetchall():
            print(f"{row[0]:15} | {row[1]:15} | {row[2]:12}")
    
    def query_5_friends_of_friends(self):
        """Complex Self JOIN: Friends of friends"""
        print(" 5ï¸âƒ£ COMPLEX SELF JOIN: Friends of Friends")
        print("-" * 70)
        
        # Find friends of friends for a specific player (player_id = 1)
        target_player = 1
        
        query = '''
        WITH direct_friends AS (
            -- Get direct friends
            SELECT 
                CASE 
                    WHEN f.player1_id = ? THEN f.player2_id
                    ELSE f.player1_id
                END as friend_id
            FROM friendships f
            WHERE (f.player1_id = ? OR f.player2_id = ?)
              AND f.status = 'accepted'
        ),
        friends_of_friends AS (
            -- Get friends of those friends
            SELECT DISTINCT
                CASE 
                    WHEN f.player1_id IN (SELECT friend_id FROM direct_friends) 
                        AND f.player2_id != ? THEN f.player2_id
                    WHEN f.player2_id IN (SELECT friend_id FROM direct_friends) 
                        AND f.player1_id != ? THEN f.player1_id
                END as fof_id
            FROM friendships f
            WHERE (f.player1_id IN (SELECT friend_id FROM direct_friends) 
                   OR f.player2_id IN (SELECT friend_id FROM direct_friends))
              AND f.status = 'accepted'
              AND fof_id IS NOT NULL
        )
        SELECT p.username, p.level
        FROM players p
        WHERE p.player_id IN (SELECT fof_id FROM friends_of_friends)
        ORDER BY p.level DESC
        '''
        
        self.cursor.execute(query, (target_player, target_player, target_player, target_player, target_player))
        
        # Get target player name
        self.cursor.execute("SELECT username FROM players WHERE player_id = ?", (target_player,))
        target_name = self.cursor.fetchone()[0]
        
        print(f"ğŸ‘¥ Friends of {target_name}'s friends:")
        print("-" * 70)
        
        results = self.cursor.fetchall()
        if results:
            for row in results:
                print(f"  â€¢ {row[0]} (Level {row[1]})")
        else:
            print("  No friends of friends found")
    
    # ====================================================================
    # LEVEL 5: JOIN with Aggregations
    # ====================================================================
    
    def query_6_join_with_aggregations(self):
        """JOIN with GROUP BY and aggregations"""
        print(" 6ï¸âƒ£ JOIN WITH AGGREGATIONS: Game Popularity")
        print("-" * 70)
        
        query = '''
        SELECT 
            g.title,
            g.genre,
            COUNT(DISTINCT pg.player_id) as player_count,
            AVG(pg.hours_played) as avg_hours,
            AVG(pg.skill_rating) as avg_rating,
            SUM(pg.hours_played) as total_hours
        FROM games g
        LEFT JOIN player_games pg ON g.game_id = pg.game_id
        GROUP BY g.game_id
        HAVING player_count > 0
        ORDER BY player_count DESC, total_hours DESC
        '''
        
        self.cursor.execute(query)
        
        print(f"{'Game':25} | {'Genre':15} | {'Players':8} | {'Avg Hours':10} | {'Avg Rating':10} | {'Total Hours':12}")
        print("-" * 100)
        
        for row in self.cursor.fetchall():
            print(f"{row[0]:25} | {row[1]:15} | {row[2]:8} | {row[3]:10.1f} | {row[4]:10.1f} | {row[5]:12.1f}")
    
    # ====================================================================
    # LEVEL 6: Complex JOIN with Subqueries
    # ====================================================================
    
    def query_7_complex_join_subquery(self):
        """Complex query with JOIN and subquery"""
        print(" 7ï¸âƒ£ COMPLEX JOIN WITH SUBQUERY: Top Players by Game")
        print("-" * 70)
        
        query = '''
        SELECT 
            g.title,
            p.username,
            pg.hours_played,
            pg.skill_rating,
            -- Rank players within each game
            RANK() OVER (PARTITION BY g.game_id ORDER BY pg.skill_rating DESC) as rank_in_game
        FROM games g
        INNER JOIN player_games pg ON g.game_id = pg.game_id
        INNER JOIN players p ON pg.player_id = p.player_id
        WHERE pg.skill_rating IS NOT NULL
        QUALIFY rank_in_game <= 3  -- Top 3 players per game
        ORDER BY g.title, rank_in_game
        '''
        
        self.cursor.execute(query)
        
        current_game = None
        print(f"{'Game':25} | {'Rank':4} | {'Player':15} | {'Hours':8} | {'Rating':8}")
        print("-" * 70)
        
        for row in self.cursor.fetchall():
            if row[0] != current_game:
                current_game = row[0]
                print(f" ğŸ® {current_game}")
                print("-" * 70)
            
            print(f"{'':25} | #{row[4]:3} | {row[1]:15} | {row[2]:8.1f} | {row[3]:8.1f}")
    
    # ====================================================================
    # LEVEL 7: Many-to-Many Analysis
    # ====================================================================
    
    def query_8_many_to_many_analysis(self):
        """Analyze many-to-many relationships"""
        print(" 8ï¸âƒ£ MANY-TO-MANY ANALYSIS: Game Communities")
        print("-" * 70)
        
        # Find games that share players
        query = '''
        WITH game_pairs AS (
            SELECT 
                g1.title as game1,
                g2.title as game2,
                COUNT(DISTINCT pg1.player_id) as shared_players
            FROM player_games pg1
            INNER JOIN player_games pg2 ON pg1.player_id = pg2.player_id 
                AND pg1.game_id < pg2.game_id
            INNER JOIN games g1 ON pg1.game_id = g1.game_id
            INNER JOIN games g2 ON pg2.game_id = g2.game_id
            GROUP BY pg1.game_id, pg2.game_id
            HAVING shared_players >= 2
        )
        SELECT game1, game2, shared_players
        FROM game_pairs
        ORDER BY shared_players DESC
        LIMIT 10
        '''
        
        self.cursor.execute(query)
        
        print(f"{'Game 1':25} | {'Game 2':25} | {'Shared Players':15}")
        print("-" * 70)
        
        for row in self.cursor.fetchall():
            print(f"{row[0]:25} | {row[1]:25} | {row[2]:15}")
    
    # ====================================================================
    # LEVEL 8: Full Network Analysis
    # ====================================================================
    
    def query_9_network_analysis(self):
        """Complete social network analysis"""
        print(" 9ï¸âƒ£ NETWORK ANALYSIS: Complete Social Graph")
        print("-" * 70)
        
        # Player network statistics
        query = '''
        WITH player_stats AS (
            SELECT 
                p.player_id,
                p.username,
                -- Friends count
                (SELECT COUNT(*) FROM friendships f 
                 WHERE (f.player1_id = p.player_id OR f.player2_id = p.player_id)
                   AND f.status = 'accepted') as friend_count,
                -- Games count
                (SELECT COUNT(*) FROM player_games pg 
                 WHERE pg.player_id = p.player_id) as games_count,
                -- Achievements count
                (SELECT COUNT(*) FROM achievements a 
                 WHERE a.player_id = p.player_id) as achievements_count
            FROM players p
        )
        SELECT 
            username,
            friend_count,
            games_count,
            achievements_count,
            friend_count + games_count + achievements_count as total_score
        FROM player_stats
        ORDER BY total_score DESC
        '''
        
        self.cursor.execute(query)
        
        print(f"{'Player':15} | {'Friends':8} | {'Games':8} | {'Achievements':12} | {'Total Score':12}")
        print("-" * 70)
        
        for row in self.cursor.fetchall():
            print(f"{row[0]:15} | {row[1]:8} | {row[2]:8} | {row[3]:12} | {row[4]:12}")
    
    # ====================================================================
    # LEVEL 9: Recommendation Engine
    # ====================================================================
    
    def query_10_recommendation_engine(self):
        """Game recommendation based on friends' games"""
        print(" ğŸ”Ÿ RECOMMENDATION ENGINE: Games Your Friends Play")
        print("-" * 70)
        
        target_player = 1
        
        query = '''
        WITH friends_games AS (
            -- Get games played by friends
            SELECT DISTINCT pg.game_id
            FROM friendships f
            INNER JOIN player_games pg ON (
                (f.player1_id = pg.player_id AND f.player2_id = ?) OR
                (f.player2_id = pg.player_id AND f.player1_id = ?)
            )
            WHERE f.status = 'accepted'
        ),
        my_games AS (
            -- Get games I already play
            SELECT game_id 
            FROM player_games 
            WHERE player_id = ?
        )
        SELECT 
            g.title,
            g.genre,
            COUNT(DISTINCT pg.player_id) as friend_count,
            AVG(pg.skill_rating) as avg_friend_rating
        FROM games g
        INNER JOIN friends_games fg ON g.game_id = fg.game_id
        INNER JOIN player_games pg ON g.game_id = pg.game_id
        WHERE g.game_id NOT IN (SELECT game_id FROM my_games)
          AND pg.player_id IN (
              SELECT 
                  CASE 
                      WHEN f.player1_id = ? THEN f.player2_id
                      ELSE f.player1_id
                  END as friend_id
              FROM friendships f
              WHERE (f.player1_id = ? OR f.player2_id = ?)
                AND f.status = 'accepted'
          )
        GROUP BY g.game_id
        HAVING friend_count >= 2
        ORDER BY friend_count DESC, avg_friend_rating DESC
        LIMIT 5
        '''
        
        self.cursor.execute(query, (target_player, target_player, target_player, target_player, target_player, target_player))
        
        # Get target player name
        self.cursor.execute("SELECT username FROM players WHERE player_id = ?", (target_player,))
        target_name = self.cursor.fetchone()[0]
        
        print(f"ğŸ® Game recommendations for {target_name}:")
        print("-" * 70)
        
        results = self.cursor.fetchall()
        if results:
            for i, row in enumerate(results, 1):
                print(f"  {i}. {row[0]}")
                print(f"     Genre: {row[1]}")
                print(f"     Played by {row[2]} friends")
                print(f"     Average friend rating: {row[3]:.1f}/5.0")
                print()
        else:
            print("  No recommendations found")
    
    # ====================================================================
    # Interactive Dashboard
    # ====================================================================
    
    def run_dashboard(self):
        """Run interactive dashboard"""
        while True:
            print(" " + "="*70)
            print("ğŸ”— GAMING SOCIAL NETWORK ANALYTICS")
            print("="*70)
            print("1. Basic INNER JOIN - Players & Games")
            print("2. LEFT JOIN - All Players (Even No Games)")
            print("3. Multiple JOINs - Players â†’ Games â†’ Achievements")
            print("4. Self JOIN - Friends Network")
            print("5. Complex Self JOIN - Friends of Friends")
            print("6. JOIN with Aggregations - Game Popularity")
            print("7. Complex JOIN with Subquery - Top Players")
            print("8. Many-to-Many Analysis - Game Communities")
            print("9. Network Analysis - Complete Social Graph")
            print("10. Recommendation Engine - Games Friends Play")
            print("0. Exit")
            print("="*70)
            
            choice = input(" Select query (1-10, 0 to exit): ")
            
            if choice == '1':
                self.query_1_basic_inner_join()
            elif choice == '2':
                self.query_2_left_join_all_players()
            elif choice == '3':
                self.query_3_multiple_join()
            elif choice == '4':
                self.query_4_self_join_friends()
            elif choice == '5':
                self.query_5_friends_of_friends()
            elif choice == '6':
                self.query_6_join_with_aggregations()
            elif choice == '7':
                self.query_7_complex_join_subquery()
            elif choice == '8':
                self.query_8_many_to_many_analysis()
            elif choice == '9':
                self.query_9_network_analysis()
            elif choice == '10':
                self.query_10_recommendation_engine()
            elif choice == '0':
                print(" ğŸ‘‹ Goodbye!")
                break
            else:
                print("âŒ Invalid choice")
            
            input(" Press Enter to continue...")
    
    def __del__(self):
        """Clean up"""
        self.conn.close()

# Run the analytics dashboard
if __name__ == "__main__":
    network = GamingSocialNetwork()
    network.run_dashboard()
    </pre>
</div>

<h2>ğŸ“š JOIN Best Practices & Patterns</h2>

<div style="background-color: #FFF3E0; padding: 20px; border-radius: 10px; margin: 20px 0;">
    <h3>ğŸ’¡ Tips for Effective JOIN Operations</h3>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 15px;">
        <div style="background-color: white; padding: 15px; border-radius: 8px;">
            <h4>âœ… JOIN Optimization</h4>
            <ul>
                <li><b>Use INNER JOIN by default:</b> Most common, most efficient</li>
                <li><b>Add indexes on JOIN columns:</b> Foreign keys should be indexed</li>
                <li><b>Filter early with WHERE:</b> Before JOIN for better performance</li>
                <li><b>Use appropriate JOIN type:</b> Don't use LEFT JOIN when INNER works</li>
                <li><b>Limit JOIN results:</b> Use LIMIT with large datasets</li>
                <li><b>Avoid Cartesian products:</b> Always specify JOIN conditions</li>
            </ul>
        </div>
        
        <div style="background-color: white; padding: 15px; border-radius: 8px;">
            <h4>âœ… Query Structure</h4>
            <ul>
                <li><b>Use table aliases:</b> Makes queries more readable</li>
                <li><b>Be explicit about JOIN type:</b> Don't use comma joins</li>
                <li><b>Order JOINs logically:</b> Start with main table</li>
                <li><b>Use CTEs for complex joins:</b> Break down complex queries</li>
                <li><b>Test with EXPLAIN:</b> Understand query execution plan</li>
                <li><b>Document complex relationships:</b> Add comments explaining joins</li>
            </ul>
        </div>
    </div>
</div>

<h3>ğŸ¯ Challenge: Build Your Own Social Network</h3>
<div style="background-color: #E8F5E9; padding: 20px; border-radius: 10px; margin: 20px 0;">
    <p><b>Create your own social network database with these features:</b></p>
    
    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin: 15px 0;">
        <div style="background-color: white; padding: 10px; border-radius: 5px;">
            <h5>ğŸ“± Basic Features</h5>
            <ul>
                <li>User profiles with interests</li>
                <li>Friend connections</li>
                <li>Posts and comments</li>
                <li>Likes and reactions</li>
            </ul>
        </div>
        <div style="background-color: white; padding: 10px; border-radius: 5px;">
            <h5>ğŸ”— Advanced Relationships</h5>
            <ul>
                <li>Groups and memberships</li>
                <li>Events and attendees</li>
                <li>Messages and conversations</li>
                <li>Notifications system</li>
            </ul>
        </div>
        <div style="background-color: white; padding: 10px; border-radius: 5px;">
            <h5>ğŸ“Š Analytics Queries</h5>
            <ul>
                <li>Most popular users</li>
                <li>Friend recommendations</li>
                <li>Activity trends</li>
                <li>Network density analysis</li>
            </ul>
        </div>
    </div>
    
    <div style="background-color: #f5f5f5; padding: 15px; border-radius: 8px; margin-top: 15px;">
        <h5>ğŸ’¡ Advanced JOIN Pattern Example</h5>
        <pre style="background-color: white; padding: 10px; border-radius: 5px;">
-- Find mutual friends between two users
WITH user1_friends AS (
    SELECT 
        CASE 
            WHEN f.player1_id = ? THEN f.player2_id
            ELSE f.player1_id
        END as friend_id
    FROM friendships f
    WHERE (f.player1_id = ? OR f.player2_id = ?)
      AND f.status = 'accepted'
),
user2_friends AS (
    SELECT 
        CASE 
            WHEN f.player1_id = ? THEN f.player2_id
            ELSE f.player1_id
        END as friend_id
    FROM friendships f
    WHERE (f.player1_id = ? OR f.player2_id = ?)
      AND f.status = 'accepted'
)
SELECT 
    p.username,
    p.level,
    (SELECT COUNT(*) FROM friendships f 
     WHERE (f.player1_id = p.player_id OR f.player2_id = p.player_id)
       AND f.status = 'accepted') as total_friends
FROM players p
WHERE p.player_id IN (
    SELECT friend_id FROM user1_friends
    INTERSECT
    SELECT friend_id FROM user2_friends
)
ORDER BY total_friends DESC;
        </pre>
    </div>
</div>

<div style="background-color: #F3E5F5; padding: 20px; border-radius: 10px; margin: 20px 0;">
    <h3>ğŸ“Š Common JOIN Patterns Cheat Sheet</h3>
    
    <div style="background-color: white; padding: 15px; border-radius: 8px; margin-top: 15px;">
        <table style="width:100%; border-collapse: collapse; font-size: 0.9em;">
            <tr style="background-color: #F3E5F5;">
                <th style="padding: 10px; border: 1px solid #D1C4E9;">Pattern</th>
                <th style="padding: 10px; border: 1px solid #D1C4E9;">SQL Example</th>
                <th style="padding: 10px; border: 1px solid #D1C4E9;">Use Case</th>
            </tr>
            <tr>
                <td style="padding: 8px; border: 1px solid #F3E5F5;">Basic Relationship</td>
                <td style="padding: 8px; border: 1px solid #F3E5F5;"><code>FROM A INNER JOIN B ON A.id = B.a_id</code></td>
                <td style="padding: 8px; border: 1px solid #F3E5F5;">Connect related tables</td>
            </tr>
            <tr style="background-color: #F8F8F8;">
                <td style="padding: 8px; border: 1px solid #F3E5F5;">Include All Records</td>
                <td style="padding: 8px; border: 1px solid #F3E5F5;"><code>FROM A LEFT JOIN B ON A.id = B.a_id</code></td>
                <td style="padding: 8px; border: 1px solid #F3E5F5;">Show all A, even without B</td>
            </tr>
            <tr>
                <td style="padding: 8px; border: 1px solid #F3E5F5;">Multiple Relationships</td>
                <td style="padding: 8px; border: 1px solid #F3E5F5;"><code>FROM A JOIN B ON ... JOIN C ON ...</code></td>
                <td style="padding: 8px; border: 1px solid #F3E5F5;">Connect 3+ tables</td>
            </tr>
            <tr style="background-color: #F8F8F8;">
                <td style="padding: 8px; border: 1px solid #F3E5F5;">Self Relationship</td>
                <td style="padding: 8px; border: 1px solid #F3E5F5;"><code>FROM employees e1 JOIN employees e2 ON e1.manager_id = e2.id</code></td>
                <td style="padding: 8px; border: 1px solid #F3E5F5;">Hierarchical data (org charts)</td>
            </tr>
            <tr>
                <td style="padding: 8px; border: 1px solid #F3E5F5;">Many-to-Many Bridge</td>
                <td style="padding: 8px; border: 1px solid #F3E5F5;"><code>FROM A JOIN AB ON A.id = AB.a_id JOIN B ON AB.b_id = B.id</code></td>
                <td style="padding: 8px; border: 1px solid #F3E5F5;">Connect through junction table</td>
            </tr>
            <tr style="background-color: #F8F8F8;">
                <td style="padding: 8px; border: 1px solid #F3E5F5;">Conditional JOIN</td>
                <td style="padding: 8px; border: 1px solid #F3E5F5;"><code>FROM A LEFT JOIN B ON A.id = B.a_id AND B.status = 'active'</code></td>
                <td style="padding: 8px; border: 1px solid #F3E5F5;">Join with additional conditions</td>
            </tr>
            <tr>
                <td style="padding: 8px; border: 1px solid #F3E5F5;">Cross JOIN (Cartesian)</td>
                <td style="padding: 8px; border: 1px solid #F3E5F5;"><code>FROM A CROSS JOIN B</code></td>
                <td style="padding: 8px; border: 1px solid #F3E5F5;">All combinations (use carefully!)</td>
            </tr>
        </table>
    </div>
</div>

<div style="text-align: center; margin: 30px 0; padding: 20px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border-radius: 10px;">
    <h2>ğŸ‰ RELATIONSHIP MASTER ACHIEVED! ğŸ‰</h2>
    <p>You can now connect and analyze data across multiple tables like a pro!</p>
    <p>Next week: Advanced SQL features and database optimization!</p>
    <div style="margin-top: 15px; font-size: 24px;">
        ğŸ”— â†’ ğŸ¤ â†’ ğŸŒ â†’ ğŸš€
    </div>
</div>`
            },
            "5-18": {
                "icon": "fa-chart-bar",
                "title": "Advanced SQL & Database Optimization",
                "html": `<h1>Month 4, Week 18: Advanced SQL & Database Optimization âš¡</h1>
<p>This week, we become <b>database performance wizards</b>! We'll learn how to make databases <b>lightning fast</b> and handle <b>millions of records</b> without breaking a sweat! ğŸš€</p>

<div class="analogy-box" style="background-color: #e3f2fd; border-left: 5px solid #2196F3; padding: 20px; margin: 20px 0; border-radius: 8px;">
    <b>ğŸï¸ Analogy: The Database Race Car Tuning ğŸ</b><br/><br/>
    
    â€¢ <b>Database</b> = A racing car<br/>
    â€¢ <b>Indexes</b> = Turbo boosters and spoilers<br/>
    â€¢ <b>Query Optimization</b> = Finding the fastest racing line<br/>
    â€¢ <b>Transactions</b> = Pit stops that must be perfect<br/>
    â€¢ <b>Views</b> = Custom dashboards for different drivers<br/>
    â€¢ <b>Stored Procedures</b> = Pre-programmed racing strategies<br/>
    â€¢ <b>Performance Tuning</b> = Fine-tuning the engine for max speed<br/>
    â€¢ <b>Normalization</b> = Organizing the garage for quick part access
</div>

<div style="background-color: #FFF3E0; padding: 20px; border-radius: 10px; margin: 20px 0;">
    <h2>âš¡ Database Performance: Before vs After Optimization</h2>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 15px;">
        <div style="background-color: #FFEBEE; padding: 15px; border-radius: 8px;">
            <div style="font-size: 36px; text-align: center;">ğŸŒ</div>
            <h3>Slow Database</h3>
            <ul>
                <li>âŒ No indexes - searches scan every row</li>
                <li>âŒ Repeated data - wasted space</li>
                <li>âŒ Complex queries - hard to read</li>
                <li>âŒ No transactions - data can corrupt</li>
                <li>âŒ Bad structure - slow joins</li>
                <li><b>Result:</b> 5+ second queries ğŸ˜´</li>
            </ul>
        </div>
        
        <div style="background-color: #E8F5E9; padding: 15px; border-radius: 8px;">
            <div style="font-size: 36px; text-align: center;">âš¡</div>
            <h3>Optimized Database</h3>
            <ul>
                <li>âœ… Smart indexes - instant lookups</li>
                <li>âœ… Normalized data - efficient storage</li>
                <li>âœ… Optimized queries - fast execution</li>
                <li>âœ… Transactions - data integrity</li>
                <li>âœ… Proper structure - lightning joins</li>
                <li><b>Result:</b> 0.01 second queries! ğŸ¯</li>
            </ul>
        </div>
    </div>
</div>

<h2>ğŸ“Š Part 1: Database Indexes - The Speed Secret</h2>

<div style="background-color: #F3E5F5; padding: 20px; border-radius: 10px; margin: 20px 0;">
    <h3>ğŸ” Understanding Indexes: The Book vs The Index</h3>
    
    <div style="background-color: white; padding: 15px; border-radius: 8px; margin: 15px 0;">
        <h4>ğŸ“š Analogy: Finding Information in a Book</h4>
        
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 15px;">
            <div style="background-color: #FFF3E0; padding: 15px; border-radius: 8px;">
                <h5>âŒ Without Index (Slow)</h5>
                <p><b>Finding "Python" in a 1000-page programming book:</b></p>
                <ol>
                    <li>Start at page 1</li>
                    <li>Read every line</li>
                    <li>Check if "Python" is mentioned</li>
                    <li>Continue through all 1000 pages</li>
                </ol>
                <p><b>Time:</b> 2 hours â³</p>
                <p><small>Like scanning entire table for a record</small></p>
            </div>
            
            <div style="background-color: #E8F5E9; padding: 15px; border-radius: 8px;">
                <h5>âœ… With Index (Fast)</h5>
                <p><b>Using the book's index:</b></p>
                <ol>
                    <li>Go to index at back of book</li>
                    <li>Find "Python" in alphabetical list</li>
                    <li>See it's on pages 45, 89, 203</li>
                    <li>Go directly to those pages</li>
                </ol>
                <p><b>Time:</b> 30 seconds âš¡</p>
                <p><small>Like using database index for instant lookup</small></p>
            </div>
        </div>
    </div>
    
    <pre style="background-color: #f5f5f5; padding: 15px; border-radius: 8px; overflow-x: auto;">
import sqlite3
import time
import random

print("âš¡ DATABASE INDEX PERFORMANCE DEMO âš¡")
print("=" * 70)

# Connect to database
conn = sqlite3.connect('performance_demo.db')
cursor = conn.cursor()

print("âœ… Connected to performance_demo.db")

# ====================================================================
# CREATE LARGE DATASET FOR TESTING
# ====================================================================

print(" ğŸ“Š CREATING LARGE DATASET (This may take a moment)...")
print("-" * 40)

# Create players table WITHOUT indexes initially
cursor.execute('''
CREATE TABLE IF NOT EXISTS players_no_index (
    player_id INTEGER PRIMARY KEY,
    username VARCHAR(50),
    email VARCHAR(100),
    level INTEGER,
    experience BIGINT,
    join_date DATE,
    country VARCHAR(50),
    guild_id INTEGER,
    last_login TIMESTAMP
)
''')

# Create same table WITH indexes
cursor.execute('''
CREATE TABLE IF NOT EXISTS players_with_index (
    player_id INTEGER PRIMARY KEY,
    username VARCHAR(50),
    email VARCHAR(100),
    level INTEGER,
    experience BIGINT,
    join_date DATE,
    country VARCHAR(50),
    guild_id INTEGER,
    last_login TIMESTAMP
)
''')

# Clear any existing data
cursor.execute("DELETE FROM players_no_index")
cursor.execute("DELETE FROM players_with_index")
conn.commit()

# Generate 100,000 sample players
print("Generating 100,000 player records...")
countries = ['USA', 'UK', 'Canada', 'Australia', 'Germany', 'France', 'Japan', 'Brazil']
guilds = list(range(1, 101))  # 100 different guilds

players = []
for i in range(1, 100001):
    username = f'player_{i:06d}'
    email = f'player{i}@game.com'
    level = random.randint(1, 100)
    experience = random.randint(0, 1000000)
    join_date = f'2023-{random.randint(1,12):02d}-{random.randint(1,28):02d}'
    country = random.choice(countries)
    guild_id = random.choice(guilds)
    last_login = f'2024-01-{random.randint(1,18):02d} {random.randint(0,23):02d}:{random.randint(0,59):02d}:{random.randint(0,59):02d}'
    
    players.append((i, username, email, level, experience, join_date, country, guild_id, last_login))

# Insert in batches for performance
batch_size = 1000
for i in range(0, len(players), batch_size):
    batch = players[i:i+batch_size]
    cursor.executemany('INSERT INTO players_no_index VALUES (?,?,?,?,?,?,?,?,?)', batch)
    cursor.executemany('INSERT INTO players_with_index VALUES (?,?,?,?,?,?,?,?,?)', batch)
    
    if i % 10000 == 0:
        print(f"  Inserted {i:,} records...")

conn.commit()
print(f"âœ… Created 2 tables with {len(players):,} players each")
print("   â€¢ players_no_index - No indexes")
print("   â€¢ players_with_index - Will add indexes")

# ====================================================================
# ADD INDEXES TO ONE TABLE
# ====================================================================

print(" ğŸ”§ ADDING INDEXES TO 'players_with_index' TABLE...")
print("-" * 40)

# Add various types of indexes
indexes = [
    ('idx_username', 'CREATE INDEX idx_username ON players_with_index(username)'),
    ('idx_email', 'CREATE UNIQUE INDEX idx_email ON players_with_index(email)'),
    ('idx_level', 'CREATE INDEX idx_level ON players_with_index(level)'),
    ('idx_country', 'CREATE INDEX idx_country ON players_with_index(country)'),
    ('idx_guild_id', 'CREATE INDEX idx_guild_id ON players_with_index(guild_id)'),
    ('idx_join_date', 'CREATE INDEX idx_join_date ON players_with_index(join_date)'),
    ('idx_level_country', 'CREATE INDEX idx_level_country ON players_with_index(level, country)')
]

for idx_name, idx_sql in indexes:
    cursor.execute(idx_sql)
    print(f"âœ… Created index: {idx_name}")

conn.commit()

# ====================================================================
# PERFORMANCE COMPARISON TESTS
# ====================================================================

def run_query(description, query, params=(), iterations=10):
    """Run a query and measure execution time"""
    total_time = 0
    
    for i in range(iterations):
        start_time = time.time()
        cursor.execute(query, params)
        results = cursor.fetchall()
        end_time = time.time()
        total_time += (end_time - start_time)
    
    avg_time = total_time / iterations
    return avg_time, len(results)

print(" " + "="*70)
print("ğŸï¸ PERFORMANCE COMPARISON: WITH vs WITHOUT INDEXES")
print("="*70)

# Test 1: Find player by username (exact match)
print(" 1ï¸âƒ£ TEST: Find Player by Username (Exact Match)")
print("-" * 40)

# Without index
avg_time_no_index, count_no = run_query(
    "Without index",
    "SELECT * FROM players_no_index WHERE username = ?",
    ('player_050000',)
)

# With index
avg_time_with_index, count_with = run_query(
    "With index",
    "SELECT * FROM players_with_index WHERE username = ?",
    ('player_050000',)
)

print(f"ğŸ“Š No Index:    {avg_time_no_index:.6f} seconds")
print(f"ğŸ“Š With Index:  {avg_time_with_index:.6f} seconds")
print(f"ğŸš€ Speedup:     {avg_time_no_index/avg_time_with_index:.1f}x faster!")

# Test 2: Find high-level players
print(" 2ï¸âƒ£ TEST: Find High-Level Players (Level 90+)")
print("-" * 40)

# Without index
avg_time_no_index, count_no = run_query(
    "Without index",
    "SELECT COUNT(*) FROM players_no_index WHERE level >= 90"
)

# With index
avg_time_with_index, count_with = run_query(
    "With index",
    "SELECT COUNT(*) FROM players_with_index WHERE level >= 90"
)

print(f"ğŸ“Š No Index:    {avg_time_no_index:.6f} seconds ({count_no} players)")
print(f"ğŸ“Š With Index:  {avg_time_with_index:.6f} seconds ({count_with} players)")
print(f"ğŸš€ Speedup:     {avg_time_no_index/avg_time_with_index:.1f}x faster!")

# Test 3: Find players by country
print(" 3ï¸âƒ£ TEST: Find Players from Specific Country")
print("-" * 40)

# Without index
avg_time_no_index, count_no = run_query(
    "Without index",
    "SELECT username, level FROM players_no_index WHERE country = ?",
    ('Japan',)
)

# With index
avg_time_with_index, count_with = run_query(
    "With index",
    "SELECT username, level FROM players_with_index WHERE country = ?",
    ('Japan',)
)

print(f"ğŸ“Š No Index:    {avg_time_no_index:.6f} seconds ({count_no} players)")
print(f"ğŸ“Š With Index:  {avg_time_with_index:.6f} seconds ({count_with} players)")
print(f"ğŸš€ Speedup:     {avg_time_no_index/avg_time_with_index:.1f}x faster!")

# Test 4: Complex query with multiple conditions
print(" 4ï¸âƒ£ TEST: Complex Query (Level 80+, Japan, Guild 50)")
print("-" * 40)

# Without index
avg_time_no_index, count_no = run_query(
    "Without index",
    '''SELECT username, level, country, guild_id 
       FROM players_no_index 
       WHERE level >= 80 AND country = ? AND guild_id = ?''',
    ('Japan', 50)
)

# With index
avg_time_with_index, count_with = run_query(
    "With index",
    '''SELECT username, level, country, guild_id 
       FROM players_with_index 
       WHERE level >= 80 AND country = ? AND guild_id = ?''',
    ('Japan', 50)
)

print(f"ğŸ“Š No Index:    {avg_time_no_index:.6f} seconds ({count_no} players)")
print(f"ğŸ“Š With Index:  {avg_time_with_index:.6f} seconds ({count_with} players)")
print(f"ğŸš€ Speedup:     {avg_time_no_index/avg_time_with_index:.1f}x faster!")

# Test 5: Sorting results
print(" 5ï¸âƒ£ TEST: Sort Players by Level (Highest First)")
print("-" * 40)

# Without index
avg_time_no_index, count_no = run_query(
    "Without index",
    "SELECT username, level FROM players_no_index ORDER BY level DESC LIMIT 100",
    iterations=3  # Sorting is expensive, fewer iterations
)

# With index
avg_time_with_index, count_with = run_query(
    "With index",
    "SELECT username, level FROM players_with_index ORDER BY level DESC LIMIT 100",
    iterations=3
)

print(f"ğŸ“Š No Index:    {avg_time_no_index:.6f} seconds")
print(f"ğŸ“Š With Index:  {avg_time_with_index:.6f} seconds")
print(f"ğŸš€ Speedup:     {avg_time_no_index/avg_time_with_index:.1f}x faster!")

# ====================================================================
# INDEX STATISTICS
# ====================================================================

print(" " + "="*70)
print("ğŸ“ˆ INDEX STATISTICS & ANALYSIS")
print("="*70)

# Show index information
cursor.execute("SELECT name, sql FROM sqlite_master WHERE type = 'index' AND tbl_name = 'players_with_index'")
indexes_info = cursor.fetchall()

print(f" ğŸ” INDEXES ON 'players_with_index' TABLE:")
print("-" * 40)
for idx in indexes_info:
    idx_name = idx[0]
    idx_sql = idx[1]
    # Get index size/usage info
    cursor.execute(f"PRAGMA index_info({idx_name})")
    idx_info = cursor.fetchall()
    cols = ', '.join([info[2] for info in idx_info])
    print(f"  â€¢ {idx_name}: {cols}")

# Show table sizes
cursor.execute("SELECT COUNT(*) FROM players_no_index")
count_no_index = cursor.fetchone()[0]

cursor.execute("SELECT COUNT(*) FROM players_with_index")
count_with_index = cursor.fetchone()[0]

print(f" ğŸ“Š TABLE STATISTICS:")
print("-" * 40)
print(f"  â€¢ Total players (no index): {count_no_index:,}")
print(f"  â€¢ Total players (with index): {count_with_index:,}")
print(f"  â€¢ Indexes created: {len(indexes_info)}")

# Show database file size
import os
db_size = os.path.getsize('performance_demo.db')
print(f"  â€¢ Database file size: {db_size / (1024*1024):.2f} MB")

# ====================================================================
# WHEN NOT TO USE INDEXES
# ====================================================================

print(" " + "="*70)
print("âš ï¸ WHEN INDEXES DON'T HELP (OR HURT!)")
print("="*70)

print("""
âŒ Don't index columns that:
  1. Have very few unique values (like gender: M/F)
  2. Are rarely used in WHERE clauses
  3. Are updated very frequently (index maintenance cost)
  4. Are used in small tables (< 1000 rows)

âŒ Indexing can SLOW DOWN:
  â€¢ INSERT operations (index must be updated)
  â€¢ UPDATE operations on indexed columns
  â€¢ DELETE operations (index must be updated)
  â€¢ Disk space usage (indexes take space)

âœ… Best practices:
  â€¢ Index foreign keys
  â€¢ Index columns in WHERE, ORDER BY, JOIN
  â€¢ Use composite indexes for multiple columns
  â€¢ Regularly analyze and remove unused indexes
""")

# ====================================================================
# CLEANUP
# ====================================================================

conn.close()
print(" âœ… Performance demo complete!")
print("ğŸ’¡ Lesson: Proper indexing can make databases 100-1000x faster!")
    </pre>
</div>

<h2>ğŸ”„ Part 2: Transactions & Data Integrity</h2>

<div style="background-color: #E8F5E9; padding: 20px; border-radius: 10px; margin: 20px 0;">
    <h3>ğŸ¦ Banking System: Transactions in Action</h3>
    
    <div style="background-color: white; padding: 15px; border-radius: 8px; margin: 15px 0;">
        <h4>ğŸ’° The ACID Properties of Transactions</h4>
        
        <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin-top: 15px; text-align: center;">
            <div style="background-color: #FFE0B2; padding: 10px; border-radius: 5px;">
                <h5>A</h5>
                <p><b>Atomicity</b></p>
                <p>All or nothing</p>
            </div>
            <div style="background-color: #BBDEFB; padding: 10px; border-radius: 5px;">
                <h5>C</h5>
                <p><b>Consistency</b></p>
                <p>Valid state always</p>
            </div>
            <div style="background-color: #C8E6C9; padding: 10px; border-radius: 5px;">
                <h5>I</h5>
                <p><b>Isolation</b></p>
                <p>No interference</p>
            </div>
            <div style="background-color: #F8BBD0; padding: 10px; border-radius: 5px;">
                <h5>D</h5>
                <p><b>Durability</b></p>
                <p>Changes are permanent</p>
            </div>
        </div>
    </div>
    
    <pre style="background-color: #f5f5f5; padding: 15px; border-radius: 8px; overflow-x: auto;">
# ====================================================================
# BANKING SYSTEM: TRANSACTIONS DEMO
# ====================================================================

import sqlite3
import threading
import time

print("ğŸ¦ BANKING TRANSACTIONS DEMO ğŸ¦")
print("=" * 70)

# Connect to database
conn = sqlite3.connect('banking.db', isolation_level=None)  # Auto-commit off
cursor = conn.cursor()

print("âœ… Connected to banking.db")

# ====================================================================
# SETUP BANKING TABLES
# ====================================================================

print(" ğŸ—ï¸ SETTING UP BANKING SYSTEM...")
print("-" * 40)

# Create accounts table
cursor.execute('''
CREATE TABLE IF NOT EXISTS accounts (
    account_id INTEGER PRIMARY KEY AUTOINCREMENT,
    account_number VARCHAR(20) UNIQUE NOT NULL,
    owner_name VARCHAR(100) NOT NULL,
    balance DECIMAL(15,2) DEFAULT 0.00,
    account_type VARCHAR(20) DEFAULT 'checking',
    created_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    
    CONSTRAINT positive_balance CHECK (balance >= 0),
    CONSTRAINT valid_account_type CHECK (account_type IN ('checking', 'savings', 'business'))
)
''')

# Create transactions table
cursor.execute('''
CREATE TABLE IF NOT EXISTS transactions (
    transaction_id INTEGER PRIMARY KEY AUTOINCREMENT,
    from_account_id INTEGER,
    to_account_id INTEGER,
    amount DECIMAL(15,2) NOT NULL,
    transaction_type VARCHAR(20) NOT NULL,
    description VARCHAR(200),
    transaction_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    status VARCHAR(20) DEFAULT 'pending',
    
    FOREIGN KEY (from_account_id) REFERENCES accounts(account_id),
    FOREIGN KEY (to_account_id) REFERENCES accounts(account_id),
    
    CONSTRAINT positive_amount CHECK (amount > 0),
    CONSTRAINT valid_type CHECK (transaction_type IN ('deposit', 'withdrawal', 'transfer', 'interest')),
    CONSTRAINT valid_status CHECK (status IN ('pending', 'completed', 'failed', 'cancelled'))
)
''')

# Create indexes for performance
cursor.execute('CREATE INDEX IF NOT EXISTS idx_account_balance ON accounts(balance)')
cursor.execute('CREATE INDEX IF NOT EXISTS idx_transaction_date ON transactions(transaction_date)')
cursor.execute('CREATE INDEX IF NOT EXISTS idx_transaction_accounts ON transactions(from_account_id, to_account_id)')

print("âœ… Created banking tables with indexes")

# ====================================================================
# CREATE SAMPLE ACCOUNTS
# ====================================================================

# Clear any existing data
cursor.execute("DELETE FROM accounts")
cursor.execute("DELETE FROM transactions")

# Create sample accounts
accounts = [
    ('ACC-001', 'Alex Johnson', 5000.00, 'checking'),
    ('ACC-002', 'Sarah Wilson', 2500.00, 'savings'),
    ('ACC-003', 'David Chen', 10000.00, 'business'),
    ('ACC-004', 'Emma Martinez', 750.00, 'checking'),
    ('ACC-005', 'Jamal Brown', 3000.00, 'savings')
]

cursor.executemany('''
INSERT INTO accounts (account_number, owner_name, balance, account_type)
VALUES (?, ?, ?, ?)
''', accounts)

conn.commit()
print(f"âœ… Created {len(accounts)} sample accounts")

# ====================================================================
# DEMO 1: SIMPLE TRANSACTION (Deposit)
# ====================================================================

print(" " + "="*70)
print("1ï¸âƒ£ DEMO: SIMPLE DEPOSIT TRANSACTION")
print("="*70)

def simple_deposit(account_number, amount, description="Deposit"):
    """Deposit money into an account - UNSAFE version"""
    try:
        print(f" ğŸ’µ Attempting to deposit \${amount:.2f} to {account_number}")
        
        # Get current balance
        cursor.execute("SELECT account_id, balance FROM accounts WHERE account_number = ?", (account_number,))
        account = cursor.fetchone()
        
        if not account:
            print("âŒ Account not found")
            return False
        
        account_id, current_balance = account
        new_balance = current_balance + amount
        
        # Update balance
        cursor.execute("UPDATE accounts SET balance = ? WHERE account_id = ?", (new_balance, account_id))
        
        # Record transaction
        cursor.execute('''
        INSERT INTO transactions (to_account_id, amount, transaction_type, description, status)
        VALUES (?, ?, 'deposit', ?, 'completed')
        ''', (account_id, amount, description))
        
        print(f"âœ… Deposit successful!")
        print(f"   Old balance: \${current_balance:.2f}")
        print(f"   New balance: \${new_balance:.2f}")
        
        return True
        
    except Exception as e:
        print(f"âŒ Error during deposit: {e}")
        return False

# Test the unsafe deposit
simple_deposit('ACC-001', 1000.00, "Monthly salary")
print("âš ï¸ Problem: What if system crashes after UPDATE but before INSERT?")

# ====================================================================
# DEMO 2: PROPER TRANSACTION (Transfer)
# ====================================================================

print("" + "="*70)
print("2ï¸âƒ£ DEMO: BANK TRANSFER WITH PROPER TRANSACTIONS")
print("="*70)

def bank_transfer(from_account_num, to_account_num, amount, description="Transfer"):
    """Transfer money between accounts with proper transaction handling"""
    print(f"ğŸ”„ Attempting transfer: \${amount:.2f} from {from_account_num} to {to_account_num}")
    
    try:
        # Start transaction explicitly
        cursor.execute("BEGIN TRANSACTION")
        
        # Get from account details WITH LOCK
        cursor.execute('''
        SELECT account_id, balance, owner_name 
        FROM accounts 
        WHERE account_number = ? 
        FOR UPDATE  -- Lock the row for update
        ''', (from_account_num,))
        
        from_account = cursor.fetchone()
        
        if not from_account:
            print("âŒ From account not found")
            cursor.execute("ROLLBACK")
            return False
        
        from_id, from_balance, from_owner = from_account
        
        # Check sufficient balance
        if from_balance < amount:
            print(f"âŒ Insufficient funds: \${from_balance:.2f} available, \${amount:.2f} required")
            cursor.execute("ROLLBACK")
            return False
        
        # Get to account details
        cursor.execute("SELECT account_id, owner_name FROM accounts WHERE account_number = ?", (to_account_num,))
        to_account = cursor.fetchone()
        
        if not to_account:
            print("âŒ To account not found")
            cursor.execute("ROLLBACK")
            return False
        
        to_id, to_owner = to_account
        
        # Update balances
        new_from_balance = from_balance - amount
        cursor.execute("UPDATE accounts SET balance = ? WHERE account_id = ?", (new_from_balance, from_id))
        
        # Get to balance and update
        cursor.execute("SELECT balance FROM accounts WHERE account_id = ?", (to_id,))
        to_balance = cursor.fetchone()[0]
        new_to_balance = to_balance + amount
        cursor.execute("UPDATE accounts SET balance = ? WHERE account_id = ?", (new_to_balance, to_id))
        
        # Record transaction
        cursor.execute('''
        INSERT INTO transactions 
        (from_account_id, to_account_id, amount, transaction_type, description, status)
        VALUES (?, ?, ?, 'transfer', ?, 'completed')
        ''', (from_id, to_id, amount, description))
        
        # Commit the transaction
        cursor.execute("COMMIT")
        
        print(f"âœ… Transfer successful!")
        print(f"   From: {from_owner} (\${from_balance:.2f} â†’ \${new_from_balance:.2f})")
        print(f"   To: {to_owner} (\${to_balance:.2f} â†’ \${new_to_balance:.2f})")
        
        return True
        
    except Exception as e:
        print(f"âŒ Transfer failed: {e}")
        # Rollback on any error
        cursor.execute("ROLLBACK")
        return False

# Test transfer
bank_transfer('ACC-001', 'ACC-002', 500.00, "Rent payment")

# ====================================================================
# DEMO 3: CONCURRENT TRANSACTIONS (Race Conditions)
# ====================================================================

print("\" + "="*70)
print("3ï¸âƒ£ DEMO: CONCURRENT TRANSACTIONS & RACE CONDITIONS")
print("="*70)

def concurrent_withdraw(account_num, amount, thread_name):
    """Simulate concurrent withdrawal attempts"""
    time.sleep(0.1)  # Simulate network delay
    
    conn_local = sqlite3.connect('banking.db')
    cursor_local = conn_local.cursor()
    
    try:
        cursor_local.execute("BEGIN TRANSACTION")
        
        # Get balance with lock
        cursor_local.execute('''
        SELECT balance FROM accounts 
        WHERE account_number = ? 
        FOR UPDATE
        ''', (account_num,))
        
        balance = cursor_local.fetchone()[0]
        
        if balance >= amount:
            # Simulate processing time
            time.sleep(0.2)
            
            new_balance = balance - amount
            cursor_local.execute("UPDATE accounts SET balance = ? WHERE account_number = ?", 
                               (new_balance, account_num))
            
            cursor_local.execute('''
            INSERT INTO transactions (from_account_id, amount, transaction_type, description, status)
            SELECT account_id, ?, 'withdrawal', ?, 'completed'
            FROM accounts WHERE account_number = ?
            ''', (amount, f"Withdrawal by {thread_name}", account_num))
            
            cursor_local.execute("COMMIT")
            print(f"  âœ… {thread_name}: Withdrew \${amount:.2f}, new balance: \${new_balance:.2f}")
            return True
        else:
            cursor_local.execute("ROLLBACK")
            print(f"  âŒ {thread_name}: Insufficient funds (\${balance:.2f})")
            return False
            
    except Exception as e:
        cursor_local.execute("ROLLBACK")
        print(f"  âŒ {thread_name}: Error - {e}")
        return False
    finally:
        conn_local.close()

# Reset account for demo
cursor.execute("UPDATE accounts SET balance = 1000 WHERE account_number = 'ACC-004'")
conn.commit()

print("\ğŸ Simulating concurrent withdrawals from ACC-004 (Balance: $1000)")
print("   Two threads trying to withdraw $800 each at the same time")
print("-" * 70)

# Create threads for concurrent withdrawals
thread1 = threading.Thread(target=concurrent_withdraw, args=('ACC-004', 800, "Thread 1"))
thread2 = threading.Thread(target=concurrent_withdraw, args=('ACC-004', 800, "Thread 2"))

# Start threads
thread1.start()
thread2.start()

# Wait for completion
thread1.join()
thread2.join()

# Check final balance
cursor.execute("SELECT balance FROM accounts WHERE account_number = 'ACC-004'")
final_balance = cursor.fetchone()[0]
print(f"\ğŸ“Š Final balance: \${final_balance:.2f}")
print("ğŸ’¡ Without proper locking, both might succeed (creating negative balance)!")

# ====================================================================
# DEMO 4: SAVEPOINTS (Nested Transactions)
# ====================================================================

print("\" + "="*70)
print("4ï¸âƒ£ DEMO: SAVEPOINTS & NESTED TRANSACTIONS")
print("="*70)

def complex_banking_operation():
    """Demonstrate savepoints for complex operations"""
    print("\ğŸ¦ Complex banking operation: Process batch of transactions")
    print("-" * 70)
    
    try:
        cursor.execute("BEGIN TRANSACTION")
        print("1. Started main transaction")
        
        # Process first transfer
        print("2. Processing transfer 1...")
        bank_transfer('ACC-002', 'ACC-003', 200.00, "Invoice payment")
        
        # Create savepoint
        cursor.execute("SAVEPOINT after_transfer_1")
        print("3. Created savepoint 'after_transfer_1'")
        
        # Process second transfer
        print("4. Processing transfer 2...")
        bank_transfer('ACC-003', 'ACC-005', 300.00, "Refund")
        
        # Create another savepoint
        cursor.execute("SAVEPOINT after_transfer_2")
        print("5. Created savepoint 'after_transfer_2'")
        
        # Simulate an error in third operation
        print("6. Processing transfer 3 (will fail)...")
        
        # This should fail - transferring more than available
        success = bank_transfer('ACC-004', 'ACC-001', 5000.00, "Large purchase")
        
        if not success:
            print("7. Transfer 3 failed! Rolling back to savepoint...")
            cursor.execute("ROLLBACK TO SAVEPOINT after_transfer_2")
            print("8. Rolled back to 'after_transfer_2'")
        
        # Process final operation
        print("9. Processing final deposit...")
        simple_deposit('ACC-001', 100.00, "Interest")
        
        # Commit the transaction
        cursor.execute("COMMIT")
        print("10. Committed all successful operations")
        
    except Exception as e:
        print(f"âŒ Operation failed: {e}")
        cursor.execute("ROLLBACK")

# Run the complex operation
complex_banking_operation()

# ====================================================================
# DEMO 5: TRANSACTION ISOLATION LEVELS
# ====================================================================

print("\" + "="*70)
print("5ï¸âƒ£ DEMO: TRANSACTION ISOLATION LEVELS")
print("="*70)

print("""
ğŸ§  Isolation Levels Control How Transactions Interact:

1. READ UNCOMMITTED (Dirty Reads)
   â€¢ Can see uncommitted changes from other transactions
   â€¢ Fastest but least safe
   âŒ Problem: Might see data that gets rolled back

2. READ COMMITTED (Default in many databases)
   â€¢ Only see committed changes
   â€¢ Prevents dirty reads
   âŒ Problem: Non-repeatable reads (data changes between reads)

3. REPEATABLE READ
   â€¢ Same read throughout transaction
   â€¢ Prevents non-repeatable reads
   âŒ Problem: Phantom reads (new rows appear)

4. SERIALIZABLE (Safest)
   â€¢ Transactions execute one after another
   â€¢ Prevents all concurrency issues
   âŒ Problem: Slowest performance
""")

# Demonstrate isolation issue
print("\ğŸ” DEMONSTRATING READ PHENOMENA:")
print("-" * 40)

# Reset for demo
cursor.execute("UPDATE accounts SET balance = 1000 WHERE account_number = 'ACC-001'")
conn.commit()

def read_phenomena_demo():
    """Demonstrate different read phenomena"""
    
    # Create two connections with different isolation
    conn1 = sqlite3.connect('banking.db')
    conn2 = sqlite3.connect('banking.db')
    
    cursor1 = conn1.cursor()
    cursor2 = conn2.cursor()
    
    print("Starting balance: $1000")
    
    # Connection 1 starts transaction and reads
    cursor1.execute("BEGIN TRANSACTION")
    cursor1.execute("SELECT balance FROM accounts WHERE account_number = 'ACC-001'")
    balance1 = cursor1.fetchone()[0]
    print(f"Connection 1 reads: \${balance1:.2f}")
    
    # Connection 2 updates the balance
    cursor2.execute("BEGIN TRANSACTION")
    cursor2.execute("UPDATE accounts SET balance = 900 WHERE account_number = 'ACC-001'")
    cursor2.execute("COMMIT")
    print("Connection 2 updates balance to: $900")
    
    # Connection 1 reads again (within same transaction)
    cursor1.execute("SELECT balance FROM accounts WHERE account_number = 'ACC-001'")
    balance2 = cursor1.fetchone()[0]
    print(f"Connection 1 reads again: \${balance2:.2f}")
    
    if balance1 != balance2:
        print("âš ï¸ NON-REPEATABLE READ DETECTED!")
        print("   Same transaction saw different values for same data!")
    
    cursor1.execute("ROLLBACK")
    conn1.close()
    conn2.close()

read_phenomena_demo()

# ====================================================================
# TRANSACTION BEST PRACTICES
# ====================================================================

print("\" + "="*70)
print("ğŸ’¡ TRANSACTION BEST PRACTICES")
print("="*70)

print("""
âœ… DO:
   â€¢ Keep transactions SHORT (milliseconds, not seconds)
   â€¢ Handle exceptions and always ROLLBACK on errors
   â€¢ Use appropriate isolation level for your needs
   â€¢ Test with concurrent access
   â€¢ Use SAVEPOINTS for complex operations
   â€¢ Commit frequently for long-running processes

âœ… DO NOT:
   â€¢ Don't hold transactions open while waiting for user input
   â€¢ Don't perform network operations inside transactions
   â€¢ Don't update too many rows in one transaction
   â€¢ Don't nest transactions unnecessarily
   â€¢ Don't ignore deadlock detection

ğŸ”’ LOCKING TIPS:
   â€¢ Use row-level locking (FOR UPDATE) when needed
   â€¢ Acquire locks in consistent order to avoid deadlocks
   â€¢ Release locks as soon as possible
   â€¢ Consider optimistic locking for high-concurrency systems
""")

# ====================================================================
# FINAL ACCOUNT STATUS
# ====================================================================

print("\" + "="*70)
print("ğŸ“Š FINAL ACCOUNT STATUS")
print("="*70)

cursor.execute('''
SELECT 
    account_number,
    owner_name,
    account_type,
    balance,
    COUNT(t.transaction_id) as transaction_count
FROM accounts a
LEFT JOIN transactions t ON a.account_id = t.from_account_id OR a.account_id = t.to_account_id
GROUP BY a.account_id
ORDER BY balance DESC
''')

print(f"{'Account':10} | {'Owner':15} | {'Type':10} | {'Balance':12} | {'Transactions':12}")
print("-" * 70)

for row in cursor.fetchall():
    print(f"{row[0]:10} | {row[1]:15} | {row[2]:10} | \${row[3]:10.2f} | {row[4]:12}")

# Total bank money
cursor.execute("SELECT SUM(balance) FROM accounts")
total_money = cursor.fetchone()[0]
print(f"\ğŸ’° Total bank money: \${total_money:.2f}")

conn.close()
print("\âœ… Banking transactions demo complete!")
    </pre>
</div>

<h2>ğŸ¯ Part 3: Views, Stored Procedures & Advanced Features</h2>

<div style="background-color: #FFF3E0; padding: 20px; border-radius: 10px; margin: 20px 0;">
    <h3>ğŸ”§ Week 18 Assignment: Advanced Database System</h3>
    
    <div style="background-color: white; padding: 15px; border-radius: 8px; margin: 15px 0;">
        <h4>ğŸ“‹ Build a Complete E-commerce Database with Advanced Features</h4>
        
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 10px;">
            <div>
                <h5>âœ¨ Advanced Features Required</h5>
                <ul>
                    <li>Database Views for reports</li>
                    <li>Stored Procedures for common operations</li>
                    <li>Triggers for automation</li>
                    <li>Full-text search capabilities</li>
                    <li>Materialized views for caching</li>
                </ul>
            </div>
            <div>
                <h5>âš¡ Performance Optimizations</h5>
                <ul>
                    <li>Strategic indexing</li>
                    <li>Query optimization</li>
                    <li>Connection pooling</li>
                    <li>Caching strategies</li>
                    <li>Partitioning for large tables</li>
                </ul>
            </div>
        </div>
    </div>
    
    <pre style="background-color: #f5f5f5; padding: 15px; border-radius: 8px; overflow-x: auto;">
# ====================================================================
# ADVANCED E-COMMERCE DATABASE SYSTEM
# ====================================================================

import sqlite3
import json
from datetime import datetime, timedelta

class AdvancedEcommerceDB:
    def __init__(self):
        self.conn = sqlite3.connect('advanced_ecommerce.db')
        self.conn.row_factory = sqlite3.Row  # For dictionary-like access
        self.cursor = self.conn.cursor()
        self.setup_database()
    
    def setup_database(self):
        """Create advanced e-commerce database with all features"""
        print("ğŸ—ï¸ SETTING UP ADVANCED E-COMMERCE DATABASE...")
        print("-" * 40)
        
        # ====================================================================
        # CORE TABLES
        # ====================================================================
        
        # Products table with JSON support for attributes
        self.cursor.execute('''
        CREATE TABLE IF NOT EXISTS products (
            product_id INTEGER PRIMARY KEY AUTOINCREMENT,
            sku VARCHAR(50) UNIQUE NOT NULL,
            name VARCHAR(200) NOT NULL,
            description TEXT,
            category_id INTEGER,
            price DECIMAL(10,2) NOT NULL,
            cost DECIMAL(10,2),
            stock_quantity INTEGER DEFAULT 0,
            attributes TEXT,  -- JSON string for flexible attributes
            is_active BOOLEAN DEFAULT TRUE,
            created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
            updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
            
            CHECK (price >= 0),
            CHECK (cost >= 0),
            CHECK (stock_quantity >= 0)
        )
        ''')
        
        # Categories table with hierarchy
        self.cursor.execute('''
        CREATE TABLE IF NOT EXISTS categories (
            category_id INTEGER PRIMARY KEY AUTOINCREMENT,
            name VARCHAR(100) NOT NULL,
            parent_category_id INTEGER,
            description TEXT,
            sort_order INTEGER DEFAULT 0,
            
            FOREIGN KEY (parent_category_id) REFERENCES categories(category_id)
        )
        ''')
        
        # Customers table
        self.cursor.execute('''
        CREATE TABLE IF NOT EXISTS customers (
            customer_id INTEGER PRIMARY KEY AUTOINCREMENT,
            email VARCHAR(255) UNIQUE NOT NULL,
            first_name VARCHAR(100),
            last_name VARCHAR(100),
            phone VARCHAR(20),
            address TEXT,
            city VARCHAR(100),
            country VARCHAR(100),
            registration_date DATE DEFAULT CURRENT_DATE,
            loyalty_points INTEGER DEFAULT 0,
            segment VARCHAR(50) DEFAULT 'regular',
            
            CHECK (loyalty_points >= 0)
        )
        ''')
        
        # Orders table
        self.cursor.execute('''
        CREATE TABLE IF NOT EXISTS orders (
            order_id INTEGER PRIMARY KEY AUTOINCREMENT,
            customer_id INTEGER NOT NULL,
            order_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
            status VARCHAR(50) DEFAULT 'pending',
            total_amount DECIMAL(10,2) DEFAULT 0.00,
            shipping_address TEXT,
            billing_address TEXT,
            payment_method VARCHAR(50),
            payment_status VARCHAR(50) DEFAULT 'pending',
            
            FOREIGN KEY (customer_id) REFERENCES customers(customer_id),
            
            CHECK (total_amount >= 0),
            CHECK (status IN ('pending', 'processing', 'shipped', 'delivered', 'cancelled'))
        )
        ''')
        
        # Order items table
        self.cursor.execute('''
        CREATE TABLE IF NOT EXISTS order_items (
            order_item_id INTEGER PRIMARY KEY AUTOINCREMENT,
            order_id INTEGER NOT NULL,
            product_id INTEGER NOT NULL,
            quantity INTEGER NOT NULL,
            unit_price DECIMAL(10,2) NOT NULL,
            subtotal DECIMAL(10,2) GENERATED ALWAYS AS (quantity * unit_price) VIRTUAL,
            
            FOREIGN KEY (order_id) REFERENCES orders(order_id) ON DELETE CASCADE,
            FOREIGN KEY (product_id) REFERENCES products(product_id),
            
            CHECK (quantity > 0),
            CHECK (unit_price >= 0)
        )
        ''')
        
        # Reviews table
        self.cursor.execute('''
        CREATE TABLE IF NOT EXISTS reviews (
            review_id INTEGER PRIMARY KEY AUTOINCREMENT,
            product_id INTEGER NOT NULL,
            customer_id INTEGER NOT NULL,
            rating INTEGER NOT NULL,
            title VARCHAR(200),
            comment TEXT,
            review_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
            helpful_votes INTEGER DEFAULT 0,
            
            FOREIGN KEY (product_id) REFERENCES products(product_id),
            FOREIGN KEY (customer_id) REFERENCES customers(customer_id),
            
            CHECK (rating BETWEEN 1 AND 5),
            CHECK (helpful_votes >= 0)
        )
        ''')
        
        print("âœ… Created core tables")
        
        # ====================================================================
        # ADVANCED INDEXES
        # ====================================================================
        
        indexes = [
            # Product indexes
            ('idx_products_sku', 'CREATE UNIQUE INDEX idx_products_sku ON products(sku)'),
            ('idx_products_category', 'CREATE INDEX idx_products_category ON products(category_id)'),
            ('idx_products_price', 'CREATE INDEX idx_products_price ON products(price)'),
            ('idx_products_active', 'CREATE INDEX idx_products_active ON products(is_active) WHERE is_active = 1'),
            
            # Order indexes
            ('idx_orders_customer', 'CREATE INDEX idx_orders_customer ON orders(customer_id)'),
            ('idx_orders_status', 'CREATE INDEX idx_orders_status ON orders(status)'),
            ('idx_orders_date', 'CREATE INDEX idx_orders_date ON orders(order_date)'),
            
            # Customer indexes
            ('idx_customers_email', 'CREATE INDEX idx_customers_email ON customers(email)'),
            ('idx_customers_segment', 'CREATE INDEX idx_customers_segment ON customers(segment)'),
            
            # Review indexes
            ('idx_reviews_product', 'CREATE INDEX idx_reviews_product ON reviews(product_id)'),
            ('idx_reviews_rating', 'CREATE INDEX idx_reviews_rating ON reviews(rating)'),
            
            # Composite indexes
            ('idx_products_price_stock', 'CREATE INDEX idx_products_price_stock ON products(price, stock_quantity)'),
            ('idx_orders_customer_date', 'CREATE INDEX idx_orders_customer_date ON orders(customer_id, order_date DESC)'),
        ]
        
        for idx_name, idx_sql in indexes:
            try:
                self.cursor.execute(idx_sql)
                print(f"âœ… Created index: {idx_name}")
            except:
                pass  # Index might already exist
        
        # ====================================================================
        # DATABASE VIEWS
        # ====================================================================
        
        print("\ğŸ”­ CREATING DATABASE VIEWS...")
        print("-" * 40)
        
        # View 1: Product catalog view
        self.cursor.execute('''
        CREATE VIEW IF NOT EXISTS v_product_catalog AS
        SELECT 
            p.product_id,
            p.sku,
            p.name,
            p.description,
            c.name as category_name,
            p.price,
            p.stock_quantity,
            p.is_active,
            ROUND(COALESCE(AVG(r.rating), 0), 1) as avg_rating,
            COUNT(r.review_id) as review_count
        FROM products p
        LEFT JOIN categories c ON p.category_id = c.category_id
        LEFT JOIN reviews r ON p.product_id = r.product_id
        WHERE p.is_active = 1
        GROUP BY p.product_id
        ''')
        print("âœ… Created view: v_product_catalog")
        
        # View 2: Customer order summary
        self.cursor.execute('''
        CREATE VIEW IF NOT EXISTS v_customer_summary AS
        SELECT 
            c.customer_id,
            c.email,
            c.first_name || ' ' || c.last_name as full_name,
            c.segment,
            c.registration_date,
            c.loyalty_points,
            COUNT(o.order_id) as total_orders,
            COALESCE(SUM(o.total_amount), 0) as total_spent,
            MAX(o.order_date) as last_order_date
        FROM customers c
        LEFT JOIN orders o ON c.customer_id = o.customer_id
        GROUP BY c.customer_id
        ''')
        print("âœ… Created view: v_customer_summary")
        
        # View 3: Daily sales report
        self.cursor.execute('''
        CREATE VIEW IF NOT EXISTS v_daily_sales AS
        SELECT 
            DATE(o.order_date) as sale_date,
            COUNT(DISTINCT o.order_id) as order_count,
            COUNT(oi.order_item_id) as item_count,
            SUM(oi.quantity) as total_quantity,
            SUM(o.total_amount) as total_revenue,
            AVG(o.total_amount) as avg_order_value
        FROM orders o
        JOIN order_items oi ON o.order_id = oi.order_id
        WHERE o.status != 'cancelled'
        GROUP BY DATE(o.order_date)
        ''')
        print("âœ… Created view: v_daily_sales")
        
        # View 4: Product performance
        self.cursor.execute('''
        CREATE VIEW IF NOT EXISTS v_product_performance AS
        SELECT 
            p.product_id,
            p.name,
            p.category_id,
            c.name as category_name,
            SUM(oi.quantity) as units_sold,
            SUM(oi.subtotal) as revenue,
            COUNT(DISTINCT o.customer_id) as unique_customers,
            ROUND(AVG(r.rating), 2) as avg_rating,
            p.stock_quantity
        FROM products p
        LEFT JOIN categories c ON p.category_id = c.category_id
        LEFT JOIN order_items oi ON p.product_id = oi.product_id
        LEFT JOIN orders o ON oi.order_id = o.order_id
        LEFT JOIN reviews r ON p.product_id = r.product_id
        WHERE o.status != 'cancelled' OR o.status IS NULL
        GROUP BY p.product_id
        ''')
        print("âœ… Created view: v_product_performance")
        
        # ====================================================================
        # TRIGGERS
        # ====================================================================
        
        print("\âš¡ CREATING TRIGGERS...")
        print("-" * 40)
        
        # Trigger 1: Update product stock when order is placed
        self.cursor.execute('''
        CREATE TRIGGER IF NOT EXISTS trg_update_stock_on_order
        AFTER INSERT ON order_items
        FOR EACH ROW
        BEGIN
            UPDATE products 
            SET stock_quantity = stock_quantity - NEW.quantity,
                updated_at = CURRENT_TIMESTAMP
            WHERE product_id = NEW.product_id;
        END;
        ''')
        print("âœ… Created trigger: trg_update_stock_on_order")
        
        # Trigger 2: Update order total when items are added
        self.cursor.execute('''
        CREATE TRIGGER IF NOT EXISTS trg_update_order_total
        AFTER INSERT ON order_items
        FOR EACH ROW
        BEGIN
            UPDATE orders 
            SET total_amount = (
                SELECT SUM(subtotal) 
                FROM order_items 
                WHERE order_id = NEW.order_id
            )
            WHERE order_id = NEW.order_id;
        END;
        ''')
        print("âœ… Created trigger: trg_update_order_total")
        
        # Trigger 3: Update product rating when new review is added
        self.cursor.execute('''
        CREATE TRIGGER IF NOT EXISTS trg_update_product_stats
        AFTER INSERT ON reviews
        FOR EACH ROW
        BEGIN
            -- This would typically update a product_stats table
            -- For demo, we'll just note it happened
            INSERT INTO system_log (message) 
            VALUES ('New review added for product ' || NEW.product_id);
        END;
        ''')
        print("âœ… Created trigger: trg_update_product_stats")
        
        # Trigger 4: Prevent stock from going negative
        self.cursor.execute('''
        CREATE TRIGGER IF NOT EXISTS trg_prevent_negative_stock
        BEFORE UPDATE ON products
        FOR EACH ROW
        WHEN NEW.stock_quantity < 0
        BEGIN
            SELECT RAISE(ABORT, 'Stock cannot be negative');
        END;
        ''')
        print("âœ… Created trigger: trg_prevent_negative_stock")
        
        # ====================================================================
        # STORED PROCEDURES (Using SQLite Functions)
        # ====================================================================
        
        print("\ğŸ”„ CREATING STORED PROCEDURES...")
        print("-" * 40)
        
        # Create a system log table for procedures
        self.cursor.execute('''
        CREATE TABLE IF NOT EXISTS system_log (
            log_id INTEGER PRIMARY KEY AUTOINCREMENT,
            message TEXT,
            log_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP
        )
        ''')
        
        # ====================================================================
        # SAMPLE DATA
        # ====================================================================
        
        print("\ğŸ“Š INSERTING SAMPLE DATA...")
        print("-" * 40)
        
        self.insert_sample_data()
        
        self.conn.commit()
        print("\âœ… Advanced e-commerce database setup complete!")
    
    def insert_sample_data(self):
        """Insert sample data for demonstration"""
        
        # Insert categories
        categories = [
            ('Electronics', None, 'Gadgets and electronics'),
            ('Books', None, 'Physical and digital books'),
            ('Clothing', None, 'Apparel and accessories'),
            ('Smartphones', 1, 'Mobile phones and accessories'),
            ('Laptops', 1, 'Computers and laptops'),
            ('Fiction', 2, 'Fictional books'),
            ('Non-Fiction', 2, 'Educational books'),
            ('Men\'s Clothing', 3, 'Clothing for men'),
            ('Women\'s Clothing', 3, 'Clothing for women')
        ]
        
        self.cursor.executemany('''
        INSERT INTO categories (name, parent_category_id, description)
        VALUES (?, ?, ?)
        ''', categories)
        print(f"âœ… Added {len(categories)} categories")
        
        # Insert products with JSON attributes
        products = [
            ('IPHONE-13', 'iPhone 13 Pro', 'Latest iPhone with A15 Bionic chip', 4, 999.99, 700.00, 100,
             json.dumps({'color': 'Graphite', 'storage': '256GB', 'battery': '3095mAh', 'camera': 'Triple 12MP'})),
            ('MBP-14', 'MacBook Pro 14"', 'Apple laptop with M1 Pro chip', 5, 1999.99, 1500.00, 50,
             json.dumps({'processor': 'M1 Pro', 'ram': '16GB', 'storage': '512GB SSD', 'display': 'Liquid Retina XDR'})),
            ('BOOK-PYTHON', 'Python Crash Course', 'Learn Python programming', 7, 39.99, 15.00, 200,
             json.dumps({'author': 'Eric Matthes', 'pages': '544', 'publisher': 'No Starch Press'})),
            ('TSHIRT-M', 'Premium Cotton T-Shirt', '100% cotton t-shirt', 8, 24.99, 8.00, 300,
             json.dumps({'material': 'Cotton', 'sizes': 'S,M,L,XL', 'colors': 'Black, White, Gray'})),
            ('ANDROID-S22', 'Samsung Galaxy S22', 'Android flagship phone', 4, 799.99, 550.00, 75,
             json.dumps({'color': 'Phantom Black', 'storage': '128GB', 'battery': '3700mAh', 'camera': 'Triple 50MP'})),
        ]
        
        self.cursor.executemany('''
        INSERT INTO products (sku, name, description, category_id, price, cost, stock_quantity, attributes)
        VALUES (?, ?, ?, ?, ?, ?, ?, ?)
        ''', products)
        print(f"âœ… Added {len(products)} products")
        
        # Insert customers
        customers = [
            ('alex@email.com', 'Alex', 'Johnson', '555-0101', '123 Main St', 'New York', 'USA', '2023-01-15', 1500),
            ('sarah@email.com', 'Sarah', 'Wilson', '555-0102', '456 Oak Ave', 'Los Angeles', 'USA', '2023-02-20', 800),
            ('david@email.com', 'David', 'Chen', '555-0103', '789 Pine Rd', 'Toronto', 'Canada', '2023-03-10', 2200),
            ('emma@email.com', 'Emma', 'Martinez', '555-0104', '321 Elm St', 'Chicago', 'USA', '2023-04-05', 300),
            ('jamal@email.com', 'Jamal', 'Brown', '555-0105', '654 Maple Dr', 'Houston', 'USA', '2023-05-12', 950),
        ]
        
        self.cursor.executemany('''
        INSERT INTO customers (email, first_name, last_name, phone, address, city, country, registration_date, loyalty_points)
        VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
        ''', customers)
        print(f"âœ… Added {len(customers)} customers")
        
        # Insert orders
        orders = [
            (1, '2024-01-15 10:30:00', 'delivered', 1024.98, '123 Main St, NY', '123 Main St, NY', 'credit_card', 'paid'),
            (2, '2024-01-20 14:45:00', 'shipped', 39.99, '456 Oak Ave, LA', '456 Oak Ave, LA', 'paypal', 'paid'),
            (3, '2024-02-01 09:15:00', 'processing', 2024.98, '789 Pine Rd, Toronto', '789 Pine Rd, Toronto', 'credit_card', 'paid'),
            (1, '2024-02-10 16:20:00', 'pending', 74.97, '123 Main St, NY', '123 Main St, NY', 'credit_card', 'pending'),
            (4, '2024-02-15 11:30:00', 'delivered', 799.99, '321 Elm St, Chicago', '321 Elm St, Chicago', 'apple_pay', 'paid'),
        ]
        
        self.cursor.executemany('''
        INSERT INTO orders (customer_id, order_date, status, total_amount, shipping_address, billing_address, payment_method, payment_status)
        VALUES (?, ?, ?, ?, ?, ?, ?, ?)
        ''', orders)
        print(f"âœ… Added {len(orders)} orders")
        
        # Insert order items
        order_items = [
            (1, 1, 1, 999.99),  # Order 1: iPhone
            (1, 3, 1, 24.99),   # Order 1: T-shirt
            (2, 3, 1, 39.99),   # Order 2: Book
            (3, 1, 1, 999.99),  # Order 3: iPhone
            (3, 2, 1, 1999.99), # Order 3: MacBook
            (3, 3, 1, 24.99),   # Order 3: T-shirt
            (4, 4, 3, 24.99),   # Order 4: 3 T-shirts
            (5, 5, 1, 799.99),  # Order 5: Android phone
        ]
        
        self.cursor.executemany('''
        INSERT INTO order_items (order_id, product_id, quantity, unit_price)
        VALUES (?, ?, ?, ?)
        ''', order_items)
        print(f"âœ… Added {len(order_items)} order items")
        
        # Insert reviews
        reviews = [
            (1, 1, 5, 'Amazing phone!', 'Best iPhone ever, camera is incredible', '2024-01-20', 12),
            (1, 2, 4, 'Great laptop', 'Very fast, but expensive', '2024-01-25', 8),
            (2, 3, 5, 'Perfect for beginners', 'Learned Python in 2 weeks!', '2024-01-22', 15),
            (3, 4, 3, 'Good quality', 'Comfortable but shrunk a little', '2024-02-05', 3),
            (4, 5, 4, 'Excellent Android', 'Great value for money', '2024-02-20', 6),
        ]
        
        self.cursor.executemany('''
        INSERT INTO reviews (product_id, customer_id, rating, title, comment, review_date, helpful_votes)
        VALUES (?, ?, ?, ?, ?, ?, ?)
        ''', reviews)
        print(f"âœ… Added {len(reviews)} reviews")
    
    # ====================================================================
    # ADVANCED QUERY DEMONSTRATIONS
    # ====================================================================
    
    def demo_advanced_queries(self):
        """Demonstrate advanced SQL queries and optimizations"""
        
        print("" + "="*70)
        print("ğŸ” ADVANCED QUERY DEMONSTRATIONS")
        print("="*70)
        
        # Query 1: Using EXPLAIN to analyze query plan
        print("1ï¸âƒ£ QUERY PLAN ANALYSIS WITH EXPLAIN")
        print("-" * 40)
        
        query = '''
        EXPLAIN QUERY PLAN
        SELECT p.name, p.price, c.name as category, AVG(r.rating) as avg_rating
        FROM products p
        JOIN categories c ON p.category_id = c.category_id
        LEFT JOIN reviews r ON p.product_id = r.product_id
        WHERE p.price > 500 AND p.stock_quantity > 0
        GROUP BY p.product_id
        ORDER BY avg_rating DESC
        LIMIT 10
        '''
        
        self.cursor.execute(query)
        
        print("Query execution plan:")
        for row in self.cursor.fetchall():
            print(f"  {row[3]}")
        
        # Query 2: Window Functions for ranking
        print("2ï¸âƒ£ WINDOW FUNCTIONS: Product Rankings")
        print("-" * 40)
        
        query = '''
        SELECT 
            name,
            price,
            category_id,
            RANK() OVER (PARTITION BY category_id ORDER BY price DESC) as price_rank_in_category,
            DENSE_RANK() OVER (ORDER BY price DESC) as overall_price_rank,
            AVG(price) OVER (PARTITION BY category_id) as avg_category_price
        FROM products
        WHERE is_active = 1
        ORDER BY category_id, price_rank_in_category
        '''
        
        self.cursor.execute(query)
        
        print(f"{'Product':25} | {'Category':3} | {'Price':10} | {'Cat Rank':9} | {'Overall Rank':12} | {'Avg Cat Price':14}")
        print("-" * 85)
        
        for row in self.cursor.fetchall():
            print(f"{row[0]:25} | {row[2]:8} | \${row[1]:8.2f} | {row[3]:9} | {row[4]:12} | \${row[5]:12.2f}")
        
        # Query 3: Recursive CTE for category hierarchy
        print("3ï¸âƒ£ RECURSIVE CTE: Category Hierarchy")
        print("-" * 40)
        
        query = '''
        WITH RECURSIVE category_tree AS (
            -- Anchor: Top-level categories
            SELECT 
                category_id,
                name,
                parent_category_id,
                0 as level,
                name as path
            FROM categories
            WHERE parent_category_id IS NULL
            
            UNION ALL
            
            -- Recursive: Child categories
            SELECT 
                c.category_id,
                c.name,
                c.parent_category_id,
                ct.level + 1,
                ct.path || ' > ' || c.name
            FROM categories c
            JOIN category_tree ct ON c.parent_category_id = ct.category_id
        )
        SELECT 
            REPLICATE('  ', level) || name as category_tree,
            level
        FROM category_tree
        ORDER BY path
        '''
        
        self.cursor.execute(query)
        
        print("Category hierarchy:")
        for row in self.cursor.fetchall():
            indent = "  " * row[1]
            print(f"{indent}ğŸ“ {row[0].strip()}")
        
        # Query 4: JSON operations
        print("4ï¸âƒ£ JSON OPERATIONS: Product Attributes")
        print("-" * 40)
        
        query = '''
        SELECT 
            name,
            price,
            json_extract(attributes, '$.color') as color,
            json_extract(attributes, '$.storage') as storage,
            json_extract(attributes, '$.camera') as camera
        FROM products
        WHERE category_id = 4  -- Smartphones
          AND json_extract(attributes, '$.storage') LIKE '%256%'
        '''
        
        self.cursor.execute(query)
        
        print(f"{'Product':20} | {'Price':10} | {'Color':12} | {'Storage':10} | {'Camera':20}")
        print("-" * 80)
        
        for row in self.cursor.fetchall():
            print(f"{row[0]:20} | \${row[1]:8.2f} | {row[2] or 'N/A':12} | {row[3] or 'N/A':10} | {row[4] or 'N/A':20}")
        
        # Query 5: Full-text search simulation
        print("5ï¸âƒ£ FULL-TEXT SEARCH SIMULATION")
        print("-" * 40)
        
        search_term = 'iPhone'
        query = '''
        SELECT 
            name,
            description,
            -- Calculate relevance score
            (CASE WHEN name LIKE ? THEN 3 ELSE 0 END) +
            (CASE WHEN description LIKE ? THEN 2 ELSE 0 END) +
            (CASE WHEN sku LIKE ? THEN 1 ELSE 0 END) as relevance_score
        FROM products
        WHERE name LIKE ? OR description LIKE ? OR sku LIKE ?
        ORDER BY relevance_score DESC, name
        '''
        
        like_term = f'%{search_term}%'
        params = [like_term, like_term, like_term, like_term, like_term, like_term]
        
        self.cursor.execute(query, params)
        
        print(f"Search results for '{search_term}':")
        for row in self.cursor.fetchall():
            # Shorten description for display
            desc = row[1][:50] + "..." if len(row[1]) > 50 else row[1]
            print(f"  â€¢ {row[0]} (Score: {row[2]})")
            print(f"    {desc}")
    
    def demo_performance_optimizations(self):
        """Demonstrate performance optimization techniques"""
        
        print("" + "="*70)
        print("âš¡ PERFORMANCE OPTIMIZATION TECHNIQUES")
        print("="*70)
        
        # Technique 1: Query caching with materialized views pattern
        print("1ï¸âƒ£ QUERY CACHING PATTERN")
        print("-" * 40)
        
        # Create a cache table
        self.cursor.execute('''
        CREATE TABLE IF NOT EXISTS product_stats_cache (
            product_id INTEGER PRIMARY KEY,
            units_sold INTEGER,
            revenue DECIMAL(10,2),
            avg_rating DECIMAL(3,2),
            last_updated TIMESTAMP,
            
            FOREIGN KEY (product_id) REFERENCES products(product_id)
        )
        ''')
        
        # Procedure to refresh cache
        refresh_query = '''
        INSERT OR REPLACE INTO product_stats_cache
        SELECT 
            p.product_id,
            COALESCE(SUM(oi.quantity), 0) as units_sold,
            COALESCE(SUM(oi.subtotal), 0) as revenue,
            COALESCE(AVG(r.rating), 0) as avg_rating,
            CURRENT_TIMESTAMP
        FROM products p
        LEFT JOIN order_items oi ON p.product_id = oi.product_id
        LEFT JOIN reviews r ON p.product_id = r.product_id
        GROUP BY p.product_id
        '''
        
        print("Created product_stats_cache table for fast analytics")
        print("Useful for frequently accessed, expensive-to-calculate data")
        
        # Technique 2: Partitioning pattern (simulated)
        print("2ï¸âƒ£ TABLE PARTITIONING PATTERN")
        print("-" * 40)
        
        print("""
For very large tables (millions of rows), partition by:
  â€¢ Date (orders_2024_01, orders_2024_02, etc.)
  â€¢ Range (products_1_1000, products_1001_2000)
  â€¢ Hash (distribute evenly across partitions)

Benefits:
  â€¢ Faster queries (search smaller tables)
  â€¢ Easier maintenance (drop old partitions)
  â€¢ Parallel processing
""")
        
        # Technique 3: Connection pooling demonstration
        print("3ï¸âƒ£ CONNECTION POOLING")
        print("-" * 40)
        
        print("""
Connection Pool Pattern:
  â€¢ Create pool of database connections
  â€¢ Reuse connections instead of creating new ones
  â€¢ Limits: Max connections per pool
  â€¢ Timeout: Close idle connections

Benefits:
  â€¢ Faster (no connection setup overhead)
  â€¢ Resource efficient
  â€¢ Prevents connection limits
""")
        
        # Technique 4: Read replicas for scaling
        print("4ï¸âƒ£ READ REPLICAS FOR SCALING")
        print("-" * 40)
        
        print("""
Master-Replica Architecture:
  â€¢ MASTER: Handles all writes (INSERT, UPDATE, DELETE)
  â€¢ REPLICAS: Handle read queries (SELECT)
  â€¢ Data replicates from master to replicas
  â€¢ Load balancing across replicas

Use when:
  â€¢ 80%+ of queries are reads
  â€¢ Database is read-heavy
  â€¢ Need horizontal scaling
""")
        
        # Technique 5: Query optimization tips
        print("5ï¸âƒ£ QUERY OPTIMIZATION TIPS")
        print("-" * 40)
        
        print("""
âœ… DO:
  â€¢ Use EXISTS instead of IN for large datasets
  â€¢ Avoid SELECT * (specify needed columns)
  â€¢ Use LIMIT for testing/exploration
  â€¢ Batch INSERT/UPDATE operations
  â€¢ Use appropriate data types

âŒ AVOID:
  â€¢ Functions in WHERE clauses (prevents index use)
  â€¢ OR conditions (use UNION instead)
  â€¢ Nested subqueries when JOIN works
  â€¢ Cursors (use set-based operations)
  â€¢ Wildcards at start of LIKE ('%term')
""")
    
    def interactive_demo(self):
        """Interactive demonstration menu"""
        while True:
            print("" + "="*70)
            print("ğŸš€ ADVANCED E-COMMERCE DATABASE DEMO")
            print("="*70)
            print("1. View Product Catalog")
            print("2. View Customer Summary")
            print("3. View Daily Sales Report")
            print("4. View Product Performance")
            print("5. Run Advanced Queries Demo")
            print("6. Show Performance Optimizations")
            print("7. Execute Custom Query")
            print("0. Exit")
            print("="*70)
            
            choice = input("\Select option (1-7, 0 to exit): ")
            
            if choice == '1':
                self.view_product_catalog()
            elif choice == '2':
                self.view_customer_summary()
            elif choice == '3':
                self.view_daily_sales()
            elif choice == '4':
                self.view_product_performance()
            elif choice == '5':
                self.demo_advanced_queries()
            elif choice == '6':
                self.demo_performance_optimizations()
            elif choice == '7':
                self.custom_query()
            elif choice == '0':
                print("ğŸ‘‹ Goodbye!")
                break
            else:
                print("âŒ Invalid choice")
    
    def view_product_catalog(self):
        """Display product catalog view"""
        self.cursor.execute("SELECT * FROM v_product_catalog LIMIT 10")
        rows = self.cursor.fetchall()
        
        print("ğŸ›ï¸ PRODUCT CATALOG (View)")
        print("-" * 80)
        for row in rows:
            print(f"ğŸ“¦ {row['name']}")
            print(f"   SKU: {row['sku']} | Price: \${row['price']:.2f} | Stock: {row['stock_quantity']}")
            print(f"   Category: {row['category_name']} | Rating: {row['avg_rating']}/5 ({row['review_count']} reviews)")
            print()
    
    def view_customer_summary(self):
        """Display customer summary view"""
        self.cursor.execute("SELECT * FROM v_customer_summary ORDER BY total_spent DESC LIMIT 10")
        rows = self.cursor.fetchall()
        
        print("ğŸ‘¥ CUSTOMER SUMMARY (View)")
        print("-" * 80)
        for row in rows:
            print(f"ğŸ‘¤ {row['full_name']} ({row['email']})")
            print(f"   Segment: {row['segment']} | Joined: {row['registration_date']}")
            print(f"   Orders: {row['total_orders']} | Total Spent: \${row['total_spent']:.2f}")
            print(f"   Loyalty Points: {row['loyalty_points']} | Last Order: {row['last_order_date']}")
            print()
    
    def view_daily_sales(self):
        """Display daily sales view"""
        self.cursor.execute("SELECT * FROM v_daily_sales ORDER BY sale_date DESC LIMIT 10")
        rows = self.cursor.fetchall()
        
        print("ğŸ“ˆ DAILY SALES REPORT (View)")
        print("-" * 80)
        for row in rows:
            print(f"ğŸ“… {row['sale_date']}")
            print(f"   Orders: {row['order_count']} | Items: {row['item_count']} ({row['total_quantity']} units)")
            print(f"   Revenue: \${row['total_revenue']:.2f} | Avg Order: \${row['avg_order_value']:.2f}")
            print()
    
    def view_product_performance(self):
        """Display product performance view"""
        self.cursor.execute("SELECT * FROM v_product_performance ORDER BY revenue DESC LIMIT 10")
        rows = self.cursor.fetchall()
        
        print("ğŸ“Š PRODUCT PERFORMANCE (View)")
        print("-" * 80)
        for row in rows:
            print(f"ğŸ† {row['name']}")
            print(f"   Category: {row['category_name']} | Units Sold: {row['units_sold'] or 0}")
            print(f"   Revenue: \${row['revenue'] or 0:.2f} | Customers: {row['unique_customers'] or 0}")
            print(f"   Rating: {row['avg_rating'] or 0}/5 | Stock: {row['stock_quantity']}")
            print()
    
    def custom_query(self):
        """Allow user to execute custom query"""
        print("ğŸ”§ CUSTOM QUERY EXECUTOR")
        print("-" * 40)
        print("Enter your SQL query (end with semicolon):")
        print("Type 'EXIT' to return to menu")
        print("-" * 40)
        
        query_lines = []
        while True:
            line = input("SQL> ")
            if line.upper() == 'EXIT':
                return
            query_lines.append(line)
            if ';' in line:
                break
        
        query = ' '.join(query_lines)
        
        try:
            self.cursor.execute(query)
            
            if query.strip().upper().startswith('SELECT'):
                rows = self.cursor.fetchall()
                if rows:
                    # Get column names
                    columns = [desc[0] for desc in self.cursor.description]
                    
                    print(f"ğŸ“Š Results ({len(rows)} rows):")
                    print("-" * 80)
                    
                    # Simple table display
                    for i, row in enumerate(rows[:20]):  # Limit to 20 rows
                        if i == 0:
                            # Print headers
                            header = " | ".join(f"{col:20}"[:20] for col in columns)
                            print(header)
                            print("-" * 80)
                        
                        # Print row
                        row_display = " | ".join(f"{str(val):20}"[:20] for val in row)
                        print(row_display)
                    
                    if len(rows) > 20:
                        print(f"... and {len(rows) - 20} more rows")
                else:
                    print("âœ… Query executed successfully (0 rows returned)")
            else:
                self.conn.commit()
                print(f"âœ… Query executed successfully. Rows affected: {self.cursor.rowcount}")
                
        except Exception as e:
            print(f"âŒ Error: {e}")
    
    def __del__(self):
        """Clean up"""
        self.conn.close()

# Run the advanced e-commerce demo
if __name__ == "__main__":
    ecommerce = AdvancedEcommerceDB()
    ecommerce.interactive_demo()
    </pre>
</div>

<div style="background-color: #FFF3E0; padding: 20px; border-radius: 10px; margin: 20px 0;">
    <h3>ğŸ“š Database Optimization Cheat Sheet</h3>
    
    <div style="background-color: white; padding: 15px; border-radius: 8px; margin-top: 15px;">
        <table style="width:100%; border-collapse: collapse;">
            <tr style="background-color: #FFE0B2;">
                <th style="padding: 10px; border: 1px solid #FF9800;">Problem</th>
                <th style="padding: 10px; border: 1px solid #FF9800;">Symptoms</th>
                <th style="padding: 10px; border: 1px solid #FF9800;">Solution</th>
                <th style="padding: 10px; border: 1px solid #FF9800;">Performance Gain</th>
            </tr>
            <tr>
                <td style="padding: 8px; border: 1px solid #FFE0B2;">Slow SELECT queries</td>
                <td style="padding: 8px; border: 1px solid #FFE0B2;">Full table scans</td>
                <td style="padding: 8px; border: 1px solid #FFE0B2;">Add indexes on WHERE/JOIN columns</td>
                <td style="padding: 8px; border: 1px solid #FFE0B2;">10-1000x faster</td>
            </tr>
            <tr style="background-color: #FFF8E1;">
                <td style="padding: 8px; border: 1px solid #FFE0B2;">Slow INSERT/UPDATE</td>
                <td style="padding: 8px; border: 1px solid #FFE0B2;">Too many indexes</td>
                <td style="padding: 8px; border: 1px solid #FFE0B2;">Remove unused indexes, batch operations</td>
                <td style="padding: 8px; border: 1px solid #FFE0B2;">2-10x faster</td>
            </tr>
            <tr>
                <td style="padding: 8px; border: 1px solid #FFE0B2;">Large table scans</td>
                <td style="padding: 8px; border: 1px solid #FFE0B2;">Millions of rows</td>
                <td style="padding: 8px; border: 1px solid #FFE0B2;">Table partitioning, materialized views</td>
                <td style="padding: 8px; border: 1px solid #FFE0B2;">100-1000x faster</td>
            </tr>
            <tr style="background-color: #FFF8E1;">
                <td style="padding: 8px; border: 1px solid #FFE0B2;">Many concurrent users</td>
                <td style="padding: 8px; border: 1px solid #FFE0B2;">Deadlocks, timeouts</td>
                <td style="padding: 8px; border: 1px solid #FFE0B2;">Connection pooling, read replicas</td>
                <td style="padding: 8px; border: 1px solid #FFE0B2;">Handle 10x more users</td>
            </tr>
            <tr>
                <td style="padding: 8px; border: 1px solid #FFE0B2;">Complex reports slow</td>
                <td style="padding: 8px; border: 1px solid #FFE0B2;">Multiple JOINs, aggregations</td>
                <td style="padding: 8px; border: 1px solid #FFE0B2;">Pre-compute with views, cache results</td>
                <td style="padding: 8px; border: 1px solid #FFE0B2;">100-1000x faster</td>
            </tr>
        </table>
    </div>
</div>

<div style="text-align: center; margin: 30px 0; padding: 20px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border-radius: 10px;">
    <h2>ğŸ‰ DATABASE OPTIMIZATION MASTER! ğŸ‰</h2>
    <p>You can now make databases lightning fast and handle massive scale!</p>
    <p>Congratulations on completing Month 4: Database Fundamentals!</p>
    <div style="margin-top: 15px; font-size: 24px;">
        âš¡ â†’ ğŸš€ â†’ ğŸ† â†’ ğŸŒŸ
    </div>
    <p style="margin-top: 20px; font-size: 1.2em;">
        <b>Next Month:</b> Python + SQL Integration & Real Applications!
    </p>
</div>`
            },
            "5-19": {
                icon: "fa-project-diagram",
                title: "Advanced Table Relationships & JOINs",
                html: `<h1>Month 5, Week 19: Advanced Table Relationships & JOINs</h1>
<p>Today we master complex SQL JOIN operations, understand relationship types, and build sophisticated queries that connect multiple tables.</p>

<div class="analogy-box">
    <b>Analogy: The Family Tree & Social Network ğŸŒ³</b><br/>
    
    Tables: Different family branches (Smiths, Johnsons, Williams)<br/>
    Primary Keys: Unique birth certificates<br/>
    Foreign Keys: Marriage licenses connecting families<br/>
    JOINs: Family reunions where branches meet<br/>
    INNER JOIN: Immediate family only<br/>
    LEFT JOIN: All Smiths and their Johnson spouses (if any)<br/>
    Many-to-Many: Social media friends networks<br/>
</div>

<h3>Database Relationship Types Deep Dive</h3>
<div style="background-color: #f0f8ff; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h4>ğŸ“Š Relationship Types with Real-World Examples</h4>
    
    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin: 15px 0;">
        <div style="background: white; padding: 15px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
            <h5 style="color: #4A90E2;">ğŸ”— One-to-One</h5>
            <p><b>Example:</b> User â†” Profile Picture</p>
            <pre style="background: #f5f5f5; padding: 10px; font-size: 12px;">
CREATE TABLE users (
    user_id INT PRIMARY KEY,
    username VARCHAR(50)
);

CREATE TABLE profile_pics (
    pic_id INT PRIMARY KEY,
    user_id INT UNIQUE,  -- Ensures 1:1
    photo_url VARCHAR(255),
    FOREIGN KEY (user_id) 
        REFERENCES users(user_id)
);
            </pre>
            <p><b>Real-world:</b> Passport â†” Person, Employee â†” Parking Spot</p>
        </div>
        
        <div style="background: white; padding: 15px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
            <h5 style="color: #4A90E2;">ğŸ”— One-to-Many</h5>
            <p><b>Example:</b> Author â†” Books</p>
            <pre style="background: #f5f5f5; padding: 10px; font-size: 12px;">
CREATE TABLE authors (
    author_id INT PRIMARY KEY,
    name VARCHAR(100)
);

CREATE TABLE books (
    book_id INT PRIMARY KEY,
    title VARCHAR(200),
    author_id INT,  -- Foreign key
    FOREIGN KEY (author_id) 
        REFERENCES authors(author_id)
);
            </pre>
            <p><b>Real-world:</b> Department â†” Employees, Country â†” Cities</p>
        </div>
        
        <div style="background: white; padding: 15px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
            <h5 style="color: #4A90E2;">ğŸ”— Many-to-Many</h5>
            <p><b>Example:</b> Students â†” Courses</p>
            <pre style="background: #f5f5f5; padding: 10px; font-size: 12px;">
CREATE TABLE students (
    student_id INT PRIMARY KEY,
    name VARCHAR(100)
);

CREATE TABLE courses (
    course_id INT PRIMARY KEY,
    title VARCHAR(200)
);

-- Junction/Bridge Table
CREATE TABLE enrollments (
    enrollment_id INT PRIMARY KEY,
    student_id INT,
    course_id INT,
    grade CHAR(2),
    FOREIGN KEY (student_id) 
        REFERENCES students(student_id),
    FOREIGN KEY (course_id) 
        REFERENCES courses(course_id)
);
            </pre>
            <p><b>Real-world:</b> Products â†” Orders, Actors â†” Movies</p>
        </div>
    </div>
    
    <div style="margin-top: 20px; padding: 15px; background: #fff3cd; border-radius: 5px;">
        <h5>ğŸ¯ Remember: Relationship Rules</h5>
        <p><b>1:1:</b> Foreign Key + UNIQUE constraint</p>
        <p><b>1:Many:</b> Foreign Key in "many" table</p>
        <p><b>Many:Many:</b> Junction table with two Foreign Keys</p>
    </div>
</div>

<h3>Mastering SQL JOIN Operations</h3>
<b>The JOIN Family Explained:</b>
<div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">

<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
<pre style='background-color: #36454f; color: #fff; border-radius: 5px; padding: 10px;'>
-- ========= SAMPLE DATA =========
-- Customers Table
INSERT INTO customers VALUES
(1, 'Alice', 'alice@email.com'),
(2, 'Bob', 'bob@email.com'),
(3, 'Charlie', 'charlie@email.com');

-- Orders Table
INSERT INTO orders VALUES
(101, '2024-01-15', 299.99, 1),
(102, '2024-01-20', 149.99, 1),
(103, '2024-01-25', 499.99, 2),
(104, '2024-02-01', 89.99, NULL); -- No customer!
</pre>

<pre style='background-color: #36454f; color: #fff; border-radius: 5px; padding: 10px;'>
-- ========= VISUALIZING DATA =========
-- Customers:            Orders:
-- | id | name    |     | id | date       | amount | cust_id |
-- |----|---------|     |----|------------|--------|---------|
-- | 1  | Alice   |     | 101| 2024-01-15 | 299.99 | 1       |
-- | 2  | Bob     |     | 102| 2024-01-20 | 149.99 | 1       |
-- | 3  | Charlie |     | 103| 2024-01-25 | 499.99 | 2       |
--                          | 104| 2024-02-01 | 89.99  | NULL    |
</pre>
</div>

<h4>ğŸ”— JOIN Type Comparison</h4>
<table style="width: 100%; border-collapse: collapse; margin: 15px 0;">
    <tr style="background: #4A90E2; color: white;">
        <th style="padding: 10px; text-align: left;">JOIN Type</th>
        <th style="padding: 10px; text-align: left;">Venn Diagram</th>
        <th style="padding: 10px; text-align: left;">Returns</th>
        <th style="padding: 10px; text-align: left;">Use Case</th>
    </tr>
    <tr style="background: #f8f9fa;">
        <td style="padding: 8px; border: 1px solid #ddd;"><b>INNER JOIN</b></td>
        <td style="padding: 8px; border: 1px solid #ddd;">Intersection Only</td>
        <td style="padding: 8px; border: 1px solid #ddd;">Matching rows from both tables</td>
        <td style="padding: 8px; border: 1px solid #ddd;">Find customers WITH orders</td>
    </tr>
    <tr style="background: white;">
        <td style="padding: 8px; border: 1px solid #ddd;"><b>LEFT JOIN</b></td>
        <td style="padding: 8px; border: 1px solid #ddd;">Left circle + intersection</td>
        <td style="padding: 8px; border: 1px solid #ddd;">All left rows + matched right rows</td>
        <td style="padding: 8px; border: 1px solid #ddd;">Find ALL customers + their orders</td>
    </tr>
    <tr style="background: #f8f9fa;">
        <td style="padding: 8px; border: 1px solid #ddd;"><b>RIGHT JOIN</b></td>
        <td style="padding: 8px; border: 1px solid #ddd;">Right circle + intersection</td>
        <td style="padding: 8px; border: 1px solid #ddd;">All right rows + matched left rows</td>
        <td style="padding: 8px; border: 1px solid #ddd;">Find ALL orders + customer info</td>
    </tr>
    <tr style="background: white;">
        <td style="padding: 8px; border: 1px solid #ddd;"><b>FULL OUTER JOIN</b></td>
        <td style="padding: 8px; border: 1px solid #ddd;">Both circles complete</td>
        <td style="padding: 8px; border: 1px solid #ddd;">All rows from both tables</td>
        <td style="padding: 8px; border: 1px solid #ddd;">Complete picture (rarely used)</td>
    </tr>
</table>

<h4>ğŸ” JOIN Examples in Action</h4>
<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 15px;">
<pre style='background-color: #f1f1f1; border-radius: 5px; padding: 10px;'>
-- ========= INNER JOIN =========
-- Only customers WITH orders
SELECT 
    c.name AS customer_name,
    o.order_date,
    o.amount
FROM customers c
INNER JOIN orders o 
    ON c.customer_id = o.customer_id;

-- Result:
-- | Alice   | 2024-01-15 | 299.99 |
-- | Alice   | 2024-01-20 | 149.99 |
-- | Bob     | 2024-01-25 | 499.99 |
-- (Charlie NOT included - no orders)
</pre>

<pre style='background-color: #f1f1f1; border-radius: 5px; padding: 10px;'>
-- ========= LEFT JOIN =========
-- ALL customers + their orders (if any)
SELECT 
    c.name AS customer_name,
    o.order_date,
    o.amount
FROM customers c
LEFT JOIN orders o 
    ON c.customer_id = o.customer_id;

-- Result:
-- | Alice   | 2024-01-15 | 299.99 |
-- | Alice   | 2024-01-20 | 149.99 |
-- | Bob     | 2024-01-25 | 499.99 |
-- | Charlie | NULL       | NULL   | â† Included!
</pre>
</div>

<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 15px;">
<pre style='background-color: #36454f; color: #fff; border-radius: 5px; padding: 10px;'>
-- ========= RIGHT JOIN =========
-- ALL orders + customer info (if any)
SELECT 
    c.name AS customer_name,
    o.order_id,
    o.amount
FROM customers c
RIGHT JOIN orders o 
    ON c.customer_id = o.customer_id;

-- Result:
-- | Alice   | 101 | 299.99 |
-- | Alice   | 102 | 149.99 |
-- | Bob     | 103 | 499.99 |
-- | NULL    | 104 | 89.99  | â† Order without customer!
</pre>

<pre style='background-color: #36454f; color: #fff; border-radius: 5px; padding: 10px;'>
-- ========= MULTIPLE JOINS =========
-- 3-Table JOIN: Customer â†’ Orders â†’ Products
SELECT 
    c.name,
    o.order_date,
    p.product_name,
    oi.quantity,
    oi.quantity * p.price AS line_total
FROM customers c
JOIN orders o ON c.customer_id = o.customer_id
JOIN order_items oi ON o.order_id = oi.order_id
JOIN products p ON oi.product_id = p.product_id
WHERE o.order_date >= '2024-01-01'
ORDER BY c.name, o.order_date;
</pre>
</div>
</div>

<h3>Advanced JOIN Techniques</h3>
<div style="background-color: #fff0e6; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h4>ğŸ”§ JOIN Power Tools</h4>
    
    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; margin-top: 15px;">
        <div>
            <h5>SELF JOIN</h5>
            <p>Joining a table to itself</p>
            <pre style="background: #f5f5f5; padding: 10px; font-size: 12px;">
-- Find employees and their managers
SELECT 
    e.name AS employee,
    m.name AS manager,
    e.department
FROM employees e
LEFT JOIN employees m 
    ON e.manager_id = m.employee_id;
            </pre>
        </div>
        
        <div>
            <h5>CROSS JOIN</h5>
            <p>Cartesian product (every combination)</p>
            <pre style="background: #f5f5f5; padding: 10px; font-size: 12px;">
-- Generate all size-color combinations
SELECT 
    s.size_name,
    c.color_name,
    CONCAT(s.size_name, ' ', c.color_name) 
        AS product_variant
FROM sizes s
CROSS JOIN colors c;
            </pre>
        </div>
        
        <div>
            <h5>NATURAL JOIN</h5>
            <p>Auto-join on matching column names</p>
            <pre style="background: #f5f5f5; padding: 10px; font-size: 12px;">
-- Automatically joins on 'customer_id'
SELECT *
FROM customers
NATURAL JOIN orders;
-- âš ï¸ Use with caution! Can join wrong columns
            </pre>
        </div>
        
        <div>
            <h5>JOIN with SUBQUERY</h5>
            <p>Join with query results</p>
            <pre style="background: #f5f5f5; padding: 10px; font-size: 12px;">
-- Join with aggregated data
SELECT 
    c.name,
    c.email,
    order_stats.total_spent
FROM customers c
JOIN (
    SELECT 
        customer_id,
        COUNT(*) AS order_count,
        SUM(amount) AS total_spent
    FROM orders
    GROUP BY customer_id
) order_stats ON c.customer_id = order_stats.customer_id;
            </pre>
        </div>
    </div>
</div>

<h3>Common JOIN Patterns & Solutions</h3>
<div style="background-color: #e8f5e8; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h4>ğŸ’¡ Real-World JOIN Patterns</h4>
    
<pre style='background-color: #36454f; color: #fff; border-radius: 5px; padding: 15px; margin: 10px 0;'>
-- ========= PATTERN 1: Find Missing Data =========
-- Customers with NO orders
SELECT c.name, c.email
FROM customers c
LEFT JOIN orders o ON c.customer_id = o.customer_id
WHERE o.order_id IS NULL;

-- ========= PATTERN 2: Latest Record Join =========
-- Get each customer's MOST RECENT order
SELECT 
    c.name,
    latest.order_date AS last_order,
    latest.amount AS last_amount
FROM customers c
JOIN (
    SELECT 
        customer_id,
        MAX(order_date) AS latest_date
    FROM orders
    GROUP BY customer_id
) latest_date ON c.customer_id = latest_date.customer_id
JOIN orders latest ON latest_date.customer_id = latest.customer_id 
    AND latest_date.latest_date = latest.order_date;

-- ========= PATTERN 3: Many-to-Many Analysis =========
-- Which students take which courses?
SELECT 
    s.student_name,
    GROUP_CONCAT(c.course_name SEPARATOR ', ') 
        AS enrolled_courses,
    COUNT(DISTINCT e.course_id) AS course_count
FROM students s
JOIN enrollments e ON s.student_id = e.student_id
JOIN courses c ON e.course_id = c.course_id
GROUP BY s.student_id;

-- ========= PATTERN 4: Hierarchical Data =========
-- Organizational chart (CEO â†’ VPs â†’ Managers â†’ Employees)
WITH RECURSIVE org_chart AS (
    -- Anchor: CEO (no manager)
    SELECT 
        employee_id,
        name,
        title,
        manager_id,
        1 AS level
    FROM employees
    WHERE manager_id IS NULL
    
    UNION ALL
    
    -- Recursive: Add subordinates
    SELECT 
        e.employee_id,
        e.name,
        e.title,
        e.manager_id,
        oc.level + 1
    FROM employees e
    INNER JOIN org_chart oc 
        ON e.manager_id = oc.employee_id
)
SELECT 
    LPAD('', (level-1)*4, ' ') || name AS hierarchy,
    title,
    level
FROM org_chart
ORDER BY level, name;
</pre>
</div>

<h3>Today's Hands-On Exercises</h3>
<div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <b>Exercise 1: E-Commerce Database (90 minutes)</b>
    <p>Build and query a complete e-commerce database:</p>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 15px 0;">
        <div>
            <b>Tables to Create:</b>
            <ul>
                <li>customers (customer_id, name, email)</li>
                <li>products (product_id, name, price, category_id)</li>
                <li>categories (category_id, category_name)</li>
                <li>orders (order_id, customer_id, order_date)</li>
                <li>order_items (order_id, product_id, quantity)</li>
                <li>reviews (review_id, product_id, customer_id, rating)</li>
            </ul>
        </div>
        
        <div>
            <b>Queries to Write:</b>
            <ul>
                <li>Top 10 customers by total spend</li>
                <li>Products never ordered</li>
                <li>Category sales report</li>
                <li>Customer purchase history</li>
                <li>Product recommendations (bought together)</li>
            </ul>
        </div>
    </div>
    
    <b>Exercise 2: Social Media Network (60 minutes)</b>
    <p>Model and query a social network:</p>
    <ul>
        <li>Users can follow other users (many-to-many)</li>
        <li>Users can post messages (one-to-many)</li>
        <li>Users can like posts (many-to-many)</li>
        <li>Write queries to find:
            <ul>
                <li>Mutual friends between two users</li>
                <li>Most influential users (most followers)</li>
                <li>Suggested friends (friends of friends)</li>
                <li>Popular posts (most likes)</li>
            </ul>
        </li>
    </ul>
    
    <b>Exercise 3: Library Management System (30 minutes)</b>
    <p>Create a library database with:</p>
    <ul>
        <li>Books, Authors, Publishers</li>
        <li>Members, Loans, Reservations</li>
        <li>Write queries for:
            <ul>
                <li>Overdue books with member details</li>
                <li>Most popular authors</li>
                <li>Members who borrowed specific genres</li>
                <li>Books currently available</li>
            </ul>
        </li>
    </ul>
</div>

<h3>Homework Assignment</h3>
<div style="background-color: #fff0e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <b>Build a "School Management System Database"</b>
    
    <b>Requirements:</b>
    <ol>
        <li><b>Design the Database Schema:</b>
            <ul>
                <li>Students, Teachers, Classes, Subjects</li>
                <li>Enrollments, Grades, Attendance</li>
                <li>Parents, Parent-Student relationships</li>
                <li>Extracurricular Activities, Clubs</li>
            </ul>
        </li>
        
        <li><b>Create 20 Advanced SQL Queries:</b>
            <ul>
                <li>Student report cards with averages</li>
                <li>Teacher workload (classes taught)</li>
                <li>Class schedules with room assignments</li>
                <li>Attendance reports by month</li>
                <li>Find students in multiple clubs</li>
                <li>Parent contact lists for emergencies</li>
                <li>Students needing academic intervention</li>
                <li>Most popular elective subjects</li>
            </ul>
        </li>
        
        <li><b>Write a Complex Analysis Report:</b>
            <ul>
                <li>Correlation between attendance and grades</li>
                <li>Identify at-risk students</li>
                <li>Resource allocation recommendations</li>
                <li>Predictive analysis for next term</li>
            </ul>
        </li>
    </ol>
    
    <b>Bonus Challenges:</b>
    <ul>
        <li>Implement a "friend recommendation" system based on shared classes/clubs</li>
        <li>Create a query that generates a student's weekly schedule</li>
        <li>Build a query to find all possible class schedule conflicts</li>
        <li>Create a "family portal" view showing all siblings in school</li>
    </ul>
</div>

<h3>Key Learning Points:</h3>
<ol>
    <li><b>Relationship Types:</b> Master 1:1, 1:Many, Many:Many relationships</li>
    <li><b>JOIN Mastery:</b> INNER, LEFT, RIGHT, FULL OUTER JOIN differences</li>
    <li><b>Pattern Recognition:</b> Identify common JOIN patterns in real systems</li>
    <li><b>Performance:</b> Understand how JOINs affect query speed</li>
    <li><b>Data Integrity:</b> Use JOINs to find missing or inconsistent data</li>
    <li><b>Complex Queries:</b> Chain multiple JOINs for deep analysis</li>
</ol>

<div style="background-color: #e8f5e8; padding: 15px; margin: 20px 0; border-radius: 5px;">
    <h3>ğŸ’¡ JOIN Best Practices:</h3>
    <ul>
        <li><b>Always Use Aliases:</b> Makes queries readable and prevents ambiguity</li>
        <li><b>Be Explicit:</b> Use INNER JOIN instead of just JOIN for clarity</li>
        <li><b>Index Foreign Keys:</b> Speeds up JOIN operations dramatically</li>
        <li><b>Start Small:</b> Test JOINs with small datasets before full tables</li>
        <li><b>Check NULLs:</b> LEFT/RIGHT JOIN often produce NULLs - handle them</li>
        <li><b>Use EXPLAIN:</b> See how database executes your JOINs</li>
        <li><b>Avoid SELECT *:</b> Specify only needed columns in JOIN results</li>
        <li><b>Test Different JOIN Types:</b> Same query with different JOINs gives different insights</li>
    </ul>
</div>

<h3>Visual Summary: The JOIN Family Tree</h3>
<div style="background: white; padding: 20px; border-radius: 10px; border: 2px solid #4A90E2;">
    <div style="text-align: center; margin: 20px 0;">
        <div style="display: inline-block; text-align: left;">
            <div style="font-weight: bold; color: #4A90E2; margin-bottom: 10px;">JOIN Family Tree:</div>
            <div style="margin-left: 20px;">
                <div>â”œâ”€â”€ INNER JOIN (Most Common)</div>
                <div>â”œâ”€â”€ OUTER JOIN</div>
                <div style="margin-left: 20px;">
                    <div>â”‚   â”œâ”€â”€ LEFT JOIN (Very Common)</div>
                    <div>â”‚   â”œâ”€â”€ RIGHT JOIN (Less Common)</div>
                    <div>â”‚   â””â”€â”€ FULL OUTER JOIN (Rare)</div>
                </div>
                <div>â”œâ”€â”€ CROSS JOIN (Cartesian Product)</div>
                <div>â”œâ”€â”€ SELF JOIN (Table joins itself)</div>
                <div>â””â”€â”€ NATURAL JOIN (Auto-join, Use Caution!)</div>
            </div>
        </div>
    </div>
    
    <div style="margin-top: 20px; padding: 15px; background: #f8f9fa; border-radius: 5px;">
        <p><b>ğŸ“ Pro Tip:</b> 80% of your JOINs will be INNER or LEFT JOIN. Master these first!</p>
        <p><b>ğŸ” Debugging Tip:</b> When a JOIN returns unexpected results, break it down:</p>
        <ol>
            <li>Run each table's SELECT separately</li>
            <li>Check your ON condition carefully</li>
            <li>Look for NULL values that might be excluded</li>
            <li>Test with LIMIT 10 first</li>
        </ol>
    </div>
</div>
`
            },
            "5-20": {
                icon: "fa-database",
                title: "Database Optimization & Indexes",
                html: `<h1>Month 5, Week 20: Database Optimization & Indexes</h1>
<p>Today we learn how to make databases FAST! We'll explore indexing strategies, query optimization, and performance tuning techniques.</p>

<div class="analogy-box">
    <b>Analogy: The Library Catalog System ğŸ“š vs. Random Search</b><br/>
    
    Database Table: Library with 1,000,000 books<br/>
    Full Table Scan: Searching every shelf, book by book<br/>
    Index: Library catalog (card system)<br/>
    Primary Key Index: Dewey Decimal System<br/>
    Composite Index: Subject + Author catalog<br/>
    Query Optimizer: Expert librarian who knows fastest search method<br/>
    Slow Query: Tourist randomly wandering shelves<br/>
    Fast Query: Librarian using catalog to find book instantly<br/>
</div>

<h3>Why Database Performance Matters</h3>
<div style="background-color: #f0f8ff; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h4>ğŸ“Š Performance Comparison: With vs Without Indexes</h4>
    
    <table style="width: 100%; border-collapse: collapse; margin: 15px 0;">
        <tr style="background: #4A90E2; color: white;">
            <th style="padding: 10px; text-align: left;">Table Size</th>
            <th style="padding: 10px; text-align: left;">Without Index</th>
            <th style="padding: 10px; text-align: left;">With Index</th>
            <th style="padding: 10px; text-align: left;">Speedup</th>
        </tr>
        <tr style="background: #f8f9fa;">
            <td style="padding: 8px; border: 1px solid #ddd;">10,000 rows</td>
            <td style="padding: 8px; border: 1px solid #ddd;">~10ms</td>
            <td style="padding: 8px; border: 1px solid #ddd;">~1ms</td>
            <td style="padding: 8px; border: 1px solid #ddd;">10x faster</td>
        </tr>
        <tr style="background: white;">
            <td style="padding: 8px; border: 1px solid #ddd;">100,000 rows</td>
            <td style="padding: 8px; border: 1px solid #ddd;">~100ms</td>
            <td style="padding: 8px; border: 1px solid #ddd;">~2ms</td>
            <td style="padding: 8px; border: 1px solid #ddd;">50x faster</td>
        </tr>
        <tr style="background: #f8f9fa;">
            <td style="padding: 8px; border: 1px solid #ddd;">1,000,000 rows</td>
            <td style="padding: 8px; border: 1px solid #ddd;">~1,000ms (1 second!)</td>
            <td style="padding: 8px; border: 1px solid #ddd;">~3ms</td>
            <td style="padding: 8px; border: 1px solid #ddd;">333x faster!</td>
        </tr>
        <tr style="background: white;">
            <td style="padding: 8px; border: 1px solid #ddd;">10,000,000 rows</td>
            <td style="padding: 8px; border: 1px solid #ddd;">~10,000ms (10 sec!)</td>
            <td style="padding: 8px; border: 1px solid #ddd;">~5ms</td>
            <td style="padding: 8px; border: 1px solid #ddd;">2,000x faster!!</td>
        </tr>
    </table>
    
    <div style="margin-top: 20px; padding: 15px; background: #fff3cd; border-radius: 5px;">
        <h5>ğŸ¯ The Rule of Thumb:</h5>
        <p><b>Without Index:</b> Time grows LINEARLY with data (10x data = 10x slower)</p>
        <p><b>With Index:</b> Time grows LOGARITHMICALLY with data (10x data = slightly slower)</p>
        <p><b>Example:</b> Finding 1 book in 10 million takes ~5ms with index, 10 SECONDS without!</p>
    </div>
</div>

<h3>Understanding Database Indexes</h3>
<b>How Indexes Work Under the Hood:</b>
<div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">

<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
<pre style='background-color: #36454f; color: #fff; border-radius: 5px; padding: 10px;'>
-- ========= BEFORE INDEX =========
-- Database must check EVERY row (Full Table Scan)
SELECT * FROM users 
WHERE email = 'alice@example.com';

-- With 1,000,000 users:
-- 1. Read row 1: email = 'bob@...' âŒ
-- 2. Read row 2: email = 'carol@...' âŒ
-- 3. Read row 3: email = 'dave@...' âŒ
-- ... (check 999,997 more rows)
-- 1,000,000. Found 'alice@...' âœ“
-- Total: Read 1,000,000 rows!
</pre>

<pre style='background-color: #36454f; color: #fff; border-radius: 5px; padding: 10px;'>
-- ========= AFTER INDEX =========
CREATE INDEX idx_users_email ON users(email);

-- Now database uses B-tree index
SELECT * FROM users 
WHERE email = 'alice@example.com';

-- With 1,000,000 users:
-- 1. Go to index (sorted emails)
-- 2. Binary search: O(log n) time
-- 3. Find 'alice@...' in ~20 steps
-- 4. Get row location from index
-- 5. Read exactly 1 row from table
-- Total: Read ~21 rows (not 1,000,000!)
</pre>
</div>

<h4>ğŸ” Index Types Explained</h4>
<div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin: 15px 0;">
    <div style="background: white; padding: 15px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
        <h5 style="color: #4A90E2;">ğŸŒ² B-Tree Index</h5>
        <p><b>Most Common</b></p>
        <img src="https://upload.wikimedia.org/wikipedia/commons/6/65/B-tree.svg" style="width: 100%; height: 120px; object-fit: contain; background: #f5f5f5; padding: 5px; border-radius: 5px;" alt="B-Tree Structure">
        <p><b>Best for:</b> Equality, ranges (>, <, BETWEEN)</p>
        <p><b>Example:</b> WHERE age > 18</p>
    </div>
    
    <div style="background: white; padding: 15px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
        <h5 style="color: #4A90E2;">ğŸ”‘ Hash Index</h5>
        <p><b>Fast Equality</b></p>
        <img src="https://upload.wikimedia.org/wikipedia/commons/7/7d/Hash_table_3_1_1_0_1_0_0_SP.svg" style="width: 100%; height: 120px; object-fit: contain; background: #f5f5f5; padding: 5px; border-radius: 5px;" alt="Hash Table">
        <p><b>Best for:</b> Exact matches only</p>
        <p><b>Example:</b> WHERE id = 123</p>
    </div>
    
    <div style="background: white; padding: 15px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
        <h5 style="color: #4A90E2;">ğŸ” Full-Text Index</h5>
        <p><b>Text Search</b></p>
        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/7/7c/Search_icon.svg/1024px-Search_icon.svg.png" style="width: 100%; height: 120px; object-fit: contain; background: #f5f5f5; padding: 5px; border-radius: 5px;" alt="Search Icon">
        <p><b>Best for:</b> LIKE '%keyword%' searches</p>
        <p><b>Example:</b> WHERE content LIKE '%database%'</p>
    </div>
</div>

<h4>ğŸ“ Creating and Managing Indexes</h4>
<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 15px;">
<pre style='background-color: #f1f1f1; border-radius: 5px; padding: 10px;'>
-- ========= BASIC INDEX CREATION =========

-- Single column index
CREATE INDEX idx_lastname ON employees(last_name);

-- Unique index (no duplicates)
CREATE UNIQUE INDEX idx_email ON users(email);

-- Composite index (multiple columns)
CREATE INDEX idx_name_department 
ON employees(last_name, department_id);

-- Partial index (only some rows)
CREATE INDEX idx_active_users 
ON users(email) 
WHERE is_active = true;

-- Expression/index on calculation
CREATE INDEX idx_name_lower 
ON users(LOWER(first_name));
</pre>

<pre style='background-color: #f1f1f1; border-radius: 5px; padding: 10px;'>
-- ========= INDEX MANAGEMENT =========

-- View existing indexes
SELECT 
    tablename,
    indexname,
    indexdef
FROM pg_indexes 
WHERE schemaname = 'public'
ORDER BY tablename, indexname;

-- Check index size
SELECT 
    indexname,
    pg_size_pretty(pg_relation_size(indexname)) 
        AS index_size
FROM pg_indexes 
WHERE tablename = 'users';

-- Drop an index
DROP INDEX IF EXISTS idx_old_index;

-- Rebuild index (fix fragmentation)
REINDEX INDEX idx_users_email;

-- Disable/Enable index
-- (PostgreSQL: No direct disable, but...)
UPDATE pg_index SET indisvalid = false 
WHERE indexrelid = 'idx_big_index'::regclass;
</pre>
</div>
</div>

<h3>Query Optimization Techniques</h3>
<div style="background-color: #fff0e6; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h4>ğŸ”§ The EXPLAIN Command - See How Queries Run</h4>
    
<pre style='background-color: #36454f; color: #fff; border-radius: 5px; padding: 15px; margin: 10px 0;'>
-- ========= USING EXPLAIN =========
-- Shows query execution plan without running it
EXPLAIN SELECT * FROM users WHERE age > 25;

-- Result:
-- Seq Scan on users  (cost=0.00..145.00 rows=5000 width=45)
--   Filter: (age > 25)

-- ========= EXPLAIN ANALYZE =========
-- Actually RUNS query and shows timing
EXPLAIN ANALYZE 
SELECT * FROM users WHERE age > 25;

-- Result:
-- Seq Scan on users  (cost=0.00..145.00 rows=5000 width=45)
--   Filter: (age > 25)
-- Planning Time: 0.1 ms
-- Execution Time: 15.2 ms  â† Actual time!

-- ========= WITH INDEX =========
CREATE INDEX idx_users_age ON users(age);

EXPLAIN ANALYZE 
SELECT * FROM users WHERE age > 25;

-- Result:
-- Index Scan using idx_users_age on users
--   (cost=0.29..85.29 rows=5000 width=45)
--   Index Cond: (age > 25)
-- Planning Time: 0.3 ms
-- Execution Time: 3.1 ms  â† 5x faster!
</pre>

<h4>ğŸ“Š Understanding EXPLAIN Output</h4>
<table style="width: 100%; border-collapse: collapse; margin: 15px 0;">
    <tr style="background: #4A90E2; color: white;">
        <th style="padding: 10px; text-align: left;">Term</th>
        <th style="padding: 10px; text-align: left;">Meaning</th>
        <th style="padding: 10px; text-align: left;">Good</th>
        <th style="padding: 10px; text-align: left;">Bad</th>
    </tr>
    <tr style="background: #f8f9fa;">
        <td style="padding: 8px; border: 1px solid #ddd;"><b>Seq Scan</b></td>
        <td style="padding: 8px; border: 1px solid #ddd;">Reads entire table</td>
        <td style="padding: 8px; border: 1px solid #ddd;">Small tables</td>
        <td style="padding: 8px; border: 1px solid #ddd;">Large tables</td>
    </tr>
    <tr style="background: white;">
        <td style="padding: 8px; border: 1px solid #ddd;"><b>Index Scan</b></td>
        <td style="padding: 8px; border: 1px solid #ddd;">Uses index</td>
        <td style="padding: 8px; border: 1px solid #ddd;">Selective queries</td>
        <td style="padding: 8px; border: 1px solid #ddd;">Returns many rows</td>
    </tr>
    <tr style="background: #f8f9fa;">
        <td style="padding: 8px; border: 1px solid #ddd;"><b>Bitmap Scan</b></td>
        <td style="padding: 8px; border: 1px solid #ddd;">Multiple indexes</td>
        <td style="padding: 8px; border: 1px solid #ddd;">Complex conditions</td>
        <td style="padding: 8px; border: 1px solid #ddd;">Memory intensive</td>
    </tr>
    <tr style="background: white;">
        <td style="padding: 8px; border: 1px solid #ddd;"><b>Hash Join</b></td>
        <td style="padding: 8px; border: 1px solid #ddd;">Joins via hash table</td>
        <td style="padding: 8px; border: 1px solid #ddd;">Large joins</td>
        <td style="padding: 8px; border: 1px solid #ddd;">Memory intensive</td>
    </tr>
    <tr style="background: #f8f9fa;">
        <td style="padding: 8px; border: 1px solid #ddd;"><b>Nested Loop</b></td>
        <td style="padding: 8px; border: 1px solid #ddd;">Loop through rows</td>
        <td style="padding: 8px; border: 1px solid #ddd;">Small datasets</td>
        <td style="padding: 8px; border: 1px solid #ddd;">Large datasets</td>
    </tr>
</table>
</div>

<h3>Common Optimization Patterns</h3>
<div style="background-color: #e8f5e8; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h4>ğŸ’¡ From Slow to Fast: Query Transformations</h4>
    
<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 15px;">
<pre style='background-color: #f1f1f1; border-radius: 5px; padding: 10px;'>
-- ========= PATTERN 1: Avoid SELECT * =========

-- SLOW: Gets ALL columns
SELECT * FROM products 
WHERE category = 'electronics';

-- FAST: Only needed columns
SELECT product_id, name, price 
FROM products 
WHERE category = 'electronics';

-- Why faster?
-- 1. Less data transferred
-- 2. Might use covering index
-- 3. Index-only scan possible
</pre>

<pre style='background-color: #f1f1f1; border-radius: 5px; padding: 10px;'>
-- ========= PATTERN 2: LIMIT Early =========

-- SLOW: Processes ALL, then limits
SELECT * FROM orders 
ORDER BY order_date DESC 
LIMIT 10;

-- FAST: Uses index, stops early
CREATE INDEX idx_orders_date 
ON orders(order_date DESC);

SELECT * FROM orders 
ORDER BY order_date DESC 
LIMIT 10;

-- Why faster?
-- Index already sorted!
-- Database reads 10 rows, not all
</pre>
</div>

<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 15px;">
<pre style='background-color: #36454f; color: #fff; border-radius: 5px; padding: 10px;'>
-- ========= PATTERN 3: Avoid Functions on Indexed Columns =========

-- SLOW: Can't use index on "email"
SELECT * FROM users 
WHERE LOWER(email) = 'alice@example.com';

-- FAST: Use function-based index
CREATE INDEX idx_email_lower 
ON users(LOWER(email));

SELECT * FROM users 
WHERE LOWER(email) = 'alice@example.com';

-- OR: Store lowercase version
ALTER TABLE users 
ADD COLUMN email_lower VARCHAR(255);

CREATE INDEX idx_email_lower 
ON users(email_lower);
</pre>

<pre style='background-color: #36454f; color: #fff; border-radius: 5px; padding: 10px;'>
-- ========= PATTERN 4: UNION vs UNION ALL =========

-- SLOW: Removes duplicates (expensive!)
SELECT customer_id FROM orders_2023
UNION
SELECT customer_id FROM orders_2024;

-- FAST: Keeps duplicates (if OK)
SELECT customer_id FROM orders_2023
UNION ALL
SELECT customer_id FROM orders_2024;

-- Why faster?
-- UNION: Sort + remove duplicates
-- UNION ALL: Just concatenate
-- Use UNION ALL unless you NEED unique
</pre>
</div>

<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 15px;">
<pre style='background-color: #f1f1f1; border-radius: 5px; padding: 10px;'>
-- ========= PATTERN 5: EXISTS vs COUNT =========

-- SLOW: Counts ALL matching rows
SELECT * FROM users u
WHERE (
    SELECT COUNT(*) 
    FROM orders o 
    WHERE o.user_id = u.user_id
) > 5;

-- FAST: Stops at first match
SELECT * FROM users u
WHERE EXISTS (
    SELECT 1 
    FROM orders o 
    WHERE o.user_id = u.user_id
    LIMIT 6  -- Find 6, return if exists
);

-- Why faster?
-- EXISTS stops at first match
-- COUNT processes ALL matches
</pre>

<pre style='background-color: #f1f1f1; border-radius: 5px; padding: 10px;'>
-- ========= PATTERN 6: JOIN Order Matters =========

-- SLOW: Large table first
SELECT * 
FROM huge_table h  -- 10M rows
JOIN small_table s -- 100 rows
    ON h.id = s.huge_id;

-- FAST: Small table first
SELECT * 
FROM small_table s  -- 100 rows
JOIN huge_table h   -- 10M rows
    ON s.huge_id = h.id;

-- Why faster?
-- Database processes smaller result set first
-- Less memory, fewer comparisons
</pre>
</div>
</div>

<h3>Indexing Strategy & Best Practices</h3>
<div style="background-color: #f0f8ff; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h4>ğŸ¯ When to Index (and When NOT to!)</h4>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 15px 0;">
        <div style="background: white; padding: 15px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
            <h5 style="color: #4CAF50;">âœ… DO Index These:</h5>
            <ul>
                <li><b>Primary Keys</b> (auto-indexed)</li>
                <li><b>Foreign Keys</b> (speeds up JOINs)</li>
                <li><b>Columns in WHERE clauses</b></li>
                <li><b>Columns in ORDER BY</b></li>
                <li><b>Columns in GROUP BY</b></li>
                <li><b>Columns with UNIQUE constraints</b></li>
                <li><b>Frequently searched columns</b></li>
                <li><b>Join columns</b> (both sides)</li>
            </ul>
        </div>
        
        <div style="background: white; padding: 15px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
            <h5 style="color: #f44336;">âŒ AVOID Indexing These:</h5>
            <ul>
                <li><b>Small tables</b> (< 1000 rows)</li>
                <li><b>Columns rarely queried</b></li>
                <li><b>Columns updated frequently</b></li>
                <li><b>Boolean columns</b> (few values)</li>
                <li><b>All columns</b> (over-indexing)</li>
                <li><b>Tables with heavy writes</b></li>
                <li><b>Text/BLOB columns</b> (use full-text)</li>
                <li><b>Columns with NULL mostly</b></li>
            </ul>
        </div>
    </div>
    
    <h4>ğŸ“Š The Index Cost-Benefit Analysis</h4>
    <table style="width: 100%; border-collapse: collapse; margin: 15px 0;">
        <tr style="background: #4A90E2; color: white;">
            <th style="padding: 10px; text-align: left;">Operation</th>
            <th style="padding: 10px; text-align: left;">Without Index</th>
            <th style="padding: 10px; text-align: left;">With Index</th>
            <th style="padding: 10px; text-align: left;">Trade-off</th>
        </tr>
        <tr style="background: #f8f9fa;">
            <td style="padding: 8px; border: 1px solid #ddd;"><b>SELECT</b></td>
            <td style="padding: 8px; border: 1px solid #ddd;">Slow (scan all)</td>
            <td style="padding: 8px; border: 1px solid #ddd;">Fast (use index)</td>
            <td style="padding: 8px; border: 1px solid #ddd;">ğŸ‘ Big win</td>
        </tr>
        <tr style="background: white;">
            <td style="padding: 8px; border: 1px solid #ddd;"><b>INSERT</b></td>
            <td style="padding: 8px; border: 1px solid #ddd;">Fast (just add)</td>
            <td style="padding: 8px; border: 1px solid #ddd;">Slower (update index)</td>
            <td style="padding: 8px; border: 1px solid #ddd;">ğŸ‘ Small penalty</td>
        </tr>
        <tr style="background: #f8f9fa;">
            <td style="padding: 8px; border: 1px solid #ddd;"><b>UPDATE</b></td>
            <td style="padding: 8px; border: 1px solid #ddd;">Fast if no WHERE</td>
            <td style="padding: 8px; border: 1px solid #ddd;">Slow (update index)</td>
            <td style="padding: 8px; border: 1px solid #ddd;">ğŸ‘ Medium penalty</td>
        </tr>
        <tr style="background: white;">
            <td style="padding: 8px; border: 1px solid #ddd;"><b>DELETE</b></td>
            <td style="padding: 8px; border: 1px solid #ddd;">Fast if no WHERE</td>
            <td style="padding: 8px; border: 1px solid #ddd;">Slow (update index)</td>
            <td style="padding: 8px; border: 1px solid #ddd;">ğŸ‘ Medium penalty</td>
        </tr>
        <tr style="background: #f8f9fa;">
            <td style="padding: 8px; border: 1px solid #ddd;"><b>Storage</b></td>
            <td style="padding: 8px; border: 1px solid #ddd;">Less space</td>
            <td style="padding: 8px; border: 1px solid #ddd;">More space (+10-30%)</td>
            <td style="padding: 8px; border: 1px solid #ddd;">ğŸ‘ Cost of speed</td>
        </tr>
    </table>
</div>

<h3>Today's Hands-On Exercises</h3>
<div style="background-color: #fff0e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <b>Exercise 1: Performance Detective (60 minutes)</b>
    <p>Given a slow database, identify and fix performance issues:</p>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 15px 0;">
        <div>
            <b>Slow Queries to Fix:</b>
            <ol>
                <li>User search by partial name (LIKE '%john%')</li>
                <li>Monthly sales report with multiple JOINs</li>
                <li>Finding duplicate email addresses</li>
                <li>Pagination of large result sets</li>
                <li>Real-time analytics dashboard</li>
            </ol>
        </div>
        
        <div>
            <b>Tools to Use:</b>
            <ul>
                <li>EXPLAIN ANALYZE on each query</li>
                <li>Identify missing indexes</li>
                <li>Rewrite queries for optimization</li>
                <li>Test before/after performance</li>
                <li>Measure query execution time</li>
            </ul>
        </div>
    </div>
    
    <b>Exercise 2: Index Design Challenge (60 minutes)</b>
    <p>Design optimal indexes for these scenarios:</p>
    
    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin: 15px 0;">
        <div style="background: #f8f9fa; padding: 10px; border-radius: 5px;">
            <b>E-Commerce Site</b>
            <ul>
                <li>Products: search by category, price range</li>
                <li>Orders: filter by date, customer, status</li>
                <li>Users: login by email, search by name</li>
            </ul>
        </div>
        
        <div style="background: #f8f9fa; padding: 10px; border-radius: 5px;">
            <b>Social Media App</b>
            <ul>
                <li>Posts: by user, date, hashtags</li>
                <li>Friends: mutual connections</li>
                <li>Messages: conversations, unread</li>
            </ul>
        </div>
        
        <div style="background: #f8f9fa; padding: 10px; border-radius: 5px;">
            <b>School System</b>
            <ul>
                <li>Students: by grade, class, name</li>
                <li>Grades: by student, subject, term</li>
                <li>Attendance: by date, student, status</li>
            </ul>
        </div>
    </div>
    
    <b>Exercise 3: Query Optimization Race (30 minutes)</b>
    <p>Take 5 slow queries and make them FAST:</p>
    <ul>
        <li>Start with unoptimized queries</li>
        <li>Use EXPLAIN to find bottlenecks</li>
        <li>Add appropriate indexes</li>
        <li>Rewrite queries efficiently</li>
        <li>Measure improvement percentage</li>
        <li>Winner: Largest performance gain!</li>
    </ul>
</div>

<h3>Homework Assignment</h3>
<div style="background-color: #e8f5e8; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <b>Build a "Database Performance Audit Tool"</b>
    
    <b>Requirements:</b>
    <ol>
        <li><b>Identify Slow Queries:</b>
            <ul>
                <li>Parse database logs for slow queries (>100ms)</li>
                <li>Extract query patterns (ignore parameters)</li>
                <li>Rank by frequency and slowness</li>
            </ul>
        </li>
        
        <li><b>Analyze Current Indexes:</b>
            <ul>
                <li>List all indexes with size and last used</li>
                <li>Identify unused indexes (write overhead!)</li>
                <li>Find missing indexes (suggest creations)</li>
                <li>Detect duplicate/redundant indexes</li>
            </ul>
        </li>
        
        <li><b>Generate Optimization Report:</b>
            <ul>
                <li>For each slow query: EXPLAIN output</li>
                <li>Recommended indexes (CREATE statements)</li>
                <li>Query rewrite suggestions</li>
                <li>Estimated performance improvement</li>
                <li>Index maintenance recommendations</li>
            </ul>
        </li>
        
        <li><b>Create Monitoring Dashboard:</b>
            <ul>
                <li>Query response times over time</li>
                <li>Index usage statistics</li>
                <li>Table growth predictions</li>
                <li>Performance alerts system</li>
            </ul>
        </li>
    </ol>
    
    <b>Bonus Challenges:</b>
    <ul>
        <li>Predict which new indexes will help most</li>
        <li>Calculate index storage cost vs performance benefit</li>
        <li>Simulate workload with/without indexes</li>
        <li>Auto-generate index creation scripts</li>
        <li>Integrate with CI/CD pipeline to catch slow queries early</li>
    </ul>
    
    <b>Tools to Build With:</b>
    <pre style="background: #f5f5f5; padding: 10px; margin: 10px 0;">
Python + PostgreSQL:
- psycopg2 for database connection
- EXPLAIN ANALYZE output parsing
- Query pattern matching
- Report generation (PDF/HTML)
- Visualization with matplotlib

Sample Output Report:
================================
DATABASE PERFORMANCE AUDIT
Date: 2024-03-20
================================

TOP 5 SLOW QUERIES:
1. User search: 1200ms â†’ Add index on (last_name, first_name)
2. Sales report: 850ms â†’ Add composite index on (date, region)
3. Order history: 720ms â†’ Partition orders table by year
4. Product filter: 650ms â†’ Add GIN index on tags array
5. Analytics query: 580ms â†’ Create materialized view

INDEX ANALYSIS:
- 15 indexes total (4.2GB)
- 3 unused indexes (remove to save 1.1GB)
- 5 missing indexes (estimated 75% speedup)
- 2 duplicate indexes (remove redundant)

RECOMMENDATIONS:
1. CREATE INDEX idx_users_name ON users(last_name, first_name);
2. DROP INDEX idx_old_unused; (saves 450MB)
3. Partition orders table by order_date
4. VACUUM ANALYZE customers; (update statistics)
================================
    </pre>
</div>

<h3>Key Learning Points:</h3>
<ol>
    <li><b>Index Fundamentals:</b> How B-tree, Hash, and Full-text indexes work</li>
    <li><b>Performance Analysis:</b> Using EXPLAIN to understand query execution</li>
    <li><b>Optimization Patterns:</b> Common transformations from slow to fast</li>
    <li><b>Index Strategy:</b> When to index (and when not to!)</li>
    <li><b>Trade-offs:</b> Read speed vs write speed, storage vs performance</li>
    <li><b>Monitoring:</b> Continuous performance tracking and optimization</li>
</ol>

<div style="background-color: #fff0e6; padding: 15px; margin: 20px 0; border-radius: 5px;">
    <h3>ğŸ’¡ Database Optimization Best Practices:</h3>
    <ul>
        <li><b>Measure First:</b> Don't optimize what you haven't measured</li>
        <li><b>Start with WHERE/JOIN:</b> Index columns used in WHERE and JOIN first</li>
        <li><b>Composite Index Order:</b> Put most selective columns first in composite indexes</li>
        <li><b>Covering Indexes:</b> Include all SELECT columns in index when possible</li>
        <li><b>Avoid Over-Indexing:</b> Each index slows writes and uses storage</li>
        <li><b>Regular Maintenance:</b> VACUUM, ANALYZE, REINDEX regularly</li>
        <li><b>Monitor Growth:</b> Watch table and index sizes over time</li>
        <li><b>Test with Real Data:</b> Optimization results vary with data distribution</li>
        <li><b>Use Query Plans:</b> Always check EXPLAIN for large queries</li>
        <li><b>Consider Partitioning:</b> For very large tables (>100M rows)</li>
    </ul>
</div>

<h3>Visual Summary: The Optimization Journey</h3>
<div style="background: white; padding: 20px; border-radius: 10px; border: 2px solid #4A90E2;">
    <div style="text-align: center; margin: 20px 0;">
        <div style="display: inline-block; text-align: left;">
            <div style="font-weight: bold; color: #4A90E2; margin-bottom: 10px;">ğŸš€ Optimization Roadmap:</div>
            <div style="margin-left: 20px;">
                <div>1. ğŸ” <b>Identify</b> slow queries (>100ms)</div>
                <div>2. ğŸ“Š <b>Analyze</b> with EXPLAIN ANALYZE</div>
                <div>3. ğŸ¯ <b>Target</b> biggest bottlenecks first</div>
                <div>4. ğŸŒ² <b>Add</b> appropriate indexes</div>
                <div>5. âœï¸ <b>Rewrite</b> inefficient queries</div>
                <div>6. ğŸ“ˆ <b>Measure</b> improvement</div>
                <div>7. ğŸ”„ <b>Monitor</b> continuously</div>
                <div>8. ğŸ§¹ <b>Maintain</b> regularly</div>
            </div>
        </div>
    </div>
    
    <div style="margin-top: 20px; padding: 15px; background: #f8f9fa; border-radius: 5px;">
        <p><b>ğŸ“ Pro Tip:</b> The 80/20 rule applies: 20% of indexes solve 80% of performance problems!</p>
        <p><b>âš¡ Quick Wins:</b> Always index foreign keys and frequently queried columns first.</p>
        <p><b>ğŸ“š Remember:</b> Indexes are like books in a library - helpful when you know what you're looking for, but too many make the library hard to manage!</p>
    </div>
</div>
`
            },

            "6-21": {
                icon: "fa-code",
                title: "Python + SQL: Database Connections",
                html: `<h1>Month 6, Week 21: Python + SQL - Database Connections</h1>
<p>Today we bridge two worlds! Learn how Python can talk to databases, execute SQL queries, and build dynamic applications with real data.</p>

<div class="analogy-box">
    <b>Analogy: The Bilingual Translator ğŸŒ</b><br/>
    
    Python: English speaker (application logic)<br/>
    SQL: French speaker (database language)<br/>
    Database Driver: Professional translator<br/>
    Connection: Phone line between them<br/>
    Cursor: The conversation<br/>
    Query: Question asked in French<br/>
    Result: Answer translated back to English<br/>
    Transaction: Important conversation with notes<br/>
</div>

<h3>The Python-SQL Communication Pipeline</h3>
<div style="background-color: #f0f8ff; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h4>ğŸ“Š How Python Talks to Databases</h4>
    
    <div style="text-align: center; margin: 20px 0;">
        <div style="display: inline-block; padding: 20px; background: white; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
            <div style="color: #4A90E2; font-weight: bold; margin-bottom: 10px;">ğŸš€ Python-SQL Communication Flow</div>
            <div style="display: flex; justify-content: center; align-items: center; gap: 30px;">
                <div style="text-align: center;">
                    <div style="background: #FF6B6B; color: white; padding: 15px; border-radius: 50%; width: 60px; height: 60px; display: flex; align-items: center; justify-content: center; margin: 0 auto 10px;">ğŸ</div>
                    <div>Python App</div>
                </div>
                <div style="font-size: 24px;">â†’</div>
                <div style="text-align: center;">
                    <div style="background: #4ECDC4; color: white; padding: 15px; border-radius: 50%; width: 60px; height: 60px; display: flex; align-items: center; justify-content: center; margin: 0 auto 10px;">ğŸ”Œ</div>
                    <div>Connection</div>
                </div>
                <div style="font-size: 24px;">â†’</div>
                <div style="text-align: center;">
                    <div style="background: #45B7D1; color: white; padding: 15px; border-radius: 50%; width: 60px; height: 60px; display: flex; align-items: center; justify-content: center; margin: 0 auto 10px;">ğŸ¯</div>
                    <div>Cursor</div>
                </div>
                <div style="font-size: 24px;">â†’</div>
                <div style="text-align: center;">
                    <div style="background: #96CEB4; color: white; padding: 15px; border-radius: 50%; width: 60px; height: 60px; display: flex; align-items: center; justify-content: center; margin: 0 auto 10px;">ğŸ—ƒï¸</div>
                    <div>Database</div>
                </div>
                <div style="font-size: 24px;">â†’</div>
                <div style="text-align: center;">
                    <div style="background: #FFEAA7; color: #333; padding: 15px; border-radius: 50%; width: 60px; height: 60px; display: flex; align-items: center; justify-content: center; margin: 0 auto 10px;">ğŸ“Š</div>
                    <div>Results</div>
                </div>
            </div>
        </div>
    </div>
    
    <div style="margin-top: 20px; padding: 15px; background: #fff3cd; border-radius: 5px;">
        <h5>ğŸ¯ Key Concepts:</h5>
        <p><b>Database Driver:</b> Special Python library that knows how to talk to specific databases</p>
        <p><b>Connection:</b> Network link to database (like logging into a website)</p>
        <p><b>Cursor:</b> "Pointer" that moves through query results (like video game controller)</p>
        <p><b>Transaction:</b> Group of operations that succeed or fail together (all-or-nothing)</p>
    </div>
</div>

<h3>Setting Up Database Connections</h3>
<b>Connecting to Different Databases from Python:</b>
<div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">

<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
<pre style='background-color: #36454f; color: #fff; border-radius: 5px; padding: 10px;'>
# ========= INSTALL DATABASE DRIVERS =========
# Choose based on your database:

# PostgreSQL
pip install psycopg2
# or for easier installation:
pip install psycopg2-binary

# MySQL
pip install mysql-connector-python
# or alternative:
pip install pymysql

# SQLite (built into Python!)
import sqlite3  # No installation needed!

# SQL Server
pip install pyodbc
# or:
pip install pymssql

# MongoDB (NoSQL)
pip install pymongo

# Check installation:
import psycopg2
print("PostgreSQL driver ready!")
</pre>

<pre style='background-color: #36454f; color: #fff; border-radius: 5px; padding: 10px;'>
# ========= CONNECTION PARAMETERS =========
# Different databases need different info:

# PostgreSQL Connection String
pg_config = {
    'host': 'localhost',      # Where database lives
    'database': 'school_db',  # Database name
    'user': 'python_user',    # Username
    'password': 'secret123',  # Password
    'port': 5432              # Door number
}

# MySQL Connection String
mysql_config = {
    'host': 'localhost',
    'database': 'school_db',
    'user': 'root',
    'password': 'secret123',
    'port': 3306
}

# SQLite (file-based, no server)
sqlite_config = {
    'database': 'school.db'  # Just a filename!
}

# Production vs Development
dev_config = {
    'host': 'localhost',
    'database': 'dev_db',
    'user': 'dev_user'
}

prod_config = {
    'host': 'db.production.com',
    'database': 'prod_db',
    'user': 'prod_user',
    'password': 'very_secret',
    'sslmode': 'require'  # Secure connection
}
</pre>
</div>

<h4>ğŸ”Œ Making Your First Connection</h4>
<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 15px;">
<pre style='background-color: #f1f1f1; border-radius: 5px; padding: 10px;'>
# ========= POSTGRESQL CONNECTION =========
import psycopg2
from psycopg2 import OperationalError

def connect_to_postgres():
    try:
        # Step 1: Create connection
        connection = psycopg2.connect(
            host="localhost",
            database="school",
            user="teacher",
            password="edu2024",
            port=5432
        )
        
        print("âœ… Connected to PostgreSQL!")
        print(f"Database: {connection.info.dbname}")
        print(f"Server version: {connection.info.server_version}")
        
        # Step 2: Create cursor
        cursor = connection.cursor()
        
        # Step 3: Test connection
        cursor.execute("SELECT version();")
        db_version = cursor.fetchone()
        print(f"PostgreSQL version: {db_version[0]}")
        
        return connection, cursor
        
    except OperationalError as e:
        print(f"âŒ Connection failed: {e}")
        return None, None

# Use the connection
conn, cur = connect_to_postgres()
if conn:
    # Do database work here...
    cur.close()
    conn.close()
    print("ğŸ”Œ Connection closed")
</pre>

<pre style='background-color: #f1f1f1; border-radius: 5px; padding: 10px;'>
# ========= SQLITE CONNECTION =========
import sqlite3
import os

def connect_to_sqlite(db_file="school.db"):
    try:
        # Check if database file exists
        file_exists = os.path.exists(db_file)
        
        # Connect (creates file if doesn't exist)
        connection = sqlite3.connect(db_file)
        
        # Enable foreign keys
        connection.execute("PRAGMA foreign_keys = ON")
        
        print("âœ… Connected to SQLite!")
        print(f"Database file: {db_file}")
        print(f"File existed: {file_exists}")
        
        cursor = connection.cursor()
        
        # Get SQLite version
        cursor.execute("SELECT sqlite_version();")
        version = cursor.fetchone()[0]
        print(f"SQLite version: {version}")
        
        return connection, cursor
        
    except sqlite3.Error as e:
        print(f"âŒ SQLite error: {e}")
        return None, None

# Use connection
conn, cur = connect_to_sqlite()
if conn:
    cur.close()
    conn.close()
</pre>
</div>

<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 15px;">
<pre style='background-color: #36454f; color: #fff; border-radius: 5px; padding: 10px;'>
# ========= CONNECTION WITH CONTEXT MANAGERS =========
# Safe way that auto-closes resources

import psycopg2
from contextlib import closing

# Method 1: Using 'with' statement
def get_student_count():
    try:
        with psycopg2.connect(
            host="localhost",
            database="school",
            user="teacher",
            password="edu2024"
        ) as conn:
            with conn.cursor() as cur:
                cur.execute("SELECT COUNT(*) FROM students;")
                count = cur.fetchone()[0]
                print(f"Total students: {count}")
                return count
        # Connection auto-closed here!
    except Exception as e:
        print(f"Error: {e}")
        return 0

# Method 2: Using contextlib.closing
from contextlib import closing

def backup_database():
    conn = psycopg2.connect(
        host="localhost",
        database="school",
        user="teacher"
    )
    
    with closing(conn.cursor()) as cur:
        cur.execute("SELECT * FROM students;")
        students = cur.fetchall()
        
        # Save to file
        with open('backup.csv', 'w') as f:
            for student in students:
                f.write(','.join(map(str, student)) + '')
    
    conn.close()
</pre>

<pre style='background-color: #36454f; color: #fff; border-radius: 5px; padding: 10px;'>
# ========= CONNECTION POOLING =========
# For web apps with many users

from psycopg2 import pool

# Create connection pool
connection_pool = psycopg2.pool.SimpleConnectionPool(
    minconn=1,      # Minimum connections
    maxconn=10,     # Maximum connections
    host="localhost",
    database="school",
    user="teacher",
    password="edu2024"
)

def get_student_from_pool(student_id):
    # Get connection from pool
    conn = connection_pool.getconn()
    
    try:
        with conn.cursor() as cur:
            cur.execute(
                "SELECT name, grade FROM students WHERE id = %s",
                (student_id,)
            )
            student = cur.fetchone()
            return student
    finally:
        # Always return connection to pool
        connection_pool.putconn(conn)

# Use the pool
student = get_student_from_pool(123)
print(f"Student: {student}")

# Close all connections when done
connection_pool.closeall()
</pre>
</div>
</div>

<h3>Executing SQL Queries from Python</h3>
<div style="background-color: #fff0e6; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h4>ğŸ”§ The Cursor: Your Database Controller</h4>
    
<pre style='background-color: #36454f; color: #fff; border-radius: 5px; padding: 15px; margin: 10px 0;'>
# ========= CURSOR METHODS =========
import sqlite3

conn = sqlite3.connect(":memory:")  # In-memory database
cursor = conn.cursor()

# Create a test table
cursor.execute("""
    CREATE TABLE students (
        id INTEGER PRIMARY KEY,
        name TEXT NOT NULL,
        age INTEGER,
        grade TEXT
    )
""")

# ========= INSERT DATA =========
# Method 1: Single insert
cursor.execute(
    "INSERT INTO students (name, age, grade) VALUES (?, ?, ?)",
    ("Alice Johnson", 15, "10th")
)

# Method 2: Multiple inserts
students_data = [
    ("Bob Smith", 16, "11th"),
    ("Charlie Brown", 14, "9th"),
    ("Diana Prince", 17, "12th")
]

cursor.executemany(
    "INSERT INTO students (name, age, grade) VALUES (?, ?, ?)",
    students_data
)

# ========= SELECT DATA =========
# Method 1: fetchone() - get one row
cursor.execute("SELECT * FROM students WHERE grade = '10th'")
row = cursor.fetchone()
print(f"First 10th grader: {row}")

# Method 2: fetchall() - get all rows
cursor.execute("SELECT * FROM students ORDER BY name")
all_students = cursor.fetchall()
print(f"All students ({len(all_students)} total):")
for student in all_students:
    print(f"  {student}")

# Method 3: fetchmany() - get batch
cursor.execute("SELECT * FROM students")
first_three = cursor.fetchmany(3)
print(f"First 3: {first_three}")

# Method 4: Iterate directly
cursor.execute("SELECT name, grade FROM students WHERE age >= 16")
for name, grade in cursor:
    print(f"{name} is in {grade}")

# ========= UPDATE DATA =========
cursor.execute(
    "UPDATE students SET grade = '11th' WHERE name = ?",
    ("Alice Johnson",)
)
print(f"Rows updated: {cursor.rowcount}")

# ========= DELETE DATA =========
cursor.execute("DELETE FROM students WHERE age < ?", (15,))
print(f"Rows deleted: {cursor.rowcount}")

# Don't forget to commit!
conn.commit()
conn.close()
</pre>

<h4>ğŸ“Š Fetching Data in Different Formats</h4>
<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 15px;">
<pre style='background-color: #f1f1f1; border-radius: 5px; padding: 10px;'>
# ========= DICTIONARY CURSOR =========
# Get results as dictionaries (easier to use!)

import psycopg2
from psycopg2.extras import RealDictCursor

conn = psycopg2.connect(
    host="localhost",
    database="school",
    user="teacher"
)

# Create dictionary cursor
dict_cursor = conn.cursor(cursor_factory=RealDictCursor)

dict_cursor.execute("""
    SELECT id, name, age, grade 
    FROM students 
    WHERE grade = '10th'
""")

# Results as dictionaries
students = dict_cursor.fetchall()
for student in students:
    print(f"ID: {student['id']}")
    print(f"Name: {student['name']}")
    print(f"Age: {student['age']}")
    # Much easier than student[0], student[1]!

# Single row as dict
dict_cursor.execute(
    "SELECT * FROM students WHERE id = %s", 
    (1,)
)
student = dict_cursor.fetchone()
if student:
    print(f"Student email: {student.get('email', 'No email')}")
</pre>

<pre style='background-color: #f1f1f1; border-radius: 5px; padding: 10px;'>
# ========= PANDAS DATAFRAME =========
# Convert SQL results to DataFrame (for analysis)

import pandas as pd
import psycopg2

def get_dataframe_from_query(query, params=None):
    conn = psycopg2.connect(
        host="localhost",
        database="school",
        user="teacher"
    )
    
    # Direct to DataFrame
    df = pd.read_sql_query(query, conn, params=params)
    
    conn.close()
    return df

# Get all students
students_df = get_dataframe_from_query("SELECT * FROM students")
print(students_df.head())  # First 5 rows
print(students_df.info())  # Column info
print(students_df.describe())  # Statistics

# Filtered query with parameters
honor_roll = get_dataframe_from_query("""
    SELECT name, grade, gpa 
    FROM students 
    WHERE gpa >= %s AND grade = %s
""", params=(3.5, '12th'))

print(f"Honor roll students: {len(honor_roll)}")

# Use pandas for analysis
average_gpa = students_df['gpa'].mean()
top_student = students_df.loc[students_df['gpa'].idxmax()]
print(f"Average GPA: {average_gpa:.2f}")
print(f"Top student: {top_student['name']} ({top_student['gpa']})")
</pre>
</div>
</div>

<h3>Parameterized Queries & Security</h3>
<div style="background-color: #e8f5e8; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h4>ğŸ›¡ï¸ SQL Injection Protection</h4>
    
<pre style='background-color: #f44336; color: white; border-radius: 5px; padding: 15px; margin: 10px 0;'>
# =========âŒ DANGER: SQL INJECTION EXAMPLE =========
# NEVER do this!

user_input = "'; DROP TABLE students; --"
query = f"SELECT * FROM users WHERE name = '{user_input}'"

# This becomes:
# SELECT * FROM users WHERE name = ''; DROP TABLE students; --'
# ğŸ’€ Deletes entire students table!

# Another dangerous example:
user_id = "1 OR 1=1"
query = f"SELECT * FROM users WHERE id = {user_id}"
# Returns ALL users, not just one!
</pre>

<pre style='background-color: #4CAF50; color: white; border-radius: 5px; padding: 15px; margin: 10px 0;'>
# =========âœ… SAFE: PARAMETERIZED QUERIES =========
# ALWAYS do this!

import psycopg2

def get_student_safely(student_id, grade=None):
    conn = psycopg2.connect(
        host="localhost",
        database="school",
        user="teacher"
    )
    
    cur = conn.cursor()
    
    if grade:
        # Multiple parameters
        cur.execute("""
            SELECT * FROM students 
            WHERE id = %s AND grade = %s
        """, (student_id, grade))
    else:
        # Single parameter
        cur.execute(
            "SELECT * FROM students WHERE id = %s",
            (student_id,)  # Note the comma for tuple!
        )
    
    student = cur.fetchone()
    conn.close()
    return student

# Safe from SQL injection!
safe_result = get_student_safely(123)
dangerous_input = "1; DROP TABLE students;"
still_safe = get_student_safely(dangerous_input)  # No harm!

print("âœ… Parameterized queries protect your database!")
</pre>

<h4>ğŸ” Different Parameter Styles</h4>
<table style="width: 100%; border-collapse: collapse; margin: 15px 0;">
    <tr style="background: #4A90E2; color: white;">
        <th style="padding: 10px; text-align: left;">Database</th>
        <th style="padding: 10px; text-align: left;">Parameter Style</th>
        <th style="padding: 10px; text-align: left;">Example</th>
        <th style="padding: 10px; text-align: left;">Notes</th>
    </tr>
    <tr style="background: #f8f9fa;">
        <td style="padding: 8px; border: 1px solid #ddd;"><b>PostgreSQL</b></td>
        <td style="padding: 8px; border: 1px solid #ddd;">%s</td>
        <td style="padding: 8px; border: 1px solid #ddd;">WHERE id = %s</td>
        <td style="padding: 8px; border: 1px solid #ddd;">Note: %s even for numbers!</td>
    </tr>
    <tr style="background: white;">
        <td style="padding: 8px; border: 1px solid #ddd;"><b>SQLite</b></td>
        <td style="padding: 8px; border: 1px solid #ddd;">? or :name</td>
        <td style="padding: 8px; border: 1px solid #ddd;">WHERE id = ?</td>
        <td style="padding: 8px; border: 1px solid #ddd;">Simple question mark</td>
    </tr>
    <tr style="background: #f8f9fa;">
        <td style="padding: 8px; border: 1px solid #ddd;"><b>MySQL</b></td>
        <td style="padding: 8px; border: 1px solid #ddd;">%s</td>
        <td style="padding: 8px; border: 1px solid #ddd;">WHERE id = %s</td>
        <td style="padding: 8px; border: 1px solid #ddd;">Same as PostgreSQL</td>
    </tr>
    <tr style="background: white;">
        <td style="padding: 8px; border: 1px solid #ddd;"><b>SQL Server</b></td>
        <td style="padding: 8px; border: 1px solid #ddd;">? or @name</td>
        <td style="padding: 8px; border: 1px solid #ddd;">WHERE id = @student_id</td>
        <td style="padding: 8px; border: 1px solid #ddd;">Named parameters</td>
    </tr>
</table>

<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 15px;">
<pre style='background-color: #36454f; color: #fff; border-radius: 5px; padding: 10px;'>
# ========= NAMED PARAMETERS =========
# More readable for complex queries

import sqlite3

conn = sqlite3.connect("school.db")
conn.row_factory = sqlite3.Row  # Access columns by name
cur = conn.cursor()

# Using named parameters (sqlite3)
cur.execute("""
    INSERT INTO students (name, age, grade, gpa)
    VALUES (:name, :age, :grade, :gpa)
""", {
    'name': 'Emma Watson',
    'age': 16,
    'grade': '11th',
    'gpa': 3.9
})

# Complex query with multiple named params
search_params = {
    'min_gpa': 3.5,
    'min_age': 15,
    'grade_level': '11th'
}

cur.execute("""
    SELECT name, gpa 
    FROM students 
    WHERE gpa >= :min_gpa 
      AND age >= :min_age 
      AND grade = :grade_level
    ORDER BY gpa DESC
""", search_params)

honor_students = cur.fetchall()
for student in honor_students:
    print(f"{student['name']}: GPA {student['gpa']}")
</pre>

<pre style='background-color: #36454f; color: #fff; border-radius: 5px; padding: 10px;'>
# ========= DYNAMIC QUERY BUILDING =========
# Safely build queries with variable conditions

def search_students(name=None, grade=None, min_gpa=None):
    conn = sqlite3.connect("school.db")
    cur = conn.cursor()
    
    # Start with base query
    query = "SELECT * FROM students WHERE 1=1"
    params = []
    
    # Add conditions dynamically
    if name:
        query += " AND name LIKE ?"
        params.append(f"%{name}%")
    
    if grade:
        query += " AND grade = ?"
        params.append(grade)
    
    if min_gpa is not None:
        query += " AND gpa >= ?"
        params.append(min_gpa)
    
    # Add ordering
    query += " ORDER BY name"
    
    # Execute safely
    cur.execute(query, params)
    results = cur.fetchall()
    
    conn.close()
    return results

# Safe usage
print("Searching for 10th graders with GPA >= 3.0:")
students = search_students(grade="10th", min_gpa=3.0)
for student in students:
    print(f"  {student[1]} (GPA: {student[4]})")

# Still safe from SQL injection
dangerous_search = search_students(name="'; DROP TABLE students; --")
print(f"Found {len(dangerous_search)} students (no harm done!)")
</pre>
</div>
</div>

<h3>Today's Hands-On Exercises</h3>
<div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <b>Exercise 1: School Database Manager (60 minutes)</b>
    <p>Build a complete Python program to manage a school database:</p>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 15px 0;">
        <div>
            <b>Required Functions:</b>
            <ol>
                <li>Connect to PostgreSQL/SQLite database</li>
                <li>Create tables: students, teachers, classes, grades</li>
                <li>Add new students with validation</li>
                <li>Search students by name, grade, or GPA</li>
                <li>Update student information</li>
                <li>Generate report cards</li>
                <li>Calculate class averages</li>
                <li>Backup database to CSV</li>
            </ol>
        </div>
        
        <div>
            <b>Features to Implement:</b>
            <ul>
                <li>Parameterized queries for all user input</li>
                <li>Error handling for database operations</li>
                <li>Context managers for connections</li>
                <li>Dictionary cursors for easy data access</li>
                <li>Menu-driven interface</li>
                <li>Data validation before insertion</li>
            </ul>
        </div>
    </div>
    
    <b>Exercise 2: Library System with Python + SQL (60 minutes)</b>
    <p>Create a library management system:</p>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 15px 0;">
        <div>
            <b>Database Schema:</b>
            <ul>
                <li>Books (id, title, author, isbn, available)</li>
                <li>Members (id, name, email, membership_date)</li>
                <li>Loans (id, book_id, member_id, loan_date, return_date)</li>
                <li>Authors (id, name, nationality)</li>
            </ul>
        </div>
        
        <div>
            <b>Python Functions:</b>
            <ul>
                <li>Check out book to member</li>
                <li>Return book and calculate late fees</li>
                <li>Search books by title/author</li>
                <li>Find overdue books</li>
                <li>Member borrowing history</li>
                <li>Popular books report</li>
            </ul>
        </div>
    </div>
    
    <b>Exercise 3: SQL Injection Challenge (30 minutes)</b>
    <p>Practice secure coding:</p>
    <ul>
        <li>Create a vulnerable login system (for learning!)</li>
        <li>Try to hack it with SQL injection</li>
        <li>Now fix it with parameterized queries</li>
        <li>Test that same attacks no longer work</li>
        <li>Create a "security checklist" for database code</li>
    </ul>
</div>

<h3>Homework Assignment</h3>
<div style="background-color: #fff0e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <b>Build a "Student Information System (SIS)"</b>
    
    <b>Requirements:</b>
    <ol>
        <li><b>Database Design:</b>
            <ul>
                <li>Students table with personal info, contact, emergency contacts</li>
                <li>Courses table with subjects, teachers, schedules</li>
                <li>Enrollments table linking students to courses</li>
                <li>Grades table with assignments, exams, final grades</li>
                <li>Attendance table with daily records</li>
                <li>Teachers table with qualifications, subjects</li>
            </ul>
        </li>
        
        <li><b>Python Application:</b>
            <ul>
                <li>Command-line interface with menu system</li>
                <li>Student registration with data validation</li>
                <li>Course enrollment management</li>
                <li>Grade entry and calculation</li>
                <li>Attendance tracking</li>
                <li>Report generation (PDF/CSV)</li>
                <li>Search functionality across all tables</li>
            </ul>
        </li>
        
        <li><b>Security Features:</b>
            <ul>
                <li>All queries must use parameterization</li>
                <li>Input validation for all user data</li>
                <li>Password hashing for teacher logins</li>
                <li>Audit log of all changes</li>
                <li>Backup and restore functionality</li>
            </ul>
        </li>
        
        <li><b>Advanced Features:</b>
            <ul>
                <li>Connection pooling for multiple users</li>
                <li>Dictionary cursors for all queries</li>
                <li>Context managers for database connections</li>
                <li>Error handling with retry logic</li>
                <li>Performance monitoring</li>
                <li>Data export to Excel/Google Sheets</li>
            </ul>
        </li>
    </ol>
    
    <b>Sample Code Structure:</b>
    <pre style="background: #f5f5f5; padding: 10px; margin: 10px 0;">
sis/
â”œâ”€â”€ database/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ connection.py      # Database connection setup
â”‚   â”œâ”€â”€ models.py         # Table creation scripts
â”‚   â””â”€â”€ queries.py        # All SQL queries
â”œâ”€â”€ modules/
â”‚   â”œâ”€â”€ students.py       # Student management
â”‚   â”œâ”€â”€ courses.py        # Course management
â”‚   â”œâ”€â”€ grades.py         # Grade management
â”‚   â””â”€â”€ reports.py        # Report generation
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ validators.py     # Input validation
â”‚   â”œâ”€â”€ security.py       # SQL injection protection
â”‚   â””â”€â”€ backup.py         # Backup utilities
â”œâ”€â”€ config.py             # Configuration settings
â””â”€â”€ main.py              # Main application
    </pre>
    
    <b>Bonus Challenges:</b>
    <ul>
        <li>Add a web interface using Flask/Django</li>
        <li>Implement real-time notifications for low grades</li>
        <li>Create predictive analytics for at-risk students</li>
        <li>Build a parent portal with limited access</li>
        <li>Add photo storage for student IDs</li>
        <li>Implement full-text search for student records</li>
    </ul>
</div>

<h3>Key Learning Points:</h3>
<ol>
    <li><b>Database Connections:</b> How Python connects to different databases</li>
    <li><b>Cursor Management:</b> Using cursors to execute queries and fetch results</li>
    <li><b>Parameterized Queries:</b> Essential for security and performance</li>
    <li><b>Connection Pooling:</b> Managing multiple database connections efficiently</li>
    <li><b>Error Handling:</b> Properly handling database errors and connection issues</li>
    <li><b>Data Formats:</b> Working with results as tuples, dictionaries, or DataFrames</li>
</ol>

<div style="background-color: #e8f5e8; padding: 15px; margin: 20px 0; border-radius: 5px;">
    <h3>ğŸ’¡ Python + SQL Best Practices:</h3>
    <ul>
        <li><b>Always Use Parameterized Queries:</b> Never concatenate user input into SQL</li>
        <li><b>Close Connections:</b> Use context managers (with statement) to auto-close</li>
        <li><b>Handle Exceptions:</b> Database operations can fail - plan for it</li>
        <li><b>Use Connection Pooling:</b> For web apps with many concurrent users</li>
        <li><b>Validate Input:</b> Check data before sending to database</li>
        <li><b>Use Appropriate Data Types:</b> Match Python types to SQL types</li>
        <li><b>Test with Small Data First:</b> Before running on production database</li>
        <li><b>Monitor Performance:</b> Use EXPLAIN on slow queries called from Python</li>
        <li><b>Backup Regularly:</b> Automate database backups</li>
        <li><b>Document Your Queries:</b> Complex SQL in Python needs comments</li>
    </ul>
</div>

<h3>Visual Summary: The Python-SQL Bridge</h3>
<div style="background: white; padding: 20px; border-radius: 10px; border: 2px solid #4A90E2;">
    <div style="text-align: center; margin: 20px 0;">
        <div style="display: inline-block; text-align: left;">
            <div style="font-weight: bold; color: #4A90E2; margin-bottom: 10px;">ğŸŒ‰ The Python-SQL Bridge Checklist:</div>
            <div style="margin-left: 20px;">
                <div>1. ğŸ”Œ <b>Connect:</b> import driver â†’ create connection</div>
                <div>2. ğŸ¯ <b>Create Cursor:</b> connection.cursor()</div>
                <div>3. ğŸ›¡ï¸ <b>Parameterize:</b> cursor.execute(sql, params)</div>
                <div>4. ğŸ“¥ <b>Fetch:</b> fetchone(), fetchall(), or iterate</div>
                <div>5. âœ… <b>Commit:</b> connection.commit() for changes</div>
                <div>6. âŒ <b>Rollback:</b> connection.rollback() on errors</div>
                <div>7. ğŸ”’ <b>Close:</b> cursor.close() â†’ connection.close()</div>
            </div>
        </div>
    </div>
    
    <div style="margin-top: 20px; padding: 15px; background: #f8f9fa; border-radius: 5px;">
        <p><b>ğŸ“ Pro Tip:</b> Use SQLite for learning/testing, PostgreSQL for production!</p>
        <p><b>âš¡ Quick Win:</b> Dictionary cursors make your code much more readable than tuple indices.</p>
        <p><b>âš ï¸ Security Warning:</b> SQL injection is the #1 web security risk. ALWAYS use parameterized queries!</p>
        <p><b>ğŸ’¡ Remember:</b> Python + SQL is like peanut butter + jelly - separate they're good, together they're amazing!</p>
    </div>
</div>
`
            },
            "6-22": {
                icon: "fa-user-lock",
                title: "Building Login Systems with Python + SQL",
                html: `<h1>Month 6, Week 22: Building Secure Login Systems</h1>
<p>Today we build secure authentication systems using Python and SQL. Learn password hashing, session management, and security best practices.</p>

<div class="analogy-box">
    <b>Analogy: The Fort Knox Security System ğŸ¦</b><br/>
    
    Username: Security badge ID<br/>
    Password: Secret handshake + fingerprint<br/>
    Hashing: One-way shredder (can't reconstruct)<br/>
    Salting: Adding random spices to each password<br/>
    Session: Temporary visitor pass<br/>
    Cookies: Digital wristband during visit<br/>
    SQL Injection: Fake badge trying to break in<br/>
    Brute Force: Trying every possible combination<br/>
</div>

<h3>Why Plain Text Passwords are DANGEROUS</h3>
<div style="background-color: #ffebee; padding: 20px; margin: 15px 0; border-radius: 10px; border: 2px solid #f44336;">
    <h4>ğŸš¨ NEVER Store Passwords Like This!</h4>
    
    <table style="width: 100%; border-collapse: collapse; margin: 15px 0;">
        <tr style="background: #f44336; color: white;">
            <th style="padding: 10px; text-align: left;">User</th>
            <th style="padding: 10px; text-align: left;">Password (Plain Text)</th>
            <th style="padding: 10px; text-align: left;">What Hackers See</th>
            <th style="padding: 10px; text-align: left;">Result</th>
        </tr>
        <tr style="background: #ffcdd2;">
            <td style="padding: 8px; border: 1px solid #f44336;">alice123</td>
            <td style="padding: 8px; border: 1px solid #f44336;">password123</td>
            <td style="padding: 8px; border: 1px solid #f44336;">password123</td>
            <td style="padding: 8px; border: 1px solid #f44336;">ğŸ˜± Immediate access!</td>
        </tr>
        <tr style="background: white;">
            <td style="padding: 8px; border: 1px solid #f44336;">bob_smith</td>
            <td style="padding: 8px; border: 1px solid #f44336;">ilovecoding</td>
            <td style="padding: 8px; border: 1px solid #f44336;">ilovecoding</td>
            <td style="padding: 8px; border: 1px solid #f44336;">ğŸ˜± Can login as Bob!</td>
        </tr>
        <tr style="background: #ffcdd2;">
            <td style="padding: 8px; border: 1px solid #f44336;">admin</td>
            <td style="padding: 8px; border: 1px solid #f44336;">admin123</td>
            <td style="padding: 8px; border: 1px solid #f44336;">admin123</td>
            <td style="padding: 8px; border: 1px solid #f44336;">ğŸ˜± Total system control!</td>
        </tr>
    </table>
    
    <div style="padding: 15px; background: white; border-radius: 5px; margin-top: 15px;">
        <h5>ğŸ’€ Real-World Disasters:</h5>
        <ul>
            <li><b>2012 LinkedIn:</b> 6.5 million plain text passwords leaked</li>
            <li><b>2013 Adobe:</b> 38 million passwords exposed</li>
            <li><b>2016 Yahoo:</b> 500 million accounts compromised</li>
            <li><b>Lesson:</b> Plain text = Career-ending mistake!</li>
        </ul>
    </div>
</div>

<h3>Password Security: Hashing & Salting</h3>
<b>The Right Way to Store Passwords:</b>
<div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">

<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
<pre style='background-color: #36454f; color: #fff; border-radius: 5px; padding: 10px;'>
# ========= HASHING vs ENCRYPTION =========
# Hashing: One-way street (cannot reverse)
# Encryption: Two-way street (can decrypt)

import hashlib

# Example of hashing
password = "secret123"
hash_object = hashlib.sha256(password.encode())
hash_hex = hash_object.hexdigest()

print(f"Original: {password}")
print(f"SHA-256 hash: {hash_hex}")
print(f"Length: {len(hash_hex)} characters")
print(f"Fixed length: Always 64 chars!")

# Try to "reverse" the hash (IMPOSSIBLE!)
# hash_hex â†’ "secret123" ??? âŒ Can't do it!

# Different passwords â†’ Different hashes
print(f"hash('hello'): {hashlib.sha256(b'hello').hexdigest()}")
print(f"hash('Hello'): {hashlib.sha256(b'Hello').hexdigest()}")
# Note: 'hello' vs 'Hello' â†’ COMPLETELY different!
</pre>

<pre style='background-color: #36454f; color: #fff; border-radius: 5px; padding: 10px;'>
# ========= THE PROBLEM WITH SIMPLE HASHING =========
# Attackers use "Rainbow Tables" - pre-computed hashes

common_passwords = [
    "password123",
    "123456",
    "qwerty",
    "letmein",
    "welcome"
]

# Create a mini rainbow table
rainbow_table = {}
for pwd in common_passwords:
    hash_val = hashlib.md5(pwd.encode()).hexdigest()
    rainbow_table[hash_val] = pwd

print("Rainbow Table (MD5):")
for hash_val, password in rainbow_table.items():
    print(f"{hash_val[:16]}... â†’ {password}")

# If database leaks with MD5 hashes...
leaked_hash = "482c811da5d5b4bc6d497ffa98491e38"
if leaked_hash in rainbow_table:
    print(f"ğŸ˜± Cracked! Password is: {rainbow_table[leaked_hash]}")
    # Output: Password is: password123
</pre>
</div>

<h4>ğŸ” Salting: The Security Upgrade</h4>
<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 15px;">
<pre style='background-color: #f1f1f1; border-radius: 5px; padding: 10px;'>
# ========= WHAT IS A SALT? =========
# Salt = Random data added to password before hashing

import hashlib
import os

def create_salt():
    """Generate a random salt"""
    return os.urandom(16)  # 16 bytes = 128 bits

def hash_password(password, salt=None):
    """Hash password with salt"""
    if salt is None:
        salt = create_salt()
    
    # Combine password + salt
    salted_password = password.encode() + salt
    
    # Hash the combination
    hash_obj = hashlib.sha256(salted_password)
    hash_hex = hash_obj.hexdigest()
    
    return hash_hex, salt

# Example: Same password, different salts
password = "mypassword123"

hash1, salt1 = hash_password(password)
hash2, salt2 = hash_password(password)

print(f"Password: {password}")
print(f"Salt 1: {salt1.hex()}")
print(f"Hash 1: {hash1}")
print(f"Salt 2: {salt2.hex()}")
print(f"Hash 2: {hash2}")
print(f"Same? {hash1 == hash2}")  # FALSE! Different salts!
</pre>

<pre style='background-color: #f1f1f1; border-radius: 5px; padding: 10px;'>
# ========= MODERN PASSWORD HASHING =========
# Use bcrypt or Argon2 (not SHA256 for passwords!)

import bcrypt
import time

def benchmark_hashing():
    """Compare hashing algorithms"""
    
    password = "SuperSecretPassword123!"
    
    print("âš¡ Hashing Speed Comparison:")
    
    # SHA256 (TOO FAST for passwords!)
    start = time.time()
    for _ in range(10000):
        hashlib.sha256(password.encode()).hexdigest()
    sha_time = time.time() - start
    print(f"SHA256: {sha_time:.2f}s (10,000 hashes)")
    
    # bcrypt (SLOW by design!)
    start = time.time()
    for _ in range(10):  # Only 10 because it's slow!
        bcrypt.hashpw(password.encode(), bcrypt.gensalt())
    bcrypt_time = time.time() - start
    print(f"bcrypt: {bcrypt_time:.2f}s (only 10 hashes!)")
    
    print(f"âœ… bcrypt is {bcrypt_time*1000:.0f}x slower per hash!")
    print("This is GOOD - slows down hackers!")

# Why bcrypt is better:
# 1. Built-in salt generation
# 2. Configurable work factor (how slow)
# 3. Adaptive over time (can make slower as computers get faster)
# 4. Battle-tested for 20+ years
</pre>
</div>

<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 15px;">
<pre style='background-color: #4CAF50; color: white; border-radius: 5px; padding: 10px;'>
# ========= COMPLETE PASSWORD SYSTEM =========
import bcrypt
import sqlite3
import secrets

class PasswordManager:
    def __init__(self, db_path="users.db"):
        self.conn = sqlite3.connect(db_path)
        self.create_tables()
    
    def create_tables(self):
        """Create users table with proper password storage"""
        cursor = self.conn.cursor()
        cursor.execute("""
            CREATE TABLE IF NOT EXISTS users (
                id INTEGER PRIMARY KEY AUTOINCREMENT,
                username TEXT UNIQUE NOT NULL,
                password_hash TEXT NOT NULL,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
            )
        """)
        self.conn.commit()
    
    def register_user(self, username, password):
        """Register new user with hashed password"""
        # Validate input
        if len(username) < 3:
            return False, "Username too short"
        if len(password) < 8:
            return False, "Password must be 8+ characters"
        
        # Hash password with bcrypt
        password_hash = bcrypt.hashpw(
            password.encode(),
            bcrypt.gensalt(rounds=12)  # Work factor
        ).decode()
        
        try:
            cursor = self.conn.cursor()
            cursor.execute("""
                INSERT INTO users (username, password_hash)
                VALUES (?, ?)
            """, (username, password_hash))
            self.conn.commit()
            return True, "User registered successfully"
        except sqlite3.IntegrityError:
            return False, "Username already exists"
    
    def verify_login(self, username, password):
        """Verify username and password"""
        cursor = self.conn.cursor()
        cursor.execute("""
            SELECT password_hash FROM users 
            WHERE username = ?
        """, (username,))
        
        result = cursor.fetchone()
        if not result:
            return False, "User not found"
        
        stored_hash = result[0]
        
        # bcrypt handles salt extraction automatically
        if bcrypt.checkpw(password.encode(), stored_hash.encode()):
            return True, "Login successful"
        else:
            return False, "Invalid password"
    
    def close(self):
        self.conn.close()

# Usage
manager = PasswordManager()
success, message = manager.register_user("alice", "SecurePass123!")
print(f"Registration: {message}")

success, message = manager.verify_login("alice", "SecurePass123!")
print(f"Login attempt: {message}")

success, message = manager.verify_login("alice", "WrongPass!")
print(f"Failed login: {message}")
</pre>

<pre style='background-color: #36454f; color: #fff; border-radius: 5px; padding: 10px;'>
# ========= PASSWORD STRENGTH CHECKER =========
import re
import zxcvbn  # pip install zxcvbn

def check_password_strength(password):
    """Check password strength with detailed feedback"""
    
    results = {
        'score': 0,
        'feedback': [],
        'suggestions': [],
        'crack_time': 'instantly'
    }
    
    # Basic checks
    if len(password) < 8:
        results['feedback'].append("Password too short")
    
    # Check for common patterns
    common_passwords = [
        'password', '123456', 'qwerty', 'letmein',
        'welcome', 'admin', 'password123'
    ]
    
    if password.lower() in common_passwords:
        results['feedback'].append("Password is too common")
    
    # Character diversity check
    checks = {
        'uppercase': bool(re.search(r'[A-Z]', password)),
        'lowercase': bool(re.search(r'[a-z]', password)),
        'digits': bool(re.search(r'\d', password)),
        'special': bool(re.search(r'[!@#$%^&*(),.?":{}|<>]', password))
    }
    
    for check_name, has_type in checks.items():
        if not has_type:
            results['suggestions'].append(
                f"Add {check_name} characters"
            )
    
    # Use zxcvbn for advanced analysis
    zxcvbn_result = zxcvbn.zxcvbn(password)
    results['score'] = zxcvbn_result['score']  # 0-4
    results['crack_time'] = zxcvbn_result['crack_times_display']['offline_fast_hashing_1e10_per_second']
    
    # Add zxcvbn feedback
    if zxcvbn_result['feedback']['warning']:
        results['feedback'].append(zxcvbn_result['feedback']['warning'])
    
    results['suggestions'].extend(zxcvbn_result['feedback']['suggestions'])
    
    return results

# Test passwords
test_passwords = [
    "password123",
    "P@ssw0rd!",
    "MyDogName2024!",
    "correct horse battery staple"
]

for pwd in test_passwords:
    print(f"ğŸ” Testing: {pwd}")
    strength = check_password_strength(pwd)
    print(f"Score: {strength['score']}/4")
    print(f"Crack time: {strength['crack_time']}")
    if strength['feedback']:
        print(f"Warnings: {', '.join(strength['feedback'])}")
    if strength['suggestions']:
        print(f"Suggestions: {', '.join(strength['suggestions'][:2])}")
</pre>
</div>
</div>

<h3>Session Management & Cookies</h3>
<div style="background-color: #fff0e6; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h4>ğŸ” Keeping Users Logged In (Safely!)</h4>
    
<pre style='background-color: #36454f; color: #fff; border-radius: 5px; padding: 15px; margin: 10px 0;'>
# ========= SESSION MANAGEMENT SYSTEM =========
import sqlite3
import secrets
import time
from datetime import datetime, timedelta

class SessionManager:
    def __init__(self, db_path="sessions.db"):
        self.conn = sqlite3.connect(db_path)
        self.create_tables()
    
    def create_tables(self):
        cursor = self.conn.cursor()
        cursor.execute("""
            CREATE TABLE IF NOT EXISTS sessions (
                session_id TEXT PRIMARY KEY,
                user_id INTEGER NOT NULL,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                expires_at TIMESTAMP NOT NULL,
                user_agent TEXT,
                ip_address TEXT
            )
        """)
        cursor.execute("""
            CREATE INDEX IF NOT EXISTS idx_expires 
            ON sessions(expires_at)
        """)
        self.conn.commit()
    
    def create_session(self, user_id, user_agent="", ip_address=""):
        """Create new session for user"""
        # Generate secure session ID
        session_id = secrets.token_urlsafe(32)
        
        # Session expires in 24 hours
        expires_at = datetime.now() + timedelta(hours=24)
        
        cursor = self.conn.cursor()
        cursor.execute("""
            INSERT INTO sessions 
            (session_id, user_id, expires_at, user_agent, ip_address)
            VALUES (?, ?, ?, ?, ?)
        """, (session_id, user_id, expires_at, user_agent, ip_address))
        
        self.conn.commit()
        return session_id
    
    def validate_session(self, session_id):
        """Check if session is valid"""
        cursor = self.conn.cursor()
        cursor.execute("""
            SELECT user_id, expires_at 
            FROM sessions 
            WHERE session_id = ? 
            AND expires_at > CURRENT_TIMESTAMP
        """, (session_id,))
        
        result = cursor.fetchone()
        if result:
            user_id, expires_at = result
            return True, user_id
        return False, None
    
    def destroy_session(self, session_id):
        """Logout - remove session"""
        cursor = self.conn.cursor()
        cursor.execute("""
            DELETE FROM sessions 
            WHERE session_id = ?
        """, (session_id,))
        self.conn.commit()
    
    def cleanup_expired(self):
        """Remove expired sessions"""
        cursor = self.conn.cursor()
        cursor.execute("""
            DELETE FROM sessions 
            WHERE expires_at <= CURRENT_TIMESTAMP
        """)
        deleted = cursor.rowcount
        self.conn.commit()
        return deleted
    
    def get_user_sessions(self, user_id):
        """Get all active sessions for user"""
        cursor = self.conn.cursor()
        cursor.execute("""
            SELECT session_id, created_at, expires_at, user_agent
            FROM sessions 
            WHERE user_id = ? 
            AND expires_at > CURRENT_TIMESTAMP
            ORDER BY created_at DESC
        """, (user_id,))
        return cursor.fetchall()

# Usage example
session_mgr = SessionManager()

# User logs in
user_id = 123
session_id = session_mgr.create_session(
    user_id=user_id,
    user_agent="Mozilla/5.0",
    ip_address="192.168.1.100"
)

print(f"Session created: {session_id[:20]}...")

# Later, validate the session
is_valid, user = session_mgr.validate_session(session_id)
print(f"Session valid: {is_valid}, User: {user}")

# List user's sessions
sessions = session_mgr.get_user_sessions(user_id)
print(f"Active sessions: {len(sessions)}")

# Cleanup expired
deleted = session_mgr.cleanup_expired()
print(f"Cleaned up {deleted} expired sessions")
</pre>

<h4>ğŸª Cookies vs Sessions</h4>
<table style="width: 100%; border-collapse: collapse; margin: 15px 0;">
    <tr style="background: #4A90E2; color: white;">
        <th style="padding: 10px; text-align: left;">Feature</th>
        <th style="padding: 10px; text-align: left;">Cookies</th>
        <th style="padding: 10px; text-align: left;">Sessions</th>
        <th style="padding: 10px; text-align: left;">Best For</th>
    </tr>
    <tr style="background: #f8f9fa;">
        <td style="padding: 8px; border: 1px solid #ddd;"><b>Storage Location</b></td>
        <td style="padding: 8px; border: 1px solid #ddd;">User's browser</td>
        <td style="padding: 8px; border: 1px solid #ddd;">Server database</td>
        <td style="padding: 8px; border: 1px solid #ddd;">Sessions (more secure)</td>
    </tr>
    <tr style="background: white;">
        <td style="padding: 8px; border: 1px solid #ddd;"><b>Security</b></td>
        <td style="padding: 8px; border: 1px solid #ddd;">Lower (user can modify)</td>
        <td style="padding: 8px; border: 1px solid #ddd;">Higher (server-controlled)</td>
        <td style="padding: 8px; border: 1px solid #ddd;">Sessions</td>
    </tr>
    <tr style="background: #f8f9fa;">
        <td style="padding: 8px; border: 1px solid #ddd;"><b>Storage Size</b></td>
        <td style="padding: 8px; border: 1px solid #ddd;">Limited (~4KB)</td>
        <td style="padding: 8px; border: 1px solid #ddd;">Unlimited (database)</td>
        <td style="padding: 8px; border: 1px solid #ddd;">Sessions for large data</td>
    </tr>
    <tr style="background: white;">
        <td style="padding: 8px; border: 1px solid #ddd;"><b>Performance</b></td>
        <td style="padding: 8px; border: 1px solid #ddd;">Faster (no DB lookup)</td>
        <td style="padding: 8px; border: 1px solid #ddd;">Slower (DB required)</td>
        <td style="padding: 8px; border: 1px solid #ddd;">Cookies for small data</td>
    </tr>
    <tr style="background: #f8f9fa;">
        <td style="padding: 8px; border: 1px solid #ddd;"><b>Best Practice</b></td>
        <td style="padding: 8px; border: 1px solid #ddd;">Store session ID only</td>
        <td style="padding: 8px; border: 1px solid #ddd;">Store sensitive data</td>
        <td style="padding: 8px; border: 1px solid #ddd;">Hybrid approach</td>
    </tr>
</table>

<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 15px;">
<pre style='background-color: #f1f1f1; border-radius: 5px; padding: 10px;'>
# ========= SECURE COOKIE SETTINGS =========
# Flask example for secure cookies

from flask import Flask, make_response, request
import secrets

app = Flask(__name__)
app.secret_key = secrets.token_hex(32)  # Random secret key

@app.route('/login', methods=['POST'])
def login():
    # Validate credentials...
    user_id = 123
    
    # Create response
    resp = make_response("Login successful")
    
    # Set secure cookie with session ID
    session_id = secrets.token_urlsafe(32)
    
    resp.set_cookie(
        'session_id',
        value=session_id,
        max_age=24*60*60,  # 24 hours
        httponly=True,     # Prevent JavaScript access
        secure=True,       # Only send over HTTPS
        samesite='Strict'  # Prevent CSRF attacks
    )
    
    # Store session in database
    store_session_in_db(session_id, user_id)
    
    return resp

@app.route('/dashboard')
def dashboard():
    # Get session from cookie
    session_id = request.cookies.get('session_id')
    
    if not session_id:
        return "Please login", 401
    
    # Validate session
    user_id = validate_session_in_db(session_id)
    if not user_id:
        return "Invalid session", 401
    
    return f"Welcome user {user_id}!"

# Secure cookie attributes explained:
# - httponly=True: JavaScript can't access (prevents XSS)
# - secure=True: Only sent over HTTPS (encrypted)
# - samesite='Strict': Prevents CSRF attacks
# - max_age: Auto-expires (don't use never-expiring cookies!)
</pre>

<pre style='background-color: #f1f1f1; border-radius: 5px; padding: 10px;'>
# ========= TWO-FACTOR AUTHENTICATION (2FA) =========
import pyotp  # pip install pyotp
import qrcode  # pip install qrcode[pil]
import secrets

class TwoFactorAuth:
    def __init__(self):
        self.users_2fa = {}  # In production, store in DB
    
    def enable_2fa(self, username):
        """Enable 2FA for user"""
        # Generate secret key
        secret = pyotp.random_base32()
        
        # Create TOTP (Time-based OTP)
        totp = pyotp.TOTP(secret)
        
        # Generate provisioning URL for QR code
        provisioning_uri = totp.provisioning_uri(
            name=username,
            issuer_name="SecureApp"
        )
        
        # Store secret for user
        self.users_2fa[username] = secret
        
        # Generate QR code
        qr = qrcode.make(provisioning_uri)
        qr.save(f"{username}_2fa_qr.png")
        
        return secret, provisioning_uri
    
    def verify_2fa(self, username, token):
        """Verify 2FA token"""
        if username not in self.users_2fa:
            return False
        
        secret = self.users_2fa[username]
        totp = pyotp.TOTP(secret)
        
        # Verify token (valid for 30 seconds)
        return totp.verify(token)
    
    def generate_backup_codes(self, username, count=10):
        """Generate backup codes in case user loses phone"""
        backup_codes = []
        for _ in range(count):
            code = secrets.token_hex(4).upper()  # 8-char code
            backup_codes.append(code)
        
        # In production, hash and store in database
        print(f"Backup codes for {username}:")
        for i, code in enumerate(backup_codes, 1):
            print(f"{i}. {code}")
        
        return backup_codes

# Usage
auth_2fa = TwoFactorAuth()

# Enable 2FA for user
secret, uri = auth_2fa.enable_2fa("alice")
print(f"Scan QR code in alice_2fa_qr.png")
print(f"Or enter secret manually: {secret}")

# Simulate login with 2FA
# User enters code from authenticator app
test_token = input("Enter 2FA code: ")
is_valid = auth_2fa.verify_2fa("alice", test_token)
print(f"2FA valid: {is_valid}")

# Generate backup codes
backup_codes = auth_2fa.generate_backup_codes("alice")
</pre>
</div>
</div>

<h3>Today's Hands-On Exercises</h3>
<div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <b>Exercise 1: Build a Secure Login System (90 minutes)</b>
    <p>Create a complete authentication system:</p>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 15px 0;">
        <div>
            <b>Core Features:</b>
            <ol>
                <li>User registration with password strength validation</li>
                <li>Secure password hashing with bcrypt</li>
                <li>Login with session creation</li>
                <li>Remember me functionality (secure)</li>
                <li>Password reset with email tokens</li>
                <li>Account locking after failed attempts</li>
                <li>Session management with expiration</li>
            </ol>
        </div>
        
        <div>
            <b>Security Features:</b>
            <ul>
                <li>SQL injection protection</li>
                <li>XSS prevention (output encoding)</li>
                <li>CSRF tokens for forms</li>
                <li>Secure cookie settings</li>
                <li>Rate limiting on login attempts</li>
                <li>HTTPS enforcement (simulated)</li>
                <li>Audit logging of all logins</li>
            </ul>
        </div>
    </div>
    
    <b>Exercise 2: Password Security Analysis (45 minutes)</b>
    <p>Analyze and improve password security:</p>
    
    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin: 15px 0;">
        <div style="background: #f8f9fa; padding: 10px; border-radius: 5px;">
            <b>Task 1: Hash Cracking</b>
            <ul>
                <li>Create rainbow table for common passwords</li>
                <li>Try to crack MD5 hashes</li>
                <li>Show why salts prevent this</li>
            </ul>
        </div>
        
        <div style="background: #f8f9fa; padding: 10px; border-radius: 5px;">
            <b>Task 2: Strength Testing</b>
            <ul>
                <li>Build password strength meter</li>
                <li>Test with real passwords</li>
                <li>Generate secure passwords</li>
            </ul>
        </div>
        
        <div style="background: #f8f9fa; padding: 10px; border-radius: 5px;">
            <b>Task 3: Brute Force Simulation</b>
            <ul>
                <li>Simulate brute force attacks</li>
                <li>Show how bcrypt slows attackers</li>
                <li>Calculate crack times</li>
            </ul>
        </div>
    </div>
    
    <b>Exercise 3: Multi-Factor Authentication (45 minutes)</b>
    <p>Implement 2FA system:</p>
    <ul>
        <li>Generate QR codes for Google Authenticator</li>
        <li>Verify time-based tokens</li>
        <li>Create backup codes system</li>
        <li>Implement "trusted device" functionality</li>
        <li>Add SMS/email fallback verification</li>
    </ul>
</div>

<h3>Homework Assignment</h3>
<div style="background-color: #fff0e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <b>Build an "Enterprise Security Suite"</b>
    
    <b>Requirements:</b>
    <ol>
        <li><b>User Management Module:</b>
            <ul>
                <li>Registration with email verification</li>
                <li>Password policy enforcement (complexity, history)</li>
                <li>Account lifecycle (pending, active, locked, disabled)</li>
                <li>Role-based access control (admin, user, guest)</li>
                <li>User profile management</li>
            </ul>
        </li>
        
        <li><b>Authentication Module:</b>
            <ul>
                <li>Multi-factor authentication (TOTP, SMS, email)</li>
                <li>Single sign-on (SSO) simulation with OAuth</li>
                <li>Passwordless login with magic links</li>
                <li>Biometric authentication simulation</li>
                <li>Social login (Google, Facebook simulation)</li>
            </ul>
        </li>
        
        <li><b>Session Security Module:</b>
            <ul>
                <li>Secure session management with JWT tokens</li>
                <li>Concurrent session control (max 3 devices)</li>
                <li>Session timeout and auto-logout</li>
                <li>Remember me with secure tokens</li>
                <li>Session hijacking detection</li>
            </ul>
        </li>
        
        <li><b>Security Monitoring:</b>
            <ul>
                <li>Failed login attempt tracking</li>
                <li>IP address geolocation and blocking</li>
                <li>User behavior analytics (anomaly detection)</li>
                <li>Security event logging and alerts</li>
                <li>Compliance reporting (GDPR, HIPAA simulation)</li>
            </ul>
        </li>
    </ol>
    
    <b>Sample Implementation:</b>
    <pre style="background: #f5f5f5; padding: 10px; margin: 10px 0;">
security_suite/
â”œâ”€â”€ auth/
â”‚   â”œâ”€â”€ password_manager.py      # bcrypt hashing, validation
â”‚   â”œâ”€â”€ session_manager.py       # JWT tokens, session DB
â”‚   â”œâ”€â”€ two_factor.py            # TOTP, backup codes
â”‚   â””â”€â”€ oauth_simulator.py       # SSO simulation
â”œâ”€â”€ models/
â”‚   â”œâ”€â”€ user.py                  # User model with roles
â”‚   â”œâ”€â”€ session.py               # Session model
â”‚   â””â”€â”€ security_log.py          # Audit logging
â”œâ”€â”€ security/
â”‚   â”œâ”€â”€ rate_limiter.py          # Login attempt limiting
â”‚   â”œâ”€â”€ ip_blocker.py            # IP-based blocking
â”‚   â”œâ”€â”€ anomaly_detector.py      # Behavioral analysis
â”‚   â””â”€â”€ compliance_checker.py    # Security policy validation
â”œâ”€â”€ api/
â”‚   â”œâ”€â”€ auth_endpoints.py        # Login/register endpoints
â”‚   â”œâ”€â”€ user_endpoints.py        # User management
â”‚   â””â”€â”€ admin_endpoints.py       # Admin functions
â””â”€â”€ utils/
    â”œâ”€â”€ validators.py            # Input validation
    â”œâ”€â”€ email_service.py         # Email notifications
    â””â”€â”€ security_headers.py      # HTTP security headers
    </pre>
    
    <b>Bonus Challenges:</b>
    <ul>
        <li>Implement hardware security key support (WebAuthn simulation)</li>
        <li>Create a password breach checker using HaveIBeenPwned API</li>
        <li>Build a security dashboard with real-time monitoring</li>
        <li>Add automated security scanning for vulnerabilities</li>
        <li>Create security training module for users</li>
        <li>Implement zero-trust architecture principles</li>
    </ul>
</div>

<h3>Key Learning Points:</h3>
<ol>
    <li><b>Password Security:</b> Hashing vs encryption, salting, bcrypt usage</li>
    <li><b>Session Management:</b> Secure session storage and validation</li>
    <li><b>Cookie Security:</b> Proper cookie settings (httponly, secure, samesite)</li>
    <li><b>Multi-Factor Auth:</b> Implementing 2FA with TOTP</li>
    <li><b>Attack Prevention:</b> SQL injection, XSS, CSRF protection</li>
    <li><b>Security Monitoring:</b> Logging, rate limiting, anomaly detection</li>
</ol>

<div style="background-color: #e8f5e8; padding: 15px; margin: 20px 0; border-radius: 5px;">
    <h3>ğŸ’¡ Authentication Security Best Practices:</h3>
    <ul>
        <li><b>Never Store Plain Text:</b> Always hash passwords with bcrypt/Argon2</li>
        <li><b>Use HTTPS Always:</b> Encrypt all authentication traffic</li>
        <li><b>Implement Rate Limiting:</b> Prevent brute force attacks</li>
        <li><b>Add Multi-Factor Auth:</b> At least for admin accounts</li>
        <li><b>Secure Session Storage:</b> Use server-side sessions, not cookies</li>
        <li><b>Validate Input:</b> Sanitize all user input before processing</li>
        <li><b>Use CSRF Tokens:</b> Protect against cross-site request forgery</li>
        <li><b>Log Security Events:</b> Monitor for suspicious activity</li>
        <li><b>Regular Security Audits:</b> Review code for vulnerabilities</li>
        <li><b>Educate Users:</b> Teach password hygiene and security awareness</li>
    </ul>
</div>

<h3>Security Checklist for Login Systems</h3>
<div style="background: white; padding: 20px; border-radius: 10px; border: 2px solid #4A90E2;">
    <div style="text-align: center; margin: 20px 0;">
        <div style="display: inline-block; text-align: left;">
            <div style="font-weight: bold; color: #4A90E2; margin-bottom: 10px;">âœ… Security Audit Checklist:</div>
            <div style="margin-left: 20px;">
                <div>ğŸ” <b>Passwords:</b> bcrypt hashing + unique salts</div>
                <div>ğŸ”‘ <b>Sessions:</b> Server-side storage with expiration</div>
                <div>ğŸª <b>Cookies:</b> httponly, secure, samesite flags</div>
                <div>ğŸ›¡ï¸ <b>SQL:</b> Parameterized queries only</div>
                <div>âš¡ <b>Rate Limiting:</b> 5 failed attempts â†’ 15 min lock</div>
                <div>ğŸ“§ <b>Email Verification:</b> Required for registration</div>
                <div>ğŸ”¢ <b>2FA:</b> Optional for users, required for admins</div>
                <div>ğŸ“ <b>Logging:</b> All login attempts logged</div>
                <div>ğŸ”„ <b>Password Reset:</b> Secure tokens, not security questions</div>
                <div>ğŸš« <b>Common Passwords:</b> Block password, 123456, etc.</div>
            </div>
        </div>
    </div>
    
    <div style="margin-top: 20px; padding: 15px; background: #f8f9fa; border-radius: 5px;">
        <p><b>ğŸ“ Pro Tip:</b> Use existing libraries (bcrypt, pyotp) instead of building your own crypto!</p>
        <p><b>âš¡ Quick Win:</b> Add rate limiting first - it's easy and stops 80% of attacks.</p>
        <p><b>âš ï¸ Remember:</b> Security is not a feature, it's a requirement. One breach can destroy trust forever.</p>
        <p><b>ğŸ’¡ Golden Rule:</b> Never trust user input, always validate and sanitize!</p>
    </div>
</div>
`
            },
            "6-23": {
                icon: "fa-shield-alt",
                title: "Database Security & Protection",
                html: `<h1>Month 6, Week 23: Database Security & Protection</h1>
<p>Today we become database security experts! Learn to protect databases from attacks, secure sensitive data, and implement proper access controls.</p>

<div class="analogy-box">
    <b>Analogy: The Bank Vault Security System ğŸ¦ğŸ”’</b><br/>
    
    Database: Bank vault with safety deposit boxes<br/>
    Tables: Different security levels (gold, silver, bronze)<br/>
    Users: Bank employees with different clearance<br/>
    Permissions: Which keys each employee gets<br/>
    Encryption: Locking documents in secure boxes<br/>
    Backups: Off-site vault copies<br/>
    SQL Injection: Fake security badge<br/>
    Audit Trail: Security camera recordings<br/>
</div>

<h3>Database User Management & Permissions</h3>
<div style="background-color: #f0f8ff; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h4>ğŸ“Š Principle of Least Privilege</h4>
    
    <div style="text-align: center; margin: 20px 0;">
        <div style="display: inline-block; padding: 20px; background: white; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
            <div style="color: #4A90E2; font-weight: bold; margin-bottom: 10px;">ğŸ”‘ User Permission Levels</div>
            <div style="display: flex; justify-content: center; align-items: center; gap: 30px;">
                <div style="text-align: center;">
                    <div style="background: #FF6B6B; color: white; padding: 15px; border-radius: 50%; width: 80px; height: 80px; display: flex; align-items: center; justify-content: center; margin: 0 auto 10px;">ğŸ‘‘</div>
                    <div><b>SUPERUSER</b></div>
                    <div style="font-size: 12px;">All permissions</div>
                </div>
                <div style="font-size: 24px;">â†’</div>
                <div style="text-align: center;">
                    <div style="background: #4ECDC4; color: white; padding: 15px; border-radius: 50%; width: 80px; height: 80px; display: flex; align-items: center; justify-content: center; margin: 0 auto 10px;">ğŸ‘¨â€ğŸ’¼</div>
                    <div><b>ADMIN</b></div>
                    <div style="font-size: 12px;">Most permissions</div>
                </div>
                <div style="font-size: 24px;">â†’</div>
                <div style="text-align: center;">
                    <div style="background: #45B7D1; color: white; padding: 15px; border-radius: 50%; width: 80px; height: 80px; display: flex; align-items: center; justify-content: center; margin: 0 auto 10px;">ğŸ‘¨â€ğŸ’»</div>
                    <div><b>DEVELOPER</b></div>
                    <div style="font-size: 12px;">Read/Write access</div>
                </div>
                <div style="font-size: 24px;">â†’</div>
                <div style="text-align: center;">
                    <div style="background: #96CEB4; color: white; padding: 15px; border-radius: 50%; width: 80px; height: 80px; display: flex; align-items: center; justify-content: center; margin: 0 auto 10px;">ğŸ‘¤</div>
                    <div><b>USER</b></div>
                    <div style="font-size: 12px;">Limited access</div>
                </div>
                <div style="font-size: 24px;">â†’</div>
                <div style="text-align: center;">
                    <div style="background: #FFEAA7; color: #333; padding: 15px; border-radius: 50%; width: 80px; height: 80px; display: flex; align-items: center; justify-content: center; margin: 0 auto 10px;">ğŸ‘€</div>
                    <div><b>VIEWER</b></div>
                    <div style="font-size: 12px;">Read-only</div>
                </div>
            </div>
        </div>
    </div>
    
    <div style="margin-top: 20px; padding: 15px; background: #fff3cd; border-radius: 5px;">
        <h5>ğŸ¯ Golden Rule: Least Privilege</h5>
        <p><b>"Give users only the permissions they NEED to do their job, and NOTHING more."</b></p>
        <p>Example: A reporting tool only needs SELECT permission, not DELETE!</p>
    </div>
</div>

<h3>Creating Secure Database Users</h3>
<b>PostgreSQL User Management Examples:</b>
<div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">

<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
<pre style='background-color: #36454f; color: #fff; border-radius: 5px; padding: 10px;'>
-- ========= CREATING SECURE USERS =========

-- 1. App User (Limited permissions)
CREATE USER app_user WITH 
    PASSWORD 'StrongPass123!' 
    VALID UNTIL '2025-12-31';

-- 2. Read-only reporter
CREATE USER report_user WITH 
    PASSWORD 'ReportOnly456!' 
    NOCREATEDB NOCREATEROLE;

-- 3. Admin (more permissions)
CREATE USER db_admin WITH 
    PASSWORD 'AdminSecure789!' 
    CREATEDB CREATEROLE;

-- 4. Check existing users
SELECT 
    usename AS username,
    usesuper AS is_superuser,
    usecreatedb AS can_create_db,
    valuntil AS password_expires
FROM pg_user
ORDER BY usename;

-- 5. Change password (regularly!)
ALTER USER app_user 
    WITH PASSWORD 'NewSecurePass2024!';

-- 6. Set password expiration
ALTER USER app_user 
    VALID UNTIL '2024-06-30';

-- 7. Lock/Unlock account
ALTER USER app_user ACCOUNT LOCK;
ALTER USER app_user ACCOUNT UNLOCK;
</pre>

<pre style='background-color: #36454f; color: #fff; border-radius: 5px; padding: 10px;'>
-- ========= GRANTING PERMISSIONS =========
-- The GRANT command gives permissions

-- 1. Connect to database
GRANT CONNECT ON DATABASE school_db TO app_user;

-- 2. Usage on schema
GRANT USAGE ON SCHEMA public TO app_user;

-- 3. Table permissions (BE SPECIFIC!)
-- Read-only on students table
GRANT SELECT ON students TO report_user;

-- Read/Write on specific tables
GRANT SELECT, INSERT, UPDATE ON 
    students, teachers, courses 
TO app_user;

-- 4. Column-level permissions (PostgreSQL)
-- Can see name/email but NOT ssn
GRANT SELECT (id, name, email) 
ON students TO report_user;

-- 5. Sequence permissions (for auto-increment)
GRANT USAGE, SELECT ON ALL SEQUENCES 
IN SCHEMA public TO app_user;

-- 6. Execute functions
GRANT EXECUTE ON FUNCTION 
    calculate_gpa(student_id INTEGER) 
TO app_user;

-- 7. View permissions
GRANT SELECT ON v_student_grades TO report_user;
</pre>
</div>

<h4>ğŸ” Role-Based Access Control (RBAC)</h4>
<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 15px;">
<pre style='background-color: #f1f1f1; border-radius: 5px; padding: 10px;'>
-- ========= CREATING ROLES =========
-- Roles group permissions together

-- 1. Create roles
CREATE ROLE reader;
CREATE ROLE writer;
CREATE ROLE admin;

-- 2. Grant permissions to roles
GRANT SELECT ON ALL TABLES IN SCHEMA public TO reader;
GRANT SELECT, INSERT, UPDATE ON ALL TABLES IN SCHEMA public TO writer;
GRANT ALL PRIVILEGES ON ALL TABLES IN SCHEMA public TO admin;

-- 3. Grant role to users
GRANT reader TO report_user;
GRANT writer TO app_user;
GRANT admin TO db_admin;

-- 4. Create user with role directly
CREATE USER new_user 
    WITH PASSWORD 'UserPass123!' 
    IN ROLE reader;

-- 5. Check role memberships
SELECT 
    r.rolname AS role,
    m.rolname AS member
FROM pg_roles r
JOIN pg_auth_members am ON r.oid = am.roleid
JOIN pg_roles m ON am.member = m.oid
ORDER BY r.rolname;

-- 6. Revoke role
REVOKE writer FROM app_user;

-- 7. Drop role (cascade to users)
DROP ROLE IF EXISTS old_role CASCADE;
</pre>

<pre style='background-color: #f1f1f1; border-radius: 5px; padding: 10px;'>
-- ========= ADVANCED PERMISSION MANAGEMENT =========

-- 1. Default privileges for future tables
ALTER DEFAULT PRIVILEGES 
    FOR USER app_user
    IN SCHEMA public
    GRANT SELECT, INSERT, UPDATE ON TABLES TO app_user;

-- 2. Row-level security (PostgreSQL 9.5+)
-- Enable on table
ALTER TABLE students ENABLE ROW LEVEL SECURITY;

-- Create policy: Teachers only see their students
CREATE POLICY teacher_students ON students
    FOR ALL
    USING (teacher_id = current_user_id())
    WITH CHECK (teacher_id = current_user_id());

-- 3. Column-level encryption permissions
-- Grant access to decryption key
GRANT USAGE ON KEY students_ssn_key TO app_user;

-- 4. Audit logging permissions
GRANT INSERT ON audit_log TO app_user;

-- 5. Backup permissions
GRANT SELECT ON ALL TABLES TO backup_user;
GRANT EXECUTE ON FUNCTION pg_dump TO backup_user;

-- 6. Revoke ALL permissions
REVOKE ALL PRIVILEGES ON students FROM bad_user;

-- 7. Check user permissions
SELECT 
    grantee,
    table_name,
    privilege_type
FROM information_schema.role_table_grants
WHERE grantee = 'app_user'
ORDER BY table_name;
</pre>
</div>

<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 15px;">
<pre style='background-color: #4CAF50; color: white; border-radius: 5px; padding: 10px;'>
# ========= PYTHON: SECURE DATABASE CONNECTIONS =========
import psycopg2
from psycopg2 import sql
import os
from dotenv import load_dotenv

load_dotenv()  # Load from .env file

class SecureDatabaseConnection:
    def __init__(self, user_role="app_user"):
        # NEVER hardcode credentials!
        # Store in environment variables or secret manager
        
        self.config = {
            'host': os.getenv('DB_HOST', 'localhost'),
            'database': os.getenv('DB_NAME', 'school_db'),
            'user': user_role,  # Different users for different purposes
            'password': os.getenv(f'DB_PASS_{user_role.upper()}'),
            'port': os.getenv('DB_PORT', 5432),
            'sslmode': 'require'  # Always use SSL in production
        }
    
    def connect(self):
        """Create secure connection"""
        try:
            conn = psycopg2.connect(**self.config)
            
            # Set statement timeout (prevent long-running queries)
            with conn.cursor() as cur:
                cur.execute("SET statement_timeout = '30s'")
            
            # Log connection (for audit)
            self.log_connection(conn.info.user, conn.info.host)
            
            return conn
        
        except Exception as e:
            self.log_security_event(
                "CONNECTION_FAILED",
                f"User {self.config['user']}: {str(e)}"
            )
            raise
    
    def execute_query(self, query, params=None):
        """Execute query with security checks"""
        conn = self.connect()
        
        try:
            with conn.cursor() as cur:
                # Check for dangerous patterns
                self.validate_query_safety(query)
                
                # Execute with parameters
                cur.execute(query, params or ())
                
                # Fetch results if SELECT
                if query.strip().upper().startswith('SELECT'):
                    return cur.fetchall()
                else:
                    conn.commit()
                    return cur.rowcount
        
        except Exception as e:
            conn.rollback()
            self.log_security_event(
                "QUERY_ERROR",
                f"Query: {query[:100]}... Error: {str(e)}"
            )
            raise
        
        finally:
            conn.close()
    
    def validate_query_safety(self, query):
        """Basic safety checks"""
        query_upper = query.upper()
        
        # Block dangerous operations for non-admin users
        dangerous_patterns = [
            'DROP TABLE',
            'TRUNCATE TABLE',
            'DELETE FROM',  # Without WHERE clause
            'ALTER TABLE',
            'GRANT ',
            'REVOKE '
        ]
        
        for pattern in dangerous_patterns:
            if pattern in query_upper:
                if self.config['user'] != 'db_admin':
                    raise SecurityError(
                        f"User {self.config['user']} attempted dangerous operation: {pattern}"
                    )
</pre>

<pre style='background-color: #36454f; color: #fff; border-radius: 5px; padding: 10px;'>
# ========= DATABASE SECURITY MONITORING =========
import psycopg2
import logging
from datetime import datetime, timedelta

class DatabaseSecurityMonitor:
    def __init__(self, db_conn):
        self.conn = db_conn
        self.setup_audit_tables()
    
    def setup_audit_tables(self):
        """Create tables for security monitoring"""
        with self.conn.cursor() as cur:
            # Audit log table
            cur.execute("""
                CREATE TABLE IF NOT EXISTS security_audit (
                    id SERIAL PRIMARY KEY,
                    event_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                    username TEXT NOT NULL,
                    event_type TEXT NOT NULL,
                    event_details JSONB,
                    ip_address INET,
                    user_agent TEXT
                )
            """)
            
            # Failed login attempts
            cur.execute("""
                CREATE TABLE IF NOT EXISTS failed_logins (
                    id SERIAL PRIMARY KEY,
                    attempt_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                    username TEXT,
                    ip_address INET,
                    user_agent TEXT,
                    reason TEXT
                )
            """)
            
            # User permission changes
            cur.execute("""
                CREATE TABLE IF NOT EXISTS permission_changes (
                    id SERIAL PRIMARY KEY,
                    change_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                    changed_by TEXT,
                    target_user TEXT,
                    permission_type TEXT,
                    old_value TEXT,
                    new_value TEXT
                )
            """)
            
            self.conn.commit()
    
    def log_security_event(self, event_type, details, username=None, ip=None):
        """Log security event to audit table"""
        with self.conn.cursor() as cur:
            cur.execute("""
                INSERT INTO security_audit 
                (username, event_type, event_details, ip_address)
                VALUES (%s, %s, %s, %s)
            """, (username or 'system', event_type, details, ip))
            self.conn.commit()
    
    def check_failed_logins(self, username, ip_address, threshold=5):
        """Check if too many failed logins"""
        with self.conn.cursor() as cur:
            cur.execute("""
                SELECT COUNT(*) 
                FROM failed_logins 
                WHERE username = %s 
                AND ip_address = %s
                AND attempt_time > NOW() - INTERVAL '15 minutes'
            """, (username, ip_address))
            
            count = cur.fetchone()[0]
            
            if count >= threshold:
                self.log_security_event(
                    "ACCOUNT_LOCKED",
                    f"User {username} locked due to {count} failed attempts",
                    username,
                    ip_address
                )
                return False  # Account should be locked
            
            return True
    
    def get_security_report(self, days=7):
        """Generate security report"""
        with self.conn.cursor() as cur:
            # Failed login attempts
            cur.execute("""
                SELECT 
                    DATE(attempt_time) as day,
                    COUNT(*) as attempts,
                    COUNT(DISTINCT ip_address) as unique_ips
                FROM failed_logins 
                WHERE attempt_time > NOW() - INTERVAL %s
                GROUP BY DATE(attempt_time)
                ORDER BY day DESC
            """, (f"{days} days",))
            
            failed_logins = cur.fetchall()
            
            # Permission changes
            cur.execute("""
                SELECT 
                    changed_by,
                    COUNT(*) as changes
                FROM permission_changes
                WHERE change_time > NOW() - INTERVAL %s
                GROUP BY changed_by
                ORDER BY changes DESC
            """, (f"{days} days",))
            
            permission_changes = cur.fetchall()
            
            # Suspicious activity
            cur.execute("""
                SELECT 
                    username,
                    event_type,
                    COUNT(*) as count
                FROM security_audit
                WHERE event_time > NOW() - INTERVAL %s
                AND event_type IN ('SQL_INJECTION_ATTEMPT', 
                                   'UNAUTHORIZED_ACCESS',
                                   'PRIVILEGE_ESCALATION')
                GROUP BY username, event_type
                ORDER BY count DESC
            """, (f"{days} days",))
            
            suspicious = cur.fetchall()
            
            return {
                'failed_logins': failed_logins,
                'permission_changes': permission_changes,
                'suspicious_activity': suspicious
            }
</pre>
</div>
</div>

<h3>Database Encryption & Data Protection</h3>
<div style="background-color: #fff0e6; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h4>ğŸ” Protecting Sensitive Data</h4>
    
<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
<pre style='background-color: #f1f1f1; border-radius: 5px; padding: 10px;'>
-- ========= COLUMN-LEVEL ENCRYPTION =========
-- Encrypt sensitive columns (SSN, credit cards, etc.)

-- 1. Enable pgcrypto extension
CREATE EXTENSION IF NOT EXISTS pgcrypto;

-- 2. Create table with encrypted columns
CREATE TABLE patients (
    id SERIAL PRIMARY KEY,
    name TEXT NOT NULL,
    ssn_encrypted BYTEA,  -- Encrypted SSN
    medical_record_encrypted BYTEA,
    encryption_key_id TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- 3. Encrypt data on insert
INSERT INTO patients (name, ssn_encrypted, encryption_key_id)
VALUES (
    'John Doe',
    pgp_sym_encrypt('123-45-6789', 'encryption_key_2024'),
    'key_001'
);

-- 4. Decrypt data on select (requires key)
SELECT 
    name,
    pgp_sym_decrypt(ssn_encrypted, 'encryption_key_2024') 
        AS ssn_decrypted
FROM patients 
WHERE id = 1;

-- 5. Hash sensitive data (one-way, for comparisons)
CREATE TABLE users_secure (
    id SERIAL PRIMARY KEY,
    email TEXT UNIQUE,
    email_hash TEXT GENERATED ALWAYS AS (
        encode(digest(email, 'sha256'), 'hex')
    ) STORED,
    ssn_last_four_hash TEXT
);

-- 6. Compare hashed values (for login, etc.)
SELECT * FROM users_secure 
WHERE email_hash = encode(digest('test@email.com', 'sha256'), 'hex');
</pre>

<pre style='background-color: #f1f1f1; border-radius: 5px; padding: 10px;'>
-- ========= TRANSPARENT DATA ENCRYPTION (TDE) =========
-- Encrypt entire database files

-- 1. Check if encryption is enabled
SELECT 
    datname AS database,
    pg_tablespace_location(oid) AS location,
    -- In production: check encryption status
    'encrypted' AS status
FROM pg_database 
WHERE datname = current_database();

-- 2. Create encrypted tablespace
CREATE TABLESPACE encrypted_space
LOCATION '/var/lib/postgresql/encrypted_data'
WITH (encryption = true);

-- 3. Create table in encrypted tablespace
CREATE TABLE financial_records (
    id SERIAL PRIMARY KEY,
    account_number TEXT,
    transaction_amount DECIMAL(10,2),
    transaction_date DATE
) TABLESPACE encrypted_space;

-- 4. Move existing table to encrypted space
ALTER TABLE sensitive_data 
SET TABLESPACE encrypted_space;

-- 5. Check table encryption
SELECT 
    tablename,
    tablespace
FROM pg_tables 
WHERE schemaname = 'public'
AND tablespace IS NOT NULL;

-- 6. Backup considerations for encrypted data
-- Must backup encryption keys separately!
COMMENT ON DATABASE mydb IS 
    'ENCRYPTION_KEY_ID: key_2024_v1';
</pre>
</div>

<h4>ğŸ”’ Key Management Best Practices</h4>
<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 15px;">
<pre style='background-color: #36454f; color: #fff; border-radius: 5px; padding: 10px;'>
# ========= SECURE KEY MANAGEMENT IN PYTHON =========
from cryptography.fernet import Fernet
from cryptography.hazmat.primitives import hashes
from cryptography.hazmat.primitives.kdf.pbkdf2 import PBKDF2HMAC
import base64
import os

class EncryptionManager:
    def __init__(self, key_storage_path='keys/'):
        self.key_storage = key_storage_path
        os.makedirs(key_storage_path, exist_ok=True)
    
    def generate_key(self, key_id, password=None):
        """Generate encryption key"""
        if password:
            # Derive key from password
            salt = os.urandom(16)
            kdf = PBKDF2HMAC(
                algorithm=hashes.SHA256(),
                length=32,
                salt=salt,
                iterations=100000,
            )
            key = base64.urlsafe_b64encode(kdf.derive(password.encode()))
        else:
            # Generate random key
            key = Fernet.generate_key()
        
        # Store key securely (in production, use HSM or KMS)
        key_path = os.path.join(self.key_storage, f"{key_id}.key")
        with open(key_path, 'wb') as f:
            if password:
                f.write(salt + b'::' + key)
            else:
                f.write(key)
        
        # Set restrictive permissions
        os.chmod(key_path, 0o600)
        
        return key
    
    def encrypt_data(self, key_id, data):
        """Encrypt sensitive data"""
        key = self.load_key(key_id)
        fernet = Fernet(key)
        
        encrypted = fernet.encrypt(data.encode())
        return encrypted
    
    def decrypt_data(self, key_id, encrypted_data):
        """Decrypt data"""
        key = self.load_key(key_id)
        fernet = Fernet(key)
        
        decrypted = fernet.decrypt(encrypted_data)
        return decrypted.decode()
    
    def load_key(self, key_id):
        """Load encryption key"""
        key_path = os.path.join(self.key_storage, f"{key_id}.key")
        
        if not os.path.exists(key_path):
            raise FileNotFoundError(f"Key {key_id} not found")
        
        with open(key_path, 'rb') as f:
            content = f.read()
        
        # Check if it's password-derived
        if b'::' in content:
            salt, key = content.split(b'::', 1)
            return key
        else:
            return content
    
    def rotate_keys(self, old_key_id, new_key_id):
        """Rotate encryption keys (important for security)"""
        # In production: re-encrypt all data with new key
        print(f"Rotating keys: {old_key_id} -> {new_key_id}")
        # This would involve:
        # 1. Generate new key
        # 2. Decrypt with old key
        # 3. Encrypt with new key
        # 4. Update database records
        # 5. Securely delete old key after verification
</pre>

<pre style='background-color: #36454f; color: #fff; border-radius: 5px; padding: 10px;'>
# ========= DATA MASKING & ANONYMIZATION =========
import re
import random
import hashlib

class DataMasker:
    """Mask sensitive data for testing/development"""
    
    @staticmethod
    def mask_email(email):
        """Mask email address"""
        if not email or '@' not in email:
            return email
        
        local_part, domain = email.split('@', 1)
        
        # Keep first and last character of local part
        if len(local_part) <= 2:
            masked_local = local_part[0] + '***'
        else:
            masked_local = local_part[0] + '***' + local_part[-1]
        
        return f"{masked_local}@{domain}"
    
    @staticmethod
    def mask_phone(phone):
        """Mask phone number"""
        digits = re.sub(r'\D', '', phone)
        
        if len(digits) == 10:  # US number
            return f"({digits[:3]}) ***-{digits[6:]}"
        elif len(digits) == 11 and digits[0] == '1':  # US with country
            return f"+1 ({digits[1:4]}) ***-{digits[7:]}"
        else:
            # Generic masking
            return phone[:4] + '****' + phone[-4:]
    
    @staticmethod
    def mask_ssn(ssn):
        """Mask Social Security Number"""
        digits = re.sub(r'\D', '', ssn)
        
        if len(digits) == 9:
            return f"***-**-{digits[-4:]}"
        return "***-**-****"
    
    @staticmethod
    def anonymize_name(name):
        """Replace name with random but realistic name"""
        first_names = ['James', 'Mary', 'John', 'Patricia', 'Robert', 'Jennifer']
        last_names = ['Smith', 'Johnson', 'Williams', 'Brown', 'Jones', 'Garcia']
        
        # Deterministic based on input (same input â†’ same output)
        seed = hashlib.md5(name.encode()).hexdigest()
        random.seed(int(seed, 16))
        
        first = random.choice(first_names)
        last = random.choice(last_names)
        
        return f"{first} {last}"
    
    @staticmethod
    def generate_test_data(table_name, sensitive_columns):
        """Generate anonymized test data from production"""
        # This would:
        # 1. Connect to production DB (read-only user)
        # 2. Read sensitive columns
        # 3. Apply masking/anonymization
        # 4. Write to test database
        # 5. Maintain referential integrity
        
        print(f"Generating test data for {table_name}")
        print(f"Masking columns: {sensitive_columns}")
        
        # Example transformation
        transformations = {
            'email': DataMasker.mask_email,
            'phone': DataMasker.mask_phone,
            'ssn': DataMasker.mask_ssn,
            'name': DataMasker.anonymize_name
        }
        
        return transformations
</pre>
</div>
</div>

<h3>Today's Hands-On Exercises</h3>
<div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <b>Exercise 1: Hospital Database Security (90 minutes)</b>
    <p>Secure a hospital patient management system:</p>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 15px 0;">
        <div>
            <b>Security Requirements:</b>
            <ol>
                <li>Create different user roles: doctor, nurse, admin, billing</li>
                <li>Encrypt patient SSN and medical records</li>
                <li>Implement row-level security (doctors see only their patients)</li>
                <li>Audit all access to sensitive data</li>
                <li>Backup encryption keys separately</li>
                <li>Mask data for testing environments</li>
            </ol>
        </div>
        
        <div>
            <b>Database Schema:</b>
            <ul>
                <li>patients: name, dob, ssn_encrypted, medical_history_encrypted</li>
                <li>doctors: name, specialization, license_number</li>
                <li>appointments: patient_id, doctor_id, date, notes</li>
                <li>prescriptions: patient_id, doctor_id, medication, dosage</li>
                <li>audit_log: timestamp, user_id, action, table_name, record_id</li>
            </ul>
        </div>
    </div>
    
    <b>Exercise 2: Security Audit & Hardening (60 minutes)</b>
    <p>Perform security audit on existing database:</p>
    
    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin: 15px 0;">
        <div style="background: #f8f9fa; padding: 10px; border-radius: 5px;">
            <b>Task 1: User Audit</b>
            <ul>
                <li>List all database users</li>
                <li>Check for default/weak passwords</li>
                <li>Identify users with excessive permissions</li>
                <li>Find inactive accounts</li>
            </ul>
        </div>
        
        <div style="background: #f8f9fa; padding: 10px; border-radius: 5px;">
            <b>Task 2: Permission Audit</b>
            <ul>
                <li>Map all user permissions</li>
                <li>Find tables with public access</li>
                <li>Identify risky permissions (DROP, TRUNCATE)</li>
                <li>Check for column-level security gaps</li>
            </ul>
        </div>
        
        <div style="background: #f8f9fa; padding: 10px; border-radius: 5px;">
            <b>Task 3: Data Protection Audit</b>
            <ul>
                <li>Identify unencrypted sensitive data</li>
                <li>Check backup encryption</li>
                <li>Verify audit logging is enabled</li>
                <li>Test SQL injection protections</li>
            </ul>
        </div>
    </div>
    
    <b>Exercise 3: Disaster Recovery Plan (30 minutes)</b>
    <p>Create database disaster recovery plan:</p>
    <ul>
        <li>Design backup strategy (full, incremental, differential)</li>
        <li>Create restore procedures for different scenarios</li>
        <li>Test backup restoration process</li>
        <li>Document emergency contact procedures</li>
        <li>Plan for encryption key recovery</li>
    </ul>
</div>

<h3>Homework Assignment</h3>
<div style="background-color: #fff0e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <b>Build a "Database Security Framework"</b>
    
    <b>Requirements:</b>
    <ol>
        <li><b>Security Assessment Tool:</b>
            <ul>
                <li>Automated database vulnerability scanner</li>
                <li>Check for weak passwords, excessive permissions</li>
                <li>Identify unencrypted sensitive data</li>
                <li>Test for SQL injection vulnerabilities</li>
                <li>Generate security score and recommendations</li>
            </ul>
        </li>
        
        <li><b>Access Control Manager:</b>
            <ul>
                <li>GUI/CLI for managing database users and roles</li>
                <li>Automated permission auditing and cleanup</li>
                <li>Just-in-time access requests and approvals</li>
                <li>Integration with corporate directory (simulated)</li>
                <li>Access certification and recertification workflows</li>
            </ul>
        </li>
        
        <li><b>Data Protection Suite:</b>
            <ul>
                <li>Automated data classification (PII, PCI, PHI detection)</li>
                <li>Column-level encryption management</li>
                <li>Key rotation automation</li>
                <li>Data masking for non-production environments</li>
                <li>Tokenization service for sensitive data</li>
            </ul>
        </li>
        
        <li><b>Monitoring & Compliance:</b>
            <ul>
                <li>Real-time security event monitoring</li>
                <li>Anomaly detection for suspicious access patterns</li>
                <li>Automated compliance reporting (GDPR, HIPAA, PCI-DSS)</li>
                <li>Audit trail maintenance and retention</li>
                <li>Alerting system for security incidents</li>
            </ul>
        </li>
    </ol>
    
    <b>Sample Implementation Architecture:</b>
    <pre style="background: #f5f5f5; padding: 10px; margin: 10px 0;">
security_framework/
â”œâ”€â”€ scanners/
â”‚   â”œâ”€â”€ vulnerability_scanner.py    # Finds security issues
â”‚   â”œâ”€â”€ permission_auditor.py       # Checks user permissions
â”‚   â”œâ”€â”€ data_classifier.py          # Identifies sensitive data
â”‚   â””â”€â”€ compliance_checker.py       # Validates against standards
â”œâ”€â”€ access_control/
â”‚   â”œâ”€â”€ user_manager.py             # Create/modify/delete users
â”‚   â”œâ”€â”€ role_manager.py             # RBAC management
â”‚   â”œâ”€â”€ permission_engine.py        # Grant/revoke permissions
â”‚   â””â”€â”€ access_request.py           # JIT access workflows
â”œâ”€â”€ data_protection/
â”‚   â”œâ”€â”€ encryption_manager.py       # Column-level encryption
â”‚   â”œâ”€â”€ key_manager.py              # Key generation/rotation
â”‚   â”œâ”€â”€ data_masking.py             # Test data anonymization
â”‚   â””â”€â”€ tokenization.py             # Data tokenization service
â”œâ”€â”€ monitoring/
â”‚   â”œâ”€â”€ audit_logger.py             # Comprehensive logging
â”‚   â”œâ”€â”€ anomaly_detector.py         # ML-based anomaly detection
â”‚   â”œâ”€â”€ alert_manager.py            # Security alerts
â”‚   â””â”€â”€ report_generator.py         # Compliance reports
â””â”€â”€ api/
    â”œâ”€â”€ security_api.py             # REST API for security ops
    â”œâ”€â”€ dashboard_api.py            # Data for security dashboard
    â””â”€â”€ webhook_handler.py          # Integration with other systems
    </pre>
    
    <b>Bonus Challenges:</b>
    <ul>
        <li>Implement machine learning for behavior-based anomaly detection</li>
        <li>Create a blockchain-based audit trail for maximum integrity</li>
        <li>Build a zero-trust database access proxy</li>
        <li>Implement quantum-resistant encryption algorithms</li>
        <li>Create a database firewall with deep packet inspection</li>
        <li>Build a security orchestration and automated response (SOAR) system</li>
    </ul>
</div>

<h3>Key Learning Points:</h3>
<ol>
    <li><b>Principle of Least Privilege:</b> Give users only necessary permissions</li>
    <li><b>Role-Based Access Control:</b> Organize permissions by roles, not individual users</li>
    <li><b>Data Encryption:</b> Encrypt sensitive data at rest and in transit</li>
    <li><b>Audit Logging:</b> Track all database access and changes</li>
    <li><b>Secure Configuration:</b> Harden database settings for security</li>
    <li><b>Backup Security:</b> Protect backups as carefully as live data</li>
</ol>

<div style="background-color: #e8f5e8; padding: 15px; margin: 20px 0; border-radius: 5px;">
    <h3>ğŸ’¡ Database Security Best Practices:</h3>
    <ul>
        <li><b>Use Strong Authentication:</b> Complex passwords, multi-factor auth</li>
        <li><b>Implement Least Privilege:</b> Regular permission reviews and cleanup</li>
        <li><b>Encrypt Sensitive Data:</b> Both at rest and in transit</li>
        <li><b>Enable Auditing:</b> Log all access to sensitive data</li>
        <li><b>Regular Updates:</b> Keep database software patched</li>
        <li><b>Network Security:</b> Firewall rules, VPN access, no public endpoints</li>
        <li><b>Secure Backups:</b> Encrypt backups, test restoration regularly</li>
        <li><b>Monitor Activity:</b> Real-time monitoring for suspicious behavior</li>
        <li><b>Data Classification:</b> Identify and protect sensitive data</li>
        <li><b>Incident Response Plan:</b> Be prepared for security breaches</li>
    </ul>
</div>

<h3>Security Compliance Framework</h3>
<div style="background: white; padding: 20px; border-radius: 10px; border: 2px solid #4A90E2;">
    <div style="text-align: center; margin: 20px 0;">
        <div style="display: inline-block; text-align: left;">
            <div style="font-weight: bold; color: #4A90E2; margin-bottom: 10px;">ğŸ“‹ Database Security Compliance Checklist:</div>
            <div style="margin-left: 20px;">
                <div>âœ… <b>Authentication:</b> Strong passwords + MFA for admins</div>
                <div>âœ… <b>Authorization:</b> RBAC with least privilege</div>
                <div>âœ… <b>Encryption:</b> TLS 1.2+ for data in transit</div>
                <div>âœ… <b>Encryption:</b> TDE or column-level for data at rest</div>
                <div>âœ… <b>Auditing:</b> All privileged actions logged</div>
                <div>âœ… <b>Monitoring:</b> Real-time alerting for anomalies</div>
                <div>âœ… <b>Backups:</b> Encrypted, tested, off-site storage</div>
                <div>âœ… <b>Patching:</b> Regular security updates applied</div>
                <div>âœ… <b>Network:</b> Firewall rules, no direct internet access</div>
                <div>âœ… <b>Training:</b> Security awareness for all DB users</div>
            </div>
        </div>
    </div>
    
    <div style="margin-top: 20px; padding: 15px; background: #f8f9fa; border-radius: 5px;">
        <p><b>ğŸ“ Pro Tip:</b> Schedule regular "security health checks" - review users, permissions, and logs monthly.</p>
        <p><b>âš¡ Quick Win:</b> Enable SSL/TLS for all database connections - it's easy and prevents eavesdropping.</p>
        <p><b>âš ï¸ Remember:</b> Database security is not "set and forget" - it requires continuous monitoring and improvement.</p>
        <p><b>ğŸ’¡ Golden Rule:</b> If you don't need the data, don't collect it. If you collect it, protect it properly!</p>
    </div>
</div>
`
            },
            "6-24": {
                icon: "fa-graduation-cap",
                title: "Quarter 2 Final Project: Complete Database System",
                html: `<h1>Month 6, Week 24: Quarter 2 Final Project</h1>
<p>ğŸ“ <b>GRAND FINALE:</b> Build a complete, secure, production-ready database system! Apply everything learned in Quarter 2.</p>

<div class="analogy-box">
    <b>Analogy: Building Your First Skyscraper ğŸ™ï¸</b><br/>
    
    Database Design: Architectural blueprints<br/>
    Tables & Relationships: Building structure (floors, rooms)<br/>
    Indexes: Elevators and staircases (fast access)<br/>
    Security: Locks, security cameras, access cards<br/>
    Python Interface: Building management system<br/>
    Backup/Recovery: Fire escape and emergency plans<br/>
    Performance Tuning: HVAC and electrical optimization<br/>
    Documentation: Building manual and maintenance guide<br/>
</div>

<h3>ğŸ¯ Final Project: Build a University Management System</h3>
<div style="background-color: #f0f8ff; padding: 20px; margin: 15px 0; border-radius: 10px; border: 3px solid #4A90E2;">
    <h4>ğŸ† Project Mission Statement</h4>
    <p><b>Goal:</b> Design and implement a complete, secure, high-performance database system for "Python University"</p>
    <p><b>Scope:</b> Handle 10,000+ students, 500+ staff, courses, grades, scheduling, billing, and security</p>
    <p><b>Tech Stack:</b> PostgreSQL + Python + Security Best Practices</p>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">
        <div>
            <h5>ğŸ“ˆ Success Metrics:</h5>
            <ul>
                <li>âœ… All database tables properly normalized</li>
                <li>âœ… Optimal indexes for performance</li>
                <li>âœ… Complete security implementation</li>
                <li>âœ… Python interface with all CRUD operations</li>
                <li>âœ… Backup and recovery system</li>
                <li>âœ… Comprehensive documentation</li>
            </ul>
        </div>
        <div>
            <h5>ğŸ… Skills Demonstrated:</h5>
            <ul>
                <li>Database Design & Normalization</li>
                <li>SQL Query Optimization</li>
                <li>Security & Access Control</li>
                <li>Python-Database Integration</li>
                <li>System Architecture</li>
                <li>Documentation & Testing</li>
            </ul>
        </div>
    </div>
</div>

<h3>ğŸ“Š Phase 1: Database Design & Schema</h3>
<b>Design a comprehensive university schema:</b>
<div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">

<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
<pre style='background-color: #36454f; color: #fff; border-radius: 5px; padding: 10px;'>
-- ========= CORE ENTITIES =========

-- 1. PEOPLE
CREATE TABLE people (
    person_id SERIAL PRIMARY KEY,
    ssn_encrypted BYTEA,  -- Encrypted SSN
    first_name TEXT NOT NULL,
    last_name TEXT NOT NULL,
    date_of_birth DATE,
    email TEXT UNIQUE NOT NULL,
    phone_encrypted BYTEA,
    address_json JSONB,  -- Structured address
    emergency_contact JSONB,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    is_active BOOLEAN DEFAULT true
);

-- 2. STUDENTS (extends people)
CREATE TABLE students (
    student_id INTEGER PRIMARY KEY REFERENCES people(person_id),
    student_number TEXT UNIQUE NOT NULL,
    enrollment_date DATE NOT NULL,
    graduation_date DATE,
    major_id INTEGER REFERENCES majors(major_id),
    minor_id INTEGER REFERENCES majors(major_id),
    gpa DECIMAL(3,2),
    academic_standing TEXT CHECK (
        academic_standing IN ('Good', 'Probation', 'Suspended')
    ),
    total_credits INTEGER DEFAULT 0
) INHERITS (people);

-- 3. FACULTY (extends people)
CREATE TABLE faculty (
    faculty_id INTEGER PRIMARY KEY REFERENCES people(person_id),
    employee_id TEXT UNIQUE NOT NULL,
    hire_date DATE NOT NULL,
    department_id INTEGER REFERENCES departments(department_id),
    rank TEXT CHECK (rank IN (
        'Professor', 'Associate Professor', 
        'Assistant Professor', 'Lecturer'
    )),
    office_number TEXT,
    office_hours JSONB,  -- Store as {"monday": "9-11", ...}
    research_interests TEXT[]
) INHERITS (people);
</pre>

<pre style='background-color: #36454f; color: #fff; border-radius: 5px; padding: 10px;'>
-- ========= ACADEMIC STRUCTURE =========

-- 4. DEPARTMENTS
CREATE TABLE departments (
    department_id SERIAL PRIMARY KEY,
    department_code TEXT UNIQUE NOT NULL,  -- e.g., "CS", "MATH"
    department_name TEXT NOT NULL,
    building TEXT,
    office_phone TEXT,
    chairperson_id INTEGER REFERENCES faculty(faculty_id),
    annual_budget DECIMAL(12,2),
    established_year INTEGER
);

-- 5. MAJORS
CREATE TABLE majors (
    major_id SERIAL PRIMARY KEY,
    major_code TEXT UNIQUE NOT NULL,  -- e.g., "CS-BS"
    major_name TEXT NOT NULL,
    department_id INTEGER REFERENCES departments(department_id),
    degree_type TEXT CHECK (degree_type IN (
        'BS', 'BA', 'MS', 'PhD', 'Certificate'
    )),
    total_credits_required INTEGER,
    description TEXT,
    prerequisites JSONB  -- Structured prerequisites
);

-- 6. COURSES
CREATE TABLE courses (
    course_id SERIAL PRIMARY KEY,
    course_code TEXT UNIQUE NOT NULL,  -- e.g., "CS101"
    course_name TEXT NOT NULL,
    department_id INTEGER REFERENCES departments(department_id),
    credits INTEGER CHECK (credits BETWEEN 1 AND 5),
    description TEXT,
    prerequisites INTEGER[],  -- Array of course_ids
    corequisites INTEGER[],   -- Array of course_ids
    max_capacity INTEGER,
    is_active BOOLEAN DEFAULT true
);

-- 7. COURSE SECTIONS (Specific offerings)
CREATE TABLE course_sections (
    section_id SERIAL PRIMARY KEY,
    course_id INTEGER REFERENCES courses(course_id),
    section_number TEXT NOT NULL,  -- e.g., "01", "02"
    semester TEXT NOT NULL,  -- e.g., "Fall2024"
    year INTEGER NOT NULL,
    faculty_id INTEGER REFERENCES faculty(faculty_id),
    room_id INTEGER REFERENCES classrooms(room_id),
    schedule_json JSONB NOT NULL,  -- {"days": ["Mon", "Wed"], "time": "10:00-11:15"}
    enrollment_count INTEGER DEFAULT 0,
    CHECK (enrollment_count <= (
        SELECT max_capacity FROM courses WHERE course_id = course_sections.course_id
    )),
    UNIQUE(course_id, section_number, semester, year)
);
</pre>
</div>

<h4>ğŸ“ Academic Operations Tables</h4>
<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 15px;">
<pre style='background-color: #f1f1f1; border-radius: 5px; padding: 10px;'>
-- ========= ENROLLMENTS & GRADES =========

-- 8. ENROLLMENTS
CREATE TABLE enrollments (
    enrollment_id SERIAL PRIMARY KEY,
    student_id INTEGER REFERENCES students(student_id),
    section_id INTEGER REFERENCES course_sections(section_id),
    enrollment_date DATE NOT NULL DEFAULT CURRENT_DATE,
    enrollment_status TEXT DEFAULT 'Enrolled' CHECK (
        enrollment_status IN ('Enrolled', 'Dropped', 'Withdrawn', 'Completed')
    ),
    midterm_grade DECIMAL(5,2) CHECK (
        midterm_grade BETWEEN 0 AND 100
    ),
    final_grade DECIMAL(5,2) CHECK (
        final_grade BETWEEN 0 AND 100
    ),
    letter_grade CHAR(2) CHECK (
        letter_grade IN ('A', 'A-', 'B+', 'B', 'B-', 'C+', 'C', 'C-', 'D+', 'D', 'F', 'W')
    ),
    grade_points DECIMAL(3,2) GENERATED ALWAYS AS (
        CASE letter_grade
            WHEN 'A' THEN 4.0
            WHEN 'A-' THEN 3.7
            WHEN 'B+' THEN 3.3
            WHEN 'B' THEN 3.0
            WHEN 'B-' THEN 2.7
            WHEN 'C+' THEN 2.3
            WHEN 'C' THEN 2.0
            WHEN 'C-' THEN 1.7
            WHEN 'D+' THEN 1.3
            WHEN 'D' THEN 1.0
            WHEN 'F' THEN 0.0
            ELSE NULL
        END
    ) STORED,
    credits_earned INTEGER GENERATED ALWAYS AS (
        CASE 
            WHEN letter_grade IN ('A', 'A-', 'B+', 'B', 'B-', 'C+', 'C', 'C-', 'D+', 'D') 
            THEN (SELECT credits FROM courses c 
                  JOIN course_sections cs ON c.course_id = cs.course_id 
                  WHERE cs.section_id = enrollments.section_id)
            ELSE 0
        END
    ) STORED,
    instructor_comments TEXT,
    UNIQUE(student_id, section_id)
);

-- 9. ASSIGNMENTS (for each course section)
CREATE TABLE assignments (
    assignment_id SERIAL PRIMARY KEY,
    section_id INTEGER REFERENCES course_sections(section_id),
    assignment_name TEXT NOT NULL,
    assignment_type TEXT CHECK (
        assignment_type IN ('Homework', 'Quiz', 'Midterm', 'Project', 'Final')
    ),
    max_points INTEGER NOT NULL,
    weight DECIMAL(3,2) CHECK (
        weight BETWEEN 0 AND 1
    ),  -- e.g., 0.15 for 15% of grade
    due_date TIMESTAMP,
    description TEXT,
    rubric_json JSONB  -- Grading rubric
);

-- 10. GRADES (individual assignment grades)
CREATE TABLE grades (
    grade_id SERIAL PRIMARY KEY,
    enrollment_id INTEGER REFERENCES enrollments(enrollment_id),
    assignment_id INTEGER REFERENCES assignments(assignment_id),
    points_earned DECIMAL(5,2),
    percentage DECIMAL(5,2) GENERATED ALWAYS AS (
        points_earned / (SELECT max_points FROM assignments 
                         WHERE assignment_id = grades.assignment_id) * 100
    ) STORED,
    graded_by INTEGER REFERENCES faculty(faculty_id),
    graded_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    comments TEXT,
    UNIQUE(enrollment_id, assignment_id)
);
</pre>

<pre style='background-color: #f1f1f1; border-radius: 5px; padding: 10px;'>
-- ========= INFRASTRUCTURE & SUPPORT =========

-- 11. CLASSROOMS
CREATE TABLE classrooms (
    room_id SERIAL PRIMARY KEY,
    building_code TEXT NOT NULL,
    room_number TEXT NOT NULL,
    capacity INTEGER,
    room_type TEXT CHECK (
        room_type IN ('Lecture Hall', 'Classroom', 'Lab', 'Seminar Room')
    ),
    equipment JSONB,  -- {"projector": true, "computers": 25, ...}
    is_accessible BOOLEAN DEFAULT true,
    UNIQUE(building_code, room_number)
);

-- 12. LIBRARY SYSTEM
CREATE TABLE library_books (
    book_id SERIAL PRIMARY KEY,
    isbn TEXT UNIQUE,
    title TEXT NOT NULL,
    authors TEXT[],
    publisher TEXT,
    publication_year INTEGER,
    genre TEXT,
    total_copies INTEGER DEFAULT 1,
    available_copies INTEGER,
    location TEXT  -- Shelf location
);

CREATE TABLE book_loans (
    loan_id SERIAL PRIMARY KEY,
    book_id INTEGER REFERENCES library_books(book_id),
    student_id INTEGER REFERENCES students(student_id),
    checkout_date DATE DEFAULT CURRENT_DATE,
    due_date DATE GENERATED ALWAYS AS (
        checkout_date + INTERVAL '14 days'
    ) STORED,
    return_date DATE,
    late_fee DECIMAL(5,2) DEFAULT 0,
    CHECK (return_date IS NULL OR return_date >= checkout_date)
);

-- 13. FINANCIAL SYSTEM
CREATE TABLE tuition_rates (
    rate_id SERIAL PRIMARY KEY,
    student_type TEXT CHECK (
        student_type IN ('Undergraduate', 'Graduate', 'International')
    ),
    semester TEXT,
    year INTEGER,
    per_credit_rate DECIMAL(7,2),
    flat_fee DECIMAL(7,2),
    effective_date DATE,
    UNIQUE(student_type, semester, year)
);

CREATE TABLE student_accounts (
    account_id SERIAL PRIMARY KEY,
    student_id INTEGER UNIQUE REFERENCES students(student_id),
    balance DECIMAL(10,2) DEFAULT 0,
    last_payment_date DATE,
    payment_plan TEXT CHECK (
        payment_plan IN ('Full', 'Installment', 'Financial Aid')
    )
);

CREATE TABLE transactions (
    transaction_id SERIAL PRIMARY KEY,
    account_id INTEGER REFERENCES student_accounts(account_id),
    transaction_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    transaction_type TEXT CHECK (
        transaction_type IN ('Tuition', 'Fee', 'Payment', 'Refund', 'Late Fee')
    ),
    amount DECIMAL(10,2),
    description TEXT,
    reference_number TEXT,
    processed_by INTEGER REFERENCES staff(staff_id)
);
</pre>
</div>

<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 15px;">
<pre style='background-color: #4CAF50; color: white; border-radius: 5px; padding: 10px;'>
-- ========= SECURITY & AUDIT TABLES =========

-- 14. USER ACCOUNTS (for login)
CREATE TABLE user_accounts (
    user_id SERIAL PRIMARY KEY,
    person_id INTEGER UNIQUE REFERENCES people(person_id),
    username TEXT UNIQUE NOT NULL,
    password_hash TEXT NOT NULL,  -- bcrypt hashed
    mfa_secret TEXT,  -- For TOTP
    account_locked BOOLEAN DEFAULT false,
    locked_until TIMESTAMP,
    failed_attempts INTEGER DEFAULT 0,
    last_login TIMESTAMP,
    password_changed_date DATE DEFAULT CURRENT_DATE,
    must_change_password BOOLEAN DEFAULT false,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- 15. ROLES & PERMISSIONS
CREATE TABLE roles (
    role_id SERIAL PRIMARY KEY,
    role_name TEXT UNIQUE NOT NULL,
    description TEXT,
    is_system_role BOOLEAN DEFAULT false
);

CREATE TABLE permissions (
    permission_id SERIAL PRIMARY KEY,
    permission_name TEXT UNIQUE NOT NULL,
    description TEXT,
    table_name TEXT,
    action TEXT CHECK (action IN (
        'SELECT', 'INSERT', 'UPDATE', 'DELETE', 'ALL'
    ))
);

CREATE TABLE role_permissions (
    role_id INTEGER REFERENCES roles(role_id),
    permission_id INTEGER REFERENCES permissions(permission_id),
    granted_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    granted_by INTEGER REFERENCES user_accounts(user_id),
    PRIMARY KEY (role_id, permission_id)
);

CREATE TABLE user_roles (
    user_id INTEGER REFERENCES user_accounts(user_id),
    role_id INTEGER REFERENCES roles(role_id),
    assigned_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    assigned_by INTEGER REFERENCES user_accounts(user_id),
    expires_at TIMESTAMP,
    PRIMARY KEY (user_id, role_id)
);

-- 16. AUDIT LOGGING
CREATE TABLE audit_log (
    log_id BIGSERIAL PRIMARY KEY,
    event_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    user_id INTEGER REFERENCES user_accounts(user_id),
    event_type TEXT NOT NULL,
    table_name TEXT,
    record_id INTEGER,
    old_values JSONB,
    new_values JSONB,
    ip_address INET,
    user_agent TEXT,
    application_name TEXT
);

-- Enable audit trigger on sensitive tables
CREATE OR REPLACE FUNCTION audit_trigger_function()
RETURNS TRIGGER AS $$
BEGIN
    INSERT INTO audit_log (
        user_id, event_type, table_name, 
        record_id, old_values, new_values
    )
    VALUES (
        current_setting('app.user_id', TRUE)::INTEGER,
        TG_OP,
        TG_TABLE_NAME,
        COALESCE(NEW.id, OLD.id),
        CASE WHEN TG_OP IN ('UPDATE', 'DELETE') 
             THEN row_to_json(OLD) 
             ELSE NULL END,
        CASE WHEN TG_OP IN ('INSERT', 'UPDATE') 
             THEN row_to_json(NEW) 
             ELSE NULL END
    );
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;
</pre>

<pre style='background-color: #36454f; color: #fff; border-radius: 5px; padding: 10px;'>
-- ========= PERFORMANCE OPTIMIZATION =========

-- 17. MATERIALIZED VIEWS for Reporting
CREATE MATERIALIZED VIEW student_performance_summary AS
SELECT 
    s.student_id,
    s.first_name || ' ' || s.last_name AS student_name,
    COUNT(DISTINCT e.section_id) AS courses_taken,
    SUM(e.credits_earned) AS total_credits,
    AVG(e.final_grade) AS average_grade,
    MAX(e.final_grade) AS highest_grade,
    MIN(e.final_grade) AS lowest_grade,
    COUNT(CASE WHEN e.letter_grade = 'F' THEN 1 END) AS failed_courses,
    s.gpa,
    s.academic_standing
FROM students s
LEFT JOIN enrollments e ON s.student_id = e.student_id
WHERE e.enrollment_status = 'Completed'
GROUP BY s.student_id, s.first_name, s.last_name, s.gpa, s.academic_standing
WITH DATA;

-- Refresh materialized view daily
CREATE OR REPLACE FUNCTION refresh_student_summary()
RETURNS void AS $$
BEGIN
    REFRESH MATERIALIZED VIEW CONCURRENTLY student_performance_summary;
END;
$$ LANGUAGE plpgsql;

-- 18. INDEXES for Performance
-- Primary keys are automatically indexed
-- Add additional indexes for common queries

-- People table indexes
CREATE INDEX idx_people_email ON people(email);
CREATE INDEX idx_people_name ON people(last_name, first_name);
CREATE INDEX idx_people_active ON people(is_active) WHERE is_active = true;

-- Students indexes
CREATE INDEX idx_students_major ON students(major_id);
CREATE INDEX idx_students_standing ON students(academic_standing);
CREATE INDEX idx_students_gpa ON students(gpa DESC);

-- Enrollment indexes
CREATE INDEX idx_enrollments_student ON enrollments(student_id);
CREATE INDEX idx_enrollments_section ON enrollments(section_id);
CREATE INDEX idx_enrollments_status ON enrollments(enrollment_status);
CREATE INDEX idx_enrollments_grade ON enrollments(letter_grade);
CREATE INDEX idx_enrollments_date ON enrollments(enrollment_date DESC);

-- Course indexes
CREATE INDEX idx_courses_department ON courses(department_id);
CREATE INDEX idx_courses_code ON courses(course_code);
CREATE INDEX idx_courses_active ON courses(is_active) WHERE is_active = true;

-- Section indexes
CREATE INDEX idx_sections_course ON course_sections(course_id);
CREATE INDEX idx_sections_faculty ON course_sections(faculty_id);
CREATE INDEX idx_sections_semester ON course_sections(semester, year);
CREATE INDEX idx_sections_enrollment ON course_sections(enrollment_count);

-- Grades indexes
CREATE INDEX idx_grades_enrollment ON grades(enrollment_id);
CREATE INDEX idx_grades_assignment ON grades(assignment_id);
CREATE INDEX idx_grades_percentage ON grades(percentage DESC);

-- Transaction indexes
CREATE INDEX idx_transactions_account ON transactions(account_id);
CREATE INDEX idx_transactions_date ON transactions(transaction_date DESC);
CREATE INDEX idx_transactions_type ON transactions(transaction_type);

-- Audit log indexes (for fast lookups)
CREATE INDEX idx_audit_user ON audit_log(user_id);
CREATE INDEX idx_audit_time ON audit_log(event_time DESC);
CREATE INDEX idx_audit_type ON audit_log(event_type);
CREATE INDEX idx_audit_table ON audit_log(table_name);

-- 19. PARTITIONING for large tables (PostgreSQL 10+)
-- Partition enrollments by year for better performance
CREATE TABLE enrollments_2023 (
    CHECK (EXTRACT(YEAR FROM enrollment_date) = 2023)
) INHERITS (enrollments);

CREATE TABLE enrollments_2024 (
    CHECK (EXTRACT(YEAR FROM enrollment_date) = 2024)
) INHERITS (enrollments);

-- Create indexes on partitions
CREATE INDEX idx_enrollments_2023_student 
ON enrollments_2023(student_id);

CREATE INDEX idx_enrollments_2024_student 
ON enrollments_2024(student_id);
</pre>
</div>
</div>

<h3>ğŸ” Phase 2: Security Implementation</h3>
<div style="background-color: #fff0e6; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h4>Implement Comprehensive Security Measures</h4>
    
<pre style='background-color: #36454f; color: #fff; border-radius: 5px; padding: 15px; margin: 10px 0;'>
-- ========= SECURITY CONFIGURATION =========

-- 1. Create Roles with Least Privilege
CREATE ROLE university_admin WITH 
    CREATEDB CREATEROLE 
    LOGIN PASSWORD 'AdminSecure2024!';

CREATE ROLE faculty_member WITH 
    NOCREATEDB NOCREATEROLE 
    LOGIN PASSWORD 'FacultySecure2024!';

CREATE ROLE student_user WITH 
    NOCREATEDB NOCREATEROLE 
    LOGIN PASSWORD 'StudentSecure2024!';

CREATE ROLE reporting_user WITH 
    NOCREATEDB NOCREATEROLE 
    LOGIN PASSWORD 'ReportSecure2024!';

-- 2. Database-level permissions
GRANT CONNECT ON DATABASE university_db TO 
    university_admin, faculty_member, student_user, reporting_user;

-- 3. Schema permissions
GRANT USAGE ON SCHEMA public TO 
    university_admin, faculty_member, student_user, reporting_user;

-- 4. Table permissions by role

-- University Admin: Full access
GRANT ALL PRIVILEGES ON ALL TABLES IN SCHEMA public TO university_admin;
GRANT ALL PRIVILEGES ON ALL SEQUENCES IN SCHEMA public TO university_admin;
GRANT EXECUTE ON ALL FUNCTIONS IN SCHEMA public TO university_admin;

-- Faculty: Limited to their data
GRANT SELECT, INSERT, UPDATE ON 
    courses, course_sections, assignments, grades 
TO faculty_member;

-- Row-Level Security for faculty
ALTER TABLE grades ENABLE ROW LEVEL SECURITY;

CREATE POLICY faculty_own_grades ON grades
    FOR ALL TO faculty_member
    USING (
        graded_by = current_user_id() 
        OR section_id IN (
            SELECT section_id FROM course_sections 
            WHERE faculty_id = current_user_id()
        )
    );

-- Students: Very limited access
GRANT SELECT ON 
    courses, course_sections, enrollments, grades 
TO student_user;

-- Row-Level Security for students
CREATE POLICY student_own_grades ON grades
    FOR SELECT TO student_user
    USING (
        enrollment_id IN (
            SELECT enrollment_id FROM enrollments 
            WHERE student_id = current_user_id()
        )
    );

-- Reporting: Read-only
GRANT SELECT ON ALL TABLES IN SCHEMA public TO reporting_user;

-- 5. Column-level security for sensitive data
-- Hide SSN from most users
REVOKE ALL ON people(ssn_encrypted) FROM PUBLIC;
GRANT SELECT (ssn_encrypted) ON people TO university_admin;

-- Hide salary information
CREATE VIEW faculty_public AS
SELECT 
    faculty_id, first_name, last_name, email,
    department_id, rank, office_number, 
    office_hours, research_interests
FROM faculty;

GRANT SELECT ON faculty_public TO student_user, reporting_user;

-- 6. Enable SSL (in postgresql.conf)
-- ssl = on
-- ssl_cert_file = 'server.crt'
-- ssl_key_file = 'server.key'

-- 7. Set password policies
ALTER ROLE student_user 
    WITH PASSWORD 'StudentSecure2024!' 
    VALID UNTIL '2024-12-31';

-- 8. Create login trigger for security checks
CREATE OR REPLACE FUNCTION check_login_security()
RETURNS event_trigger AS $$
DECLARE
    user_name TEXT;
    login_count INTEGER;
BEGIN
    user_name := session_user;
    
    -- Check for too many connections
    SELECT COUNT(*) INTO login_count
    FROM pg_stat_activity
    WHERE usename = user_name;
    
    IF login_count > 5 THEN
        RAISE EXCEPTION 'Too many concurrent connections for user %', user_name;
    END IF;
    
    -- Log login attempt
    INSERT INTO audit_log (user_id, event_type, event_details)
    VALUES (
        (SELECT user_id FROM user_accounts WHERE username = user_name),
        'LOGIN_ATTEMPT',
        jsonb_build_object('timestamp', CURRENT_TIMESTAMP, 'client_addr', inet_client_addr())
    );
END;
$$ LANGUAGE plpgsql;

CREATE EVENT TRIGGER login_security_trigger
    ON login
    EXECUTE FUNCTION check_login_security();
</pre>

<h4>ğŸ”’ Data Encryption Implementation</h4>
<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 15px;">
<pre style='background-color: #f1f1f1; border-radius: 5px; padding: 10px;'>
# ========= PYTHON: SECURE DATABASE MANAGER =========
import psycopg2
from psycopg2 import sql
from cryptography.fernet import Fernet
import bcrypt
import os
from datetime import datetime

class UniversityDatabaseManager:
    def __init__(self):
        self.encryption_key = self.load_encryption_key()
        self.setup_database()
    
    def load_encryption_key(self):
        """Load encryption key from secure location"""
        key_path = os.getenv('ENCRYPTION_KEY_PATH', '/secure/keys/university.key')
        
        if os.path.exists(key_path):
            with open(key_path, 'rb') as f:
                return f.read()
        else:
            # Generate new key (first time setup)
            key = Fernet.generate_key()
            os.makedirs(os.path.dirname(key_path), exist_ok=True)
            with open(key_path, 'wb') as f:
                f.write(key)
            os.chmod(key_path, 0o600)  # Read/write only by owner
            return key
    
    def setup_database(self):
        """Initialize database connection with security"""
        self.conn = psycopg2.connect(
            host=os.getenv('DB_HOST', 'localhost'),
            database=os.getenv('DB_NAME', 'university_db'),
            user=os.getenv('DB_USER', 'university_admin'),
            password=os.getenv('DB_PASSWORD'),
            port=os.getenv('DB_PORT', 5432),
            sslmode='require',
            application_name='University Management System'
        )
        
        # Set security parameters
        with self.conn.cursor() as cur:
            cur.execute("SET statement_timeout = '30s'")
            cur.execute("SET lock_timeout = '10s'")
            cur.execute("SET idle_in_transaction_session_timeout = '5min'")
        
        self.conn.autocommit = False
    
    def encrypt_data(self, data):
        """Encrypt sensitive data"""
        fernet = Fernet(self.encryption_key)
        return fernet.encrypt(data.encode())
    
    def decrypt_data(self, encrypted_data):
        """Decrypt sensitive data"""
        fernet = Fernet(self.encryption_key)
        return fernet.decrypt(encrypted_data).decode()
    
    def hash_password(self, password):
        """Hash password with bcrypt"""
        return bcrypt.hashpw(
            password.encode(),
            bcrypt.gensalt(rounds=12)
        ).decode()
    
    def verify_password(self, password, hashed_password):
        """Verify bcrypt hashed password"""
        return bcrypt.checkpw(
            password.encode(),
            hashed_password.encode()
        )
    
    def create_student(self, student_data):
        """Create new student with encrypted sensitive data"""
        try:
            with self.conn.cursor() as cur:
                # Encrypt sensitive data
                ssn_encrypted = self.encrypt_data(student_data['ssn'])
                phone_encrypted = self.encrypt_data(student_data['phone'])
                
                # Insert into people table
                cur.execute("""
                    INSERT INTO people 
                    (first_name, last_name, date_of_birth, email, 
                     ssn_encrypted, phone_encrypted, address_json)
                    VALUES (%s, %s, %s, %s, %s, %s, %s)
                    RETURNING person_id
                """, (
                    student_data['first_name'],
                    student_data['last_name'],
                    student_data['dob'],
                    student_data['email'],
                    ssn_encrypted,
                    phone_encrypted,
                    student_data['address']
                ))
                
                person_id = cur.fetchone()[0]
                
                # Insert into students table
                student_number = f"S{datetime.now().year}{person_id:06d}"
                
                cur.execute("""
                    INSERT INTO students 
                    (student_id, student_number, enrollment_date, major_id)
                    VALUES (%s, %s, %s, %s)
                """, (
                    person_id,
                    student_number,
                    datetime.now().date(),
                    student_data['major_id']
                ))
                
                # Create user account
                password_hash = self.hash_password(student_data['initial_password'])
                
                cur.execute("""
                    INSERT INTO user_accounts 
                    (person_id, username, password_hash)
                    VALUES (%s, %s, %s)
                """, (
                    person_id,
                    student_data['email'],  # Use email as username
                    password_hash
                ))
                
                # Assign student role
                cur.execute("""
                    INSERT INTO user_roles (user_id, role_id)
                    VALUES (
                        (SELECT user_id FROM user_accounts WHERE person_id = %s),
                        (SELECT role_id FROM roles WHERE role_name = 'student')
                    )
                """, (person_id,))
                
                self.conn.commit()
                
                # Log the creation
                self.log_audit_event(
                    user_id=None,  # System action
                    event_type='STUDENT_CREATED',
                    table_name='students',
                    record_id=person_id,
                    details={'student_number': student_number}
                )
                
                return {'success': True, 'student_number': student_number}
                
        except Exception as e:
            self.conn.rollback()
            self.log_audit_event(
                user_id=None,
                event_type='STUDENT_CREATION_FAILED',
                details={'error': str(e), 'data': student_data}
            )
            return {'success': False, 'error': str(e)}
</pre>

<pre style='background-color: #f1f1f1; border-radius: 5px; padding: 10px;'>
    def log_audit_event(self, user_id, event_type, table_name=None, 
                       record_id=None, details=None):
        """Log security audit event"""
        with self.conn.cursor() as cur:
            cur.execute("""
                INSERT INTO audit_log 
                (user_id, event_type, table_name, record_id, event_details)
                VALUES (%s, %s, %s, %s, %s)
            """, (
                user_id,
                event_type,
                table_name,
                record_id,
                details
            ))
            self.conn.commit()
    
    def get_student_grades(self, student_id, requesting_user_id):
        """Get student grades with security checks"""
        try:
            with self.conn.cursor() as cur:
                # Check permissions
                cur.execute("""
                    SELECT role_name FROM user_roles ur
                    JOIN roles r ON ur.role_id = r.role_id
                    WHERE ur.user_id = %s
                """, (requesting_user_id,))
                
                roles = [row[0] for row in cur.fetchall()]
                
                # Students can only see their own grades
                if 'student' in roles:
                    cur.execute("""
                        SELECT person_id FROM user_accounts
                        WHERE user_id = %s
                    """, (requesting_user_id,))
                    
                    person_id = cur.fetchone()[0]
                    
                    if person_id != student_id:
                        raise PermissionError("Students can only view their own grades")
                
                # Get grades with decryption where needed
                cur.execute("""
                    SELECT 
                        c.course_code,
                        c.course_name,
                        cs.semester,
                        cs.year,
                        e.final_grade,
                        e.letter_grade,
                        e.credits_earned,
                        f.first_name || ' ' || f.last_name AS instructor
                    FROM enrollments e
                    JOIN course_sections cs ON e.section_id = cs.section_id
                    JOIN courses c ON cs.course_id = c.course_id
                    JOIN faculty f ON cs.faculty_id = f.faculty_id
                    WHERE e.student_id = %s
                    AND e.enrollment_status = 'Completed'
                    ORDER BY cs.year DESC, cs.semester, c.course_code
                """, (student_id,))
                
                grades = cur.fetchall()
                
                # Log the access
                self.log_audit_event(
                    user_id=requesting_user_id,
                    event_type='GRADES_ACCESSED',
                    table_name='enrollments',
                    record_id=student_id,
                    details={'courses_accessed': len(grades)}
                )
                
                return {'success': True, 'grades': grades}
                
        except Exception as e:
            self.log_audit_event(
                user_id=requesting_user_id,
                event_type='UNAUTHORIZED_ACCESS_ATTEMPT',
                details={'error': str(e), 'student_id': student_id}
            )
            return {'success': False, 'error': str(e)}
    
    def backup_database(self, backup_path):
        """Create secure database backup"""
        try:
            backup_file = f"{backup_path}/university_backup_{datetime.now().strftime('%Y%m%d_%H%M%S')}.sql"
            
            # Use pg_dump with encryption options
            import subprocess
            
            cmd = [
                'pg_dump',
                '-h', os.getenv('DB_HOST', 'localhost'),
                '-U', os.getenv('DB_USER', 'university_admin'),
                '-d', os.getenv('DB_NAME', 'university_db'),
                '-F', 'c',  # Custom format (compressed)
                '-f', backup_file,
                '--no-password'
            ]
            
            # Set password in environment for pg_dump
            env = os.environ.copy()
            env['PGPASSWORD'] = os.getenv('DB_PASSWORD')
            
            result = subprocess.run(cmd, env=env, capture_output=True, text=True)
            
            if result.returncode == 0:
                # Encrypt the backup file
                self.encrypt_backup_file(backup_file)
                
                # Log the backup
                self.log_audit_event(
                    user_id=None,
                    event_type='DATABASE_BACKUP_CREATED',
                    details={'backup_file': backup_file, 'size': os.path.getsize(backup_file)}
                )
                
                return {'success': True, 'backup_file': backup_file}
            else:
                raise Exception(f"Backup failed: {result.stderr}")
                
        except Exception as e:
            self.log_audit_event(
                user_id=None,
                event_type='BACKUP_FAILED',
                details={'error': str(e)}
            )
            return {'success': False, 'error': str(e)}
</pre>
</div>
</div>

<h3>âš¡ Phase 3: Performance Optimization</h3>
<div style="background-color: #e8f5e8; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h4>Optimize for 10,000+ Students</h4>
    
<pre style='background-color: #36454f; color: #fff; border-radius: 5px; padding: 15px; margin: 10px 0;'>
-- ========= PERFORMANCE OPTIMIZATION QUERIES =========

-- 1. Query Performance Analysis
EXPLAIN (ANALYZE, BUFFERS, VERBOSE)
SELECT 
    s.student_id,
    s.first_name || ' ' || s.last_name AS student_name,
    d.department_name,
    s.gpa,
    COUNT(e.enrollment_id) AS courses_taken,
    AVG(e.final_grade) AS average_grade
FROM students s
JOIN majors m ON s.major_id = m.major_id
JOIN departments d ON m.department_id = d.department_id
JOIN enrollments e ON s.student_id = e.student_id
WHERE s.academic_standing = 'Good'
  AND e.enrollment_status = 'Completed'
  AND e.final_grade IS NOT NULL
GROUP BY s.student_id, s.first_name, s.last_name, 
         d.department_name, s.gpa
HAVING AVG(e.final_grade) >= 80
ORDER BY s.gpa DESC
LIMIT 100;

-- 2. Create performance monitoring view
CREATE VIEW database_performance_stats AS
SELECT 
    schemaname,
    relname AS table_name,
    seq_scan,
    seq_tup_read,
    idx_scan,
    idx_tup_fetch,
    n_tup_ins,
    n_tup_upd,
    n_tup_del,
    n_live_tup,
    n_dead_tup,
    last_vacuum,
    last_autovacuum,
    last_analyze,
    last_autoanalyze
FROM pg_stat_user_tables
ORDER BY n_live_tup DESC;

-- 3. Slow query logging (configure in postgresql.conf)
-- log_min_duration_statement = 1000  # Log queries > 1 second
-- log_checkpoints = on
-- log_connections = on
-- log_disconnections = on

-- 4. Create query to find missing indexes
SELECT
    schemaname,
    tablename,
    attname,
    n_distinct,
    correlation
FROM pg_stats
WHERE schemaname NOT IN ('pg_catalog', 'information_schema')
  AND n_distinct > 0
  AND correlation IS NOT NULL
  AND (n_distinct::float / (SELECT reltuples 
                           FROM pg_class 
                           WHERE relname = tablename)) > 0.1
ORDER BY 
    (n_distinct::float / (SELECT reltuples 
                         FROM pg_class 
                         WHERE relname = tablename)) DESC;

-- 5. Vacuum and Analyze schedule
-- Create maintenance function
CREATE OR REPLACE FUNCTION perform_maintenance()
RETURNS void AS $$
BEGIN
    -- Vacuum tables with many dead tuples
    VACUUM (VERBOSE, ANALYZE) enrollments;
    VACUUM (VERBOSE, ANALYZE) grades;
    VACUUM (VERBOSE, ANALYZE) audit_log;
    
    -- Update statistics
    ANALYZE;
    
    -- Refresh materialized views
    REFRESH MATERIALIZED VIEW CONCURRENTLY student_performance_summary;
    
    -- Log maintenance
    INSERT INTO audit_log (event_type, event_details)
    VALUES ('DATABASE_MAINTENANCE', 
            jsonb_build_object('timestamp', CURRENT_TIMESTAMP));
END;
$$ LANGUAGE plpgsql;

-- 6. Connection pool configuration
-- In postgresql.conf:
-- max_connections = 100
-- shared_buffers = 4GB  # 25% of RAM for dedicated server
-- work_mem = 16MB
-- maintenance_work_mem = 256MB
-- effective_cache_size = 12GB  # 75% of RAM

-- 7. Create performance alerts
CREATE TABLE performance_alerts (
    alert_id SERIAL PRIMARY KEY,
    alert_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    alert_type TEXT CHECK (alert_type IN (
        'SLOW_QUERY', 'HIGH_CONNECTIONS', 'DISK_SPACE', 'DEADLOCKS'
    )),
    alert_details JSONB,
    resolved BOOLEAN DEFAULT false,
    resolved_at TIMESTAMP,
    resolved_by TEXT
);

-- Function to check for slow queries
CREATE OR REPLACE FUNCTION check_slow_queries()
RETURNS void AS $$
DECLARE
    slow_count INTEGER;
BEGIN
    SELECT COUNT(*) INTO slow_count
    FROM pg_stat_activity
    WHERE state = 'active'
      AND query_start < NOW() - INTERVAL '30 seconds'
      AND query NOT LIKE '%pg_stat_activity%';
    
    IF slow_count > 5 THEN
        INSERT INTO performance_alerts (alert_type, alert_details)
        VALUES (
            'SLOW_QUERY',
            jsonb_build_object(
                'slow_queries_count', slow_count,
                'timestamp', CURRENT_TIMESTAMP
            )
        );
    END IF;
END;
$$ LANGUAGE plpgsql;

-- 8. Create database size monitoring
CREATE VIEW database_size_stats AS
SELECT
    schemaname,
    tablename,
    pg_size_pretty(pg_total_relation_size(schemaname || '.' || tablename)) AS total_size,
    pg_size_pretty(pg_relation_size(schemaname || '.' || tablename)) AS table_size,
    pg_size_pretty(pg_total_relation_size(schemaname || '.' || tablename) - 
                   pg_relation_size(schemaname || '.' || tablename)) AS index_size,
    n_live_tup AS row_count
FROM pg_tables t
JOIN pg_stat_user_tables s ON t.schemaname = s.schemaname AND t.tablename = s.relname
WHERE t.schemaname NOT IN ('pg_catalog', 'information_schema')
ORDER BY pg_total_relation_size(schemaname || '.' || tablename) DESC;
</pre>

<h4>ğŸ“Š Monitoring Dashboard Queries</h4>
<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 15px;">
<pre style='background-color: #f1f1f1; border-radius: 5px; padding: 10px;'>
-- ========= REAL-TIME MONITORING QUERIES =========

-- 1. Current database activity
SELECT 
    pid,
    usename,
    application_name,
    client_addr,
    state,
    query_start,
    now() - query_start AS query_duration,
    LEFT(query, 100) AS query_preview
FROM pg_stat_activity
WHERE state != 'idle'
  AND query NOT LIKE '%pg_stat_activity%'
ORDER BY query_duration DESC
LIMIT 10;

-- 2. Lock monitoring
SELECT 
    locktype,
    relation::regclass,
    mode,
    granted,
    pid,
    usename,
    query_start,
    LEFT(query, 100) AS query_preview
FROM pg_locks l
JOIN pg_stat_activity a ON l.pid = a.pid
WHERE NOT granted OR mode IN ('ExclusiveLock', 'AccessExclusiveLock')
ORDER BY query_start;

-- 3. Index usage statistics
SELECT 
    schemaname,
    relname AS table_name,
    indexrelname AS index_name,
    idx_scan,
    idx_tup_read,
    idx_tup_fetch,
    pg_size_pretty(pg_relation_size(indexrelid)) AS index_size,
    idx_scan::float / NULLIF(idx_scan + seq_scan, 0) AS index_usage_ratio
FROM pg_stat_user_indexes
JOIN pg_stat_user_tables USING (relid)
WHERE idx_scan + seq_scan > 0
ORDER BY index_usage_ratio NULLS LAST, idx_scan DESC;

-- 4. Cache hit ratios
SELECT 
    sum(heap_blks_read) AS heap_read,
    sum(heap_blks_hit)  AS heap_hit,
    sum(heap_blks_hit) / 
        (sum(heap_blks_hit) + sum(heap_blks_read)) AS ratio
FROM pg_statio_user_tables;

-- 5. Table bloat estimation
SELECT
    schemaname,
    tablename,
    pg_size_pretty(pg_relation_size(schemaname || '.' || tablename)) AS table_size,
    pg_size_pretty(pg_total_relation_size(schemaname || '.' || tablename)) AS total_size,
    n_dead_tup,
    n_live_tup,
    round((n_dead_tup::numeric / (n_live_tup + n_dead_tup) * 100), 2) AS dead_tuple_percent
FROM pg_stat_user_tables
WHERE n_live_tup + n_dead_tup > 0
ORDER BY dead_tuple_percent DESC
LIMIT 10;
</pre>

<pre style='background-color: #f1f1f1; border-radius: 5px; padding: 10px;'>
-- ========= BUSINESS INTELLIGENCE QUERIES =========

-- 1. Enrollment trends by department
SELECT 
    d.department_name,
    EXTRACT(YEAR FROM e.enrollment_date) AS year,
    EXTRACT(MONTH FROM e.enrollment_date) AS month,
    COUNT(DISTINCT e.student_id) AS student_count,
    COUNT(*) AS enrollment_count,
    AVG(e.final_grade) AS average_grade
FROM enrollments e
JOIN students s ON e.student_id = s.student_id
JOIN majors m ON s.major_id = m.major_id
JOIN departments d ON m.department_id = d.department_id
WHERE e.enrollment_status = 'Completed'
GROUP BY d.department_name, year, month
ORDER BY year DESC, month DESC, student_count DESC;

-- 2. Faculty performance metrics
SELECT 
    f.first_name || ' ' || f.last_name AS faculty_name,
    d.department_name,
    COUNT(DISTINCT cs.section_id) AS sections_taught,
    COUNT(DISTINCT e.student_id) AS students_taught,
    AVG(e.final_grade) AS average_grade_given,
    COUNT(CASE WHEN e.letter_grade = 'F' THEN 1 END) AS failed_students,
    ROUND(AVG(g.percentage), 2) AS average_assignment_score
FROM faculty f
JOIN departments d ON f.department_id = d.department_id
JOIN course_sections cs ON f.faculty_id = cs.faculty_id
JOIN enrollments e ON cs.section_id = e.section_id
LEFT JOIN grades g ON e.enrollment_id = g.enrollment_id
WHERE e.enrollment_status = 'Completed'
  AND cs.year = EXTRACT(YEAR FROM CURRENT_DATE)
GROUP BY f.faculty_id, f.first_name, f.last_name, d.department_name
ORDER BY average_grade_given DESC;

-- 3. Financial summary
SELECT 
    EXTRACT(YEAR FROM t.transaction_date) AS year,
    EXTRACT(MONTH FROM t.transaction_date) AS month,
    SUM(CASE WHEN t.transaction_type IN ('Tuition', 'Fee', 'Late Fee') 
             THEN t.amount ELSE 0 END) AS revenue,
    SUM(CASE WHEN t.transaction_type IN ('Payment', 'Refund') 
             THEN t.amount ELSE 0 END) AS payments,
    COUNT(DISTINCT t.account_id) AS accounts_affected,
    COUNT(*) AS transaction_count
FROM transactions t
WHERE t.transaction_date >= CURRENT_DATE - INTERVAL '12 months'
GROUP BY year, month
ORDER BY year DESC, month DESC;

-- 4. Retention analysis
WITH cohort_analysis AS (
    SELECT 
        EXTRACT(YEAR FROM s.enrollment_date) AS cohort_year,
        COUNT(DISTINCT s.student_id) AS starting_students,
        COUNT(DISTINCT CASE WHEN e.enrollment_date >= s.enrollment_date + INTERVAL '1 year' 
                            THEN s.student_id END) AS retained_year1,
        COUNT(DISTINCT CASE WHEN e.enrollment_date >= s.enrollment_date + INTERVAL '2 years' 
                            THEN s.student_id END) AS retained_year2,
        COUNT(DISTINCT CASE WHEN e.enrollment_date >= s.enrollment_date + INTERVAL '3 years' 
                            THEN s.student_id END) AS retained_year3
    FROM students s
    LEFT JOIN enrollments e ON s.student_id = e.student_id
    WHERE s.enrollment_date >= '2020-01-01'
    GROUP BY EXTRACT(YEAR FROM s.enrollment_date)
)
SELECT 
    cohort_year,
    starting_students,
    retained_year1,
    ROUND(retained_year1::numeric / starting_students * 100, 1) AS retention_year1_pct,
    retained_year2,
    ROUND(retained_year2::numeric / starting_students * 100, 1) AS retention_year2_pct,
    retained_year3,
    ROUND(retained_year3::numeric / starting_students * 100, 1) AS retention_year3_pct
FROM cohort_analysis
ORDER BY cohort_year;
</pre>
</div>
</div>

<h3>ğŸ† Phase 4: Complete Implementation & Testing</h3>
<div style="background-color: #f0f8ff; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h4>ğŸ¯ Implementation Checklist</h4>
    
    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin: 20px 0;">
        <div style="background: white; padding: 15px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
            <h5>âœ… Database Schema</h5>
            <ul>
                <li>All tables created with proper constraints</li>
                <li>Foreign keys and relationships established</li>
                <li>Data types appropriate for each column</li>
                <li>Check constraints for data validation</li>
                <li>Triggers for audit logging</li>
                <li>Materialized views for reporting</li>
            </ul>
        </div>
        
        <div style="background: white; padding: 15px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
            <h5>âœ… Security Implementation</h5>
            <ul>
                <li>Role-based access control configured</li>
                <li>Row-level security policies</li>
                <li>Column encryption for sensitive data</li>
                <li>SSL/TLS connections enforced</li>
                <li>Password policies and MFA</li>
                <li>Comprehensive audit logging</li>
            </ul>
        </div>
        
        <div style="background: white; padding: 15px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
            <h5>âœ… Performance Optimization</h5>
            <ul>
                <li>Appropriate indexes created</li>
                <li>Query performance analyzed</li>
                <li>Connection pooling configured</li>
                <li>Regular maintenance scheduled</li>
                <li>Monitoring and alerting setup</li>
                <li>Backup and recovery tested</li>
            </ul>
        </div>
    </div>
    
    <h4>ğŸ§ª Testing Requirements</h4>
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 15px;">
<pre style='background-color: #36454f; color: #fff; border-radius: 5px; padding: 10px;'>
# ========= UNIT TESTS FOR DATABASE OPERATIONS =========
import unittest
import psycopg2
from unittest.mock import Mock, patch

class TestUniversityDatabase(unittest.TestCase):
    
    def setUp(self):
        """Setup test database connection"""
        self.conn = psycopg2.connect(
            host="localhost",
            database="university_test",
            user="test_user",
            password="test_password"
        )
        self.cursor = self.conn.cursor()
    
    def test_create_student(self):
        """Test student creation with encryption"""
        test_data = {
            'first_name': 'Test',
            'last_name': 'Student',
            'email': 'test@university.edu',
            'ssn': '123-45-6789',
            'phone': '555-123-4567',
            'dob': '2000-01-01',
            'address': {'street': '123 Test St', 'city': 'Testville'},
            'major_id': 1,
            'initial_password': 'TestPass123!'
        }
        
        # Mock encryption for testing
        with patch.object(UniversityDatabaseManager, 'encrypt_data') as mock_encrypt:
            mock_encrypt.return_value = b'encrypted_data'
            
            manager = UniversityDatabaseManager()
            result = manager.create_student(test_data)
            
            self.assertTrue(result['success'])
            self.assertIn('student_number', result)
    
    def test_permissions_enforcement(self):
        """Test that permissions are properly enforced"""
        # Attempt to access data without proper permissions
        self.cursor.execute("SET ROLE student_user")
        
        # Student should not be able to see other students' grades
        with self.assertRaises(psycopg2.errors.InsufficientPrivilege):
            self.cursor.execute("SELECT * FROM grades WHERE enrollment_id = 999")
    
    def test_audit_logging(self):
        """Test that audit logging captures events"""
        initial_count = self.get_audit_log_count()
        
        # Perform an action that should be logged
        self.cursor.execute("""
            INSERT INTO students (student_id, student_number, enrollment_date)
            VALUES (999999, 'S2024999999', CURRENT_DATE)
        """)
        self.conn.commit()
        
        final_count = self.get_audit_log_count()
        
        self.assertGreater(final_count, initial_count)
    
    def get_audit_log_count(self):
        """Helper to count audit log entries"""
        self.cursor.execute("SELECT COUNT(*) FROM audit_log")
        return self.cursor.fetchone()[0]
    
    def tearDown(self):
        """Cleanup after tests"""
        self.cursor.close()
        self.conn.close()

if __name__ == '__main__':
    unittest.main()
</pre>

<pre style='background-color: #36454f; color: #fff; border-radius: 5px; padding: 10px;'>
# ========= LOAD TESTING SCRIPT =========
import concurrent.futures
import time
import psycopg2
from datetime import datetime, timedelta
import random

class LoadTester:
    def __init__(self, num_users=100, duration=60):
        self.num_users = num_users
        self.duration = duration
        self.results = []
    
    def simulate_student_activity(self, student_id):
        """Simulate a student using the system"""
        conn = psycopg2.connect(
            host="localhost",
            database="university_db",
            user="student_user",
            password="StudentSecure2024!"
        )
        
        start_time = time.time()
        operations = 0
        errors = 0
        
        try:
            while time.time() - start_time < self.duration:
                # Simulate various student activities
                activity = random.choice([
                    self.view_grades,
                    self.view_courses,
                    self.update_profile,
                    self.check_schedule
                ])
                
                try:
                    activity(conn, student_id)
                    operations += 1
                except Exception as e:
                    errors += 1
                    print(f"Error for student {student_id}: {e}")
                
                # Random delay between operations
                time.sleep(random.uniform(0.1, 1.0))
        
        finally:
            conn.close()
        
        return {'student_id': student_id, 'operations': operations, 'errors': errors}
    
    def view_grades(self, conn, student_id):
        """Simulate viewing grades"""
        with conn.cursor() as cur:
            cur.execute("""
                SELECT course_code, final_grade, letter_grade
                FROM enrollments e
                JOIN course_sections cs ON e.section_id = cs.section_id
                JOIN courses c ON cs.course_id = c.course_id
                WHERE e.student_id = %s
                AND e.enrollment_status = 'Completed'
                LIMIT 10
            """, (student_id,))
            cur.fetchall()
    
    def run_load_test(self):
        """Run concurrent load test"""
        print(f"Starting load test with {self.num_users} simulated users for {self.duration} seconds")
        
        start_time = time.time()
        
        with concurrent.futures.ThreadPoolExecutor(max_workers=self.num_users) as executor:
            # Simulate multiple concurrent users
            futures = [
                executor.submit(self.simulate_student_activity, i)
                for i in range(self.num_users)
            ]
            
            # Collect results
            for future in concurrent.futures.as_completed(futures):
                self.results.append(future.result())
        
        end_time = time.time()
        
        # Calculate statistics
        total_operations = sum(r['operations'] for r in self.results)
        total_errors = sum(r['errors'] for r in self.results)
        total_time = end_time - start_time
        
        print(f"ğŸ“Š Load Test Results:")
        print(f"Total simulated users: {self.num_users}")
        print(f"Total operations: {total_operations}")
        print(f"Total errors: {total_errors}")
        print(f"Test duration: {total_time:.2f} seconds")
        print(f"Operations per second: {total_operations / total_time:.2f}")
        print(f"Error rate: {(total_errors / total_operations * 100):.2f}%")
        
        # Check database performance during test
        self.check_database_performance()
    
    def check_database_performance(self):
        """Check database performance metrics"""
        conn = psycopg2.connect(
            host="localhost",
            database="university_db",
            user="university_admin",
            password="AdminSecure2024!"
        )
        
        with conn.cursor() as cur:
            # Check connection count
            cur.execute("SELECT COUNT(*) FROM pg_stat_activity WHERE state = 'active'")
            active_connections = cur.fetchone()[0]
            print(f"Active database connections: {active_connections}")
            
            # Check lock contention
            cur.execute("""
                SELECT COUNT(*) FROM pg_locks 
                WHERE NOT granted
            """)
            waiting_locks = cur.fetchone()[0]
            print(f"Waiting locks: {waiting_locks}")
            
            # Check cache hit ratio
            cur.execute("""
                SELECT 
                    sum(heap_blks_hit) / 
                    NULLIF(sum(heap_blks_hit) + sum(heap_blks_read), 0) * 100
                FROM pg_statio_user_tables
            """)
            cache_hit_ratio = cur.fetchone()[0]
            print(f"Cache hit ratio: {cache_hit_ratio:.2f}%")
        
        conn.close()

# Run load test
if __name__ == "__main__":
    tester = LoadTester(num_users=50, duration=120)  # 50 users for 2 minutes
    tester.run_load_test()
</pre>
</div>
</div>

<h3>ğŸ“š Project Deliverables</h3>
<div style="background-color: #fff0e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <b>Required Deliverables:</b>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 15px 0;">
        <div>
            <h5>ğŸ“ Code Repository</h5>
            <ul>
                <li>Complete SQL scripts for database creation</li>
                <li>Python classes for database management</li>
                <li>Security implementation code</li>
                <li>Performance optimization scripts</li>
                <li>Testing and load testing scripts</li>
                <li>Backup and recovery procedures</li>
            </ul>
        </div>
        
        <div>
            <h5>ğŸ“„ Documentation</h5>
            <ul>
                <li>Database schema diagram (ERD)</li>
                <li>User manual for different roles</li>
                <li>Security policy document</li>
                <li>Performance tuning guide</li>
                <li>Disaster recovery plan</li>
                <li>API documentation (if applicable)</li>
            </ul>
        </div>
    </div>
    
    <b>ğŸ¯ Success Criteria Checklist:</b>
    <table style="width: 100%; border-collapse: collapse; margin: 15px 0;">
        <tr style="background: #4A90E2; color: white;">
            <th style="padding: 10px; text-align: left;">Category</th>
            <th style="padding: 10px; text-align: left;">Requirements</th>
            <th style="padding: 10px; text-align: left;">Points</th>
        </tr>
        <tr style="background: #f8f9fa;">
            <td style="padding: 8px; border: 1px solid #ddd;"><b>Database Design</b></td>
            <td style="padding: 8px; border: 1px solid #ddd;">Proper normalization, constraints, relationships</td>
            <td style="padding: 8px; border: 1px solid #ddd;">25</td>
        </tr>
        <tr style="background: white;">
            <td style="padding: 8px; border: 1px solid #ddd;"><b>Security</b></td>
            <td style="padding: 8px; border: 1px solid #ddd;">RBAC, encryption, audit logging, SQL injection prevention</td>
            <td style="padding: 8px; border: 1px solid #ddd;">25</td>
        </tr>
        <tr style="background: #f8f9fa;">
            <td style="padding: 8px; border: 1px solid #ddd;"><b>Performance</b></td>
            <td style="padding: 8px; border: 1px solid #ddd;">Indexes, query optimization, monitoring</td>
            <td style="padding: 8px; border: 1px solid #ddd;">20</td>
        </tr>
        <tr style="background: white;">
            <td style="padding: 8px; border: 1px solid #ddd;"><b>Python Integration</b></td>
            <td style="padding: 8px; border: 1px solid #ddd;">Complete CRUD operations, error handling, transactions</td>
            <td style="padding: 8px; border: 1px solid #ddd;">15</td>
        </tr>
        <tr style="background: #f8f9fa;">
            <td style="padding: 8px; border: 1px solid #ddd;"><b>Testing</b></td>
            <td style="padding: 8px; border: 1px solid #ddd;">Unit tests, load tests, security tests</td>
            <td style="padding: 8px; border: 1px solid #ddd;">10</td>
        </tr>
        <tr style="background: white;">
            <td style="padding: 8px; border: 1px solid #ddd;"><b>Documentation</b></td>
            <td style="padding: 8px; border: 1px solid #ddd;">Comprehensive documentation and diagrams</td>
            <td style="padding: 8px; border: 1px solid #ddd;">5</td>
        </tr>
        <tr style="background: #f8f9fa; font-weight: bold;">
            <td style="padding: 8px; border: 1px solid #ddd;"><b>TOTAL</b></td>
            <td style="padding: 8px; border: 1px solid #ddd;"></td>
            <td style="padding: 8px; border: 1px solid #ddd;"><b>100</b></td>
        </tr>
    </table>
    
    <b>ğŸ† Bonus Points (Extra Credit):</b>
    <ul>
        <li><b>Web Interface:</b> Flask/Django frontend for the system (+10 points)</li>
        <li><b>Advanced Analytics:</b> Machine learning predictions for student success (+10 points)</li>
        <li><b>Mobile App:</b> Basic mobile interface for students (+10 points)</li>
        <li><b>API Development:</b> REST API for third-party integration (+10 points)</li>
        <li><b>Cloud Deployment:</b> Deploy to AWS/Azure/Google Cloud (+15 points)</li>
        <li><b>Disaster Recovery:</b> Implement multi-region backup strategy (+10 points)</li>
    </ul>
</div>

<h3>ğŸ“ Final Assessment & Presentation</h3>
<div style="background-color: #e8f5e8; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h4>Presentation Requirements</h4>
    
    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin: 20px 0;">
        <div style="background: white; padding: 15px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
            <h5>ğŸ¤ 5-Minute Demo</h5>
            <ul>
                <li>Show database schema design</li>
                <li>Demonstrate security features</li>
                <li>Run performance queries</li>
                <li>Show Python integration</li>
                <li>Demo backup/restore process</li>
            </ul>
        </div>
        
        <div style="background: white; padding: 15px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
            <h5>ğŸ“Š Technical Deep Dive</h5>
            <ul>
                <li>Explain design decisions</li>
                <li>Show query optimization examples</li>
                <li>Demonstrate security testing</li>
                <li>Present load test results</li>
                <li>Show error handling strategies</li>
            </ul>
        </div>
        
        <div style="background: white; padding: 15px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
            <h5>ğŸ¤” Q&A Preparedness</h5>
            <ul>
                <li>Be ready to explain any part of your code</li>
                <li>Discuss trade-offs and alternatives</li>
                <li>Explain security considerations</li>
                <li>Discuss scalability challenges</li>
                <li>Show understanding of best practices</li>
            </ul>
        </div>
    </div>
    
    <div style="text-align: center; margin: 20px 0; padding: 20px; background: linear-gradient(135deg, #4A90E2, #2E8B57); border-radius: 10px;">
        <h3 style="color: white; margin: 0;">ğŸ CONGRATULATIONS!</h3>
        <p style="color: white; font-size: 18px; margin: 10px 0;">You've completed Quarter 2: The Data Guardian</p>
        <div style="display: inline-block; background: white; padding: 10px 20px; border-radius: 25px; margin-top: 10px;">
            <span style="color: #4A90E2; font-weight: bold;">ğŸ“ Promotion to Quarter 3: The Connector! ğŸ“</span>
        </div>
    </div>
</div>

<h3>ğŸš€ Next Steps & Career Pathways</h3>
<div style="background-color: #f0f8ff; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h4>Career Opportunities with These Skills:</h4>
    
    <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; margin: 20px 0;">
        <div style="background: white; padding: 15px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); text-align: center;">
            <div style="font-size: 24px;">ğŸ’¼</div>
            <h5>Database Administrator</h5>
            <p style="font-size: 12px;">Manage and optimize databases</p>
        </div>
        
        <div style="background: white; padding: 15px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); text-align: center;">
            <div style="font-size: 24px;">ğŸ”’</div>
            <h5>Database Security Specialist</h5>
            <p style="font-size: 12px;">Secure sensitive data</p>
        </div>
        
        <div style="background: white; padding: 15px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); text-align: center;">
            <div style="font-size: 24px;">ğŸ“Š</div>
            <h5>Data Analyst</h5>
            <p style="font-size: 12px;">Extract insights from data</p>
        </div>
        
        <div style="background: white; padding: 15px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); text-align: center;">
            <div style="font-size: 24px;">ğŸ</div>
            <h5>Backend Developer</h5>
            <p style="font-size: 12px;">Build data-driven applications</p>
        </div>
    </div>
    
    <div style="margin-top: 20px; padding: 15px; background: #fff3cd; border-radius: 5px;">
        <h5>ğŸ¯ Continue Your Journey in Quarter 3:</h5>
        <p><b>The Connector:</b> APIs, Web Scraping, and Automation</p>
        <p><b>Skills You'll Learn:</b> REST APIs, web scraping, automation bots, real-time data integration</p>
        <p><b>Capstone Project:</b> Build a complete business automation system</p>
    </div>
</div>

<h3>ğŸ’¡ Final Words of Wisdom</h3>
<div style="background: white; padding: 20px; border-radius: 10px; border: 2px solid #4A90E2;">
    <div style="text-align: center; margin: 20px 0;">
        <div style="display: inline-block; text-align: left;">
            <div style="font-weight: bold; color: #4A90E2; margin-bottom: 10px;">ğŸŒŸ Database Mastery Checklist:</div>
            <div style="margin-left: 20px;">
                <div>âœ… <b>Design:</b> Can design normalized, efficient database schemas</div>
                <div>âœ… <b>Query:</b> Can write complex, optimized SQL queries</div>
                <div>âœ… <b>Secure:</b> Can implement comprehensive database security</div>
                <div>âœ… <b>Integrate:</b> Can connect Python applications to databases</div>
                <div>âœ… <b>Optimize:</b> Can diagnose and fix performance issues</div>
                <div>âœ… <b>Backup:</b> Can implement disaster recovery plans</div>
                <div>âœ… <b>Document:</b> Can create comprehensive documentation</div>
            </div>
        </div>
    </div>
    
    <div style="margin-top: 20px; padding: 15px; background: #f8f9fa; border-radius: 5px;">
        <p><b>ğŸ“ Remember:</b> Databases are the backbone of every major application. Mastery here opens doors to countless opportunities.</p>
        <p><b>âš¡ Pro Tip:</b> Your final project is now a portfolio piece! Show it to potential employers or clients.</p>
        <p><b>ğŸ’¡ Words of Wisdom:</b> "Data is precious and will last longer than the systems themselves." - Tim Berners-Lee</p>
        <p><b>ğŸš€ Next Adventure:</b> In Quarter 3, you'll learn to make systems talk to each other. The world is your API!</p>
    </div>
</div>

<div style="text-align: center; margin: 30px 0; padding: 20px; background: linear-gradient(135deg, #2E8B57, #4A90E2); border-radius: 10px;">
    <h2 style="color: white; margin: 0;">ğŸ† QUARTER 2 COMPLETE! ğŸ†</h2>
    <p style="color: white; font-size: 18px; margin: 10px 0;">You are now a certified <b>DATA GUARDIAN</b></p>
    <div style="font-size: 48px; margin: 20px 0;">ğŸ‰ ğŸŠ ğŸ¥³</div>
    <p style="color: white;">Ready for Quarter 3: The Connector!</p>
</div>
`
            },

            "7-25": {
                icon: "fa-spider",
                title: "Web Scraping Basics & HTML Parsing",
                html: `<h1>Month 7, Week 25: Web Scraping Basics & HTML Parsing</h1>
<p>Welcome to Quarter 3: The Connector! Today we learn how to extract data from websites automatically using Python.</p>

<div class="analogy-box">
    <b>Analogy: The Digital Archaeologist ğŸº</b><br/>
    
    Website: Ancient city with buried treasures<br/>
    HTML: Blueprint of the city layout<br/>
    Tags: Different buildings (houses, shops, temples)<br/>
    Web Scraping: Digging tools and brushes<br/>
    BeautifulSoup: Archaeologist's guidebook<br/>
    Data: Treasures and artifacts found<br/>
    Robots.txt: Archaeological site rules<br/>
    Rate Limiting: Don't dig too fast!<br/>
</div>

<h3>ğŸŒ Understanding Web Page Structure</h3>
<div style="background-color: #f0f8ff; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h4>ğŸ“Š How Websites Are Structured</h4>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 15px 0;">
        <div style="background: white; padding: 15px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
            <h5>ğŸ” HTML - The Skeleton</h5>
            <pre style="background: #f5f5f5; padding: 10px; font-size: 12px; overflow-x: auto;">
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;My Website&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;header&gt;
        &lt;h1&gt;Welcome&lt;/h1&gt;
        &lt;nav&gt;
            &lt;a href="/home"&gt;Home&lt;/a&gt;
            &lt;a href="/about"&gt;About&lt;/a&gt;
        &lt;/nav&gt;
    &lt;/header&gt;
    &lt;main&gt;
        &lt;article class="post"&gt;
            &lt;h2&gt;Article Title&lt;/h2&gt;
            &lt;p&gt;Content goes here...&lt;/p&gt;
        &lt;/article&gt;
    &lt;/main&gt;
    &lt;footer&gt;
        &lt;p&gt;Copyright 2024&lt;/p&gt;
    &lt;/footer&gt;
&lt;/body&gt;
&lt;/html&gt;
            </pre>
            <p><b>Tags:</b> &lt;h1&gt;, &lt;p&gt;, &lt;a&gt;, &lt;div&gt;, &lt;span&gt;</p>
            <p><b>Attributes:</b> class, id, href, src</p>
        </div>
        
        <div style="background: white; padding: 15px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
            <h5>ğŸ¯ CSS Selectors - The Treasure Map</h5>
            <pre style="background: #f5f5f5; padding: 10px; font-size: 12px; overflow-x: auto;">
/* Element selector */
h1 {
    color: blue;
}

/* Class selector */
.post {
    background: #f0f0f0;
}

/* ID selector */
#main-content {
    width: 800px;
}

/* Attribute selector */
a[href^="https"] {
    color: green;
}

/* Combination */
article.post h2 {
    font-size: 24px;
}

/* Child selector */
nav > a {
    padding: 10px;
}
            </pre>
            <p><b>Common Selectors:</b></p>
            <ul>
                <li><code>.class</code> - Elements with class</li>
                <li><code>#id</code> - Element with ID</li>
                <li><code>element</code> - All elements of type</li>
                <li><code>parent > child</code> - Direct child</li>
            </ul>
        </div>
    </div>
    
    <div style="margin-top: 20px; padding: 15px; background: #fff3cd; border-radius: 5px;">
        <h5>ğŸ¯ The DOM Tree Structure</h5>
        <div style="text-align: center;">
            <pre style="display: inline-block; text-align: left; background: white; padding: 15px; border-radius: 5px;">
html
â”œâ”€â”€ head
â”‚   â””â”€â”€ title
â””â”€â”€ body
    â”œâ”€â”€ header
    â”‚   â”œâ”€â”€ h1
    â”‚   â””â”€â”€ nav
    â”‚       â”œâ”€â”€ a (href="/home")
    â”‚       â””â”€â”€ a (href="/about")
    â”œâ”€â”€ main
    â”‚   â””â”€â”€ article.post
    â”‚       â”œâ”€â”€ h2
    â”‚       â””â”€â”€ p
    â””â”€â”€ footer
        â””â”€â”€ p
            </pre>
        </div>
        <p>Web scraping is navigating this tree to find the data you want!</p>
    </div>
</div>

<h3>ğŸ› ï¸ Setting Up Your Web Scraping Toolkit</h3>
<b>Essential Python Libraries for Web Scraping:</b>
<div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">

<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
<pre style='background-color: #36454f; color: #fff; border-radius: 5px; padding: 10px;'>
# ========= INSTALLATION =========
# Install all needed libraries at once:

pip install requests beautifulsoup4 lxml html5lib

# For advanced scraping:
pip install selenium pandas numpy

# Optional but useful:
pip install cssselect pyquery scrapy

# Verify installation:
import requests
from bs4 import BeautifulSoup
print("âœ… Libraries installed successfully!")

# ========= REQUESTS LIBRARY =========
# For fetching web pages

import requests

# Make a simple GET request
response = requests.get('https://example.com')

# Check status code
print(f"Status Code: {response.status_code}")
print(f"Content Type: {response.headers['content-type']}")
print(f"Content Length: {len(response.content)} bytes")

# Status codes explained:
# 200: OK - Success!
# 404: Not Found
# 403: Forbidden (access denied)
# 500: Server Error
# 301/302: Redirect

# Get the HTML content
html_content = response.text
print(f"First 500 characters:\n{html_content[:500]}")
</pre>

<pre style='background-color: #36454f; color: #fff; border-radius: 5px; padding: 10px;'>
# ========= BEAUTIFULSOUP SETUP =========
# For parsing and navigating HTML

from bs4 import BeautifulSoup

# Create BeautifulSoup object
soup = BeautifulSoup(html_content, 'html.parser')

# Different parsers available:
# 'html.parser' - Built-in, decent speed
# 'lxml' - Very fast, requires installation
# 'html5lib' - Very forgiving, slow

# Basic soup properties
print(f"Title: {soup.title}")
print(f"Title text: {soup.title.string}")
print(f"Title parent: {soup.title.parent.name}")

# Prettify HTML (adds indentation)
pretty_html = soup.prettify()
print(f"Pretty HTML (first 200 chars):\n{pretty_html[:200]}")

# ========= FINDING ELEMENTS =========
# Multiple ways to find elements:

# 1. By tag name
all_paragraphs = soup.find_all('p')
print(f"Number of paragraphs: {len(all_paragraphs)}")

# 2. By class
articles = soup.find_all(class_='article')
# or
articles = soup.find_all('div', class_='article')

# 3. By ID
header = soup.find(id='header')
# or
header = soup.find('div', id='header')

# 4. By attributes
links = soup.find_all('a', href=True)
images = soup.find_all('img', src=True)
</pre>
</div>

<h4>ğŸ” CSS Selectors with BeautifulSoup</h4>
<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 15px;">
<pre style='background-color: #f1f1f1; border-radius: 5px; padding: 10px;'>
# ========= CSS SELECTOR EXAMPLES =========
# Using select() and select_one()

# Find all elements with class "post"
posts = soup.select('.post')
print(f"Found {len(posts)} posts")

# Find element with ID "main"
main_content = soup.select_one('#main')

# Find all h2 inside articles
article_headings = soup.select('article h2')

# Find direct children
nav_links = soup.select('nav > a')

# Find by attribute
external_links = soup.select('a[href^="http"]')
print(f"External links: {len(external_links)}")

# Find by multiple classes
special_items = soup.select('.item.special')

# Find nth child
third_paragraph = soup.select('p:nth-of-type(3)')

# Complex selector example
data = soup.select('div.content > article.post:not(.archived) h2.title')

# ========= EXTRACTING DATA =========
# Getting text and attributes

for link in soup.select('a'):
    # Get text content
    text = link.get_text(strip=True)
    
    # Get attribute
    url = link.get('href')
    
    # Get all attributes as dict
    attrs = link.attrs
    
    print(f"Link: {text} -> {url}")

# Extract data from a table
table_data = []
for row in soup.select('table tr'):
    columns = row.select('td')
    if columns:
        row_data = [col.get_text(strip=True) for col in columns]
        table_data.append(row_data)

print(f"Table data: {table_data}")
</pre>

<pre style='background-color: #f1f1f1; border-radius: 5px; padding: 10px;'>
# ========= NAVIGATING THE DOM TREE =========
# Moving through parent/child/sibling relationships

# Create a test HTML
test_html = """
&lt;div class="container"&gt;
    &lt;h1&gt;Title&lt;/h1&gt;
    &lt;p&gt;First paragraph&lt;/p&gt;
    &lt;div class="content"&gt;
        &lt;p&gt;Nested paragraph&lt;/p&gt;
        &lt;a href="#"&gt;Link&lt;/a&gt;
    &lt;/div&gt;
    &lt;p&gt;Last paragraph&lt;/p&gt;
&lt;/div&gt;
"""

soup = BeautifulSoup(test_html, 'html.parser')
container = soup.select_one('.container')

# Parent navigation
first_p = container.select_one('p')
parent_div = first_p.parent
print(f"Parent of first p: {parent_div.name}")

# Children navigation
children = list(container.children)
print(f"Number of children: {len(children)}")

# Direct children (tags only)
tag_children = list(container.findChildren())
print(f"Tag children: {[c.name for c in tag_children]}")

# Sibling navigation
content_div = container.select_one('.content')
next_sibling = content_div.find_next_sibling()
prev_sibling = content_div.find_previous_sibling()

print(f"Next sibling: {next_sibling.name if next_sibling else 'None'}")
print(f"Previous sibling: {prev_sibling.name if prev_sibling else 'None'}")

# Find all next siblings
all_next = content_div.find_next_siblings()
print(f"All next siblings: {len(all_next)}")

# Find by relationship
# Find parent with specific class
parent_with_class = first_p.find_parent('div', class_='container')

# Find all parents
all_parents = list(first_p.parents)
print(f"Parent chain: {[p.name for p in all_parents]}")

# ========= EXTRACTING SPECIFIC DATA =========
# Real-world examples

# Get all image sources
images = []
for img in soup.select('img'):
    src = img.get('src')
    alt = img.get('alt', 'No alt text')
    images.append({'src': src, 'alt': alt})

# Get meta tags
meta_tags = {}
for meta in soup.select('meta'):
    name = meta.get('name') or meta.get('property')
    content = meta.get('content')
    if name and content:
        meta_tags[name] = content

# Extract structured data from list items
data_list = []
for li in soup.select('ul.data-list li'):
    # Assuming format: "Label: Value"
    text = li.get_text(strip=True)
    if ':' in text:
        label, value = text.split(':', 1)
        data_list.append({
            'label': label.strip(),
            'value': value.strip()
        })
</pre>
</div>
</div>

<h3>ğŸ¯ Your First Web Scraping Project</h3>
<div style="background-color: #fff0e6; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h4>ğŸ“° Scraping News Headlines</h4>
    
<pre style='background-color: #36454f; color: #fff; border-radius: 5px; padding: 15px; margin: 10px 0;'>
# ========= COMPLETE NEWS SCRAPER =========
import requests
from bs4 import BeautifulSoup
import csv
from datetime import datetime
import time

class NewsScraper:
    def __init__(self):
        self.headers = {
            'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36',
            'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8',
            'Accept-Language': 'en-US,en;q=0.5',
            'Accept-Encoding': 'gzip, deflate',
            'DNT': '1',
            'Connection': 'keep-alive',
            'Upgrade-Insecure-Requests': '1'
        }
    
    def fetch_page(self, url):
        """Fetch a web page with error handling"""
        try:
            response = requests.get(url, headers=self.headers, timeout=10)
            response.raise_for_status()  # Raise exception for bad status codes
            return response.text
        except requests.exceptions.RequestException as e:
            print(f"Error fetching {url}: {e}")
            return None
    
    def scrape_bbc_news(self):
        """Scrape BBC News headlines"""
        url = "https://www.bbc.com/news"
        html = self.fetch_page(url)
        
        if not html:
            return []
        
        soup = BeautifulSoup(html, 'html.parser')
        articles = []
        
        # BBC News structure may change - adjust selectors as needed
        # Look for headline containers
        headline_elements = soup.select('[data-testid="card"]')
        
        for element in headline_elements[:10]:  # Limit to 10 articles
            try:
                # Extract title
                title_elem = element.select_one('h2, h3, [data-testid="card-headline"]')
                title = title_elem.get_text(strip=True) if title_elem else "No title"
                
                # Extract link
                link_elem = element.select_one('a')
                if link_elem and link_elem.get('href'):
                    link = link_elem['href']
                    if not link.startswith('http'):
                        link = 'https://www.bbc.com' + link
                else:
                    link = None
                
                # Extract summary
                summary_elem = element.select_one('p')
                summary = summary_elem.get_text(strip=True) if summary_elem else "No summary"
                
                # Extract category
                category_elem = element.select_one('[data-testid="card-metadata-tag"]')
                category = category_elem.get_text(strip=True) if category_elem else "General"
                
                # Extract timestamp
                time_elem = element.select_one('time')
                timestamp = time_elem['datetime'] if time_elem and time_elem.get('datetime') else None
                
                articles.append({
                    'source': 'BBC News',
                    'title': title,
                    'summary': summary,
                    'category': category,
                    'link': link,
                    'timestamp': timestamp,
                    'scraped_at': datetime.now().isoformat()
                })
                
            except Exception as e:
                print(f"Error parsing article: {e}")
                continue
        
        return articles
    
    def scrape_cnn_news(self):
        """Scrape CNN News headlines"""
        url = "https://edition.cnn.com/world"
        html = self.fetch_page(url)
        
        if not html:
            return []
        
        soup = BeautifulSoup(html, 'html.parser')
        articles = []
        
        # CNN structure
        container_elements = soup.select('.container__headline')
        
        for element in container_elements[:10]:
            try:
                title_elem = element.select_one('span.container__headline-text')
                title = title_elem.get_text(strip=True) if title_elem else "No title"
                
                link_elem = element.find_parent('a')
                if link_elem and link_elem.get('href'):
                    link = link_elem['href']
                    if not link.startswith('http'):
                        link = 'https://edition.cnn.com' + link
                else:
                    link = None
                
                articles.append({
                    'source': 'CNN',
                    'title': title,
                    'summary': 'CNN article',  # CNN doesn't always show summaries on main page
                    'category': 'World',
                    'link': link,
                    'timestamp': None,
                    'scraped_at': datetime.now().isoformat()
                })
                
            except Exception as e:
                print(f"Error parsing CNN article: {e}")
                continue
        
        return articles
    
    def save_to_csv(self, articles, filename='news_articles.csv'):
        """Save scraped articles to CSV file"""
        if not articles:
            print("No articles to save")
            return
        
        # Define CSV headers based on article keys
        headers = articles[0].keys()
        
        with open(filename, 'w', newline='', encoding='utf-8') as file:
            writer = csv.DictWriter(file, fieldnames=headers)
            writer.writeheader()
            writer.writerows(articles)
        
        print(f"âœ… Saved {len(articles)} articles to {filename}")
    
    def display_articles(self, articles):
        """Display articles in a readable format"""
        print(f"\nğŸ“° Found {len(articles)} articles:")
        print("=" * 80)
        
        for i, article in enumerate(articles, 1):
            print(f"\n{i}. {article['source']} - {article['category']}")
            print(f"   Title: {article['title']}")
            print(f"   Summary: {article['summary'][:100]}...")
            if article['link']:
                print(f"   Link: {article['link']}")
            if article['timestamp']:
                print(f"   Published: {article['timestamp']}")
            print(f"   Scraped: {article['scraped_at']}")
        
        print("\n" + "=" * 80)

# Run the scraper
if __name__ == "__main__":
    scraper = NewsScraper()
    
    print("ğŸŒ Starting news scraping...")
    
    # Scrape from multiple sources
    all_articles = []
    
    # BBC News
    print("\nğŸ“° Scraping BBC News...")
    bbc_articles = scraper.scrape_bbc_news()
    all_articles.extend(bbc_articles)
    print(f"   Found {len(bbc_articles)} articles")
    
    # Add delay to be polite
    time.sleep(2)
    
    # CNN
    print("\nğŸ“° Scraping CNN...")
    cnn_articles = scraper.scrape_cnn_news()
    all_articles.extend(cnn_articles)
    print(f"   Found {len(cnn_articles)} articles")
    
    # Display results
    if all_articles:
        scraper.display_articles(all_articles)
        scraper.save_to_csv(all_articles)
    else:
        print("âŒ No articles were scraped")
</pre>

<h4>ğŸ”§ Debugging Web Scraping Issues</h4>
<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 15px;">
<pre style='background-color: #f1f1f1; border-radius: 5px; padding: 10px;'>
# ========= DEBUGGING TECHNIQUES =========
# What to do when scraping doesn't work

import requests
from bs4 import BeautifulSoup
import pprint

class ScrapingDebugger:
    def __init__(self, url):
        self.url = url
        self.soup = None
    
    def fetch_and_debug(self):
        """Fetch page and debug common issues"""
        
        print(f"ğŸ” Debugging: {self.url}")
        print("=" * 50)
        
        # 1. Check if we can access the page
        try:
            response = requests.get(self.url, timeout=10)
            print(f"âœ… Status Code: {response.status_code}")
        except Exception as e:
            print(f"âŒ Connection failed: {e}")
            return
        
        # 2. Check response headers
        print("\nğŸ“‹ Response Headers:")
        for key, value in response.headers.items():
            if key.lower() in ['content-type', 'content-length', 'server']:
                print(f"  {key}: {value}")
        
        # 3. Check if content is HTML
        content_type = response.headers.get('content-type', '')
        if 'html' not in content_type.lower():
            print(f"âŒ Not HTML content: {content_type}")
            print(f"First 200 chars: {response.text[:200]}")
            return
        
        # 4. Create BeautifulSoup object
        self.soup = BeautifulSoup(response.text, 'html.parser')
        
        # 5. Check basic structure
        print(f"\nğŸ—ï¸  Page Structure:")
        print(f"  Title: {self.soup.title.string if self.soup.title else 'No title'}")
        
        # 6. Count different elements
        print(f"\nğŸ“Š Element Counts:")
        tags_to_count = ['div', 'p', 'a', 'img', 'table', 'form']
        for tag in tags_to_count:
            count = len(self.soup.find_all(tag))
            print(f"  {tag}: {count}")
        
        # 7. Find all links
        print(f"\nğŸ”— Links (first 10):")
        links = self.soup.find_all('a', href=True)[:10]
        for i, link in enumerate(links, 1):
            href = link['href']
            text = link.get_text(strip=True)[:50]
            print(f"  {i}. {text} -> {href}")
        
        # 8. Check for common structures
        print(f"\nğŸ¯ Looking for common content patterns:")
        
        # News articles often use these classes
        common_selectors = [
            '.article', '.post', '.story', '.news-item',
            '.headline', '.title', '.content',
            '#content', '#main', '#article'
        ]
        
        for selector in common_selectors:
            elements = self.soup.select(selector)
            if elements:
                print(f"  Found {len(elements)} elements with {selector}")
                if elements:
                    # Show first element's structure
                    elem = elements[0]
                    print(f"    First element tag: {elem.name}")
                    print(f"    Classes: {elem.get('class', ['none'])}")
                    print(f"    ID: {elem.get('id', 'none')}")
        
        # 9. Save HTML for inspection
        with open('debug_page.html', 'w', encoding='utf-8') as f:
            f.write(self.soup.prettify())
        print(f"\nğŸ’¾ Saved HTML to debug_page.html for inspection")
    
    def test_selectors(self, selectors):
        """Test different CSS selectors"""
        if not self.soup:
            print("No soup object available. Fetch page first.")
            return
        
        print(f"\nğŸ¯ Testing Selectors:")
        for selector in selectors:
            elements = self.soup.select(selector)
            print(f"  '{selector}': Found {len(elements)} elements")
            
            if elements and len(elements) <= 3:
                for i, elem in enumerate(elements[:3], 1):
                    print(f"    {i}. Tag: {elem.name}")
                    print(f"       Text: {elem.get_text(strip=True)[:50]}...")
                    print(f"       Classes: {elem.get('class', [])}")
                    print(f"       ID: {elem.get('id', 'none')}")

# Example usage
if __name__ == "__main__":
    # Test with a news site
    debugger = ScrapingDebugger("https://www.bbc.com/news")
    debugger.fetch_and_debug()
    
    # Test specific selectors
    test_selectors = [
        'h1', 'h2', 'h3',
        '.gs-c-promo',  # BBC specific
        '[data-testid]',  # Data attributes
        'article',
        '.story',
        'a[href*="/news/"]'
    ]
    
    debugger.test_selectors(test_selectors)
</pre>

<pre style='background-color: #f1f1f1; border-radius: 5px; padding: 10px;'>
# ========= INSPECTING PAGE STRUCTURE =========
# Browser Developer Tools Techniques

"""
ğŸ¯ Using Browser Developer Tools for Scraping:

1. Open Developer Tools:
   - Chrome/Edge: F12 or Ctrl+Shift+I
   - Firefox: F12 or Ctrl+Shift+I
   - Safari: Cmd+Opt+I

2. Inspect Elements:
   - Right-click on element â†’ "Inspect"
   - See HTML structure in Elements tab

3. Copy Selectors:
   - Right-click on element in Elements tab
   - Copy â†’ Copy selector
   - Copy â†’ Copy XPath
   - Copy â†’ Copy full XPath

4. Console Testing:
   - Test CSS selectors in Console:
     $$('h1')  // Returns array of elements
     $('.article')  // Returns first match

5. Network Tab:
   - See all requests (XHR/AJAX)
   - Find API endpoints
   - Check request headers

6. Mobile View:
   - Toggle device toolbar (Ctrl+Shift+M)
   - Sometimes mobile sites are simpler to scrape

ğŸ¯ Common Patterns to Look For:

1. Data Attributes:
   - data-id, data-title, data-price
   - Often used by JavaScript frameworks

2. Consistent Class Names:
   - .product-item, .news-article, .user-card
   - .title, .description, .price

3. Semantic HTML:
   - <article>, <section>, <header>, <footer>
   - <time datetime="...">, <address>

4. Microdata/RDFa:
   - itemscope, itemtype, itemprop
   - Used for structured data (recipes, products)

5. JSON in Script Tags:
   - <script type="application/ld+json">
   - Contains structured data

ğŸ¯ XPath vs CSS Selectors:

CSS Selectors (Recommended):
- Faster and more readable
- Supported by BeautifulSoup
- Examples:
  .product  # Class
  #header   # ID
  div > p   # Child
  a[href]   # Attribute

XPath (More Powerful but Complex):
- Can navigate up the tree
- More complex queries
- Examples:
  //div[@class="product"]  # Any div with class
  //a[contains(@href, "news")]  # Contains
  //p[text()="Hello"]  # Exact text
"""

# Python code to use browser-copied selectors
from bs4 import BeautifulSoup
import requests

def test_copied_selectors():
    """Test selectors copied from browser"""
    
    url = "https://example.com"
    response = requests.get(url)
    soup = BeautifulSoup(response.text, 'html.parser')
    
    # Selectors copied from browser
    browser_selectors = [
        '#main > div.container > h1',  # Copy selector
        'body > div > p:nth-child(2)',  # Copy selector
        '//*[@id="header"]/nav/a[1]',  # XPath (needs lxml)
    ]
    
    print("Testing browser-copied selectors:")
    for selector in browser_selectors:
        try:
            if selector.startswith('//'):
                # XPath selector (requires lxml)
                elements = soup.find_all(xpath=selector)
            else:
                # CSS selector
                elements = soup.select(selector)
            
            print(f"\nSelector: {selector}")
            print(f"Found {len(elements)} elements")
            
            if elements:
                for i, elem in enumerate(elements[:2], 1):
                    print(f"  {i}. Tag: {elem.name}")
                    print(f"     Text: {elem.get_text(strip=True)[:50]}...")
                    
        except Exception as e:
            print(f"\nError with selector '{selector}': {e}")

# Real example: Amazon product page
def inspect_amazon_product():
    """Example of what to look for on Amazon"""
    
    print("\nğŸ¯ Amazon Product Page Structure:")
    print("Common elements to scrape:")
    
    amazon_selectors = {
        'product_title': '#productTitle',
        'price': '.a-price-whole, #priceblock_ourprice',
        'rating': '.a-icon-alt',
        'reviews_count': '#acrCustomerReviewText',
        'description': '#productDescription',
        'images': '.imgTagWrapper img',
        'features': '.a-unordered-list .a-list-item',
        'breadcrumbs': '.a-breadcrumb li',
    }
    
    for name, selector in amazon_selectors.items():
        print(f"  {name}: {selector}")
    
    print("\nğŸ¯ Tips for Amazon:")
    print("  1. Check robots.txt first")
    print("  2. Use reasonable delays")
    print("  3. Rotate user agents")
    print("  4. Consider using their API instead")

# Run the inspection
if __name__ == "__main__":
    test_copied_selectors()
    inspect_amazon_product()
</pre>
</div>
</div>

<h3>âš–ï¸ Ethics & Legal Considerations</h3>
<div style="background-color: #e8f5e8; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h4>ğŸ›¡ï¸ Responsible Web Scraping</h4>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 15px 0;">
        <div style="background: white; padding: 15px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
            <h5>âœ… DOs (Good Practices)</h5>
            <ul>
                <li><b>Check robots.txt</b> - Respect website rules</li>
                <li><b>Add delays</b> - Don't overload servers</li>
                <li><b>Use caching</b> - Don't re-fetch same data</li>
                <li><b>Identify yourself</b> - Use proper User-Agent</li>
                <li><b>Respect copyright</b> - Don't republish content</li>
                <li><b>Check Terms of Service</b> - Some sites prohibit scraping</li>
                <li><b>Use APIs when available</b> - Better than scraping</li>
                <li><b>Limit request rate</b> - Be a good internet citizen</li>
            </ul>
        </div>
        
        <div style="background: white; padding: 15px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
            <h5>âŒ DON'Ts (Bad Practices)</h5>
            <ul>
                <li><b>Don't scrape too fast</b> - Can get you blocked</li>
                <li><b>Don't ignore robots.txt</b> - It's there for a reason</li>
                <li><b>Don't scrape personal data</b> - Privacy violations</li>
                <li><b>Don't bypass paywalls</b> - Respect content protection</li>
                <li><b>Don't hide your identity</b> - Be transparent</li>
                <li><b>Don't DDOS websites</b> - Too many requests crash sites</li>
                <li><b>Don't scrape for malicious purposes</b> - Be ethical</li>
                <li><b>Don't ignore rate limits</b> - Respect server resources</li>
            </ul>
        </div>
    </div>
    
    <h4>ğŸ“œ Checking robots.txt</h4>
<pre style='background-color: #36454f; color: #fff; border-radius: 5px; padding: 15px; margin: 10px 0;'>
# ========= ROBOTS.TXT CHECKER =========
import requests
from urllib.parse import urljoin, urlparse
import time

class RobotsTxtChecker:
    def __init__(self):
        self.session = requests.Session()
        self.session.headers.update({
            'User-Agent': 'EthicalScraperBot/1.0 (+https://example.com/bot)'
        })
    
    def get_robots_txt(self, url):
        """Fetch and parse robots.txt"""
        parsed_url = urlparse(url)
        robots_url = f"{parsed_url.scheme}://{parsed_url.netloc}/robots.txt"
        
        try:
            response = self.session.get(robots_url, timeout=5)
            if response.status_code == 200:
                return response.text
            else:
                return None
        except:
            return None
    
    def can_scrape(self, url, user_agent='*'):
        """Check if scraping is allowed for given URL"""
        robots_content = self.get_robots_txt(url)
        
        if not robots_content:
            print(f"No robots.txt found for {url}")
            print("Proceed with caution and add delays!")
            return True  # Assume allowed if no robots.txt
        
        print(f"ğŸ“œ robots.txt for {urlparse(url).netloc}:")
        print("-" * 50)
        print(robots_content[:500])  # First 500 chars
        print("-" * 50)
        
        # Simple robots.txt parser
        lines = robots_content.split('\n')
        allowed = True
        
        current_agent = None
        for line in lines:
            line = line.strip()
            
            # Skip comments and empty lines
            if not line or line.startswith('#'):
                continue
            
            # Check User-agent
            if line.lower().startswith('user-agent:'):
                current_agent = line.split(':', 1)[1].strip()
            
            # Check Disallow for our user agent
            elif line.lower().startswith('disallow:') and current_agent in [user_agent, '*']:
                disallowed_path = line.split(':', 1)[1].strip()
                if disallowed_path:
                    # Check if our URL matches disallowed path
                    parsed_url = urlparse(url)
                    if parsed_url.path.startswith(disallowed_path):
                        allowed = False
                        print(f"âŒ Disallowed: {disallowed_path}")
            
            # Check Crawl-delay
            elif line.lower().startswith('crawl-delay:') and current_agent in [user_agent, '*']:
                try:
                    delay = float(line.split(':', 1)[1].strip())
                    print(f"âš ï¸ Crawl delay required: {delay} seconds")
                except:
                    pass
        
        return allowed

# Example usage
if __name__ == "__main__":
    checker = RobotsTxtChecker()
    
    test_urls = [
        "https://www.bbc.com/news",
        "https://www.amazon.com/dp/B08N5WRWNW",
        "https://www.wikipedia.org/wiki/Python",
        "https://www.reddit.com/r/programming"
    ]
    
    for url in test_urls:
        print(f"\nğŸ” Checking: {url}")
        if checker.can_scrape(url, user_agent='EthicalScraperBot'):
            print("âœ… Scraping appears to be allowed")
        else:
            print("âŒ Scraping is disallowed by robots.txt")
        
        # Be polite between checks
        time.sleep(1)
</pre>

<h4>â° Rate Limiting & Delays</h4>
<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 15px;">
<pre style='background-color: #f1f1f1; border-radius: 5px; padding: 10px;'>
# ========= POLITE SCRAPER WITH RATE LIMITING =========
import requests
import time
import random
from datetime import datetime, timedelta

class PoliteScraper:
    def __init__(self, base_delay=1.0, max_delay=3.0):
        self.session = requests.Session()
        self.base_delay = base_delay
        self.max_delay = max_delay
        self.last_request_time = None
        
        # Configure session headers
        self.session.headers.update({
            'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36',
            'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8',
            'Accept-Language': 'en-US,en;q=0.5',
            'Accept-Encoding': 'gzip, deflate',
            'Connection': 'keep-alive',
            'Upgrade-Insecure-Requests': '1',
            'Cache-Control': 'max-age=0'
        })
    
    def respectful_delay(self):
        """Add delay between requests to be polite"""
        if self.last_request_time:
            # Calculate time since last request
            elapsed = time.time() - self.last_request_time
            if elapsed < self.base_delay:
                # Wait remaining time
                wait_time = self.base_delay - elapsed
                time.sleep(wait_time)
        
        # Add random variation to appear more human
        jitter = random.uniform(0, 0.5)
        time.sleep(jitter)
        
        self.last_request_time = time.time()
    
    def get_with_retry(self, url, max_retries=3):
        """Make GET request with retry logic"""
        for attempt in range(max_retries):
            try:
                self.respectful_delay()
                
                response = self.session.get(url, timeout=10)
                response.raise_for_status()
                
                # Check if we're being rate limited
                if response.status_code == 429:  # Too Many Requests
                    retry_after = response.headers.get('Retry-After')
                    if retry_after:
                        wait_time = int(retry_after)
                    else:
                        wait_time = (attempt + 1) * 5  # Exponential backoff
                    
                    print(f"âš ï¸ Rate limited. Waiting {wait_time} seconds...")
                    time.sleep(wait_time)
                    continue
                
                return response
                
            except requests.exceptions.Timeout:
                print(f"â±ï¸ Timeout on attempt {attempt + 1}")
                if attempt < max_retries - 1:
                    wait_time = (attempt + 1) * 2  # Exponential backoff
                    time.sleep(wait_time)
                continue
                
            except requests.exceptions.HTTPError as e:
                if response.status_code == 403:  # Forbidden
                    print(f"ğŸ”’ Access forbidden: {url}")
                    break
                elif response.status_code == 404:  # Not Found
                    print(f"âŒ Page not found: {url}")
                    break
                else:
                    print(f"HTTP error {response.status_code}: {e}")
                    if attempt < max_retries - 1:
                        time.sleep((attempt + 1) * 2)
                    continue
                    
            except Exception as e:
                print(f"Error: {e}")
                if attempt < max_retries - 1:
                    time.sleep((attempt + 1) * 2)
                continue
        
        return None
    
    def scrape_pages(self, urls):
        """Scrape multiple pages with polite delays"""
        results = []
        
        for i, url in enumerate(urls, 1):
            print(f"\nğŸ“„ Processing {i}/{len(urls)}: {url}")
            
            response = self.get_with_retry(url)
            if response:
                # Process the response
                results.append({
                    'url': url,
                    'status': response.status_code,
                    'content': response.text[:200] + '...'  # First 200 chars
                })
                print(f"âœ… Success")
            else:
                results.append({
                    'url': url,
                    'status': 'FAILED',
                    'content': None
                })
                print(f"âŒ Failed")
        
        return results

# Example usage
if __name__ == "__main__":
    scraper = PoliteScraper(base_delay=2.0)  # 2 seconds between requests
    
    # List of pages to scrape
    pages_to_scrape = [
        "https://httpbin.org/status/200",
        "https://httpbin.org/delay/1",  # Simulates slow page
        "https://httpbin.org/status/404",
        "https://httpbin.org/status/429",  # Rate limit test
        "https://httpbin.org/html"  # Actual HTML page
    ]
    
    print("ğŸš€ Starting polite scraping session...")
    results = scraper.scrape_pages(pages_to_scrape)
    
    print("\nğŸ“Š Results Summary:")
    for result in results:
        status = result['status']
        if status == 200:
            print(f"âœ… {result['url']} - Success")
        else:
            print(f"âŒ {result['url']} - Status: {status}")
</pre>

<pre style='background-color: #f1f1f1; border-radius: 5px; padding: 10px;'>
# ========= PROXY ROTATION FOR LARGE-SCALE SCRAPING =========
# Note: For educational purposes only

import requests
import random
import time
from itertools import cycle

class RotatingProxyScraper:
    def __init__(self, proxies=None, user_agents=None):
        """Initialize with lists of proxies and user agents"""
        self.proxies = proxies or []
        self.user_agents = user_agents or [
            'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36',
            'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36',
            'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36',
            'Mozilla/5.0 (iPhone; CPU iPhone OS 14_0 like Mac OS X) AppleWebKit/537.36'
        ]
        
        self.proxy_cycle = cycle(self.proxies) if self.proxies else None
        self.session = requests.Session()
    
    def get_random_user_agent(self):
        """Get random user agent from list"""
        return random.choice(self.user_agents)
    
    def get_next_proxy(self):
        """Get next proxy from cycle"""
        if self.proxy_cycle:
            return next(self.proxy_cycle)
        return None
    
    def make_request(self, url, use_proxy=True):
        """Make request with rotating user agent and optional proxy"""
        # Update user agent
        self.session.headers.update({
            'User-Agent': self.get_random_user_agent()
        })
        
        # Configure proxy if available and requested
        proxies = None
        if use_proxy and self.proxies:
            proxy = self.get_next_proxy()
            if proxy:
                proxies = {
                    'http': proxy,
                    'https': proxy
                }
                print(f"Using proxy: {proxy}")
        
        # Add random delay
        time.sleep(random.uniform(1, 3))
        
        try:
            response = self.session.get(
                url,
                proxies=proxies,
                timeout=10,
                headers={
                    'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8',
                    'Accept-Language': 'en-US,en;q=0.5',
                    'Accept-Encoding': 'gzip, deflate',
                    'Connection': 'keep-alive',
                    'Upgrade-Insecure-Requests': '1'
                }
            )
            return response
        except Exception as e:
            print(f"Request failed: {e}")
            return None

# Free proxy sources (educational use only)
"""
âš ï¸ WARNING: Free proxies are often:
- Slow and unreliable
- May log your traffic
- Could be malicious
- Often get banned quickly

âœ… Better alternatives:
1. Use residential proxies (paid)
2. Use cloud services with rotating IPs
3. Use Tor network (slow but anonymous)
4. Respect rate limits instead
"""

def get_free_proxies():
    """Example function to get free proxies (not recommended for production)"""
    try:
        response = requests.get('https://free-proxy-list.net/', timeout=10)
        soup = BeautifulSoup(response.text, 'html.parser')
        
        proxies = []
        table = soup.select_one('#proxylisttable')
        
        if table:
            rows = table.select('tbody tr')
            for row in rows[:10]:  # First 10 proxies
                cells = row.select('td')
                if len(cells) >= 2:
                    ip = cells[0].get_text(strip=True)
                    port = cells[1].get_text(strip=True)
                    
                    # Check if proxy supports HTTPS
                    if cells[6].get_text(strip=True) == 'yes':
                        proxy = f"http://{ip}:{port}"  # Many free proxies only support HTTP
                        proxies.append(proxy)
        
        return proxies
    
    except:
        return []

# Example usage with caution
if __name__ == "__main__":
    print("âš ï¸ Free proxies example - for educational purposes only")
    
    # Get some free proxies (often unreliable)
    proxies = get_free_proxies()
    print(f"Found {len(proxies)} free proxies")
    
    if proxies:
        scraper = RotatingProxyScraper(proxies=proxies)
        
        # Test with a simple site
        response = scraper.make_request('https://httpbin.org/ip')
        
        if response and response.status_code == 200:
            print(f"Response: {response.json()}")
            print("Note: This shows the proxy IP, not your real IP")
        else:
            print("Most free proxies don't work well. Consider alternatives.")
    else:
        print("No proxies found. Using direct connection.")
        
        scraper = RotatingProxyScraper()
        response = scraper.make_request('https://httpbin.org/ip', use_proxy=False)
        
        if response:
            print(f"Your IP: {response.json()}")
</pre>
</div>
</div>

<h3>Today's Hands-On Exercises</h3>
<div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <b>Exercise 1: Wikipedia Scraper (60 minutes)</b>
    <p>Build a Wikipedia article scraper that extracts:</p>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 15px 0;">
        <div>
            <b>Required Features:</b>
            <ol>
                <li>Fetch any Wikipedia article by URL</li>
                <li>Extract article title and main heading</li>
                <li>Get the table of contents with links</li>
                <li>Extract all section headings and content</li>
                <li>Get all internal Wikipedia links</li>
                <li>Extract infobox data (if present)</li>
                <li>Save to structured JSON format</li>
                <li>Add respectful delays between requests</li>
            </ol>
        </div>
        
        <div>
            <b>Example Output:</b>
            <pre style="background: #f5f5f5; padding: 10px; font-size: 12px;">
{
  "title": "Python (programming language)",
  "url": "https://en.wikipedia.org/wiki/Python_(programming_language)",
  "summary": "Python is a high-level, interpreted...",
  "sections": [
    {
      "heading": "History",
      "level": 2,
      "content": "Python was conceived in the late 1980s...",
      "subsections": [...]
    }
  ],
  "infobox": {
    "paradigm": "Multi-paradigm",
    "designed_by": "Guido van Rossum",
    "first_released": "1990"
  },
  "links": [
    {"text": "Programming language", "url": "/wiki/Programming_language"},
    ...
  ]
}
            </pre>
        </div>
    </div>
    
    <b>Exercise 2: Product Price Tracker (60 minutes)</b>
    <p>Create a price tracker for e-commerce websites:</p>
    
    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin: 15px 0;">
        <div style="background: #f8f9fa; padding: 10px; border-radius: 5px;">
            <b>Target Websites:</b>
            <ul>
                <li>Amazon (product pages)</li>
                <li>Best Buy (electronics)</li>
                <li>Walmart (general goods)</li>
                <li>Target (retail products)</li>
            </ul>
        </div>
        
        <div style="background: #f8f9fa; padding: 10px; border-radius: 5px;">
            <b>Data to Extract:</b>
            <ul>
                <li>Product name and brand</li>
                <li>Current price and currency</li>
                <li>Original price (if on sale)</li>
                <li>Customer rating and review count</li>
                <li>Product features/description</li>
                <li>Stock availability</li>
                <li>Product images</li>
            </ul>
        </div>
        
        <div style="background: #f8f9fa; padding: 10px; border-radius: 5px;">
            <b>Features:</b>
            <ul>
                <li>Support multiple product URLs</li>
                <li>Price change detection</li>
                <li>Email/SMS alerts for price drops</li>
                <li>Historical price tracking</li>
                <li>Export to CSV/Excel</li>
                <li>Respectful scraping with delays</li>
            </ul>
        </div>
    </div>
    
    <b>Exercise 3: Job Listing Aggregator (30 minutes)</b>
    <p>Scrape job listings from multiple sites:</p>
    <ul>
        <li>Indeed (search results pages)</li>
        <li>LinkedIn Jobs (public listings)</li>
        <li>Glassdoor (company reviews with jobs)</li>
        <li>Monster (traditional job board)</li>
        <li>Extract: Job title, company, location, salary, requirements</li>
        <li>Filter by keyword, location, salary range</li>
        <li>Deduplicate listings across sites</li>
        <li>Export to CSV with clean formatting</li>
    </ul>
</div>

<h3>Homework Assignment</h3>
<div style="background-color: #fff0e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <b>Build a "Real Estate Market Analyzer"</b>
    
    <b>Requirements:</b>
    <ol>
        <li><b>Multi-Site Scraper:</b>
            <ul>
                <li>Zillow.com property listings</li>
                <li>Realtor.com market data</li>
                <li>Redfin.com price estimates</li>
                <li>Trulia.com neighborhood info</li>
                <li>Craigslist rental listings</li>
            </ul>
        </li>
        
        <li><b>Data Extraction:</b>
            <ul>
                <li>Property address and coordinates</li>
                <li>Price, square footage, bedrooms/bathrooms</li>
                <li>Property type (house, condo, apartment)</li>
                <li>Year built and property taxes</li>
                <li>School district ratings</li>
                <li>Listing description and photos</li>
                <li>Days on market and price history</li>
            </ul>
        </li>
        
        <li><b>Analysis Features:</b>
            <ul>
                <li>Calculate price per square foot</li>
                <li>Compare similar properties</li>
                <li>Identify underpriced/overpriced listings</li>
                <li>Track price trends over time</li>
                <li>Generate neighborhood reports</li>
                <li>Predict property values using historical data</li>
            </ul>
        </li>
        
        <li><b>Ethical Implementation:</b>
            <ul>
                <li>Respect all robots.txt files</li>
                <li>Implement polite delays between requests</li>
                <li>Rotate user agents and use proxies responsibly</li>
                <li>Cache responses to avoid re-scraping</li>
                <li>Add rate limiting and exponential backoff</li>
                <li>Include clear documentation of ethical practices</li>
            </ul>
        </li>
    </ol>
    
    <b>Technical Implementation:</b>
    <pre style="background: #f5f5f5; padding: 10px; margin: 10px 0;">
real_estate_scraper/
â”œâ”€â”€ scrapers/
â”‚   â”œâ”€â”€ base_scraper.py           # Base class with common functionality
â”‚   â”œâ”€â”€ zillow_scraper.py         # Zillow-specific implementation
â”‚   â”œâ”€â”€ realtor_scraper.py        # Realtor.com implementation
â”‚   â”œâ”€â”€ redfin_scraper.py         # Redfin implementation
â”‚   â””â”€â”€ craigslist_scraper.py     # Craigslist implementation
â”œâ”€â”€ models/
â”‚   â”œâ”€â”€ property.py               # Property data model
â”‚   â”œâ”€â”€ listing.py                # Listing data model
â”‚   â””â”€â”€ neighborhood.py           # Neighborhood data model
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ rate_limiter.py           # Rate limiting and delays
â”‚   â”œâ”€â”€ proxy_manager.py          # Proxy rotation (if needed)
â”‚   â”œâ”€â”€ cache_manager.py          # Response caching
â”‚   â””â”€â”€ data_cleaner.py           # Data cleaning and normalization
â”œâ”€â”€ analysis/
â”‚   â”œâ”€â”€ price_analyzer.py         # Price analysis functions
â”‚   â”œâ”€â”€ trend_analyzer.py         # Market trend analysis
â”‚   â””â”€â”€ report_generator.py       # Report generation
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ raw/                      # Raw scraped data
â”‚   â”œâ”€â”€ processed/                # Cleaned data
â”‚   â””â”€â”€ cache/                    # Cached responses
â””â”€â”€ config/
    â”œâ”€â”€ settings.py               # Configuration settings
    â”œâ”€â”€ user_agents.txt           # List of user agents
    â””â”€â”€ proxies.txt               # Proxy list (if using)
    </pre>
    
    <b>Expected Output:</b>
    <pre style="background: #f5f5f5; padding: 10px; margin: 10px 0;">
ğŸ“Š Real Estate Market Report - San Francisco, CA
Generated: 2024-03-20
==================================================

ğŸ  Property Analysis (Last 30 days):
â€¢ Total listings analyzed: 1,250
â€¢ Average price: $1,250,000
â€¢ Average price per sq ft: $950
â€¢ Average days on market: 45

ğŸ“ˆ Market Trends:
â€¢ Month-over-month price change: +2.5%
â€¢ Year-over-year price change: +8.7%
â€¢ Inventory level: 3.2 months supply

ğŸ’° Best Value Properties (Underpriced):
1. 123 Main St - Listed: $899,000 | Est. Value: $1,050,000
2. 456 Oak Ave - Listed: $1,100,000 | Est. Value: $1,300,000

ğŸ« Top School Districts:
1. San Francisco Unified (Rating: 8.5/10)
2. Jefferson Elementary (Rating: 8.2/10)

ğŸ“… Recommendation:
â€¢ Buy now: Prices expected to rise 3-5% in next 6 months
â€¢ Best neighborhoods: Marina, Noe Valley, Pacific Heights
â€¢ Avoid: Tenderloin (declining values)
==================================================
    </pre>
    
    <b>Bonus Challenges:</b>
    <ul>
        <li>Add machine learning to predict property values</li>
        <li>Create a web dashboard with live data visualization</li>
        <li>Implement email alerts for new listings matching criteria</li>
        <li>Add support for international real estate markets</li>
        <li>Create API for other applications to access your data</li>
        <li>Implement natural language processing to analyze listing descriptions</li>
    </ul>
</div>

<h3>Key Learning Points:</h3>
<ol>
    <li><b>HTML Structure:</b> Understanding tags, attributes, and the DOM tree</li>
    <li><b>BeautifulSoup:</b> Parsing HTML and navigating with CSS selectors</li>
    <li><b>Requests Library:</b> Fetching web pages with proper headers and error handling</li>
    <li><b>CSS Selectors:</b> Precise targeting of elements for data extraction</li>
    <li><b>Ethical Scraping:</b> Respecting robots.txt, adding delays, and being polite</li>
    <li><b>Debugging:</b> Techniques for when scraping doesn't work as expected</li>
</ol>

<div style="background-color: #e8f5e8; padding: 15px; margin: 20px 0; border-radius: 5px;">
    <h3>ğŸ’¡ Web Scraping Best Practices:</h3>
    <ul>
        <li><b>Always Check robots.txt:</b> It's the website's rules for bots</li>
        <li><b>Add Delays:</b> Minimum 1-2 seconds between requests</li>
        <li><b>Use Caching:</b> Don't re-scrape the same page unnecessarily</li>
        <li><b>Handle Errors Gracefully:</b> Websites change, your code should adapt</li>
        <li><b>Identify Yourself:</b> Use a descriptive User-Agent string</li>
        <li><b>Respect Copyright:</b> Don't republish scraped content without permission</li>
        <li><b>Check ToS:</b> Some sites explicitly prohibit scraping</li>
        <li><b>Use APIs When Available:</b> They're more reliable and ethical</li>
        <li><b>Limit Scope:</b> Only scrape what you actually need</li>
        <li><b>Monitor Your Impact:</b> Don't overload servers with requests</li>
    </ul>
</div>

<h3>ğŸš€ Next Week Preview</h3>
<div style="background: white; padding: 20px; border-radius: 10px; border: 2px solid #4A90E2;">
    <div style="text-align: center; margin: 20px 0;">
        <div style="display: inline-block; text-align: left;">
            <div style="font-weight: bold; color: #4A90E2; margin-bottom: 10px;">ğŸ“… Coming Next Week:</div>
            <div style="margin-left: 20px;">
                <div>ğŸ” <b>Advanced Web Scraping:</b> JavaScript-rendered pages</div>
                <div>ğŸ¤– <b>Selenium:</b> Automating browsers for complex sites</div>
                <div>ğŸ“¦ <b>Scrapy Framework:</b> Building large-scale scrapers</div>
                <div>ğŸ­ <b>Bypassing Anti-Scraping:</b> Dealing with CAPTCHAs and blocks</div>
                <div>ğŸ’¾ <b>Data Storage:</b> Efficiently storing scraped data</div>
            </div>
        </div>
    </div>
    
    <div style="margin-top: 20px; padding: 15px; background: #f8f9fa; border-radius: 5px;">
        <p><b>ğŸ“ Pro Tip:</b> Practice scraping on your own websites first to avoid legal issues!</p>
        <p><b>âš¡ Quick Win:</b> Use <code>requests.get()</code> with <code>timeout</code> parameter to avoid hanging indefinitely.</p>
        <p><b>âš ï¸ Warning:</b> Some websites have sophisticated anti-scraping measures. If you get blocked, respect it and move on.</p>
        <p><b>ğŸ’¡ Remember:</b> With great scraping power comes great responsibility!</p>
    </div>
</div>

<div style="text-align: center; margin: 30px 0; padding: 20px; background: linear-gradient(135deg, #4A90E2, #2E8B57); border-radius: 10px;">
    <h2 style="color: white; margin: 0;">ğŸŒ Welcome to Quarter 3: The Connector! ğŸŒ</h2>
    <p style="color: white; font-size: 18px; margin: 10px 0;">You're learning to make software talk to each other</p>
    <div style="font-size: 48px; margin: 20px 0;">ğŸ”— ğŸ¤– ğŸŒ</div>
    <p style="color: white;">Next: APIs, automation, and connecting the digital world!</p>
</div>
`
            },
            "7-26": {
                icon: "fa-robot",
                title: "Advanced Web Scraping with Selenium",
                html: `<h1>Month 7, Week 26: Advanced Web Scraping with Selenium</h1>
<p>Today we level up our scraping skills! Learn to handle JavaScript-heavy websites, automate browsers, and scrape dynamic content.</p>

<div class="analogy-box">
    <b>Analogy: The Remote-Controlled Browser Driver ğŸ®</b><br/>
    
    Regular Scraping: Reading a printed newspaper<br/>
    Selenium Scraping: Having a robot read the news on a tablet<br/>
    WebDriver: Robot's hands and eyes<br/>
    Browser: The tablet screen<br/>
    JavaScript: Interactive news that updates live<br/>
    Wait Conditions: Robot waiting for page to load<br/>
    Actions: Robot clicking, typing, scrolling<br/>
    Headless Mode: Robot working invisibly<br/>
</div>

<h3>ğŸ†š Requests vs Selenium: When to Use What?</h3>
<div style="background-color: #f0f8ff; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h4>ğŸ“Š Choosing the Right Tool for the Job</h4>
    
    <table style="width: 100%; border-collapse: collapse; margin: 15px 0;">
        <tr style="background: #4A90E2; color: white;">
            <th style="padding: 10px; text-align: left;">Feature</th>
            <th style="padding: 10px; text-align: left;">Requests + BeautifulSoup</th>
            <th style="padding: 10px; text-align: left;">Selenium</th>
            <th style="padding: 10px; text-align: left;">Best For</th>
        </tr>
        <tr style="background: #f8f9fa;">
            <td style="padding: 8px; border: 1px solid #ddd;"><b>Speed</b></td>
            <td style="padding: 8px; border: 1px solid #ddd;">âš¡ Very Fast</td>
            <td style="padding: 8px; border: 1px solid #ddd;">ğŸ¢ Slow (browser overhead)</td>
            <td style="padding: 8px; border: 1px solid #ddd;">Requests for speed</td>
        </tr>
        <tr style="background: white;">
            <td style="padding: 8px; border: 1px solid #ddd;"><b>JavaScript</b></td>
            <td style="padding: 8px; border: 1px solid #ddd;">âŒ No JavaScript</td>
            <td style="padding: 8px; border: 1px solid #ddd;">âœ… Full JavaScript</td>
            <td style="padding: 8px; border: 1px solid #ddd;">Selenium for JS sites</td>
        </tr>
        <tr style="background: #f8f9fa;">
            <td style="padding: 8px; border: 1px solid #ddd;"><b>Complexity</b></td>
            <td style="padding: 8px; border: 1px solid #ddd;">ğŸ¯ Simple</td>
            <td style="padding: 8px; border: 1px solid #ddd;">ğŸ§© Complex</td>
            <td style="padding: 8px; border: 1px solid #ddd;">Requests for simple sites</td>
        </tr>
        <tr style="background: white;">
            <td style="padding: 8px; border: 1px solid #ddd;"><b>Memory Use</b></td>
            <td style="padding: 8px; border: 1px solid #ddd;">ğŸ“¦ Lightweight</td>
            <td style="padding: 8px; border: 1px solid #ddd;">ğŸ‹ï¸ Heavy (full browser)</td>
            <td style="padding: 8px; border: 1px solid #ddd;">Requests for servers</td>
        </tr>
        <tr style="background: #f8f9fa;">
            <td style="padding: 8px; border: 1px solid #ddd;"><b>Interactivity</b></td>
            <td style="padding: 8px; border: 1px solid #ddd;">ğŸ“¥ Read-only</td>
            <td style="padding: 8px; border: 1px solid #ddd;">ğŸ–±ï¸ Click, type, scroll</td>
            <td style="padding: 8px; border: 1px solid #ddd;">Selenium for interaction</td>
        </tr>
        <tr style="background: white;">
            <td style="padding: 8px; border: 1px solid #ddd;"><b>Setup</b></td>
            <td style="padding: 8px; border: 1px solid #ddd;">ğŸ”§ pip install</td>
            <td style="padding: 8px; border: 1px solid #ddd;">ğŸ› ï¸ Browser + driver</td>
            <td style="padding: 8px; border: 1px solid #ddd;">Requests for quick start</td>
        </tr>
    </table>
    
    <div style="margin-top: 20px; padding: 15px; background: #fff3cd; border-radius: 5px;">
        <h5>ğŸ¯ Decision Flowchart:</h5>
        <div style="text-align: center;">
            <pre style="display: inline-block; text-align: left; background: white; padding: 15px; border-radius: 5px;">
Does the website need JavaScript?
    â”œâ”€â”€ âŒ No â†’ Use Requests + BeautifulSoup
    â””â”€â”€ âœ… Yes â†’ Does it need user interaction?
        â”œâ”€â”€ âŒ No â†’ Try Requests-HTML or Playwright
        â””â”€â”€ âœ… Yes â†’ Use Selenium
            </pre>
        </div>
        <p><b>Rule of thumb:</b> Use the simplest tool that gets the job done!</p>
    </div>
</div>

<h3>ğŸš€ Setting Up Selenium</h3>
<b>Complete Installation & Setup Guide:</b>
<div style="background-color: #e0e0e0; padding: 15px; margin: 10px 0; border-radius: 5px;">

<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
<pre style='background-color: #36454f; color: #fff; border-radius: 5px; padding: 10px;'>
# ========= COMPLETE SELENIUM SETUP =========

# 1. Install Selenium Python package
pip install selenium

# 2. Install webdriver-manager (recommended)
pip install webdriver-manager

# 3. Choose your browser:

# Chrome (most popular)
pip install chromedriver-autoinstaller

# Firefox
pip install geckodriver-autoinstaller

# Microsoft Edge
pip install msedge-selenium-tools

# 4. Verify installation
from selenium import webdriver
from selenium.webdriver.common.by import By
from selenium.webdriver.common.keys import Keys
print("âœ… Selenium installed successfully!")

# ========= MANUAL DRIVER SETUP (Alternative) =========

# Download drivers manually:
# Chrome: https://chromedriver.chromium.org/
# Firefox: https://github.com/mozilla/geckodriver/releases
# Edge: https://developer.microsoft.com/en-us/microsoft-edge/tools/webdriver/

# Add to PATH or specify path directly:
# Windows: Add to System Environment Variables
# Mac/Linux: Add to ~/.bash_profile or ~/.zshrc

# Test manual setup:
import os
from selenium import webdriver

# Specify driver path
driver_path = "/path/to/chromedriver"

# Create driver instance
driver = webdriver.Chrome(executable_path=driver_path)
driver.get("https://www.google.com")
print(f"Title: {driver.title}")
driver.quit()
</pre>

<pre style='background-color: #36454f; color: #fff; border-radius: 5px; padding: 10px;'>
# ========= WEBDRIVER-MANAGER (RECOMMENDED) =========
# Automatically downloads and manages drivers

from selenium import webdriver
from webdriver_manager.chrome import ChromeDriverManager
from webdriver_manager.firefox import GeckoDriverManager
from webdriver_manager.microsoft import EdgeChromiumDriverManager

# Chrome with automatic driver management
def setup_chrome(headless=False):
    from selenium.webdriver.chrome.service import Service
    from selenium.webdriver.chrome.options import Options
    
    options = Options()
    
    if headless:
        options.add_argument("--headless")  # Run without GUI
    
    # Common options for better performance
    options.add_argument("--no-sandbox")
    options.add_argument("--disable-dev-shm-usage")
    options.add_argument("--disable-gpu")
    options.add_argument("--window-size=1920,1080")
    
    # Disable images for faster loading
    prefs = {"profile.managed_default_content_settings.images": 2}
    options.add_experimental_option("prefs", prefs)
    
    # Use webdriver-manager
    service = Service(ChromeDriverManager().install())
    
    driver = webdriver.Chrome(service=service, options=options)
    return driver

# Firefox setup
def setup_firefox(headless=False):
    from selenium.webdriver.firefox.service import Service
    from selenium.webdriver.firefox.options import Options
    
    options = Options()
    
    if headless:
        options.add_argument("--headless")
    
    service = Service(GeckoDriverManager().install())
    
    driver = webdriver.Firefox(service=service, options=options)
    return driver

# Edge setup
def setup_edge(headless=False):
    from selenium.webdriver.edge.service import Service
    from selenium.webdriver.edge.options import Options
    
    options = Options()
    
    if headless:
        options.add_argument("--headless")
    
    service = Service(EdgeChromiumDriverManager().install())
    
    driver = webdriver.Edge(service=service, options=options)
    return driver

# Test all browsers
print("Testing browser setups...")
try:
    chrome_driver = setup_chrome()
    chrome_driver.get("https://www.google.com")
    print(f"âœ… Chrome: {chrome_driver.title}")
    chrome_driver.quit()
except Exception as e:
    print(f"âŒ Chrome failed: {e}")

# Repeat for Firefox and Edge if needed
</pre>
</div>

<h4>ğŸ”§ Browser Options & Configuration</h4>
<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 15px;">
<pre style='background-color: #f1f1f1; border-radius: 5px; padding: 10px;'>
# ========= ADVANCED BROWSER OPTIONS =========
from selenium import webdriver
from selenium.webdriver.chrome.options import Options
from selenium.webdriver.chrome.service import Service
from webdriver_manager.chrome import ChromeDriverManager

def create_stealth_driver():
    """Create a driver that looks more like a human"""
    options = Options()
    
    # Headless mode (invisible)
    options.add_argument("--headless")
    
    # Disable automation flags
    options.add_experimental_option("excludeSwitches", ["enable-automation"])
    options.add_experimental_option('useAutomationExtension', False)
    
    # Disable "Chrome is being controlled" notification
    options.add_argument("--disable-infobars")
    
    # Start maximized
    options.add_argument("--start-maximized")
    
    # Disable extensions
    options.add_argument("--disable-extensions")
    
    # Disable notifications
    options.add_argument("--disable-notifications")
    
    # Language
    options.add_argument("--lang=en-US")
    
    # User agent
    options.add_argument("user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36")
    
    # Disable web security (for some advanced scenarios)
    # options.add_argument("--disable-web-security")
    
    # Ignore certificate errors
    options.add_argument("--ignore-certificate-errors")
    
    # Disable blink features
    options.add_argument("--disable-blink-features=AutomationControlled")
    
    # Additional preferences
    prefs = {
        "profile.default_content_setting_values.notifications": 2,  # Block notifications
        "credentials_enable_service": False,  # Disable password saving
        "profile.password_manager_enabled": False,
        "download.default_directory": "/tmp",  # Default download location
        "plugins.always_open_pdf_externally": True,  # Open PDFs externally
        "profile.default_content_settings.popups": 0,  # Block popups
    }
    options.add_experimental_option("prefs", prefs)
    
    service = Service(ChromeDriverManager().install())
    driver = webdriver.Chrome(service=service, options=options)
    
    # Execute CDP commands to further hide automation
    driver.execute_cdp_cmd("Page.addScriptToEvaluateOnNewDocument", {
        "source": """
            Object.defineProperty(navigator, 'webdriver', {
                get: () => undefined
            });
        """
    })
    
    return driver

# Test stealth driver
driver = create_stealth_driver()
driver.get("https://intoli.com/blog/not-possible-to-block-chrome-headless/chrome-headless-test.html")

# Check if headless is detected
page_source = driver.page_source
if "Chrome headless detected" not in page_source:
    print("âœ… Stealth mode successful!")
else:
    print("âŒ Headless detected")

driver.quit()
</pre>

<pre style='background-color: #f1f1f1; border-radius: 5px; padding: 10px;'>
# ========= PROXY CONFIGURATION =========
# Using proxies with Selenium

from selenium import webdriver
from selenium.webdriver.chrome.options import Options
from selenium.webdriver.chrome.service import Service
from webdriver_manager.chrome import ChromeDriverManager

def create_proxy_driver(proxy_url):
    """Create driver with proxy"""
    options = Options()
    
    # Add proxy
    options.add_argument(f'--proxy-server={proxy_url}')
    
    # Disable images for faster loading with proxy
    prefs = {
        "profile.managed_default_content_settings.images": 2,
        "profile.default_content_setting_values.notifications": 2
    }
    options.add_experimental_option("prefs", prefs)
    
    # Bypass proxy for localhost
    options.add_argument("--proxy-bypass-list=<-loopback>")
    
    service = Service(ChromeDriverManager().install())
    driver = webdriver.Chrome(service=service, options=options)
    
    return driver

def create_proxy_with_auth(proxy_host, proxy_port, username, password):
    """Create driver with authenticated proxy"""
    from selenium.webdriver.common.proxy import Proxy, ProxyType
    
    # Create proxy object
    proxy = Proxy()
    proxy.proxy_type = ProxyType.MANUAL
    proxy.http_proxy = f"{proxy_host}:{proxy_port}"
    proxy.ssl_proxy = f"{proxy_host}:{proxy_port}"
    
    # For authentication, we need an extension
    # This is a simplified version
    options = Options()
    
    # Manually create auth extension
    manifest_json = """
    {
        "version": "1.0.0",
        "manifest_version": 2,
        "name": "Chrome Proxy",
        "permissions": [
            "proxy",
            "tabs",
            "unlimitedStorage",
            "storage",
            "<all_urls>",
            "webRequest",
            "webRequestBlocking"
        ],
        "background": {
            "scripts": ["background.js"]
        }
    }
    """
    
    background_js = """
    var config = {
        mode: "fixed_servers",
        rules: {
            singleProxy: {
                scheme: "http",
                host: "%s",
                port: %d
            },
            bypassList: ["localhost"]
        }
    };
    
    chrome.proxy.settings.set(
        {value: config, scope: "regular"},
        function() {}
    );
    
    function callbackFn(details) {
        return {
            authCredentials: {
                username: "%s",
                password: "%s"
            }
        };
    }
    
    chrome.webRequest.onAuthRequired.addListener(
        callbackFn,
        {urls: ["<all_urls>"]},
        ['blocking']
    );
    """ % (proxy_host, proxy_port, username, password)
    
    # Save extension files
    import os
    import zipfile
    
    extension_dir = "proxy_auth_extension"
    os.makedirs(extension_dir, exist_ok=True)
    
    with open(os.path.join(extension_dir, "manifest.json"), "w") as f:
        f.write(manifest_json)
    
    with open(os.path.join(extension_dir, "background.js"), "w") as f:
        f.write(background_js)
    
    # Zip the extension
    extension_path = "proxy_auth_extension.zip"
    with zipfile.ZipFile(extension_path, 'w') as zp:
        zp.write(os.path.join(extension_dir, "manifest.json"), "manifest.json")
        zp.write(os.path.join(extension_dir, "background.js"), "background.js")
    
    # Load extension
    options.add_extension(extension_path)
    
    service = Service(ChromeDriverManager().install())
    driver = webdriver.Chrome(service=service, options=options)
    
    # Clean up
    import shutil
    shutil.rmtree(extension_dir)
    os.remove(extension_path)
    
    return driver

# Test proxy (use free proxies with caution)
try:
    # Free proxy example (often unreliable)
    proxy_driver = create_proxy_driver("http://45.77.56.113:3128")
    proxy_driver.get("http://httpbin.org/ip")
    print("Proxy test page loaded")
    proxy_driver.quit()
except Exception as e:
    print(f"Proxy test failed: {e}")
</pre>
</div>
</div>

<h3>ğŸ® Selenium in Action: Basic Operations</h3>
<div style="background-color: #fff0e6; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h4>ğŸ–±ï¸ Interacting with Web Elements</h4>
    
<pre style='background-color: #36454f; color: #fff; border-radius: 5px; padding: 15px; margin: 10px 0;'>
# ========= SELENIUM BASIC OPERATIONS =========
from selenium import webdriver
from selenium.webdriver.common.by import By
from selenium.webdriver.common.keys import Keys
from selenium.webdriver.common.action_chains import ActionChains
from selenium.webdriver.support.ui import WebDriverWait
from selenium.webdriver.support import expected_conditions as EC
from webdriver_manager.chrome import ChromeDriverManager
from selenium.webdriver.chrome.service import Service

class SeleniumBasics:
    def __init__(self, headless=False):
        service = Service(ChromeDriverManager().install())
        options = webdriver.ChromeOptions()
        
        if headless:
            options.add_argument("--headless")
        
        self.driver = webdriver.Chrome(service=service, options=options)
        self.wait = WebDriverWait(self.driver, 10)
        self.actions = ActionChains(self.driver)
    
    def navigate_and_interact(self):
        """Demonstrate basic navigation and interaction"""
        
        # 1. Navigate to a page
        self.driver.get("https://www.wikipedia.org")
        print(f"Title: {self.driver.title}")
        print(f"URL: {self.driver.current_url}")
        
        # 2. Find elements (8 ways!)
        # By.ID
        search_box = self.driver.find_element(By.ID, "searchInput")
        
        # By.NAME
        search_by_name = self.driver.find_element(By.NAME, "search")
        
        # By.CLASS_NAME
        logo = self.driver.find_element(By.CLASS_NAME, "central-featured-logo")
        
        # By.TAG_NAME
        all_inputs = self.driver.find_elements(By.TAG_NAME, "input")
        print(f"Found {len(all_inputs)} input elements")
        
        # By.LINK_TEXT
        english_link = self.driver.find_element(By.LINK_TEXT, "English")
        
        # By.PARTIAL_LINK_TEXT
        some_link = self.driver.find_element(By.PARTIAL_LINK_TEXT, "Engl")
        
        # By.CSS_SELECTOR (most powerful)
        search_css = self.driver.find_element(By.CSS_SELECTOR, "#searchInput")
        
        # By.XPATH (most flexible)
        search_xpath = self.driver.find_element(By.XPATH, "//input[@id='searchInput']")
        
        # 3. Type into input field
        search_box.clear()  # Clear any existing text
        search_box.send_keys("Python programming language")
        
        # 4. Press keys
        search_box.send_keys(Keys.ENTER)  # Press Enter
        
        # Wait for page to load
        self.wait.until(EC.title_contains("Python"))
        print(f"New title: {self.driver.title}")
        
        # 5. Get element text
        first_heading = self.driver.find_element(By.ID, "firstHeading")
        print(f"Page heading: {first_heading.text}")
        
        # 6. Get attribute
        first_link = self.driver.find_element(By.CSS_SELECTOR, "a")
        href = first_link.get_attribute("href")
        print(f"First link href: {href}")
        
        # 7. Check if element is displayed/enabled/selected
        print(f"Search box displayed: {search_box.is_displayed()}")
        print(f"Search box enabled: {search_box.is_enabled()}")
        
        # For checkboxes/radio buttons
        # is_selected() returns True if checked
        
        # 8. Take screenshot
        self.driver.save_screenshot("wikipedia_page.png")
        print("ğŸ“¸ Screenshot saved")
        
        # 9. Execute JavaScript
        page_height = self.driver.execute_script("return document.body.scrollHeight")
        print(f"Page height: {page_height}px")
        
        # Scroll down
        self.driver.execute_script("window.scrollTo(0, document.body.scrollHeight/2);")
        
        # 10. Go back/forward
        self.driver.back()  # Go back to Wikipedia main page
        self.wait.until(EC.title_contains("Wikipedia"))
        
        self.driver.forward()  # Go forward to Python page
        self.wait.until(EC.title_contains("Python"))
        
        # 11. Refresh page
        self.driver.refresh()
        
        # 12. Browser navigation
        print(f"Window handles: {self.driver.window_handles}")
        print(f"Current window: {self.driver.current_window_handle}")
    
    def form_interaction(self):
        """Demonstrate form filling and submission"""
        
        # Go to a practice form page
        self.driver.get("https://demoqa.com/automation-practice-form")
        
        # Fill text inputs
        first_name = self.driver.find_element(By.ID, "firstName")
        first_name.send_keys("John")
        
        last_name = self.driver.find_element(By.ID, "lastName")
        last_name.send_keys("Doe")
        
        email = self.driver.find_element(By.ID, "userEmail")
        email.send_keys("john.doe@example.com")
        
        # Radio button selection
        male_radio = self.driver.find_element(By.CSS_SELECTOR, "input[value='Male']")
        if not male_radio.is_selected():
            male_radio.click()
        
        # Checkbox selection
        sports_checkbox = self.driver.find_element(By.ID, "hobbies-checkbox-1")
        if not sports_checkbox.is_selected():
            # Sometimes need JavaScript for hidden checkboxes
            self.driver.execute_script("arguments[0].click();", sports_checkbox)
        
        # Dropdown selection (Select class)
        from selenium.webdriver.support.ui import Select
        
        subjects_input = self.driver.find_element(By.ID, "subjectsInput")
        subjects_input.send_keys("Maths")
        subjects_input.send_keys(Keys.ENTER)
        
        # Date picker (often requires JavaScript)
        dob_input = self.driver.find_element(By.ID, "dateOfBirthInput")
        dob_input.clear()
        dob_input.send_keys("15 May 1990")
        
        # File upload
        upload_input = self.driver.find_element(By.ID, "uploadPicture")
        # upload_input.send_keys("/path/to/your/file.jpg")
        
        # Textarea
        address = self.driver.find_element(By.ID, "currentAddress")
        address.send_keys("123 Main Street, City, Country")
        
        # Submit form
        # submit_button = self.driver.find_element(By.ID, "submit")
        # submit_button.click()
        
        print("âœ… Form filled successfully")
    
    def advanced_interactions(self):
        """Demonstrate advanced interactions"""
        
        # Go to a page with interactive elements
        self.driver.get("https://demoqa.com/buttons")
        
        # Double click
        double_click_btn = self.driver.find_element(By.ID, "doubleClickBtn")
        self.actions.double_click(double_click_btn).perform()
        
        # Right click (context click)
        right_click_btn = self.driver.find_element(By.ID, "rightClickBtn")
        self.actions.context_click(right_click_btn).perform()
        
        # Dynamic click (regular click)
        dynamic_buttons = self.driver.find_elements(By.CSS_SELECTOR, ".btn-primary")
        for btn in dynamic_buttons:
            if btn.text == "Click Me":
                btn.click()
                break
        
        # Drag and drop
        self.driver.get("https://demoqa.com/droppable")
        
        draggable = self.driver.find_element(By.ID, "draggable")
        droppable = self.driver.find_element(By.ID, "droppable")
        
        self.actions.drag_and_drop(draggable, droppable).perform()
        
        # Hover over element
        self.driver.get("https://demoqa.com/tool-tips")
        
        hover_button = self.driver.find_element(By.ID, "toolTipButton")
        self.actions.move_to_element(hover_button).perform()
        
        # Wait for tooltip to appear
        self.wait.until(EC.visibility_of_element_located(
            (By.CSS_SELECTOR, ".tooltip-inner")
        ))
        
        print("âœ… Advanced interactions completed")
    
    def close(self):
        """Close the driver"""
        self.driver.quit()

# Run the examples
if __name__ == "__main__":
    print("ğŸš€ Starting Selenium basics demo...")
    
    basics = SeleniumBasics(headless=False)  # Set to True for headless
    
    try:
        print("\n1. Navigation and Basic Interaction:")
        basics.navigate_and_interact()
        
        print("\n2. Form Interaction:")
        basics.form_interaction()
        
        print("\n3. Advanced Interactions:")
        basics.advanced_interactions()
        
    except Exception as e:
        print(f"âŒ Error: {e}")
    
    finally:
        basics.close()
        print("\nâœ… Demo completed successfully!")
</pre>

<h4>â³ Waiting Strategies - The Most Important Part!</h4>
<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 15px;">
<pre style='background-color: #f1f1f1; border-radius: 5px; padding: 10px;'>
# ========= WAITING STRATEGIES =========
# Proper waiting is CRUCIAL for reliable Selenium scripts

from selenium import webdriver
from selenium.webdriver.common.by import By
from selenium.webdriver.support.ui import WebDriverWait
from selenium.webdriver.support import expected_conditions as EC
import time

class WaitStrategies:
    def __init__(self):
        service = Service(ChromeDriverManager().install())
        self.driver = webdriver.Chrome(service=service)
        self.driver.implicitly_wait(5)  # Global implicit wait
    
    def demonstrate_waits(self):
        """Show different waiting strategies"""
        
        # 1. BAD: Static sleep (avoid when possible)
        print("1. Static sleep (not recommended):")
        self.driver.get("https://www.wikipedia.org")
        time.sleep(3)  # âŒ Wastes time if page loads faster
        print("   Waited 3 seconds regardless of page load")
        
        # 2. Implicit Wait (set once, applies to all find_element calls)
        print("\n2. Implicit wait (set globally):")
        # Already set in __init__ to 5 seconds
        # Will wait up to 5 seconds for elements to appear
        
        # 3. Explicit Wait (recommended for specific conditions)
        print("\n3. Explicit wait (recommended):")
        
        # Create wait object with timeout and polling frequency
        wait = WebDriverWait(self.driver, timeout=10, poll_frequency=0.5)
        
        # Wait for element to be present AND visible
        search_box = wait.until(
            EC.presence_of_element_located((By.ID, "searchInput"))
        )
        print("   Search box is present")
        
        # Wait for element to be clickable
        clickable_search = wait.until(
            EC.element_to_be_clickable((By.ID, "searchInput"))
        )
        print("   Search box is clickable")
        
        # 4. Expected Conditions (most common)
        print("\n4. Common expected conditions:")
        
        # Title contains
        wait.until(EC.title_contains("Wikipedia"))
        print("   Title contains 'Wikipedia'")
        
        # URL contains
        wait.until(EC.url_contains("wikipedia.org"))
        print("   URL contains 'wikipedia.org'")
        
        # Element is visible
        wait.until(EC.visibility_of_element_located((By.ID, "searchInput")))
        print("   Search box is visible")
        
        # Element is not visible (disappeared)
        # wait.until(EC.invisibility_of_element_located((By.ID, "loading")))
        
        # Text present in element
        wait.until(EC.text_to_be_present_in_element(
            (By.CLASS_NAME, "central-textlogo-wrapper"), 
            "Wikipedia"
        ))
        print("   'Wikipedia' text is present")
        
        # Alert is present
        # wait.until(EC.alert_is_present())
        
        # Frame available and switch to it
        # wait.until(EC.frame_to_be_available_and_switch_to_it((By.ID, "iframe_id")))
        
        # 5. Custom Wait Conditions
        print("\n5. Custom wait conditions:")
        
        # Wait for multiple elements
        def at_least_n_elements_present(n, locator):
            """Custom condition: wait for at least n elements"""
            def predicate(driver):
                elements = driver.find_elements(*locator)
                return len(elements) >= n
            return predicate
        
        # Use custom condition
        wait.until(at_least_n_elements_present(5, (By.TAG_NAME, "a")))
        print("   At least 5 links are present")
        
        # 6. Fluent Wait (more control)
        print("\n6. Fluent wait (advanced):")
        from selenium.webdriver.support.ui import FluentWait
        
        fluent_wait = FluentWait(self.driver, timeout=10, poll_frequency=1)
        fluent_wait.until(lambda d: d.execute_script("return document.readyState") == "complete")
        print("   Page is completely loaded")
        
        # 7. JavaScript-based waits
        print("\n7. JavaScript-based waits:")
        
        # Wait for jQuery to finish (if site uses jQuery)
        def jquery_active(driver):
            return driver.execute_script("return jQuery.active == 0")
        
        # Wait for Angular to finish (if site uses Angular)
        def angular_ready(driver):
            return driver.execute_script(
                "return angular.element(document).injector().get('$http').pendingRequests.length === 0"
            )
        
        # 8. Page load strategies
        print("\n8. Page load strategies:")
        
        # Normal (waits for full page load)
        # self.driver.get(url)  # Default
        
        # Eager (waits for DOMContentLoaded)
        # options = webdriver.ChromeOptions()
        # options.page_load_strategy = 'eager'  # Faster but might miss some elements
        
        # None (doesn't wait at all)
        # options.page_load_strategy = 'none'
    
    def common_wait_patterns(self):
        """Common patterns for waiting in real projects"""
        
        # Pattern 1: Wait for loading spinner to disappear
        def wait_for_loading_to_finish():
            try:
                # Wait for loading spinner to appear (briefly)
                WebDriverWait(self.driver, 3).until(
                    EC.visibility_of_element_located((By.CLASS_NAME, "loading-spinner"))
                )
                # Then wait for it to disappear
                WebDriverWait(self.driver, 10).until(
                    EC.invisibility_of_element_located((By.CLASS_NAME, "loading-spinner"))
                )
            except:
                # If no spinner appears, that's fine
                pass
        
        # Pattern 2: Retry with wait for flaky elements
        def find_element_with_retry(locator, max_retries=3):
            for attempt in range(max_retries):
                try:
                    element = WebDriverWait(self.driver, 5).until(
                        EC.presence_of_element_located(locator)
                    )
                    return element
                except:
                    if attempt < max_retries - 1:
                        print(f"Retry {attempt + 1} for {locator}")
                        time.sleep(1)
            raise Exception(f"Element {locator} not found after {max_retries} retries")
        
        # Pattern 3: Wait for dynamic content (AJAX)
        def wait_for_ajax_content(container_locator, min_items=1):
            """Wait for AJAX content to load in container"""
            def ajax_loaded(driver):
                container = driver.find_element(*container_locator)
                items = container.find_elements(By.CSS_SELECTOR, ".item")
                return len(items) >= min_items and items[0].is_displayed()
            
            WebDriverWait(self.driver, 15).until(ajax_loaded)
        
        print("âœ… Wait patterns defined")
    
    def close(self):
        self.driver.quit()

# Run wait strategies
if __name__ == "__main__":
    print("â³ Demonstrating Selenium wait strategies...")
    waits = WaitStrategies()
    
    try:
        waits.demonstrate_waits()
        waits.common_wait_patterns()
    except Exception as e:
        print(f"Error: {e}")
    finally:
        waits.close()
</pre>

<pre style='background-color: #f1f1f1; border-radius: 5px; padding: 10px;'>
# ========= HANDLING DYNAMIC CONTENT =========
# Modern websites with infinite scroll, lazy loading, etc.

from selenium import webdriver
from selenium.webdriver.common.by import By
from selenium.webdriver.common.keys import Keys
import time

class DynamicContentHandler:
    def __init__(self):
        service = Service(ChromeDriverManager().install())
        self.driver = webdriver.Chrome(service=service)
    
    def handle_infinite_scroll(self, url, scroll_pause_time=2, max_scrolls=10):
        """Scroll through infinite scroll pages"""
        self.driver.get(url)
        
        print("ğŸ“œ Handling infinite scroll...")
        
        # Get initial scroll height
        last_height = self.driver.execute_script("return document.body.scrollHeight")
        
        scroll_count = 0
        while scroll_count < max_scrolls:
            # Scroll down to bottom
            self.driver.execute_script("window.scrollTo(0, document.body.scrollHeight);")
            
            # Wait to load page
            time.sleep(scroll_pause_time)
            
            # Calculate new scroll height and compare with last height
            new_height = self.driver.execute_script("return document.body.scrollHeight")
            
            if new_height == last_height:
                # If heights are the same, we've reached the end
                print(f"Reached end after {scroll_count} scrolls")
                break
            
            last_height = new_height
            scroll_count += 1
            print(f"Scroll {scroll_count}, Height: {new_height}")
        
        # Now extract all loaded content
        items = self.driver.find_elements(By.CSS_SELECTOR, ".item, .post, .article")
        print(f"Total items loaded: {len(items)}")
        
        return items
    
    def handle_lazy_loading(self, url):
        """Handle lazy-loaded images/content"""
        self.driver.get(url)
        
        print("ğŸ–¼ï¸ Handling lazy loading...")
        
        # Scroll gradually to trigger lazy loading
        scroll_height = self.driver.execute_script("return document.body.scrollHeight")
        viewport_height = self.driver.execute_script("return window.innerHeight")
        
        current_scroll = 0
        step = viewport_height * 0.8  # Scroll 80% of viewport
        
        while current_scroll < scroll_height:
            self.driver.execute_script(f"window.scrollTo(0, {current_scroll});")
            time.sleep(0.5)  # Wait for content to load
            
            # Check for newly loaded images
            images = self.driver.find_elements(By.TAG_NAME, "img")
            loaded_images = [img for img in images 
                           if img.get_attribute("complete") or 
                           img.get_attribute("naturalWidth") != "0"]
            
            print(f"Scrolled to {current_scroll}px, {len(loaded_images)} images loaded")
            
            current_scroll += step
        
        # Scroll back to top
        self.driver.execute_script("window.scrollTo(0, 0);")
    
    def handle_modal_popups(self):
        """Handle modal dialogs and popups"""
        print("ğŸª Handling modal popups...")
        
        # Common modal selectors
        modal_selectors = [
            ".modal", ".popup", ".lightbox", "[role='dialog']",
            ".cookie-banner", ".newsletter-popup", ".ad-modal"
        ]
        
        for selector in modal_selectors:
            try:
                # Wait briefly for modal to appear
                time.sleep(1)
                
                # Look for modal
                modals = self.driver.find_elements(By.CSS_SELECTOR, selector)
                
                for modal in modals:
                    if modal.is_displayed():
                        print(f"Found modal with selector: {selector}")
                        
                        # Try to close it
                        close_buttons = modal.find_elements(By.CSS_SELECTOR, 
                            "[aria-label='Close'], .close, [data-dismiss='modal'], .modal-close")
                        
                        for btn in close_buttons:
                            if btn.is_displayed() and btn.is_enabled():
                                btn.click()
                                print("Closed modal")
                                time.sleep(0.5)
                                break
                        
                        # If no close button, try pressing Escape
                        self.driver.find_element(By.TAG_NAME, "body").send_keys(Keys.ESCAPE)
            except:
                continue
    
    def handle_tabs_windows(self):
        """Handle multiple tabs and windows"""
        print("ğŸ“‘ Handling tabs and windows...")
        
        # Get current window handle
        main_window = self.driver.current_window_handle
        
        # Open a new tab (Ctrl + T or JavaScript)
        self.driver.execute_script("window.open('');")
        
        # Get all window handles
        all_windows = self.driver.window_handles
        
        # Switch to new tab
        new_window = [window for window in all_windows if window != main_window][0]
        self.driver.switch_to.window(new_window)
        
        # Navigate in new tab
        self.driver.get("https://www.google.com")
        print(f"New tab title: {self.driver.title}")
        
        # Close new tab
        self.driver.close()
        
        # Switch back to main window
        self.driver.switch_to.window(main_window)
        print(f"Back to main window: {self.driver.title}")
    
    def handle_iframes(self):
        """Handle iframes/frames"""
        print("ğŸ–¼ï¸ Handling iframes...")
        
        self.driver.get("https://www.w3schools.com/html/html_iframe.asp")
        
        # Find all iframes
        iframes = self.driver.find_elements(By.TAG_NAME, "iframe")
        print(f"Found {len(iframes)} iframes")
        
        for i, iframe in enumerate(iframes):
            try:
                # Switch to iframe
                self.driver.switch_to.frame(iframe)
                
                # Do something inside iframe
                print(f"Iframe {i}: {self.driver.title}")
                
                # Switch back to main content
                self.driver.switch_to.default_content()
                
            except Exception as e:
                print(f"Error with iframe {i}: {e}")
                self.driver.switch_to.default_content()
    
    def handle_javascript_alerts(self):
        """Handle JavaScript alerts, confirms, prompts"""
        print("âš ï¸ Handling JavaScript alerts...")
        
        # Navigate to test page with alerts
        self.driver.get("https://demoqa.com/alerts")
        
        # Find and click alert button
        alert_button = self.driver.find_element(By.ID, "alertButton")
        alert_button.click()
        
        # Switch to alert
        alert = self.driver.switch_to.alert
        print(f"Alert text: {alert.text}")
        
        # Accept alert (click OK)
        alert.accept()
        print("Alert accepted")
        
        # For confirm dialog (OK/Cancel)
        confirm_button = self.driver.find_element(By.ID, "confirmButton")
        confirm_button.click()
        
        confirm = self.driver.switch_to.alert
        # To accept: confirm.accept()
        # To dismiss: confirm.dismiss()
        
        # For prompt dialog (with input)
        prompt_button = self.driver.find_element(By.ID, "promtButton")
        prompt_button.click()
        
        prompt = self.driver.switch_to.alert
        prompt.send_keys("Test input")
        prompt.accept()
    
    def close(self):
        self.driver.quit()

# Run dynamic content handling
if __name__ == "__main__":
    print("ğŸŒ€ Handling dynamic web content...")
    handler = DynamicContentHandler()
    
    try:
        # Test infinite scroll (use a site with infinite scroll)
        # handler.handle_infinite_scroll("https://www.reddit.com/r/programming/")
        
        # Test lazy loading
        # handler.handle_lazy_loading("https://unsplash.com/")
        
        # Test other dynamic content
        handler.handle_modal_popups()
        handler.handle_tabs_windows()
        handler.handle_iframes()
        handler.handle_javascript_alerts()
        
    except Exception as e:
        print(f"Error: {e}")
    
    finally:
        handler.close()
</pre>
</div>
</div>

<h3>ğŸ” Real-World Selenium Project</h3>
<div style="background-color: #e8f5e8; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h4>ğŸ›’ E-commerce Product Scraper with Selenium</h4>
    
<pre style='background-color: #36454f; color: #fff; border-radius: 5px; padding: 15px; margin: 10px 0;'>
# ========= COMPLETE E-COMMERCE SCRAPER =========
from selenium import webdriver
from selenium.webdriver.common.by import By
from selenium.webdriver.common.keys import Keys
from selenium.webdriver.support.ui import WebDriverWait
from selenium.webdriver.support import expected_conditions as EC
from selenium.webdriver.chrome.service import Service
from webdriver_manager.chrome import ChromeDriverManager
from selenium.common.exceptions import TimeoutException, NoSuchElementException
import time
import json
import csv
from datetime import datetime
import random

class EcommerceScraper:
    def __init__(self, headless=True):
        """Initialize the scraper with stealth options"""
        service = Service(ChromeDriverManager().install())
        options = webdriver.ChromeOptions()
        
        if headless:
            options.add_argument("--headless")
        
        # Stealth options
        options.add_argument("--disable-blink-features=AutomationControlled")
        options.add_experimental_option("excludeSwitches", ["enable-automation"])
        options.add_experimental_option('useAutomationExtension', False)
        
        # Performance options
        prefs = {
            "profile.default_content_setting_values.notifications": 2,
            "profile.managed_default_content_settings.images": 2  # Load images
        }
        options.add_experimental_option("prefs", prefs)
        
        self.driver = webdriver.Chrome(service=service, options=options)
        self.wait = WebDriverWait(self.driver, 15)
        self.results = []
        
        # Remove navigator.webdriver flag
        self.driver.execute_script("""
            Object.defineProperty(navigator, 'webdriver', {
                get: () => undefined
            });
        """)
    
    def random_delay(self, min_seconds=1, max_seconds=3):
        """Add random delay to appear more human"""
        delay = random.uniform(min_seconds, max_seconds)
        time.sleep(delay)
    
    def scrape_amazon_product(self, product_url):
        """Scrape product details from Amazon"""
        print(f"\nğŸ›ï¸ Scraping Amazon product: {product_url}")
        
        try:
            self.driver.get(product_url)
            self.random_delay(2, 4)
            
            # Handle cookie consent if present
            self.handle_cookie_consent()
            
            product_data = {
                'source': 'Amazon',
                'url': product_url,
                'scraped_at': datetime.now().isoformat()
            }
            
            # Extract product title
            try:
                title_elem = self.wait.until(
                    EC.presence_of_element_located((By.ID, "productTitle"))
                )
                product_data['title'] = title_elem.text.strip()
            except:
                product_data['title'] = "Not found"
            
            # Extract price
            try:
                # Try different price selectors (Amazon changes these often)
                price_selectors = [
                    "span.a-price span[aria-hidden='true']",
                    "#priceblock_ourprice",
                    "#priceblock_dealprice",
                    ".a-price .a-offscreen",
                    "[data-a-color='price'] span"
                ]
                
                for selector in price_selectors:
                    try:
                        price_elem = self.driver.find_element(By.CSS_SELECTOR, selector)
                        product_data['price'] = price_elem.text.strip()
                        break
                    except:
                        continue
                else:
                    product_data['price'] = "Not found"
            except:
                product_data['price'] = "Not found"
            
            # Extract rating
            try:
                rating_elem = self.driver.find_element(
                    By.CSS_SELECTOR, "span[data-hook='rating-out-of-text']"
                )
                product_data['rating'] = rating_elem.text.strip()
            except:
                product_data['rating'] = "Not rated"
            
            # Extract review count
            try:
                reviews_elem = self.driver.find_element(By.ID, "acrCustomerReviewText")
                product_data['review_count'] = reviews_elem.text.strip()
            except:
                product_data['review_count'] = "0"
            
            # Extract product features
            try:
                features = []
                feature_elements = self.driver.find_elements(
                    By.CSS_SELECTOR, "#feature-bullets li"
                )
                for elem in feature_elements:
                    features.append(elem.text.strip())
                product_data['features'] = features
            except:
                product_data['features'] = []
            
            # Extract product description
            try:
                desc_elem = self.driver.find_element(By.ID, "productDescription")
                product_data['description'] = desc_elem.text.strip()
            except:
                product_data['description'] = ""
            
            # Extract technical details from table
            try:
                tech_details = {}
                table = self.driver.find_element(By.ID, "productDetails_techSpec_section_1")
                rows = table.find_elements(By.TAG_NAME, "tr")
                
                for row in rows:
                    try:
                        cells = row.find_elements(By.TAG_NAME, "td")
                        if len(cells) >= 2:
                            key = cells[0].text.strip().replace('\n', ' ')
                            value = cells[1].text.strip().replace('\n', ' ')
                            tech_details[key] = value
                    except:
                        continue
                
                product_data['technical_details'] = tech_details
            except:
                product_data['technical_details'] = {}
            
            # Extract images
            try:
                images = []
                img_elements = self.driver.find_elements(
                    By.CSS_SELECTOR, "#altImages img"
                )
                for img in img_elements:
                    src = img.get_attribute("src")
                    if src and "http" in src:
                        images.append(src)
                product_data['images'] = images[:5]  # First 5 images
            except:
                product_data['images'] = []
            
            self.results.append(product_data)
            print(f"âœ… Successfully scraped: {product_data['title'][:50]}...")
            
            return product_data
            
        except Exception as e:
            print(f"âŒ Error scraping Amazon product: {e}")
            return None
    
    def scrape_amazon_search(self, search_query, max_pages=3):
        """Search Amazon and scrape multiple products"""
        print(f"\nğŸ” Searching Amazon for: {search_query}")
        
        try:
            self.driver.get("https://www.amazon.com")
            self.random_delay(2, 3)
            
            # Handle cookie consent
            self.handle_cookie_consent()
            
            # Find search box and search
            search_box = self.wait.until(
                EC.element_to_be_clickable((By.ID, "twotabsearchtextbox"))
            )
            search_box.clear()
            search_box.send_keys(search_query)
            search_box.send_keys(Keys.ENTER)
            
            self.random_delay(2, 3)
            
            products = []
            
            for page in range(1, max_pages + 1):
                print(f"\nğŸ“„ Processing page {page}...")
                
                # Wait for results to load
                self.wait.until(
                    EC.presence_of_element_located((By.CSS_SELECTOR, "[data-component-type='s-search-result']"))
                )
                
                # Extract product cards
                product_cards = self.driver.find_elements(
                    By.CSS_SELECTOR, "[data-component-type='s-search-result']"
                )
                
                print(f"Found {len(product_cards)} product cards on page {page}")
                
                for i, card in enumerate(product_cards[:10]):  # Limit to 10 per page
                    try:
                        # Extract basic info from card
                        title_elem = card.find_element(By.CSS_SELECTOR, "h2 a")
                        product_title = title_elem.text.strip()
                        product_url = title_elem.get_attribute("href")
                        
                        # Extract price
                        try:
                            price_elem = card.find_element(By.CSS_SELECTOR, ".a-price .a-offscreen")
                            price = price_elem.get_attribute("textContent")
                        except:
                            price = "Not available"
                        
                        # Extract rating
                        try:
                            rating_elem = card.find_element(By.CSS_SELECTOR, ".a-icon-alt")
                            rating = rating_elem.get_attribute("textContent")
                        except:
                            rating = "Not rated"
                        
                        # Extract review count
                        try:
                            reviews_elem = card.find_element(By.CSS_SELECTOR, ".a-size-base")
                            review_count = reviews_elem.text.strip()
                        except:
                            review_count = "0"
                        
                        product_data = {
                            'title': product_title,
                            'url': product_url,
                            'price': price,
                            'rating': rating,
                            'review_count': review_count,
                            'page': page,
                            'position': i + 1
                        }
                        
                        products.append(product_data)
                        print(f"  {i+1}. {product_title[:50]}... - {price}")
                        
                    except Exception as e:
                        print(f"  Error with product {i+1}: {e}")
                        continue
                
                # Try to go to next page
                if page < max_pages:
                    try:
                        next_button = self.driver.find_element(
                            By.CSS_SELECTOR, ".s-pagination-next"
                        )
                        if "s-pagination-disabled" not in next_button.get_attribute("class"):
                            next_button.click()
                            self.random_delay(3, 5)
                        else:
                            print("No more pages")
                            break
                    except:
                        print("Could not find next page button")
                        break
            
            return products
            
        except Exception as e:
            print(f"Error in Amazon search: {e}")
            return []
    
    def scrape_bestbuy_product(self, product_url):
        """Scrape product details from Best Buy"""
        print(f"\nğŸ›ï¸ Scraping Best Buy product: {product_url}")
        
        try:
            self.driver.get(product_url)
            self.random_delay(2, 4)
            
            product_data = {
                'source': 'Best Buy',
                'url': product_url,
                'scraped_at': datetime.now().isoformat()
            }
            
            # Extract title
            try:
                title_elem = self.wait.until(
                    EC.presence_of_element_located((By.CSS_SELECTOR, "h1[class*='heading']"))
                )
                product_data['title'] = title_elem.text.strip()
            except:
                product_data['title'] = "Not found"
            
            # Extract price
            try:
                price_elem = self.driver.find_element(
                    By.CSS_SELECTOR, "div.priceView-customer-price span"
                )
                product_data['price'] = price_elem.text.strip()
            except:
                product_data['price'] = "Not found"
            
            # Extract rating
            try:
                rating_elem = self.driver.find_element(
                    By.CSS_SELECTOR, "span.c-reviews span[class*='rating']"
                )
                product_data['rating'] = rating_elem.text.strip()
            except:
                product_data['rating'] = "Not rated"
            
            # Extract overview
            try:
                overview_elem = self.driver.find_element(
                    By.CSS_SELECTOR, "div.product-overview"
                )
                product_data['overview'] = overview_elem.text.strip()
            except:
                product_data['overview'] = ""
            
            self.results.append(product_data)
            print(f"âœ… Successfully scraped: {product_data['title'][:50]}...")
            
            return product_data
            
        except Exception as e:
            print(f"âŒ Error scraping Best Buy product: {e}")
            return None
    
    def handle_cookie_consent(self):
        """Handle cookie consent banners"""
        try:
            # Common cookie consent selectors
            cookie_selectors = [
                "#sp-cc-accept",  # Amazon
                ".accept-cookies",
                "[aria-label='Accept cookies']",
                "#cookieConsent button",
                ".cookie-banner button"
            ]
            
            for selector in cookie_selectors:
                try:
                    cookie_button = self.driver.find_element(By.CSS_SELECTOR, selector)
                    if cookie_button.is_displayed():
                        cookie_button.click()
                        print("âœ… Accepted cookies")
                        self.random_delay(1, 2)
                        break
                except:
                    continue
        except:
            pass  # No cookie banner found
    
    def save_results(self, format='json'):
        """Save scraped results to file"""
        if not self.results:
            print("No results to save")
            return
        
        timestamp = datetime.now().strftime("%Y%m%d_%H%M%S")
        
        if format == 'json':
            filename = f"ecommerce_results_{timestamp}.json"
            with open(filename, 'w', encoding='utf-8') as f:
                json.dump(self.results, f, indent=2, ensure_ascii=False)
            print(f"âœ… Saved {len(self.results)} results to {filename}")
        
        elif format == 'csv':
            filename = f"ecommerce_results_{timestamp}.csv"
            if self.results:
                keys = self.results[0].keys()
                with open(filename, 'w', newline='', encoding='utf-8') as f:
                    writer = csv.DictWriter(f, fieldnames=keys)
                    writer.writeheader()
                    writer.writerows(self.results)
                print(f"âœ… Saved {len(self.results)} results to {filename}")
    
    def close(self):
        """Close the driver"""
        self.driver.quit()

# Main execution
if __name__ == "__main__":
    print("ğŸš€ Starting E-commerce Scraper with Selenium")
    print("=" * 60)
    
    scraper = EcommerceScraper(headless=False)  # Set to True for production
    
    try:
        # Example 1: Scrape specific products
        print("\n1. Scraping specific products:")
        
        amazon_products = [
            "https://www.amazon.com/dp/B08N5WRWNW",  # Example product
            "https://www.amazon.com/dp/B08N5PN5FD",  # Another product
        ]
        
        for url in amazon_products:
            scraper.scrape_amazon_product(url)
            scraper.random_delay(3, 5)  # Be polite between requests
        
        # Example 2: Search for products
        print("\n2. Searching for products:")
        search_results = scraper.scrape_amazon_search("wireless headphones", max_pages=2)
        
        # Save search results
        if search_results:
            print(f"\nğŸ“Š Search results: {len(search_results)} products found")
            for i, product in enumerate(search_results[:5], 1):  # Show first 5
                print(f"{i}. {product['title'][:60]}... - {product['price']}")
        
        # Example 3: Scrape from Best Buy
        print("\n3. Scraping from Best Buy:")
        bestbuy_url = "https://www.bestbuy.com/site/apple-airpods-pro-2nd-generation-white/6522380.p"
        scraper.scrape_bestbuy_product(bestbuy_url)
        
        # Save all results
        print("\nğŸ’¾ Saving results...")
        scraper.save_results(format='json')
        scraper.save_results(format='csv')
        
        print(f"\nâœ… Total products scraped: {len(scraper.results)}")
        
    except KeyboardInterrupt:
        print("\nâ¹ï¸ Scraping interrupted by user")
    except Exception as e:
        print(f"\nâŒ Error during scraping: {e}")
        import traceback
        traceback.print_exc()
    finally:
        scraper.close()
        print("\nğŸ”š Scraping session ended")
</pre>

<h4>ğŸ¤– Automating Complex Workflows</h4>
<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 15px;">
<pre style='background-color: #f1f1f1; border-radius: 5px; padding: 10px;'>
# ========= AUTOMATING SOCIAL MEDIA ACTIONS =========
# Note: Use responsibly and respect terms of service

from selenium import webdriver
from selenium.webdriver.common.by import By
from selenium.webdriver.common.keys import Keys
from selenium.webdriver.support.ui import WebDriverWait
from selenium.webdriver.support import expected_conditions as EC
import time
import random

class SocialMediaAutomator:
    def __init__(self, headless=True):
        """Initialize automator"""
        service = Service(ChromeDriverManager().install())
        options = webdriver.ChromeOptions()
        
        if headless:
            options.add_argument("--headless")
        
        # Add user data directory to stay logged in
        # options.add_argument("user-data-dir=/path/to/profile")
        
        self.driver = webdriver.Chrome(service=service, options=options)
        self.wait = WebDriverWait(self.driver, 15)
    
    def human_like_delay(self, min_sec=1, max_sec=3):
        """Random delay to appear human"""
        time.sleep(random.uniform(min_sec, max_sec))
    
    def type_like_human(self, element, text):
        """Type text with human-like delays between keystrokes"""
        element.clear()
        for char in text:
            element.send_keys(char)
            time.sleep(random.uniform(0.05, 0.2))  # Random typing speed
    
    def automate_twitter_scraping(self, username, max_tweets=50):
        """Scrape tweets from Twitter (public data only)"""
        print(f"\nğŸ¦ Scraping Twitter profile: @{username}")
        
        try:
            # Go to user's profile
            url = f"https://twitter.com/{username}"
            self.driver.get(url)
            self.human_like_delay(3, 5)
            
            # Wait for tweets to load
            self.wait.until(
                EC.presence_of_element_located((By.CSS_SELECTOR, "[data-testid='tweet']"))
            )
            
            tweets = []
            last_height = self.driver.execute_script("return document.body.scrollHeight")
            
            while len(tweets) < max_tweets:
                # Find tweet elements
                tweet_elements = self.driver.find_elements(
                    By.CSS_SELECTOR, "[data-testid='tweet']"
                )
                
                for tweet in tweet_elements[len(tweets):]:
                    try:
                        # Extract tweet text
                        text_elem = tweet.find_element(
                            By.CSS_SELECTOR, "[data-testid='tweetText']"
                        )
                        tweet_text = text_elem.text
                        
                        # Extract timestamp
                        time_elem = tweet.find_element(By.TAG_NAME, "time")
                        timestamp = time_elem.get_attribute("datetime")
                        
                        # Extract engagement metrics
                        try:
                            reply_elem = tweet.find_element(
                                By.CSS_SELECTOR, "[data-testid='reply']"
                            )
                            reply_count = reply_elem.text or "0"
                        except:
                            reply_count = "0"
                        
                        tweets.append({
                            'text': tweet_text,
                            'timestamp': timestamp,
                            'replies': reply_count,
                            'profile': username
                        })
                        
                        if len(tweets) >= max_tweets:
                            break
                            
                    except Exception as e:
                        continue
                
                # Scroll down for more tweets
                self.driver.execute_script(
                    "window.scrollTo(0, document.body.scrollHeight);"
                )
                self.human_like_delay(2, 4)
                
                # Check if we've reached the bottom
                new_height = self.driver.execute_script("return document.body.scrollHeight")
                if new_height == last_height:
                    break
                last_height = new_height
            
            print(f"âœ… Scraped {len(tweets)} tweets from @{username}")
            return tweets
            
        except Exception as e:
            print(f"âŒ Error scraping Twitter: {e}")
            return []
    
    def automate_instagram_scraping(self, username, max_posts=30):
        """Scrape public Instagram posts"""
        print(f"\nğŸ“¸ Scraping Instagram profile: @{username}")
        
        try:
            # Instagram requires login for most scraping
            # This example shows public profile scraping
            
            url = f"https://www.instagram.com/{username}/"
            self.driver.get(url)
            self.human_like_delay(4, 6)
            
            # Handle login prompt if shown
            try:
                not_now = self.driver.find_element(
                    By.XPATH, "//button[text()='Not Now']"
                )
                not_now.click()
                self.human_like_delay(2, 3)
            except:
                pass
            
            posts = []
            
            # Find post links
            post_links = self.driver.find_elements(
                By.CSS_SELECTOR, "a[href*='/p/']"
            )[:max_posts]
            
            for i, link in enumerate(post_links):
                try:
                    post_url = link.get_attribute("href")
                    
                    # Open post in new tab
                    self.driver.execute_script(f"window.open('{post_url}');")
                    self.driver.switch_to.window(self.driver.window_handles[-1])
                    
                    self.human_like_delay(2, 3)
                    
                    # Extract post data
                    try:
                        # Get caption
                        caption_elem = self.wait.until(
                            EC.presence_of_element_located(
                                (By.CSS_SELECTOR, "h1[class*='Comment']")
                            )
                        )
                        caption = caption_elem.text
                    except:
                        caption = ""
                    
                    # Get likes
                    try:
                        likes_elem = self.driver.find_element(
                            By.CSS_SELECTOR, "section span"
                        )
                        likes = likes_elem.text
                    except:
                        likes = "0"
                    
                    # Get timestamp
                    try:
                        time_elem = self.driver.find_element(By.TAG_NAME, "time")
                        timestamp = time_elem.get_attribute("datetime")
                    except:
                        timestamp = ""
                    
                    posts.append({
                        'url': post_url,
                        'caption': caption[:200] + "..." if len(caption) > 200 else caption,
                        'likes': likes,
                        'timestamp': timestamp,
                        'profile': username
                    })
                    
                    print(f"  Scraped post {i+1}/{len(post_links)}")
                    
                    # Close tab and switch back
                    self.driver.close()
                    self.driver.switch_to.window(self.driver.window_handles[0])
                    
                    self.human_like_delay(1, 2)
                    
                except Exception as e:
                    print(f"  Error with post {i+1}: {e}")
                    # Make sure we're back on main tab
                    if len(self.driver.window_handles) > 1:
                        self.driver.close()
                    self.driver.switch_to.window(self.driver.window_handles[0])
                    continue
            
            print(f"âœ… Scraped {len(posts)} posts from @{username}")
            return posts
            
        except Exception as e:
            print(f"âŒ Error scraping Instagram: {e}")
            return []
    
    def automate_linkedin_scraping(self, company_url):
        """Scrape public company info from LinkedIn"""
        print(f"\nğŸ’¼ Scraping LinkedIn company: {company_url}")
        
        try:
            self.driver.get(company_url)
            self.human_like_delay(4, 6)
            
            company_data = {}
            
            # Extract company name
            try:
                name_elem = self.wait.until(
                    EC.presence_of_element_located((By.TAG_NAME, "h1"))
                )
                company_data['name'] = name_elem.text.strip()
            except:
                company_data['name'] = ""
            
            # Extract about section
            try:
                about_btn = self.driver.find_element(
                    By.XPATH, "//button[contains(text(), 'About')]"
                )
                about_btn.click()
                self.human_like_delay(2, 3)
                
                about_elem = self.driver.find_element(
                    By.CSS_SELECTOR, "[data-test-id='about-us']"
                )
                company_data['about'] = about_elem.text.strip()
            except:
                company_data['about'] = ""
            
            # Extract employee count
            try:
                employees_elem = self.driver.find_element(
                    By.XPATH, "//dt[text()='Employees']/following-sibling::dd"
                )
                company_data['employees'] = employees_elem.text.strip()
            except:
                company_data['employees'] = ""
            
            print(f"âœ… Scraped company: {company_data.get('name', 'Unknown')}")
            return company_data
            
        except Exception as e:
            print(f"âŒ Error scraping LinkedIn: {e}")
            return {}
    
    def close(self):
        self.driver.quit()

# Example usage with ethical considerations
if __name__ == "__main__":
    print("ğŸ¤– Social Media Automation Examples")
    print("âš ï¸ Use responsibly and respect terms of service!")
    print("=" * 60)
    
    automator = SocialMediaAutomator(headless=False)
    
    try:
        # Example 1: Twitter scraping (public data)
        print("\n1. Twitter Public Data Scraping:")
        tweets = automator.automate_twitter_scraping("twitter", max_tweets=10)
        
        if tweets:
            print(f"\nLatest tweets:")
            for i, tweet in enumerate(tweets[:3], 1):
                print(f"{i}. {tweet['text'][:80]}...")
        
        automator.human_like_delay(5, 8)
        
        # Example 2: Instagram (requires careful consideration)
        print("\n2. Instagram Example (commented out for ethics):")
        # posts = automator.automate_instagram_scraping("instagram", max_posts=5)
        
        automator.human_like_delay(5, 8)
        
        # Example 3: LinkedIn company info
        print("\n3. LinkedIn Company Info:")
        company_data = automator.automate_linkedin_scraping(
            "https://www.linkedin.com/company/microsoft"
        )
        
        if company_data:
            print(f"\nCompany: {company_data.get('name')}")
            print(f"About: {company_data.get('about', '')[:100]}...")
            print(f"Employees: {company_data.get('employees', 'Unknown')}")
        
    except Exception as e:
        print(f"Error: {e}")
    finally:
        automator.close()
</pre>

<pre style='background-color: #f1f1f1; border-radius: 5px; padding: 10px;'>
# ========= BYPASSING ANTI-BOT PROTECTIONS =========
# Advanced techniques (use responsibly and legally)

from selenium import webdriver
from selenium.webdriver.common.by import By
from selenium.webdriver.common.keys import Keys
import time
import random
import undetected_chromedriver as uc  # pip install undetected-chromedriver

class AntiBotBypass:
    def __init__(self, use_undetected=True):
        """Initialize with anti-detection measures"""
        if use_undetected:
            # undetected-chromedriver is better at avoiding detection
            options = uc.ChromeOptions()
            options.add_argument("--disable-blink-features=AutomationControlled")
            self.driver = uc.Chrome(options=options)
        else:
            # Regular Selenium with advanced options
            service = Service(ChromeDriverManager().install())
            options = webdriver.ChromeOptions()
            
            # Anti-detection options
            options.add_argument("--disable-blink-features=AutomationControlled")
            options.add_experimental_option("excludeSwitches", ["enable-automation"])
            options.add_experimental_option('useAutomationExtension', False)
            
            # Add stealth.js to hide automation
            self.driver = webdriver.Chrome(service=service, options=options)
            
            # Execute stealth scripts
            self.driver.execute_script("""
                // Override the navigator.webdriver property
                Object.defineProperty(navigator, 'webdriver', {
                    get: () => undefined
                });
                
                // Override the permissions API
                const originalQuery = window.navigator.permissions.query;
                window.navigator.permissions.query = (parameters) => (
                    parameters.name === 'notifications' ?
                        Promise.resolve({ state: Notification.permission }) :
                        originalQuery(parameters)
                );
                
                // Override plugins
                Object.defineProperty(navigator, 'plugins', {
                    get: () => [1, 2, 3, 4, 5]
                });
                
                // Override languages
                Object.defineProperty(navigator, 'languages', {
                    get: () => ['en-US', 'en']
                });
            """)
        
        # Set window size to common resolution
        self.driver.set_window_size(1920, 1080)
        
        # Add human-like mouse movement simulation
        self.actions = webdriver.ActionChains(self.driver)
    
    def human_like_mouse_movement(self, element):
        """Move mouse like a human (not straight lines)"""
        # Get element location
        location = element.location
        size = element.size
        
        # Calculate target coordinates (center of element)
        target_x = location['x'] + size['width'] / 2
        target_y = location['y'] + size['height'] / 2
        
        # Get current mouse position (approximate)
        current_x = random.randint(100, 500)
        current_y = random.randint(100, 500)
        
        # Create curved path
        steps = random.randint(3, 7)
        points = []
        
        for i in range(steps):
            # Add some randomness to the path
            x = current_x + (target_x - current_x) * (i / steps) + random.randint(-20, 20)
            y = current_y + (target_y - current_y) * (i / steps) + random.randint(-20, 20)
            points.append((x, y))
        
        # Move through points
        for point in points:
            self.driver.execute_script(f"window.scrollTo({point[0] - 100}, {point[1] - 100});")
            time.sleep(random.uniform(0.05, 0.2))
    
    def solve_simple_captcha(self):
        """Attempt to solve simple CAPTCHAs (educational only)"""
        print("âš ï¸ CAPTCHA detected. Manual intervention may be required.")
        
        # For simple image CAPTCHAs (NOT reCAPTCHA)
        try:
            # Find CAPTCHA image
            captcha_img = self.driver.find_element(
                By.CSS_SELECTOR, "img[src*='captcha'], img[alt*='CAPTCHA']"
            )
            
            # Save CAPTCHA image for manual solving
            captcha_src = captcha_img.get_attribute("src")
            print(f"CAPTCHA image: {captcha_src}")
            
            # Here you would:
            # 1. Download the image
            # 2. Use OCR (Tesseract) to read it
            # 3. Or use a CAPTCHA solving service (paid)
            
            # For now, we'll wait for manual input
            input("Please solve the CAPTCHA manually and press Enter...")
            
        except:
            print("No simple CAPTCHA found. Might be reCAPTCHA.")
    
    def handle_cloudflare(self):
        """Handle Cloudflare protection"""
        print("â˜ï¸ Cloudflare protection detected")
        
        # Check for Cloudflare challenge
        if "cloudflare" in self.driver.page_source.lower():
            print("Waiting for Cloudflare challenge...")
            
            # Wait and retry
            time.sleep(5)
            
            # Try refreshing
            self.driver.refresh()
            time.sleep(5)
            
            # Check if we're still blocked
            if "Checking your browser" in self.driver.page_source:
                print("Still blocked by Cloudflare. Trying alternative approaches:")
                print("1. Try using residential proxies")
                print("2. Increase delay between requests")
                print("3. Use different User-Agent")
                print("4. Consider using the website's API instead")
                
                return False
        
        return True
    
    def bypass_ip_block(self):
        """Strategies for IP blocking"""
        print("ğŸ›¡ï¸ IP blocking detected or anticipated")
        
        strategies = [
            "1. Use rotating residential proxies",
            "2. Implement longer delays between requests",
            "3. Respect robots.txt rate limits",
            "4. Use the website's official API if available",
            "5. Consider purchasing the data if it's for commercial use",
            "6. Contact the website owner for permission"
        ]
        
        for strategy in strategies:
            print(f"   {strategy}")
        
        return False
    
    def test_anti_bot_websites(self):
        """Test against known anti-bot websites"""
        test_urls = {
            "Bot detection test": "https://intoli.com/blog/not-possible-to-block-chrome-headless/chrome-headless-test.html",
            "Are you a bot?": "https://arh.antoinevastel.com/bots/areyouheadless",
            "Selenium detection": "https://bot.sannysoft.com/",
            "DataDome demo": "https://datadome.co/bot-testing/"
        }
        
        results = {}
        
        for name, url in test_urls.items():
            print(f"\nğŸ” Testing: {name}")
            print(f"   URL: {url}")
            
            try:
                self.driver.get(url)
                time.sleep(3)
                
                # Check page content for detection
                page_text = self.driver.page_source.lower()
                
                detection_phrases = [
                    "headless", "automation", "selenium", "webdriver",
                    "bot detected", "blocked", "challenge"
                ]
                
                detected = False
                for phrase in detection_phrases:
                    if phrase in page_text:
                        print(f"   âŒ Detected: {phrase}")
                        detected = True
                
                if not detected:
                    print("   âœ… Not detected")
                
                results[name] = not detected
                
            except Exception as e:
                print(f"   âš ï¸ Error: {e}")
                results[name] = False
            
            time.sleep(2)
        
        # Calculate success rate
        success_rate = sum(results.values()) / len(results) * 100
        print(f"\nğŸ“Š Overall success rate: {success_rate:.1f}%")
        
        return results
    
    def ethical_guidelines(self):
        """Print ethical guidelines for web scraping"""
        print("\nâš–ï¸ ETHICAL GUIDELINES FOR WEB SCRAPING:")
        print("=" * 50)
        
        guidelines = [
            "1. ALWAYS check robots.txt first",
            "2. Respect rate limits and add delays",
            "3. Identify your bot with a proper User-Agent",
            "4. Don't scrape personal or sensitive data",
            "5. Respect website terms of service",
            "6. Use APIs when available (they're more reliable)",
            "7. Don't overload servers with too many requests",
            "8. Cache responses to avoid re-scraping",
            "9. Consider the legal implications in your country",
            "10. When in doubt, ask for permission"
        ]
        
        for guideline in guidelines:
            print(f"   {guideline}")
        
        print("\nâš ï¸ WARNING:")
        print("   - Bypassing anti-bot measures may violate terms of service")
        print("   - Some websites consider scraping a violation of CFAA (US)")
        print("   - When detected, stop scraping and respect the block")
        print("   - Consider using official APIs or purchasing data instead")
    
    def close(self):
        self.driver.quit()

# Run anti-bot tests
if __name__ == "__main__":
    print("ğŸ›¡ï¸ Anti-Bot Bypass Techniques (Educational Only)")
    print("=" * 60)
    
    bypass = AntiBotBypass(use_undetected=True)
    
    try:
        # Show ethical guidelines first
        bypass.ethical_guidelines()
        
        input("\nPress Enter to continue with educational tests...")
        
        # Test against anti-bot websites
        results = bypass.test_anti_bot_websites()
        
        # Demonstrate handling techniques
        print("\nğŸ› ï¸ Anti-Bot Handling Techniques:")
        
        # Cloudflare handling
        bypass.handle_cloudflare()
        
        # IP blocking strategies
        bypass.bypass_ip_block()
        
        # CAPTCHA handling
        bypass.solve_simple_captcha()
        
    except Exception as e:
        print(f"Error: {e}")
    
    finally:
        bypass.close()
        print("\nâœ… Anti-bot testing completed")
</pre>
</div>
</div>

<h3>Today's Hands-On Exercises</h3>
<div style="background-color: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <b>Exercise 1: E-commerce Price Comparison Bot (90 minutes)</b>
    <p>Build a bot that compares prices across multiple websites:</p>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 15px 0;">
        <div>
            <b>Requirements:</b>
            <ol>
                <li>Search for same product on Amazon, eBay, Walmart</li>
                <li>Handle login prompts and cookie consents</li>
                <li>Navigate search results with pagination</li>
                <li>Extract: Price, shipping cost, seller rating</li>
                <li>Handle "out of stock" and "used" conditions</li>
                <li>Calculate total cost (price + shipping)</li>
                <li>Identify the best deal automatically</li>
                <li>Save results with timestamps</li>
            </ol>
        </div>
        
        <div>
            <b>Advanced Features:</b>
            <ul>
                <li>Price alert system (email when price drops)</li>
                <li>Historical price tracking with graphs</li>
                <li>Multi-threaded scraping for speed</li>
                <li>Proxy rotation to avoid blocking</li>
                <li>Headless mode for server deployment</li>
                <li>Database storage for results</li>
                <li>REST API to query results</li>
            </ul>
        </div>
    </div>
    
    <b>Exercise 2: Social Media Analytics Scraper (60 minutes)</b>
    <p>Create analytics for social media accounts (public data only):</p>
    
    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin: 15px 0;">
        <div style="background: #f8f9fa; padding: 10px; border-radius: 5px;">
            <b>Twitter Analytics:</b>
            <ul>
                <li>Follower count over time</li>
                <li>Tweet engagement metrics</li>
                <li>Most used hashtags</li>
                <li>Posting frequency analysis</li>
                <li>Best time to post</li>
            </ul>
        </div>
        
        <div style="background: #f8f9fa; padding: 10px; border-radius: 5px;">
            <b>Instagram Analytics:</b>
            <ul>
                <li>Follower growth tracking</li>
                <li>Post engagement rates</li>
                <li>Hashtag performance</li>
                <li>Audience demographics</li>
                <li>Content type analysis</li>
            </ul>
        </div>
        
        <div style="background: #f8f9fa; padding: 10px; border-radius: 5px;">
            <b>YouTube Analytics:</b>
            <ul>
                <li>Video view counts</li>
                <li>Subscriber growth</li>
                <li>Most popular videos</li>
                <li>Comment sentiment analysis</li>
                <li>Revenue estimation</li>
            </ul>
        </div>
    </div>
    
    <b>Exercise 3: Job Application Automator (30 minutes)</b>
    <p>Build a bot to automate job applications (for practice only):</p>
    <ul>
        <li>Auto-fill application forms with your resume data</li>
        <li>Upload documents (CV, cover letter)</li>
        <li>Answer screening questions</li>
        <li>Handle different form layouts</li>
        <li>Track applications in a spreadsheet</li>
        <li>Send follow-up emails automatically</li>
        <li>Schedule interviews automatically</li>
        <li><b>âš ï¸ Important:</b> Only use on practice/test websites!</li>
    </ul>
</div>

<h3>Homework Assignment</h3>
<div style="background-color: #fff0e6; padding: 15px; margin: 10px 0; border-radius: 5px;">
    <b>Build a "Competitive Intelligence Platform"</b>
    
    <b>Requirements:</b>
    <ol>
        <li><b>Multi-Website Monitor:</b>
            <ul>
                <li>Monitor competitors' websites for changes</li>
                <li>Track price changes on e-commerce sites</li>
                <li>Monitor new product launches</li>
                <li>Track content updates on blogs/news</li>
                <li>Monitor job postings (hiring trends)</li>
            </ul>
        </li>
        
        <li><b>Social Media Intelligence:</b>
            <ul>
                <li>Track competitors' social media activity</li>
                <li>Analyze engagement and sentiment</li>
                <li>Monitor hashtag campaigns</li>
                <li>Track influencer partnerships</li>
                <li>Analyze customer reviews and complaints</li>
            </ul>
        </li>
        
        <li><b>Advanced Features:</b>
            <ul>
                <li>Real-time alerts for significant changes</li>
                <li>Trend analysis and prediction</li>
                <li>Automated reporting (PDF, email, dashboard)</li>
                <li>Natural language processing for sentiment</li>
                <li>Machine learning for anomaly detection</li>
                <li>API for integration with other systems</li>
            </ul>
        </li>
        
        <li><b>Ethical Implementation:</b>
            <ul>
                <li>Respect all robots.txt files</li>
                <li>Implement rate limiting and delays</li>
                <li>Use official APIs when available</li>
                <li>Cache responses to minimize load</li>
                <li>Clear terms of service compliance</li>
                <li>Data privacy and security measures</li>
            </ul>
        </li>
    </ol>
    
    <b>Technical Architecture:</b>
    <pre style="background: #f5f5f5; padding: 10px; margin: 10px 0;">
competitive_intelligence/
â”œâ”€â”€ scrapers/
â”‚   â”œâ”€â”€ base_scraper.py           # Base class with common functionality
â”‚   â”œâ”€â”€ ecommerce_scraper.py      # Price and product monitoring
â”‚   â”œâ”€â”€ social_media_scraper.py   # Social media monitoring
â”‚   â”œâ”€â”€ news_scraper.py           # News and blog monitoring
â”‚   â””â”€â”€ jobs_scraper.py           # Job posting monitoring
â”œâ”€â”€ monitoring/
â”‚   â”œâ”€â”€ change_detector.py        # Detect changes in scraped data
â”‚   â”œâ”€â”€ alert_system.py           # Send alerts for significant changes
â”‚   â”œâ”€â”€ scheduler.py              # Schedule scraping tasks
â”‚   â””â”€â”€ health_check.py           # Monitor scraper health
â”œâ”€â”€ analysis/
â”‚   â”œâ”€â”€ sentiment_analyzer.py     # NLP for sentiment analysis
â”‚   â”œâ”€â”€ trend_analyzer.py         # Identify trends over time
â”‚   â”œâ”€â”€ competitor_analysis.py    # Competitor comparison
â”‚   â””â”€â”€ report_generator.py       # Generate reports
â”œâ”€â”€ storage/
â”‚   â”œâ”€â”€ database.py               # Database operations
â”‚   â”œâ”€â”€ cache_manager.py          # Response caching
â”‚   â””â”€â”€ data_cleaner.py           # Data cleaning and normalization
â”œâ”€â”€ api/
â”‚   â”œâ”€â”€ rest_api.py               # REST API for data access
â”‚   â”œâ”€â”€ webhook_handler.py        # Handle incoming webhooks
â”‚   â””â”€â”€ integration.py            # Integration with other systems
â””â”€â”€ config/
    â”œâ”€â”€ settings.py               # Configuration settings
    â”œâ”€â”€ proxies.yaml              # Proxy configurations
    â””â”€â”€ websites.yaml             # Websites to monitor
    </pre>
    
    <b>Expected Output:</b>
    <pre style="background: #f5f5f5; padding: 10px; margin: 10px 0;">
ğŸ¢ Competitive Intelligence Report - Tech Industry
Generated: 2024-03-21 14:30:00
==================================================

ğŸ“Š Price Monitoring (Last 24 hours):
â€¢ Amazon lowered prices on 15 products
â€¢ Best Buy matched 8 of 10 competitor prices
â€¢ Walmart has best prices on electronics (+5% cheaper)
â€¢ Target running weekend sale (20% off home goods)

ğŸ“ˆ Social Media Activity:
â€¢ Competitor A: Launched new campaign (#Innovate2024)
â€¢ Competitor B: Customer complaints increased 15%
â€¢ Competitor C: Hired industry influencer (500K followers)
â€¢ Your brand: Engagement up 25% from last week

ğŸš€ Product Launches:
â€¢ New smartphone from Samsung (Galaxy S25)
â€¢ Apple released iOS 18 beta
â€¢ Microsoft announced AI features for Office
â€¢ Google launching new Pixel features

ğŸ’¼ Hiring Trends:
â€¢ Competitors hiring for AI/ML positions (50+ openings)
â€¢ Remote work positions increased 30%
â€¢ Salary ranges: $120K-$250K for senior developers
â€¢ Skills in demand: Python, TensorFlow, AWS

âš ï¸ Alerts:
1. PRICE DROP: Competitor lowered flagship product by $200
2. NEW LAUNCH: Rival company entering your market space
3. NEGATIVE TREND: Customer satisfaction declining for key competitor
==================================================
    </pre>
    
    <b>Bonus Challenges:</b>
    <ul>
        <li>Implement real-time WebSocket updates for live monitoring</li>
        <li>Add machine learning to predict competitor moves</li>
        <li>Create a Chrome extension for on-page competitive analysis</li>
        <li>Build a mobile app for on-the-go intelligence</li>
        <li>Integrate with CRM systems (Salesforce, HubSpot)</li>
        <li>Add support for international markets and languages</li>
    </ul>
</div>

<h3>Key Learning Points:</h3>
<ol>
    <li><b>Selenium vs Requests:</b> When to use each tool for web scraping</li>
    <li><b>Browser Automation:</b> Controlling browsers programmatically</li>
    <li><b>Dynamic Content:</b> Handling JavaScript-rendered websites</li>
    <li><b>Waiting Strategies:</b> Proper synchronization with page loads</li>
    <li><b>Advanced Interactions:</b> Clicking, typing, scrolling, drag-and-drop</li>
    <li><b>Anti-Bot Measures:</b> Understanding and ethically bypassing protections</li>
    <li><b>Real-World Projects:</b> Building practical automation tools</li>
</ol>

<div style="background-color: #e8f5e8; padding: 15px; margin: 20px 0; border-radius: 5px;">
    <h3>ğŸ’¡ Selenium Best Practices:</h3>
    <ul>
        <li><b>Use Explicit Waits:</b> Never use time.sleep() for production code</li>
        <li><b>Handle Exceptions:</b> Websites change - your code should be resilient</li>
        <li><b>Be Ethical:</b> Respect robots.txt and terms of service</li>
        <li><b>Add Delays:</b> Don't hammer servers with rapid requests</li>
        <li><b>Use Headless Mode:</b> For servers and faster execution</li>
        <li><b>Clean Up Resources:</b> Always close drivers with driver.quit()</li>
        <li><b>Log Everything:</b> Debugging Selenium can be challenging</li>
        <li><b>Consider Alternatives:</b> Sometimes APIs or simpler tools are better</li>
        <li><b>Test Locally First:</b> Before deploying to production</li>
        <li><b>Monitor Performance:</b> Selenium can be resource-intensive</li>
    </ul>
</div>

<h3>ğŸš€ Next Week Preview</h3>
<div style="background: white; padding: 20px; border-radius: 10px; border: 2px solid #4A90E2;">
    <div style="text-align: center; margin: 20px 0;">
        <div style="display: inline-block; text-align: left;">
            <div style="font-weight: bold; color: #4A90E2; margin-bottom: 10px;">ğŸ“… Coming Next Week:</div>
            <div style="margin-left: 20px;">
                <div>ğŸŒ <b>Web Scraping at Scale:</b> Scrapy framework introduction</div>
                <div>âš¡ <b>High Performance:</b> Concurrent scraping with asyncio</div>
                <div>ğŸ’¾ <b>Data Pipelines:</b> Processing and storing large datasets</div>
                <div>ğŸ”„ <b>Distributed Scraping:</b> Using multiple servers and proxies</div>
                <div>ğŸ“Š <b>Monitoring & Alerting:</b> Keeping scrapers running smoothly</div>
            </div>
        </div>
    </div>
    
    <div style="margin-top: 20px; padding: 15px; background: #f8f9fa; border-radius: 5px;">
        <p><b>ğŸ“ Pro Tip:</b> Start with Selenium for prototyping, then switch to faster tools for production.</p>
        <p><b>âš¡ Quick Win:</b> Use <code>webdriver-manager</code> to automatically handle browser drivers.</p>
        <p><b>âš ï¸ Warning:</b> Selenium is powerful but slow. Consider Playwright or Puppeteer for modern JavaScript sites.</p>
        <p><b>ğŸ’¡ Remember:</b> With great automation power comes great responsibility. Always scrape ethically!</p>
    </div>
</div>

<div style="text-align: center; margin: 30px 0; padding: 20px; background: linear-gradient(135deg, #4A90E2, #2E8B57); border-radius: 10px;">
    <h2 style="color: white; margin: 0;">ğŸ¤– Selenium Mastery Achieved! ğŸ¤–</h2>
    <p style="color: white; font-size: 18px; margin: 10px 0;">You can now automate any website interaction</p>
    <div style="font-size: 48px; margin: 20px 0;">ğŸ® ğŸ–±ï¸ âŒ¨ï¸</div>
    <p style="color: white;">Next: Scaling up with Scrapy and distributed systems!</p>
</div>
`
            },
            "7-27": {
                icon: "fa-globe",
                title: "Web Scraping with BeautifulSoup & Requests",
                html: `<h1>Month 7, Week 27: Web Scraping with BeautifulSoup & Requests</h1>
<p>Today we become <b>Digital Archaeologists</b>! We'll learn how to extract hidden treasures (data) from websites using Python's powerful web scraping tools.</p>

<div class="analogy-box">
    <b>Analogy: The Digital Treasure Hunter ğŸ—ºï¸</b><br/>
    
    Websites = Ancient ruins full of artifacts<br/>
    HTML = The layout/blueprint of the ruins<br/>
    BeautifulSoup = Your specialized excavation tools<br/>
    Requests = Your map and transportation<br/>
    Data = The precious artifacts you discover<br/>
    Robots.txt = The site's rules for explorers<br/>
    Rate Limiting = Taking breaks to be respectful
</div>

<h2>ğŸ› ï¸ Tools We'll Use Today</h2>
<div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin: 20px 0;">
    <div style="background: #4A90E2; color: white; padding: 15px; border-radius: 10px; text-align: center;">
        <h3>ğŸŒ Requests</h3>
        <p>Your web browser in code form</p>
        <code>pip install requests</code>
    </div>
    <div style="background: #50C878; color: white; padding: 15px; border-radius: 10px; text-align: center;">
        <h3>ğŸ² BeautifulSoup</h3>
        <p>HTML parser & data extractor</p>
        <code>pip install beautifulsoup4</code>
    </div>
    <div style="background: #FF6B35; color: white; padding: 15px; border-radius: 10px; text-align: center;">
        <h3>ğŸ” CSS Selectors</h3>
        <p>Targeting specific page elements</p>
        <code>.find_all("div", class_="item")</code>
    </div>
</div>

<h2>ğŸ“– The Web Scraping Manifesto</h2>
<div style="background-color: #fff3cd; padding: 20px; margin: 15px 0; border-radius: 10px; border-left: 5px solid #ffc107;">
    <h4>ğŸ›ï¸ The 5 Commandments of Ethical Web Scraping:</h4>
    <ol>
        <li><b>Respect robots.txt:</b> Check the site's rules first</li>
        <li><b>Be Gentle:</b> Don't overload servers (add delays)</li>
        <li><b>Identify Yourself:</b> Use a proper User-Agent header</li>
        <li><b>Check for APIs:</b> Use official APIs when available</li>
        <li><b>Cache Data:</b> Don't re-scrape unnecessarily</li>
    </ol>
</div>

<h2>ğŸ¯ Part 1: Understanding HTML Structure</h2>
<div style="background-color: #f0f8ff; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h3>ğŸ” HTML Anatomy - Like a Book</h3>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
        <div>
            <h4>ğŸ“š HTML Structure Analogy:</h4>
            <table style="width: 100%; border-collapse: collapse; margin: 10px 0;">
                <tr style="background: #4A90E2; color: white;">
                    <th style="padding: 10px;">HTML Element</th>
                    <th style="padding: 10px;">Book Analogy</th>
                </tr>
                <tr style="background: #f8f9fa;">
                    <td style="padding: 8px; border: 1px solid #ddd;">&lt;html&gt;</td>
                    <td style="padding: 8px; border: 1px solid #ddd;">The entire book</td>
                </tr>
                <tr style="background: white;">
                    <td style="padding: 8px; border: 1px solid #ddd;">&lt;head&gt;</td>
                    <td style="padding: 8px; border: 1px solid #ddd;">Table of contents</td>
                </tr>
                <tr style="background: #f8f9fa;">
                    <td style="padding: 8px; border: 1px solid #ddd;">&lt;body&gt;</td>
                    <td style="padding: 8px; border: 1px solid #ddd;">Actual story content</td>
                </tr>
                <tr style="background: white;">
                    <td style="padding: 8px; border: 1px solid #ddd;">&lt;h1&gt;, &lt;h2&gt;</td>
                    <td style="padding: 8px; border: 1px solid #ddd;">Chapter titles</td>
                </tr>
                <tr style="background: #f8f9fa;">
                    <td style="padding: 8px; border: 1px solid #ddd;">&lt;p&gt;</td>
                    <td style="padding: 8px; border: 1px solid #ddd;">Paragraphs</td>
                </tr>
                <tr style="background: white;">
                    <td style="padding: 8px; border: 1px solid #ddd;">&lt;img&gt;</td>
                    <td style="padding: 8px; border: 1px solid #ddd;">Illustrations</td>
                </tr>
                <tr style="background: #f8f9fa;">
                    <td style="padding: 8px; border: 1px solid #ddd;">&lt;a&gt;</td>
                    <td style="padding: 8px; border: 1px solid #ddd;">Footnotes/references</td>
                </tr>
            </table>
        </div>
        
        <div>
            <h4>ğŸ¨ HTML Visualization:</h4>
            <pre style="background: #2d3748; color: #e2e8f0; padding: 15px; border-radius: 5px;">
&lt;!DOCTYPE html&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;My Website&lt;/title&gt;   â† ğŸ“– Book Title
  &lt;/head&gt;
  &lt;body&gt;
    &lt;header&gt;                    â† ğŸ“ Book Cover
      &lt;h1&gt;Welcome!&lt;/h1&gt;        â† ğŸ·ï¸ Main Title
    &lt;/header&gt;
    
    &lt;div class="content"&gt;       â† ğŸ“„ Chapter
      &lt;h2&gt;About Me&lt;/h2&gt;        â† ğŸ“‘ Section Header
      &lt;p&gt;I love coding!&lt;/p&gt;   â† âœï¸ Paragraph Text
      
      &lt;img src="photo.jpg"&gt;    â† ğŸ–¼ï¸ Illustration
      
      &lt;a href="blog.html"&gt;     â† ğŸ”— Reference Link
        Read my blog
      &lt;/a&gt;
    &lt;/div&gt;
  &lt;/body&gt;
&lt;/html&gt;
            </pre>
        </div>
    </div>
</div>

<h2>ğŸš€ Part 2: Making Your First Web Request</h2>
<div style="background-color: #e8f5e8; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h3>ğŸ“¡ Fetching Web Pages - Like Ordering Pizza</h3>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
        <div>
            <h4>ğŸ• The Pizza Order Analogy:</h4>
            <ol>
                <li><b>Phone Call (Request):</b> You call the pizza place</li>
                <li><b>Order (URL):</b> "I want a large pepperoni"</li>
                <li><b>Preparation (Server):</b> Kitchen makes your pizza</li>
                <li><b>Delivery (Response):</b> Pizza arrives at your door</li>
                <li><b>Check Order (Status Code):</b> Is it correct?</li>
                <li><b>Enjoy (Parse):</b> Eat the pizza!</li>
            </ol>
        </div>
        
        <div>
            <h4>ğŸ’» Basic Request Code:</h4>
            <pre style="background: #36454f; color: #fff; padding: 15px; border-radius: 5px;">
import requests

# Step 1: Make the call (request)
print("ğŸ“ Calling the website...")
response = requests.get("https://example.com")

# Step 2: Check if successful
print("ğŸ“Š Status Code:", response.status_code)

# Status Code Cheat Sheet:
# 200: âœ… Success! Pizza delivered
# 404: âŒ Not found - Wrong address
# 403: ğŸš« Forbidden - No permission
# 500: ğŸ”¥ Server error - Kitchen on fire

if response.status_code == 200:
    print("ğŸ‰ Success! Got the webpage")
    print("ğŸ“„ First 500 characters:")
    print(response.text[:500])
else:
    print("ğŸ˜ Failed to get webpage")
            </pre>
        </div>
    </div>
</div>

<h2>ğŸ² Part 3: BeautifulSoup - The Data Chef</h2>
<div style="background-color: #fff0e6; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h3>ğŸ§‘â€ğŸ³ Cooking Up Some BeautifulSoup</h3>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
        <div>
            <h4>ğŸ² The Soup Kitchen Analogy:</h4>
            <ul>
                <li><b>HTML = Raw vegetables</b> (unstructured)</li>
                <li><b>BeautifulSoup = Blender</b> (processor)</li>
                <li><b>.find() = Finding carrots</b> (specific items)</li>
                <li><b>.find_all() = All potatoes</b> (all matches)</li>
                <li><b>.get_text() = Liquid soup</b> (just the text)</li>
                <li><b>['href'] = Recipe card</b> (attributes)</li>
            </ul>
            
            <div style="background: #ffeaa7; padding: 15px; border-radius: 5px; margin-top: 15px;">
                <h5>ğŸ¯ Finding Methods:</h5>
                <ul>
                    <li><code>.find()</code> - First matching ingredient</li>
                    <li><code>.find_all()</code> - All matching ingredients</li>
                    <li><code>.select()</code> - CSS selector shopping list</li>
                    <li><code>.parent</code> - The recipe this belongs to</li>
                    <li><code>.children</code> - All steps in this recipe</li>
                </ul>
            </div>
        </div>
        
        <div>
            <h4>ğŸ‘¨â€ğŸ³ Cooking Code Examples:</h4>
            <pre style="background: #2d3748; color: #e2e8f0; padding: 15px; border-radius: 5px;">
from bs4 import BeautifulSoup
import requests

# Get the webpage
url = "https://books.toscrape.com/"
response = requests.get(url)

# Make the soup!
soup = BeautifulSoup(response.text, 'html.parser')

# ğŸ¥• Find the first h1 tag
first_title = soup.find('h1')
print("ğŸ“š First H1:", first_title.get_text())

# ğŸ¥” Find ALL book titles
books = soup.find_all('h3')
print(f"ğŸ“– Found {len(books)} books!")

# ğŸ… Get specific attributes
first_link = soup.find('a')
print("ğŸ”— First link:", first_link['href'])

# ğŸ¥¬ Use CSS selectors
articles = soup.select('article.product_pod')
print(f"ğŸ›ï¸ Found {len(articles)} products")
            </pre>
        </div>
    </div>
</div>

<h2>ğŸ¨ Part 4: CSS Selectors - The Targeting System</h2>
<div style="background-color: #e6f7ff; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h3>ğŸ¯ Targeting Elements Like a Sniper</h3>
    
    <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 20px;">
        <div>
            <h4>ğŸ”« CSS Selector Arsenal:</h4>
            <table style="width: 100%; border-collapse: collapse; margin: 10px 0;">
                <tr style="background: #4A90E2; color: white;">
                    <th style="padding: 10px;">Selector</th>
                    <th style="padding: 10px;">What it Targets</th>
                    <th style="padding: 10px;">Example</th>
                    <th style="padding: 10px;">Hits</th>
                </tr>
                <tr style="background: #f8f9fa;">
                    <td style="padding: 8px; border: 1px solid #ddd;">tag</td>
                    <td style="padding: 8px; border: 1px solid #ddd;">All tags of type</td>
                    <td style="padding: 8px; border: 1px solid #ddd;"><code>'p'</code></td>
                    <td style="padding: 8px; border: 1px solid #ddd;">All paragraphs</td>
                </tr>
                <tr style="background: white;">
                    <td style="padding: 8px; border: 1px solid #ddd;">.class</td>
                    <td style="padding: 8px; border: 1px solid #ddd;">Elements with class</td>
                    <td style="padding: 8px; border: 1px solid #ddd;"><code>'.price'</code></td>
                    <td style="padding: 8px; border: 1px solid #ddd;">All price elements</td>
                </tr>
                <tr style="background: #f8f9fa;">
                    <td style="padding: 8px; border: 1px solid #ddd;">#id</td>
                    <td style="padding: 8px; border: 1px solid #ddd;">Element with ID</td>
                    <td style="padding: 8px; border: 1px solid #ddd;"><code>'#header'</code></td>
                    <td style="padding: 8px; border: 1px solid #ddd;">Header element</td>
                </tr>
                <tr style="background: white;">
                    <td style="padding: 8px; border: 1px solid #ddd;">tag.class</td>
                    <td style="padding: 8px; border: 1px solid #ddd;">Tag with class</td>
                    <td style="padding: 8px; border: 1px solid #ddd;"><code>'div.product'</code></td>
                    <td style="padding: 8px; border: 1px solid #ddd;">Product divs</td>
                </tr>
                <tr style="background: #f8f9fa;">
                    <td style="padding: 8px; border: 1px solid #ddd;">parent > child</td>
                    <td style="padding: 8px; border: 1px solid #ddd;">Direct children</td>
                    <td style="padding: 8px; border: 1px solid #ddd;"><code>'ul > li'</code></td>
                    <td style="padding: 8px; border: 1px solid #ddd;">List items</td>
                </tr>
                <tr style="background: white;">
                    <td style="padding: 8px; border: 1px solid #ddd;">tag[attr]</td>
                    <td style="padding: 8px; border: 1px solid #ddd;">Tag with attribute</td>
                    <td style="padding: 8px; border: 1px solid #ddd;"><code>'a[href]'</code></td>
                    <td style="padding: 8px; border: 1px solid #ddd;">All links</td>
                </tr>
            </table>
        </div>
        
        <div>
            <h4>ğŸ® Interactive Practice:</h4>
            <div style="background: #f8f9fa; padding: 15px; border-radius: 5px;">
                <p><b>Given this HTML:</b></p>
                <pre style="font-size: 12px;">
        &lt;div class="store"&gt;
        &lt;h1 id="title"&gt;Game Shop&lt;/h1&gt;
        &lt;div class="product"&gt;
            &lt;h3&gt;Minecraft&lt;/h3&gt;
            &lt;span class="price"&gt;$29.99&lt;/span&gt;
        &lt;/div&gt;
        &lt;div class="product on-sale"&gt;
            &lt;h3&gt;Roblox&lt;/h3&gt;
            &lt;span class="price"&gt;$0.00&lt;/span&gt;
        &lt;/div&gt;
        &lt;/div&gt;
                </pre>
                <p><b>Which selector gets:</b></p>
                <ul>
                    <li>All products? <code>______</code></li>
                    <li>Only sale items? <code>______</code></li>
                    <li>All prices? <code>______</code></li>
                </ul>
            </div>
        </div>
    </div>
</div>

<h2>ğŸ’¼ Part 5: Real-World Scraping Projects</h2>
<div style="background-color: #f5f5f5; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h3>ğŸŒ Practical Applications</h3>
    
    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin-top: 15px;">
        <div style="background: white; padding: 15px; border-radius: 5px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
            <h4>ğŸ›’ E-commerce Price Tracker</h4>
            <p><b>Goal:</b> Track product prices over time</p>
            <pre style="background: #f8f9fa; padding: 10px; font-size: 12px;">
def track_price(url):
    response = requests.get(url)
    soup = BeautifulSoup(response.text, 'html.parser')
    price = soup.find('span', class_='price')
    product = soup.find('h1', class_='product-title')
    return {
        'product': product.text,
        'price': price.text,
        'date': datetime.now()
    }
            </pre>
        </div>
        
        <div style="background: white; padding: 15px; border-radius: 5px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
            <h4>ğŸ“° News Aggregator</h4>
            <p><b>Goal:</b> Collect headlines from multiple sites</p>
            <pre style="background: #f8f9fa; padding: 10px; font-size: 12px;">
def get_headlines():
    sites = {
        'BBC': 'https://bbc.com/news',
        'CNN': 'https://cnn.com',
        'TechCrunch': 'https://techcrunch.com'
    }
    headlines = {}
    for site, url in sites.items():
        # Scrape each site
        # Store headlines in dictionary
    return headlines
            </pre>
        </div>
        
        <div style="background: white; padding: 15px; border-radius: 5px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
            <h4>ğŸ¬ Movie Database Builder</h4>
            <p><b>Goal:</b> Create your own IMDB</p>
            <pre style="background: #f8f9fa; padding: 10px; font-size: 12px;">
def scrape_movies():
    movies = []
    for page in range(1, 6):  # 5 pages
        url = f"https://movies.com/page/{page}"
        # Scrape title, rating, year
        # Add to movies list
    return movies
            </pre>
        </div>
    </div>
</div>

<h2>ğŸ›¡ï¸ Part 6: Ethical Scraping & Best Practices</h2>
<div style="background-color: #fff3cd; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h3>âš–ï¸ The Scraper's Code of Honor</h3>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
        <div>
            <h4>âœ… DO:</h4>
            <ul style="color: green;">
                <li>âœ”ï¸ Check robots.txt first</li>
                <li>âœ”ï¸ Add delays between requests</li>
                <li>âœ”ï¸ Use a proper User-Agent</li>
                <li>âœ”ï¸ Cache results locally</li>
                <li>âœ”ï¸ Respect rate limits</li>
                <li>âœ”ï¸ Scrape during off-peak hours</li>
                <li>âœ”ï¸ Use APIs when available</li>
            </ul>
        </div>
        
        <div>
            <h4>âŒ DON'T:</h4>
            <ul style="color: red;">
                <li>âŒ Overload servers (DDoS)</li>
                <li>âŒ Scrape private/personal data</li>
                <li>âŒ Ignore robots.txt</li>
                <li>âŒ Scrape too frequently</li>
                <li>âŒ Misrepresent yourself</li>
                <li>âŒ Use data illegally</li>
                <li>âŒ Sell scraped data without permission</li>
            </ul>
        </div>
    </div>
    
    <div style="background: #4A90E2; color: white; padding: 15px; border-radius: 5px; margin-top: 15px;">
        <h4>ğŸ‘® The Polite Scraper:</h4>
        <pre style="background: rgba(255,255,255,0.2); padding: 10px;">
import time
import requests
from bs4 import BeautifulSoup

def polite_scraper(url):
    # Identify ourselves
    headers = {
        'User-Agent': 'MyScraperBot/1.0 (educational project)'
    }
    
    # Make request
    response = requests.get(url, headers=headers)
    
    # Check robots.txt first (in real implementation)
    # robots_url = url + "/robots.txt"
    
    # Be gentle - wait between requests
    time.sleep(2)  # Wait 2 seconds
    
    # Parse and return
    soup = BeautifulSoup(response.text, 'html.parser')
    return soup
        </pre>
    </div>
</div>

<h2>ğŸ¯ Today's Hands-On Exercises (3 Hours)</h2>
<div style="background-color: #f0f8ff; padding: 20px; margin: 15px 0; border-radius: 10px;">
    
    <div style="background: #e8f5e8; padding: 15px; border-radius: 5px; margin-bottom: 15px;">
        <h3>ğŸ† Exercise 1: Book Store Scraper (60 minutes)</h3>
        <p><b>Target:</b> https://books.toscrape.com/ (Practice site)</p>
        
        <b>Tasks:</b>
        <ol>
            <li>Scrape all book titles from page 1</li>
            <li>Extract prices and ratings</li>
            <li>Save results to a CSV file</li>
            <li>Find the most expensive book</li>
            <li>Calculate average price</li>
        </ol>
        
        <div style="background: white; padding: 10px; border-radius: 3px; margin-top: 10px;">
            <b>ğŸ’¡ Starter Code:</b>
            <pre style="background: #f5f5f5; padding: 10px;">
import requests
from bs4 import BeautifulSoup
import csv

url = "https://books.toscrape.com/"
response = requests.get(url)
soup = BeautifulSoup(response.text, 'html.parser')

# Your code here!
            </pre>
        </div>
    </div>
    
    <div style="background: #ffeaa7; padding: 15px; border-radius: 5px; margin-bottom: 15px;">
        <h3>ğŸ† Exercise 2: Weather Data Collector (60 minutes)</h3>
        <p><b>Target:</b> Weather website or mock data</p>
        
        <b>Tasks:</b>
        <ol>
            <li>Scrape temperature for 5 cities</li>
            <li>Extract weather conditions (sunny, rainy, etc.)</li>
            <li>Create a weather dashboard</li>
            <li>Find hottest/coldest city</li>
            <li>Send email alert if rain predicted</li>
        </ol>
        
        <div style="background: white; padding: 10px; border-radius: 3px; margin-top: 10px;">
            <b>ğŸŒ¤ï¸ Mock Weather HTML:</b>
            <pre style="background: #f5f5f5; padding: 10px;">
&lt;div class="weather-card"&gt;
  &lt;h3 class="city"&gt;New York&lt;/h3&gt;
  &lt;span class="temp"&gt;72Â°F&lt;/span&gt;
  &lt;span class="condition"&gt;Sunny&lt;/span&gt;
&lt;/div&gt;
            </pre>
        </div>
    </div>
    
    <div style="background: #ffcccb; padding: 15px; border-radius: 5px;">
        <h3>ğŸ† Exercise 3: Game Price Tracker (60 minutes)</h3>
        <p><b>Create a system that tracks video game prices</b></p>
        
        <b>Features to Build:</b>
        <ul>
            <li>ğŸ“Š Scrape prices from multiple stores</li>
            <li>ğŸ“ˆ Track price history over time</li>
            <li>ğŸ”” Set price drop alerts</li>
            <li>ğŸ“ Save data to JSON/CSV</li>
            <li>ğŸ“Š Generate price comparison charts</li>
        </ul>
        
        <b>Advanced Challenges:</b>
        <ul>
            <li>ğŸ”„ Automate daily scraping</li>
            <li>ğŸ“§ Send email notifications</li>
            <li>ğŸ¤– Create Telegram/Discord bot</li>
            <li>ğŸŒ Deploy as web service</li>
        </ul>
    </div>
</div>

<h2>ğŸ  Homework Assignment</h2>
<div style="background-color: #fff0e6; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h3>ğŸ“Š Build a "Smart News Aggregator"</h3>
    
    <b>Requirements:</b>
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 15px 0;">
        <div>
            <h4>ğŸ¯ Core Features:</h4>
            <ul>
                <li>Scrape headlines from 3+ news sites</li>
                <li>Categorize news (sports, tech, politics)</li>
                <li>Remove duplicate stories</li>
                <li>Calculate "popularity" based on shares</li>
                <li>Generate daily digest email</li>
                <li>Create web dashboard</li>
            </ul>
        </div>
        
        <div>
            <h4>ğŸ—ï¸ Technical Requirements:</h4>
            <ul>
                <li>Use BeautifulSoup & Requests</li>
                <li>Implement error handling</li>
                <li>Add rate limiting</li>
                <li>Cache results for 1 hour</li>
                <li>Save to database</li>
                <li>Create REST API endpoints</li>
            </ul>
        </div>
    </div>
    
    <b>ğŸ¨ Deliverables:</b>
    <div style="background: #f8f9fa; padding: 15px; border-radius: 5px; margin: 10px 0;">
        <ol>
            <li><b>Working scraper</b> for at least 3 news sites</li>
            <li><b>Database schema</b> for storing articles</li>
            <li><b>Web interface</b> showing latest news</li>
            <li><b>Email template</b> for daily digest</li>
            <li><b>Documentation</b> explaining your code</li>
            <li><b>Ethics statement</b> about your scraping</li>
        </ol>
    </div>
</div>

<h2>ğŸ“š Key Learning Points</h2>
<div style="background-color: #e8f5e8; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px;">
        <div>
            <h3>âœ… What We Learned:</h3>
            <ul>
                <li>ğŸŒ How websites are structured (HTML/CSS)</li>
                <li>ğŸ“¡ Making HTTP requests with Python</li>
                <li>ğŸ² Parsing HTML with BeautifulSoup</li>
                <li>ğŸ¯ Targeting elements with CSS selectors</li>
                <li>âš–ï¸ Ethical scraping practices</li>
                <li>ğŸ›¡ï¸ Rate limiting and politeness</li>
                <li>ğŸ’¾ Saving scraped data to files</li>
                <li>ğŸ” Debugging scraping issues</li>
            </ul>
        </div>
        
        <div>
            <h3>ğŸš€ Next Level Skills:</h3>
            <ul>
                <li>ğŸ¤– Building scraping bots</li>
                <li>ğŸ“Š Data analysis on scraped content</li>
                <li>ğŸŒ Scraping JavaScript-heavy sites</li>
                <li>âš¡ Async scraping for speed</li>
                <li>ğŸ”§ Building scraping frameworks</li>
                <li>â˜ï¸ Deploying scrapers to cloud</li>
                <li>ğŸ“ˆ Monitoring scrapers</li>
                <li>ğŸ”„ Handling CAPTCHAs</li>
            </ul>
        </div>
    </div>
</div>

<h2>ğŸŒŸ Pro Tips & Tricks</h2>
<div style="background-color: #f5f5f5; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px;">
        <div style="background: white; padding: 15px; border-radius: 5px;">
            <h4>ğŸ”§ Debugging Tips:</h4>
            <ul>
                <li>Use <code>print(soup.prettify())</code> to see structure</li>
                <li>Check your selectors in browser DevTools first</li>
                <li>Handle missing elements with try/except</li>
                <li>Log all requests and responses</li>
                <li>Save raw HTML for debugging</li>
            </ul>
        </div>
        
        <div style="background: white; padding: 15px; border-radius: 5px;">
            <h4>âš¡ Performance Tips:</h4>
            <ul>
                <li>Cache responses to avoid re-scraping</li>
                <li>Use <code>lxml</code> parser for speed</li>
                <li>Implement concurrent requests</li>
                <li>Scrape only what you need</li>
                <li>Use sitemaps when available</li>
            </ul>
        </div>
        
        <div style="background: white; padding: 15px; border-radius: 5px;">
            <h4>ğŸ›¡ï¸ Stealth Tips:</h4>
            <ul>
                <li>Rotate User-Agents</li>
                <li>Use proxies for large-scale scraping</li>
                <li>Implement random delays</li>
                <li>Respect <code>robots.txt</code></li>
                <li>Scrape during off-peak hours</li>
            </ul>
        </div>
    </div>
</div>

<div style="background-color: #4A90E2; color: white; padding: 20px; margin: 20px 0; border-radius: 10px; text-align: center;">
    <h2>ğŸ‰ Congratulations, Digital Archaeologist!</h2>
    <p>You've unlocked the power to extract data from the web! Remember: with great power comes great responsibility.</p>
    <div style="display: flex; justify-content: center; gap: 20px; margin-top: 15px;">
        <span>ğŸ† Use it wisely</span>
        <span>ğŸ’¡ Build amazing things</span>
        <span>ğŸ¤ Respect website owners</span>
    </div>
</div>

<h3>ğŸ› ï¸ Quick Reference Cheat Sheet</h3>
<pre style="background: #2d3748; color: #e2e8f0; padding: 15px; border-radius: 5px; overflow-x: auto;">
# =========== WEB SCRAPING CHEAT SHEET ===========

# 1. Basic Setup
import requests
from bs4 import BeautifulSoup
import time

# 2. Make Request (with headers)
headers = {'User-Agent': 'MyBot/1.0'}
response = requests.get(url, headers=headers)

# 3. Create Soup
soup = BeautifulSoup(response.text, 'html.parser')

# 4. Finding Elements
# By tag
soup.find('h1')                    # First h1
soup.find_all('p')                 # All paragraphs

# By class
soup.find(class_='title')          # First element with class 'title'
soup.find_all(class_='price')      # All elements with class 'price'

# By CSS selector
soup.select('div.product')         # All divs with class product
soup.select('#header')             # Element with id header

# 5. Extracting Data
element.get_text()                  # Get text content
element['href']                     # Get attribute
element.get('src', 'default.jpg')  # Get with default

# 6. Navigation
element.parent                      # Parent element
element.children                    # Child elements
element.find_next_sibling()         # Next sibling

# 7. Being Polite
time.sleep(1)                       # Wait 1 second between requests

# 8. Save Data
import csv
with open('data.csv', 'w') as f:
    writer = csv.writer(f)
    writer.writerow(['Title', 'Price'])
</pre>
`
            },
            "7-28": {
                icon: "fa-robot",
                title: "Advanced Web Scraping: JavaScript & Dynamic Content",
                html: `<h1>Month 7, Week 28: Advanced Web Scraping - JavaScript & Dynamic Content</h1>
<p>Today we become <b>Web Detectives</b>! We'll learn how to scrape modern websites that use JavaScript to load content dynamically - like solving a mystery where the clues appear only when you know where to look!</p>

<div class="analogy-box">
    <b>Analogy: The Magic Book Store ğŸ“šâœ¨</b><br/>
    
    Traditional websites = Regular books (all pages visible)<br/>
    JavaScript websites = Magic books (pages appear when you wave a wand)<br/>
    Selenium = Your magic wand that reveals hidden pages<br/>
    Headless browsers = Invisible reading assistants<br/>
    AJAX calls = Secret passages to hidden content<br/>
    XPath = Treasure maps to specific paragraphs<br/>
    Waiting strategies = Patience spells for content to appear
</div>

<h2>ğŸ”„ The Challenge of Modern Websites</h2>
<div style="background-color: #f0f8ff; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h3>ğŸ§© Why JavaScript Sites Are Different</h3>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 15px 0;">
        <div style="background: #e8f5e8; padding: 15px; border-radius: 5px;">
            <h4>ğŸ“– Old School Websites (Static)</h4>
            <ul>
                <li>âœ… All content in HTML source</li>
                <li>âœ… Works with BeautifulSoup</li>
                <li>âœ… Fast to load</li>
                <li>âœ… Easy to scrape</li>
                <li>âŒ Limited interactivity</li>
                <li>âŒ Page reloads needed</li>
            </ul>
            <pre style="background: white; padding: 10px; border-radius: 3px; margin-top: 10px;">
        # Static HTML - Everything is visible

        &lt;div class="product"&gt;
        &lt;h3&gt;Product Name&lt;/h3&gt;
        &lt;p class="price"&gt;$29.99&lt;/p&gt;
        &lt;button&gt;Add to Cart&lt;/button&gt;
        &lt;/div&gt;
            </pre>
        </div>
        
        <div style="background: #ffeaa7; padding: 15px; border-radius: 5px;">
            <h4>ğŸ¨ Modern Websites (Dynamic)</h4>
            <ul>
                <li>âœ… Rich, interactive experiences</li>
                <li>âœ… Content loads dynamically</li>
                <li>âœ… No page reloads needed</li>
                <li>âŒ Content hidden in JavaScript</li>
                <li>âŒ Requires browser to execute JS</li>
                <li>âŒ Harder to scrape</li>
            </ul>
            <pre style="background: white; padding: 10px; border-radius: 3px; margin-top: 10px;">
# Dynamic HTML - Content loads later
        &lt;div id="product-container"&gt;
        &lt;!-- Empty at first --&gt;
        &lt;!-- JavaScript fills this later --&gt;
        &lt;/div&gt;

&lt;script&gt;
  fetch('/api/products')
    .then(response => response.json())
    .then(data => {
      // JavaScript adds content here
      document.getElementById('product-container').innerHTML = 
        '<h3>' + data.name + '</h3>' +
        '<p class="price">' + data.price + '</p>';
    });
&lt;/script&gt;
            </pre>
        </div>
    </div>
    
    <div style="background: #4A90E2; color: white; padding: 15px; border-radius: 5px; margin-top: 15px;">
        <h4>ğŸ” The Detective's Observation:</h4>
        <p>When BeautifulSoup sees empty <code>&lt;div&gt;</code> tags but your browser shows content, you're dealing with JavaScript-rendered content! Time to bring out the big guns...</p>
    </div>
</div>

<h2>ğŸ§™â€â™‚ï¸ Part 1: Selenium - The Browser Automator</h2>
<div style="background-color: #e8f5e8; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h3>ğŸ¤– Meet Your Robotic Browser</h3>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
        <div>
            <h4>ğŸ­ Selenium vs BeautifulSoup:</h4>
            <table style="width: 100%; border-collapse: collapse; margin: 10px 0;">
                <tr style="background: #4A90E2; color: white;">
                    <th style="padding: 10px;">Tool</th>
                    <th style="padding: 10px;">Best For</th>
                    <th style="padding: 10px;">Speed</th>
                    <th style="padding: 10px;">Complexity</th>
                </tr>
                <tr style="background: #f8f9fa;">
                    <td style="padding: 8px; border: 1px solid #ddd;">BeautifulSoup</td>
                    <td style="padding: 8px; border: 1px solid #ddd;">Static HTML</td>
                    <td style="padding: 8px; border: 1px solid #ddd;">ğŸš€ Fast</td>
                    <td style="padding: 8px; border: 1px solid #ddd;">â­ Easy</td>
                </tr>
                <tr style="background: white;">
                    <td style="padding: 8px; border: 1px solid #ddd;">Selenium</td>
                    <td style="padding: 8px; border: 1px solid #ddd;">JavaScript sites</td>
                    <td style="padding: 8px; border: 1px solid #ddd;">ğŸ¢ Slower</td>
                    <td style="padding: 8px; border: 1px solid #ddd;">â­â­â­ Harder</td>
                </tr>
            </table>
            
            <div style="background: #fff3cd; padding: 15px; border-radius: 5px; margin-top: 15px;">
                <h5>ğŸ“¦ Installation Magic:</h5>
                <pre style="background: white; padding: 10px; border-radius: 3px;">
# Install Selenium
pip install selenium

# Download WebDriver (choose one)
# Chrome: https://chromedriver.chromium.org/
# Firefox: https://github.com/mozilla/geckodriver

# Save driver to your PATH or project folder
                </pre>
            </div>
        </div>
        
        <div>
            <h4>ğŸ¬ Your First Selenium Script:</h4>
            <pre style="background: #2d3748; color: #e2e8f0; padding: 15px; border-radius: 5px;">
from selenium import webdriver
from selenium.webdriver.common.by import By
import time

# ğŸ© Start the magic - launch browser
driver = webdriver.Chrome()  # or Firefox()

# ğŸŒ Visit a website
driver.get("https://example.com")
print("ğŸ“„ Page title:", driver.title)

# ğŸ” Find elements (like BeautifulSoup but interactive)
search_box = driver.find_element(By.NAME, "q")
search_box.send_keys("web scraping")

# ğŸ–±ï¸ Click buttons
search_button = driver.find_element(By.NAME, "btnK")
search_button.click()

# â±ï¸ Wait for results
time.sleep(3)

# ğŸ“¸ Take screenshot (like taking a photo)
driver.save_screenshot("results.png")

# ğŸ¬ Watch it happen (remove for speed)
input("Press Enter to close browser...")

# ğŸšª Clean up
driver.quit()
            </pre>
        </div>
    </div>
</div>

<h2>ğŸ¯ Part 2: XPath - The Treasure Map Language</h2>
<div style="background-color: #fff0e6; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h3>ğŸ—ºï¸ Navigating with XPath Coordinates</h3>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
        <div>
            <h4>ğŸ§­ XPath vs CSS Selectors:</h4>
            
            <div style="background: #f8f9fa; padding: 15px; border-radius: 5px;">
                <h5>Sample HTML:</h5>
                <pre style="background: white; padding: 10px; border-radius: 3px;">
&lt;div class="store"&gt;
  &lt;ul id="products"&gt;
    &lt;li class="product"&gt;
      &lt;h3&gt;Laptop&lt;/h3&gt;
      &lt;span class="price"&gt;$999&lt;/span&gt;
    &lt;/li&gt;
    &lt;li class="product sale"&gt;
      &lt;h3&gt;Mouse&lt;/h3&gt;
      &lt;span class="price"&gt;$49&lt;/span&gt;
    &lt;/li&gt;
  &lt;/ul&gt;
&lt;/div&gt;
                </pre>
            </div>
            
            <table style="width: 100%; border-collapse: collapse; margin: 10px 0;">
                <tr style="background: #4A90E2; color: white;">
                    <th style="padding: 10px;">Goal</th>
                    <th style="padding: 10px;">CSS Selector</th>
                    <th style="padding: 10px;">XPath</th>
                </tr>
                <tr style="background: #f8f9fa;">
                    <td style="padding: 8px; border: 1px solid #ddd;">All products</td>
                    <td style="padding: 8px; border: 1px solid #ddd;"><code>.product</code></td>
                    <td style="padding: 8px; border: 1px solid #ddd;"><code>//li[@class='product']</code></td>
                </tr>
                <tr style="background: white;">
                    <td style="padding: 8px; border: 1px solid #ddd;">Sale items only</td>
                    <td style="padding: 8px; border: 1px solid #ddd;"><code>.product.sale</code></td>
                    <td style="padding: 8px; border: 1px solid #ddd;"><code>//li[contains(@class, 'sale')]</code></td>
                </tr>
                <tr style="background: #f8f9fa;">
                    <td style="padding: 8px; border: 1px solid #ddd;">Second product</td>
                    <td style="padding: 8px; border: 1px solid #ddd;"><code>.product:nth-child(2)</code></td>
                    <td style="padding: 8px; border: 1px solid #ddd;"><code>//li[2]</code></td>
                </tr>
                <tr style="background: white;">
                    <td style="padding: 8px; border: 1px solid #ddd;">Price over $50</td>
                    <td style="padding: 8px; border: 1px solid #ddd;">âŒ Can't do</td>
                    <td style="padding: 8px; border: 1px solid #ddd;"><code>//span[number(substring-after(., '$')) > 50]</code></td>
                </tr>
            </table>
        </div>
        
        <div>
            <h4>ğŸ”¤ XPath Cheat Sheet:</h4>
            
            <div style="background: #e6f7ff; padding: 15px; border-radius: 5px;">
                <h5>ğŸ“ Basic Navigation:</h5>
                <ul>
                    <li><code>//tag</code> - Anywhere in document</li>
                    <li><code>/tag</code> - Direct child</li>
                    <li><code>.</code> - Current element</li>
                    <li><code>..</code> - Parent element</li>
                    <li><code>@attribute</code> - Attribute value</li>
                </ul>
            </div>
            
            <div style="background: #f0f8ff; padding: 15px; border-radius: 5px; margin-top: 10px;">
                <h5>ğŸ¯ Advanced Targeting:</h5>
                <ul>
                    <li><code>//tag[@id='value']</code> - By ID</li>
                    <li><code>//tag[contains(@class, 'value')]</code> - Partial class match</li>
                    <li><code>//tag[text()='exact text']</code> - Exact text match</li>
                    <li><code>//tag[contains(text(), 'partial')]</code> - Partial text</li>
                    <li><code>//tag[position()=1]</code> - First match</li>
                    <li><code>//tag[last()]</code> - Last match</code></li>
                </ul>
            </div>
            
            <div style="background: #fff3cd; padding: 15px; border-radius: 5px; margin-top: 10px;">
                <h5>ğŸ” Finding in Browser:</h5>
                <p>Press <kbd>F12</kbd> â†’ Elements tab â†’ <kbd>Ctrl+F</kbd> â†’ Type XPath</p>
                <p>Test your XPath expressions directly in browser!</p>
            </div>
        </div>
    </div>
</div>

<h2>â³ Part 3: Waiting Strategies - The Patience Game</h2>
<div style="background-color: #f5f5f5; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h3>â° Timing is Everything in Web Scraping</h3>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
        <div>
            <h4>ğŸ® The Waiting Game Analogy:</h4>
            <ul>
                <li><b>time.sleep(5)</b> = Setting a kitchen timer</li>
                <li><b>Implicit Wait</b> = Patient friend who waits with you</li>
                <li><b>Explicit Wait</b> = Asking "Is it ready yet?" until yes</li>
                <li><b>Expected Conditions</b> = Checking specific signs of readiness</li>
            </ul>
            
            <div style="background: #e8f5e8; padding: 15px; border-radius: 5px; margin-top: 15px;">
                <h5>â±ï¸ The 3 Waiting Strategies:</h5>
                <ol>
                    <li><b>Fixed Wait:</b> <code>time.sleep(seconds)</code></li>
                    <li><b>Implicit Wait:</b> Driver waits up to X seconds for ANY element</li>
                    <li><b>Explicit Wait:</b> Wait for SPECIFIC condition to be true</li>
                </ol>
            </div>
        </div>
        
        <div>
            <h4>ğŸ’» Code Examples:</h4>
            <pre style="background: #36454f; color: #fff; padding: 15px; border-radius: 5px;">
from selenium import webdriver
from selenium.webdriver.common.by import By
from selenium.webdriver.support.ui import WebDriverWait
from selenium.webdriver.support import expected_conditions as EC
import time

driver = webdriver.Chrome()

# Method 1: Fixed wait (simplest but inefficient)
driver.get("https://slow-website.com")
time.sleep(10)  # Wait 10 seconds no matter what
element = driver.find_element(By.ID, "content")

# Method 2: Implicit wait (set once, works globally)
driver.implicitly_wait(10)  # Wait up to 10 seconds
driver.get("https://slow-website.com")
element = driver.find_element(By.ID, "content")  # Automatically waits

# Method 3: Explicit wait (most precise)
driver.get("https://slow-website.com")
try:
    # Wait UP TO 10 seconds for element to appear
    element = WebDriverWait(driver, 10).until(
        EC.presence_of_element_located((By.ID, "content"))
    )
    print("âœ… Element found!")
except:
    print("âŒ Element not found within 10 seconds")

# ğŸ¯ Expected Conditions Examples:
# EC.element_to_be_clickable((By.ID, "button"))
# EC.text_to_be_present_in_element((By.CLASS_NAME, "status"), "Done")
# EC.invisibility_of_element((By.ID, "loading"))
# EC.visibility_of_element_located((By.ID, "results"))
            </pre>
        </div>
    </div>
</div>

<h2>ğŸ‘» Part 4: Headless Browsers - The Invisible Scraper</h2>
<div style="background-color: #e6f7ff; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h3>ğŸ­ Scraping Without Showing the Browser</h3>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
        <div>
            <h4>ğŸ¤” Regular vs Headless:</h4>
            <table style="width: 100%; border-collapse: collapse; margin: 10px 0;">
                <tr style="background: #4A90E2; color: white;">
                    <th style="padding: 10px;">Aspect</th>
                    <th style="padding: 10px;">Regular Browser</th>
                    <th style="padding: 10px;">Headless Browser</th>
                </tr>
                <tr style="background: #f8f9fa;">
                    <td style="padding: 8px; border: 1px solid #ddd;">Visibility</td>
                    <td style="padding: 8px; border: 1px solid #ddd;">ğŸ‘€ You see it</td>
                    <td style="padding: 8px; border: 1px solid #ddd;">ğŸ‘» Runs in background</td>
                </tr>
                <tr style="background: white;">
                    <td style="padding: 8px; border: 1px solid #ddd;">Speed</td>
                    <td style="padding: 8px; border: 1px solid #ddd;">ğŸ¢ Slower (GUI loads)</td>
                    <td style="padding: 8px; border: 1px solid #ddd;">ğŸš€ Faster (no GUI)</td>
                </tr>
                <tr style="background: #f8f9fa;">
                    <td style="padding: 8px; border: 1px solid #ddd;">Memory</td>
                    <td style="padding: 8px; border: 1px solid #ddd;">ğŸ“ˆ More (GUI needs RAM)</td>
                    <td style="padding: 8px; border: 1px solid #ddd;">ğŸ“‰ Less</td>
                </tr>
                <tr style="background: white;">
                    <td style="padding: 8px; border: 1px solid #ddd;">Use Case</td>
                    <td style="padding: 8px; border: 1px solid #ddd;">Debugging/Testing</td>
                    <td style="padding: 8px; border: 1px solid #ddd;">Production scraping</td>
                </tr>
            </table>
            
            <div style="background: #fff3cd; padding: 15px; border-radius: 5px; margin-top: 15px;">
                <h5>ğŸ­ When to Use Headless:</h5>
                <ul>
                    <li>âœ… Running on a server (no screen)</li>
                    <li>âœ… Scraping many pages quickly</li>
                    <li>âœ… Saving system resources</li>
                    <li>âŒ Debugging complex interactions</li>
                    <li>âŒ Need to visually verify actions</li>
                </ul>
            </div>
        </div>
        
        <div>
            <h4>ğŸ‘» Headless Configuration:</h4>
            <pre style="background: #2d3748; color: #e2e8f0; padding: 15px; border-radius: 5px;">
from selenium import webdriver
from selenium.webdriver.chrome.options import Options

# ğŸ© Set up headless mode
chrome_options = Options()
chrome_options.add_argument("--headless")  # Run without GUI
chrome_options.add_argument("--no-sandbox")
chrome_options.add_argument("--disable-dev-shm-usage")
chrome_options.add_argument("--window-size=1920,1080")

# ğŸš€ Additional optimizations
chrome_options.add_argument("--disable-gpu")  # Disable GPU (headless doesn't need it)
chrome_options.add_argument("--disable-extensions")  # No extensions needed
chrome_options.add_argument("--disable-images")  # Faster loading (optional)
chrome_options.add_argument("user-agent=Mozilla/5.0...")  # Set custom user agent

# ğŸ Start the headless browser
driver = webdriver.Chrome(options=chrome_options)

# ğŸŒ Use it just like regular browser
driver.get("https://example.com")
print("Page title (headless):", driver.title)

# ğŸ“¸ You can still take screenshots!
driver.save_screenshot("headless_screenshot.png")

# ğŸ§¹ Clean up
driver.quit()
            </pre>
        </div>
    </div>
</div>

<h2>ğŸ•µï¸â€â™‚ï¸ Part 5: API Reverse Engineering - The Smart Detective</h2>
<div style="background-color: #fff0e6; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h3>ğŸ” Finding the Hidden Data Source</h3>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
        <div>
            <h4>ğŸ¯ Why Reverse Engineer APIs?</h4>
            <ul>
                <li>âš¡ Much faster than Selenium</li>
                <li>ğŸ¯ Get clean, structured data (JSON/XML)</li>
                <li>ğŸ“¦ Less bandwidth usage</li>
                <li>ğŸ”’ Often more reliable</li>
                <li>ğŸ“Š Easier to parse</li>
            </ul>
            
            <div style="background: #e8f5e8; padding: 15px; border-radius: 5px; margin-top: 15px;">
                <h5>ğŸ”§ Browser DevTools Guide:</h5>
                <ol>
                    <li>Press <kbd>F12</kbd> to open DevTools</li>
                    <li>Go to <b>Network</b> tab</li>
                    <li>Refresh page or interact with site</li>
                    <li>Look for <b>XHR</b> or <b>Fetch</b> requests</li>
                    <li>Check <b>Response</b> tab for JSON data</li>
                    <li>Copy request as cURL for Python code</li>
                </ol>
            </div>
        </div>
        
        <div>
            <h4>ğŸ’» API Discovery Code:</h4>
            <pre style="background: #36454f; color: #fff; padding: 15px; border-radius: 5px;">
import requests
import json

# Found this API from Network tab in DevTools
api_url = "https://api.example.com/products"
api_params = {
    "page": 1,
    "limit": 50,
    "sort": "price",
    "order": "asc"
}

# Mimic browser headers
headers = {
    "User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36",
    "Accept": "application/json",
    "Referer": "https://example.com/products",
    "X-Requested-With": "XMLHttpRequest"
}

# Make API request
response = requests.get(api_url, params=api_params, headers=headers)

if response.status_code == 200:
    data = response.json()
    
    # ğŸ‰ Now we have clean JSON data!
    print(f"Found {len(data['products'])} products")
    
    for product in data['products']:
        print(f"{product['name']}: \${product['price']}")
        
    # Save to file
    with open('products.json', 'w') as f:
        json.dump(data, f, indent=2)
else:
    print(f"API request failed: {response.status_code}")
            </pre>
        </div>
    </div>
    
    <div style="background: #4A90E2; color: white; padding: 15px; border-radius: 5px; margin-top: 15px;">
        <h4>ğŸ” Finding Hidden APIs - Real Example:</h4>
        <pre style="background: rgba(255,255,255,0.2); padding: 10px;">
# Step 1: Open DevTools â†’ Network tab
# Step 2: Filter by "Fetch/XHR"
# Step 3: Scroll or click "Load More"
# Step 4: Look for requests like:
#   - /api/products
#   - /graphql
#   - /data.json
#   - search?q=...
# Step 5: Right-click â†’ Copy â†’ Copy as cURL
# Step 6: Use https://curlconverter.com/ to convert to Python
        </pre>
    </div>
</div>

<h2>ğŸ¯ Today's Hands-On Exercises (3 Hours)</h2>
<div style="background-color: #f0f8ff; padding: 20px; margin: 15px 0; border-radius: 10px;">
    
    <div style="background: #e8f5e8; padding: 15px; border-radius: 5px; margin-bottom: 15px;">
        <h3>ğŸ† Exercise 1: Infinite Scroll Scraper (60 minutes)</h3>
        <p><b>Target:</b> Any site with "Load More" or infinite scroll</p>
        
        <b>Tasks:</b>
        <ol>
            <li>Automate scrolling to load all content</li>
            <li>Extract data as it loads</li>
            <li>Detect when no more content loads</li>
            <li>Save all items to CSV</li>
            <li>Implement proper waiting strategies</li>
        </ol>
        
        <div style="background: white; padding: 10px; border-radius: 3px; margin-top: 10px;">
            <b>ğŸ’¡ Starter Code:</b>
            <pre style="background: #f5f5f5; padding: 10px;">
from selenium import webdriver
from selenium.webdriver.common.by import By
from selenium.webdriver.common.keys import Keys
import time

def scrape_infinite_scroll(url):
    driver = webdriver.Chrome()
    driver.get(url)
    
    last_height = driver.execute_script("return document.body.scrollHeight")
    
    while True:
        # Scroll down
        driver.execute_script("window.scrollTo(0, document.body.scrollHeight);")
        time.sleep(2)  # Wait for content to load
        
        # Calculate new scroll height
        new_height = driver.execute_script("return document.body.scrollHeight")
        if new_height == last_height:
            break  # No more content
        last_height = new_height
    
    # Now extract all loaded content
    items = driver.find_elements(By.CLASS_NAME, "item")
    print(f"Found {len(items)} items")
    
    driver.quit()
            </pre>
        </div>
    </div>
    
    <div style="background: #ffeaa7; padding: 15px; border-radius: 5px; margin-bottom: 15px;">
        <h3>ğŸ† Exercise 2: Login & Session Scraper (60 minutes)</h3>
        <p><b>Target:</b> A site requiring login (use test sites)</p>
        
        <b>Tasks:</b>
        <ol>
            <li>Automate login process</li>
            <li>Handle login forms and CSRF tokens</li>
            <li>Maintain session/cookies</li>
            <li>Scrape protected content</li>
            <li>Handle login failures gracefully</li>
        </ol>
        
        <div style="background: white; padding: 10px; border-radius: 3px; margin-top: 10px;">
            <b>ğŸ” Login Strategies:</b>
            <pre style="background: #f5f5f5; padding: 10px;">
# Method 1: Direct form submission
username_input = driver.find_element(By.ID, "username")
password_input = driver.find_element(By.ID, "password")
login_button = driver.find_element(By.ID, "login-btn")

username_input.send_keys("test_user")
password_input.send_keys("test_pass")
login_button.click()

# Method 2: Using requests session (if no JavaScript)
import requests

session = requests.Session()
login_data = {
    "username": "test",
    "password": "test",
    "csrf_token": "extracted_token"
}
session.post("https://site.com/login", data=login_data)

# Now use session for authenticated requests
response = session.get("https://site.com/protected")
            </pre>
        </div>
    </div>
    
    <div style="background: #ffcccb; padding: 15px; border-radius: 5px;">
        <h3>ğŸ† Exercise 3: E-commerce Dynamic Price Tracker (60 minutes)</h3>
        <p><b>Create an advanced price tracker for JavaScript-heavy e-commerce sites</b></p>
        
        <b>Features to Build:</b>
        <ul>
            <li>ğŸš€ Handle product pages with AJAX-loaded prices</li>
            <li>ğŸ”„ Monitor price changes over time</li>
            <li>ğŸ”” Set up alerts for price drops</li>
            <li>ğŸ“Š Compare prices across variants (sizes/colors)</li>
            <li>ğŸ¤– Handle "Add to Cart" interactions if needed</li>
        </ul>
        
        <b>Advanced Challenges:</b>
        <ul>
            <li>ğŸ›¡ï¸ Handle CAPTCHAs (using services or manual)</li>
            <li>ğŸŒ Rotate proxies to avoid blocking</li>
            <li>ğŸ“± Mobile view scraping (change user agent)</li>
            <li>âš¡ Implement concurrent scraping</li>
            <li>ğŸ’¾ Cache product data to minimize requests</li>
        </ul>
    </div>
</div>

<h2>ğŸ›¡ï¸ Part 6: Anti-Scraping Measures & Solutions</h2>
<div style="background-color: #f5f5f5; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h3>ğŸ›¡ï¸ Common Defenses & ğŸ› ï¸ How to Bypass (Ethically!)</h3>
    
    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin-top: 15px;">
        <div style="background: white; padding: 15px; border-radius: 5px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
            <h4>ğŸ›¡ï¸ CAPTCHAs</h4>
            <p><b>What:</b> "Prove you're human" tests</p>
            <p><b>Solutions:</b></p>
            <ul>
                <li>Use CAPTCHA solving services (2captcha, Anti-Captcha)</li>
                <li>Slow down requests to avoid triggering</li>
                <li>Use residential proxies</li>
                <li>Implement manual solving for critical paths</li>
            </ul>
        </div>
        
        <div style="background: white; padding: 15px; border-radius: 5px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
            <h4>ğŸ›¡ï¸ IP Blocking</h4>
            <p><b>What:</b> Blocking your IP after too many requests</p>
            <p><b>Solutions:</b></p>
            <ul>
                <li>Use proxy rotation</li>
                <li>Implement delays between requests</li>
                <li>Use multiple IP addresses</li>
                <li>Scrape during off-peak hours</li>
            </ul>
        </div>
        
        <div style="background: white; padding: 15px; border-radius: 5px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
            <h4>ğŸ›¡ï¸ User-Agent Detection</h4>
            <p><b>What:</b> Blocking known scraper User-Agents</p>
            <p><b>Solutions:</b></p>
            <ul>
                <li>Rotate User-Agents</li>
                <li>Use realistic browser fingerprints</li>
                <li>Mimic real browser behavior</li>
                <li>Use headless browser with full features</li>
            </ul>
        </div>
        
        <div style="background: white; padding: 15px; border-radius: 5px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
            <h4>ğŸ›¡ï¸ JavaScript Challenges</h4>
            <p><b>What:</b> Requiring JavaScript execution to access content</p>
            <p><b>Solutions:</b></p>
            <ul>
                <li>Use Selenium/Playwright</li>
                <li>Reverse engineer JavaScript API calls</li>
                <li>Use requests-html library</li>
                <li>Execute JavaScript in requests</li>
            </ul>
        </div>
    </div>
    
    <div style="background: #fff3cd; padding: 15px; border-radius: 5px; margin-top: 15px;">
        <h4>âš–ï¸ Ethical Bypassing Guidelines:</h4>
        <ul>
            <li>âœ… Only bypass for public, non-sensitive data</li>
            <li>âœ… Respect robots.txt and Terms of Service</li>
            <li>âœ… Use minimum force necessary</li>
            <li>âœ… Consider contacting site for API access</li>
            <li>âŒ Never bypass authentication/authorization</li>
            <li>âŒ Don't overload servers</li>
            <li>âŒ Don't scrape personal/private data</li>
        </ul>
    </div>
</div>

<h2>ğŸ  Homework Assignment</h2>
<div style="background-color: #fff0e6; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h3>ğŸ•¸ï¸ Build a "Universal Website Scraper"</h3>
    
    <b>ğŸ¯ Project Goal:</b>
    <p>Create a scraper that can handle ANY type of website: static, dynamic, infinite scroll, login-protected, etc.</p>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 15px 0;">
        <div>
            <h4>ğŸ—ï¸ Architecture:</h4>
            <ul>
                <li><b>Detection Layer:</b> Auto-detect website type</li>
                <li><b>Strategy Pattern:</b> Use appropriate scraping method</li>
                <li><b>Fallback System:</b> Try multiple approaches</li>
                <li><b>Configuration:</b> YAML/JSON config for sites</li>
                <li><b>Plugins:</b> Extensible for new site types</li>
            </ul>
        </div>
        
        <div>
            <h4>ğŸ”§ Technical Features:</h4>
            <ul>
                <li>Auto-switch between BeautifulSoup and Selenium</li>
                <li>Handle JavaScript rendering when needed</li>
                <li>Manage sessions and cookies</li>
                <li>Rotate proxies and User-Agents</li>
                <li>Implement exponential backoff for failures</li>
            </ul>
        </div>
    </div>
    
    <b>ğŸ“‹ Requirements:</b>
    <div style="background: #f8f9fa; padding: 15px; border-radius: 5px; margin: 10px 0;">
        <ol>
            <li><b>Website Classifier:</b> Detect if site uses JavaScript heavily</li>
            <li><b>Scraping Strategies:</b> Implement at least 3 different approaches</li>
            <li><b>Configuration System:</b> JSON configs for common sites</li>
            <li><b>Error Handling:</b> Graceful degradation when blocked</li>
            <li><b>Output Formats:</b> CSV, JSON, SQLite database</li>
            <li><b>Monitoring:</b> Logging and performance metrics</li>
        </ol>
    </div>
    
    <b>ğŸ¨ Example Config:</b>
    <pre style="background: #2d3748; color: #e2e8f0; padding: 15px; border-radius: 5px; margin: 10px 0;">
{
  "amazon.com": {
    "type": "dynamic",
    "strategy": "selenium",
    "selectors": {
      "products": "div[data-component-type='s-search-result']",
      "title": "span.a-text-normal",
      "price": "span.a-price-whole"
    },
    "wait_time": 5,
    "requires_javascript": true,
    "anti_bot": true
  },
  "wikipedia.org": {
    "type": "static",
    "strategy": "beautifulsoup",
    "selectors": {
      "content": "#mw-content-text",
      "headings": "h2, h3"
    },
    "wait_time": 1,
    "requires_javascript": false,
    "anti_bot": false
  }
}
    </pre>
</div>

<h2>ğŸ“š Key Learning Points</h2>
<div style="background-color: #e8f5e8; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px;">
        <div>
            <h3>âœ… Advanced Techniques Learned:</h3>
            <ul>
                <li>ğŸ¤– Using Selenium for JavaScript sites</li>
                <li>ğŸ—ºï¸ XPath for precise element targeting</li>
                <li>â³ Smart waiting strategies</li>
                <li>ğŸ‘» Headless browser configuration</li>
                <li>ğŸ” API reverse engineering</li>
                <li>ğŸ›¡ï¸ Handling anti-scraping measures</li>
                <li>ğŸ” Managing sessions and logins</li>
                <li>ğŸ”„ Infinite scroll automation</li>
            </ul>
        </div>
        
        <div>
            <h3>ğŸš€ Professional Skills Gained:</h3>
            <ul>
                <li>ğŸ¯ Choosing the right tool for each job</li>
                <li>âš¡ Optimizing scraping performance</li>
                <li>ğŸ›¡ï¸ Building resilient scrapers</li>
                <li>ğŸ“Š Data extraction strategies</li>
                <li>ğŸ”§ Debugging complex scraping issues</li>
                <li>âš–ï¸ Ethical scraping practices</li>
                <li>ğŸ“ˆ Scaling scraping operations</li>
                <li>ğŸ”Œ Integrating with other systems</li>
            </ul>
        </div>
    </div>
</div>

<h2>ğŸŒŸ Pro Tips for Advanced Scraping</h2>
<div style="background-color: #f5f5f5; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px;">
        <div style="background: white; padding: 15px; border-radius: 5px;">
            <h4>âš¡ Performance Optimization:</h4>
            <ul>
                <li>Use <code>requests</code> for static content</li>
                <li>Only use Selenium when necessary</li>
                <li>Cache responses to avoid re-scraping</li>
                <li>Implement concurrent scraping</li>
                <li>Use CDN URLs when available</li>
            </ul>
        </div>
        
        <div style="background: white; padding: 15px; border-radius: 5px;">
            <h4>ğŸ›¡ï¸ Stealth Techniques:</h4>
            <ul>
                <li>Randomize delays between requests</li>
                <li>Use residential proxies for sensitive sites</li>
                <li>Mimic human behavior patterns</li>
                <li>Handle cookies properly</li>
                <li>Use realistic browser fingerprints</li>
            </ul>
        </div>
        
        <div style="background: white; padding: 15px; border-radius: 5px;">
            <h4>ğŸ”§ Maintenance Tips:</h4>
            <ul>
                <li>Monitor selector changes</li>
                <li>Implement health checks</li>
                <li>Version control your scrapers</li>
                <li>Document site structures</li>
                <li>Set up alerting for failures</li>
            </ul>
        </div>
    </div>
    
    <div style="background: #4A90E2; color: white; padding: 15px; border-radius: 5px; margin-top: 15px; text-align: center;">
        <h4>ğŸ”„ The Scraping Workflow:</h4>
        <p>1. Try BeautifulSoup â†’ 2. Check for hidden APIs â†’ 3. Use Selenium if needed â†’ 4. Implement fallbacks</p>
        <p><b>Always start with the simplest solution that works!</b></p>
    </div>
</div>

<div style="background-color: #4A90E2; color: white; padding: 20px; margin: 20px 0; border-radius: 10px; text-align: center;">
    <h2>ğŸ‰ Congratulations, Web Detective!</h2>
    <p>You've mastered both static and dynamic web scraping! You can now extract data from virtually any website on the internet.</p>
    <div style="display: flex; justify-content: center; gap: 20px; margin-top: 15px;">
        <span>ğŸ” See the invisible</span>
        <span>ğŸ¤– Automate the complex</span>
        <span>ğŸ’¡ Solve the impossible</span>
    </div>
</div>

<h3>ğŸ› ï¸ Advanced Scraping Toolkit</h3>
<pre style="background: #2d3748; color: #e2e8f0; padding: 15px; border-radius: 5px; overflow-x: auto;">
# =========== ADVANCED WEB SCRAPING TOOLKIT ===========

# 1. Selenium Setup with Options
from selenium import webdriver
from selenium.webdriver.chrome.options import Options

options = Options()
options.add_argument("--headless")
options.add_argument("--no-sandbox")
options.add_argument("--disable-dev-shm-usage")
options.add_argument("--window-size=1920,1080")
options.add_argument("user-agent=Mozilla/5.0...")

driver = webdriver.Chrome(options=options)

# 2. Smart Waiting
from selenium.webdriver.support.ui import WebDriverWait
from selenium.webdriver.support import expected_conditions as EC
from selenium.webdriver.common.by import By

wait = WebDriverWait(driver, 10)
element = wait.until(EC.presence_of_element_located((By.ID, "content")))

# 3. Execute JavaScript
driver.execute_script("window.scrollTo(0, document.body.scrollHeight);")
result = driver.execute_script("return document.title;")

# 4. Take Screenshots
driver.save_screenshot("page.png")
element.screenshot("element.png")

# 5. Handle Alerts
alert = driver.switch_to.alert
alert.accept()  # or alert.dismiss()

# 6. Switch Between Windows/Tabs
driver.switch_to.window(driver.window_handles[1])

# 7. Use Proxies
from selenium.webdriver.common.proxy import Proxy, ProxyType

proxy = Proxy()
proxy.proxy_type = ProxyType.MANUAL
proxy.http_proxy = "ip:port"
proxy.ssl_proxy = "ip:port"

capabilities = webdriver.DesiredCapabilities.CHROME
proxy.add_to_capabilities(capabilities)

driver = webdriver.Chrome(desired_capabilities=capabilities)

# 8. Page Performance Metrics
metrics = driver.execute_script("""
    return {
        timing: performance.timing,
        navigation: performance.navigation,
        memory: performance.memory
    }
""")
</pre>
`
            },

            "8-29": {
                icon: "fa-plug",
                title: "APIs: The Universal Connectors",
                html: `<h1>Month 8, Week 29: APIs - The Universal Connectors</h1>
<p>Today we become <b>Digital Diplomats</b>! We'll learn how to make different apps and services talk to each other using APIs - the universal language of the internet!</p>

<div class="analogy-box">
    <b>Analogy: The Restaurant Order System ğŸ½ï¸ğŸ“±</b><br/>
    
    API = Restaurant's order system<br/>
    Endpoints = Different menu sections (appetizers, main course)<br/>
    Requests = You telling waiter what you want<br/>
    Responses = Kitchen preparing and serving food<br/>
    Methods = Types of orders (GET=look at menu, POST=place order)<br/>
    Status Codes = Kitchen status (200=food ready, 404=item not found)<br/>
    Authentication = Showing your membership card
</div>

<h2>ğŸŒ What is an API?</h2>
<div style="background-color: #f0f8ff; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h3>ğŸ”Œ API = Application Programming Interface</h3>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 15px 0;">
        <div>
            <h4>ğŸ“š Simple Definition:</h4>
            <div style="background: #e8f5e8; padding: 15px; border-radius: 5px;">
                <p>An API is a <b>set of rules</b> that allows different software applications to <b>communicate</b> with each other.</p>
                <p>It's like a <b>universal translator</b> between apps!</p>
            </div>
            
            <div style="background: #fff3cd; padding: 15px; border-radius: 5px; margin-top: 15px;">
                <h5>ğŸ­ Real-World API Examples:</h5>
                <ul>
                    <li>ğŸ“± Weather app getting data from weather service</li>
                    <li>ğŸ—ºï¸ Google Maps showing in Uber app</li>
                    <li>ğŸ’³ Payment processing in online stores</li>
                    <li>âœ‰ï¸ Login with Google/Facebook on websites</li>
                    <li>ğŸ“Š Stock trading apps getting live prices</li>
                </ul>
            </div>
        </div>
        
        <div>
            <h4>ğŸ¨ Visual Explanation:</h4>
            <div style="background: white; padding: 15px; border-radius: 5px; text-align: center;">
                <div style="display: inline-block; background: #4A90E2; color: white; padding: 10px 20px; border-radius: 5px; margin: 5px;">
                    Your App
                </div>
                <div style="display: inline-block; margin: 0 10px;">â†’</div>
                <div style="display: inline-block; background: #50C878; color: white; padding: 10px 20px; border-radius: 5px; margin: 5px;">
                    ğŸ“¡ API Request
                </div>
                <div style="display: inline-block; margin: 0 10px;">â†’</div>
                <div style="display: inline-block; background: #FF6B35; color: white; padding: 10px 20px; border-radius: 5px; margin: 5px;">
                    Server
                </div>
                <div style="margin: 10px 0;">â†“</div>
                <div style="display: inline-block; background: #FF6B35; color: white; padding: 10px 20px; border-radius: 5px; margin: 5px;">
                    Server
                </div>
                <div style="display: inline-block; margin: 0 10px;">â†’</div>
                <div style="display: inline-block; background: #50C878; color: white; padding: 10px 20px; border-radius: 5px; margin: 5px;">
                    ğŸ“¡ API Response
                </div>
                <div style="display: inline-block; margin: 0 10px;">â†’</div>
                <div style="display: inline-block; background: #4A90E2; color: white; padding: 10px 20px; border-radius: 5px; margin: 5px;">
                    Your App
                </div>
            </div>
            
            <div style="background: #f8f9fa; padding: 15px; border-radius: 5px; margin-top: 15px;">
                <h5>ğŸ”‘ Key API Benefits:</h5>
                <ul>
                    <li>âœ… Don't need to build everything yourself</li>
                    <li>âœ… Access to expert-created services</li>
                    <li>âœ… Always up-to-date data</li>
                    <li>âœ… Scalable and reliable</li>
                    <li>âœ… Standardized communication</li>
                </ul>
            </div>
        </div>
    </div>
</div>

<h2>ğŸ“¡ API Types & Flavors</h2>
<div style="background-color: #e8f5e8; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h3>ğŸ¦ Different APIs for Different Needs</h3>
    
    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin: 15px 0;">
        <div style="background: white; padding: 15px; border-radius: 5px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
            <h4>ğŸŒ REST APIs</h4>
            <p><b>The Most Popular Type</b></p>
            <ul>
                <li>âœ… Uses HTTP protocol</li>
                <li>âœ… Returns JSON/XML data</li>
                <li>âœ… Stateless (each request independent)</li>
                <li>âœ… Uses standard HTTP methods</li>
                <li>âœ… Easy to understand and use</li>
            </ul>
            <div style="background: #f0f8ff; padding: 10px; border-radius: 3px; margin-top: 10px;">
                <small><b>Examples:</b> Twitter, GitHub, Stripe</small>
            </div>
        </div>
        
        <div style="background: white; padding: 15px; border-radius: 5px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
            <h4>âš¡ GraphQL APIs</h4>
            <p><b>The Flexible Query Language</b></p>
            <ul>
                <li>âœ… Ask for exactly what you need</li>
                <li>âœ… Single endpoint for everything</li>
                <li>âœ… Strongly typed schema</li>
                <li>âœ… Real-time updates possible</li>
                <li>âœ… Less over-fetching of data</li>
            </ul>
            <div style="background: #f0f8ff; padding: 10px; border-radius: 3px; margin-top: 10px;">
                <small><b>Examples:</b> GitHub, Shopify, Facebook</small>
            </div>
        </div>
        
        <div style="background: white; padding: 15px; border-radius: 5px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
            <h4>ğŸ”Œ SOAP APIs</h4>
            <p><b>The Enterprise Solution</b></p>
            <ul>
                <li>âœ… Very structured and formal</li>
                <li>âœ… Built-in error handling</li>
                <li>âœ… High security features</li>
                <li>âœ… Uses XML format</li>
                <li>âœ… Older but still used</li>
            </ul>
            <div style="background: #f0f8ff; padding: 10px; border-radius: 3px; margin-top: 10px;">
                <small><b>Examples:</b> Banking systems, Government</small>
            </div>
        </div>
    </div>
    
    <div style="background: #fff3cd; padding: 15px; border-radius: 5px; margin-top: 15px;">
        <h4>ğŸ¯ REST API Focus:</h4>
        <p>We'll focus on <b>REST APIs</b> because they're the most common, easiest to learn, and used by most popular services you'll want to interact with!</p>
    </div>
</div>

<h2>ğŸ”¤ Part 1: HTTP Methods - The API Vocabulary</h2>
<div style="background-color: #fff0e6; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h3>ğŸ’¬ The 5 Basic API "Sentences"</h3>
    
    <table style="width: 100%; border-collapse: collapse; margin: 15px 0;">
        <tr style="background: #4A90E2; color: white;">
            <th style="padding: 12px; text-align: left;">Method</th>
            <th style="padding: 12px; text-align: left;">CRUD</th>
            <th style="padding: 12px; text-align: left;">What It Does</th>
            <th style="padding: 12px; text-align: left;">Restaurant Analogy</th>
            <th style="padding: 12px; text-align: left;">Example</th>
        </tr>
        <tr style="background: #f8f9fa;">
            <td style="padding: 10px; border: 1px solid #ddd;"><code>GET</code></td>
            <td style="padding: 10px; border: 1px solid #ddd;">Read</td>
            <td style="padding: 10px; border: 1px solid #ddd;">Retrieve data</td>
            <td style="padding: 10px; border: 1px solid #ddd;">Looking at the menu</td>
            <td style="padding: 10px; border: 1px solid #ddd;"><code>/api/users</code> â†’ Get all users</td>
        </tr>
        <tr style="background: white;">
            <td style="padding: 10px; border: 1px solid #ddd;"><code>POST</code></td>
            <td style="padding: 10px; border: 1px solid #ddd;">Create</td>
            <td style="padding: 10px; border: 1px solid #ddd;">Send new data</td>
            <td style="padding: 10px; border: 1px solid #ddd;">Placing an order</td>
            <td style="padding: 10px; border: 1px solid #ddd;"><code>/api/users</code> â†’ Create user</td>
        </tr>
        <tr style="background: #f8f9fa;">
            <td style="padding: 10px; border: 1px solid #ddd;"><code>PUT</code></td>
            <td style="padding: 10px; border: 1px solid #ddd;">Update</td>
            <td style="padding: 10px; border: 1px solid #ddd;">Replace entire item</td>
            <td style="padding: 10px; border: 1px solid #ddd;">Changing entire order</td>
            <td style="padding: 10px; border: 1px solid #ddd;"><code>/api/users/1</code> â†’ Update user 1</td>
        </tr>
        <tr style="background: white;">
            <td style="padding: 10px; border: 1px solid #ddd;"><code>PATCH</code></td>
            <td style="padding: 10px; border: 1px solid #ddd;">Update</td>
            <td style="padding: 10px; border: 1px solid #ddd;">Update part of item</td>
            <td style="padding: 10px; border: 1px solid #ddd;">"Add extra cheese"</td>
            <td style="padding: 10px; border: 1px solid #ddd;"><code>/api/users/1</code> â†’ Update user email only</td>
        </tr>
        <tr style="background: #f8f9fa;">
            <td style="padding: 10px; border: 1px solid #ddd;"><code>DELETE</code></td>
            <td style="padding: 10px; border: 1px solid #ddd;">Delete</td>
            <td style="padding: 10px; border: 1px solid #ddd;">Remove data</td>
            <td style="padding: 10px; border: 1px solid #ddd;">Canceling order</td>
            <td style="padding: 10px; border: 1px solid #ddd;"><code>/api/users/1</code> â†’ Delete user 1</td>
        </tr>
    </table>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px;">
        <div>
            <h4>ğŸ® Interactive Example:</h4>
            <div style="background: #f8f9fa; padding: 15px; border-radius: 5px;">
                <p><b>Imagine a To-Do List API:</b></p>
                <pre style="background: white; padding: 10px; border-radius: 3px;">
GET    /api/todos        â†’ See all tasks
POST   /api/todos        â†’ Add new task
GET    /api/todos/3      â†’ See task #3
PUT    /api/todos/3      â†’ Update entire task #3
PATCH  /api/todos/3      â†’ Mark task #3 as done
DELETE /api/todos/3      â†’ Delete task #3
                </pre>
            </div>
        </div>
        
        <div>
            <h4>ğŸ”‘ CRUD Operations:</h4>
            <div style="background: #e6f7ff; padding: 15px; border-radius: 5px;">
                <p><b>C</b>reate â†’ <code>POST</code></p>
                <p><b>R</b>ead â†’ <code>GET</code></p>
                <p><b>U</b>pdate â†’ <code>PUT/PATCH</code></p>
                <p><b>D</b>elete â†’ <code>DELETE</code></p>
                <p style="margin-top: 10px;"><small>Remember: These four operations cover 95% of what you'll do with APIs!</small></p>
            </div>
        </div>
    </div>
</div>

<h2>ğŸ“Š Part 2: Status Codes - The Server's Response</h2>
<div style="background-color: #f5f5f5; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h3>ğŸ­ What the Server is "Saying" Back</h3>
    
    <div style="display: grid; grid-template-columns: repeat(5, 1fr); gap: 10px; margin: 15px 0;">
        <div style="background: #50C878; color: white; padding: 10px; border-radius: 5px; text-align: center;">
            <h4>2xx</h4>
            <p>âœ… Success</p>
            <small>"Everything worked!"</small>
        </div>
        <div style="background: #FFD700; color: black; padding: 10px; border-radius: 5px; text-align: center;">
            <h4>3xx</h4>
            <p>ğŸ”„ Redirect</p>
            <small>"Go look over there"</small>
        </div>
        <div style="background: #FF6B35; color: white; padding: 10px; border-radius: 5px; text-align: center;">
            <h4>4xx</h4>
            <p>âŒ Client Error</p>
            <small>"You made a mistake"</small>
        </div>
        <div style="background: #DC143C; color: white; padding: 10px; border-radius: 5px; text-align: center;">
            <h4>5xx</h4>
            <p>ğŸ”¥ Server Error</p>
            <small>"My bad, I messed up"</small>
        </div>
        <div style="background: #9370DB; color: white; padding: 10px; border-radius: 5px; text-align: center;">
            <h4>1xx</h4>
            <p>â„¹ï¸ Info</p>
            <small>"Hold on, working..."</small>
        </div>
    </div>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 15px;">
        <div>
            <h4>ğŸ¯ Must-Know Status Codes:</h4>
            <table style="width: 100%; border-collapse: collapse;">
                <tr style="background: #50C878; color: white;">
                    <th style="padding: 8px;">Code</th>
                    <th style="padding: 8px;">Name</th>
                    <th style="padding: 8px;">Meaning</th>
                </tr>
                <tr style="background: #f8f9fa;">
                    <td style="padding: 8px; border: 1px solid #ddd;">200</td>
                    <td style="padding: 8px; border: 1px solid #ddd;">OK</td>
                    <td style="padding: 8px; border: 1px solid #ddd;">âœ… Success!</td>
                </tr>
                <tr style="background: white;">
                    <td style="padding: 8px; border: 1px solid #ddd;">201</td>
                    <td style="padding: 8px; border: 1px solid #ddd;">Created</td>
                    <td style="padding: 8px; border: 1px solid #ddd;">âœ… New item created</td>
                </tr>
                <tr style="background: #f8f9fa;">
                    <td style="padding: 8px; border: 1px solid #ddd;">400</td>
                    <td style="padding: 8px; border: 1px solid #ddd;">Bad Request</td>
                    <td style="padding: 8px; border: 1px solid #ddd;">âŒ You sent garbage</td>
                </tr>
                <tr style="background: white;">
                    <td style="padding: 8px; border: 1px solid #ddd;">401</td>
                    <td style="padding: 8px; border: 1px solid #ddd;">Unauthorized</td>
                    <td style="padding: 8px; border: 1px solid #ddd;">âŒ Who are you?</td>
                </tr>
                <tr style="background: #f8f9fa;">
                    <td style="padding: 8px; border: 1px solid #ddd;">403</td>
                    <td style="padding: 8px; border: 1px solid #ddd;">Forbidden</td>
                    <td style="padding: 8px; border: 1px solid #ddd;">âŒ I know you, but NO</td>
                </tr>
                <tr style="background: white;">
                    <td style="padding: 8px; border: 1px solid #ddd;">404</td>
                    <td style="padding: 8px; border: 1px solid #ddd;">Not Found</td>
                    <td style="padding: 8px; border: 1px solid #ddd;">âŒ That doesn't exist</td>
                </tr>
                <tr style="background: #f8f9fa;">
                    <td style="padding: 8px; border: 1px solid #ddd;">500</td>
                    <td style="padding: 8px; border: 1px solid #ddd;">Server Error</td>
                    <td style="padding: 8px; border: 1px solid #ddd;">ğŸ”¥ I messed up</td>
                </tr>
            </table>
        </div>
        
        <div>
            <h4>ğŸ’» Status Code Handling:</h4>
            <pre style="background: #36454f; color: #fff; padding: 15px; border-radius: 5px;">
import requests

response = requests.get("https://api.example.com/data")

# Check status code
if response.status_code == 200:
    print("âœ… Success! Data received.")
    data = response.json()
elif response.status_code == 404:
    print("âŒ Error: Not found (404)")
elif response.status_code == 401:
    print("âŒ Error: Unauthorized (401)")
    print("Did you include your API key?")
elif response.status_code == 500:
    print("ğŸ”¥ Error: Server error (500)")
    print("The API server is having problems")
else:
    print(f"Got status code: {response.status_code}")
    print("Response:", response.text[:200])  # First 200 chars

# Or use the shortcut
if response.ok:  # Checks if status_code < 400
    print("Request was successful!")
else:
    print("Request failed!")
            </pre>
        </div>
    </div>
</div>

<h2>ğŸ” Part 3: Authentication - The API Key</h2>
<div style="background-color: #e6f7ff; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h3>ğŸ—ï¸ Proving You're Allowed to Use the API</h3>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
        <div>
            <h4>ğŸ« Why Authentication?</h4>
            <ul>
                <li>ğŸ”’ Control who can use the API</li>
                <li>ğŸ“Š Track usage (who's using how much)</li>
                <li>ğŸ’° Charge for usage (premium features)</li>
                <li>ğŸ›¡ï¸ Prevent abuse and attacks</li>
                <li>ğŸ‘¤ Personalize responses</li>
            </ul>
            
            <div style="background: #fff3cd; padding: 15px; border-radius: 5px; margin-top: 15px;">
                <h5>ğŸ”‘ Common Authentication Methods:</h5>
                <ol>
                    <li><b>API Keys:</b> Simple secret code</li>
                    <li><b>Basic Auth:</b> Username + password</li>
                    <li><b>Bearer Tokens:</b> Like API keys but with expiration</li>
                    <li><b>OAuth:</b> "Login with Google/Facebook"</li>
                    <li><b>JWT:</b> Secure tokens with claims</li>
                </ol>
            </div>
        </div>
        
        <div>
            <h4>ğŸ”‘ API Key Examples:</h4>
            <pre style="background: #2d3748; color: #e2e8f0; padding: 15px; border-radius: 5px;">
# Method 1: Query Parameter (easiest)
import requests

api_key = "your_secret_key_here"
url = f"https://api.weather.com/forecast?key={api_key}&city=London"

response = requests.get(url)

# Method 2: Headers (more secure)
headers = {
    "Authorization": f"Bearer {api_key}",
    "X-API-Key": api_key  # Another common header name
}

response = requests.get(
    "https://api.weather.com/forecast",
    headers=headers,
    params={"city": "London"}
)

# Method 3: Basic Auth (username/password)
from requests.auth import HTTPBasicAuth

response = requests.get(
    "https://api.example.com/data",
    auth=HTTPBasicAuth("username", "password")
)

# Method 4: Session for multiple requests
session = requests.Session()
session.headers.update({"Authorization": f"Bearer {api_key}"})

# Now all requests from this session have the auth header
response1 = session.get("https://api.example.com/users")
response2 = session.get("https://api.example.com/products")
            </pre>
        </div>
    </div>
    
    <div style="background: #4A90E2; color: white; padding: 15px; border-radius: 5px; margin-top: 15px;">
        <h4>âš ï¸ API Key Security Tips:</h4>
        <ul>
            <li>ğŸ”’ Never commit API keys to GitHub!</li>
            <li>ğŸ“ Store keys in environment variables</li>
            <li>ğŸ”„ Rotate keys regularly</li>
            <li>ğŸ‘€ Monitor key usage</li>
            <li>ğŸš« Revoke compromised keys immediately</li>
        </ul>
    </div>
</div>

<h2>ğŸ Part 4: Your First API Call with Python</h2>
<div style="background-color: #f0f8ff; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h3>ğŸš€ Let's Make Some API Magic!</h3>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
        <div>
            <h4>ğŸ¯ Practice APIs (No Key Required):</h4>
            <ul>
                <li>ğŸŒ¤ï¸ <b>Weather:</b> OpenWeatherMap (free tier)</li>
                <li>ğŸ• <b>Animals:</b> Dog/Cat API (free, fun!)</li>
                <li>ğŸ’° <b>Currency:</b> ExchangeRate-API (free tier)</li>
                <li>ğŸš€ <b>Space:</b> NASA API (free, awesome!)</li>
                <li>ğŸ˜„ <b>Jokes:</b> JokeAPI (free)</li>
                <li>ğŸ–¼ï¸ <b>Images:</b> Unsplash (free tier)</li>
            </ul>
            
            <div style="background: #e8f5e8; padding: 15px; border-radius: 5px; margin-top: 15px;">
                <h5>ğŸ“ Getting API Keys:</h5>
                <ol>
                    <li>Go to API provider's website</li>
                    <li>Sign up for free account</li>
                    <li>Find "API Keys" or "Developer" section</li>
                    <li>Generate new API key</li>
                    <li>Copy and save it safely!</li>
                </ol>
            </div>
        </div>
        
        <div>
            <h4>ğŸ’» Simple Weather API Example:</h4>
            <pre style="background: #36454f; color: #fff; padding: 15px; border-radius: 5px;">
import requests
import json

# Free weather API (sign up for your own key!)
# Or use this public one for learning
def get_weather(city="London"):
    # Using OpenWeatherMap API structure
    api_key = "your_api_key_here"  # Get from https://openweathermap.org/api
    url = f"https://api.openweathermap.org/data/2.5/weather"
    
    params = {
        "q": city,
        "appid": api_key,
        "units": "metric"  # Celsius
    }
    
    try:
        response = requests.get(url, params=params)
        
        if response.status_code == 200:
            data = response.json()
            
            # Extract useful info
            weather_info = {
                "city": data["name"],
                "temperature": data["main"]["temp"],
                "feels_like": data["main"]["feels_like"],
                "humidity": data["main"]["humidity"],
                "weather": data["weather"][0]["description"],
                "wind_speed": data["wind"]["speed"]
            }
            
            return weather_info
        else:
            print(f"Error: {response.status_code}")
            print(response.text)
            return None
            
    except Exception as e:
        print(f"Error making API call: {e}")
        return None

# Test it!
weather = get_weather("Tokyo")
if weather:
    print(f"Weather in {weather['city']}:")
    print(f"Temperature: {weather['temperature']}Â°C")
    print(f"Feels like: {weather['feels_like']}Â°C")
    print(f"Conditions: {weather['weather']}")
            </pre>
        </div>
    </div>
</div>

<h2>ğŸ¯ Today's Hands-On Exercises (3 Hours)</h2>
<div style="background-color: #f0f8ff; padding: 20px; margin: 15px 0; border-radius: 10px;">
    
    <div style="background: #e8f5e8; padding: 15px; border-radius: 5px; margin-bottom: 15px;">
        <h3>ğŸ† Exercise 1: Public APIs Exploration (60 minutes)</h3>
        <p><b>Explore 5 different public APIs without needing keys!</b></p>
        
        <b>APIs to Try:</b>
        <ol>
            <li><b>JSONPlaceholder:</b> Fake REST API for testing</li>
            <li><b>Dog API:</b> Random dog pictures</li>
            <li><b>JokeAPI:</b> Get random jokes</li>
            <li><b>PokeAPI:</b> PokÃ©mon data</li>
            <li><b>Agify.io:</b> Predict age from name</li>
        </ol>
        
        <div style="background: white; padding: 10px; border-radius: 3px; margin-top: 10px;">
            <b>ğŸ’¡ Starter Code:</b>
            <pre style="background: #f5f5f5; padding: 10px;">
import requests

# 1. JSONPlaceholder - Fake blog posts
response = requests.get("https://jsonplaceholder.typicode.com/posts")
posts = response.json()
print(f"Got {len(posts)} posts")
print("First post title:", posts[0]['title'])

# 2. Dog API - Random dog image
response = requests.get("https://dog.ceo/api/breeds/image/random")
dog_data = response.json()
print("Dog image URL:", dog_data['message'])

# 3. Your turn! Try the others...
            </pre>
        </div>
    </div>
    
    <div style="background: #ffeaa7; padding: 15px; border-radius: 5px; margin-bottom: 15px;">
        <h3>ğŸ† Exercise 2: Build a Weather Dashboard (60 minutes)</h3>
        <p><b>Create a console-based weather app</b></p>
        
        <b>Features:</b>
        <ol>
            <li>Get weather for any city</li>
            <li>Display temperature, humidity, conditions</li>
            <li>Convert between Celsius/Fahrenheit</li>
            <li>Save favorite cities</li>
            <li>Compare weather between cities</li>
            <li>Add weather alerts (rain, extreme temps)</li>
        </ol>
        
        <div style="background: white; padding: 10px; border-radius: 3px; margin-top: 10px;">
            <b>ğŸŒ¤ï¸ API Options:</b>
            <ul>
                <li><b>OpenWeatherMap:</b> Free tier (1000 calls/day)</li>
                <li><b>WeatherAPI:</b> Free tier (1M calls/month!)</li>
                <li><b>Visual Crossing:</b> Free tier (1000 calls/day)</li>
            </ul>
            <p><small>Sign up for free API keys at their websites</small></p>
        </div>
    </div>
    
    <div style="background: #ffcccb; padding: 15px; border-radius: 5px;">
        <h3>ğŸ† Exercise 3: Currency Converter (60 minutes)</h3>
        <p><b>Build a real-time currency converter</b></p>
        
        <b>Requirements:</b>
        <ul>
            <li>ğŸ’± Convert between any two currencies</li>
            <li>ğŸ“ˆ Show exchange rate history (last 30 days)</li>
            <li>ğŸ“Š Calculate conversion fees</li>
            <li>ğŸ’¾ Save conversion history</li>
            <li>ğŸ“± Create simple text-based interface</li>
            <li>ğŸ”” Set rate alerts (notify when rate hits target)</li>
        </ul>
        
        <b>Free Currency APIs:</b>
        <ul>
            <li><b>ExchangeRate-API:</b> 1500 free requests/month</li>
            <li><b>Frankfurter:</b> Free, no API key needed!</li>
            <li><b>CurrencyAPI:</b> 100 free requests/month</li>
        </ul>
        
        <div style="background: white; padding: 10px; border-radius: 3px; margin-top: 10px;">
            <b>ğŸ’¡ Example with Frankfurter API:</b>
            <pre style="background: #f5f5f5; padding: 10px;">
import requests

# Get latest EUR to USD rate
response = requests.get("https://api.frankfurter.app/latest?from=EUR&to=USD")
data = response.json()
rate = data['rates']['USD']
print(f"1 EUR = {rate} USD")

# Convert amount
amount_eur = 100
amount_usd = amount_eur * rate
print(f"{amount_eur} EUR = {amount_usd:.2f} USD")
            </pre>
        </div>
    </div>
</div>

<h2>ğŸ” Part 5: Reading API Documentation</h2>
<div style="background-color: #fff0e6; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h3>ğŸ“š How to Read API Docs Like a Pro</h3>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
        <div>
            <h4>ğŸ” What to Look For in API Docs:</h4>
            <ul>
                <li>ğŸ“ <b>Base URL:</b> Where to send requests</li>
                <li>ğŸ”‘ <b>Authentication:</b> How to get/use API key</li>
                <li>ğŸ“‹ <b>Endpoints:</b> Available URLs and their purposes</li>
                <li>ğŸ“„ <b>Parameters:</b> What data to send (query/path/body)</li>
                <li>ğŸ“¤ <b>Request Format:</b> JSON/XML/form data</li>
                <li>ğŸ“¥ <b>Response Format:</b> What data you get back</li>
                <li>âš¡ <b>Rate Limits:</b> How many requests per minute/day</li>
                <li>ğŸ’° <b>Pricing:</b> Free tier limits, paid plans</li>
            </ul>
            
            <div style="background: #e6f7ff; padding: 15px; border-radius: 5px; margin-top: 15px;">
                <h5>ğŸ¯ Documentation Checklist:</h5>
                <ol>
                    <li>Find "Getting Started" or "Quick Start"</li>
                    <li>Look for code examples</li>
                    <li>Check "Try It" interactive consoles</li>
                    <li>Review error messages and status codes</li>
                    <li>Read the changelog/version info</li>
                </ol>
            </div>
        </div>
        
        <div>
            <h4>ğŸ“„ Example API Documentation:</h4>
            <div style="background: #f8f9fa; padding: 15px; border-radius: 5px;">
                <h5>ğŸŒ¤ï¸ Weather API Docs Example:</h5>
                <pre style="background: white; padding: 10px; border-radius: 3px;">
# Endpoint: Get Current Weather
GET /weather

# Parameters:
# - q (required): City name
# - appid (required): Your API key
# - units: metric/imperial (optional)

# Example Request:
GET https://api.openweathermap.org/data/2.5/weather
    ?q=London
    &appid=YOUR_API_KEY
    &units=metric

# Example Response (200 OK):
{
  "coord": {"lon": -0.13, "lat": 51.51},
  "weather": [{
    "id": 300,
    "main": "Drizzle",
    "description": "light intensity drizzle"
  }],
  "main": {
    "temp": 280.32,
    "feels_like": 278.21,
    "humidity": 81
  },
  "name": "London"
}

# Error Responses:
# 401: Invalid API key
# 404: City not found
# 429: Too many requests
                </pre>
            </div>
        </div>
    </div>
</div>

<h2>ğŸ  Homework Assignment</h2>
<div style="background-color: #fff0e6; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h3>ğŸŒ Build a "Personal API Dashboard"</h3>
    
    <b>ğŸ¯ Project Goal:</b>
    <p>Create a personal dashboard that pulls data from 3+ different APIs and displays useful information.</p>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 15px 0;">
        <div>
            <h4>ğŸ“Š Dashboard Sections:</h4>
            <ul>
                <li><b>Weather Widget:</b> Current weather + forecast</li>
                <li><b>News Feed:</b> Latest headlines from news API</li>
                <li><b>Crypto Tracker:</b> Bitcoin/Ethereum prices</li>
                <li><b>Todo List:</b> Integrated with todo API</li>
                <li><b>Quote of the Day:</b> Motivational quotes</li>
                <li><b>Calendar:</b> Upcoming events/reminders</li>
            </ul>
        </div>
        
        <div>
            <h4>ğŸ”§ Technical Requirements:</h4>
            <ul>
                <li>Use at least 3 different public APIs</li>
                <li>Implement proper error handling</li>
                <li>Cache API responses (don't call too often)</li>
                <li>Create clean console/text interface</li>
                <li>Add configuration file for API keys</li>
                <li>Implement auto-refresh every 5 minutes</li>
            </ul>
        </div>
    </div>
    
    <b>ğŸ“‹ API Suggestions (All Have Free Tiers):</b>
    <div style="background: #f8f9fa; padding: 15px; border-radius: 5px; margin: 10px 0;">
        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px;">
            <div>
                <h5>ğŸŒ¤ï¸ Weather:</h5>
                <ul>
                    <li>OpenWeatherMap</li>
                    <li>WeatherAPI</li>
                    <li>Visual Crossing</li>
                </ul>
            </div>
            <div>
                <h5>ğŸ“° News:</h5>
                <ul>
                    <li>NewsAPI</li>
                    <li>GNews</li>
                    <li>Currents API</li>
                </ul>
            </div>
            <div>
                <h5>ğŸ’° Crypto:</h5>
                <ul>
                    <li>CoinGecko</li>
                    <li>CoinAPI</li>
                    <li>Binance API</li>
                </ul>
            </div>
        </div>
    </div>
    
    <b>ğŸ¨ Deliverables:</b>
    <div style="background: #e8f5e8; padding: 15px; border-radius: 5px; margin: 10px 0;">
        <ol>
            <li><b>Working dashboard</b> with at least 3 API integrations</li>
            <li><b>Configuration file</b> for API keys (using .env)</li>
            <li><b>Error handling</b> for API failures</li>
            <li><b>Caching system</b> to avoid rate limits</li>
            <li><b>Documentation</b> explaining how to set up</li>
            <li><b>User manual</b> for using your dashboard</li>
        </ol>
    </div>
</div>

<h2>ğŸ“š Key Learning Points</h2>
<div style="background-color: #e8f5e8; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px;">
        <div>
            <h3>âœ… What We Learned Today:</h3>
            <ul>
                <li>ğŸŒ What APIs are and why they're important</li>
                <li>ğŸ”¤ HTTP methods (GET, POST, PUT, DELETE)</li>
                <li>ğŸ“Š HTTP status codes and their meanings</li>
                <li>ğŸ” API authentication methods (API keys)</li>
                <li>ğŸ Making API calls with Python's requests library</li>
                <li>ğŸ“„ Reading and understanding API documentation</li>
                <li>âš¡ Handling API responses and errors</li>
                <li>ğŸ”§ Setting up API keys securely</li>
            </ul>
        </div>
        
        <div>
            <h3>ğŸš€ Skills You Now Have:</h3>
            <ul>
                <li>ğŸ”Œ Connect to thousands of online services</li>
                <li>ğŸ“¡ Get real-time data from the internet</li>
                <li>ğŸ” Read and understand technical documentation</li>
                <li>ğŸ›¡ï¸ Handle authentication securely</li>
                <li>âš¡ Build apps that integrate with other services</li>
                <li>ğŸ”§ Debug API connection issues</li>
                <li>ğŸ“Š Process and display API data</li>
                <li>ğŸ’¾ Save API data to files/databases</li>
            </ul>
        </div>
    </div>
</div>

<h2>ğŸŒŸ Pro API Tips</h2>
<div style="background-color: #f5f5f5; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px;">
        <div style="background: white; padding: 15px; border-radius: 5px;">
            <h4>ğŸ”§ Development Tips:</h4>
            <ul>
                <li>Use <code>requests.Session()</code> for multiple calls</li>
                <li>Always check <code>response.status_code</code></li>
                <li>Use try-except blocks for network errors</li>
                <li>Implement retries for temporary failures</li>
                <li>Log API calls for debugging</li>
            </ul>
        </div>
        
        <div style="background: white; padding: 15px; border-radius: 5px;">
            <h4>âš¡ Performance Tips:</h4>
            <ul>
                <li>Cache API responses when possible</li>
                <li>Use async requests for multiple APIs</li>
                <li>Batch requests when API supports it</li>
                <li>Monitor your API usage/rate limits</li>
                <li>Use compression if API supports it</li>
            </ul>
        </div>
        
        <div style="background: white; padding: 15px; border-radius: 5px;">
            <h4>ğŸ›¡ï¸ Security Tips:</h4>
            <ul>
                <li>Never hardcode API keys</li>
                <li>Use environment variables</li>
                <li>Rotate keys regularly</li>
                <li>Use API keys with limited permissions</li>
                <li>Monitor for unusual usage</li>
            </ul>
        </div>
    </div>
    
    <div style="background: #4A90E2; color: white; padding: 15px; border-radius: 5px; margin-top: 15px; text-align: center;">
        <h4>ğŸ¯ Remember the API Workflow:</h4>
        <p>1. Read docs â†’ 2. Get API key â†’ 3. Make test request â†’ 4. Parse response â†’ 5. Handle errors â†’ 6. Build your feature</p>
    </div>
</div>

<div style="background-color: #4A90E2; color: white; padding: 20px; margin: 20px 0; border-radius: 10px; text-align: center;">
    <h2>ğŸ‰ Congratulations, Digital Diplomat!</h2>
    <p>You've unlocked the power to connect any app with thousands of services worldwide! The internet is now your toolbox.</p>
    <div style="display: flex; justify-content: center; gap: 20px; margin-top: 15px;">
        <span>ğŸ”Œ Connect everything</span>
        <span>ğŸŒ Access global data</span>
        <span>ğŸš€ Build amazing apps</span>
    </div>
</div>

<h3>ğŸ› ï¸ API Cheat Sheet</h3>
<pre style="background: #2d3748; color: #e2e8f0; padding: 15px; border-radius: 5px; overflow-x: auto;">
# =========== API WORKING CHEAT SHEET ===========

# 1. Basic API Request
import requests

response = requests.get("https://api.example.com/data")
data = response.json()

# 2. With Parameters
params = {"q": "search term", "limit": 10}
response = requests.get("https://api.example.com/search", params=params)

# 3. With Headers (Authentication)
headers = {
    "Authorization": "Bearer YOUR_API_KEY",
    "Content-Type": "application/json"
}
response = requests.get("https://api.example.com/data", headers=headers)

# 4. POST Request (Sending Data)
data_to_send = {"name": "John", "age": 30}
response = requests.post("https://api.example.com/users", json=data_to_send)

# 5. PUT/PATCH Request (Updating)
update_data = {"age": 31}
response = requests.patch("https://api.example.com/users/123", json=update_data)

# 6. DELETE Request
response = requests.delete("https://api.example.com/users/123")

# 7. Error Handling
try:
    response = requests.get("https://api.example.com/data", timeout=5)
    response.raise_for_status()  # Raises exception for 4xx/5xx
    data = response.json()
except requests.exceptions.HTTPError as err:
    print(f"HTTP error: {err}")
except requests.exceptions.ConnectionError as err:
    print(f"Connection error: {err}")
except requests.exceptions.Timeout as err:
    print(f"Timeout error: {err}")
except requests.exceptions.RequestException as err:
    print(f"Request error: {err}")

# 8. Using Session (for multiple requests)
session = requests.Session()
session.headers.update({"Authorization": "Bearer YOUR_API_KEY"})

response1 = session.get("https://api.example.com/users")
response2 = session.get("https://api.example.com/products")

# 9. Rate Limiting Helper
import time

def make_request(url):
    response = requests.get(url)
    
    # Check if we're being rate limited
    if response.status_code == 429:
        retry_after = int(response.headers.get('Retry-After', 60))
        print(f"Rate limited. Waiting {retry_after} seconds...")
        time.sleep(retry_after)
        return make_request(url)  # Retry
    
    return response

# 10. Environment Variables for API Keys
import os
from dotenv import load_dotenv

load_dotenv()  # Load from .env file
API_KEY = os.getenv("WEATHER_API_KEY")
SECRET_KEY = os.getenv("SECRET_API_KEY")
</pre>
`
            },
            "8-30": {
    icon: "fa-map-marked-alt",
    title: "APIs in Action: Google Maps & Location Services",
    html: `<h1>Month 8, Week 30: APIs in Action - Google Maps & Location Services</h1>
<p>Today we become <b>Digital Cartographers</b>! We'll learn how to integrate maps, location data, and geospatial services into our applications using powerful APIs.</p>

<div class="analogy-box">
    <b>Analogy: The Smart Tour Guide ğŸ—ºï¸ğŸ‘¨â€ğŸ«</b><br/>
    
    Location APIs = Tour guide's knowledge of the city<br/>
    Coordinates = Exact street addresses (latitude/longitude)<br/>
    Geocoding = Converting address â†’ coordinates<br/>
    Reverse Geocoding = Coordinates â†’ address<br/>
    Places API = Guide's recommendations (restaurants, hotels)<br/>
    Directions API = Guide's route planning<br/>
    Distance Matrix = Travel time calculations
</div>

<h2>ğŸ—ºï¸ Part 1: Understanding Location Data</h2>
<div style="background-color: #f0f8ff; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h3>ğŸ“ How Computers Understand Locations</h3>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 15px 0;">
        <div>
            <h4>ğŸ¯ Location Coordinate Systems:</h4>
            <div style="background: #e8f5e8; padding: 15px; border-radius: 5px;">
                <p><b>Latitude:</b> North-South position (-90Â° to +90Â°)</p>
                <p><b>Longitude:</b> East-West position (-180Â° to +180Â°)</p>
                <div style="text-align: center; margin: 10px 0;">
                    <div style="display: inline-block; background: #FF6B35; color: white; padding: 5px 10px; border-radius: 3px;">
                        ğŸŒ 37.7749Â° N, 122.4194Â° W
                    </div>
                    <p><small>San Francisco, USA</small></p>
                </div>
            </div>
            
            <div style="background: #fff3cd; padding: 15px; border-radius: 5px; margin-top: 15px;">
                <h5>ğŸ“ Famous Coordinates:</h5>
                <ul>
                    <li>ğŸ—½ <b>Statue of Liberty:</b> 40.6892Â° N, 74.0445Â° W</li>
                    <li>ğŸ—¼ <b>Eiffel Tower:</b> 48.8584Â° N, 2.2945Â° E</li>
                    <li>ğŸ¯ <b>Tokyo Tower:</b> 35.6586Â° N, 139.7454Â° E</li>
                    <li>ğŸ° <b>Big Ben:</b> 51.5007Â° N, 0.1246Â° W</li>
                    <li>ğŸ—¿ <b>Pyramids of Giza:</b> 29.9792Â° N, 31.1342Â° E</li>
                </ul>
            </div>
        </div>
        
        <div>
            <h4>ğŸŒ Location Data Formats:</h4>
            <div style="background: white; padding: 15px; border-radius: 5px; border: 2px solid #4A90E2;">
                <h5>ğŸ“ GeoJSON Format:</h5>
                <pre style="background: #f5f5f5; padding: 10px; border-radius: 3px;">
{
  "type": "Feature",
  "geometry": {
    "type": "Point",
    "coordinates": [122.4194, 37.7749]
  },
  "properties": {
    "name": "San Francisco",
    "country": "USA",
    "population": 883305
  }
}
                </pre>
            </div>
            
            <div style="background: #f8f9fa; padding: 15px; border-radius: 5px; margin-top: 15px;">
                <h5>ğŸ”¢ Degrees to Decimal Conversion:</h5>
                <pre style="background: white; padding: 10px; border-radius: 3px;">
# Degrees Minutes Seconds â†’ Decimal Degrees
# Formula: decimal = degrees + (minutes/60) + (seconds/3600)

# Example: 48Â° 51' 30" N
degrees = 48
minutes = 51
seconds = 30
decimal = 48 + (51/60) + (30/3600) = 48.8583Â°

# Python function:
def dms_to_decimal(degrees, minutes, seconds, direction):
    decimal = degrees + (minutes/60) + (seconds/3600)
    if direction in ['S', 'W']:
        decimal *= -1
    return decimal
                </pre>
            </div>
        </div>
    </div>
</div>

<h2>ğŸ”‘ Part 2: Setting Up Google Maps API</h2>
<div style="background-color: #e8f5e8; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h3>ğŸš€ Getting Your Google Maps API Key</h3>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
        <div>
            <h4>ğŸ¯ Step-by-Step Guide:</h4>
            <ol style="background: white; padding: 20px 20px 20px 40px; border-radius: 5px;">
                <li><b>Go to:</b> <a href="https://console.cloud.google.com" target="_blank">Google Cloud Console</a></li>
                <li><b>Create a new project</b> or select existing</li>
                <li><b>Enable APIs:</b> Maps JavaScript API, Geocoding API, Places API</li>
                <li><b>Create credentials</b> â†’ API key</li>
                <li><b>Restrict API key</b> (for security)</li>
                <li><b>Set up billing</b> (free $200 monthly credit)</li>
            </ol>
            
            <div style="background: #fff3cd; padding: 15px; border-radius: 5px; margin-top: 15px;">
                <h5>ğŸ’° Google Maps Pricing:</h5>
                <ul>
                    <li>âœ… $200 free monthly credit</li>
                    <li>âœ… Geocoding: $5 per 1000 requests</li>
                    <li>âœ… Places: $17 per 1000 requests</li>
                    <li>âœ… Directions: $5 per 1000 requests</li>
                    <li>âœ… Static Maps: $2 per 1000 requests</li>
                </ul>
                <p><small>For learning: You'll use pennies! Free credit covers tons.</small></p>
            </div>
        </div>
        
        <div>
            <h4>ğŸ” Secure API Key Setup:</h4>
            <pre style="background: #2d3748; color: #e2e8f0; padding: 15px; border-radius: 5px;">
# config.py - Store your API keys securely
import os
from dotenv import load_dotenv

load_dotenv()

class Config:
    GOOGLE_MAPS_API_KEY = os.getenv("GOOGLE_MAPS_API_KEY")
    # Alternative free APIs for testing
    OPENSTREETMAP_URL = "https://nominatim.openstreetmap.org/search"
    POSITIONSTACK_API_KEY = os.getenv("POSITIONSTACK_API_KEY")  # Free alternative
    
# .env file (NEVER commit this!)
GOOGLE_MAPS_API_KEY=your_actual_key_here
POSITIONSTACK_API_KEY=your_positionstack_key_here

# Free Alternatives to Google Maps:
# 1. OpenStreetMap (free, no key needed)
# 2. PositionStack (free tier: 25k requests/month)
# 3. Mapbox (free tier: 50k loads/month)
# 4. Here API (free tier: 250k transactions/month)
            </pre>
            
            <div style="background: #ffcccb; padding: 10px; border-radius: 3px; margin-top: 10px;">
                <h5>âš ï¸ Security Warning:</h5>
                <p>Never expose API keys in client-side code! Use server-side proxy for production.</p>
            </div>
        </div>
    </div>
</div>

<h2>ğŸ“ Part 3: Geocoding & Reverse Geocoding</h2>
<div style="background-color: #fff0e6; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h3>ğŸ”„ Converting Addresses â†”ï¸ Coordinates</h3>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
        <div>
            <h4>ğŸ  Geocoding (Address â†’ Coordinates):</h4>
            <div style="background: #f8f9fa; padding: 15px; border-radius: 5px;">
                <p><b>Input:</b> "1600 Amphitheatre Parkway, Mountain View, CA"</p>
                <p><b>Output:</b> {"lat": 37.422, "lng": -122.084}</p>
            </div>
            
            <h4 style="margin-top: 20px;">ğŸ—ºï¸ Reverse Geocoding (Coordinates â†’ Address):</h4>
            <div style="background: #f8f9fa; padding: 15px; border-radius: 5px;">
                <p><b>Input:</b> {"lat": 40.6892, "lng": -74.0445}</p>
                <p><b>Output:</b> "Statue of Liberty, New York, NY"</p>
            </div>
            
            <div style="background: #e6f7ff; padding: 15px; border-radius: 5px; margin-top: 15px;">
                <h5>ğŸ”§ Practical Uses:</h5>
                <ul>
                    <li>ğŸ“ Show user's location on map</li>
                    <li>ğŸ“± Convert GPS coordinates to readable address</li>
                    <li>ğŸ—ºï¸ Find businesses near coordinates</li>
                    <li>ğŸ“Š Analyze location-based data</li>
                    <li>ğŸš— Calculate distances between addresses</li>
                </ul>
            </div>
        </div>
        
        <div>
            <h4>ğŸ’» Python Implementation:</h4>
            <pre style="background: #36454f; color: #fff; padding: 15px; border-radius: 5px;">
import requests
import json

class Geocoder:
    def __init__(self, api_key=None):
        self.api_key = api_key
        # Free alternative endpoint
        self.osm_url = "https://nominatim.openstreetmap.org/search"
    
    def geocode(self, address):
        """Convert address to coordinates"""
        if self.api_key:
            # Google Maps Geocoding API
            url = "https://maps.googleapis.com/maps/api/geocode/json"
            params = {
                "address": address,
                "key": self.api_key
            }
        else:
            # OpenStreetMap (free, no key needed)
            url = self.osm_url
            params = {
                "q": address,
                "format": "json",
                "limit": 1
            }
        
        response = requests.get(url, params=params)
        data = response.json()
        
        if self.api_key and data["status"] == "OK":
            result = data["results"][0]
            return {
                "address": result["formatted_address"],
                "latitude": result["geometry"]["location"]["lat"],
                "longitude": result["geometry"]["location"]["lng"]
            }
        elif not self.api_key and data:
            return {
                "address": data[0]["display_name"],
                "latitude": float(data[0]["lat"]),
                "longitude": float(data[0]["lon"])
            }
        return None
    
    def reverse_geocode(self, lat, lng):
        """Convert coordinates to address"""
        if self.api_key:
            url = "https://maps.googleapis.com/maps/api/geocode/json"
            params = {
                "latlng": f"{lat},{lng}",
                "key": self.api_key
            }
        else:
            url = "https://nominatim.openstreetmap.org/reverse"
            params = {
                "lat": lat,
                "lon": lng,
                "format": "json"
            }
        
        response = requests.get(url, params=params)
        data = response.json()
        
        if self.api_key and data["status"] == "OK":
            return data["results"][0]["formatted_address"]
        elif not self.api_key:
            return data.get("display_name", "Address not found")
        return None

# Usage
geocoder = Geocoder()  # Use OpenStreetMap (free)
location = geocoder.geocode("Eiffel Tower, Paris")
print(f"Eiffel Tower coordinates: {location}")

address = geocoder.reverse_geocode(48.8584, 2.2945)
print(f"Coordinates point to: {address}")
            </pre>
        </div>
    </div>
</div>

<h2>ğŸ—ºï¸ Part 4: Places API - Discovering Locations</h2>
<div style="background-color: #f5f5f5; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h3>ğŸ” Finding Nearby Places & Details</h3>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
        <div>
            <h4>ğŸ¯ What You Can Find:</h4>
            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; margin: 10px 0;">
                <div style="background: #e8f5e8; padding: 10px; border-radius: 3px; text-align: center;">
                    ğŸ½ï¸ Restaurants
                </div>
                <div style="background: #e8f5e8; padding: 10px; border-radius: 3px; text-align: center;">
                    ğŸ¨ Hotels
                </div>
                <div style="background: #e8f5e8; padding: 10px; border-radius: 3px; text-align: center;">
                    â›½ Gas Stations
                </div>
                <div style="background: #e8f5e8; padding: 10px; border-radius: 3px; text-align: center;">
                    ğŸ¥ Hospitals
                </div>
                <div style="background: #e8f5e8; padding: 10px; border-radius: 3px; text-align: center;">
                    ğŸ›ï¸ Shopping Malls
                </div>
                <div style="background: #e8f5e8; padding: 10px; border-radius: 3px; text-align: center;">
                    ğŸ¬ Movie Theaters
                </div>
                <div style="background: #e8f5e8; padding: 10px; border-radius: 3px; text-align: center;">
                    ğŸ›ï¸ Museums
                </div>
                <div style="background: #e8f5e8; padding: 10px; border-radius: 3px; text-align: center;">
                    ğŸï¸ Parks
                </div>
            </div>
            
            <div style="background: #fff3cd; padding: 15px; border-radius: 5px; margin-top: 15px;">
                <h5>ğŸ” Search Types:</h5>
                <ul>
                    <li><b>Nearby Search:</b> Places within radius</li>
                    <li><b>Text Search:</b> Find by name/type</li>
                    <li><b>Place Details:</b> Get full info about a place</li>
                    <li><b>Place Photos:</b> Get photos of a place</li>
                    <li><b>Autocomplete:</b> Predict search queries</li>
                </ul>
            </div>
        </div>
        
        <div>
            <h4>ğŸ’» Places API Example:</h4>
            <pre style="background: #2d3748; color: #e2e8f0; padding: 15px; border-radius: 5px;">
import requests

class PlacesFinder:
    def __init__(self, api_key):
        self.api_key = api_key
        self.base_url = "https://maps.googleapis.com/maps/api/place"
    
    def find_nearby(self, lat, lng, radius=1000, place_type="restaurant"):
        """Find places near coordinates"""
        url = f"{self.base_url}/nearbysearch/json"
        params = {
            "location": f"{lat},{lng}",
            "radius": radius,
            "type": place_type,
            "key": self.api_key
        }
        
        response = requests.get(url, params=params)
        data = response.json()
        
        places = []
        if data["status"] == "OK":
            for place in data["results"]:
                places.append({
                    "name": place["name"],
                    "address": place.get("vicinity", "No address"),
                    "rating": place.get("rating", "No rating"),
                    "price_level": place.get("price_level", "Unknown"),
                    "location": place["geometry"]["location"]
                })
        return places
    
    def get_place_details(self, place_id):
        """Get detailed information about a place"""
        url = f"{self.base_url}/details/json"
        params = {
            "place_id": place_id,
            "fields": "name,formatted_address,rating,reviews,website,formatted_phone_number",
            "key": self.api_key
        }
        
        response = requests.get(url, params=params)
        return response.json()

# Usage example
if __name__ == "__main__":
    # Note: You need a Google Places API key for this
    finder = PlacesFinder(api_key="YOUR_API_KEY")
    
    # Find restaurants near Times Square
    restaurants = finder.find_nearby(
        lat=40.7580, 
        lng=-73.9855, 
        radius=500, 
        place_type="restaurant"
    )
    
    print(f"Found {len(restaurants)} restaurants near Times Square:")
    for i, restaurant in enumerate(restaurants[:5], 1):
        print(f"{i}. {restaurant['name']} - Rating: {restaurant.get('rating', 'N/A')}")
            </pre>
        </div>
    </div>
</div>

<h2>ğŸš— Part 5: Directions & Distance Matrix</h2>
<div style="background-color: #e6f7ff; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h3>ğŸ›£ï¸ Calculating Routes & Travel Times</h3>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
        <div>
            <h4>ğŸ¯ Directions API:</h4>
            <div style="background: white; padding: 15px; border-radius: 5px;">
                <p><b>Purpose:</b> Get step-by-step directions</p>
                <p><b>Input:</b> Origin + Destination</p>
                <p><b>Output:</b> Route, distance, duration, steps</p>
            </div>
            
            <h4 style="margin-top: 20px;">ğŸ“Š Distance Matrix API:</h4>
            <div style="background: white; padding: 15px; border-radius: 5px;">
                <p><b>Purpose:</b> Compare multiple origins/destinations</p>
                <p><b>Input:</b> Multiple origins + Multiple destinations</p>
                <p><b>Output:</b> Travel times and distances matrix</p>
            </div>
            
            <div style="background: #e8f5e8; padding: 15px; border-radius: 5px; margin-top: 15px;">
                <h5>ğŸš— Travel Modes:</h5>
                <ul>
                    <li>ğŸš¶ <b>Walking:</b> walking</li>
                    <li>ğŸš² <b>Bicycling:</b> bicycling</li>
                    <li>ğŸš— <b>Driving:</b> driving</li>
                    <li>ğŸš† <b>Transit:</b> public transportation</li>
                </ul>
            </div>
        </div>
        
        <div>
            <h4>ğŸ’» Directions Implementation:</h4>
            <pre style="background: #36454f; color: #fff; padding: 15px; border-radius: 5px;">
class RouteCalculator:
    def __init__(self, api_key):
        self.api_key = api_key
    
    def get_directions(self, origin, destination, mode="driving"):
        """Get directions between two points"""
        url = "https://maps.googleapis.com/maps/api/directions/json"
        params = {
            "origin": origin,
            "destination": destination,
            "mode": mode,
            "key": self.api_key
        }
        
        response = requests.get(url, params=params)
        data = response.json()
        
        if data["status"] == "OK":
            route = data["routes"][0]["legs"][0]
            return {
                "distance": route["distance"]["text"],
                "duration": route["duration"]["text"],
                "start_address": route["start_address"],
                "end_address": route["end_address"],
                "steps": [
                    {
                        "instruction": step["html_instructions"],
                        "distance": step["distance"]["text"],
                        "duration": step["duration"]["text"]
                    }
                    for step in route["steps"]
                ]
            }
        return None
    
    def get_distance_matrix(self, origins, destinations, mode="driving"):
        """Calculate distances between multiple points"""
        url = "https://maps.googleapis.com/maps/api/distancematrix/json"
        params = {
            "origins": "|".join(origins),
            "destinations": "|".join(destinations),
            "mode": mode,
            "key": self.api_key
        }
        
        response = requests.get(url, params=params)
        data = response.json()
        
        if data["status"] == "OK":
            matrix = []
            for i, origin in enumerate(data["origin_addresses"]):
                row = []
                for j, destination in enumerate(data["destination_addresses"]):
                    element = data["rows"][i]["elements"][j]
                    if element["status"] == "OK":
                        row.append({
                            "distance": element["distance"]["text"],
                            "duration": element["duration"]["text"]
                        })
                    else:
                        row.append(None)
                matrix.append(row)
            return matrix
        return None

# Usage
calculator = RouteCalculator(api_key="YOUR_API_KEY")

# Get directions
directions = calculator.get_directions(
    origin="New York City, NY",
    destination="Boston, MA",
    mode="driving"
)

if directions:
    print(f"Distance: {directions['distance']}")
    print(f"Duration: {directions['duration']}")
    print(f"Steps: {len(directions['steps'])} steps")
            </pre>
        </div>
    </div>
</div>

<h2>ğŸ¯ Today's Hands-On Exercises (3 Hours)</h2>
<div style="background-color: #f0f8ff; padding: 20px; margin: 15px 0; border-radius: 10px;">
    
    <div style="background: #e8f5e8; padding: 15px; border-radius: 5px; margin-bottom: 15px;">
        <h3>ğŸ† Exercise 1: Location-Based App (60 minutes)</h3>
        <p><b>Build a "Near Me Finder" app</b></p>
        
        <b>Features:</b>
        <ol>
            <li>Get user's location (or allow input)</li>
            <li>Find nearby places of different types</li>
            <li>Filter by rating and distance</li>
            <li>Show results on a map (static map image)</li>
            <li>Get directions to selected place</li>
            <li>Save favorite locations</li>
        </ol>
        
        <div style="background: white; padding: 10px; border-radius: 3px; margin-top: 10px;">
            <b>ğŸ’¡ Using Static Maps API:</b>
            <pre style="background: #f5f5f5; padding: 10px;">
# Generate a static map image
def get_static_map(locations, size="600x400"):
    markers = []
    for i, loc in enumerate(locations):
        markers.append(f"markers=color:red%7Clabel:{i+1}%7C{loc['lat']},{loc['lng']}")
    
    markers_str = "&".join(markers)
    url = f"https://maps.googleapis.com/maps/api/staticmap?size={size}&{markers_str}&key=YOUR_API_KEY"
    
    # Save or display the image
    response = requests.get(url)
    with open('map.png', 'wb') as f:
        f.write(response.content)
    print("Map saved as map.png")
            </pre>
        </div>
    </div>
    
    <div style="background: #ffeaa7; padding: 15px; border-radius: 5px; margin-bottom: 15px;">
        <h3>ğŸ† Exercise 2: Trip Planner (60 minutes)</h3>
        <p><b>Create a multi-destination trip planner</b></p>
        
        <b>Requirements:</b>
        <ol>
            <li>Plan route with multiple stops</li>
            <li>Calculate total distance and time</li>
            <li>Optimize route order (Traveling Salesman)</li>
            <li>Find hotels/restaurants along route</li>
            <li>Calculate fuel costs based on distance</li>
            <li>Export trip plan as PDF/text file</li>
        </ol>
        
        <div style="background: white; padding: 10px; border-radius: 3px; margin-top: 10px;">
            <b>ğŸ›£ï¸ Route Optimization:</b>
            <pre style="background: #f5f5f5; padding: 10px;">
# Simple route optimization
def optimize_route(locations, start_location):
    """Simple nearest neighbor algorithm"""
    route = [start_location]
    unvisited = locations.copy()
    
    current = start_location
    while unvisited:
        # Find nearest unvisited location
        nearest = min(unvisited, 
                     key=lambda loc: calculate_distance(current, loc))
        route.append(nearest)
        unvisited.remove(nearest)
        current = nearest
    
    return route

def calculate_distance(loc1, loc2):
    # Using Haversine formula for great-circle distance
    from math import radians, sin, cos, sqrt, atan2
    
    R = 6371  # Earth radius in km
    
    lat1, lon1 = radians(loc1['lat']), radians(loc1['lng'])
    lat2, lon2 = radians(loc2['lat']), radians(loc2['lng'])
    
    dlat = lat2 - lat1
    dlon = lon2 - lon1
    
    a = sin(dlat/2)**2 + cos(lat1) * cos(lat2) * sin(dlon/2)**2
    c = 2 * atan2(sqrt(a), sqrt(1-a))
    
    return R * c
            </pre>
        </div>
    </div>
    
    <div style="background: #ffcccb; padding: 15px; border-radius: 5px;">
        <h3>ğŸ† Exercise 3: Real Estate Analyzer (60 minutes)</h3>
        <p><b>Build a tool for analyzing property locations</b></p>
        
        <b>Features to Build:</b>
        <ul>
            <li>ğŸ“ Calculate walk score for addresses</li>
            <li>ğŸ« Find nearby schools and their ratings</li>
            <li>ğŸ›’ Calculate distance to amenities (groceries, parks)</li>
            <li>ğŸš— Estimate commute times to major job centers</li>
            <li>ğŸ“Š Generate location report with scores</li>
            <li>ğŸ—ºï¸ Create comparison maps for multiple properties</li>
        </ul>
        
        <b>Advanced Challenges:</b>
        <ul>
            <li>ğŸ“ˆ Incorporate crime rate data (from public APIs)</li>
            <li>ğŸŒ³ Calculate green space proximity</li>
            <li>ğŸš‡ Score public transportation access</li>
            <li>ğŸ¥ Map healthcare facilities</li>
            <li>ğŸ’¼ Calculate average commute patterns</li>
        </ul>
    </div>
</div>

<h2>ğŸ  Homework Assignment</h2>
<div style="background-color: #fff0e6; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h3>ğŸŒ Build a "Smart Travel Assistant"</h3>
    
    <b>ğŸ¯ Project Goal:</b>
    <p>Create a comprehensive travel planning tool that helps users plan trips with intelligent location-based features.</p>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 15px 0;">
        <div>
            <h4>âœˆï¸ Core Features:</h4>
            <ul>
                <li><b>Trip Planner:</b> Multi-city itinerary builder</li>
                <li><b>Smart Routing:</b> Optimize travel order</li>
                <li><b>Local Discovery:</b> Find attractions, restaurants</li>
                <li><b>Budget Calculator:</b> Estimate trip costs</li>
                <li><b>Weather Integration:</b> Forecast for travel dates</li>
                <li><b>Packing List Generator:</b> Based on destination/weather</li>
            </ul>
        </div>
        
        <div>
            <h4>ğŸ—ºï¸ API Integrations:</h4>
            <ul>
                <li>Google Maps/Places APIs (routes, locations)</li>
                <li>Weather API (forecasts)</li>
                <li>Currency API (exchange rates)</li>
                <li>Flight/Hotel APIs (optional)</li>
                <li>Translation API (basic phrases)</li>
                <li>Time Zone API (schedule planning)</li>
            </ul>
        </div>
    </div>
    
    <b>ğŸ“‹ Technical Requirements:</b>
    <div style="background: #f8f9fa; padding: 15px; border-radius: 5px; margin: 10px 0;">
        <ol>
            <li><b>Modular Design:</b> Separate modules for different features</li>
            <li><b>Data Persistence:</b> Save trips to JSON/database</li>
            <li><b>Caching System:</b> Cache API responses to reduce costs</li>
            <li><b>Error Handling:</b> Graceful degradation when APIs fail</li>
            <li><b>User Interface:</b> Console-based or simple web interface</li>
            <li><b>Export Functionality:</b> Export trip plans as PDF/HTML</li>
        </ol>
    </div>
    
    <b>ğŸ¨ Example Trip Plan Output:</b>
    <pre style="background: #2d3748; color: #e2e8f0; padding: 15px; border-radius: 5px; margin: 10px 0;">
TRIP: European Adventure (7 days)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Day 1: Paris, France
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â€¢ 09:00 ğŸ—¼ Visit Eiffel Tower (0.5km from hotel)
â€¢ 12:00 ğŸ½ï¸ Lunch at Le Jules Verne (â­â­â­â­)
â€¢ 14:00 ğŸ›ï¸ Louvre Museum (2.1km, 10min drive)
â€¢ 19:00 ğŸ›ï¸ Dinner & shopping in Champs-Ã‰lysÃ©es

Day 2: Travel to London
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â€¢ 08:00 ğŸš— Drive to Eurostar station (30min)
â€¢ 10:00 ğŸš† Eurostar to London (2h 15min)
â€¢ 13:00 ğŸ¨ Check into London hotel
â€¢ 15:00 ğŸ¡ London Eye & Thames walk

Estimated Costs:
â€¢ Transportation: â‚¬450
â€¢ Accommodation: â‚¬800
â€¢ Food: â‚¬350
â€¢ Activities: â‚¬200
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
TOTAL: â‚¬1800
    </pre>
</div>

<h2>ğŸ“š Key Learning Points</h2>
<div style="background-color: #e8f5e8; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px;">
        <div>
            <h3>âœ… Location APIs Mastered:</h3>
            <ul>
                <li>ğŸ—ºï¸ Understanding geographic coordinates</li>
                <li>ğŸ“ Geocoding and reverse geocoding</li>
                <li>ğŸ” Searching for places and businesses</li>
                <li>ğŸ›£ï¸ Calculating routes and distances</li>
                <li>ğŸ—ºï¸ Generating static map images</li>
                <li>ğŸ” Securing API keys in location apps</li>
                <li>âš¡ Optimizing location-based queries</li>
                <li>ğŸ“Š Processing spatial data</li>
            </ul>
        </div>
        
        <div>
            <h3>ğŸš€ Real-World Applications:</h3>
            <ul>
                <li>ğŸš— Ride-sharing and delivery apps</li>
                <li>ğŸ¨ Travel and booking platforms</li>
                <li>ğŸ›ï¸ Local business directories</li>
                <li>ğŸ  Real estate and property apps</li>
                <li>ğŸš‘ Emergency and service routing</li>
                <li>ğŸ“± Social check-in features</li>
                <li>ğŸ—ºï¸ Navigation and mapping tools</li>
                <li>ğŸ“Š Geographic data analysis</li>
            </ul>
        </div>
    </div>
</div>

<div style="background-color: #4A90E2; color: white; padding: 20px; margin: 20px 0; border-radius: 10px; text-align: center;">
    <h2>ğŸ‰ Congratulations, Digital Cartographer!</h2>
    <p>You can now build location-aware applications that understand and navigate the physical world!</p>
    <div style="display: flex; justify-content: center; gap: 20px; margin-top: 15px;">
        <span>ğŸ—ºï¸ Map the world</span>
        <span>ğŸ“ Find anything</span>
        <span>ğŸ›£ï¸ Navigate anywhere</span>
    </div>
</div>

<h3>ğŸ› ï¸ Location API Cheat Sheet</h3>
<pre style="background: #2d3748; color: #e2e8f0; padding: 15px; border-radius: 5px; overflow-x: auto;">
# =========== LOCATION API CHEAT SHEET ===========

# 1. Geocoding (Address â†’ Coordinates)
import requests

def geocode_address(address, api_key):
    url = "https://maps.googleapis.com/maps/api/geocode/json"
    params = {"address": address, "key": api_key}
    response = requests.get(url, params=params)
    data = response.json()
    
    if data["status"] == "OK":
        location = data["results"][0]["geometry"]["location"]
        return location["lat"], location["lng"]
    return None

# 2. Reverse Geocoding (Coordinates â†’ Address)
def reverse_geocode(lat, lng, api_key):
    url = "https://maps.googleapis.com/maps/api/geocode/json"
    params = {"latlng": f"{lat},{lng}", "key": api_key}
    response = requests.get(url, params=params)
    data = response.json()
    
    if data["status"] == "OK":
        return data["results"][0]["formatted_address"]
    return None

# 3. Find Nearby Places
def find_nearby_places(lat, lng, radius, place_type, api_key):
    url = "https://maps.googleapis.com/maps/api/place/nearbysearch/json"
    params = {
        "location": f"{lat},{lng}",
        "radius": radius,
        "type": place_type,
        "key": api_key
    }
    response = requests.get(url, params=params)
    return response.json()

# 4. Get Directions
def get_directions(origin, destination, api_key, mode="driving"):
    url = "https://maps.googleapis.com/maps/api/directions/json"
    params = {
        "origin": origin,
        "destination": destination,
        "mode": mode,
        "key": api_key
    }
    response = requests.get(url, params=params)
    return response.json()

# 5. Generate Static Map
def generate_static_map(center, markers, size, api_key):
    url = "https://maps.googleapis.com/maps/api/staticmap"
    params = {
        "center": f"{center['lat']},{center['lng']}",
        "zoom": 13,
        "size": size,
        "key": api_key
    }
    
    # Add markers
    for i, marker in enumerate(markers):
        params[f"markers"] = f"color:red%7Clabel:{i+1}%7C{marker['lat']},{marker['lng']}"
    
    response = requests.get(url, params=params)
    return response.content  # Returns image bytes

# 6. Free Alternative: OpenStreetMap
def geocode_osm(address):
    url = "https://nominatim.openstreetmap.org/search"
    params = {"q": address, "format": "json", "limit": 1}
    headers = {"User-Agent": "YourApp/1.0"}  # Required by OSM
    response = requests.get(url, params=params, headers=headers)
    data = response.json()
    
    if data:
        return float(data[0]["lat"]), float(data[0]["lon"])
    return None

# 7. Calculate Distance (Haversine formula)
from math import radians, sin, cos, sqrt, atan2

def haversine_distance(lat1, lon1, lat2, lon2):
    R = 6371  # Earth radius in kilometers
    
    lat1, lon1, lat2, lon2 = map(radians, [lat1, lon1, lat2, lon2])
    dlat = lat2 - lat1
    dlon = lon2 - lon1
    
    a = sin(dlat/2)**2 + cos(lat1) * cos(lat2) * sin(dlon/2)**2
    c = 2 * atan2(sqrt(a), sqrt(1-a))
    
    return R * c

# 8. Rate Limiting for Free APIs
import time

def rate_limited_request(url, params, delay=1):
    response = requests.get(url, params=params)
    time.sleep(delay)  # Respect rate limits
    return response
</pre>
`
},
            "8-31": {
    icon: "fa-message",
    title: "Communication APIs: WhatsApp, Email & SMS",
    html: `<h1>Month 8, Week 31: Communication APIs - WhatsApp, Email & SMS</h1>
<p>Today we become <b>Digital Messengers</b>! We'll learn how to send messages, emails, and notifications programmatically - automating communication like never before!</p>

<div class="analogy-box">
    <b>Analogy: The Automated Post Office ğŸ“®ğŸ¤–</b><br/>
    
    Email APIs = Automated letter sorting and delivery<br/>
    SMS APIs = Instant telegram delivery service<br/>
    WhatsApp API = Smart messenger pigeon network<br/>
    Webhooks = Package delivery notifications<br/>
    Templates = Pre-written message forms<br/>
    Authentication = Post office security clearance<br/>
    Rate Limits = Delivery capacity per hour
</div>

<h2>ğŸ“§ Part 1: Email APIs - Sending Automated Emails</h2>
<div style="background-color: #f0f8ff; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h3>ğŸ’Œ Why Send Emails Programmatically?</h3>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 15px 0;">
        <div>
            <h4>ğŸ¯ Common Use Cases:</h4>
            <div style="background: white; padding: 15px; border-radius: 5px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px;">
                    <div style="background: #e8f5e8; padding: 10px; border-radius: 3px; text-align: center;">
                        ğŸ“‹ Welcome Emails
                    </div>
                    <div style="background: #e8f5e8; padding: 10px; border-radius: 3px; text-align: center;">
                        ğŸ”” Notifications
                    </div>
                    <div style="background: #e8f5e8; padding: 10px; border-radius: 3px; text-align: center;">
                        ğŸ“Š Reports
                    </div>
                    <div style="background: #e8f5e8; padding: 10px; border-radius: 3px; text-align: center;">
                        ğŸ’° Invoices
                    </div>
                    <div style="background: #e8f5e8; padding: 10px; border-radius: 3px; text-align: center;">
                        ğŸ‰ Newsletters
                    </div>
                    <div style="background: #e8f5e8; padding: 10px; border-radius: 3px; text-align: center;">
                        ğŸ” Password Resets
                    </div>
                </div>
            </div>
            
            <div style="background: #fff3cd; padding: 15px; border-radius: 5px; margin-top: 15px;">
                <h5>ğŸ“ˆ Email Statistics:</h5>
                <ul>
                    <li>ğŸ“§ 4 billion email users worldwide</li>
                    <li>ğŸ“¨ 306 billion emails sent daily</li>
                    <li>ğŸ¯ 95% open rate for transactional emails</li>
                    <li>ğŸ’° Email marketing ROI: $42 for every $1 spent</li>
                    <li>ğŸ“± 46% of emails opened on mobile</li>
                </ul>
            </div>
        </div>
        
        <div>
            <h4>ğŸ”§ Email Service Providers:</h4>
            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin: 10px 0;">
                <div style="background: #FF6B35; color: white; padding: 15px; border-radius: 5px; text-align: center;">
                    <h5>SendGrid</h5>
                    <p>100 emails/day free</p>
                </div>
                <div style="background: #4A90E2; color: white; padding: 15px; border-radius: 5px; text-align: center;">
                    <h5>Mailgun</h5>
                    <p>5,000 emails/month free</p>
                </div>
                <div style="background: #50C878; color: white; padding: 15px; border-radius: 5px; text-align: center;">
                    <h5>Amazon SES</h5>
                    <p>62,000 emails/month free</p>
                </div>
            </div>
            
            <div style="background: #f8f9fa; padding: 15px; border-radius: 5px; margin-top: 15px;">
                <h5>ğŸ“Š Comparison:</h5>
                <table style="width: 100%; border-collapse: collapse;">
                    <tr style="background: #4A90E2; color: white;">
                        <th style="padding: 8px;">Service</th>
                        <th style="padding: 8px;">Free Tier</th>
                        <th style="padding: 8px;">Best For</th>
                    </tr>
                    <tr style="background: #f8f9fa;">
                        <td style="padding: 8px; border: 1px solid #ddd;">SendGrid</td>
                        <td style="padding: 8px; border: 1px solid #ddd;">100/day</td>
                        <td style="padding: 8px; border: 1px solid #ddd;">Transactional emails</td>
                    </tr>
                    <tr style="background: white;">
                        <td style="padding: 8px; border: 1px solid #ddd;">Mailgun</td>
                        <td style="padding: 8px; border: 1px solid #ddd;">5K/month</td>
                        <td style="padding: 8px; border: 1px solid #ddd;">Developers</td>
                    </tr>
                    <tr style="background: #f8f9fa;">
                        <td style="padding: 8px; border: 1px solid #ddd;">Amazon SES</td>
                        <td style="padding: 8px; border: 1px solid #ddd;">62K/month</td>
                        <td style="padding: 8px; border: 1px solid #ddd;">High volume</td>
                    </tr>
                </table>
            </div>
        </div>
    </div>
</div>

<h2>ğŸ” Part 2: Setting Up SendGrid (Free Tier)</h2>
<div style="background-color: #e8f5e8; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h3>ğŸš€ Creating Your SendGrid Account</h3>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
        <div>
            <h4>ğŸ“ Step-by-Step Setup:</h4>
            <ol style="background: white; padding: 20px 20px 20px 40px; border-radius: 5px;">
                <li><b>Sign up</b> at <a href="https://sendgrid.com" target="_blank">sendgrid.com</a></li>
                <li><b>Verify email</b> address</li>
                <li><b>Complete profile</b> information</li>
                <li><b>Create API key:</b> Settings â†’ API Keys â†’ Create Key</li>
                <li><b>Choose permissions:</b> "Full Access" or "Restricted Access"</li>
                <li><b>Copy API key</b> (you won't see it again!)</li>
                <li><b>Verify sender identity</b> (required for sending)</li>
            </ol>
            
            <div style="background: #fff3cd; padding: 15px; border-radius: 5px; margin-top: 15px;">
                <h5>âš ï¸ Important Notes:</h5>
                <ul>
                    <li>âœ… Free tier: 100 emails/day</li>
                    <li>âœ… First 30 days: 40,000 emails</li>
                    <li>âœ… Requires sender verification</li>
                    <li>âœ… Can send to any email address</li>
                    <li>âœ… Includes analytics and tracking</li>
                </ul>
            </div>
        </div>
        
        <div>
            <h4>ğŸ’» Python Setup with SendGrid:</h4>
            <pre style="background: #2d3748; color: #e2e8f0; padding: 15px; border-radius: 5px;">
# Install SendGrid Python library
# pip install sendgrid

import os
from sendgrid import SendGridAPIClient
from sendgrid.helpers.mail import Mail, Content, To

class EmailSender:
    def __init__(self, api_key=None):
        self.api_key = api_key or os.getenv("SENDGRID_API_KEY")
        self.sg = SendGridAPIClient(self.api_key)
    
    def send_email(self, to_email, subject, content, from_email="noreply@example.com"):
        """Send a simple email"""
        message = Mail(
            from_email=from_email,
            to_emails=to_email,
            subject=subject,
            html_content=content
        )
        
        try:
            response = self.sg.send(message)
            print(f"âœ… Email sent! Status: {response.status_code}")
            return True
        except Exception as e:
            print(f"âŒ Failed to send email: {e}")
            return False
    
    def send_template_email(self, to_email, template_id, template_data):
        """Send email using a template"""
        message = Mail(
            from_email="noreply@example.com",
            to_emails=to_email
        )
        message.template_id = template_id
        message.dynamic_template_data = template_data
        
        try:
            response = self.sg.send(message)
            print(f"âœ… Template email sent! Status: {response.status_code}")
            return True
        except Exception as e:
            print(f"âŒ Failed to send template email: {e}")
            return False

# Usage
if __name__ == "__main__":
    # Set your API key as environment variable
    # export SENDGRID_API_KEY='your_api_key_here'
    
    sender = EmailSender()
    
    # Send simple email
    sender.send_email(
        to_email="recipient@example.com",
        subject="Welcome to Our Service!",
        content="<h1>Welcome!</h1><p>Thank you for signing up.</p>"
    )
            </pre>
        </div>
    </div>
</div>

<h2>ğŸ“± Part 3: SMS APIs - Text Message Automation</h2>
<div style="background-color: #fff0e6; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h3>ğŸ’¬ Sending Programmatic Text Messages</h3>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
        <div>
            <h4>ğŸ“² Why Use SMS APIs?</h4>
            <ul>
                <li>ğŸ“ˆ <b>98% open rate</b> (vs 20% for email)</li>
                <li>âš¡ <b>90 seconds</b> average response time</li>
                <li>ğŸ“± <b>5.3 billion</b> mobile users worldwide</li>
                <li>ğŸ¯ <b>Direct communication</b> channel</li>
                <li>ğŸ”” <b>Instant notifications</b></li>
            </ul>
            
            <div style="background: #e6f7ff; padding: 15px; border-radius: 5px; margin-top: 15px;">
                <h5>ğŸ“± SMS Service Providers:</h5>
                <ul>
                    <li><b>Twilio:</b> Most popular, great documentation</li>
                    <li><b>Nexmo (Vonage):</b> Good international coverage</li>
                    <li><b>ClickSend:</b> Simple pricing, good support</li>
                    <li><b>TextBelt:</b> Free for testing (limited)</li>
                </ul>
            </div>
            
            <div style="background: #fff3cd; padding: 15px; border-radius: 5px; margin-top: 15px;">
                <h5>ğŸ’° SMS Pricing:</h5>
                <ul>
                    <li>ğŸ“Š <b>USA/Canada:</b> ~$0.0075 per message</li>
                    <li>ğŸŒ <b>International:</b> $0.02 - $0.10 per message</li>
                    <li>ğŸ <b>Free credits:</b> Most give $10-20 free trial</li>
                    <li>ğŸ“¦ <b>Bulk discounts:</b> Cheaper for high volume</li>
                </ul>
            </div>
        </div>
        
        <div>
            <h4>ğŸ’» Twilio SMS Example:</h4>
            <pre style="background: #36454f; color: #fff; padding: 15px; border-radius: 5px;">
# Install Twilio: pip install twilio

import os
from twilio.rest import Client

class SMSSender:
    def __init__(self):
        # Get from Twilio console
        self.account_sid = os.getenv("TWILIO_ACCOUNT_SID")
        self.auth_token = os.getenv("TWILIO_AUTH_TOKEN")
        self.phone_number = os.getenv("TWILIO_PHONE_NUMBER")
        
        self.client = Client(self.account_sid, self.auth_token)
    
    def send_sms(self, to_number, message):
        """Send SMS to a phone number"""
        try:
            message = self.client.messages.create(
                body=message,
                from_=self.phone_number,
                to=to_number
            )
            print(f"âœ… SMS sent! SID: {message.sid}")
            return True
        except Exception as e:
            print(f"âŒ Failed to send SMS: {e}")
            return False
    
    def send_bulk_sms(self, numbers, message_template, personalizations=None):
        """Send SMS to multiple numbers with optional personalization"""
        results = []
        
        for i, number in enumerate(numbers):
            message = message_template
            
            # Add personalization if provided
            if personalizations and i < len(personalizations):
                for key, value in personalizations[i].items():
                    message = message.replace(f"{{{key}}}", str(value))
            
            success = self.send_sms(number, message)
            results.append({
                "number": number,
                "success": success,
                "message": message[:50] + "..." if len(message) > 50 else message
            })
        
        return results

# Free Alternative for Testing (no signup needed)
class FreeSMSSender:
    """Uses free APIs for testing (limited functionality)"""
    
    def send_test_sms(self, message):
        """Send SMS using free test APIs"""
        import requests
        
        # Option 1: TextBelt (free, but limited)
        response = requests.post('https://textbelt.com/text', {
            'phone': '1234567890',  # Replace with test number
            'message': message,
            'key': 'textbelt'  # Free test key
        })
        
        data = response.json()
        if data.get('success'):
            print(f"âœ… Test SMS sent! ID: {data.get('textId')}")
            return True
        else:
            print(f"âŒ Failed: {data.get('error')}")
            return False

# Usage
if __name__ == "__main__":
    # For real SMS (requires Twilio account)
    # sender = SMSSender()
    # sender.send_sms("+1234567890", "Hello from Python!")
    
    # For testing (free, no account needed)
    test_sender = FreeSMSSender()
    test_sender.send_test_sms("This is a test message from Python!")
            </pre>
        </div>
    </div>
</div>

<h2>ğŸ’¬ Part 4: WhatsApp Business API</h2>
<div style="background-color: #f5f5f5; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h3>ğŸ“± The World's Most Popular Messaging Platform</h3>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
        <div>
            <h4>ğŸ“Š WhatsApp Statistics:</h4>
            <div style="background: white; padding: 15px; border-radius: 5px;">
                <ul>
                    <li>ğŸ“± <b>2 billion+</b> active users worldwide</li>
                    <li>ğŸ’¬ <b>100 billion+</b> messages daily</li>
                    <li>ğŸŒ <b>180+ countries</b> with users</li>
                    <li>â±ï¸ <b>98%</b> message open rate</li>
                    <li>ğŸ“ˆ <b>70%</b> higher engagement than email</li>
                </ul>
            </div>
            
            <div style="background: #e8f5e8; padding: 15px; border-radius: 5px; margin-top: 15px;">
                <h5>ğŸ¯ Business Use Cases:</h5>
                <ul>
                    <li>ğŸ›’ Order confirmations and tracking</li>
                    <li>ğŸ« Appointment reminders</li>
                    <li>ğŸ’¬ Customer support chatbots</li>
                    <li>ğŸ“¢ Marketing campaigns</li>
                    <li>ğŸ”” Transactional notifications</li>
                    <li>ğŸ“Š Two-way communication</li>
                </ul>
            </div>
            
            <div style="background: #fff3cd; padding: 15px; border-radius: 5px; margin-top: 15px;">
                <h5>âš ï¸ WhatsApp API Requirements:</h5>
                <ul>
                    <li>âœ… Business verification</li>
                    <li>âœ… Phone number dedicated to WhatsApp</li>
                    <li>âœ… Approval from WhatsApp/Facebook</li>
                    <li>âœ… Template message approval (for automated)</li>
                    <li>âœ… 24-hour window for customer replies</li>
                </ul>
            </div>
        </div>
        
        <div>
            <h4>ğŸ’» WhatsApp API with Twilio:</h4>
            <pre style="background: #2d3748; color: #e2e8f0; padding: 15px; border-radius: 5px;">
# Twilio provides WhatsApp API access
# Setup: Twilio Console â†’ Messaging â†’ Try it out â†’ Send a WhatsApp message

import os
from twilio.rest import Client

class WhatsAppSender:
    def __init__(self):
        self.account_sid = os.getenv("TWILIO_ACCOUNT_SID")
        self.auth_token = os.getenv("TWILIO_AUTH_TOKEN")
        self.whatsapp_number = "whatsapp:+14155238886"  # Twilio sandbox
        
        self.client = Client(self.account_sid, self.auth_token)
    
    def send_message(self, to_number, message, media_url=None):
        """Send WhatsApp message"""
        try:
            msg = self.client.messages.create(
                body=message,
                from_=self.whatsapp_number,
                to=f"whatsapp:{to_number}",
                media_url=media_url  # Optional: send image/document
            )
            print(f"âœ… WhatsApp message sent! SID: {msg.sid}")
            return True
        except Exception as e:
            print(f"âŒ Failed to send WhatsApp: {e}")
            return False
    
    def send_template_message(self, to_number, template_name, parameters=None):
        """Send pre-approved template message"""
        # Note: Templates must be approved by WhatsApp
        # For sandbox testing, use simple messages only
        
        # Format: template_name[language][namespace]
        template = f"{template_name}::en::your_namespace"
        
        try:
            msg = self.client.messages.create(
                from_=self.whatsapp_number,
                to=f"whatsapp:{to_number}",
                content_sid=template,
                content_variables=str(parameters) if parameters else None
            )
            return True
        except Exception as e:
            print(f"âŒ Failed to send template: {e}")
            return False

# Free WhatsApp Testing (using unofficial APIs - for learning only)
class WhatsAppTestSender:
    """Uses unofficial methods for testing/learning"""
    
    def send_test_message(self):
        """Demonstration of WhatsApp automation concepts"""
        print("âš ï¸  Note: Official WhatsApp API requires business verification")
        print("For testing, you can use:")
        print("1. Twilio WhatsApp Sandbox (free testing)")
        print("2. Official Business API (requires approval)")
        print("3. Python automation libraries (for personal use)")
        
        # Example using pywhatkit (for personal automation)
        try:
            import pywhatkit
            # Sends message instantly (requires WhatsApp Web logged in)
            # pywhatkit.sendwhatmsg_instantly("+1234567890", "Test message")
            print("pywhatkit can automate WhatsApp messages")
        except ImportError:
            print("Install pywhatkit: pip install pywhatkit")

# Usage for learning/testing
if __name__ == "__main__":
    # Official API (requires setup)
    # sender = WhatsAppSender()
    # sender.send_message("+1234567890", "Hello via WhatsApp!")
    
    # Testing/learning
    test_sender = WhatsAppTestSender()
    test_sender.send_test_message()
            </pre>
        </div>
    </div>
</div>

<h2>ğŸ”” Part 5: Webhooks & Real-time Notifications</h2>
<div style="background-color: #e6f7ff; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h3>ğŸ”„ Receiving Responses & Updates</h3>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
        <div>
            <h4>ğŸ¯ What are Webhooks?</h4>
            <div style="background: white; padding: 15px; border-radius: 5px;">
                <p><b>Webhooks = Automatic callbacks when events happen</b></p>
                <p>Instead of polling: "Did anything happen?"<br>
                Webhooks: "Hey, something happened! Here's the data."</p>
            </div>
            
            <div style="background: #e8f5e8; padding: 15px; border-radius: 5px; margin-top: 15px;">
                <h5>ğŸ“¡ Common Webhook Events:</h5>
                <ul>
                    <li>ğŸ“§ Email opened/clicked</li>
                    <li>ğŸ“± SMS delivered/read</li>
                    <li>ğŸ’¬ WhatsApp message received</li>
                    <li>ğŸ’³ Payment successful/failed</li>
                    <li>ğŸ‘¤ User signed up/cancelled</li>
                    <li>ğŸ“Š Form submitted</li>
                </ul>
            </div>
            
            <div style="background: #fff3cd; padding: 15px; border-radius: 5px; margin-top: 15px;">
                <h5>ğŸ”§ Webhook Setup Requirements:</h5>
                <ul>
                    <li>ğŸŒ Public URL (ngrok for local development)</li>
                    <li>ğŸ” Secure endpoint (HTTPS required)</li>
                    <li>âœ… Verification (signature validation)</li>
                    <li>âš¡ Fast response (acknowledge within seconds)</li>
                    <li>ğŸ“ Proper error handling</li>
                </ul>
            </div>
        </div>
        
        <div>
            <h4>ğŸ’» Webhook Implementation:</h4>
            <pre style="background: #36454f; color: #fff; padding: 15px; border-radius: 5px;">
# Flask webhook receiver example
from flask import Flask, request, jsonify
import hashlib
import hmac

app = Flask(__name__)

# Secret key for webhook verification
WEBHOOK_SECRET = "your_webhook_secret"

@app.route('/webhook/sms', methods=['POST'])
def sms_webhook():
    """Handle SMS status updates"""
    data = request.json
    
    # Verify webhook signature (security)
    signature = request.headers.get('X-Twilio-Signature')
    if not verify_signature(signature, data, WEBHOOK_SECRET):
        return jsonify({"error": "Invalid signature"}), 401
    
    # Process the webhook event
    event_type = data.get('EventType')
    message_sid = data.get('MessageSid')
    status = data.get('MessageStatus')
    
    print(f"ğŸ“± SMS Event: {event_type}")
    print(f"Message SID: {message_sid}")
    print(f"Status: {status}")
    
    # Update your database or trigger actions
    if status == 'delivered':
        print("âœ… SMS delivered successfully!")
    elif status == 'failed':
        print("âŒ SMS delivery failed!")
    
    # Always return 200 to acknowledge receipt
    return jsonify({"status": "ok"}), 200

@app.route('/webhook/email', methods=['POST'])
def email_webhook():
    """Handle email engagement events"""
    data = request.json
    
    # SendGrid webhook format
    for event in data:
        event_type = event.get('event')
        email = event.get('email')
        timestamp = event.get('timestamp')
        
        if event_type == 'open':
            print(f"ğŸ“§ Email opened by {email} at {timestamp}")
        elif event_type == 'click':
            print(f"ğŸ–±ï¸ Link clicked by {email} at {timestamp}")
    
    return jsonify({"status": "ok"}), 200

def verify_signature(signature, data, secret):
    """Verify webhook signature"""
    # Implementation depends on service provider
    # This is a simplified example
    expected = hmac.new(
        secret.encode(),
        str(data).encode(),
        hashlib.sha256
    ).hexdigest()
    
    return hmac.compare_digest(signature, expected)

# Local testing with ngrok
if __name__ == '__main__':
    print("ğŸš€ Starting webhook server on http://localhost:5000")
    print("ğŸ“¡ Use ngrok for public URL: ngrok http 5000")
    print("ğŸ”— Set webhook URL in your service provider dashboard")
    app.run(debug=True, port=5000)
            </pre>
        </div>
    </div>
</div>

<h2>ğŸ¯ Today's Hands-On Exercises (3 Hours)</h2>
<div style="background-color: #f0f8ff; padding: 20px; margin: 15px 0; border-radius: 10px;">
    
    <div style="background: #e8f5e8; padding: 15px; border-radius: 5px; margin-bottom: 15px;">
        <h3>ğŸ† Exercise 1: Automated Notification System (60 minutes)</h3>
        <p><b>Build a multi-channel notification system</b></p>
        
        <b>Features:</b>
        <ol>
            <li>Send notifications via Email, SMS, and WhatsApp</li>
            <li>User preference management (which channel they prefer)</li>
            <li>Notification templates with variables</li>
            <li>Delivery status tracking</li>
            <li>Retry logic for failed deliveries</li>
            <li>Rate limiting to prevent spam</li>
        </ol>
        
        <div style="background: white; padding: 10px; border-radius: 3px; margin-top: 10px;">
            <b>ğŸ’¡ Notification Class Structure:</b>
            <pre style="background: #f5f5f5; padding: 10px;">
class NotificationSystem:
    def __init__(self):
        self.email_sender = EmailSender()
        self.sms_sender = SMSSender()
        self.whatsapp_sender = WhatsAppSender()
    
    def send_notification(self, user, message_type, data):
        """Send notification via user's preferred channel"""
        # Get user preferences
        channel = user.get('preferred_channel', 'email')
        
        # Prepare message based on type
        template = self.get_template(message_type)
        message = self.render_template(template, data)
        
        # Send via appropriate channel
        if channel == 'email':
            return self.email_sender.send(user['email'], message)
        elif channel == 'sms':
            return self.sms_sender.send(user['phone'], message)
        elif channel == 'whatsapp':
            return self.whatsapp_sender.send(user['phone'], message)
        
        return False
            </pre>
        </div>
    </div>
    
    <div style="background: #ffeaa7; padding: 15px; border-radius: 5px; margin-bottom: 15px;">
        <h3>ğŸ† Exercise 2: Appointment Reminder System (60 minutes)</h3>
        <p><b>Create automated appointment reminders</b></p>
        
        <b>Requirements:</b>
        <ol>
            <li>Schedule reminders for future appointments</li>
            <li>Send reminders 24 hours and 1 hour before appointment</li>
            <li>Allow appointment confirmation via reply</li>
            <li>Handle cancellation and rescheduling</li>
            <li>Keep audit log of all communications</li>
            <li>Integration with calendar APIs</li>
        </ol>
        
        <div style="background: white; padding: 10px; border-radius: 3px; margin-top: 10px;">
            <b>ğŸ• Scheduling with APScheduler:</b>
            <pre style="background: #f5f5f5; padding: 10px;">
from apscheduler.schedulers.background import BackgroundScheduler
from datetime import datetime, timedelta

class AppointmentReminder:
    def __init__(self):
        self.scheduler = BackgroundScheduler()
        self.scheduler.start()
    
    def schedule_reminder(self, appointment):
        """Schedule reminders for an appointment"""
        appointment_time = appointment['datetime']
        
        # 24-hour reminder
        reminder_24h = appointment_time - timedelta(hours=24)
        self.scheduler.add_job(
            self.send_reminder,
            'date',
            run_date=reminder_24h,
            args=[appointment, '24h']
        )
        
        # 1-hour reminder
        reminder_1h = appointment_time - timedelta(hours=1)
        self.scheduler.add_job(
            self.send_reminder,
            'date',
            run_date=reminder_1h,
            args=[appointment, '1h']
        )
    
    def send_reminder(self, appointment, reminder_type):
        """Send the actual reminder"""
        message = self.create_reminder_message(appointment, reminder_type)
        
        # Send via preferred channel
        if appointment.get('prefers_sms'):
            self.sms_sender.send(appointment['phone'], message)
        else:
            self.email_sender.send(appointment['email'], message)
            </pre>
        </div>
    </div>
    
    <div style="background: #ffcccb; padding: 15px; border-radius: 5px;">
        <h3>ğŸ† Exercise 3: Marketing Campaign Manager (60 minutes)</h3>
        <p><b>Build a multi-channel marketing campaign tool</b></p>
        
        <b>Features to Build:</b>
        <ul>
            <li>ğŸ“§ Create email marketing campaigns</li>
            <li>ğŸ“± Schedule SMS blasts</li>
            <li>ğŸ’¬ WhatsApp broadcast lists</li>
            <li>ğŸ“Š Track open rates and engagement</li>
            <li>ğŸ‘¥ Segment audience based on behavior</li>
            <li>ğŸ“ˆ Generate campaign performance reports</li>
            <li>ğŸ”„ A/B testing for different messages</li>
            <li>ğŸ¯ Personalization with merge tags</li>
        </ul>
        
        <b>Advanced Challenges:</b>
        <ul>
            <li>ğŸ¤– AI-powered message optimization</li>
            <li>ğŸ“± Mobile-responsive email templates</li>
            <li>ğŸ”— Dynamic link tracking</li>
            <li>ğŸ‘¤ Behavioral triggered campaigns</li>
            <li>ğŸŒ Multi-language support</li>
            <li>ğŸ“… Seasonal/event-based automation</li>
        </ul>
    </div>
</div>

<h2>ğŸ  Homework Assignment</h2>
<div style="background-color: #fff0e6; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h3>ğŸª Build a "Customer Communication Platform"</h3>
    
    <b>ğŸ¯ Project Goal:</b>
    <p>Create a comprehensive platform for businesses to communicate with customers across multiple channels.</p>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 15px 0;">
        <div>
            <h4>ğŸ“ Core Features:</h4>
            <ul>
                <li><b>Unified Inbox:</b> View all communications in one place</li>
                <li><b>Multi-channel Support:</b> Email, SMS, WhatsApp, Chat</li>
                <li><b>Automated Responses:</b> Chatbots and templates</li>
                <li><b>Customer Profiles:</b> History of all interactions</li>
                <li><b>Team Collaboration:</b> Assign conversations to team members</li>
                <li><b>Analytics Dashboard:</b> Response times, satisfaction</li>
            </ul>
        </div>
        
        <div>
            <h4>ğŸ”§ Technical Requirements:</h4>
            <ul>
                <li>Database for storing conversations</li>
                <li>Real-time updates with WebSockets</li>
                <li>File attachment handling</li>
                <li>Search across all messages</li>
                <li>Export conversations</li>
                <li>API for third-party integrations</li>
            </ul>
        </div>
    </div>
    
    <b>ğŸ“‹ Minimum Viable Product:</b>
    <div style="background: #f8f9fa; padding: 15px; border-radius: 5px; margin: 10px 0;">
        <ol>
            <li><b>Customer can:</b> Send message via website/email/SMS</li>
            <li><b>Agent can:</b> View and reply to messages</li>
            <li><b>System can:</b> Send automated acknowledgments</li>
            <li><b>Admin can:</b> View conversation metrics</li>
            <li><b>Messages are:</b> Stored and searchable</li>
        </ol>
    </div>
    
    <b>ğŸ¨ Example Conversation Flow:</b>
    <pre style="background: #2d3748; color: #e2e8f0; padding: 15px; border-radius: 5px; margin: 10px 0;">
Customer (via WhatsApp):
â“ "Hi, when will my order #12345 arrive?"

[Auto-reply - Instant]
ğŸ¤– "Thanks for your message! Your order is out for delivery. 
Expected arrival: Today by 5 PM. Track here: [link]"

[Agent responds - 2 minutes later]
ğŸ‘©â€ğŸ’¼ "Hi! I see your order is with the delivery driver now. 
You'll receive a notification when it's 15 minutes away."

Customer:
ğŸ‘ "Great, thanks!"

[System marks as resolved]
âœ… Conversation closed - Customer satisfied
    </pre>
</div>

<h2>ğŸ“š Key Learning Points</h2>
<div style="background-color: #e8f5e8; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px;">
        <div>
            <h3>âœ… Communication APIs Mastered:</h3>
            <ul>
                <li>ğŸ“§ Sending transactional and marketing emails</li>
                <li>ğŸ“± Automating SMS notifications</li>
                <li>ğŸ’¬ WhatsApp Business API integration</li>
                <li>ğŸ”” Setting up webhooks for real-time updates</li>
                <li>ğŸ¯ Multi-channel communication strategies</li>
                <li>ğŸ“Š Tracking delivery and engagement metrics</li>
                <li>âš¡ Scheduling automated communications</li>
                <li>ğŸ” Secure API key management</li>
            </ul>
        </div>
        
        <div>
            <h3>ğŸš€ Real-World Applications:</h3>
            <ul>
                <li>ğŸª E-commerce order notifications</li>
                <li>ğŸ¥ Appointment reminder systems</li>
                <li>ğŸ¦ Banking transaction alerts</li>
                <li>ğŸ¨ Travel booking confirmations</li>
                <li>ğŸ“± Two-factor authentication</li>
                <li>ğŸ¯ Marketing campaign automation</li>
                <li>ğŸ‘¥ Customer support platforms</li>
                <li>ğŸ“Š Lead nurturing systems</li>
            </ul>
        </div>
    </div>
</div>

<div style="background-color: #4A90E2; color: white; padding: 20px; margin: 20px 0; border-radius: 10px; text-align: center;">
    <h2>ğŸ‰ Congratulations, Digital Messenger!</h2>
    <p>You can now build automated communication systems that keep people informed and connected!</p>
    <div style="display: flex; justify-content: center; gap: 20px; margin-top: 15px;">
        <span>ğŸ“§ Reach anyone</span>
        <span>ğŸ“± Connect everywhere</span>
        <span>ğŸ’¬ Communicate instantly</span>
    </div>
</div>

<h3>ğŸ› ï¸ Communication API Cheat Sheet</h3>
<pre style="background: #2d3748; color: #e2e8f0; padding: 15px; border-radius: 5px; overflow-x: auto;">
# =========== COMMUNICATION API CHEAT SHEET ===========

# 1. SendGrid Email
from sendgrid import SendGridAPIClient
from sendgrid.helpers.mail import Mail

def send_sendgrid_email(api_key, to_email, subject, content):
    message = Mail(
        from_email="sender@example.com",
        to_emails=to_email,
        subject=subject,
        html_content=content
    )
    sg = SendGridAPIClient(api_key)
    response = sg.send(message)
    return response.status_code

# 2. Twilio SMS
from twilio.rest import Client

def send_twilio_sms(account_sid, auth_token, from_number, to_number, message):
    client = Client(account_sid, auth_token)
    message = client.messages.create(
        body=message,
        from_=from_number,
        to=to_number
    )
    return message.sid

# 3. Twilio WhatsApp
def send_whatsapp_message(account_sid, auth_token, to_number, message):
    client = Client(account_sid, auth_token)
    message = client.messages.create(
        body=message,
        from_="whatsapp:+14155238886",  # Twilio sandbox
        to=f"whatsapp:{to_number}"
    )
    return message.sid

# 4. Free Email (SMTP)
import smtplib
from email.mime.text import MIMEText

def send_smtp_email(smtp_server, port, username, password, to_email, subject, body):
    msg = MIMEText(body, 'html')
    msg['Subject'] = subject
    msg['From'] = username
    msg['To'] = to_email
    
    server = smtplib.SMTP(smtp_server, port)
    server.starttls()
    server.login(username, password)
    server.send_message(msg)
    server.quit()

# 5. Webhook Receiver (Flask)
from flask import Flask, request, jsonify

app = Flask(__name__)

@app.route('/webhook', methods=['POST'])
def webhook_receiver():
    data = request.json
    event_type = data.get('event')
    
    # Process based on event type
    if event_type == 'email_opened':
        print(f"Email opened: {data.get('email')}")
    elif event_type == 'sms_delivered':
        print(f"SMS delivered: {data.get('to')}")
    
    return jsonify({'status': 'received'}), 200

# 6. Bulk Sending with Rate Limiting
import time
from queue import Queue

class RateLimitedSender:
    def __init__(self, requests_per_minute):
        self.rate_limit = requests_per_minute
        self.queue = Queue()
    
    def send_bulk(self, items, send_function):
        """Send items with rate limiting"""
        delay = 60 / self.rate_limit  # Seconds between requests
        
        for item in items:
            try:
                send_function(item)
                time.sleep(delay)
            except Exception as e:
                print(f"Failed to send {item}: {e}")
                self.queue.put(item)  # Retry later
    
    def retry_failed(self, send_function):
        """Retry failed sends"""
        while not self.queue.empty():
            item = self.queue.get()
            try:
                send_function(item)
            except Exception as e:
                print(f"Still failed: {item} - {e}")

# 7. Template Rendering
def render_template(template, variables):
    """Replace variables in template"""
    for key, value in variables.items():
        placeholder = f"{{{key}}}"
        template = template.replace(placeholder, str(value))
    return template

# 8. Message Scheduling
from datetime import datetime
import schedule
import time

def schedule_message(send_time, message_function, *args):
    """Schedule a message for future delivery"""
    now = datetime.now()
    delay = (send_time - now).total_seconds()
    
    if delay > 0:
        time.sleep(delay)
        message_function(*args)

# 9. Multi-channel Fallback
def send_with_fallback(user, message, channels=['whatsapp', 'sms', 'email']):
    """Try multiple channels until success"""
    for channel in channels:
        if channel == 'whatsapp' and user.get('whatsapp'):
            if send_whatsapp(user['whatsapp'], message):
                return True
        elif channel == 'sms' and user.get('phone'):
            if send_sms(user['phone'], message):
                return True
        elif channel == 'email' and user.get('email'):
            if send_email(user['email'], message):
                return True
    return False

# 10. Analytics Tracking
class CommunicationTracker:
    def __init__(self):
        self.metrics = {
            'sent': 0,
            'delivered': 0,
            'opened': 0,
            'clicked': 0,
            'failed': 0
        }
    
    def track_event(self, event_type):
        if event_type in self.metrics:
            self.metrics[event_type] += 1
    
    def get_delivery_rate(self):
        if self.metrics['sent'] > 0:
            return (self.metrics['delivered'] / self.metrics['sent']) * 100
        return 0
</pre>
`
},
            "8-32": {
    icon: "fa-music",
    title: "Entertainment APIs: Spotify, YouTube & Games",
    html: `<h1>Month 8, Week 32: Entertainment APIs - Spotify, YouTube & Games</h1>
<p>Today we become <b>Digital Entertainers</b>! We'll learn how to integrate music, videos, and games into our applications using fun and powerful entertainment APIs.</p>

<div class="analogy-box">
    <b>Analogy: The Digital Entertainment Center ğŸ®ğŸµğŸ“º</b><br/>
    
    Music APIs = Your personal DJ with infinite playlist<br/>
    Video APIs = On-demand movie theater in your code<br/>
    Game APIs = Arcade with all the high scores<br/>
    Streaming = Real-time entertainment delivery<br/>
    Recommendations = Smart suggestions based on taste<br/>
    Playlists = Curated entertainment collections<br/>
    Metadata = Information about the entertainment
</div>

<h2>ğŸµ Part 1: Spotify API - Music in Your Apps</h2>
<div style="background-color: #f0f8ff; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h3>ğŸ§ Access to 70+ Million Songs</h3>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 15px 0;">
        <div>
            <h4>ğŸ¯ What You Can Do with Spotify API:</h4>
            <div style="background: white; padding: 15px; border-radius: 5px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px;">
                    <div style="background: #1DB954; color: white; padding: 10px; border-radius: 3px; text-align: center;">
                        ğŸµ Search Songs
                    </div>
                    <div style="background: #1DB954; color: white; padding: 10px; border-radius: 3px; text-align: center;">
                        ğŸ“Š Get Recommendations
                    </div>
                    <div style="background: #1DB954; color: white; padding: 10px; border-radius: 3px; text-align: center;">
                        ğŸ“ Create Playlists
                    </div>
                    <div style="background: #1DB954; color: white; padding: 10px; border-radius: 3px; text-align: center;">
                        ğŸ” Analyze Audio Features
                    </div>
                    <div style="background: #1DB954; color: white; padding: 10px; border-radius: 3px; text-align: center;">
                        ğŸ¤ Get Artist Info
                    </div>
                    <div style="background: #1DB954; color: white; padding: 10px; border-radius: 3px; text-align: center;">
                        ğŸ“ˆ View Listening History
                    </div>
                </div>
            </div>
            
            <div style="background: #fff3cd; padding: 15px; border-radius: 5px; margin-top: 15px;">
                <h5>ğŸ“Š Spotify by the Numbers:</h5>
                <ul>
                    <li>ğŸµ <b>70+ million</b> tracks</li>
                    <li>ğŸ¤ <b>4+ million</b> podcast episodes</li>
                    <li>ğŸŒ <b>184 markets</b> worldwide</li>
                    <li>ğŸ‘¥ <b>345+ million</b> active users</li>
                    <li>ğŸ’° <b>155+ million</b> paying subscribers</li>
                    <li>ğŸ§ <b>40,000+</b> songs added daily</li>
                </ul>
            </div>
        </div>
        
        <div>
            <h4>ğŸ” Spotify API Setup:</h4>
            <div style="background: #191414; color: white; padding: 15px; border-radius: 5px;">
                <h5 style="color: #1DB954;">ğŸ§ Steps to Get API Access:</h5>
                <ol>
                    <li>Go to <a href="https://developer.spotify.com/dashboard" style="color: #1DB954;">Spotify Developer Dashboard</a></li>
                    <li>Log in with your Spotify account</li>
                    <li>Create a new app</li>
                    <li>Get <b>Client ID</b> and <b>Client Secret</b></li>
                    <li>Set redirect URI (e.g., http://localhost:8888/callback)</li>
                    <li>Choose appropriate scopes (permissions)</li>
                </ol>
            </div>
            
            <div style="background: #f8f9fa; padding: 15px; border-radius: 5px; margin-top: 15px;">
                <h5>ğŸ”‘ Authentication Flow:</h5>
                <ul>
                    <li>âœ… <b>Client Credentials Flow:</b> App-only access (no user data)</li>
                    <li>âœ… <b>Authorization Code Flow:</b> Full user access (with login)</li>
                    <li>âœ… <b>Implicit Grant Flow:</b> Frontend apps (limited)</li>
                    <li>âœ… <b>PKCE Flow:</b> Mobile/native apps (most secure)</li>
                </ul>
            </div>
        </div>
    </div>
</div>

<h2>ğŸ”‘ Part 2: Spotify API Authentication</h2>
<div style="background-color: #e8f5e8; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h3>ğŸ« Getting Your Access Token</h3>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
        <div>
            <h4>ğŸ¯ Authentication Methods:</h4>
            <table style="width: 100%; border-collapse: collapse; margin: 10px 0;">
                <tr style="background: #1DB954; color: white;">
                    <th style="padding: 10px;">Method</th>
                    <th style="padding: 10px;">Use Case</th>
                    <th style="padding: 10px;">Access Level</th>
                </tr>
                <tr style="background: #f8f9fa;">
                    <td style="padding: 8px; border: 1px solid #ddd;">Client Credentials</td>
                    <td style="padding: 8px; border: 1px solid #ddd;">Public data only</td>
                    <td style="padding: 8px; border: 1px solid #ddd;">ğŸ”“ Public</td>
                </tr>
                <tr style="background: white;">
                    <td style="padding: 8px; border: 1px solid #ddd;">Authorization Code</td>
                    <td style="padding: 8px; border: 1px solid #ddd;">User data access</td>
                    <td style="padding: 8px; border: 1px solid #ddd;">ğŸ” Private</td>
                </tr>
            </table>
            
            <div style="background: #fff3cd; padding: 15px; border-radius: 5px; margin-top: 15px;">
                <h5>ğŸµ Common Scopes (Permissions):</h5>
                <ul>
                    <li><code>user-read-private</code>: Read user profile</li>
                    <li><code>user-read-email</code>: Read user email</li>
                    <li><code>playlist-read-private</code>: Read private playlists</li>
                    <li><code>user-library-read</code>: Read saved tracks</li>
                    <li><code>user-top-read</code>: Read top tracks/artists</li>
                    <li><code>user-read-playback-state</code>: Read playback</li>
                </ul>
            </div>
        </div>
        
        <div>
            <h4>ğŸ’» Python Authentication:</h4>
            <pre style="background: #191414; color: white; padding: 15px; border-radius: 5px;">
import requests
import base64
import json

class SpotifyAPI:
    def __init__(self, client_id, client_secret):
        self.client_id = client_id
        self.client_secret = client_secret
        self.token_url = "https://accounts.spotify.com/api/token"
        self.api_url = "https://api.spotify.com/v1"
        self.access_token = None
    
    def get_client_credentials_token(self):
        """Get token for public data (no user login)"""
        # Encode client credentials
        client_creds = f"{self.client_id}:{self.client_secret}"
        client_creds_b64 = base64.b64encode(client_creds.encode()).decode()
        
        headers = {
            "Authorization": f"Basic {client_creds_b64}",
            "Content-Type": "application/x-www-form-urlencoded"
        }
        
        data = {"grant_type": "client_credentials"}
        
        response = requests.post(self.token_url, headers=headers, data=data)
        
        if response.status_code == 200:
            token_data = response.json()
            self.access_token = token_data["access_token"]
            print("âœ… Got access token (public data only)")
            return True
        else:
            print(f"âŒ Failed to get token: {response.status_code}")
            return False
    
    def search_tracks(self, query, limit=10):
        """Search for tracks"""
        if not self.access_token:
            print("âŒ No access token. Call get_client_credentials_token() first")
            return None
        
        headers = {"Authorization": f"Bearer {self.access_token}"}
        params = {
            "q": query,
            "type": "track",
            "limit": limit
        }
        
        response = requests.get(
            f"{self.api_url}/search",
            headers=headers,
            params=params
        )
        
        if response.status_code == 200:
            return response.json()
        else:
            print(f"âŒ Search failed: {response.status_code}")
            return None

# Usage
if __name__ == "__main__":
    # Get these from Spotify Developer Dashboard
    CLIENT_ID = "your_client_id"
    CLIENT_SECRET = "your_client_secret"
    
    spotify = SpotifyAPI(CLIENT_ID, CLIENT_SECRET)
    
    # Get token for public data
    if spotify.get_client_credentials_token():
        # Search for songs
        results = spotify.search_tracks("Ed Sheeran", limit=5)
        
        if results:
            tracks = results["tracks"]["items"]
            print(f"ğŸµ Found {len(tracks)} tracks:")
            for track in tracks:
                artists = ", ".join([artist["name"] for artist in track["artists"]])
                print(f"â€¢ {track['name']} by {artists}")
            </pre>
        </div>
    </div>
</div>

<h2>ğŸ¶ Part 3: Advanced Spotify Features</h2>
<div style="background-color: #fff0e6; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h3>ğŸ§ Beyond Basic Search</h3>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
        <div>
            <h4>ğŸ¯ Advanced Spotify API Features:</h4>
            <div style="background: #f8f9fa; padding: 15px; border-radius: 5px;">
                <h5>ğŸ“Š Audio Analysis:</h5>
                <ul>
                    <li>ğŸµ <b>Danceability:</b> How suitable for dancing</li>
                    <li>âš¡ <b>Energy:</b> Intensity and activity</li>
                    <li>ğŸ¼ <b>Acousticness:</b> Confidence track is acoustic</li>
                    <li>ğŸ˜Š <b>Valence:</b> Musical positiveness</li>
                    <li>ğŸ¤ <b>Speechiness:</b> Presence of spoken words</li>
                    <li>ğŸ¹ <b>Instrumentalness:</b> Lack of vocals</li>
                </ul>
            </div>
            
            <div style="background: #e6f7ff; padding: 15px; border-radius: 5px; margin-top: 15px;">
                <h5>ğŸ§ Recommendations Engine:</h5>
                <ul>
                    <li>ğŸ” <b>Seed tracks/artists:</b> Starting point for recommendations</li>
                    <li>ğŸ¯ <b>Target attributes:</b> Specific audio features</li>
                    <li>ğŸ“ˆ <b>Limit/min/max:</b> Control recommendation parameters</li>
                    <li>ğŸµ <b>Market:</b> Geographic availability</li>
                </ul>
            </div>
            
            <div style="background: #fff3cd; padding: 15px; border-radius: 5px; margin-top: 15px;">
                <h5>ğŸ“ Playlist Management:</h5>
                <ul>
                    <li>âœ… Create new playlists</li>
                    <li>âœ… Add/remove tracks</li>
                    <li>âœ… Update playlist details</li>
                    <li>âœ… Get user's playlists</li>
                    <li>âœ… Follow/unfollow playlists</li>
                </ul>
            </div>
        </div>
        
        <div>
            <h4>ğŸ’» Advanced Spotify Code:</h4>
            <pre style="background: #36454f; color: #fff; padding: 15px; border-radius: 5px;">
class AdvancedSpotifyAPI(SpotifyAPI):
    def get_track_analysis(self, track_id):
        """Get audio analysis for a track"""
        headers = {"Authorization": f"Bearer {self.access_token}"}
        
        response = requests.get(
            f"{self.api_url}/audio-features/{track_id}",
            headers=headers
        )
        
        if response.status_code == 200:
            return response.json()
        return None
    
    def get_recommendations(self, seed_tracks=None, seed_artists=None, 
                           target_energy=None, target_danceability=None,
                           limit=10):
        """Get personalized recommendations"""
        headers = {"Authorization": f"Bearer {self.access_token}"}
        
        params = {"limit": limit}
        
        if seed_tracks:
            params["seed_tracks"] = ",".join(seed_tracks[:5])
        if seed_artists:
            params["seed_artists"] = ",".join(seed_artists[:5])
        if target_energy:
            params["target_energy"] = target_energy
        if target_danceability:
            params["target_danceability"] = target_danceability
        
        response = requests.get(
            f"{self.api_url}/recommendations",
            headers=headers,
            params=params
        )
        
        if response.status_code == 200:
            return response.json()
        return None
    
    def create_playlist(self, user_id, name, description="", public=False):
        """Create a new playlist for user"""
        headers = {
            "Authorization": f"Bearer {self.access_token}",
            "Content-Type": "application/json"
        }
        
        data = {
            "name": name,
            "description": description,
            "public": public
        }
        
        response = requests.post(
            f"{self.api_url}/users/{user_id}/playlists",
            headers=headers,
            json=data
        )
        
        if response.status_code == 201:
            return response.json()
        return None
    
    def add_tracks_to_playlist(self, playlist_id, track_uris):
        """Add tracks to a playlist"""
        headers = {
            "Authorization": f"Bearer {self.access_token}",
            "Content-Type": "application/json"
        }
        
        # Spotify limits to 100 tracks per request
        for i in range(0, len(track_uris), 100):
            batch = track_uris[i:i+100]
            
            data = {"uris": batch}
            
            response = requests.post(
                f"{self.api_url}/playlists/{playlist_id}/tracks",
                headers=headers,
                json=data
            )
            
            if response.status_code != 201:
                print(f"âŒ Failed to add batch {i//100 + 1}")
                return False
        
        return True

# Usage example
if __name__ == "__main__":
    spotify = AdvancedSpotifyAPI("CLIENT_ID", "CLIENT_SECRET")
    
    if spotify.get_client_credentials_token():
        # Get track analysis
        track_id = "6rqhFgbbKwnb9MLmUQDhG6"  # Ed Sheeran - Shape of You
        analysis = spotify.get_track_analysis(track_id)
        
        if analysis:
            print(f"ğŸµ Danceability: {analysis['danceability']:.2%}")
            print(f"âš¡ Energy: {analysis['energy']:.2%}")
            print(f"ğŸ¼ Acousticness: {analysis['acousticness']:.2%}")
        
        # Get recommendations
        recommendations = spotify.get_recommendations(
            seed_tracks=[track_id],
            target_danceability=0.8,
            target_energy=0.7,
            limit=5
        )
            </pre>
        </div>
    </div>
</div>

<h2>ğŸ“º Part 4: YouTube API - Video Integration</h2>
<div style="background-color: #f5f5f5; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h3>ğŸ¥ Access to World's Largest Video Library</h3>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
        <div>
            <h4>ğŸ¯ YouTube API Capabilities:</h4>
            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; margin: 10px 0;">
                <div style="background: #FF0000; color: white; padding: 10px; border-radius: 3px; text-align: center;">
                    ğŸ” Search Videos
                </div>
                <div style="background: #FF0000; color: white; padding: 10px; border-radius: 3px; text-align: center;">
                    ğŸ“Š Get Channel Stats
                </div>
                <div style="background: #FF0000; color: white; padding: 10px; border-radius: 3px; text-align: center;">
                    ğŸ“ Manage Playlists
                </div>
                <div style="background: #FF0000; color: white; padding: 10px; border-radius: 3px; text-align: center;">
                    ğŸ’¬ Read Comments
                </div>
                <div style="background: #FF0000; color: white; padding: 10px; border-radius: 3px; text-align: center;">
                    ğŸ“ˆ Analytics Data
                </div>
                <div style="background: #FF0000; color: white; padding: 10px; border-radius: 3px; text-align: center;">
                    ğŸ¬ Upload Videos
                </div>
            </div>
            
            <div style="background: #fff3cd; padding: 15px; border-radius: 5px; margin-top: 15px;">
                <h5>ğŸ“Š YouTube Statistics:</h5>
                <ul>
                    <li>ğŸ“º <b>2+ billion</b> logged-in monthly users</li>
                    <li>ğŸ¬ <b>500+ hours</b> of video uploaded every minute</li>
                    <li>ğŸŒ <b>100+ countries</b> with localized versions</li>
                    <li>ğŸ‘ï¸ <b>1+ billion</b> hours watched daily</li>
                    <li>ğŸ’° <b>$15+ billion</b> annual advertising revenue</li>
                    <li>ğŸ“± <b>70%</b> of watch time from mobile</li>
                </ul>
            </div>
        </div>
        
        <div>
            <h4>ğŸ’» YouTube API Setup:</h4>
            <pre style="background: #282828; color: white; padding: 15px; border-radius: 5px;">
# Install: pip install google-api-python-client

import os
from googleapiclient.discovery import build
from googleapiclient.errors import HttpError

class YouTubeAPI:
    def __init__(self, api_key):
        self.api_key = api_key
        self.youtube = build('youtube', 'v3', developerKey=api_key)
    
    def search_videos(self, query, max_results=10):
        """Search for YouTube videos"""
        try:
            request = self.youtube.search().list(
                part="snippet",
                q=query,
                maxResults=max_results,
                type="video"
            )
            response = request.execute()
            
            videos = []
            for item in response['items']:
                video = {
                    'title': item['snippet']['title'],
                    'description': item['snippet']['description'],
                    'video_id': item['id']['videoId'],
                    'channel_title': item['snippet']['channelTitle'],
                    'published_at': item['snippet']['publishedAt'],
                    'thumbnail': item['snippet']['thumbnails']['default']['url']
                }
                videos.append(video)
            
            return videos
        
        except HttpError as e:
            print(f"âŒ YouTube API error: {e}")
            return None
    
    def get_video_details(self, video_id):
        """Get detailed information about a video"""
        try:
            request = self.youtube.videos().list(
                part="snippet,statistics,contentDetails",
                id=video_id
            )
            response = request.execute()
            
            if response['items']:
                item = response['items'][0]
                return {
                    'title': item['snippet']['title'],
                    'description': item['snippet']['description'],
                    'view_count': int(item['statistics'].get('viewCount', 0)),
                    'like_count': int(item['statistics'].get('likeCount', 0)),
                    'comment_count': int(item['statistics'].get('commentCount', 0)),
                    'duration': item['contentDetails']['duration'],
                    'published_at': item['snippet']['publishedAt']
                }
            return None
        
        except HttpError as e:
            print(f"âŒ YouTube API error: {e}")
            return None

# Usage
if __name__ == "__main__":
    # Get API key from Google Cloud Console
    API_KEY = "your_youtube_api_key"
    
    youtube = YouTubeAPI(API_KEY)
    
    # Search for videos
    videos = youtube.search_videos("Python programming tutorial", max_results=5)
    
    if videos:
        print(f"ğŸ¥ Found {len(videos)} videos:")
        for video in videos:
            print(f"â€¢ {video['title']} by {video['channel_title']}")
            
            # Get detailed stats for first video
            if video == videos[0]:
                details = youtube.get_video_details(video['video_id'])
                if details:
                    print(f"  ğŸ‘ï¸ Views: {details['view_count']:,}")
                    print(f"  ğŸ‘ Likes: {details['like_count']:,}")
            </pre>
        </div>
    </div>
</div>

<h2>ğŸ® Part 5: Game APIs - Interactive Entertainment</h2>
<div style="background-color: #e6f7ff; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h3>ğŸ•¹ï¸ Integrating Games & Interactive Content</h3>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
        <div>
            <h4>ğŸ¯ Types of Game APIs:</h4>
            <div style="background: white; padding: 15px; border-radius: 5px;">
                <h5>ğŸ“Š Game Data APIs:</h5>
                <ul>
                    <li><b>Steam Web API:</b> Game stats, achievements</li>
                    <li><b>Riot Games API:</b> League of Legends data</li>
                    <li><b>IGDB API:</b> Video game database</li>
                    <li><b>RAWG API:</b> Game discovery platform</li>
                    <li><b>CheapShark API:</b> Game deals and prices</li>
                </ul>
            </div>
            
            <div style="background: #e8f5e8; padding: 15px; border-radius: 5px; margin-top: 15px;">
                <h5>ğŸ•¹ï¸ Game Development APIs:</h5>
                <ul>
                    <li><b>Phaser:</b> HTML5 game framework</li>
                    <li><b>Unity Web API:</b> Unity game services</li>
                    <li><b>Game Jolt API:</b> Indie game platform</li>
                    <li><b>Itch.io API:</b> Indie game marketplace</li>
                </ul>
            </div>
            
            <div style="background: #fff3cd; padding: 15px; border-radius: 5px; margin-top: 15px;">
                <h5>ğŸ® Free Game APIs:</h5>
                <ul>
                    <li><b>PokeAPI:</b> PokÃ©mon data (free, no key)</li>
                    <li><b>Rick and Morty API:</b> Character data (free)</li>
                    <li><b>Deck of Cards API:</b> Card game functionality</li>
                    <li><b>Dungeons & Dragons API:</b> D&D game data</li>
                </ul>
            </div>
        </div>
        
        <div>
            <h4>ğŸ’» Game API Examples:</h4>
            <pre style="background: #36454f; color: #fff; padding: 15px; border-radius: 5px;">
import requests

class GameAPIs:
    def __init__(self):
        # Free APIs - no authentication needed
        pass
    
    def get_pokemon_data(self, pokemon_name):
        """Get data about a PokÃ©mon"""
        url = f"https://pokeapi.co/api/v2/pokemon/{pokemon_name.lower()}"
        
        response = requests.get(url)
        
        if response.status_code == 200:
            data = response.json()
            return {
                'name': data['name'].title(),
                'id': data['id'],
                'height': data['height'] / 10,  # Convert to meters
                'weight': data['weight'] / 10,  # Convert to kilograms
                'types': [t['type']['name'] for t in data['types']],
                'abilities': [a['ability']['name'] for a in data['abilities']],
                'stats': {stat['stat']['name']: stat['base_stat'] 
                         for stat in data['stats']}
            }
        return None
    
    def get_rick_morty_character(self, character_id):
        """Get Rick and Morty character data"""
        url = f"https://rickandmortyapi.com/api/character/{character_id}"
        
        response = requests.get(url)
        
        if response.status_code == 200:
            data = response.json()
            return {
                'name': data['name'],
                'status': data['status'],
                'species': data['species'],
                'gender': data['gender'],
                'origin': data['origin']['name'],
                'location': data['location']['name'],
                'image': data['image']
            }
        return None
    
    def create_deck_of_cards(self):
        """Create a new deck of cards"""
        url = "https://deckofcardsapi.com/api/deck/new/shuffle/"
        
        response = requests.get(url)
        
        if response.status_code == 200:
            data = response.json()
            return data['deck_id']
        return None
    
    def draw_cards(self, deck_id, count=5):
        """Draw cards from a deck"""
        url = f"https://deckofcardsapi.com/api/deck/{deck_id}/draw/"
        params = {'count': count}
        
        response = requests.get(url, params=params)
        
        if response.status_code == 200:
            data = response.json()
            return [
                {
                    'code': card['code'],
                    'value': card['value'],
                    'suit': card['suit'],
                    'image': card['image']
                }
                for card in data['cards']
            ]
        return None

# Usage
if __name__ == "__main__":
    games = GameAPIs()
    
    # PokÃ©mon API
    pikachu = games.get_pokemon_data("pikachu")
    if pikachu:
        print(f"âš¡ PokÃ©mon: {pikachu['name']}")
        print(f"  Types: {', '.join(pikachu['types'])}")
        print(f"  HP: {pikachu['stats']['hp']}")
        print(f"  Attack: {pikachu['stats']['attack']}")
    
    # Deck of Cards API
    deck_id = games.create_deck_of_cards()
    if deck_id:
        print(f"\nğŸƒ Created deck: {deck_id}")
        
        cards = games.draw_cards(deck_id, 5)
        if cards:
            print("ğŸ“‹ Your hand:")
            for card in cards:
                print(f"  {card['value']} of {card['suit']}")
            </pre>
        </div>
    </div>
</div>

<h2>ğŸ¯ Today's Hands-On Exercises (3 Hours)</h2>
<div style="background-color: #f0f8ff; padding: 20px; margin: 15px 0; border-radius: 10px;">
    
    <div style="background: #e8f5e8; padding: 15px; border-radius: 5px; margin-bottom: 15px;">
        <h3>ğŸ† Exercise 1: Smart Music Recommender (60 minutes)</h3>
        <p><b>Build a personalized music recommendation system</b></p>
        
        <b>Features:</b>
        <ol>
            <li>Analyze user's listening history (or input preferences)</li>
            <li>Generate personalized playlists based on mood/activity</li>
            <li>Audio feature analysis (danceability, energy, valence)</li>
            <li>Create "radio stations" based on seed tracks</li>
            <li>Export playlists to Spotify</li>
            <li>Discover new artists similar to favorites</li>
        </ol>
        
        <div style="background: white; padding: 10px; border-radius: 3px; margin-top: 10px;">
            <b>ğŸ’¡ Mood-Based Playlists:</b>
            <pre style="background: #f5f5f5; padding: 10px;">
def generate_mood_playlist(mood, limit=20):
    """Generate playlist based on mood"""
    mood_settings = {
        'happy': {'target_valence': 0.8, 'target_energy': 0.7},
        'sad': {'target_valence': 0.2, 'target_energy': 0.3},
        'energetic': {'target_energy': 0.9, 'target_danceability': 0.8},
        'relaxed': {'target_energy': 0.3, 'target_acousticness': 0.8},
        'focused': {'target_instrumentalness': 0.7, 'target_speechiness': 0.1}
    }
    
    if mood in mood_settings:
        settings = mood_settings[mood]
        return spotify.get_recommendations(limit=limit, **settings)
    
    return None
            </pre>
        </div>
    </div>
    
    <div style="background: #ffeaa7; padding: 15px; border-radius: 5px; margin-bottom: 15px;">
        <h3>ğŸ† Exercise 2: YouTube Content Analyzer (60 minutes)</h3>
        <p><b>Create a tool for analyzing YouTube content</b></p>
        
        <b>Requirements:</b>
        <ol>
            <li>Analyze channel performance metrics</li>
            <li>Track video engagement over time</li>
            <li>Compare multiple channels/creators</li>
            <li>Generate content strategy recommendations</li>
            <li>Monitor trending topics in specific categories</li>
            <li>Predict video performance based on metadata</li>
        </ol>
        
        <div style="background: white; padding: 10px; border-radius: 3px; margin-top: 10px;">
            <b>ğŸ“Š Performance Metrics:</b>
            <pre style="background: #f5f5f5; padding: 10px;">
class YouTubeAnalyzer:
    def calculate_engagement_rate(self, video_data):
        """Calculate engagement rate (likes + comments / views)"""
        if video_data['view_count'] > 0:
            engagement = (video_data['like_count'] + video_data['comment_count'])
            return engagement / video_data['view_count']
        return 0
    
    def estimate_earnings(self, video_data, cpm=2.5):
        """Estimate video earnings based on views and CPM"""
        # CPM = Cost Per Mille ($ per 1000 views)
        estimated_views = video_data['view_count']
        return (estimated_views / 1000) * cpm
    
    def find_best_time_to_post(self, channel_videos):
        """Analyze when videos perform best"""
        hour_performance = {}
        
        for video in channel_videos:
            published_hour = pd.to_datetime(video['published_at']).hour
            engagement = self.calculate_engagement_rate(video)
            
            if published_hour not in hour_performance:
                hour_performance[published_hour] = []
            hour_performance[published_hour].append(engagement)
        
        # Calculate average engagement per hour
        avg_performance = {
            hour: sum(engagements)/len(engagements)
            for hour, engagements in hour_performance.items()
        }
        
        return max(avg_performance.items(), key=lambda x: x[1])
            </pre>
        </div>
    </div>
    
    <div style="background: #ffcccb; padding: 15px; border-radius: 5px;">
        <h3>ğŸ† Exercise 3: Interactive Game Hub (60 minutes)</h3>
        <p><b>Build a collection of mini-games using APIs</b></p>
        
        <b>Games to Build:</b>
        <ul>
            <li>ğŸƒ <b>Card Game:</b> Using Deck of Cards API</li>
            <li>âš¡ <b>PokÃ©mon Battle:</b> Using PokeAPI</li>
            <li>ğŸµ <b>Music Quiz:</b> Using Spotify API</li>
            <li>ğŸ¬ <b>Movie/YT Trivia:</b> Using YouTube/TMDB APIs</li>
            <li>ğŸ¯ <b>Trivia Game:</b> Using Open Trivia Database API</li>
            <li>ğŸ® <b>Retro Game Leaderboards:</b> Custom score tracking</li>
        </ul>
        
        <b>Advanced Features:</b>
        <ul>
            <li>ğŸ‘¥ Multiplayer support with WebSockets</li>
            <li>ğŸ† Achievement system</li>
            <li>ğŸ“Š Player statistics and rankings</li>
            <li>ğŸ¨ Customizable game settings</li>
            <li>ğŸ’¾ Save game progress</li>
            <li>ğŸ“± Responsive design for all devices</li>
        </ul>
    </div>
</div>

<h2>ğŸ  Homework Assignment</h2>
<div style="background-color: #fff0e6; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h3>ğŸµ Build an "Entertainment Dashboard"</h3>
    
    <b>ğŸ¯ Project Goal:</b>
    <p>Create a unified dashboard that combines music, video, and games in one interactive interface.</p>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 15px 0;">
        <div>
            <h4>ğŸ“± Dashboard Sections:</h4>
            <ul>
                <li><b>ğŸµ Music Zone:</b> Spotify player with recommendations</li>
                <li><b>ğŸ¬ Video Hub:</b> YouTube viewer with playlists</li>
                <li><b>ğŸ® Game Center:</b> Collection of mini-games</li>
                <li><b>ğŸ“Š Entertainment Stats:</b> Usage analytics</li>
                <li><b>ğŸ¯ Discovery Engine:</b> Find new content across platforms</li>
                <li><b>ğŸ’¾ Favorites Manager:</b> Save and organize content</li>
            </ul>
        </div>
        
        <div>
            <h4>ğŸ”§ Technical Requirements:</h4>
            <ul>
                <li>Integrate at least 3 different entertainment APIs</li>
                <li>Create a responsive web interface</li>
                <li>Implement user authentication</li>
                <li>Add search functionality across all services</li>
                <li>Include playback controls for media</li>
                <li>Add social sharing features</li>
            </ul>
        </div>
    </div>
    
    <b>ğŸ“‹ API Integration Checklist:</b>
    <div style="background: #f8f9fa; padding: 15px; border-radius: 5px; margin: 10px 0;">
        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px;">
            <div>
                <h5>ğŸµ Music APIs:</h5>
                <ul>
                    <li>âœ… Spotify Web API</li>
                    <li>âœ… Last.fm API</li>
                    <li>âœ… SoundCloud API</li>
                </ul>
            </div>
            <div>
                <h5>ğŸ¬ Video APIs:</h5>
                <ul>
                    <li>âœ… YouTube Data API</li>
                    <li>âœ… Vimeo API</li>
                    <li>âœ… Twitch API</li>
                </ul>
            </div>
            <div>
                <h5>ğŸ® Game APIs:</h5>
                <ul>
                    <li>âœ… PokeAPI</li>
                    <li>âœ… Deck of Cards API</li>
                    <li>âœ… Open Trivia DB</li>
                </ul>
            </div>
        </div>
    </div>
    
    <b>ğŸ¨ Example Dashboard Layout:</b>
    <pre style="background: #2d3748; color: #e2e8f0; padding: 15px; border-radius: 5px; margin: 10px 0;">
ğŸµ MUSIC ZONE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Now Playing: Blinding Lights - The Weeknd
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â®ï¸ â¯ï¸ â­ï¸ ğŸ”Š 85%

Recommendations:
1. Save Your Tears - The Weeknd
2. Take My Breath - The Weeknd
3. Starboy - The Weeknd ft. Daft Punk

ğŸ¬ VIDEO HUB
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Trending: Python Programming Tutorials
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â€¢ Python for Beginners (1.2M views)
â€¢ Data Science with Python (850K views)
â€¢ Web Scraping Tutorial (650K views)

ğŸ® GAME CENTER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Quick Games:
ğŸƒ Play Cards  âš¡ PokÃ©mon Battle
ğŸµ Music Quiz  ğŸ¯ Trivia Challenge

High Scores:
1. Player1: 2450 pts
2. You: 2100 pts
3. Player3: 1950 pts
    </pre>
</div>

<h2>ğŸ“š Key Learning Points</h2>
<div style="background-color: #e8f5e8; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px;">
        <div>
            <h3>âœ… Entertainment APIs Mastered:</h3>
            <ul>
                <li>ğŸµ Spotify API for music integration</li>
                <li>ğŸ“º YouTube API for video content</li>
                <li>ğŸ® Game APIs for interactive content</li>
                <li>ğŸ§ Audio feature analysis and recommendations</li>
                <li>ğŸ“Š Content analytics and metrics</li>
                <li>ğŸ” OAuth authentication flows</li>
                <li>ğŸ¯ Personalized content discovery</li>
                <li>ğŸ”„ Real-time data streaming</li>
            </ul>
        </div>
        
        <div>
            <h3>ğŸš€ Real-World Applications:</h3>
            <ul>
                <li>ğŸ“± Music streaming apps</li>
                <li>ğŸ¬ Video content platforms</li>
                <li>ğŸ® Game development and integration</li>
                <li>ğŸ“Š Entertainment analytics tools</li>
                <li>ğŸ¯ Recommendation engines</li>
                <li>ğŸ“ˆ Content strategy platforms</li>
                <li>ğŸ‘¥ Social entertainment apps</li>
                <li>ğŸ† Gaming leaderboards and competitions</li>
            </ul>
        </div>
    </div>
</div>

<div style="background-color: #4A90E2; color: white; padding: 20px; margin: 20px 0; border-radius: 10px; text-align: center;">
    <h2>ğŸ‰ Congratulations, Digital Entertainer!</h2>
    <p>You can now build applications that entertain, engage, and delight users with music, videos, and games!</p>
    <div style="display: flex; justify-content: center; gap: 20px; margin-top: 15px;">
        <span>ğŸµ Play the hits</span>
        <span>ğŸ¬ Show the videos</span>
        <span>ğŸ® Build the games</span>
    </div>
</div>

<h3>ğŸ› ï¸ Entertainment API Cheat Sheet</h3>
<pre style="background: #2d3748; color: #e2e8f0; padding: 15px; border-radius: 5px; overflow-x: auto;">
# =========== ENTERTAINMENT API CHEAT SHEET ===========

# 1. Spotify Authentication
import base64
import requests

def get_spotify_token(client_id, client_secret):
    url = "https://accounts.spotify.com/api/token"
    
    auth_str = f"{client_id}:{client_secret}"
    auth_b64 = base64.b64encode(auth_str.encode()).decode()
    
    headers = {
        "Authorization": f"Basic {auth_b64}",
        "Content-Type": "application/x-www-form-urlencoded"
    }
    
    data = {"grant_type": "client_credentials"}
    response = requests.post(url, headers=headers, data=data)
    
    if response.status_code == 200:
        return response.json()["access_token"]
    return None

# 2. Spotify Search
def search_spotify(token, query, search_type="track", limit=10):
    url = "https://api.spotify.com/v1/search"
    headers = {"Authorization": f"Bearer {token}"}
    params = {"q": query, "type": search_type, "limit": limit}
    
    response = requests.get(url, headers=headers, params=params)
    return response.json() if response.status_code == 200 else None

# 3. YouTube Search
from googleapiclient.discovery import build

def search_youtube(api_key, query, max_results=10):
    youtube = build('youtube', 'v3', developerKey=api_key)
    request = youtube.search().list(
        part="snippet",
        q=query,
        maxResults=max_results,
        type="video"
    )
    return request.execute()

# 4. PokÃ©mon API
def get_pokemon(name_or_id):
    url = f"https://pokeapi.co/api/v2/pokemon/{name_or_id}"
    response = requests.get(url)
    return response.json() if response.status_code == 200 else None

# 5. Deck of Cards API
def create_deck(deck_count=1):
    url = f"https://deckofcardsapi.com/api/deck/new/shuffle/"
    params = {"deck_count": deck_count}
    response = requests.get(url, params=params)
    
    if response.status_code == 200:
        return response.json()["deck_id"]
    return None

def draw_cards(deck_id, count=1):
    url = f"https://deckofcardsapi.com/api/deck/{deck_id}/draw/"
    params = {"count": count}
    response = requests.get(url, params=params)
    
    if response.status_code == 200:
        return response.json()["cards"]
    return None

# 6. Trivia API
def get_trivia_questions(amount=10, category=None, difficulty=None):
    url = "https://opentdb.com/api.php"
    params = {"amount": amount, "type": "multiple"}
    
    if category:
        params["category"] = category
    if difficulty:
        params["difficulty"] = difficulty
    
    response = requests.get(url, params=params)
    return response.json()["results"] if response.status_code == 200 else []

# 7. Music Recommendations
def get_spotify_recommendations(token, seed_tracks, limit=20):
    url = "https://api.spotify.com/v1/recommendations"
    headers = {"Authorization": f"Bearer {token}"}
    params = {
        "seed_tracks": ",".join(seed_tracks[:5]),
        "limit": limit
    }
    
    response = requests.get(url, headers=headers, params=params)
    return response.json() if response.status_code == 200 else None

# 8. Video Statistics
def get_youtube_video_stats(api_key, video_id):
    youtube = build('youtube', 'v3', developerKey=api_key)
    request = youtube.videos().list(
        part="statistics,snippet",
        id=video_id
    )
    return request.execute()

# 9. Game Data (RAWG API)
def search_games(api_key, query, page_size=10):
    url = "https://api.rawg.io/api/games"
    headers = {"Authorization": f"Bearer {api_key}"}
    params = {"search": query, "page_size": page_size}
    
    response = requests.get(url, headers=headers, params=params)
    return response.json()["results"] if response.status_code == 200 else []

# 10. Entertainment Dashboard Data Aggregator
class EntertainmentAggregator:
    def __init__(self, spotify_token, youtube_api_key):
        self.spotify_token = spotify_token
        self.youtube_api_key = youtube_api_key
    
    def get_trending_content(self):
        """Get trending content from all sources"""
        trending = {
            "music": self.get_trending_music(),
            "videos": self.get_trending_videos(),
            "games": self.get_trending_games()
        }
        return trending
    
    def get_trending_music(self):
        url = "https://api.spotify.com/v1/browse/new-releases"
        headers = {"Authorization": f"Bearer {self.spotify_token}"}
        response = requests.get(url, headers=headers)
        
        if response.status_code == 200:
            data = response.json()
            return [album["name"] for album in data["albums"]["items"][:5]]
        return []
    
    def get_trending_videos(self):
        youtube = build('youtube', 'v3', developerKey=self.youtube_api_key)
        request = youtube.videos().list(
            part="snippet",
            chart="mostPopular",
            maxResults=5
        )
        response = request.execute()
        return [item["snippet"]["title"] for item in response["items"]]
    
    def get_trending_games(self):
        # Using RAWG or similar API
        return ["Game 1", "Game 2", "Game 3"]  # Placeholder
</pre>
`
},

            "9-33": {
    icon: "fa-robot",
    title: "Introduction to Automation Bots",
    html: `<h1>Month 9, Week 33: Introduction to Automation Bots</h1>
<p>Today we become <b>Robotic Engineers</b>! We'll learn how to create intelligent bots that can automate repetitive tasks, work 24/7, and make our lives easier!</p>

<div class="analogy-box">
    <b>Analogy: The Personal Robot Butler ğŸ¤–ğŸ§¹</b><br/>
    
    Automation Bots = Robot butlers that follow instructions<br/>
    Scripts = The butler's instruction manual<br/>
    Triggers = What makes the butler start working<br/>
    Actions = What the butler actually does<br/>
    Conditions = Rules the butler follows<br/>
    Error Handling = What the butler does when confused<br/>
    Scheduling = When the butler works (day/night)
</div>

<h2>ğŸ¤– What are Automation Bots?</h2>
<div style="background-color: #f0f8ff; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h3>âš¡ Bots That Work While You Sleep</h3>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 15px 0;">
        <div>
            <h4>ğŸ¯ Why Automate?</h4>
            <div style="background: white; padding: 15px; border-radius: 5px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px;">
                    <div style="background: #e8f5e8; padding: 10px; border-radius: 3px; text-align: center;">
                        â° Save Time
                    </div>
                    <div style="background: #e8f5e8; padding: 10px; border-radius: 3px; text-align: center;">
                        ğŸ”„ Reduce Errors
                    </div>
                    <div style="background: #e8f5e8; padding: 10px; border-radius: 3px; text-align: center;">
                        ğŸ’° Save Money
                    </div>
                    <div style="background: #e8f5e8; padding: 10px; border-radius: 3px; text-align: center;">
                        ğŸ“ˆ Scale Easily
                    </div>
                    <div style="background: #e8f5e8; padding: 10px; border-radius: 3px; text-align: center;">
                        ğŸŒ™ Work 24/7
                    </div>
                    <div style="background: #e8f5e8; padding: 10px; border-radius: 3px; text-align: center;">
                        ğŸ¯ Be Consistent
                    </div>
                </div>
            </div>
            
            <div style="background: #fff3cd; padding: 15px; border-radius: 5px; margin-top: 15px;">
                <h5>ğŸ“Š Automation Statistics:</h5>
                <ul>
                    <li>ğŸ¤– <b>47%</b> of jobs could be automated</li>
                    <li>â° <b>3+ hours/day</b> saved by automation</li>
                    <li>ğŸ’° <b>$15,000/year</b> average savings per employee</li>
                    <li>ğŸ“ˆ <b>30% increase</b> in productivity</li>
                    <li>ğŸ¯ <b>99.9% accuracy</b> vs 95% human accuracy</li>
                </ul>
            </div>
        </div>
        
        <div>
            <h4>ğŸ”§ Types of Bots:</h4>
            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; margin: 10px 0;">
                <div style="background: #4A90E2; color: white; padding: 15px; border-radius: 5px; text-align: center;">
                    <h5>ğŸ”„ Task Bots</h5>
                    <p>Repeat simple tasks</p>
                </div>
                <div style="background: #50C878; color: white; padding: 15px; border-radius: 5px; text-align: center;">
                    <h5>ğŸ’¬ Chat Bots</h5>
                    <p>Talk with humans</p>
                </div>
                <div style="background: #FF6B35; color: white; padding: 15px; border-radius: 5px; text-align: center;">
                    <h5>ğŸ“Š Data Bots</h5>
                    <p>Collect & process data</p>
                </div>
                <div style="background: #9370DB; color: white; padding: 15px; border-radius: 5px; text-align: center;">
                    <h5>ğŸ¯ Workflow Bots</h5>
                    <p>Coordinate multiple tasks</p>
                </div>
            </div>
            
            <div style="background: #f8f9fa; padding: 15px; border-radius: 5px; margin-top: 15px;">
                <h5>ğŸ“± Real Bot Examples:</h5>
                <ul>
                    <li>ğŸ“§ <b>Email filters:</b> Sort incoming emails</li>
                    <li>ğŸ’° <b>Bill pay:</b> Automatic payments</li>
                    <li>ğŸ“ˆ <b>Stock trading:</b> Buy/sell based on rules</li>
                    <li>ğŸ”” <b>Notifications:</b> Alerts for important events</li>
                    <li>ğŸ“Š <b>Reports:</b> Daily/weekly summaries</li>
                </ul>
            </div>
        </div>
    </div>
</div>

<h2>ğŸ”§ Part 1: The Automation Toolkit</h2>
<div style="background-color: #e8f5e8; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h3>ğŸ› ï¸ Essential Python Libraries for Bots</h3>
    
    <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin: 15px 0;">
        <div style="background: white; padding: 15px; border-radius: 5px; text-align: center; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
            <h4>ğŸ¤– Selenium</h4>
            <p>Web automation</p>
            <code style="background: #f5f5f5; padding: 3px 6px; border-radius: 3px;">pip install selenium</code>
        </div>
        <div style="background: white; padding: 15px; border-radius: 5px; text-align: center; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
            <h4>ğŸ“§ SMTPLib</h4>
            <p>Email automation</p>
            <code style="background: #f5f5f5; padding: 3px 6px; border-radius: 3px;">Built-in!</code>
        </div>
        <div style="background: white; padding: 15px; border-radius: 5px; text-align: center; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
            <h4>ğŸ“ Schedule</h4>
            <p>Task scheduling</p>
            <code style="background: #f5f5f5; padding: 3px 6px; border-radius: 3px;">pip install schedule</code>
        </div>
        <div style="background: white; padding: 15px; border-radius: 5px; text-align: center; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
            <h4>ğŸ–±ï¸ PyAutoGUI</h4>
            <p>GUI automation</p>
            <code style="background: #f5f5f5; padding: 3px 6px; border-radius: 3px;">pip install pyautogui</code>
        </div>
    </div>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px;">
        <div>
            <h4>ğŸ¯ Choosing the Right Tool:</h4>
            <table style="width: 100%; border-collapse: collapse; margin: 10px 0;">
                <tr style="background: #4A90E2; color: white;">
                    <th style="padding: 10px;">Task Type</th>
                    <th style="padding: 10px;">Best Library</th>
                    <th style="padding: 10px;">When to Use</th>
                </tr>
                <tr style="background: #f8f9fa;">
                    <td style="padding: 8px; border: 1px solid #ddd;">Website Interaction</td>
                    <td style="padding: 8px; border: 1px solid #ddd;">Selenium</td>
                    <td style="padding: 8px; border: 1px solid #ddd;">Login, forms, clicking</td>
                </tr>
                <tr style="background: white;">
                    <td style="padding: 8px; border: 1px solid #ddd;">Desktop Automation</td>
                    <td style="padding: 8px; border: 1px solid #ddd;">PyAutoGUI</td>
                    <td style="padding: 8px; border: 1px solid #ddd;">Click, type, screenshot</td>
                </tr>
                <tr style="background: #f8f9fa;">
                    <td style="padding: 8px; border: 1px solid #ddd;">Scheduled Tasks</td>
                    <td style="padding: 8px; border: 1px solid #ddd;">Schedule</td>
                    <td style="padding: 8px; border: 1px solid #ddd;">Daily/weekly jobs</td>
                </tr>
                <tr style="background: white;">
                    <td style="padding: 8px; border: 1px solid #ddd;">File Operations</td>
                    <td style="padding: 8px; border: 1px solid #ddd;">os, shutil</td>
                    <td style="padding: 8px; border: 1px solid #ddd;">Move, rename, delete</td>
                </tr>
                <tr style="background: #f8f9fa;">
                    <td style="padding: 8px; border: 1px solid #ddd;">Email Automation</td>
                    <td style="padding: 8px; border: 1px solid #ddd;">smtplib</td>
                    <td style="padding: 8px; border: 1px solid #ddd;">Send, read, filter emails</td>
                </tr>
            </table>
        </div>
        
        <div>
            <h4>ğŸ’» Installation Checklist:</h4>
            <pre style="background: #2d3748; color: #e2e8f0; padding: 15px; border-radius: 5px;">
# Install all automation libraries at once
pip install selenium schedule pyautogui
pip install beautifulsoup4 requests
pip install pandas numpy  # For data bots
pip install python-dotenv  # For configuration

# Additional useful libraries
pip install pyperclip    # Clipboard automation
pip install keyboard     # Keyboard automation
pip install mouse        # Mouse automation
pip install pillow       # Image processing
pip install openpyxl     # Excel automation
pip install pdfkit       # PDF automation

# Verify installations
python -c "import selenium; print('âœ… Selenium installed')"
python -c "import schedule; print('âœ… Schedule installed')"
python -c "import pyautogui; print('âœ… PyAutoGUI installed')"

# Create requirements.txt for your bot
# pip freeze > requirements.txt
            </pre>
        </div>
    </div>
</div>

<h2>â° Part 2: Task Scheduling with Schedule</h2>
<div style="background-color: #fff0e6; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h3>ğŸ“… Making Bots Work on a Schedule</h3>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
        <div>
            <h4>ğŸ¯ When to Schedule Tasks:</h4>
            <div style="background: white; padding: 15px; border-radius: 5px;">
                <h5>â±ï¸ Timing Examples:</h5>
                <ul>
                    <li>ğŸŒ… <b>Morning:</b> Daily reports (8:00 AM)</li>
                    <li>ğŸ“Š <b>Hourly:</b> Check system status</li>
                    <li>ğŸ“ˆ <b>Weekly:</b> Backup files (Sunday 2:00 AM)</li>
                    <li>ğŸ’° <b>Monthly:</b> Send invoices (1st of month)</li>
                    <li>ğŸ¯ <b>Specific:</b> Birthday reminders</li>
                    <li>ğŸ”„ <b>Interval:</b> Every 30 minutes</li>
                </ul>
            </div>
            
            <div style="background: #e6f7ff; padding: 15px; border-radius: 5px; margin-top: 15px;">
                <h5>ğŸ“‹ Scheduling Best Practices:</h5>
                <ul>
                    <li>âœ… Schedule during off-peak hours</li>
                    <li>âœ… Add random delays to avoid patterns</li>
                    <li>âœ… Include error recovery</li>
                    <li>âœ… Log all scheduled executions</li>
                    <li>âœ… Monitor bot performance</li>
                    <li>âœ… Set up failure notifications</li>
                </ul>
            </div>
        </div>
        
        <div>
            <h4>ğŸ’» Schedule Library Examples:</h4>
            <pre style="background: #36454f; color: #fff; padding: 15px; border-radius: 5px;">
import schedule
import time
from datetime import datetime

def daily_report():
    """Send daily report at 8:00 AM"""
    print(f"ğŸ“Š Generating daily report at {datetime.now()}")
    # Your report generation code here

def hourly_check():
    """Check system status every hour"""
    print(f"âœ… System check at {datetime.now()}")
    # Your check code here

def backup_files():
    """Backup files every Sunday at 2:00 AM"""
    print(f"ğŸ’¾ Starting backup at {datetime.now()}")
    # Your backup code here

def custom_interval():
    """Run every 45 minutes"""
    print(f"ğŸ”„ Custom interval run at {datetime.now()}")
    # Your custom task here

# Schedule the jobs
schedule.every().day.at("08:00").do(daily_report)
schedule.every().hour.do(hourly_check)
schedule.every().sunday.at("02:00").do(backup_files)
schedule.every(45).minutes.do(custom_interval)

# Also available:
# schedule.every(10).seconds.do(task)
# schedule.every().monday.do(task)
# schedule.every().wednesday.at("13:15").do(task)
# schedule.every().minute.at(":17").do(task)  # At 17 seconds past minute
# schedule.every().day.at("12:42", "Europe/Amsterdam").do(task)

# Run the scheduler
print("â° Scheduler started. Press Ctrl+C to stop.")
print("ğŸ“… Scheduled jobs:")
for job in schedule.get_jobs():
    print(f"  â€¢ {job}")

while True:
    schedule.run_pending()
    time.sleep(1)  # Check every second
            </pre>
        </div>
    </div>
    
    <div style="background: #fff3cd; padding: 15px; border-radius: 5px; margin-top: 15px;">
        <h4>ğŸ”§ Advanced Scheduling:</h4>
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
            <div>
                <h5>ğŸ”„ Random Intervals (Avoid Detection):</h5>
                <pre style="background: white; padding: 10px; border-radius: 3px;">
import random
import schedule

def random_interval_task():
    """Run at random intervals between 30-90 minutes"""
    print("Running random interval task")
    # Your task here
    
    # Reschedule with new random interval
    interval = random.randint(30, 90)
    schedule.every(interval).minutes.do(random_interval_task)

# Start with random interval
random_interval_task()
                </pre>
            </div>
            <div>
                <h5>ğŸ“Š Job Statistics:</h5>
                <pre style="background: white; padding: 10px; border-radius: 3px;">
class JobTracker:
    def __init__(self):
        self.execution_count = 0
        self.last_run = None
        self.success_count = 0
        self.failure_count = 0
    
    def tracked_task(self):
        try:
            self.execution_count += 1
            self.last_run = datetime.now()
            
            # Your task here
            print(f"Task #{self.execution_count} running...")
            
            self.success_count += 1
            print(f"âœ… Success! Total: {self.success_count}")
            
        except Exception as e:
            self.failure_count += 1
            print(f"âŒ Failed: {e}")
    
    def get_stats(self):
        return {
            'total': self.execution_count,
            'success': self.success_count,
            'failed': self.failure_count,
            'last_run': self.last_run
        }
                </pre>
            </div>
        </div>
    </div>
</div>

<h2>ğŸ–±ï¸ Part 3: Desktop Automation with PyAutoGUI</h2>
<div style="background-color: #f5f5f5; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h3>ğŸ’» Automating Your Computer</h3>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
        <div>
            <h4>ğŸ¯ What PyAutoGUI Can Do:</h4>
            <div style="background: white; padding: 15px; border-radius: 5px;">
                <ul>
                    <li>ğŸ–±ï¸ <b>Mouse Control:</b> Move, click, drag</li>
                    <li>âŒ¨ï¸ <b>Keyboard Control:</b> Type, hotkeys</li>
                    <li>ğŸ“¸ <b>Screenshots:</b> Capture screen areas</li>
                    <li>ğŸ” <b>Image Recognition:</b> Find images on screen</li>
                    <li>ğŸ“ <b>Screen Info:</b> Get screen size, resolution</li>
                    <li>ğŸ’¬ <b>Message Boxes:</b> Display alerts</li>
                </ul>
            </div>
            
            <div style="background: #e8f5e8; padding: 15px; border-radius: 5px; margin-top: 15px;">
                <h5>âš ï¸ Safety First!</h5>
                <ul>
                    <li>âœ… Enable failsafe: Move mouse to corner to stop</li>
                    <li>âœ… Start with small, safe scripts</li>
                    <li>âœ… Test on dummy files/folders first</li>
                    <li>âœ… Add delays between actions</li>
                    <li>âœ… Backup important data</li>
                    <li>âŒ Don't run unattended at first</li>
                </ul>
            </div>
        </div>
        
        <div>
            <h4>ğŸ’» PyAutoGUI Examples:</h4>
            <pre style="background: #2d3748; color: #e2e8f0; padding: 15px; border-radius: 5px;">
import pyautogui
import time

# Enable safety features
pyautogui.FAILSAFE = True  # Move mouse to top-left to stop
pyautogui.PAUSE = 0.5      # 0.5 second pause between actions

class DesktopAutomator:
    def __init__(self):
        self.screen_width, self.screen_height = pyautogui.size()
        print(f"ğŸ“º Screen: {self.screen_width}x{self.screen_height}")
    
    def mouse_demo(self):
        """Demonstrate mouse control"""
        print("ğŸ–±ï¸ Mouse demo starting in 3 seconds...")
        time.sleep(3)
        
        # Move mouse smoothly
        pyautogui.moveTo(100, 100, duration=1)
        pyautogui.click()  # Left click
        
        # Right click
        pyautogui.rightClick()
        
        # Double click
        pyautogui.doubleClick()
        
        # Drag and drop
        pyautogui.dragTo(200, 200, duration=1, button='left')
    
    def keyboard_demo(self):
        """Demonstrate keyboard control"""
        print("âŒ¨ï¸ Keyboard demo starting in 3 seconds...")
        time.sleep(3)
        
        # Type text
        pyautogui.write("Hello, World!", interval=0.1)
        pyautogui.press('enter')
        
        # Hotkeys
        pyautogui.hotkey('ctrl', 'c')  # Copy
        pyautogui.hotkey('ctrl', 'v')  # Paste
        
        # Special keys
        pyautogui.press(['left', 'left', 'right', 'right'])
    
    def screenshot_demo(self):
        """Take and analyze screenshots"""
        # Take full screenshot
        screenshot = pyautogui.screenshot()
        screenshot.save('full_screen.png')
        print("ğŸ“¸ Full screenshot saved")
        
        # Take region screenshot
        region = pyautogui.screenshot(region=(0, 0, 300, 400))
        region.save('region.png')
        
        # Get pixel color
        pixel_color = pyautogui.pixel(100, 200)
        print(f"ğŸ¨ Pixel color at (100,200): {pixel_color}")
    
    def find_image(self, image_path):
        """Find image on screen"""
        try:
            location = pyautogui.locateOnScreen(image_path, confidence=0.8)
            if location:
                print(f"ğŸ” Found image at: {location}")
                # Click center of found image
                center = pyautogui.center(location)
                pyautogui.click(center)
                return True
            else:
                print("âŒ Image not found")
                return False
        except Exception as e:
            print(f"âŒ Error finding image: {e}")
            return False

# Usage
if __name__ == "__main__":
    automator = DesktopAutomator()
    
    # Uncomment to run demos (be careful!)
    # automator.mouse_demo()
    # automator.keyboard_demo()
    # automator.screenshot_demo()
    
    print("ğŸ¯ Ready to automate!")
            </pre>
        </div>
    </div>
</div>

<h2>ğŸ“§ Part 4: Email Automation Bot</h2>
<div style="background-color: #e6f7ff; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h3>ğŸ“¨ Automating Email Tasks</h3>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
        <div>
            <h4>ğŸ¯ Email Automation Ideas:</h4>
            <div style="background: white; padding: 15px; border-radius: 5px;">
                <h5>ğŸ“‹ Common Email Tasks:</h5>
                <ul>
                    <li>ğŸ“§ <b>Auto-responders:</b> Vacation replies</li>
                    <li>ğŸ“Š <b>Report distribution:</b> Send daily reports</li>
                    <li>ğŸ¯ <b>Email filtering:</b> Sort into folders</li>
                    <li>ğŸ”” <b>Notification alerts:</b> Important emails</li>
                    <li>ğŸ“ <b>Email templates:</b> Quick responses</li>
                    <li>ğŸ—‘ï¸ <b>Cleanup:</b> Archive old emails</li>
                </ul>
            </div>
            
            <div style="background: #fff3cd; padding: 15px; border-radius: 5px; margin-top: 15px;">
                <h5>âš ï¸ Email Automation Rules:</h5>
                <ul>
                    <li>âœ… Respect privacy laws (GDPR, CAN-SPAM)</li>
                    <li>âœ… Include unsubscribe options</li>
                    <li>âœ… Don't spam or send unsolicited emails</li>
                    <li>âœ… Test thoroughly before automating</li>
                    <li>âœ… Monitor sent emails for issues</li>
                    <li>âœ… Respect rate limits of email providers</li>
                </ul>
            </div>
        </div>
        
        <div>
            <h4>ğŸ’» Email Automation Bot:</h4>
            <pre style="background: #36454f; color: #fff; padding: 15px; border-radius: 5px;">
import smtplib
import imaplib
import email
from email.mime.text import MIMEText
from email.mime.multipart import MIMEMultipart
import schedule
import time

class EmailBot:
    def __init__(self, email_address, password, smtp_server, imap_server):
        self.email_address = email_address
        self.password = password
        self.smtp_server = smtp_server
        self.imap_server = imap_server
        
        # Common ports:
        # SMTP: 587 (TLS), 465 (SSL)
        # IMAP: 993 (SSL)
    
    def send_email(self, to_email, subject, body, is_html=False):
        """Send an email"""
        try:
            # Create message
            msg = MIMEMultipart()
            msg['From'] = self.email_address
            msg['To'] = to_email
            msg['Subject'] = subject
            
            # Add body
            if is_html:
                msg.attach(MIMEText(body, 'html'))
            else:
                msg.attach(MIMEText(body, 'plain'))
            
            # Connect and send
            with smtplib.SMTP(self.smtp_server, 587) as server:
                server.starttls()
                server.login(self.email_address, self.password)
                server.send_message(msg)
            
            print(f"âœ… Email sent to {to_email}")
            return True
            
        except Exception as e:
            print(f"âŒ Failed to send email: {e}")
            return False
    
    def check_inbox(self, folder='INBOX', unread_only=True):
        """Check for new emails"""
        try:
            # Connect to IMAP server
            mail = imaplib.IMAP4_SSL(self.imap_server)
            mail.login(self.email_address, self.password)
            mail.select(folder)
            
            # Search for emails
            status, messages = mail.search(None, 'UNSEEN' if unread_only else 'ALL')
            email_ids = messages[0].split()
            
            emails = []
            for email_id in email_ids[:10]:  # Limit to 10 emails
                status, msg_data = mail.fetch(email_id, '(RFC822)')
                
                for response_part in msg_data:
                    if isinstance(response_part, tuple):
                        msg = email.message_from_bytes(response_part[1])
                        
                        email_info = {
                            'id': email_id.decode(),
                            'from': msg['from'],
                            'subject': msg['subject'],
                            'date': msg['date']
                        }
                        
                        # Get body
                        if msg.is_multipart():
                            for part in msg.walk():
                                if part.get_content_type() == "text/plain":
                                    email_info['body'] = part.get_payload(decode=True).decode()
                                    break
                        else:
                            email_info['body'] = msg.get_payload(decode=True).decode()
                        
                        emails.append(email_info)
            
            mail.close()
            mail.logout()
            
            print(f"ğŸ“§ Found {len(emails)} new emails")
            return emails
            
        except Exception as e:
            print(f"âŒ Failed to check inbox: {e}")
            return []
    
    def auto_responder(self, from_email, subject, body):
        """Send automatic response"""
        response_subject = f"Re: {subject}"
        response_body = f"""Hello,

Thank you for your email. I'm currently away and will respond when I return.

Best regards,
Your Name

Original message:
{body[:500]}...
"""
        
        return self.send_email(from_email, response_subject, response_body)
    
    def schedule_daily_report(self, recipients, report_time="08:00"):
        """Schedule daily report emails"""
        def send_report():
            report_body = self.generate_daily_report()
            for recipient in recipients:
                self.send_email(recipient, "Daily Report", report_body)
        
        schedule.every().day.at(report_time).do(send_report)
        print(f"ğŸ“… Daily report scheduled for {report_time}")

# Usage example
if __name__ == "__main__":
    # Configuration
    EMAIL = "your_email@gmail.com"
    PASSWORD = "your_app_password"  # Use app-specific password!
    SMTP_SERVER = "smtp.gmail.com"
    IMAP_SERVER = "imap.gmail.com"
    
    bot = EmailBot(EMAIL, PASSWORD, SMTP_SERVER, IMAP_SERVER)
    
    # Test sending
    bot.send_email(
        to_email="recipient@example.com",
        subject="Test from Email Bot",
        body="This is an automated test email."
    )
    
    # Check inbox
    new_emails = bot.check_inbox()
    for email_msg in new_emails:
        print(f"From: {email_msg['from']}")
        print(f"Subject: {email_msg['subject']}")
        print("-" * 40)
            </pre>
        </div>
    </div>
</div>

<h2>ğŸ¯ Today's Hands-On Exercises (3 Hours)</h2>
<div style="background-color: #f0f8ff; padding: 20px; margin: 15px 0; border-radius: 10px;">
    
    <div style="background: #e8f5e8; padding: 15px; border-radius: 5px; margin-bottom: 15px;">
        <h3>ğŸ† Exercise 1: Personal Assistant Bot (60 minutes)</h3>
        <p><b>Build a bot that helps with daily computer tasks</b></p>
        
        <b>Features:</b>
        <ol>
            <li>ğŸ–¥ï¸ Open frequently used programs at startup</li>
            <li>ğŸ“‚ Organize downloads folder automatically</li>
            <li>ğŸ“Š Take periodic screenshots for activity tracking</li>
            <li>ğŸ’¬ Send you reminders via desktop notifications</li>
            <li>ğŸŒ Open your daily checklist/agenda</li>
            <li>ğŸ”’ Lock computer when you step away (inactivity detection)</li>
        </ol>
        
        <div style="background: white; padding: 10px; border-radius: 3px; margin-top: 10px;">
            <b>ğŸ’¡ Organize Downloads Folder:</b>
            <pre style="background: #f5f5f5; padding: 10px;">
import os
import shutil
from pathlib import Path

class DownloadsOrganizer:
    def __init__(self, downloads_path="~/Downloads"):
        self.downloads = Path(downloads_path).expanduser()
        self.categories = {
            'Images': ['.jpg', '.jpeg', '.png', '.gif', '.bmp'],
            'Documents': ['.pdf', '.doc', '.docx', '.txt', '.xlsx'],
            'Videos': ['.mp4', '.avi', '.mov', '.mkv'],
            'Music': ['.mp3', '.wav', '.flac'],
            'Archives': ['.zip', '.rar', '.7z', '.tar'],
            'Code': ['.py', '.js', '.html', '.css', '.json']
        }
    
    def organize(self):
        """Organize downloads into folders"""
        for file_path in self.downloads.iterdir():
            if file_path.is_file():
                # Find category
                category = 'Other'
                for cat, extensions in self.categories.items():
                    if file_path.suffix.lower() in extensions:
                        category = cat
                        break
                
                # Create category folder
                category_folder = self.downloads / category
                category_folder.mkdir(exist_ok=True)
                
                # Move file
                try:
                    shutil.move(str(file_path), str(category_folder / file_path.name))
                    print(f"ğŸ“ Moved {file_path.name} to {category}/")
                except Exception as e:
                    print(f"âŒ Failed to move {file_path.name}: {e}")
            </pre>
        </div>
    </div>
    
    <div style="background: #ffeaa7; padding: 15px; border-radius: 5px; margin-bottom: 15px;">
        <h3>ğŸ† Exercise 2: Study/Work Timer Bot (60 minutes)</h3>
        <p><b>Create a Pomodoro-style productivity bot</b></p>
        
        <b>Requirements:</b>
        <ol>
            <li>â±ï¸ Implement Pomodoro timer (25 min work, 5 min break)</li>
            <li>ğŸ”” Send desktop notifications when time is up</li>
            <li>ğŸ“Š Track study/work sessions in a log file</li>
            <li>ğŸ¯ Block distracting websites during work sessions</li>
            <li>ğŸ“ˆ Generate daily/weekly productivity reports</li>
            <li>ğŸµ Play focus music during work sessions</li>
        </ol>
        
        <div style="background: white; padding: 10px; border-radius: 3px; margin-top: 10px;">
            <b>â±ï¸ Pomodoro Timer Implementation:</b>
            <pre style="background: #f5f5f5; padding: 10px;">
import time
import schedule
from plyer import notification

class PomodoroBot:
    def __init__(self, work_minutes=25, break_minutes=5):
        self.work_duration = work_minutes * 60
        self.break_duration = break_minutes * 60
        self.is_working = True
        self.session_count = 0
        
    def start_session(self):
        """Start a work or break session"""
        if self.is_working:
            print(f"ğŸ¯ Starting work session #{self.session_count + 1}")
            self.notify("Time to work!", "Focus for 25 minutes")
            self.countdown(self.work_duration, "Working")
            self.is_working = False
            self.session_count += 1
        else:
            print("â˜• Starting break time")
            self.notify("Break time!", "Relax for 5 minutes")
            self.countdown(self.break_duration, "Breaking")
            self.is_working = True
    
    def countdown(self, seconds, activity):
        """Countdown timer with progress bar"""
        for remaining in range(seconds, 0, -1):
            mins, secs = divmod(remaining, 60)
            progress = (seconds - remaining) / seconds * 100
            print(f"\r{activity}: {mins:02d}:{secs:02d} [{int(progress)}%]", end="")
            time.sleep(1)
        print()
    
    def notify(self, title, message):
        """Send desktop notification"""
        try:
            notification.notify(
                title=title,
                message=message,
                timeout=10
            )
        except:
            # Fallback to print if notification fails
            print(f"ğŸ”” {title}: {message}")
    
    def start_pomodoro(self, sessions=4):
        """Start multiple Pomodoro sessions"""
        print(f"ğŸ… Starting {sessions} Pomodoro sessions")
        for i in range(sessions):
            self.start_session()
            if i < sessions - 1:  # Don't schedule next if last session
                schedule.every().day.at("next_session").do(self.start_session)
            </pre>
        </div>
    </div>
    
    <div style="background: #ffcccb; padding: 15px; border-radius: 5px;">
        <h3>ğŸ† Exercise 3: File Backup Bot (60 minutes)</h3>
        <p><b>Build an automated file backup system</b></p>
        
        <b>Features to Build:</b>
        <ul>
            <li>ğŸ’¾ Automatic backups of important folders</li>
            <li>ğŸ“… Schedule backups (daily/weekly/monthly)</li>
            <li>ğŸ—œï¸ Compress backups to save space</li>
            <li>ğŸ”„ Keep version history (last 7 backups)</li>
            <li>â˜ï¸ Upload backups to cloud storage</li>
            <li>ğŸ“§ Send backup completion reports</li>
            <li>ğŸ”’ Encrypt sensitive backups</li>
            <li>ğŸ“Š Monitor backup health and disk space</li>
        </ul>
        
        <b>Advanced Challenges:</b>
        <ul>
            <li>ğŸ¤– AI-powered file importance detection</li>
            <li>ğŸ“± Mobile app for backup status</li>
            <li>ğŸ” Search within backups</li>
            <li>ğŸ”„ Incremental backups (only changed files)</li>
            <li>ğŸŒ Multiple backup destinations</li>
            <li>âš¡ Backup while files are in use</li>
        </ul>
    </div>
</div>

<h2>ğŸ  Homework Assignment</h2>
<div style="background-color: #fff0e6; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h3>ğŸ¢ Build a "Smart Office Assistant"</h3>
    
    <b>ğŸ¯ Project Goal:</b>
    <p>Create a comprehensive office automation system that handles multiple daily tasks automatically.</p>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 15px 0;">
        <div>
            <h4>ğŸ“‹ Core Features:</h4>
            <ul>
                <li><b>ğŸ“§ Email Management:</b> Sort, respond, archive</li>
                <li><b>ğŸ“… Calendar Integration:</b> Schedule meetings, reminders</li>
                <li><b>ğŸ“Š Report Generation:</b> Daily/weekly reports</li>
                <li><b>ğŸ’¾ File Organization:</b> Auto-sort documents</li>
                <li><b>ğŸ”” Notification System:</b> Important alerts</li>
                <li><b>ğŸ“ˆ Data Backup:</b> Automatic file backups</li>
            </ul>
        </div>
        
        <div>
            <h4>ğŸ”§ Technical Requirements:</h4>
            <ul>
                <li>Use at least 3 different automation libraries</li>
                <li>Implement scheduling for different tasks</li>
                <li>Add error handling and recovery</li>
                <li>Include logging of all bot activities</li>
                <li>Create configuration file for settings</li>
                <li>Build a monitoring dashboard</li>
            </ul>
        </div>
    </div>
    
    <b>ğŸ“‹ Daily Office Bot Schedule:</b>
    <div style="background: #f8f9fa; padding: 15px; border-radius: 5px; margin: 10px 0;">
        <table style="width: 100%; border-collapse: collapse;">
            <tr style="background: #4A90E2; color: white;">
                <th style="padding: 10px;">Time</th>
                <th style="padding: 10px;">Task</th>
                <th style="padding: 10px;">Description</th>
            </tr>
            <tr style="background: #f8f9fa;">
                <td style="padding: 8px; border: 1px solid #ddd;">08:00 AM</td>
                <td style="padding: 8px; border: 1px solid #ddd;">ğŸŒ… Morning Report</td>
                <td style="padding: 8px; border: 1px solid #ddd;">Send daily agenda</td>
            </tr>
            <tr style="background: white;">
                <td style="padding: 8px; border: 1px solid #ddd;">10:00 AM</td>
                <td style="padding: 8px; border: 1px solid #ddd;">ğŸ“§ Email Check</td>
                <td style="padding: 8px; border: 1px solid #ddd;">Sort and prioritize emails</td>
            </tr>
            <tr style="background: #f8f9fa;">
                <td style="padding: 8px; border: 1px solid #ddd;">12:00 PM</td>
                <td style="padding: 8px; border: 1px solid #ddd;">ğŸ’¾ Backup</td>
                <td style="padding: 8px; border: 1px solid #ddd;">Incremental file backup</td>
            </tr>
            <tr style="background: white;">
                <td style="padding: 8px; border: 1px solid #ddd;">03:00 PM</td>
                <td style="padding: 8px; border: 1px solid #ddd;">ğŸ“Š Progress Report</td>
                <td style="padding: 8px; border: 1px solid #ddd;">Mid-day update</td>
            </tr>
            <tr style="background: #f8f9fa;">
                <td style="padding: 8px; border: 1px solid #ddd;">05:00 PM</td>
                <td style="padding: 8px; border: 1px solid #ddd;">ğŸ“‹ End of Day</td>
                <td style="padding: 8px; border: 1px solid #ddd;">Summary and cleanup</td>
            </tr>
        </table>
    </div>
    
    <b>ğŸ¨ Bot Dashboard Example:</b>
    <pre style="background: #2d3748; color: #e2e8f0; padding: 15px; border-radius: 5px; margin: 10px 0;">
ğŸ¤– SMART OFFICE ASSISTANT - STATUS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“… Today: Monday, November 15, 2023
â° Current Time: 14:30
ğŸ”„ Last Updated: 2 minutes ago

ğŸ“Š BOT ACTIVITIES TODAY:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
âœ… 08:00 - Morning report sent (5 recipients)
âœ… 10:00 - 42 emails processed (3 urgent)
âœ… 12:00 - Backup completed (1.2 GB)
ğŸ”„ 14:30 - Currently organizing downloads
â³ 15:00 - Scheduled: Progress report
â³ 17:00 - Scheduled: End of day summary

ğŸ“ˆ PERFORMANCE METRICS:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Time saved today: 3.5 hours
Tasks completed: 47
Errors encountered: 2
Success rate: 95.7%

ğŸ”” RECENT NOTIFICATIONS:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
14:28 - ğŸ“ Organized 23 files in Downloads
14:15 - ğŸ“§ New urgent email from boss
13:45 - ğŸ’¾ Backup verification passed
13:00 - ğŸ… Pomodoro session #3 completed

Type 'help' for commands or 'status' for details.
    </pre>
</div>

<h2>ğŸ“š Key Learning Points</h2>
<div style="background-color: #e8f5e8; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px;">
        <div>
            <h3>âœ… Automation Basics Learned:</h3>
            <ul>
                <li>ğŸ¤– What bots are and why they're useful</li>
                <li>ğŸ› ï¸ Essential Python automation libraries</li>
                <li>â° Task scheduling with the schedule library</li>
                <li>ğŸ–±ï¸ Desktop automation with PyAutoGUI</li>
                <li>ğŸ“§ Email automation with smtplib/imaplib</li>
                <li>ğŸ”§ Building modular, reusable bot components</li>
                <li>âš¡ Creating bots that work 24/7</li>
                <li>ğŸ“Š Monitoring and logging bot activities</li>
            </ul>
        </div>
        
        <div>
            <h3>ğŸš€ Real-World Applications:</h3>
            <ul>
                <li>ğŸ¢ Office task automation</li>
                <li>ğŸ“Š Report generation and distribution</li>
                <li>ğŸ“§ Email management systems</li>
                <li>ğŸ’¾ Automated backup solutions</li>
                <li>ğŸ¯ Personal productivity tools</li>
                <li>ğŸ”„ File organization systems</li>
                <li>ğŸ“ˆ Data collection and processing</li>
                <li>ğŸ”” Notification and alert systems</li>
            </ul>
        </div>
    </div>
</div>

<div style="background-color: #4A90E2; color: white; padding: 20px; margin: 20px 0; border-radius: 10px; text-align: center;">
    <h2>ğŸ‰ Congratulations, Robotic Engineer!</h2>
    <p>You've built your first automation bots that can work tirelessly to make your life easier!</p>
    <div style="display: flex; justify-content: center; gap: 20px; margin-top: 15px;">
        <span>ğŸ¤– Automate everything</span>
        <span>â° Save time daily</span>
        <span>ğŸ“ˆ Work smarter</span>
    </div>
</div>

<h3>ğŸ› ï¸ Automation Bot Cheat Sheet</h3>
<pre style="background: #2d3748; color: #e2e8f0; padding: 15px; border-radius: 5px; overflow-x: auto;">
# =========== AUTOMATION BOT CHEAT SHEET ===========

# 1. Basic Bot Structure
import schedule
import time
import logging

class BasicBot:
    def __init__(self):
        self.setup_logging()
        self.setup_safety()
    
    def setup_logging(self):
        logging.basicConfig(
            filename='bot.log',
            level=logging.INFO,
            format='%(asctime)s - %(levelname)s - %(message)s'
        )
    
    def setup_safety(self):
        """Enable safety features"""
        import pyautogui
        pyautogui.FAILSAFE = True
        pyautogui.PAUSE = 0.5
    
    def run(self):
        """Main bot loop"""
        self.schedule_tasks()
        print("ğŸ¤– Bot started. Press Ctrl+C to stop.")
        
        while True:
            schedule.run_pending()
            time.sleep(1)

# 2. Schedule Examples
import schedule

# Every day at specific time
schedule.every().day.at("10:30").do(task)

# Every hour
schedule.every().hour.do(task)

# Every 45 minutes
schedule.every(45).minutes.do(task)

# Every Monday
schedule.every().monday.do(task)

# Every Wednesday at 13:15
schedule.every().wednesday.at("13:15").do(task)

# At 17 seconds past every minute
schedule.every().minute.at(":17").do(task)

# 3. Desktop Automation
import pyautogui

# Mouse control
pyautogui.moveTo(x, y, duration=1)  # Move smoothly
pyautogui.click()                   # Click
pyautogui.rightClick()              # Right click
pyautogui.doubleClick()             # Double click
pyautogui.dragTo(x, y, duration=1)  # Drag

# Keyboard control
pyautogui.write("Hello")           # Type text
pyautogui.press('enter')           # Press key
pyautogui.hotkey('ctrl', 'c')      # Hotkey

# Screen
screenshot = pyautogui.screenshot()
screenshot.save('screen.png')

# Find image on screen
location = pyautogui.locateOnScreen('image.png', confidence=0.8)

# 4. Email Automation
import smtplib
from email.mime.text import MIMEText

def send_email(from_addr, to_addr, subject, body, password, smtp_server='smtp.gmail.com', port=587):
    msg = MIMEText(body)
    msg['From'] = from_addr
    msg['To'] = to_addr
    msg['Subject'] = subject
    
    with smtplib.SMTP(smtp_server, port) as server:
        server.starttls()
        server.login(from_addr, password)
        server.send_message(msg)

# 5. File Operations
import os
import shutil
from pathlib import Path

# List files
files = os.listdir('folder')

# Check if file exists
if Path('file.txt').exists():
    print("File exists")

# Move file
shutil.move('source.txt', 'destination.txt')

# Copy file
shutil.copy2('source.txt', 'backup.txt')

# Create directory
Path('new_folder').mkdir(exist_ok=True)

# 6. Error Handling for Bots
def safe_task_execution(task_function, max_retries=3):
    """Execute task with retries"""
    for attempt in range(max_retries):
        try:
            task_function()
            return True
        except Exception as e:
            print(f"Attempt {attempt + 1} failed: {e}")
            if attempt == max_retries - 1:
                send_alert(f"Task failed after {max_retries} attempts: {e}")
                return False
            time.sleep(2 ** attempt)  # Exponential backoff
    
    return False

# 7. Bot Configuration
import json
from dataclasses import dataclass

@dataclass
class BotConfig:
    schedule_times: list
    email_settings: dict
    file_paths: dict
    notification_settings: dict
    
    @classmethod
    def from_file(cls, config_file='config.json'):
        with open(config_file) as f:
            data = json.load(f)
        return cls(**data)

# 8. Monitoring Bot Health
class BotHealthMonitor:
    def __init__(self):
        self.start_time = time.time()
        self.tasks_completed = 0
        self.errors_encountered = 0
    
    def task_started(self):
        self.tasks_completed += 1
    
    def error_occurred(self):
        self.errors_encountered += 1
    
    def get_uptime(self):
        return time.time() - self.start_time
    
    def get_success_rate(self):
        if self.tasks_completed > 0:
            return ((self.tasks_completed - self.errors_encountered) / self.tasks_completed) * 100
        return 0

# 9. Bot Dashboard
def display_bot_dashboard(health_monitor, recent_tasks, upcoming_tasks):
    """Display bot status dashboard"""
    print("ğŸ¤– BOT DASHBOARD")
    print("=" * 40)
    print(f"Uptime: {health_monitor.get_uptime() / 3600:.1f} hours")
    print(f"Tasks completed: {health_monitor.tasks_completed}")
    print(f"Success rate: {health_monitor.get_success_rate():.1f}%")
    print(f"Recent errors: {health_monitor.errors_encountered}")
    print("\nğŸ“‹ Recent tasks:")
    for task in recent_tasks[-5:]:
        print(f"  â€¢ {task}")
    print("\nâ° Upcoming tasks:")
    for task in upcoming_tasks[:3]:
        print(f"  â€¢ {task}")

# 10. Graceful Shutdown
import signal
import sys

def signal_handler(sig, frame):
    """Handle Ctrl+C gracefully"""
    print("\nğŸ›‘ Shutting down bot gracefully...")
    # Cleanup tasks
    schedule.clear()
    # Save state
    # Close connections
    sys.exit(0)

signal.signal(signal.SIGINT, signal_handler)
</pre>
`
},
            "9-34": {
    icon: "fa-globe",
    title: "Web Automation & Scraping Bots",
    html: `<h1>Month 9, Week 34: Web Automation & Scraping Bots</h1>
<p>Today we become <b>Web Ninjas</b>! We'll learn how to create bots that can navigate websites, fill forms, scrape data, and interact with web applications automatically!</p>

<div class="analogy-box">
    <b>Analogy: The Invisible Web Surfer ğŸ„â€â™‚ï¸ğŸ‘»</b><br/>
    
    Web Bots = Invisible web surfers that work 24/7<br/>
    Selenium = The surfer's boat and navigation tools<br/>
    Selectors = GPS coordinates to find elements<br/>
    Waits = Patience while pages load<br/>
    Actions = What the surfer does (click, type, scroll)<br/>
    Headless Mode = Stealth mode (no browser visible)<br/>
    Proxies = Disguise to avoid detection
</div>

<h2>ğŸŒ Part 1: Advanced Selenium Automation</h2>
<div style="background-color: #f0f8ff; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h3>ğŸ¤– Beyond Basic Web Interaction</h3>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 15px 0;">
        <div>
            <h4>ğŸ¯ Advanced Selenium Features:</h4>
            <div style="background: white; padding: 15px; border-radius: 5px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px;">
                    <div style="background: #4A90E2; color: white; padding: 10px; border-radius: 3px; text-align: center;">
                        ğŸ–±ï¸ Actions Chain
                    </div>
                    <div style="background: #4A90E2; color: white; padding: 10px; border-radius: 3px; text-align: center;">
                        ğŸ“œ Execute JS
                    </div>
                    <div style="background: #4A90E2; color: white; padding: 10px; border-radius: 3px; text-align: center;">
                        ğŸª Cookies
                    </div>
                    <div style="background: #4A90E2; color: white; padding: 10px; border-radius: 3px; text-align: center;">
                        ğŸ“ Downloads
                    </div>
                    <div style="background: #4A90E2; color: white; padding: 10px; border-radius: 3px; text-align: center;">
                        ğŸ“± Mobile Emulation
                    </div>
                    <div style="background: #4A90E2; color: white; padding: 10px; border-radius: 3px; text-align: center;">
                        ğŸ–¼ï¸ Screenshots
                    </div>
                </div>
            </div>
            
            <div style="background: #fff3cd; padding: 15px; border-radius: 5px; margin-top: 15px;">
                <h5>âš ï¸ Web Automation Ethics:</h5>
                <ul>
                    <li>âœ… Respect robots.txt</li>
                    <li>âœ… Add delays between requests</li>
                    <li>âœ… Don't overload servers</li>
                    <li>âœ… Use APIs when available</li>
                    <li>âœ… Only scrape public data</li>
                    <li>âŒ Don't bypass paywalls</li>
                    <li>âŒ Don't automate illegal activities</li>
                </ul>
            </div>
        </div>
        
        <div>
            <h4>ğŸ”§ Selenium Setup Checklist:</h4>
            <pre style="background: #2d3748; color: #e2e8f0; padding: 15px; border-radius: 5px;">
# Install Selenium and drivers
pip install selenium webdriver-manager

# For Chrome
from selenium import webdriver
from selenium.webdriver.chrome.service import Service
from selenium.webdriver.chrome.options import Options
from webdriver_manager.chrome import ChromeDriverManager

# For Firefox
from selenium.webdriver.firefox.service import Service
from webdriver_manager.firefox import GeckoDriverManager

# For Edge
from selenium.webdriver.edge.service import Service
from webdriver_manager.microsoft import EdgeChromiumDriverManager

# Basic setup with automatic driver management
def setup_driver(browser='chrome', headless=False):
    if browser == 'chrome':
        options = Options()
        if headless:
            options.add_argument("--headless")
        
        service = Service(ChromeDriverManager().install())
        driver = webdriver.Chrome(service=service, options=options)
    
    elif browser == 'firefox':
        options = webdriver.FirefoxOptions()
        if headless:
            options.add_argument("--headless")
        
        service = Service(GeckoDriverManager().install())
        driver = webdriver.Firefox(service=service, options=options)
    
    elif browser == 'edge':
        options = webdriver.EdgeOptions()
        if headless:
            options.add_argument("--headless")
        
        service = Service(EdgeChromiumDriverManager().install())
        driver = webdriver.Edge(service=service, options=options)
    
    # Common configurations
    driver.implicitly_wait(10)  # Wait up to 10 seconds for elements
    driver.set_page_load_timeout(30)  # Timeout for page load
    driver.maximize_window()  # Maximize browser window
    
    return driver

# Test the setup
driver = setup_driver('chrome', headless=False)
driver.get("https://www.google.com")
print(f"âœ… Loaded: {driver.title}")
driver.quit()
            </pre>
        </div>
    </div>
</div>

<h2>ğŸ”„ Part 2: Building Robust Web Bots</h2>
<div style="background-color: #e8f5e8; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h3>ğŸ—ï¸ Professional Web Automation Architecture</h3>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
        <div>
            <h4>ğŸ¯ Web Bot Design Patterns:</h4>
            <div style="background: white; padding: 15px; border-radius: 5px;">
                <h5>ğŸ“ Page Object Model (POM):</h5>
                <ul>
                    <li>âœ… Separate page logic from test logic</li>
                    <li>âœ… Reusable page components</li>
                    <li>âœ… Easier maintenance</li>
                    <li>âœ… Cleaner code structure</li>
                    <li>âœ… Better collaboration</li>
                </ul>
            </div>
            
            <div style="background: #e6f7ff; padding: 15px; border-radius: 5px; margin-top: 15px;">
                <h5>ğŸ”§ Bot Components:</h5>
                <ul>
                    <li><b>Navigator:</b> Handles page navigation</li>
                    <li><b>Extractor:</b> Gets data from pages</li>
                    <li><b>Interactor:</b> Clicks, types, submits</li>
                    <li><b>Validator:</b> Checks if actions succeeded</li>
                    <li><b>Recorder:</b> Logs everything that happens</li>
                    <li><b>Recoverer:</b> Handles errors gracefully</li>
                </ul>
            </div>
            
            <div style="background: #fff3cd; padding: 15px; border-radius: 5px; margin-top: 15px;">
                <h5>ğŸ›¡ï¸ Anti-Bot Evasion:</h5>
                <ul>
                    <li>âœ… Random delays between actions</li>
                    <li>âœ… Human-like mouse movements</li>
                    <li>âœ… Rotate user agents</li>
                    <li>âœ… Use residential proxies</li>
                    <li>âœ… Handle CAPTCHAs (when ethical)</li>
                    <li>âœ… Monitor for detection</li>
                </ul>
            </div>
        </div>
        
        <div>
            <h4>ğŸ’» Professional Web Bot Structure:</h4>
            <pre style="background: #36454f; color: #fff; padding: 15px; border-radius: 5px;">
import time
import random
from datetime import datetime
from selenium.webdriver.common.by import By
from selenium.webdriver.support.ui import WebDriverWait
from selenium.webdriver.support import expected_conditions as EC
from selenium.webdriver.common.action_chains import ActionChains

class ProfessionalWebBot:
    def __init__(self, headless=False):
        self.driver = setup_driver('chrome', headless)
        self.wait = WebDriverWait(self.driver, 10)
        self.actions = ActionChains(self.driver)
        self.log = []
        
        # Configuration
        self.min_delay = 0.5
        self.max_delay = 2.0
        
    def human_delay(self):
        """Random delay to appear human"""
        delay = random.uniform(self.min_delay, self.max_delay)
        time.sleep(delay)
        self.log_event(f"Delayed for {delay:.2f} seconds")
    
    def log_event(self, event):
        """Log bot activities"""
        timestamp = datetime.now().strftime("%Y-%m-%d %H:%M:%S")
        log_entry = f"[{timestamp}] {event}"
        self.log.append(log_entry)
        print(log_entry)
    
    def find_element_safe(self, selector, by=By.CSS_SELECTOR, timeout=10):
        """Find element with proper waiting"""
        try:
            element = self.wait.until(
                EC.presence_of_element_located((by, selector))
            )
            self.log_event(f"Found element: {selector}")
            return element
        except Exception as e:
            self.log_event(f"Failed to find element {selector}: {e}")
            return None
    
    def click_element(self, selector, scroll_to=True):
        """Click element with safety checks"""
        element = self.find_element_safe(selector)
        if element:
            if scroll_to:
                self.driver.execute_script(
                    "arguments[0].scrollIntoView({behavior: 'smooth', block: 'center'});",
                    element
                )
                self.human_delay()
            
            try:
                element.click()
                self.log_event(f"Clicked: {selector}")
                self.human_delay()
                return True
            except Exception as e:
                # Try JavaScript click as fallback
                try:
                    self.driver.execute_script("arguments[0].click();", element)
                    self.log_event(f"JavaScript clicked: {selector}")
                    self.human_delay()
                    return True
                except Exception as e2:
                    self.log_event(f"Failed to click {selector}: {e2}")
                    return False
        return False
    
    def type_text(self, selector, text, clear_first=True):
        """Type text into field"""
        element = self.find_element_safe(selector)
        if element:
            if clear_first:
                element.clear()
                self.human_delay()
            
            # Type character by character (human-like)
            for char in text:
                element.send_keys(char)
                time.sleep(random.uniform(0.05, 0.15))  # Human typing speed
            
            self.log_event(f"Typed '{text}' into {selector}")
            self.human_delay()
            return True
        return False
    
    def take_screenshot(self, filename=None):
        """Take screenshot for debugging"""
        if filename is None:
            timestamp = datetime.now().strftime("%Y%m%d_%H%M%S")
            filename = f"screenshot_{timestamp}.png"
        
        self.driver.save_screenshot(filename)
        self.log_event(f"Screenshot saved: {filename}")
        return filename
    
    def execute_js(self, script, *args):
        """Execute JavaScript"""
        try:
            result = self.driver.execute_script(script, *args)
            self.log_event(f"Executed JS: {script[:50]}...")
            return result
        except Exception as e:
            self.log_event(f"JS execution failed: {e}")
            return None
    
    def handle_captcha(self):
        """Attempt to handle CAPTCHA (basic approach)"""
        self.log_event("CAPTCHA detected - attempting to handle")
        
        # Method 1: Wait for manual solve
        print("ğŸ¤– CAPTCHA detected! Please solve manually...")
        input("Press Enter after solving CAPTCHA...")
        
        # Method 2: Use CAPTCHA solving service (paid)
        # captcha_solution = solve_captcha_with_service()
        # return captcha_solution
        
        return True
    
    def save_log(self, filename="bot_log.txt"):
        """Save bot activity log"""
        with open(filename, 'w') as f:
            f.write("\n".join(self.log))
        self.log_event(f"Log saved to {filename}")

# Example usage
if __name__ == "__main__":
    bot = ProfessionalWebBot(headless=False)
    
    try:
        bot.log_event("Starting web automation")
        bot.driver.get("https://www.wikipedia.org")
        
        # Search for Python
        bot.type_text("#searchInput", "Python programming")
        bot.click_element("button[type='submit']")
        
        # Get page title
        title = bot.find_element_safe("#firstHeading")
        if title:
            print(f"ğŸ“– Page title: {title.text}")
        
        # Take screenshot
        bot.take_screenshot()
        
    except Exception as e:
        bot.log_event(f"Bot crashed: {e}")
        bot.take_screenshot("error_screenshot.png")
    
    finally:
        bot.save_log()
        bot.driver.quit()
        print("âœ… Bot finished execution")
            </pre>
        </div>
    </div>
</div>

<h2>ğŸ“Š Part 3: Data Scraping & Processing Bots</h2>
<div style="background-color: #fff0e6; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h3>ğŸ•·ï¸ Intelligent Data Collection Systems</h3>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
        <div>
            <h4>ğŸ¯ Scraping Bot Types:</h4>
            <div style="background: #f8f9fa; padding: 15px; border-radius: 5px;">
                <h5>ğŸ“ˆ Monitoring Bots:</h5>
                <ul>
                    <li>ğŸ’° Price trackers</li>
                    <li>ğŸ“Š Stock monitors</li>
                    <li>ğŸ  Real estate watchers</li>
                    <li>ğŸ« Ticket availability</li>
                    <li>ğŸ“¦ Product restock alerts</li>
                </ul>
            </div>
            
            <div style="background: #e8f5e8; padding: 15px; border-radius: 5px; margin-top: 15px;">
                <h5>ğŸ“š Data Collection Bots:</h5>
                <ul>
                    <li>ğŸ“° News aggregators</li>
                    <li>ğŸ”¬ Research data collectors</li>
                    <li>ğŸ“Š Business intelligence</li>
                    <li>ğŸ¬ Media metadata collectors</li>
                    <li>ğŸ“ˆ Market research</li>
                </ul>
            </div>
            
            <div style="background: #e6f7ff; padding: 15px; border-radius: 5px; margin-top: 15px;">
                <h5>âš¡ Real-time Bots:</h5>
                <ul>
                    <li>âš½ Live sports scores</li>
                    <li>ğŸŒ¤ï¸ Weather monitors</li>
                    <li>ğŸ“° Breaking news</li>
                    <li>ğŸ’¹ Cryptocurrency trackers</li>
                    <li>ğŸš¨ Emergency alerts</li>
                </ul>
            </div>
        </div>
        
        <div>
            <h4>ğŸ’» Intelligent Scraping Bot:</h4>
            <pre style="background: #2d3748; color: #e2e8f0; padding: 15px; border-radius: 5px;">
import json
import csv
import pandas as pd
from datetime import datetime

class DataScrapingBot(ProfessionalWebBot):
    def __init__(self, headless=True):
        super().__init__(headless)
        self.data = []
        self.scraped_pages = 0
        
    def scrape_table(self, table_selector, headers=None):
        """Scrape data from HTML table"""
        table = self.find_element_safe(table_selector)
        if not table:
            return []
        
        # Get all rows
        rows = table.find_elements(By.TAG_NAME, "tr")
        scraped_data = []
        
        for i, row in enumerate(rows):
            # Get cells
            cells = row.find_elements(By.TAG_NAME, "td")
            if not cells:  # Might be header row
                cells = row.find_elements(By.TAG_NAME, "th")
            
            row_data = [cell.text.strip() for cell in cells]
            
            if row_data:  # Only add non-empty rows
                if i == 0 and headers is None:
                    headers = row_data  # First row as headers
                else:
                    if headers and len(headers) == len(row_data):
                        scraped_data.append(dict(zip(headers, row_data)))
                    else:
                        scraped_data.append(row_data)
        
        self.log_event(f"Scraped {len(scraped_data)} rows from table")
        return scraped_data
    
    def scrape_pagination(self, base_url, page_param="page", max_pages=10, 
                         data_selector=".item", extract_func=None):
        """Scrape multiple pages with pagination"""
        all_data = []
        
        for page in range(1, max_pages + 1):
            # Construct page URL
            if "?" in base_url:
                url = f"{base_url}&{page_param}={page}"
            else:
                url = f"{base_url}?{page_param}={page}"
            
            self.log_event(f"Scraping page {page}: {url}")
            self.driver.get(url)
            self.human_delay()
            
            # Check if page has data
            items = self.find_elements_safe(data_selector)
            if not items:
                self.log_event(f"No items found on page {page}, stopping")
                break
            
            # Extract data from each item
            for item in items:
                if extract_func:
                    data = extract_func(item)
                else:
                    data = self.extract_basic_data(item)
                
                if data:
                    data['page'] = page
                    data['scraped_at'] = datetime.now().isoformat()
                    all_data.append(data)
            
            self.scraped_pages += 1
            
            # Random delay between pages
            time.sleep(random.uniform(2, 5))
        
        self.log_event(f"Scraped {len(all_data)} items from {self.scraped_pages} pages")
        return all_data
    
    def extract_basic_data(self, element):
        """Basic data extraction from element"""
        try:
            # Try to get common data points
            data = {
                'text': element.text.strip() if element.text else '',
                'href': element.get_attribute('href') or '',
                'src': element.get_attribute('src') or '',
                'alt': element.get_attribute('alt') or '',
                'title': element.get_attribute('title') or '',
                'class': element.get_attribute('class') or '',
                'id': element.get_attribute('id') or ''
            }
            return {k: v for k, v in data.items() if v}  # Remove empty values
        except Exception as e:
            self.log_event(f"Extraction failed: {e}")
            return None
    
    def save_data(self, data, format='json', filename=None):
        """Save scraped data in various formats"""
        if filename is None:
            timestamp = datetime.now().strftime("%Y%m%d_%H%M%S")
            filename = f"scraped_data_{timestamp}"
        
        if format.lower() == 'json':
            filename = f"{filename}.json"
            with open(filename, 'w', encoding='utf-8') as f:
                json.dump(data, f, indent=2, ensure_ascii=False)
        
        elif format.lower() == 'csv':
            filename = f"{filename}.csv"
            if data and isinstance(data[0], dict):
                df = pd.DataFrame(data)
                df.to_csv(filename, index=False, encoding='utf-8')
            else:
                with open(filename, 'w', newline='', encoding='utf-8') as f:
                    writer = csv.writer(f)
                    for row in data:
                        writer.writerow(row)
        
        elif format.lower() == 'excel':
            filename = f"{filename}.xlsx"
            if data and isinstance(data[0], dict):
                df = pd.DataFrame(data)
                df.to_excel(filename, index=False)
        
        self.log_event(f"Data saved to {filename} ({format})")
        return filename
    
    def monitor_changes(self, url, selector, interval_minutes=60, 
                       max_checks=24, callback=None):
        """Monitor webpage for changes"""
        previous_content = None
        checks_done = 0
        
        self.log_event(f"Starting monitoring of {url}")
        
        while checks_done < max_checks:
            self.driver.get(url)
            self.human_delay()
            
            element = self.find_element_safe(selector)
            current_content = element.text if element else None
            
            if previous_content is None:
                self.log_event("First check completed")
            elif current_content != previous_content:
                self.log_event("ğŸ¯ CHANGE DETECTED!")
                
                if callback:
                    callback(previous_content, current_content)
                else:
                    self.send_notification(f"Change detected on {url}")
            
            previous_content = current_content
            checks_done += 1
            
            if checks_done < max_checks:
                self.log_event(f"Next check in {interval_minutes} minutes")
                time.sleep(interval_minutes * 60)

# Example: Price monitoring bot
class PriceMonitorBot(DataScrapingBot):
    def monitor_product_price(self, product_url, price_selector, 
                            target_price=None, check_interval_hours=6):
        """Monitor product price and alert if drops below target"""
        self.log_event(f"Starting price monitor for {product_url}")
        
        while True:
            self.driver.get(product_url)
            self.human_delay()
            
            price_element = self.find_element_safe(price_selector)
            if price_element:
                price_text = price_element.text
                # Extract numeric price (basic implementation)
                import re
                price_match = re.search(r'[\d,]+\.?\d*', price_text)
                
                if price_match:
                    current_price = float(price_match.group().replace(',', ''))
                    self.log_event(f"Current price: \${current_price:.2f}")
                    
                    if target_price and current_price <= target_price:
                        self.send_alert(f"ğŸ¯ Price alert! \${current_price:.2f} <= \${target_price:.2f}")
                        break
            
            self.log_event(f"Next check in {check_interval_hours} hours")
            time.sleep(check_interval_hours * 3600)
            </pre>
        </div>
    </div>
</div>

<h2>ğŸ” Part 4: Authentication & Session Management</h2>
<div style="background-color: #f5f5f5; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h3>ğŸ”‘ Handling Logins & Maintaining Sessions</h3>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
        <div>
            <h4>ğŸ¯ Authentication Methods:</h4>
            <div style="background: white; padding: 15px; border-radius: 5px;">
                <h5>ğŸ”‘ Common Login Types:</h5>
                <ul>
                    <li>ğŸ“ <b>Form-based:</b> Username/password</li>
                    <li>ğŸ” <b>OAuth:</b> "Login with Google/Facebook"</li>
                    <li>ğŸ“± <b>2FA:</b> Two-factor authentication</li>
                    <li>ğŸ‘¤ <b>SSO:</b> Single sign-on</li>
                    <li>ğŸ« <b>Token-based:</b> API tokens</li>
                    <li>ğŸ“§ <b>Email magic links:</b> No password</li>
                </ul>
            </div>
            
            <div style="background: #fff3cd; padding: 15px; border-radius: 5px; margin-top: 15px;">
                <h5>âš ï¸ Security Considerations:</h5>
                <ul>
                    <li>âœ… Store credentials securely (environment variables)</li>
                    <li>âœ… Use app passwords when available</li>
                    <li>âœ… Never hardcode passwords</li>
                    <li>âœ… Rotate credentials regularly</li>
                    <li>âœ… Monitor for unauthorized access</li>
                    <li>âŒ Don't share bot credentials</li>
                </ul>
            </div>
            
            <div style="background: #e8f5e8; padding: 15px; border-radius: 5px; margin-top: 15px;">
                <h5>ğŸ”„ Session Management:</h5>
                <ul>
                    <li>âœ… Save cookies for reuse</li>
                    <li>âœ… Handle session timeouts</li>
                    <li>âœ… Detect login failures</li>
                    <li>âœ… Implement re-login logic</li>
                    <li>âœ… Monitor session health</li>
                    <li>âœ… Clean up expired sessions</li>
                </ul>
            </div>
        </div>
        
        <div>
            <h4>ğŸ’» Authentication Bot:</h4>
            <pre style="background: #36454f; color: #fff; padding: 15px; border-radius: 5px;">
import pickle
import os
import json
from datetime import datetime, timedelta

class AuthenticationBot(ProfessionalWebBot):
    def __init__(self, headless=True):
        super().__init__(headless)
        self.credentials = {}
        self.session_file = "session.pkl"
        self.cookies_dir = "cookies"
        
        # Create cookies directory
        os.makedirs(self.cookies_dir, exist_ok=True)
    
    def load_credentials(self, service_name):
        """Load credentials from secure storage"""
        # Method 1: Environment variables
        username = os.getenv(f"{service_name.upper()}_USERNAME")
        password = os.getenv(f"{service_name.upper()}_PASSWORD")
        
        if username and password:
            self.credentials[service_name] = {
                'username': username,
                'password': password
            }
            return True
        
        # Method 2: Config file (less secure)
        config_file = f"config/{service_name}_credentials.json"
        if os.path.exists(config_file):
            with open(config_file) as f:
                self.credentials[service_name] = json.load(f)
            return True
        
        self.log_event(f"No credentials found for {service_name}")
        return False
    
    def save_cookies(self, service_name):
        """Save cookies for future sessions"""
        cookies = self.driver.get_cookies()
        cookie_file = os.path.join(self.cookies_dir, f"{service_name}_cookies.pkl")
        
        with open(cookie_file, 'wb') as f:
            pickle.dump(cookies, f)
        
        self.log_event(f"Cookies saved for {service_name}")
        return True
    
    def load_cookies(self, service_name):
        """Load saved cookies"""
        cookie_file = os.path.join(self.cookies_dir, f"{service_name}_cookies.pkl")
        
        if os.path.exists(cookie_file):
            with open(cookie_file, 'rb') as f:
                cookies = pickle.load(f)
            
            # Load cookies into browser
            for cookie in cookies:
                try:
                    self.driver.add_cookie(cookie)
                except Exception as e:
                    self.log_event(f"Failed to load cookie: {e}")
            
            self.log_event(f"Cookies loaded for {service_name}")
            return True
        
        return False
    
    def login_with_form(self, login_url, username_selector, password_selector,
                       submit_selector, service_name, check_selector=None):
        """Login using form-based authentication"""
        self.log_event(f"Attempting login to {service_name}")
        
        # Try to load cookies first
        if self.load_cookies(service_name):
            self.driver.get(login_url)
            self.human_delay()
            
            # Check if still logged in
            if check_selector:
                logged_in = self.find_element_safe(check_selector)
                if logged_in:
                    self.log_event(f"Already logged in to {service_name} via cookies")
                    return True
        
        # Load credentials
        if service_name not in self.credentials:
            if not self.load_credentials(service_name):
                return False
        
        creds = self.credentials[service_name]
        
        # Navigate to login page
        self.driver.get(login_url)
        self.human_delay()
        
        # Fill login form
        self.type_text(username_selector, creds['username'])
        self.type_text(password_selector, creds['password'])
        
        # Submit form
        if submit_selector:
            self.click_element(submit_selector)
        else:
            # Try pressing Enter
            password_field = self.find_element_safe(password_selector)
            if password_field:
                password_field.send_keys(Keys.RETURN)
        
        self.human_delay()
        
        # Check if login successful
        if check_selector:
            logged_in = self.find_element_safe(check_selector, timeout=5)
            if logged_in:
                self.log_event(f"âœ… Successfully logged in to {service_name}")
                self.save_cookies(service_name)
                return True
            else:
                self.log_event(f"âŒ Login failed for {service_name}")
                return False
        
        return True  # Assume success if no check selector
    
    def handle_2fa(self, method='prompt'):
        """Handle two-factor authentication"""
        self.log_event("2FA required")
        
        if method == 'prompt':
            code = input("Enter 2FA code: ")
            
            # Try common 2FA input selectors
            selectors = [
                'input[name="code"]',
                'input[name="verification_code"]',
                'input[name="2fa_code"]',
                'input[type="text"][placeholder*="code"]'
            ]
            
            for selector in selectors:
                if self.type_text(selector, code):
                    self.click_element('button[type="submit"]')
                    self.human_delay()
                    return True
        
        elif method == 'email':
            # Monitor email for 2FA code
            # This requires email automation integration
            pass
        
        elif method == 'authenticator':
            # Generate TOTP code
            # Requires pyotp library
            pass
        
        return False
    
    def maintain_session(self, service_name, check_url, check_selector,
                        login_function, check_interval_minutes=30):
        """Maintain active session"""
        self.log_event(f"Starting session maintenance for {service_name}")
        
        while True:
            # Check if session is still valid
            self.driver.get(check_url)
            self.human_delay()
            
            is_logged_in = bool(self.find_element_safe(check_selector, timeout=5))
            
            if not is_logged_in:
                self.log_event(f"Session expired for {service_name}, re-logging in")
                login_function()
            else:
                self.log_event(f"Session still active for {service_name}")
            
            # Wait before next check
            time.sleep(check_interval_minutes * 60)

# Example: LinkedIn automation bot
class LinkedInBot(AuthenticationBot):
    def __init__(self):
        super().__init__(headless=False)
        self.base_url = "https://www.linkedin.com"
    
    def login(self):
        """Login to LinkedIn"""
        return self.login_with_form(
            login_url=f"{self.base_url}/login",
            username_selector='#username',
            password_selector='#password',
            submit_selector='button[type="submit"]',
            service_name='linkedin',
            check_selector='input[aria-label="Search"]'  # Search box indicates logged in
        )
    
    def scrape_profile(self, profile_url):
        """Scrape LinkedIn profile data"""
        if not self.is_logged_in():
            self.log_event("Not logged in, logging in first")
            self.login()
        
        self.driver.get(profile_url)
        self.human_delay()
        
        profile_data = {}
        
        # Extract basic info
        selectors = {
            'name': 'h1.text-heading-xlarge',
            'headline': 'div.text-body-medium.break-words',
            'location': 'span.text-body-small.inline.t-black--light.break-words',
            'connections': 'span.t-bold',
            'about': 'section.pv-about-section div'
        }
        
        for key, selector in selectors.items():
            element = self.find_element_safe(selector)
            if element:
                profile_data[key] = element.text.strip()
        
        # Take screenshot
        self.take_screenshot(f"linkedin_profile_{datetime.now().strftime('%Y%m%d')}.png")
        
        return profile_data
    
    def is_logged_in(self):
        """Check if logged in to LinkedIn"""
        self.driver.get(f"{self.base_url}/feed")
        self.human_delay()
        
        # Check for logged-in indicators
        indicators = [
            'input[aria-label="Search"]',
            'nav.global-nav',
            'a[data-test-global-nav-link="messaging"]'
        ]
        
        for indicator in indicators:
            if self.find_element_safe(indicator, timeout=3):
                return True
        
        return False
            </pre>
        </div>
    </div>
</div>

<h2>ğŸ¯ Today's Hands-On Exercises (3 Hours)</h2>
<div style="background-color: #f0f8ff; padding: 20px; margin: 15px 0; border-radius: 10px;">
    
    <div style="background: #e8f5e8; padding: 15px; border-radius: 5px; margin-bottom: 15px;">
        <h3>ğŸ† Exercise 1: Job Application Bot (60 minutes)</h3>
        <p><b>Build a bot that automates job applications</b></p>
        
        <b>Features:</b>
        <ol>
            <li>ğŸ” Search job boards (Indeed, LinkedIn, Glassdoor)</li>
            <li>ğŸ“„ Auto-fill application forms with your resume data</li>
            <li>ğŸ“§ Track application status and follow-ups</li>
            <li>ğŸ¯ Filter jobs by keywords, salary, location</li>
            <li>ğŸ“Š Generate application statistics dashboard</li>
            <li>â° Schedule daily job searches</li>
        </ol>
        
        <div style="background: white; padding: 10px; border-radius: 3px; margin-top: 10px;">
            <b>ğŸ’¡ Resume Data Structure:</b>
            <pre style="background: #f5f5f5; padding: 10px;">
resume_data = {
    "personal": {
        "name": "John Doe",
        "email": "john@example.com",
        "phone": "+1-234-567-8900",
        "location": "New York, NY",
        "linkedin": "linkedin.com/in/johndoe",
        "portfolio": "johndoe.dev"
    },
    "experience": [
        {
            "title": "Software Engineer",
            "company": "Tech Corp",
            "dates": "2020-2023",
            "description": "Built web applications using Python..."
        }
    ],
    "education": [...],
    "skills": ["Python", "JavaScript", "SQL", "Docker"],
    "projects": [...]
}
            </pre>
        </div>
    </div>
    
    <div style="background: #ffeaa7; padding: 15px; border-radius: 5px; margin-bottom: 15px;">
        <h3>ğŸ† Exercise 2: Social Media Manager Bot (60 minutes)</h3>
        <p><b>Create a bot that manages multiple social media accounts</b></p>
        
        <b>Requirements:</b>
        <ol>
            <li>ğŸ“± Post to multiple platforms (Twitter, LinkedIn, Facebook)</li>
            <li>ğŸ“… Schedule posts in advance</li>
            <li>ğŸ“Š Analyze engagement metrics</li>
            <li>ğŸ” Monitor mentions and comments</li>
            <li>ğŸ¤– Auto-respond to common questions</li>
            <li>ğŸ“ˆ Generate performance reports</li>
        </ol>
        
        <div style="background: white; padding: 10px; border-radius: 3px; margin-top: 10px;">
            <b>ğŸ¦ Twitter Automation Example:</b>
            <pre style="background: #f5f5f5; padding: 10px;">
class TwitterBot(AuthenticationBot):
    def tweet(self, message, image_path=None):
        """Post a tweet"""
        self.driver.get("https://twitter.com/compose/tweet")
        self.human_delay()
        
        # Type tweet
        tweet_box = self.find_element_safe('div[data-testid="tweetTextarea_0"]')
        if tweet_box:
            tweet_box.click()
            self.human_delay()
            
            # Twitter uses contenteditable div
            self.driver.execute_script(f"""
                arguments[0].innerText = '{message}';
            """, tweet_box)
            
            # Add image if provided
            if image_path and os.path.exists(image_path):
                image_input = self.find_element_safe('input[data-testid="fileInput"]')
                if image_input:
                    image_input.send_keys(os.path.abspath(image_path))
                    self.human_delay()
            
            # Click tweet button
            tweet_button = self.find_element_safe('div[data-testid="tweetButton"]')
            if tweet_button:
                tweet_button.click()
                self.human_delay()
                return True
        
        return False
    
    def get_mentions(self):
        """Get recent mentions"""
        self.driver.get("https://twitter.com/notifications/mentions")
        self.human_delay()
        
        mentions = []
        tweet_elements = self.find_elements_safe('article[data-testid="tweet"]')
        
        for tweet in tweet_elements:
            try:
                username = tweet.find_element(By.CSS_SELECTOR, 'span').text
                text = tweet.find_element(By.CSS_SELECTOR, 'div[lang]').text
                mentions.append({'username': username, 'text': text})
            except:
                continue
        
        return mentions
            </pre>
        </div>
    </div>
    
    <div style="background: #ffcccb; padding: 15px; border-radius: 5px;">
        <h3>ğŸ† Exercise 3: E-commerce Price Warrior (60 minutes)</h3>
        <p><b>Build an intelligent price comparison and tracking bot</b></p>
        
        <b>Features to Build:</b>
        <ul>
            <li>ğŸ’° Track prices across multiple retailers (Amazon, eBay, Walmart)</li>
            <li>ğŸ“‰ Set price drop alerts and automatic purchase</li>
            <li>ğŸ“Š Historical price tracking and prediction</li>
            <li>ğŸ” Product availability monitoring</li>
            <li>ğŸ“¦ Auto-add to cart when conditions met</li>
            <li>ğŸ“ˆ Generate price trend reports</li>
            <li>ğŸ¤– Handle captchas and anti-bot measures</li>
            <li>ğŸŒ Multi-region price comparison</li>
        </ul>
        
        <b>Advanced Challenges:</b>
        <ul>
            <li>ğŸ§  AI-powered deal prediction</li>
            <li>ğŸ”„ Automatic coupon code application</li>
            <li>ğŸ“± Mobile app notifications</li>
            <li>ğŸ‘¥ Group buy coordination</li>
            <li>ğŸšš Shipping cost optimization</li>
            <li>ğŸ’° Cashback and reward tracking</li>
        </ul>
    </div>
</div>

<h2>ğŸ  Homework Assignment</h2>
<div style="background-color: #fff0e6; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h3>ğŸŒ Build a "Web Research Assistant"</h3>
    
    <b>ğŸ¯ Project Goal:</b>
    <p>Create an intelligent bot that can conduct web research, gather information from multiple sources, and compile comprehensive reports automatically.</p>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 15px 0;">
        <div>
            <h4>ğŸ” Research Capabilities:</h4>
            <ul>
                <li><b>Multi-source data collection:</b> Websites, APIs, databases</li>
                <li><b>Intelligent search:</b> Context-aware queries</li>
                <li><b>Data validation:</b> Cross-reference multiple sources</li>
                <li><b>Information synthesis:</b> Combine data from different sources</li>
                <li><b>Report generation:</b> Automated document creation</li>
                <li><b>Citation management:</b> Track sources and references</li>
            </ul>
        </div>
        
        <div>
            <h4>ğŸ”§ Technical Requirements:</h4>
            <ul>
                <li>Implement at least 5 different website integrations</li>
                <li>Handle authentication for paywalled sources (ethically)</li>
                <li>Implement data quality scoring</li>
                <li>Create export formats (PDF, Word, Markdown)</li>
                <li>Add plagiarism checking</li>
                <li>Include source credibility assessment</li>
            </ul>
        </div>
    </div>
    
    <b>ğŸ“‹ Research Workflow:</b>
    <div style="background: #f8f9fa; padding: 15px; border-radius: 5px; margin: 10px 0;">
        <ol>
            <li><b>Topic Analysis:</b> Understand research requirements</li>
            <li><b>Source Identification:</b> Find relevant websites/databases</li>
            <li><b>Data Collection:</b> Scrape/API calls for information</li>
            <li><b>Data Processing:</b> Clean, validate, organize data</li>
            <li><b>Analysis:</b> Identify patterns, insights, trends</li>
            <li><b>Synthesis:</b> Combine information from multiple sources</li>
            <li><b>Report Generation:</b> Create formatted document</li>
            <li><b>Quality Check:</b> Verify accuracy and completeness</li>
        </ol>
    </div>
    
    <b>ğŸ¨ Example Research Report:</b>
    <pre style="background: #2d3748; color: #e2e8f0; padding: 15px; border-radius: 5px; margin: 10px 0;">
ğŸ“š RESEARCH REPORT: Python Web Frameworks 2023
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Generated: November 15, 2023 | Sources: 12 | Pages: 8

ğŸ“Š EXECUTIVE SUMMARY:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â€¢ Django remains most popular (38% market share)
â€¢ FastAPI shows fastest growth (+215% YoY)
â€¢ Flask preferred for microservices (42% usage)
â€¢ Average salary: $127,000 (Django) vs $134,000 (FastAPI)

ğŸ“ˆ MARKET TRENDS:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. **Django** (Est. 2005)
   â€¢ Pros: Batteries included, excellent documentation
   â€¢ Cons: Monolithic, steep learning curve
   â€¢ Use cases: CMS, e-commerce, social networks

2. **Flask** (Est. 2010)
   â€¢ Pros: Lightweight, flexible, easy to learn
   â€¢ Cons: Less built-in functionality
   â€¢ Use cases: APIs, microservices, prototyping

3. **FastAPI** (Est. 2018)
   â€¢ Pros: High performance, automatic docs, async
   â€¢ Cons: Younger ecosystem, less mature
   â€¢ Use cases: High-performance APIs, real-time apps

ğŸ“Š DATA SOURCES:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
âœ… Stack Overflow Developer Survey 2023 (5,000+ responses)
âœ… GitHub Octoverse Report (repository analysis)
âœ… Indeed Job Listings (salary data)
âœ… PyPI Download Statistics (adoption metrics)
âœ… Hacker News Discussions (community sentiment)

ğŸ¯ RECOMMENDATIONS:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. **Choose Django if:** Building complex applications
2. **Choose Flask if:** Need flexibility and simplicity  
3. **Choose FastAPI if:** Performance is critical

ğŸ“ APPENDIX:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â€¢ Full data tables (see data.json)
â€¢ Source citations (sources.txt)
â€¢ Methodology (methodology.md)
    </pre>
</div>

<h2>ğŸ“š Key Learning Points</h2>
<div style="background-color: #e8f5e8; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px;">
        <div>
            <h3>âœ… Web Automation Mastered:</h3>
            <ul>
                <li>ğŸ¤– Advanced Selenium techniques and patterns</li>
                <li>ğŸ—ï¸ Professional bot architecture (Page Object Model)</li>
                <li>ğŸ•·ï¸ Intelligent data scraping and processing</li>
                <li>ğŸ” Secure authentication and session management</li>
                <li>âš¡ Real-time monitoring and change detection</li>
                <li>ğŸ“Š Data collection from multiple sources</li>
                <li>ğŸ›¡ï¸ Anti-bot evasion techniques</li>
                <li>ğŸ“ˆ Performance optimization for web bots</li>
            </ul>
        </div>
        
        <div>
            <h3>ğŸš€ Real-World Applications:</h3>
            <ul>
                <li>ğŸ’¼ Job application automation</li>
                <li>ğŸ“± Social media management</li>
                <li>ğŸ’° E-commerce price tracking</li>
                <li>ğŸ” Web research and data collection</li>
                <li>ğŸ“Š Market intelligence gathering</li>
                <li>ğŸ“° News aggregation and monitoring</li>
                <li>ğŸ¯ Competitive analysis</li>
                <li>ğŸ“ˆ Business intelligence automation</li>
            </ul>
        </div>
    </div>
</div>

<div style="background-color: #4A90E2; color: white; padding: 20px; margin: 20px 0; border-radius: 10px; text-align: center;">
    <h2>ğŸ‰ Congratulations, Web Ninja!</h2>
    <p>You can now build sophisticated web bots that automate complex tasks across the entire internet!</p>
    <div style="display: flex; justify-content: center; gap: 20px; margin-top: 15px;">
        <span>ğŸŒ Navigate any website</span>
        <span>ğŸ“Š Collect any data</span>
        <span>ğŸ¤– Automate any task</span>
    </div>
</div>

<h3>ğŸ› ï¸ Web Automation Cheat Sheet</h3>
<pre style="background: #2d3748; color: #e2e8f0; padding: 15px; border-radius: 5px; overflow-x: auto;">
# =========== WEB AUTOMATION CHEAT SHEET ===========

# 1. Setup with WebDriver Manager
from selenium import webdriver
from selenium.webdriver.chrome.service import Service
from selenium.webdriver.chrome.options import Options
from webdriver_manager.chrome import ChromeDriverManager

options = Options()
options.add_argument("--headless")  # Run without GUI
options.add_argument("--no-sandbox")
options.add_argument("--disable-dev-shm-usage")

service = Service(ChromeDriverManager().install())
driver = webdriver.Chrome(service=service, options=options)

# 2. Common Waits
from selenium.webdriver.support.ui import WebDriverWait
from selenium.webdriver.support import expected_conditions as EC
from selenium.webdriver.common.by import By

wait = WebDriverWait(driver, 10)

# Wait for element to be present
element = wait.until(EC.presence_of_element_located((By.ID, "element_id")))

# Wait for element to be clickable
element = wait.until(EC.element_to_be_clickable((By.CSS_SELECTOR, ".button")))

# Wait for text to be present
wait.until(EC.text_to_be_present_in_element((By.ID, "status"), "Complete"))

# 3. Element Finding Strategies
# By ID
driver.find_element(By.ID, "username")

# By CSS Selector (most powerful)
driver.find_element(By.CSS_SELECTOR, "input[name='email']")
driver.find_element(By.CSS_SELECTOR, ".container > div:first-child")
driver.find_element(By.CSS_SELECTOR, "a[href*='login']")

# By XPath (when CSS isn't enough)
driver.find_element(By.XPATH, "//button[text()='Submit']")
driver.find_element(By.XPATH, "//div[@class='container']//input")

# By other methods
driver.find_element(By.NAME, "search")
driver.find_element(By.CLASS_NAME, "btn-primary")
driver.find_element(By.TAG_NAME, "input")
driver.find_element(By.LINK_TEXT, "Click Here")
driver.find_element(By.PARTIAL_LINK_TEXT, "Click")

# 4. Actions Chain (Complex Interactions)
from selenium.webdriver.common.action_chains import ActionChains
from selenium.webdriver.common.keys import Keys

actions = ActionChains(driver)

# Mouse actions
actions.move_to_element(element).perform()
actions.click_and_hold(element).move_by_offset(100, 0).release().perform()
actions.context_click(element).perform()  # Right click
actions.double_click(element).perform()

# Keyboard actions
actions.send_keys(Keys.TAB).perform()
actions.key_down(Keys.CONTROL).send_keys('c').key_up(Keys.CONTROL).perform()

# Complex chain
(actions
 .move_to_element(menu)
 .click()
 .send_keys("search term")
 .send_keys(Keys.ENTER)
 .perform())

# 5. JavaScript Execution
# Scroll to element
driver.execute_script("arguments[0].scrollIntoView(true);", element)

# Get element text via JS
text = driver.execute_script("return arguments[0].innerText;", element)

# Set attribute
driver.execute_script("arguments[0].setAttribute('data-custom', 'value');", element)

# Click element (bypasses visibility checks)
driver.execute_script("arguments[0].click();", element)

# Get all cookies
cookies = driver.execute_script("return document.cookie;")

# 6. File Downloads
# Chrome download configuration
options = Options()
prefs = {
    "download.default_directory": "/path/to/downloads",
    "download.prompt_for_download": False,
    "download.directory_upgrade": True,
    "safebrowsing.enabled": True
}
options.add_experimental_option("prefs", prefs)

# 7. Handling Alerts/Popups
# Accept alert
alert = driver.switch_to.alert
alert.accept()

# Dismiss alert
alert.dismiss()

# Get alert text
text = alert.text

# Send text to prompt
alert.send_keys("text")
alert.accept()

# 8. Multiple Windows/Tabs
# Get current window handle
main_window = driver.current_window_handle

# Get all window handles
all_windows = driver.window_handles

# Switch to new window
for window in all_windows:
    if window != main_window:
        driver.switch_to.window(window)
        break

# Close current window and switch back
driver.close()
driver.switch_to.window(main_window)

# 9. Iframe Handling
# Switch to iframe by index
driver.switch_to.frame(0)

# Switch to iframe by name or ID
driver.switch_to.frame("iframe_name")

# Switch back to main content
driver.switch_to.default_content()

# Switch to parent frame
driver.switch_to.parent_frame()

# 10. Proxy Configuration
options = Options()
options.add_argument('--proxy-server=http://proxy_ip:proxy_port')

# With authentication
options.add_argument('--proxy-server=http://username:password@proxy_ip:proxy_port')

# 11. Mobile Emulation
from selenium.webdriver.common.desired_capabilities import DesiredCapabilities

mobile_emulation = {
    "deviceMetrics": { "width": 360, "height": 640, "pixelRatio": 3.0 },
    "userAgent": "Mozilla/5.0 (iPhone; CPU iPhone OS 10_3 like Mac OS X)"
}

options = Options()
options.add_experimental_option("mobileEmulation", mobile_emulation)

# 12. Browser Logs
# Enable logging
options = Options()
options.set_capability("goog:loggingPrefs", {'browser': 'ALL'})

# Get logs
logs = driver.get_log('browser')
for log in logs:
    print(log)

# 13. Performance Metrics
# Get page load time
navigation_start = driver.execute_script(
    "return window.performance.timing.navigationStart"
)
load_end = driver.execute_script(
    "return window.performance.timing.loadEventEnd"
)
load_time = load_end - navigation_start
print(f"Page load time: {load_time}ms")

# 14. Element State Checks
def is_element_present(driver, selector):
    try:
        driver.find_element(By.CSS_SELECTOR, selector)
        return True
    except:
        return False

def is_element_visible(driver, selector):
    try:
        element = driver.find_element(By.CSS_SELECTOR, selector)
        return element.is_displayed()
    except:
        return False

def is_element_enabled(driver, selector):
    try:
        element = driver.find_element(By.CSS_SELECTOR, selector)
        return element.is_enabled()
    except:
        return False

def is_element_selected(driver, selector):
    try:
        element = driver.find_element(By.CSS_SELECTOR, selector)
        return element.is_selected()
    except:
        return False

# 15. Screenshot Strategies
# Full page screenshot
driver.save_screenshot("full_page.png")

# Element screenshot
element.screenshot("element.png")

# Screenshot with timestamp
from datetime import datetime
timestamp = datetime.now().strftime("%Y%m%d_%H%M%S")
driver.save_screenshot(f"screenshot_{timestamp}.png")

# 16. Cookie Management
# Get all cookies
cookies = driver.get_cookies()

# Get specific cookie
cookie = driver.get_cookie("session_id")

# Add cookie
driver.add_cookie({
    'name': 'cookie_name',
    'value': 'cookie_value',
    'domain': 'example.com'
})

# Delete cookie
driver.delete_cookie("cookie_name")

# Delete all cookies
driver.delete_all_cookies()

# 17. Human-like Behavior
import random
import time

def human_delay(min_seconds=0.5, max_seconds=2.0):
    delay = random.uniform(min_seconds, max_seconds)
    time.sleep(delay)

def human_type(element, text):
    """Type text character by character like a human"""
    for char in text:
        element.send_keys(char)
        time.sleep(random.uniform(0.05, 0.2))  # Human typing speed

def human_scroll(driver):
    """Scroll like a human (smooth, random)"""
    scroll_amount = random.randint(200, 800)
    driver.execute_script(f"window.scrollBy({{top: {scroll_amount}, behavior: 'smooth'}});")
    human_delay(0.5, 1.5)

# 18. Bot Detection Avoidance
# Rotate user agents
user_agents = [
    "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36",
    "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36",
    "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36"
]

options = Options()
options.add_argument(f'user-agent={random.choice(user_agents)}')

# Disable automation flags
options.add_experimental_option("excludeSwitches", ["enable-automation"])
options.add_experimental_option('useAutomationExtension', False)

# Override navigator.webdriver
driver.execute_script("Object.defineProperty(navigator, 'webdriver', {get: () => undefined})")

# 19. Error Recovery
def safe_execute(driver, function, max_retries=3):
    """Execute function with retry logic"""
    for attempt in range(max_retries):
        try:
            return function()
        except Exception as e:
            print(f"Attempt {attempt + 1} failed: {e}")
            if attempt == max_retries - 1:
                raise
            time.sleep(2 ** attempt)  # Exponential backoff

# 20. Bot Monitoring Dashboard
class BotMonitor:
    def __init__(self):
        self.start_time = time.time()
        self.pages_visited = 0
        self.actions_performed = 0
        self.errors_encountered = 0
    
    def page_visited(self):
        self.pages_visited += 1
    
    def action_performed(self):
        self.actions_performed += 1
    
    def error_occurred(self):
        self.errors_encountered += 1
    
    def get_stats(self):
        uptime = time.time() - self.start_time
        return {
            'uptime_hours': uptime / 3600,
            'pages_per_hour': self.pages_visited / (uptime / 3600),
            'actions_per_page': self.actions_performed / self.pages_visited if self.pages_visited else 0,
            'error_rate': self.errors_encountered / self.actions_performed if self.actions_performed else 0
        }
</pre>
`
},
            "9-35": {
    icon: "fa-brain",
    title: "AI & Machine Learning Bots",
    html: `<h1>Month 9, Week 35: AI & Machine Learning Bots</h1>
<p>Today we become <b>AI Wizards</b>! We'll learn how to create intelligent bots that can understand language, recognize images, make predictions, and learn from data!</p>

<div class="analogy-box">
    <b>Analogy: The Smart Apprentice Bot ğŸ§ ğŸ“</b><br/>
    
    AI Bots = Apprentices that learn from examples<br/>
    Training Data = The apprentice's textbooks and lessons<br/>
    Models = The apprentice's knowledge and skills<br/>
    Predictions = The apprentice's educated guesses<br/>
    Learning = The apprentice improving over time<br/>
    Neural Networks = The apprentice's brain connections<br/>
    APIs = Asking expert AI systems for help
</div>

<h2>ğŸ§  Part 1: Introduction to AI & ML for Bots</h2>
<div style="background-color: #f0f8ff; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h3>ğŸ¤– Making Bots Smart with Artificial Intelligence</h3>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 15px 0;">
        <div>
            <h4>ğŸ¯ What AI Can Add to Bots:</h4>
            <div style="background: white; padding: 15px; border-radius: 5px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px;">
                    <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 10px; border-radius: 3px; text-align: center;">
                        ğŸ’¬ Natural Language
                    </div>
                    <div style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white; padding: 10px; border-radius: 3px; text-align: center;">
                        ğŸ–¼ï¸ Image Recognition
                    </div>
                    <div style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); color: white; padding: 10px; border-radius: 3px; text-align: center;">
                        ğŸ“ˆ Predictions
                    </div>
                    <div style="background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%); color: white; padding: 10px; border-radius: 3px; text-align: center;">
                        ğŸ¯ Recommendations
                    </div>
                    <div style="background: linear-gradient(135deg, #fa709a 0%, #fee140 100%); color: white; padding: 10px; border-radius: 3px; text-align: center;">
                        ğŸ” Pattern Detection
                    </div>
                    <div style="background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%); color: white; padding: 10px; border-radius: 3px; text-align: center;">
                        ğŸ¤” Decision Making
                    </div>
                </div>
            </div>
            
            <div style="background: #fff3cd; padding: 15px; border-radius: 5px; margin-top: 15px;">
                <h5>ğŸ“Š AI Bot Statistics:</h5>
                <ul>
                    <li>ğŸ§  <b>37%</b> of organizations have implemented AI</li>
                    <li>ğŸ’° <b>$309.6B</b> global AI market by 2026</li>
                    <li>ğŸ“ˆ <b>270%</b> growth in AI adoption in 4 years</li>
                    <li>ğŸ¤– <b>85%</b> of customer interactions handled by bots by 2025</li>
                    <li>ğŸ¯ <b>44%</b> of organizations saving costs with AI</li>
                </ul>
            </div>
        </div>
        
        <div>
            <h4>ğŸ”§ AI Toolbox for Python:</h4>
            <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 15px; border-radius: 5px;">
                <h5>ğŸ¯ Essential AI Libraries:</h5>
                <pre style="background: rgba(255,255,255,0.1); padding: 10px; border-radius: 3px;">
# Core Machine Learning
pip install scikit-learn pandas numpy

# Deep Learning
pip install tensorflow keras pytorch

# Natural Language Processing
pip install nltk spacy transformers

# Computer Vision
pip install opencv-python pillow

# AI APIs (Cloud Services)
pip install openai google-cloud-aiplatform

# Reinforcement Learning
pip install gym stable-baselines3

# Specialized ML
pip install xgboost lightgbm catboost

# Data Visualization
pip install matplotlib seaborn plotly
                </pre>
            </div>
            
            <div style="background: #f8f9fa; padding: 15px; border-radius: 5px; margin-top: 15px;">
                <h5>ğŸ¯ Choose Your Approach:</h5>
                <ul>
                    <li>âœ… <b>Build from scratch:</b> Full control, learn deeply</li>
                    <li>âœ… <b>Use pre-trained models:</b> Fast, powerful, easy</li>
                    <li>âœ… <b>Use AI APIs:</b> No ML knowledge needed</li>
                    <li>âœ… <b>Fine-tune models:</b> Customize existing models</li>
                </ul>
            </div>
        </div>
    </div>
</div>

<h2>ğŸ’¬ Part 2: Natural Language Processing (NLP) Bots</h2>
<div style="background-color: #e8f5e8; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h3>ğŸ—£ï¸ Bots That Understand and Generate Language</h3>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
        <div>
            <h4>ğŸ¯ NLP Applications for Bots:</h4>
            <div style="background: white; padding: 15px; border-radius: 5px;">
                <h5>ğŸ“‹ Common NLP Tasks:</h5>
                <ul>
                    <li>ğŸ’¬ <b>Chatbots:</b> Conversational AI</li>
                    <li>ğŸ“§ <b>Email classification:</b> Spam vs important</li>
                    <li>ğŸ“° <b>Text summarization:</b> Quick insights</li>
                    <li>ğŸ˜Š <b>Sentiment analysis:</b> Positive/negative tone</li>
                    <li>ğŸ”‘ <b>Keyword extraction:</b> Main topics</li>
                    <li>ğŸŒ <b>Language translation:</b> Multi-lingual bots</li>
                </ul>
            </div>
            
            <div style="background: #e6f7ff; padding: 15px; border-radius: 5px; margin-top: 15px;">
                <h5>ğŸ”¤ Text Processing Pipeline:</h5>
                <ol>
                    <li><b>Tokenization:</b> Split text into words/tokens</li>
                    <li><b>Normalization:</b> Convert to lowercase, remove punctuation</li>
                    <li><b>Stopword Removal:</b> Remove common words (the, and, is)</li>
                    <li><b>Stemming/Lemmatization:</b> Reduce words to root form</li>
                    <li><b>Vectorization:</b> Convert text to numbers</li>
                    <li><b>Model Training/Prediction:</b> Apply ML algorithms</li>
                </ol>
            </div>
            
            <div style="background: #fff3cd; padding: 15px; border-radius: 5px; margin-top: 15px;">
                <h5>ğŸš€ Pre-trained NLP Models:</h5>
                <ul>
                    <li><b>BERT:</b> Google's powerful language model</li>
                    <li><b>GPT-3/4:</b> OpenAI's text generation</li>
                    <li><b>spaCy:</b> Industrial-strength NLP</li>
                    <li><b>NLTK:</b> Academic/research focused</li>
                    <li><b>Hugging Face:</b> Thousands of pre-trained models</li>
                </ul>
            </div>
        </div>
        
        <div>
            <h4>ğŸ’» NLP Bot Examples:</h4>
            <pre style="background: #2d3748; color: #e2e8f0; padding: 15px; border-radius: 5px;">
import nltk
from nltk.sentiment import SentimentIntensityAnalyzer
from sklearn.feature_extraction.text import TfidfVectorizer
from sklearn.naive_bayes import MultinomialNB
import spacy

# Download required NLTK data
nltk.download('vader_lexicon', quiet=True)
nltk.download('punkt', quiet=True)
nltk.download('stopwords', quiet=True)

class NLPBot:
    def __init__(self):
        # Initialize sentiment analyzer
        self.sia = SentimentIntensityAnalyzer()
        
        # Load spaCy for advanced NLP
        try:
            self.nlp = spacy.load("en_core_web_sm")
        except:
            print("âš ï¸ spaCy model not found. Install with: python -m spacy download en_core_web_sm")
            self.nlp = None
        
        # Initialize ML components
        self.vectorizer = TfidfVectorizer(max_features=1000, stop_words='english')
        self.classifier = MultinomialNB()
        self.is_trained = False
    
    def analyze_sentiment(self, text):
        """Analyze text sentiment (positive/negative/neutral)"""
        scores = self.sia.polarity_scores(text)
        
        # Determine sentiment label
        if scores['compound'] >= 0.05:
            sentiment = "positive"
        elif scores['compound'] <= -0.05:
            sentiment = "negative"
        else:
            sentiment = "neutral"
        
        return {
            'sentiment': sentiment,
            'scores': scores,
            'positive': scores['pos'],
            'negative': scores['neg'],
            'neutral': scores['neu'],
            'compound': scores['compound']
        }
    
    def extract_keywords(self, text, top_n=10):
        """Extract most important keywords"""
        if self.nlp:
            doc = self.nlp(text)
            
            # Filter for nouns and proper nouns
            keywords = []
            for token in doc:
                if token.pos_ in ['NOUN', 'PROPN'] and not token.is_stop:
                    keywords.append(token.text.lower())
            
            # Count frequency
            from collections import Counter
            keyword_counts = Counter(keywords)
            
            return keyword_counts.most_common(top_n)
        
        # Fallback to simple word frequency
        words = nltk.word_tokenize(text.lower())
        words = [w for w in words if w.isalpha() and w not in nltk.corpus.stopwords.words('english')]
        
        from collections import Counter
        return Counter(words).most_common(top_n)
    
    def train_classifier(self, texts, labels):
        """Train a text classifier"""
        # Convert texts to numerical features
        X = self.vectorizer.fit_transform(texts)
        
        # Train classifier
        self.classifier.fit(X, labels)
        self.is_trained = True
        
        print(f"âœ… Classifier trained on {len(texts)} samples")
        return True
    
    def predict_category(self, text):
        """Predict category for new text"""
        if not self.is_trained:
            print("âŒ Classifier not trained yet")
            return None
        
        # Convert text to features
        X = self.vectorizer.transform([text])
        
        # Make prediction
        prediction = self.classifier.predict(X)[0]
        probability = self.classifier.predict_proba(X).max()
        
        return {
            'category': prediction,
            'confidence': probability,
            'text': text[:50] + '...' if len(text) > 50 else text
        }
    
    def summarize_text(self, text, num_sentences=3):
        """Generate text summary"""
        # Simple extractive summarization
        sentences = nltk.sent_tokenize(text)
        
        if len(sentences) <= num_sentences:
            return text
        
        # Score sentences by word frequency
        word_freq = {}
        words = nltk.word_tokenize(text.lower())
        
        for word in words:
            if word.isalpha():
                word_freq[word] = word_freq.get(word, 0) + 1
        
        # Score sentences
        sentence_scores = {}
        for sentence in sentences:
            for word in nltk.word_tokenize(sentence.lower()):
                if word in word_freq:
                    sentence_scores[sentence] = sentence_scores.get(sentence, 0) + word_freq[word]
        
        # Get top sentences
        top_sentences = sorted(sentence_scores.items(), key=lambda x: x[1], reverse=True)[:num_sentences]
        
        # Return in original order
        summary_sentences = [sentence for sentence in sentences 
                           if sentence in dict(top_sentences)]
        
        return ' '.join(summary_sentences)

# Example: Customer Support Bot
class CustomerSupportBot(NLPBot):
    def __init__(self):
        super().__init__()
        self.intents = {
            'greeting': ['hello', 'hi', 'hey', 'greetings'],
            'problem': ['issue', 'problem', 'error', 'not working', 'broken'],
            'billing': ['payment', 'invoice', 'charge', 'bill', 'refund'],
            'technical': ['install', 'setup', 'configure', 'connection'],
            'goodbye': ['bye', 'goodbye', 'thanks', 'thank you']
        }
    
    def detect_intent(self, user_message):
        """Detect user intent from message"""
        message_lower = user_message.lower()
        
        for intent, keywords in self.intents.items():
            if any(keyword in message_lower for keyword in keywords):
                return intent
        
        return 'unknown'
    
    def generate_response(self, user_message):
        """Generate appropriate response"""
        intent = self.detect_intent(user_message)
        sentiment = self.analyze_sentiment(user_message)
        
        responses = {
            'greeting': "Hello! How can I help you today?",
            'problem': "I'm sorry to hear you're having issues. Let me help you resolve that.",
            'billing': "I can help with billing questions. Could you provide your account email?",
            'technical': "For technical support, please describe the issue in detail.",
            'goodbye': "Thank you for contacting us. Have a great day!",
            'unknown': "I'm not sure I understand. Could you rephrase that?"
        }
        
        response = responses.get(intent, responses['unknown'])
        
        # Add empathy for negative sentiment
        if sentiment['sentiment'] == 'negative':
            response = "I understand this is frustrating. " + response
        
        return {
            'response': response,
            'intent': intent,
            'sentiment': sentiment['sentiment'],
            'confidence': 0.85  # Placeholder
        }

# Usage example
if __name__ == "__main__":
    # Initialize bot
    bot = CustomerSupportBot()
    
    # Test messages
    test_messages = [
        "Hello, I need help with my account",
        "The app is not working properly",
        "I was charged twice for my subscription",
        "How do I install the software?",
        "Thank you for your help!"
    ]
    
    for message in test_messages:
        print(f"\nğŸ‘¤ User: {message}")
        response = bot.generate_response(message)
        print(f"ğŸ¤– Bot: {response['response']}")
        print(f"   Intent: {response['intent']}, Sentiment: {response['sentiment']}")
            </pre>
        </div>
    </div>
</div>

<h2>ğŸ–¼ï¸ Part 3: Computer Vision Bots</h2>
<div style="background-color: #fff0e6; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h3>ğŸ‘ï¸ Bots That Can See and Understand Images</h3>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
        <div>
            <h4>ğŸ¯ Computer Vision Applications:</h4>
            <div style="background: white; padding: 15px; border-radius: 5px;">
                <h5>ğŸ“¸ Common CV Tasks:</h5>
                <ul>
                    <li>ğŸ‘¤ <b>Face recognition:</b> Identify people</li>
                    <li>ğŸ“„ <b>Document scanning:</b> Read text from images</li>
                    <li>ğŸš— <b>Object detection:</b> Find objects in images</li>
                    <li>ğŸ·ï¸ <b>Image classification:</b> Categorize images</li>
                    <li>ğŸ¨ <b>Style transfer:</b> Apply artistic styles</li>
                    <li>ğŸ” <b>Visual search:</b> Find similar images</li>
                </ul>
            </div>
            
            <div style="background: #e8f5e8; padding: 15px; border-radius: 5px; margin-top: 15px;">
                <h5>ğŸ› ï¸ Popular CV Libraries:</h5>
                <ul>
                    <li><b>OpenCV:</b> Industry standard, 2500+ algorithms</li>
                    <li><b>TensorFlow/Keras:</b> Deep learning for CV</li>
                    <li><b>PyTorch:</b> Research-focused, flexible</li>
                    <li><b>PIL/Pillow:</b> Basic image processing</li>
                    <li><b>YOLO:</b> Real-time object detection</li>
                    <li><b>EasyOCR:</b> Easy text recognition</li>
                </ul>
            </div>
            
            <div style="background: #e6f7ff; padding: 15px; border-radius: 5px; margin-top: 15px;">
                <h5>ğŸ“Š Pre-trained Models:</h5>
                <ul>
                    <li><b>ImageNet:</b> 1000+ object categories</li>
                    <li><b>COCO:</b> Common objects in context</li>
                    <li><b>MNIST:</b> Handwritten digits</li>
                    <li><b>Fashion-MNIST:</b> Clothing items</li>
                    <li><b>Face recognition models:</b> VGGFace, FaceNet</li>
                </ul>
            </div>
        </div>
        
        <div>
            <h4>ğŸ’» Computer Vision Bot:</h4>
            <pre style="background: #36454f; color: #fff; padding: 15px; border-radius: 5px;">
import cv2
import numpy as np
from PIL import Image
import pytesseract
import easyocr
import os

class ComputerVisionBot:
    def __init__(self):
        # Initialize EasyOCR for text recognition
        self.reader = easyocr.Reader(['en'])
        
        # Load pre-trained models
        self.face_cascade = cv2.CascadeClassifier(
            cv2.data.haarcascades + 'haarcascade_frontalface_default.xml'
        )
        
        # Pre-trained object detection (YOLO or MobileNet-SSD)
        self.init_object_detector()
    
    def init_object_detector(self):
        """Initialize object detection model"""
        try:
            # Using MobileNet-SSD (lightweight, good for common objects)
            prototxt = "MobileNetSSD_deploy.prototxt.txt"
            model = "MobileNetSSD_deploy.caffemodel"
            
            if os.path.exists(prototxt) and os.path.exists(model):
                self.net = cv2.dnn.readNetFromCaffe(prototxt, model)
                self.CLASSES = ["background", "aeroplane", "bicycle", "bird", "boat",
                              "bottle", "bus", "car", "cat", "chair", "cow", "diningtable",
                              "dog", "horse", "motorbike", "person", "pottedplant", "sheep",
                              "sofa", "train", "tvmonitor"]
                self.object_detection_available = True
            else:
                print("âš ï¸ Object detection model files not found")
                self.object_detection_available = False
        except Exception as e:
            print(f"âŒ Object detector initialization failed: {e}")
            self.object_detection_available = False
    
    def detect_faces(self, image_path):
        """Detect faces in an image"""
        # Read image
        img = cv2.imread(image_path)
        if img is None:
            return {"error": "Could not read image"}
        
        # Convert to grayscale
        gray = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)
        
        # Detect faces
        faces = self.face_cascade.detectMultiScale(
            gray,
            scaleFactor=1.1,
            minNeighbors=5,
            minSize=(30, 30)
        )
        
        # Draw rectangles around faces
        for (x, y, w, h) in faces:
            cv2.rectangle(img, (x, y), (x+w, y+h), (255, 0, 0), 2)
        
        # Save output image
        output_path = image_path.replace('.', '_faces.')
        cv2.imwrite(output_path, img)
        
        return {
            'faces_found': len(faces),
            'output_image': output_path,
            'face_locations': faces.tolist() if len(faces) > 0 else []
        }
    
    def detect_objects(self, image_path, confidence_threshold=0.5):
        """Detect objects in image"""
        if not self.object_detection_available:
            return {"error": "Object detection not available"}
        
        # Read image
        image = cv2.imread(image_path)
        if image is None:
            return {"error": "Could not read image"}
        
        (h, w) = image.shape[:2]
        
        # Prepare image for detection
        blob = cv2.dnn.blobFromImage(cv2.resize(image, (300, 300)), 0.007843, 
                                    (300, 300), 127.5)
        
        # Perform detection
        self.net.setInput(blob)
        detections = self.net.forward()
        
        detected_objects = []
        
        # Process detections
        for i in np.arange(0, detections.shape[2]):
            confidence = detections[0, 0, i, 2]
            
            if confidence > confidence_threshold:
                idx = int(detections[0, 0, i, 1])
                label = self.CLASSES[idx]
                
                # Calculate bounding box
                box = detections[0, 0, i, 3:7] * np.array([w, h, w, h])
                (startX, startY, endX, endY) = box.astype("int")
                
                detected_objects.append({
                    'label': label,
                    'confidence': float(confidence),
                    'bounding_box': [int(startX), int(startY), int(endX), int(endY)]
                })
                
                # Draw on image
                cv2.rectangle(image, (startX, startY), (endX, endY), (0, 255, 0), 2)
                y = startY - 15 if startY - 15 > 15 else startY + 15
                cv2.putText(image, f"{label}: {confidence:.2f}", (startX, y),
                          cv2.FONT_HERSHEY_SIMPLEX, 0.5, (0, 255, 0), 2)
        
        # Save output
        output_path = image_path.replace('.', '_objects.')
        cv2.imwrite(output_path, image)
        
        return {
            'objects_found': len(detected_objects),
            'detected_objects': detected_objects,
            'output_image': output_path
        }
    
    def extract_text(self, image_path):
        """Extract text from image using OCR"""
        # Using EasyOCR (more accurate than Tesseract for many cases)
        result = self.reader.readtext(image_path)
        
        extracted_text = []
        for detection in result:
            bbox, text, confidence = detection
            extracted_text.append({
                'text': text,
                'confidence': float(confidence),
                'bounding_box': bbox
            })
        
        # Also try with Tesseract as backup
        if not extracted_text:
            try:
                text = pytesseract.image_to_string(Image.open(image_path))
                if text.strip():
                    extracted_text.append({
                        'text': text.strip(),
                        'confidence': 0.7,
                        'bounding_box': None
                    })
            except:
                pass
        
        return {
            'text_found': len(extracted_text) > 0,
            'extracted_text': extracted_text,
            'full_text': ' '.join([item['text'] for item in extracted_text])
        }
    
    def compare_images(self, image1_path, image2_path, method='histogram'):
        """Compare two images for similarity"""
        img1 = cv2.imread(image1_path)
        img2 = cv2.imread(image2_path)
        
        if img1 is None or img2 is None:
            return {"error": "Could not read images"}
        
        # Resize images to same size if different
        if img1.shape != img2.shape:
            img2 = cv2.resize(img2, (img1.shape[1], img1.shape[0]))
        
        if method == 'histogram':
            # Compare color histograms
            hist1 = cv2.calcHist([img1], [0, 1, 2], None, [8, 8, 8], [0, 256, 0, 256, 0, 256])
            hist2 = cv2.calcHist([img2], [0, 1, 2], None, [8, 8, 8], [0, 256, 0, 256, 0, 256])
            
            cv2.normalize(hist1, hist1)
            cv2.normalize(hist2, hist2)
            
            similarity = cv2.compareHist(hist1, hist2, cv2.HISTCMP_CORREL)
            
        elif method == 'ssim':
            # Structural Similarity Index
            from skimage.metrics import structural_similarity as ssim
            
            # Convert to grayscale
            gray1 = cv2.cvtColor(img1, cv2.COLOR_BGR2GRAY)
            gray2 = cv2.cvtColor(img2, cv2.COLOR_BGR2GRAY)
            
            similarity, _ = ssim(gray1, gray2, full=True)
        
        else:
            # Mean Squared Error
            mse = np.mean((img1 - img2) ** 2)
            similarity = 1 / (1 + mse)  # Convert to similarity score
        
        return {
            'similarity_score': float(similarity),
            'similarity_percentage': float(similarity * 100),
            'method': method
        }

# Example: Document Processing Bot
class DocumentBot(ComputerVisionBot):
    def process_document(self, image_path):
        """Process document image: extract text, detect structure"""
        results = {}
        
        # Extract text
        text_results = self.extract_text(image_path)
        results['text'] = text_results
        
        # Detect if it's a form
        if any(keyword in text_results.get('full_text', '').lower() 
               for keyword in ['form', 'application', 'signature', 'date']):
            results['document_type'] = 'form'
        elif any(keyword in text_results.get('full_text', '').lower() 
                 for keyword in ['invoice', 'bill', 'total', '$']):
            results['document_type'] = 'invoice'
        elif any(keyword in text_results.get('full_text', '').lower() 
                 for keyword in ['receipt', 'payment', 'thank you']):
            results['document_type'] = 'receipt'
        else:
            results['document_type'] = 'general'
        
        # Detect signatures
        face_results = self.detect_faces(image_path)
        if face_results.get('faces_found', 0) > 0:
            results['has_signature'] = True
            results['faces'] = face_results
        else:
            results['has_signature'] = False
        
        return results
    
    def extract_invoice_data(self, image_path):
        """Extract structured data from invoice"""
        text_results = self.extract_text(image_path)
        full_text = text_results.get('full_text', '').lower()
        
        # Simple pattern matching for invoice data
        import re
        
        invoice_data = {
            'total_amount': None,
            'date': None,
            'invoice_number': None,
            'vendor': None
        }
        
        # Find total amount
        total_patterns = [
            r'total.*?(\$?\d+[,.]?\d*[,.]?\d*)',
            r'amount.*?due.*?(\$?\d+[,.]?\d*[,.]?\d*)',
            r'balance.*?(\$?\d+[,.]?\d*[,.]?\d*)'
        ]
        
        for pattern in total_patterns:
            match = re.search(pattern, full_text)
            if match:
                invoice_data['total_amount'] = match.group(1)
                break
        
        # Find date
        date_patterns = [
            r'date.*?(\d{1,2}[/-]\d{1,2}[/-]\d{2,4})',
            r'(\d{1,2}[/-]\d{1,2}[/-]\d{2,4})',
            r'(\w+ \d{1,2},? \d{4})'
        ]
        
        for pattern in date_patterns:
            match = re.search(pattern, full_text)
            if match:
                invoice_data['date'] = match.group(1)
                break
        
        return invoice_data

# Usage example
if __name__ == "__main__":
    # Initialize bot
    cv_bot = ComputerVisionBot()
    
    # Example image paths (you would use real images)
    test_image = "example.jpg"  # Replace with actual image path
    
    if os.path.exists(test_image):
        # Detect faces
        faces = cv_bot.detect_faces(test_image)
        print(f"ğŸ‘¤ Faces found: {faces.get('faces_found', 0)}")
        
        # Extract text
        text = cv_bot.extract_text(test_image)
        if text['text_found']:
            print(f"ğŸ“ Text extracted: {text['full_text'][:100]}...")
        
        # Detect objects if model available
        if cv_bot.object_detection_available:
            objects = cv_bot.detect_objects(test_image)
            print(f"ğŸ¯ Objects detected: {objects.get('objects_found', 0)}")
            for obj in objects.get('detected_objects', []):
                print(f"  - {obj['label']} ({obj['confidence']:.2%})")
    else:
        print("âš ï¸ Test image not found. Create an 'example.jpg' file to test.")
            </pre>
        </div>
    </div>
</div>

<h2>ğŸ¤– Part 4: AI-Powered Decision Making Bots</h2>
<div style="background-color: #f5f5f5; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h3>ğŸ¯ Bots That Learn and Make Smart Decisions</h3>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
        <div>
            <h4>ğŸ¯ Types of AI Decision Bots:</h4>
            <div style="background: white; padding: 15px; border-radius: 5px;">
                <h5>ğŸ“Š Predictive Bots:</h5>
                <ul>
                    <li>ğŸ“ˆ <b>Stock trading:</b> Buy/sell predictions</li>
                    <li>ğŸ›’ <b>Recommendation systems:</b> "You might also like..."</li>
                    <li>ğŸ“‰ <b>Demand forecasting:</b> Predict future sales</li>
                    <li>ğŸ¥ <b>Medical diagnosis:</b> Disease prediction</li>
                    <li>ğŸ”® <b>Trend prediction:</b> What's next?</li>
                </ul>
            </div>
            
            <div style="background: #e8f5e8; padding: 15px; border-radius: 5px; margin-top: 15px;">
                <h5>âš¡ Reinforcement Learning Bots:</h5>
                <ul>
                    <li>ğŸ® <b>Game playing:</b> Learn to play games</li>
                    <li>ğŸ¤– <b>Robot control:</b> Learn physical tasks</li>
                    <li>ğŸš— <b>Autonomous driving:</b> Learn to drive</li>
                    <li>ğŸ“Š <b>Resource allocation:</b> Optimize resources</li>
                    <li>ğŸ”„ <b>Process optimization:</b> Improve efficiency</li>
                </ul>
            </div>
            
            <div style="background: #e6f7ff; padding: 15px; border-radius: 5px; margin-top: 15px;">
                <h5>ğŸ§  Neural Network Bots:</h5>
                <ul>
                    <li>ğŸ¨ <b>Creative bots:</b> Generate art, music, text</li>
                    <li>ğŸ” <b>Anomaly detection:</b> Find unusual patterns</li>
                    <li>ğŸ”„ <b>Sequence prediction:</b> Next word, next move</li>
                    <li>ğŸ§© <b>Pattern recognition:</b> Complex pattern finding</li>
                    <li>ğŸŒ <b>Language models:</b> Understand/generate text</li>
                </ul>
            </div>
        </div>
        
        <div>
            <h4>ğŸ’» AI Decision Bot:</h4>
            <pre style="background: #2d3748; color: #e2e8f0; padding: 15px; border-radius: 5px;">
import numpy as np
import pandas as pd
from sklearn.model_selection import train_test_split
from sklearn.ensemble import RandomForestClassifier, RandomForestRegressor
from sklearn.preprocessing import LabelEncoder, StandardScaler
import tensorflow as tf
from tensorflow import keras

class AIDecisionBot:
    def __init__(self):
        self.models = {}
        self.scalers = {}
        self.encoders = {}
        
    def train_classifier(self, data, target_column, model_name='default'):
        """Train a classification model"""
        # Prepare data
        X = data.drop(columns=[target_column])
        y = data[target_column]
        
        # Encode categorical features
        X_encoded = self._encode_features(X)
        
        # Split data
        X_train, X_test, y_train, y_test = train_test_split(
            X_encoded, y, test_size=0.2, random_state=42
        )
        
        # Scale features
        scaler = StandardScaler()
        X_train_scaled = scaler.fit_transform(X_train)
        X_test_scaled = scaler.transform(X_test)
        
        self.scalers[model_name] = scaler
        
        # Train model
        model = RandomForestClassifier(n_estimators=100, random_state=42)
        model.fit(X_train_scaled, y_train)
        
        # Evaluate
        train_score = model.score(X_train_scaled, y_train)
        test_score = model.score(X_test_scaled, y_test)
        
        self.models[model_name] = model
        
        return {
            'model_name': model_name,
            'train_accuracy': train_score,
            'test_accuracy': test_score,
            'features_used': list(X.columns),
            'target_classes': list(y.unique())
        }
    
    def train_regressor(self, data, target_column, model_name='regression'):
        """Train a regression model for predictions"""
        X = data.drop(columns=[target_column])
        y = data[target_column]
        
        # Encode features
        X_encoded = self._encode_features(X)
        
        # Split data
        X_train, X_test, y_train, y_test = train_test_split(
            X_encoded, y, test_size=0.2, random_state=42
        )
        
        # Scale features
        scaler = StandardScaler()
        X_train_scaled = scaler.fit_transform(X_train)
        X_test_scaled = scaler.transform(X_test)
        
        self.scalers[model_name] = scaler
        
        # Train model
        model = RandomForestRegressor(n_estimators=100, random_state=42)
        model.fit(X_train_scaled, y_train)
        
        # Evaluate
        train_score = model.score(X_train_scaled, y_train)
        test_score = model.score(X_test_scaled, y_test)
        
        self.models[model_name] = model
        
        return {
            'model_name': model_name,
            'train_r2': train_score,
            'test_r2': test_score,
            'features_used': list(X.columns)
        }
    
    def _encode_features(self, X):
        """Encode categorical features"""
        X_encoded = X.copy()
        
        for column in X_encoded.select_dtypes(include=['object']).columns:
            if column not in self.encoders:
                self.encoders[column] = LabelEncoder()
                X_encoded[column] = self.encoders[column].fit_transform(X_encoded[column])
            else:
                # Handle new categories during prediction
                try:
                    X_encoded[column] = self.encoders[column].transform(X_encoded[column])
                except ValueError:
                    # If new category, assign -1 (or handle differently)
                    X_encoded[column] = -1
        
        return X_encoded
    
    def predict(self, input_data, model_name='default'):
        """Make prediction using trained model"""
        if model_name not in self.models:
            return {"error": f"Model '{model_name}' not found"}
        
        model = self.models[model_name]
        scaler = self.scalers.get(model_name)
        
        # Prepare input data
        input_df = pd.DataFrame([input_data])
        input_encoded = self._encode_features(input_df)
        
        if scaler:
            input_scaled = scaler.transform(input_encoded)
        else:
            input_scaled = input_encoded
        
        # Make prediction
        prediction = model.predict(input_scaled)[0]
        
        if hasattr(model, 'predict_proba'):
            probabilities = model.predict_proba(input_scaled)[0]
            confidence = max(probabilities)
            return {
                'prediction': prediction,
                'confidence': float(confidence),
                'probabilities': dict(zip(model.classes_, probabilities))
            }
        else:
            return {'prediction': prediction}
    
    def train_neural_network(self, X, y, model_name='neural_net'):
        """Train a simple neural network"""
        # Encode features and labels
        X_encoded = self._encode_features(X)
        
        # Encode labels if classification
        if y.dtype == 'object':
            label_encoder = LabelEncoder()
            y_encoded = label_encoder.fit_transform(y)
            self.encoders[f'{model_name}_target'] = label_encoder
            num_classes = len(np.unique(y_encoded))
            y_final = keras.utils.to_categorical(y_encoded, num_classes)
        else:
            y_final = y.values
        
        # Split data
        X_train, X_test, y_train, y_test = train_test_split(
            X_encoded, y_final, test_size=0.2, random_state=42
        )
        
        # Scale features
        scaler = StandardScaler()
        X_train_scaled = scaler.fit_transform(X_train)
        X_test_scaled = scaler.transform(X_test)
        
        self.scalers[model_name] = scaler
        
        # Build neural network
        model = keras.Sequential([
            keras.layers.Dense(64, activation='relu', input_shape=(X_train.shape[1],)),
            keras.layers.Dropout(0.2),
            keras.layers.Dense(32, activation='relu'),
            keras.layers.Dropout(0.2),
            keras.layers.Dense(16, activation='relu'),
            keras.layers.Dense(y_final.shape[1] if len(y_final.shape) > 1 else 1, 
                             activation='softmax' if len(y_final.shape) > 1 else 'linear')
        ])
        
        # Compile model
        if len(y_final.shape) > 1:
            model.compile(optimizer='adam',
                         loss='categorical_crossentropy',
                         metrics=['accuracy'])
        else:
            model.compile(optimizer='adam',
                         loss='mse',
                         metrics=['mae'])
        
        # Train model
        history = model.fit(X_train_scaled, y_train,
                          epochs=50,
                          batch_size=32,
                          validation_split=0.2,
                          verbose=0)
        
        # Evaluate
        test_loss, test_metric = model.evaluate(X_test_scaled, y_test, verbose=0)
        
        self.models[model_name] = model
        
        return {
            'model_name': model_name,
            'test_loss': float(test_loss),
            'test_metric': float(test_metric),
            'history': history.history
        }

# Example: Trading Bot
class TradingBot(AIDecisionBot):
    def __init__(self):
        super().__init__()
        self.historical_data = pd.DataFrame()
    
    def collect_market_data(self, symbol='AAPL', days=365):
        """Collect historical market data"""
        # In reality, you'd use an API like yfinance
        # This is a simplified example
        import yfinance as yf
        
        stock = yf.Ticker(symbol)
        hist = stock.history(period=f"{days}d")
        
        # Calculate features
        hist['Returns'] = hist['Close'].pct_change()
        hist['MA_5'] = hist['Close'].rolling(window=5).mean()
        hist['MA_20'] = hist['Close'].rolling(window=20).mean()
        hist['Volatility'] = hist['Returns'].rolling(window=20).std()
        
        # Create target: 1 if price goes up next day, 0 otherwise
        hist['Target'] = (hist['Close'].shift(-1) > hist['Close']).astype(int)
        
        # Drop NaN values
        hist = hist.dropna()
        
        self.historical_data = hist
        return hist
    
    def prepare_trading_features(self):
        """Prepare features for trading model"""
        if self.historical_data.empty:
            return None
        
        features = self.historical_data[['Returns', 'MA_5', 'MA_20', 'Volatility']]
        target = self.historical_data['Target']
        
        return features, target
    
    def make_trading_decision(self, current_features):
        """Make buy/sell/hold decision"""
        if 'trading_model' not in self.models:
            return {"error": "Trading model not trained"}
        
        prediction = self.predict(current_features, model_name='trading_model')
        
        if 'error' in prediction:
            return prediction
        
        # Convert prediction to trading decision
        if prediction['prediction'] == 1 and prediction.get('confidence', 0) > 0.7:
            decision = 'BUY'
        elif prediction['prediction'] == 0 and prediction.get('confidence', 0) > 0.7:
            decision = 'SELL'
        else:
            decision = 'HOLD'
        
        return {
            'decision': decision,
            'prediction': prediction['prediction'],
            'confidence': prediction.get('confidence', 0),
            'timestamp': pd.Timestamp.now()
        }
    
    def backtest_strategy(self, initial_balance=10000):
        """Backtest trading strategy on historical data"""
        if self.historical_data.empty:
            return {"error": "No historical data"}
        
        balance = initial_balance
        position = 0  # 0 = no position, 1 = long position
        trades = []
        
        for i in range(20, len(self.historical_data)):  # Start after enough data for indicators
            # Get features for this day
            day_data = self.historical_data.iloc[i]
            features = {
                'Returns': day_data['Returns'],
                'MA_5': day_data['MA_5'],
                'MA_20': day_data['MA_20'],
                'Volatility': day_data['Volatility']
            }
            
            # Get trading decision
            decision_result = self.make_trading_decision(features)
            
            if 'error' in decision_result:
                continue
            
            price = day_data['Close']
            decision = decision_result['decision']
            
            # Execute trades
            if decision == 'BUY' and position == 0:
                # Buy
                position = 1
                buy_price = price
                trades.append({
                    'type': 'BUY',
                    'price': buy_price,
                    'date': self.historical_data.index[i]
                })
            
            elif decision == 'SELL' and position == 1:
                # Sell
                position = 0
                sell_price = price
                profit = sell_price - buy_price
                balance += profit
                
                trades.append({
                    'type': 'SELL',
                    'price': sell_price,
                    'profit': profit,
                    'date': self.historical_data.index[i]
                })
        
        # Calculate final results
        final_value = balance + (position * self.historical_data['Close'].iloc[-1])
        total_return = ((final_value - initial_balance) / initial_balance) * 100
        
        return {
            'initial_balance': initial_balance,
            'final_value': final_value,
            'total_return_percent': total_return,
            'total_trades': len([t for t in trades if t['type'] == 'SELL']),
            'winning_trades': len([t for t in trades if t.get('profit', 0) > 0]),
            'losing_trades': len([t for t in trades if t.get('profit', 0) < 0]),
            'trades': trades[-10:]  # Last 10 trades
        }

# Usage example
if __name__ == "__main__":
    # Example: Simple classification bot
    print("ğŸ§  Training a simple AI decision bot...")
    
    # Create sample data
    np.random.seed(42)
    n_samples = 1000
    
    # Features
    age = np.random.randint(18, 70, n_samples)
    income = np.random.normal(50000, 15000, n_samples)
    credit_score = np.random.normal(700, 100, n_samples)
    
    # Target: Loan approval (1 = approved, 0 = denied)
    # Simple rule: Approve if income > 45000 and credit_score > 650
    loan_approved = ((income > 45000) & (credit_score > 650)).astype(int)
    
    # Add some noise
    noise = np.random.choice([0, 1], n_samples, p=[0.9, 0.1])
    loan_approved = np.where(noise == 1, 1 - loan_approved, loan_approved)
    
    # Create DataFrame
    data = pd.DataFrame({
        'Age': age,
        'Income': income,
        'CreditScore': credit_score,
        'LoanApproved': loan_approved
    })
    
    # Initialize and train bot
    bot = AIDecisionBot()
    results = bot.train_classifier(data, 'LoanApproved', model_name='loan_approval')
    
    print(f"âœ… Model trained with {results['test_accuracy']:.1%} accuracy")
    
    # Make predictions
    test_cases = [
        {'Age': 30, 'Income': 60000, 'CreditScore': 750},
        {'Age': 25, 'Income': 35000, 'CreditScore': 600},
        {'Age': 45, 'Income': 80000, 'CreditScore': 720}
    ]
    
    print("\nğŸ“Š Predictions:")
    for i, case in enumerate(test_cases, 1):
        prediction = bot.predict(case, model_name='loan_approval')
        decision = "APPROVED" if prediction['prediction'] == 1 else "DENIED"
        print(f"Case {i}: {decision} ({prediction.get('confidence', 0):.1%} confidence)")
            </pre>
        </div>
    </div>
</div>

<h2>ğŸ¯ Today's Hands-On Exercises (3 Hours)</h2>
<div style="background-color: #f0f8ff; padding: 20px; margin: 15px 0; border-radius: 10px;">
    
    <div style="background: #e8f5e8; padding: 15px; border-radius: 5px; margin-bottom: 15px;">
        <h3>ğŸ† Exercise 1: Smart Content Moderator Bot (60 minutes)</h3>
        <p><b>Build an AI bot that moderates user-generated content</b></p>
        
        <b>Features:</b>
        <ol>
            <li>ğŸ” Detect inappropriate text (profanity, hate speech)</li>
            <li>ğŸ–¼ï¸ Identify inappropriate images (NSFW content)</li>
            <li>ğŸ¤– Auto-flag suspicious content for human review</li>
            <li>ğŸ“Š Learn from moderation decisions to improve</li>
            <li>ğŸ“ˆ Generate moderation reports and statistics</li>
            <li>âš¡ Real-time content screening</li>
        </ol>
        
        <div style="background: white; padding: 10px; border-radius: 3px; margin-top: 10px;">
            <b>ğŸ’¡ Using Pre-trained Models:</b>
            <pre style="background: #f5f5f5; padding: 10px;">
# For text moderation, you can use:
# 1. Perspective API (Google)
# 2. Hugging Face toxicity models
# 3. Custom trained classifiers

# For image moderation:
# 1. Google Cloud Vision SafeSearch
# 2. AWS Rekognition Content Moderation
# 3. Custom NSFW detection models

class ContentModeratorBot:
    def moderate_text(self, text):
        """Moderate text content"""
        # Check for profanity (simple example)
        profanity_list = ["badword1", "badword2", "hate"]  # Add actual list
        
        found_profanity = []
        for word in profanity_list:
            if word in text.lower():
                found_profanity.append(word)
        
        # Analyze sentiment
        sentiment = self.analyze_sentiment(text)
        
        # Make moderation decision
        if found_profanity or sentiment['sentiment'] == 'negative':
            return {
                'status': 'FLAGGED',
                'reason': f"Profanity: {found_profanity}, Sentiment: {sentiment['sentiment']}",
                'confidence': 0.85
            }
        
        return {'status': 'APPROVED', 'confidence': 0.95}
            </pre>
        </div>
    </div>
    
    <div style="background: #ffeaa7; padding: 15px; border-radius: 5px; margin-bottom: 15px;">
        <h3>ğŸ† Exercise 2: Personal Learning Assistant Bot (60 minutes)</h3>
        <p><b>Create an AI bot that helps you learn and study</b></p>
        
        <b>Requirements:</b>
        <ol>
            <li>ğŸ“š Generate study questions from text material</li>
            <li>âœ… Auto-grade answers and provide explanations</li>
            <li>ğŸ“Š Track learning progress and identify weak areas</li>
            <li>ğŸ¯ Recommend study materials based on performance</li>
            <li>â° Create personalized study schedules</li>
            <li>ğŸ’¬ Answer questions about study material</li>
        </ol>
        
        <div style="background: white; padding: 10px; border-radius: 3px; margin-top: 10px;">
            <b>ğŸ§  Question Generation Example:</b>
            <pre style="background: #f5f5f5; padding: 10px;">
class LearningAssistantBot(NLPBot):
    def generate_quiz(self, text, num_questions=5):
        """Generate quiz questions from text"""
        # Extract key sentences
        sentences = nltk.sent_tokenize(text)
        
        # For each key sentence, create a question
        questions = []
        for sentence in sentences[:num_questions]:
            # Simple question generation: replace subject with "What"
            words = nltk.word_tokenize(sentence)
            tagged = nltk.pos_tag(words)
            
            # Find nouns to create questions about
            nouns = [word for word, pos in tagged if pos.startswith('NN')]
            
            if nouns:
                question = f"What is {nouns[0]}?"
                answer = sentence
                
                questions.append({
                    'question': question,
                    'answer': answer,
                    'hint': f"Related to: {', '.join(nouns[:3])}"
                })
        
        return questions
    
    def check_answer(self, question, user_answer, correct_answer):
        """Check if answer is correct using NLP"""
        # Compare semantic similarity
        user_doc = self.nlp(user_answer.lower())
        correct_doc = self.nlp(correct_answer.lower())
        
        similarity = user_doc.similarity(correct_doc)
        
        # Also check for keyword matching
        user_keywords = set([token.text for token in user_doc if not token.is_stop])
        correct_keywords = set([token.text for token in correct_doc if not token.is_stop])
        
        keyword_overlap = len(user_keywords.intersection(correct_keywords)) / len(correct_keywords)
        
        final_score = (similarity + keyword_overlap) / 2
        
        return {
            'score': final_score,
            'is_correct': final_score > 0.6,
            'feedback': self.generate_feedback(final_score, user_answer, correct_answer)
        }
            </pre>
        </div>
    </div>
    
    <div style="background: #ffcccb; padding: 15px; border-radius: 5px;">
        <h3>ğŸ† Exercise 3: AI-Powered Business Analyst Bot (60 minutes)</h3>
        <p><b>Build an intelligent bot that analyzes business data</b></p>
        
        <b>Features to Build:</b>
        <ul>
            <li>ğŸ“Š Analyze sales data and predict future trends</li>
            <li>ğŸ‘¥ Customer segmentation using clustering algorithms</li>
            <li>ğŸ“ˆ Generate automated business intelligence reports</li>
            <li>ğŸ” Detect anomalies and unusual patterns in data</li>
            <li>ğŸ¯ Provide actionable business recommendations</li>
            <li>ğŸ“± Create interactive dashboards with insights</li>
            <li>ğŸ’¬ Natural language querying of business data</li>
            <li>ğŸ¤– Automated competitor analysis</li>
        </ul>
        
        <b>Advanced Challenges:</b>
        <ul>
            <li>ğŸ§  Predictive maintenance for equipment</li>
            <li>ğŸ’° Dynamic pricing optimization</li>
            <li>ğŸ“¦ Supply chain optimization</li>
            <li>ğŸ¯ Customer churn prediction</li>
            <li>ğŸ“Š Sentiment analysis of customer reviews</li>
            <li>ğŸ”„ Real-time market trend analysis</li>
        </ul>
    </div>
</div>

<h2>ğŸ  Homework Assignment</h2>
<div style="background-color: #fff0e6; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h3>ğŸ¤– Build an "AI-Powered Personal Assistant"</h3>
    
    <b>ğŸ¯ Project Goal:</b>
    <p>Create an intelligent personal assistant that uses multiple AI techniques to help with daily tasks, learning, and decision making.</p>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 15px 0;">
        <div>
            <h4>ğŸ§  AI Capabilities:</h4>
            <ul>
                <li><b>Natural Language Understanding:</b> Voice/text commands</li>
                <li><b>Computer Vision:</b> Recognize objects, read text from images</li>
                <li><b>Predictive Analytics:</b> Forecast schedules, suggest actions</li>
                <li><b>Personalized Learning:</b> Adapt to user's habits and preferences</li>
                <li><b>Decision Support:</b> Help make informed decisions</li>
                <li><b>Creative Assistance:</b> Help with writing, brainstorming</li>
            </ul>
        </div>
        
        <div>
            <h4>ğŸ”§ Technical Requirements:</h4>
            <ul>
                <li>Integrate at least 3 different AI/ML techniques</li>
                <li>Implement both text and voice interfaces</li>
                <li>Create learning system that improves over time</li>
                <li>Build conversational memory (remember past interactions)</li>
                <li>Add multi-modal input (text, voice, images)</li>
                <li>Implement privacy and data security</li>
            </ul>
        </div>
    </div>
    
    <b>ğŸ“‹ Assistant Features Checklist:</b>
    <div style="background: #f8f9fa; padding: 15px; border-radius: 5px; margin: 10px 0;">
        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px;">
            <div>
                <h5>ğŸ—£ï¸ Communication:</h5>
                <ul>
                    <li>âœ… Voice commands</li>
                    <li>âœ… Text chat</li>
                    <li>âœ… Multi-language</li>
                    <li>âœ… Context awareness</li>
                </ul>
            </div>
            <div>
                <h5>ğŸ‘ï¸ Vision:</h5>
                <ul>
                    <li>âœ… Object recognition</li>
                    <li>âœ… Text from images</li>
                    <li>âœ… Face recognition</li>
                    <li>âœ… Scene understanding</li>
                </ul>
            </div>
            <div>
                <h5>ğŸ§  Intelligence:</h5>
                <ul>
                    <li>âœ… Learning from interactions</li>
                    <li>âœ… Predictive suggestions</li>
                    <li>âœ… Decision support</li>
                    <li>âœ… Problem solving</li>
                </ul>
            </div>
        </div>
    </div>
    
    <b>ğŸ¨ Example Interaction:</b>
    <pre style="background: #2d3748; color: #e2e8f0; padding: 15px; border-radius: 5px; margin: 10px 0;">
ğŸ‘¤ User: "Take a picture of this document and summarize it"
ğŸ¤– Assistant: *Takes photo* "I see a contract document. Key points:
   â€¢ Agreement between Company A and Company B
   â€¢ Duration: 12 months starting Jan 1, 2024
   â€¢ Payment: $5000 monthly
   â€¢ Termination notice: 30 days
   
   Would you like me to save this to your contracts folder?"

ğŸ‘¤ User: "Based on my schedule tomorrow, when should I leave for my 10am meeting?"
ğŸ¤– Assistant: "Checking traffic and your calendar...
   â€¢ Meeting at 10:00 AM at Downtown Office (5 miles away)
   â€¢ Current traffic: 20 minutes drive
   â€¢ You have a call at 9:30 AM (30 minutes)
   â€¢ Recommended: Leave at 9:40 AM after your call"

ğŸ‘¤ User: *Shows photo of ingredients in fridge*
ğŸ¤– Assistant: "I see eggs, tomatoes, cheese, and pasta.
   Based on these ingredients, I recommend:
   1. Pasta carbonara (85% match)
   2. Tomato and cheese omelette (92% match)
   3. Simple pasta with tomatoes (95% match)
   
   Would you like the recipe for option 3?"
    </pre>
</div>

<h2>ğŸ“š Key Learning Points</h2>
<div style="background-color: #e8f5e8; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px;">
        <div>
            <h3>âœ… AI & ML Techniques Learned:</h3>
            <ul>
                <li>ğŸ’¬ Natural Language Processing (NLP) for text understanding</li>
                <li>ğŸ–¼ï¸ Computer Vision for image recognition and analysis</li>
                <li>ğŸ“Š Machine Learning for predictions and classifications</li>
                <li>ğŸ§  Neural Networks for complex pattern recognition</li>
                <li>ğŸ¯ Decision trees and ensemble methods for smart decisions</li>
                <li>ğŸ” Feature engineering and data preprocessing</li>
                <li>ğŸ“ˆ Model training, evaluation, and deployment</li>
                <li>ğŸ¤– Integrating multiple AI techniques into cohesive bots</li>
            </ul>
        </div>
        
        <div>
            <h3>ğŸš€ Real-World Applications:</h3>
            <ul>
                <li>ğŸ¤– Intelligent chatbots and virtual assistants</li>
                <li>ğŸ“Š Automated data analysis and business intelligence</li>
                <li>ğŸ‘ï¸ Visual inspection and quality control systems</li>
                <li>ğŸ“š Personalized learning and education platforms</li>
                <li>ğŸ›’ Recommendation systems and personalized marketing</li>
                <li>ğŸ”’ Content moderation and security systems</li>
                <li>ğŸ“ˆ Predictive maintenance and forecasting</li>
                <li>ğŸ¯ Smart decision support systems</li>
            </ul>
        </div>
    </div>
</div>

<div style="background-color: #4A90E2; color: white; padding: 20px; margin: 20px 0; border-radius: 10px; text-align: center;">
    <h2>ğŸ‰ Congratulations, AI Wizard!</h2>
    <p>You can now build intelligent bots that understand language, see images, make predictions, and learn from data!</p>
    <div style="display: flex; justify-content: center; gap: 20px; margin-top: 15px;">
        <span>ğŸ§  Understand anything</span>
        <span>ğŸ‘ï¸ See everything</span>
        <span>ğŸ¯ Predict anything</span>
    </div>
</div>

<h3>ğŸ› ï¸ AI & ML Bot Cheat Sheet</h3>
<pre style="background: #2d3748; color: #e2e8f0; padding: 15px; border-radius: 5px; overflow-x: auto;">
# =========== AI & ML BOT CHEAT SHEET ===========

# 1. Basic NLP Setup
import nltk
from nltk.sentiment import SentimentIntensityAnalyzer
from sklearn.feature_extraction.text import TfidfVectorizer

# Download required data
nltk.download('vader_lexicon')
nltk.download('punkt')
nltk.download('stopwords')

# Initialize
sia = SentimentIntensityAnalyzer()
vectorizer = TfidfVectorizer(stop_words='english')

# 2. Text Classification
from sklearn.naive_bayes import MultinomialNB
from sklearn.model_selection import train_test_split

# Prepare data
X = vectorizer.fit_transform(texts)
y = labels

# Split and train
X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.2)
classifier = MultinomialNB()
classifier.fit(X_train, y_train)

# Predict
predictions = classifier.predict(X_test)

# 3. Computer Vision Basics
import cv2
import numpy as np

# Read image
image = cv2.imread('image.jpg')

# Convert to grayscale
gray = cv2.cvtColor(image, cv2.COLOR_BGR2GRAY)

# Detect faces
face_cascade = cv2.CascadeClassifier(cv2.data.haarcascades + 'haarcascade_frontalface_default.xml')
faces = face_cascade.detectMultiScale(gray, 1.1, 4)

# 4. Object Detection with YOLO/OpenCV
net = cv2.dnn.readNet('yolov3.weights', 'yolov3.cfg')
layer_names = net.getLayerNames()
output_layers = [layer_names[i[0] - 1] for i in net.getUnconnectedOutLayers()]

blob = cv2.dnn.blobFromImage(image, 0.00392, (416, 416), (0, 0, 0), True, crop=False)
net.setInput(blob)
detections = net.forward(output_layers)

# 5. Text Recognition (OCR)
import pytesseract
from PIL import Image

# Extract text
text = pytesseract.image_to_string(Image.open('image.jpg'))

# Or use EasyOCR
import easyocr
reader = easyocr.Reader(['en'])
result = reader.readtext('image.jpg')

# 6. Sentiment Analysis
def analyze_sentiment(text):
    scores = sia.polarity_scores(text)
    
    if scores['compound'] >= 0.05:
        return 'positive'
    elif scores['compound'] <= -0.05:
        return 'negative'
    else:
        return 'neutral'

# 7. Image Similarity
def compare_images(img1_path, img2_path):
    img1 = cv2.imread(img1_path)
    img2 = cv2.imread(img2_path)
    
    # Resize to same dimensions
    img2 = cv2.resize(img2, (img1.shape[1], img1.shape[0]))
    
    # Calculate histogram similarity
    hist1 = cv2.calcHist([img1], [0, 1, 2], None, [8, 8, 8], [0, 256, 0, 256, 0, 256])
    hist2 = cv2.calcHist([img2], [0, 1, 2], None, [8, 8, 8], [0, 256, 0, 256, 0, 256])
    
    cv2.normalize(hist1, hist1)
    cv2.normalize(hist2, hist2)
    
    similarity = cv2.compareHist(hist1, hist2, cv2.HISTCMP_CORREL)
    return similarity

# 8. Text Summarization
from collections import Counter
import nltk

def summarize_text(text, num_sentences=3):
    sentences = nltk.sent_tokenize(text)
    
    # Calculate word frequencies
    words = nltk.word_tokenize(text.lower())
    word_freq = Counter([w for w in words if w.isalpha()])
    
    # Score sentences
    sentence_scores = {}
    for sentence in sentences:
        for word in nltk.word_tokenize(sentence.lower()):
            if word in word_freq:
                sentence_scores[sentence] = sentence_scores.get(sentence, 0) + word_freq[word]
    
    # Get top sentences
    top_sentences = sorted(sentence_scores.items(), key=lambda x: x[1], reverse=True)[:num_sentences]
    
    # Return in original order
    return ' '.join([s for s in sentences if s in dict(top_sentences)])

# 9. Keyword Extraction
def extract_keywords(text, top_n=10):
    words = nltk.word_tokenize(text.lower())
    words = [w for w in words if w.isalpha() and w not in nltk.corpus.stopwords.words('english')]
    
    from collections import Counter
    return Counter(words).most_common(top_n)

# 10. Machine Learning Pipeline
import pandas as pd
from sklearn.model_selection import train_test_split
from sklearn.preprocessing import StandardScaler, LabelEncoder
from sklearn.ensemble import RandomForestClassifier

def ml_pipeline(data, target_column):
    # Prepare data
    X = data.drop(columns=[target_column])
    y = data[target_column]
    
    # Encode categorical variables
    le = LabelEncoder()
    for col in X.select_dtypes(include=['object']).columns:
        X[col] = le.fit_transform(X[col])
    
    # Split data
    X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.2)
    
    # Scale features
    scaler = StandardScaler()
    X_train_scaled = scaler.fit_transform(X_train)
    X_test_scaled = scaler.transform(X_test)
    
    # Train model
    model = RandomForestClassifier(n_estimators=100)
    model.fit(X_train_scaled, y_train)
    
    # Evaluate
    accuracy = model.score(X_test_scaled, y_test)
    
    return model, scaler, accuracy

# 11. Neural Network with TensorFlow/Keras
import tensorflow as tf
from tensorflow import keras

def create_neural_network(input_shape, num_classes):
    model = keras.Sequential([
        keras.layers.Dense(128, activation='relu', input_shape=input_shape),
        keras.layers.Dropout(0.2),
        keras.layers.Dense(64, activation='relu'),
        keras.layers.Dropout(0.2),
        keras.layers.Dense(32, activation='relu'),
        keras.layers.Dense(num_classes, activation='softmax')
    ])
    
    model.compile(optimizer='adam',
                 loss='categorical_crossentropy',
                 metrics=['accuracy'])
    
    return model

# 12. AI API Integration (OpenAI)
import openai

def chat_with_gpt(prompt, model="gpt-3.5-turbo"):
    response = openai.ChatCompletion.create(
        model=model,
        messages=[{"role": "user", "content": prompt}]
    )
    return response.choices[0].message.content

# 13. Image Generation
def generate_image(prompt):
    response = openai.Image.create(
        prompt=prompt,
        n=1,
        size="512x512"
    )
    return response['data'][0]['url']

# 14. Speech Recognition
import speech_recognition as sr

def speech_to_text(audio_file):
    recognizer = sr.Recognizer()
    
    with sr.AudioFile(audio_file) as source:
        audio = recognizer.record(source)
    
    try:
        text = recognizer.recognize_google(audio)
        return text
    except sr.UnknownValueError:
        return "Could not understand audio"
    except sr.RequestError:
        return "API unavailable"

# 15. AI Bot Framework
class AIBotFramework:
    def __init__(self):
        self.nlp_processor = NLPProcessor()
        self.cv_processor = CVProcessor()
        self.ml_models = {}
        self.conversation_history = []
    
    def process_input(self, input_data, input_type='text'):
        """Process various types of input"""
        if input_type == 'text':
            return self.nlp_processor.analyze(input_data)
        elif input_type == 'image':
            return self.cv_processor.analyze(input_data)
        elif input_type == 'audio':
            text = self.speech_to_text(input_data)
            return self.nlp_processor.analyze(text)
        
        return None
    
    def learn_from_feedback(self, input_data, correct_output):
        """Learn from corrections"""
        # Add to training data
        # Retrain or fine-tune models
        pass
    
    def get_recommendation(self, context):
        """Get AI-powered recommendation"""
        # Analyze context
        # Use ML models to predict best action
        # Return recommendation with confidence score
        pass

# 16. Ethical AI Considerations
class EthicalAIBot:
    def __init__(self):
        self.bias_checklist = [
            'Check training data for representation',
            'Test for fairness across groups',
            'Monitor for drift over time',
            'Provide explanations for decisions',
            'Allow human override'
        ]
    
    def check_bias(self, predictions, sensitive_attributes):
        """Check for bias in predictions"""
        # Implement fairness metrics
        pass
    
    def explain_decision(self, input_data, prediction):
        """Provide explanation for AI decision"""
        # Generate human-readable explanation
        return f"The decision was made because: ..."
    
    def ensure_privacy(self, user_data):
        """Ensure user privacy"""
        # Anonymize data
        # Implement data minimization
        # Provide opt-out options
        pass

# 17. Model Deployment
def deploy_model(model, scaler, endpoint_name='ai-bot-endpoint'):
    """Deploy model for production use"""
    import joblib
    import pickle
    
    # Save model and scaler
    joblib.dump(model, 'model.pkl')
    joblib.dump(scaler, 'scaler.pkl')
    
    # Create API endpoint
    from flask import Flask, request, jsonify
    
    app = Flask(__name__)
    
    @app.route('/predict', methods=['POST'])
    def predict():
        data = request.json
        features = data['features']
        
        # Load model and scaler
        model = joblib.load('model.pkl')
        scaler = joblib.load('scaler.pkl')
        
        # Preprocess and predict
        features_scaled = scaler.transform([features])
        prediction = model.predict(features_scaled)[0]
        
        return jsonify({'prediction': prediction})
    
    return app

# 18. AI Bot Monitoring
class AIBotMonitor:
    def __init__(self):
        self.performance_metrics = {
            'accuracy': [],
            'response_time': [],
            'user_satisfaction': []
        }
    
    def log_performance(self, metric_name, value):
        self.performance_metrics[metric_name].append({
            'timestamp': datetime.now(),
            'value': value
        })
    
    def get_performance_report(self):
        report = {}
        for metric, values in self.performance_metrics.items():
            if values:
                report[metric] = {
                    'current': values[-1]['value'],
                    'average': sum(v['value'] for v in values) / len(values),
                    'trend': 'improving' if len(values) > 1 and values[-1]['value'] > values[-2]['value'] else 'declining'
                }
        return report

# 19. Multi-Modal AI Bot
class MultiModalAIBot:
    """Bot that can process multiple types of input"""
    
    def process(self, input_data):
        if isinstance(input_data, str):
            # Text input
            if input_data.startswith('http') and input_data.endswith(('.jpg', '.png', '.jpeg')):
                return self.process_image_url(input_data)
            else:
                return self.process_text(input_data)
        
        elif hasattr(input_data, 'read'):  # File-like object
            return self.process_image_file(input_data)
        
        elif isinstance(input_data, dict):
            return self.process_structured_data(input_data)
        
        return {'error': 'Unsupported input type'}
    
    def process_text(self, text):
        # NLP processing
        pass
    
    def process_image_url(self, url):
        # Download and process image
        pass
    
    def process_image_file(self, file):
        # Process uploaded image
        pass

# 20. Continuous Learning Bot
class ContinuousLearningBot:
    """Bot that improves over time"""
    
    def __init__(self):
        self.training_data = []
        self.model = self.initial_model()
        self.performance_threshold = 0.8
    
    def learn_from_interaction(self, input_data, correct_output):
        """Learn from each interaction"""
        self.training_data.append((input_data, correct_output))
        
        # Retrain if performance drops or enough new data
        if len(self.training_data) % 100 == 0:
            self.retrain()
    
    def retrain(self):
        """Retrain model with accumulated data"""
        # Prepare data
        X = [data[0] for data in self.training_data]
        y = [data[1] for data in self.training_data]
        
        # Retrain model
        self.model.fit(X, y)
        
        # Evaluate
        accuracy = self.model.score(X, y)
        
        if accuracy < self.performance_threshold:
            print(f"âš ï¸ Model performance dropped to {accuracy:.2%}")
            # Take corrective action
</pre>
`
},
            "9-36": {
    icon: "fa-rocket",
    title: "Deploying & Scaling Automation Bots",
    html: `<h1>Month 9, Week 36: Deploying & Scaling Automation Bots</h1>
<p>Today we become <b>Bot Architects</b>! We'll learn how to deploy our bots to production, scale them to handle massive workloads, and build reliable bot systems that work 24/7!</p>

<div class="analogy-box">
    <b>Analogy: The Bot Factory & Distribution Network ğŸ­ğŸšš</b><br/>
    
    Local Development = Prototype workshop<br/>
    Deployment = Mass production in factory<br/>
    Cloud Services = Global distribution network<br/>
    Scaling = Adding more production lines<br/>
    Monitoring = Quality control department<br/>
    Logging = Production records and audits<br/>
    Error Handling = Defect recovery system<br/>
    CI/CD = Automated assembly line
</div>

<h2>ğŸš€ Part 1: Bot Deployment Strategies</h2>
<div style="background-color: #f0f8ff; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h3>ğŸ—ï¸ From Local Script to Production System</h3>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 15px 0;">
        <div>
            <h4>ğŸ¯ Deployment Options:</h4>
            <div style="background: white; padding: 15px; border-radius: 5px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px;">
                    <div style="background: linear-gradient(135deg, #FF6B6B 0%, #FF8E53 100%); color: white; padding: 10px; border-radius: 3px; text-align: center;">
                        ğŸ’» Local
                    </div>
                    <div style="background: linear-gradient(135deg, #4ECDC4 0%, #44A08D 100%); color: white; padding: 10px; border-radius: 3px; text-align: center;">
                        â˜ï¸ Cloud VM
                    </div>
                    <div style="background: linear-gradient(135deg, #FFD166 0%, #FFB347 100%); color: white; padding: 10px; border-radius: 3px; text-align: center;">
                        ğŸ³ Containers
                    </div>
                    <div style="background: linear-gradient(135deg, #06D6A0 0%, #1B9AAA 100%); color: white; padding: 10px; border-radius: 3px; text-align: center;">
                        âš¡ Serverless
                    </div>
                    <div style="background: linear-gradient(135deg, #118AB2 0%, #073B4C 100%); color: white; padding: 10px; border-radius: 3px; text-align: center;">
                        ğŸ”„ Scheduled
                    </div>
                    <div style="background: linear-gradient(135deg, #EF476F 0%, #FF9A00 100%); color: white; padding: 10px; border-radius: 3px; text-align: center;">
                        ğŸ“± Mobile
                    </div>
                </div>
            </div>
            
            <div style="background: #fff3cd; padding: 15px; border-radius: 5px; margin-top: 15px;">
                <h5>ğŸ“Š Deployment Considerations:</h5>
                <ul>
                    <li>ğŸ’° <b>Cost:</b> Free vs paid services</li>
                    <li>âš¡ <b>Performance:</b> Speed requirements</li>
                    <li>ğŸ“ˆ <b>Scalability:</b> Growth potential</li>
                    <li>ğŸ”’ <b>Security:</b> Data protection needs</li>
                    <li>ğŸ”„ <b>Maintenance:</b> Update frequency</li>
                    <li>ğŸŒ <b>Accessibility:</b> Who needs access</li>
                </ul>
            </div>
        </div>
        
        <div>
            <h4>ğŸ”§ Deployment Tools & Services:</h4>
            <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 15px; border-radius: 5px;">
                <h5>ğŸ¯ Popular Deployment Platforms:</h5>
                <pre style="background: rgba(255,255,255,0.1); padding: 10px; border-radius: 3px;">
# Cloud Platforms (Free Tiers Available)
â€¢ AWS (Amazon Web Services)
â€¢ Google Cloud Platform
â€¢ Microsoft Azure
â€¢ Heroku (Easy Python deployment)
â€¢ PythonAnywhere (Specialized for Python)

# Containerization
â€¢ Docker (Package everything together)
â€¢ Kubernetes (Orchestrate multiple containers)

# Serverless
â€¢ AWS Lambda
â€¢ Google Cloud Functions
â€¢ Azure Functions

# CI/CD (Automated Deployment)
â€¢ GitHub Actions
â€¢ GitLab CI/CD
â€¢ Jenkins
â€¢ CircleCI

# Monitoring & Logging
â€¢ Sentry (Error tracking)
â€¢ Loggly / Papertrail (Log management)
â€¢ Datadog / New Relic (Performance monitoring)
                </pre>
            </div>
            
            <div style="background: #f8f9fa; padding: 15px; border-radius: 5px; margin-top: 15px;">
                <h5>ğŸ’° Free Tier Limits:</h5>
                <ul>
                    <li>âœ… <b>Heroku:</b> 550-1000 dyno hours/month</li>
                    <li>âœ… <b>AWS Lambda:</b> 1M requests/month</li>
                    <li>âœ… <b>Google Cloud:</b> $300 free credit</li>
                    <li>âœ… <b>Azure:</b> $200 free credit</li>
                    <li>âœ… <b>PythonAnywhere:</b> Free with limitations</li>
                </ul>
            </div>
        </div>
    </div>
</div>

<h2>ğŸ³ Part 2: Containerizing Bots with Docker</h2>
<div style="background-color: #e8f5e8; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h3>ğŸ“¦ Package Your Bot for Anywhere Deployment</h3>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
        <div>
            <h4>ğŸ¯ Why Containerize Bots?</h4>
            <div style="background: white; padding: 15px; border-radius: 5px;">
                <h5>âœ… Benefits of Docker:</h5>
                <ul>
                    <li>ğŸ”§ <b>Consistency:</b> Works the same everywhere</li>
                    <li>ğŸ“¦ <b>Isolation:</b> No conflicts with other software</li>
                    <li>ğŸš€ <b>Portability:</b> Run on any system with Docker</li>
                    <li>âš¡ <b>Fast Deployment:</b> Deploy in seconds</li>
                    <li>ğŸ“ˆ <b>Scalability:</b> Easy to scale horizontally</li>
                    <li>ğŸ”„ <b>Version Control:</b> Track bot versions</li>
                </ul>
            </div>
            
            <div style="background: #e6f7ff; padding: 15px; border-radius: 5px; margin-top: 15px;">
                <h5>ğŸ“ Dockerfile Structure:</h5>
                <ol>
                    <li><b>Base Image:</b> Start from Python image</li>
                    <li><b>Working Directory:</b> Set container workspace</li>
                    <li><b>Copy Files:</b> Add your bot code</li>
                    <li><b>Install Dependencies:</b> Install Python packages</li>
                    <li><b>Environment Variables:</b> Configure bot settings</li>
                    <li><b>Entry Point:</b> Define how to run the bot</li>
                </ol>
            </div>
            
            <div style="background: #fff3cd; padding: 15px; border-radius: 5px; margin-top: 15px;">
                <h5>âš ï¸ Bot-Specific Considerations:</h5>
                <ul>
                    <li>ğŸ–¥ï¸ <b>GUI Bots:</b> Need display server (Xvfb)</li>
                    <li>ğŸŒ <b>Web Drivers:</b> Install Chrome/Firefox in container</li>
                    <li>ğŸ’¾ <b>Data Storage:</b> Use volumes for persistent data</li>
                    <li>ğŸ”‘ <b>Secrets:</b> Never hardcode API keys</li>
                    <li>ğŸ“Š <b>Logs:</b> Output to stdout for Docker logging</li>
                </ul>
            </div>
        </div>
        
        <div>
            <h4>ğŸ’» Docker Configuration for Bots:</h4>
            <pre style="background: #2d3748; color: #e2e8f0; padding: 15px; border-radius: 5px;">
# =========== Dockerfile ===========

# Use official Python image
FROM python:3.9-slim

# Install system dependencies for bots
RUN apt-get update && apt-get install -y \
    wget \
    gnupg \
    unzip \
    xvfb \
    && rm -rf /var/lib/apt/lists/*

# Install Chrome for Selenium bots
RUN wget -q -O - https://dl-ssl.google.com/linux/linux_signing_key.pub | apt-key add - \
    && echo "deb [arch=amd64] http://dl.google.com/linux/chrome/deb/ stable main" >> /etc/apt/sources.list.d/google.list \
    && apt-get update \
    && apt-get install -y google-chrome-stable \
    && rm -rf /var/lib/apt/lists/*

# Install ChromeDriver
RUN wget -O /tmp/chromedriver.zip https://chromedriver.storage.googleapis.com/$(curl -sS chromedriver.storage.googleapis.com/LATEST_RELEASE)/chromedriver_linux64.zip \
    && unzip /tmp/chromedriver.zip -d /usr/local/bin/ \
    && rm /tmp/chromedriver.zip \
    && chmod +x /usr/local/bin/chromedriver

# Set working directory
WORKDIR /app

# Copy requirements first (for better caching)
COPY requirements.txt .

# Install Python dependencies
RUN pip install --no-cache-dir -r requirements.txt

# Copy bot code
COPY . .

# Create non-root user for security
RUN useradd -m -u 1000 botuser
USER botuser

# Set environment variables
ENV PYTHONUNBUFFERED=1
ENV DISPLAY=:99

# Create volume for persistent data
VOLUME ["/app/data"]

# Health check (optional)
HEALTHCHECK --interval=30s --timeout=3s --start-period=5s --retries=3 \
    CMD python -c "import requests; requests.get('http://localhost:8080/health', timeout=2)" || exit 1

# Command to run the bot
CMD ["python", "bot.py"]

# =========== docker-compose.yml ===========
version: '3.8'

services:
  web-scraper:
    build: .
    container_name: web-scraper-bot
    restart: unless-stopped
    environment:
      - BOT_MODE=production
      - LOG_LEVEL=INFO
      - DB_HOST=database
    volumes:
      - ./data:/app/data
      - ./logs:/app/logs
    depends_on:
      - database
    networks:
      - bot-network

  scheduler:
    build: ./scheduler
    container_name: bot-scheduler
    restart: unless-stopped
    environment:
      - REDIS_HOST=redis
    depends_on:
      - redis
    networks:
      - bot-network

  database:
    image: postgres:13
    container_name: bot-database
    restart: unless-stopped
    environment:
      - POSTGRES_PASSWORD=\${DB_PASSWORD}
      - POSTGRES_USER=botuser
      - POSTGRES_DB=botdb
    volumes:
      - postgres-data:/var/lib/postgresql/data
    networks:
      - bot-network

  redis:
    image: redis:alpine
    container_name: bot-redis
    restart: unless-stopped
    networks:
      - bot-network

  monitoring:
    image: grafana/grafana
    container_name: bot-monitoring
    restart: unless-stopped
    ports:
      - "3000:3000"
    volumes:
      - grafana-data:/var/lib/grafana
    networks:
      - bot-network

networks:
  bot-network:
    driver: bridge

volumes:
  postgres-data:
  grafana-data:

# =========== .dockerignore ===========
# Files to exclude from Docker build
__pycache__/
*.pyc
*.pyo
*.pyd
.Python
.env
.venv
venv/
ENV/
env/
.git/
.gitignore
README.md
test/
tests/
*.log
*.sqlite3
*.db
.DS_Store
Thumbs.db

# =========== Build and Run Commands ===========
# Build the image
docker build -t my-bot:latest .

# Run the bot
docker run -d --name my-bot-container my-bot:latest

# Run with environment variables
docker run -d --name my-bot \
  -e API_KEY=\${API_KEY} \
  -e BOT_MODE=production \
  my-bot:latest

# Run with volume for data persistence
docker run -d --name my-bot \
  -v $(pwd)/data:/app/data \
  my-bot:latest

# View logs
docker logs -f my-bot

# Stop and remove
docker stop my-bot && docker rm my-bot

# Use docker-compose
docker-compose up -d
docker-compose logs -f
docker-compose down
            </pre>
        </div>
    </div>
</div>

<h2>â˜ï¸ Part 3: Cloud Deployment & Serverless Bots</h2>
<div style="background-color: #fff0e6; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h3>âš¡ Deploying Bots to the Cloud</h3>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
        <div>
            <h4>ğŸ¯ Cloud Deployment Options:</h4>
            <div style="background: #f8f9fa; padding: 15px; border-radius: 5px;">
                <h5>ğŸ¢ Virtual Machines (VMs):</h5>
                <ul>
                    <li>âœ… <b>Full control:</b> Install anything</li>
                    <li>âœ… <b>Persistent:</b> Always running</li>
                    <li>âœ… <b>GUI support:</b> Run browsers with display</li>
                    <li>âŒ <b>More expensive:</b> Pay for idle time</li>
                    <li>âŒ <b>Maintenance needed:</b> Updates, security</li>
                </ul>
            </div>
            
            <div style="background: #e8f5e8; padding: 15px; border-radius: 5px; margin-top: 15px;">
                <h5>âš¡ Serverless Functions:</h5>
                <ul>
                    <li>âœ… <b>Cost-effective:</b> Pay per execution</li>
                    <li>âœ… <b>Auto-scaling:</b> Handle any load</li>
                    <li>âœ… <b>No maintenance:</b> Managed service</li>
                    <li>âŒ <b>Time limits:</b> Max execution time</li>
                    <li>âŒ <b>Stateless:</b> No persistent storage</li>
                </ul>
            </div>
            
            <div style="background: #e6f7ff; padding: 15px; border-radius: 5px; margin-top: 15px;">
                <h5>ğŸ³ Container Services:</h5>
                <ul>
                    <li>âœ… <b>Portable:</b> Same container everywhere</li>
                    <li>âœ… <b>Scalable:</b> Easy to scale up/down</li>
                    <li>âœ… <b>Managed:</b> Less infrastructure work</li>
                    <li>âŒ <b>Learning curve:</b> Need Docker knowledge</li>
                    <li>âŒ <b>More complex:</b> Orchestration needed</li>
                </ul>
            </div>
        </div>
        
        <div>
            <h4>ğŸ’» Serverless Bot Example (AWS Lambda):</h4>
            <pre style="background: #36454f; color: #fff; padding: 15px; border-radius: 5px;">
# serverless-bot.py
import json
import boto3
from datetime import datetime
import os

# Initialize clients
s3 = boto3.client('s3')
sqs = boto3.client('sqs')
lambda_client = boto3.client('lambda')

def lambda_handler(event, context):
    """AWS Lambda handler for serverless bot"""
    
    try:
        # Parse incoming event
        bot_type = event.get('bot_type', 'scraper')
        task_data = event.get('data', {})
        
        # Log execution
        print(f"ğŸš€ Starting {bot_type} bot execution")
        print(f"Event: {json.dumps(event)}")
        print(f"Remaining time: {context.get_remaining_time_in_millis()}ms")
        
        # Route to appropriate bot function
        if bot_type == 'scraper':
            result = run_scraper_bot(task_data)
        elif bot_type == 'processor':
            result = run_processor_bot(task_data)
        elif bot_type == 'notifier':
            result = run_notifier_bot(task_data)
        else:
            return {
                'statusCode': 400,
                'body': json.dumps({'error': 'Unknown bot type'})
            }
        
        # Save results to S3
        if result.get('data'):
            timestamp = datetime.now().strftime('%Y%m%d_%H%M%S')
            s3_key = f"bot-results/{bot_type}/{timestamp}.json"
            
            s3.put_object(
                Bucket=os.environ['RESULTS_BUCKET'],
                Key=s3_key,
                Body=json.dumps(result['data']),
                ContentType='application/json'
            )
            
            result['s3_location'] = s3_key
        
        # Return success response
        return {
            'statusCode': 200,
            'body': json.dumps({
                'success': True,
                'bot_type': bot_type,
                'execution_id': context.aws_request_id,
                'result': result
            })
        }
    
    except Exception as e:
        print(f"âŒ Bot execution failed: {str(e)}")
        
        # Send error notification
        send_error_notification(str(e), event)
        
        return {
            'statusCode': 500,
            'body': json.dumps({
                'success': False,
                'error': str(e),
                'execution_id': context.aws_request_id
            })
        }

def run_scraper_bot(task_data):
    """Run web scraping bot"""
    # Note: In Lambda, you need headless browser solutions
    # like chromium-aws or use API-based scraping
    
    url = task_data.get('url')
    selectors = task_data.get('selectors', {})
    
    # For Lambda, consider API-based scraping or simplified approach
    import requests
    from bs4 import BeautifulSoup
    
    response = requests.get(url, timeout=10)
    soup = BeautifulSoup(response.text, 'html.parser')
    
    scraped_data = {}
    for key, selector in selectors.items():
        elements = soup.select(selector)
        scraped_data[key] = [elem.get_text(strip=True) for elem in elements[:10]]
    
    return {
        'data': scraped_data,
        'url': url,
        'items_found': sum(len(v) for v in scraped_data.values())
    }

def run_processor_bot(task_data):
    """Run data processing bot"""
    # Process data (e.g., clean, transform, analyze)
    data = task_data.get('data', {})
    
    # Example: Calculate statistics
    if 'numbers' in data:
        numbers = data['numbers']
        result = {
            'count': len(numbers),
            'sum': sum(numbers),
            'average': sum(numbers) / len(numbers) if numbers else 0,
            'min': min(numbers) if numbers else 0,
            'max': max(numbers) if numbers else 0
        }
    else:
        result = {'processed': True, 'original_data': data}
    
    return {'data': result}

def run_notifier_bot(task_data):
    """Run notification bot"""
    message = task_data.get('message', '')
    recipients = task_data.get('recipients', [])
    channel = task_data.get('channel', 'email')
    
    # Send notifications (simplified)
    # In production, integrate with SNS, SES, or other services
    
    return {
        'data': {
            'message_sent': True,
            'recipients_count': len(recipients),
            'channel': channel
        }
    }

def send_error_notification(error_message, event_data):
    """Send error notification"""
    # Could send to SNS, Slack, email, etc.
    print(f"ğŸ“¢ ERROR: {error_message}")
    print(f"Event data: {json.dumps(event_data)}")

# =========== serverless.yml ===========
# Serverless Framework configuration

service: automation-bots

provider:
  name: aws
  runtime: python3.9
  region: us-east-1
  environment:
    RESULTS_BUCKET: \${self:service}-results-\${opt:stage}
    LOG_LEVEL: INFO
  
  iamRoleStatements:
    - Effect: Allow
      Action:
        - s3:PutObject
        - s3:GetObject
      Resource: "arn:aws:s3:::\${self:service}-results-\${opt:stage}/*"
    
    - Effect: Allow
      Action:
        - sqs:SendMessage
        - sqs:ReceiveMessage
      Resource: "*"

functions:
  scraper-bot:
    handler: serverless-bot.lambda_handler
    timeout: 300  # 5 minutes max
    memorySize: 1024  # 1GB RAM
    events:
      - http:
          path: bots/scrape
          method: post
      
      - schedule:
          rate: rate(1 hour)  # Run every hour
          enabled: true
          input:
            bot_type: scraper
            data:
              url: "https://example.com"
              selectors:
                titles: "h2.title"
                prices: ".price"
  
  processor-bot:
    handler: serverless-bot.lambda_handler
    timeout: 60
    memorySize: 512
  
  notifier-bot:
    handler: serverless-bot.lambda_handler
    timeout: 30
    memorySize: 256

resources:
  Resources:
    ResultsBucket:
      Type: AWS::S3::Bucket
      Properties:
        BucketName: \${self:service}-results-\${opt:stage}
        AccessControl: Private
        LifecycleConfiguration:
          Rules:
            - Id: CleanupOldResults
              Status: Enabled
              ExpirationInDays: 30

# =========== Deploy Commands ===========
# Install Serverless Framework
npm install -g serverless

# Deploy to AWS
serverless deploy --stage prod

# Deploy single function
serverless deploy function --function scraper-bot

# Invoke function locally
serverless invoke local --function scraper-bot --data '{"bot_type":"scraper"}'

# View logs
serverless logs --function scraper-bot --tail
            </pre>
        </div>
    </div>
</div>

<h2>ğŸ“ˆ Part 4: Scaling & Monitoring Bots</h2>
<div style="background-color: #f5f5f5; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h3>ğŸš€ Handling Thousands of Bot Instances</h3>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
        <div>
            <h4>ğŸ¯ Scaling Strategies:</h4>
            <div style="background: white; padding: 15px; border-radius: 5px;">
                <h5>ğŸ“Š Horizontal vs Vertical Scaling:</h5>
                <ul>
                    <li>â†”ï¸ <b>Horizontal:</b> Add more bot instances</li>
                    <li>â†•ï¸ <b>Vertical:</b> Upgrade bot instance power</li>
                    <li>ğŸ”„ <b>Auto-scaling:</b> Automatically adjust based on load</li>
                    <li>âš–ï¸ <b>Load balancing:</b> Distribute work evenly</li>
                    <li>ğŸ—‚ï¸ <b>Queue-based:</b> Use message queues for tasks</li>
                </ul>
            </div>
            
            <div style="background: #e8f5e8; padding: 15px; border-radius: 5px; margin-top: 15px;">
                <h5>ğŸ“ˆ Scaling Considerations:</h5>
                <ul>
                    <li>ğŸ’° <b>Cost:</b> More instances = more cost</li>
                    <li>ğŸ”— <b>Dependencies:</b> Database, APIs, external services</li>
                    <li>ğŸ”’ <b>Rate limits:</b> Avoid hitting API limits</li>
                    <li>ğŸ“Š <b>Monitoring:</b> Track performance as you scale</li>
                    <li>ğŸ”„ <b>State management:</b> How to handle bot state</li>
                </ul>
            </div>
            
            <div style="background: #fff3cd; padding: 15px; border-radius: 5px; margin-top: 15px;">
                <h5>âš ï¸ Scaling Challenges:</h5>
                <ul>
                    <li>ğŸ”— <b>Concurrency limits:</b> Websites may block too many requests</li>
                    <li>ğŸ’¾ <b>Data consistency:</b> Multiple bots writing to same database</li>
                    <li>ğŸ”„ <b>Task coordination:</b> Avoid duplicate work</li>
                    <li>ğŸ“Š <b>Monitoring complexity:</b> Harder to debug at scale</li>
                    <li>ğŸ’° <b>Cost control:</b> Avoid runaway costs</li>
                </ul>
            </div>
        </div>
        
        <div>
            <h4>ğŸ’» Scalable Bot Architecture:</h4>
            <pre style="background: #2d3748; color: #e2e8f0; padding: 15px; border-radius: 5px;">
import redis
import json
from multiprocessing import Pool, cpu_count
from queue import Queue
import threading
import time
from datetime import datetime

class ScalableBotSystem:
    def __init__(self, max_workers=None):
        # Redis for distributed task queue
        self.redis_client = redis.Redis(
            host=os.getenv('REDIS_HOST', 'localhost'),
            port=6379,
            decode_responses=True
        )
        
        # Configuration
        self.max_workers = max_workers or cpu_count()
        self.task_queue = Queue()
        self.results_queue = Queue()
        
        # Statistics
        self.stats = {
            'tasks_completed': 0,
            'tasks_failed': 0,
            'workers_active': 0,
            'queue_size': 0
        }
    
    def add_task(self, task_type, task_data, priority=1):
        """Add task to distributed queue"""
        task_id = f"task_{datetime.now().strftime('%Y%m%d_%H%M%S')}_{hash(json.dumps(task_data))}"
        
        task = {
            'id': task_id,
            'type': task_type,
            'data': task_data,
            'priority': priority,
            'created_at': datetime.now().isoformat(),
            'status': 'pending'
        }
        
        # Add to Redis queue (sorted by priority)
        self.redis_client.zadd('task_queue', {json.dumps(task): priority})
        
        # Also add to local queue for immediate processing
        self.task_queue.put(task)
        
        self.stats['queue_size'] += 1
        return task_id
    
    def worker_process(self, worker_id):
        """Worker process that processes tasks"""
        print(f"ğŸ‘· Worker {worker_id} started")
        self.stats['workers_active'] += 1
        
        while True:
            try:
                # Get task from Redis (distributed) or local queue
                task_json = self.redis_client.zpopmin('task_queue', count=1)
                
                if task_json:
                    task = json.loads(task_json[0][0])
                else:
                    # Fallback to local queue
                    task = self.task_queue.get(timeout=5)
                
                # Process task
                task['status'] = 'processing'
                task['worker_id'] = worker_id
                task['started_at'] = datetime.now().isoformat()
                
                result = self.process_task(task)
                
                task['status'] = 'completed'
                task['completed_at'] = datetime.now().isoformat()
                task['result'] = result
                
                # Store result
                self.redis_client.set(f"result:{task['id']}", json.dumps(task))
                self.results_queue.put(task)
                
                self.stats['tasks_completed'] += 1
                self.stats['queue_size'] = max(0, self.stats['queue_size'] - 1)
                
            except Exception as e:
                print(f"âŒ Worker {worker_id} error: {e}")
                self.stats['tasks_failed'] += 1
    
    def process_task(self, task):
        """Process a single task"""
        task_type = task['type']
        task_data = task['data']
        
        try:
            if task_type == 'scrape':
                return self.scrape_task(task_data)
            elif task_type == 'process':
                return self.process_data_task(task_data)
            elif task_type == 'notify':
                return self.notification_task(task_data)
            else:
                return {'error': f'Unknown task type: {task_type}'}
        
        except Exception as e:
            return {'error': str(e), 'task_id': task['id']}
    
    def scrape_task(self, data):
        """Web scraping task"""
        url = data.get('url')
        # Implement scraping logic
        time.sleep(2)  # Simulate work
        return {'url': url, 'scraped': True, 'items': 10}
    
    def process_data_task(self, data):
        """Data processing task"""
        # Implement processing logic
        time.sleep(1)
        return {'processed': True, 'data_points': len(data)}
    
    def notification_task(self, data):
        """Notification task"""
        # Implement notification logic
        time.sleep(0.5)
        return {'notified': True, 'recipients': data.get('recipients', [])}
    
    def start_workers(self, num_workers=None):
        """Start worker processes"""
        workers = num_workers or self.max_workers
        
        # Create worker pool
        with Pool(processes=workers) as pool:
            worker_ids = list(range(workers))
            pool.map(self.worker_process, worker_ids)
    
    def start_threaded_workers(self, num_workers=10):
        """Start worker threads (for I/O bound tasks)"""
        threads = []
        
        for i in range(num_workers):
            thread = threading.Thread(
                target=self.worker_process,
                args=(f"thread_{i}",),
                daemon=True
            )
            thread.start()
            threads.append(thread)
        
        return threads
    
    def get_stats(self):
        """Get current system statistics"""
        self.stats['queue_size'] = self.redis_client.zcard('task_queue') + self.task_queue.qsize()
        return self.stats
    
    def monitor_system(self, interval=30):
        """Monitor system performance"""
        import psutil
        import time
        
        while True:
            stats = self.get_stats()
            cpu_percent = psutil.cpu_percent()
            memory_percent = psutil.virtual_memory().percent
            
            print(f"\nğŸ“Š SYSTEM MONITOR {datetime.now().strftime('%H:%M:%S')}")
            print(f"CPU: {cpu_percent}% | Memory: {memory_percent}%")
            print(f"Workers active: {stats['workers_active']}")
            print(f"Queue size: {stats['queue_size']}")
            print(f"Completed: {stats['tasks_completed']} | Failed: {stats['tasks_failed']}")
            print("-" * 40)
            
            time.sleep(interval)

# Example: Distributed Web Scraping System
class DistributedScraper(ScalableBotSystem):
    def __init__(self):
        super().__init__()
        self.proxies = self.load_proxies()
        self.current_proxy_index = 0
    
    def load_proxies(self):
        """Load proxy list for rotation"""
        # In production, load from file or API
        return [
            'proxy1:port',
            'proxy2:port',
            # ...
        ]
    
    def get_next_proxy(self):
        """Get next proxy for rotation"""
        proxy = self.proxies[self.current_proxy_index]
        self.current_proxy_index = (self.current_proxy_index + 1) % len(self.proxies)
        return proxy
    
    def scrape_with_retry(self, url, max_retries=3):
        """Scrape with proxy rotation and retries"""
        for attempt in range(max_retries):
            proxy = self.get_next_proxy()
            
            try:
                # Configure request with proxy
                proxies = {
                    'http': f'http://{proxy}',
                    'https': f'http://{proxy}'
                }
                
                # Make request (simplified)
                import requests
                response = requests.get(url, proxies=proxies, timeout=10)
                
                if response.status_code == 200:
                    return response.text
                else:
                    print(f"Attempt {attempt + 1} failed with status {response.status_code}")
            
            except Exception as e:
                print(f"Attempt {attempt + 1} failed: {e}")
            
            time.sleep(2 ** attempt)  # Exponential backoff
        
        return None

# Usage example
if __name__ == "__main__":
    # Initialize scalable bot system
    bot_system = ScalableBotSystem(max_workers=4)
    
    # Add some tasks
    tasks = [
        ('scrape', {'url': 'https://example.com/page1'}),
        ('scrape', {'url': 'https://example.com/page2'}),
        ('process', {'data': [1, 2, 3, 4, 5]}),
        ('notify', {'message': 'Task completed', 'recipients': ['user@example.com']})
    ]
    
    for task_type, task_data in tasks:
        task_id = bot_system.add_task(task_type, task_data)
        print(f"âœ… Added task {task_id}")
    
    # Start monitoring in separate thread
    import threading
    monitor_thread = threading.Thread(target=bot_system.monitor_system, daemon=True)
    monitor_thread.start()
    
    # Start workers
    print("ğŸš€ Starting workers...")
    bot_system.start_threaded_workers(num_workers=3)
            </pre>
        </div>
    </div>
</div>

<h2>ğŸ”§ Part 5: Bot Monitoring, Logging & Error Handling</h2>
<div style="background-color: #e6f7ff; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h3>ğŸ“Š Keeping Your Bots Healthy & Reliable</h3>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
        <div>
            <h4>ğŸ¯ Monitoring Essentials:</h4>
            <div style="background: white; padding: 15px; border-radius: 5px;">
                <h5>ğŸ“ˆ What to Monitor:</h5>
                <ul>
                    <li>ğŸ’“ <b>Health checks:</b> Is the bot running?</li>
                    <li>â±ï¸ <b>Performance:</b> Response times, throughput</li>
                    <li>ğŸ” <b>Errors:</b> Failure rates, error types</li>
                    <li>ğŸ“Š <b>Business metrics:</b> Tasks completed, value generated</li>
                    <li>ğŸ’° <b>Costs:</b> Resource usage, API calls</li>
                    <li>ğŸ”’ <b>Security:</b> Unauthorized access attempts</li>
                </ul>
            </div>
            
            <div style="background: #e8f5e8; padding: 15px; border-radius: 5px; margin-top: 15px;">
                <h5>ğŸ“ Logging Best Practices:</h5>
                <ul>
                    <li>âœ… <b>Structured logging:</b> JSON format for easy parsing</li>
                    <li>âœ… <b>Log levels:</b> DEBUG, INFO, WARNING, ERROR, CRITICAL</li>
                    <li>âœ… <b>Context:</b> Include timestamps, bot ID, task ID</li>
                    <li>âœ… <b>Sensitive data:</b> Never log passwords, API keys</li>
                    <li>âœ… <b>Rotation:</b> Manage log file sizes</li>
                    <li>âœ… <b>Centralized logging:</b> Aggregate logs from all bots</li>
                </ul>
            </div>
            
            <div style="background: #fff3cd; padding: 15px; border-radius: 5px; margin-top: 15px;">
                <h5>ğŸš¨ Alerting Strategy:</h5>
                <ul>
                    <li>ğŸ”” <b>Immediate alerts:</b> Critical failures, security issues</li>
                    <li>âš ï¸ <b>Warning alerts:</b> Performance degradation, high error rates</li>
                    <li>ğŸ“Š <b>Daily reports:</b> Summary of bot activities</li>
                    <li>ğŸ“± <b>Multi-channel:</b> Email, SMS, Slack, etc.</li>
                    <li>ğŸ¯ <b>Actionable:</b> Alerts should tell you what to do</li>
                </ul>
            </div>
        </div>
        
        <div>
            <h4>ğŸ’» Comprehensive Bot Monitoring:</h4>
            <pre style="background: #36454f; color: #fff; padding: 15px; border-radius: 5px;">
import logging
import logging.handlers
from datetime import datetime, timedelta
import json
import time
from collections import defaultdict
import smtplib
from email.mime.text import MIMEText

class BotMonitor:
    def __init__(self, bot_name, log_level=logging.INFO):
        self.bot_name = bot_name
        self.bot_id = f"{bot_name}_{datetime.now().strftime('%Y%m%d_%H%M%S')}"
        
        # Initialize logging
        self.setup_logging(log_level)
        
        # Statistics
        self.stats = {
            'start_time': datetime.now(),
            'tasks_processed': 0,
            'tasks_failed': 0,
            'errors_by_type': defaultdict(int),
            'performance_metrics': [],
            'last_success': None,
            'last_failure': None
        }
        
        # Alert thresholds
        self.alert_thresholds = {
            'error_rate': 0.05,  # 5% error rate
            'response_time': 30,  # 30 seconds
            'memory_usage': 0.8,  # 80% memory usage
            'consecutive_failures': 3
        }
        
        # Alert state
        self.alerts_sent = set()
        self.consecutive_failures = 0
    
    def setup_logging(self, log_level):
        """Setup comprehensive logging"""
        # Create logger
        self.logger = logging.getLogger(self.bot_name)
        self.logger.setLevel(log_level)
        
        # Clear existing handlers
        self.logger.handlers.clear()
        
        # Console handler
        console_handler = logging.StreamHandler()
        console_format = logging.Formatter(
            '%(asctime)s - %(name)s - %(levelname)s - %(message)s'
        )
        console_handler.setFormatter(console_format)
        self.logger.addHandler(console_handler)
        
        # File handler (rotating)
        file_handler = logging.handlers.RotatingFileHandler(
            filename=f'logs/{self.bot_name}.log',
            maxBytes=10*1024*1024,  # 10MB
            backupCount=5
        )
        file_format = logging.Formatter(
            '%(asctime)s - %(name)s - %(levelname)s - %(message)s'
        )
        file_handler.setFormatter(file_format)
        self.logger.addHandler(file_handler)
        
        # JSON handler for structured logging
        class JSONFormatter(logging.Formatter):
            def format(self, record):
                log_record = {
                    'timestamp': datetime.now().isoformat(),
                    'bot_id': self.bot_id,
                    'level': record.levelname,
                    'message': record.getMessage(),
                    'module': record.module,
                    'function': record.funcName,
                    'line': record.lineno
                }
                
                # Add extra fields if present
                if hasattr(record, 'extra'):
                    log_record.update(record.extra)
                
                return json.dumps(log_record)
        
        json_handler = logging.FileHandler(f'logs/{self.bot_name}_structured.log')
        json_handler.setFormatter(JSONFormatter())
        self.logger.addHandler(json_handler)
    
    def log_task_start(self, task_id, task_type, task_data):
        """Log task start"""
        extra_data = {
            'task_id': task_id,
            'task_type': task_type,
            'event': 'task_start',
            'task_data': {k: v for k, v in task_data.items() if not self._is_sensitive(k)}
        }
        
        self.logger.info(f"Starting task {task_id}", extra={'extra': extra_data})
        
        # Record performance start time
        self.current_task_start = time.time()
        self.current_task_id = task_id
    
    def log_task_success(self, result):
        """Log task success"""
        if hasattr(self, 'current_task_start'):
            duration = time.time() - self.current_task_start
            
            extra_data = {
                'task_id': getattr(self, 'current_task_id', 'unknown'),
                'event': 'task_success',
                'duration': duration,
                'result': result
            }
            
            self.logger.info(f"Task completed successfully", extra={'extra': extra_data})
            
            # Update statistics
            self.stats['tasks_processed'] += 1
            self.stats['last_success'] = datetime.now()
            self.stats['performance_metrics'].append({
                'timestamp': datetime.now().isoformat(),
                'duration': duration,
                'task_id': getattr(self, 'current_task_id', 'unknown')
            })
            
            # Reset consecutive failures
            self.consecutive_failures = 0
            
            # Check performance threshold
            if duration > self.alert_thresholds['response_time']:
                self.send_alert('performance', f"Task took {duration:.2f}s (threshold: {self.alert_thresholds['response_time']}s)")
            
            # Clean up
            delattr(self, 'current_task_start')
            delattr(self, 'current_task_id')
    
    def log_task_error(self, error, task_data=None):
        """Log task error"""
        error_type = type(error).__name__
        error_message = str(error)
        
        extra_data = {
            'task_id': getattr(self, 'current_task_id', 'unknown'),
            'event': 'task_error',
            'error_type': error_type,
            'error_message': error_message,
            'task_data': task_data
        }
        
        self.logger.error(f"Task failed: {error_type}: {error_message}", extra={'extra': extra_data})
        
        # Update statistics
        self.stats['tasks_failed'] += 1
        self.stats['errors_by_type'][error_type] += 1
        self.stats['last_failure'] = datetime.now()
        
        # Track consecutive failures
        self.consecutive_failures += 1
        
        # Check consecutive failures threshold
        if self.consecutive_failures >= self.alert_thresholds['consecutive_failures']:
            self.send_alert('consecutive_failures', 
                          f"{self.consecutive_failures} consecutive failures")
    
    def _is_sensitive(self, key):
        """Check if key contains sensitive information"""
        sensitive_keywords = ['password', 'secret', 'key', 'token', 'auth']
        return any(keyword in key.lower() for keyword in sensitive_keywords)
    
    def send_alert(self, alert_type, message):
        """Send alert notification"""
        alert_id = f"{alert_type}_{datetime.now().strftime('%Y%m%d_%H%M')}"
        
        if alert_id in self.alerts_sent:
            return  # Don't send duplicate alerts
        
        alert_data = {
            'bot_id': self.bot_id,
            'bot_name': self.bot_name,
            'alert_type': alert_type,
            'message': message,
            'timestamp': datetime.now().isoformat(),
            'statistics': self.get_current_stats()
        }
        
        # Log alert
        self.logger.critical(f"ALERT: {alert_type} - {message}", extra={'extra': alert_data})
        
        # Send notification (implement based on your needs)
        self.send_email_alert(alert_data)
        self.send_slack_alert(alert_data)
        
        self.alerts_sent.add(alert_id)
    
    def send_email_alert(self, alert_data):
        """Send email alert"""
        try:
            # Configure based on your email provider
            subject = f"ğŸš¨ BOT ALERT: {self.bot_name} - {alert_data['alert_type']}"
            body = json.dumps(alert_data, indent=2)
            
            msg = MIMEText(body)
            msg['Subject'] = subject
            msg['From'] = 'bot-monitor@example.com'
            msg['To'] = 'admin@example.com'
            
            # Send email (configure your SMTP server)
            # with smtplib.SMTP('smtp.example.com', 587) as server:
            #     server.starttls()
            #     server.login('username', 'password')
            #     server.send_message(msg)
            
            self.logger.info(f"Email alert prepared: {subject}")
        
        except Exception as e:
            self.logger.error(f"Failed to send email alert: {e}")
    
    def send_slack_alert(self, alert_data):
        """Send Slack alert"""
        # Implement Slack webhook integration
        pass
    
    def get_current_stats(self):
        """Get current statistics"""
        total_tasks = self.stats['tasks_processed'] + self.stats['tasks_failed']
        error_rate = self.stats['tasks_failed'] / total_tasks if total_tasks > 0 else 0
        
        uptime = datetime.now() - self.stats['start_time']
        
        return {
            'bot_id': self.bot_id,
            'bot_name': self.bot_name,
            'uptime': str(uptime),
            'tasks_processed': self.stats['tasks_processed'],
            'tasks_failed': self.stats['tasks_failed'],
            'error_rate': error_rate,
            'error_types': dict(self.stats['errors_by_type']),
            'last_success': self.stats['last_success'].isoformat() if self.stats['last_success'] else None,
            'last_failure': self.stats['last_failure'].isoformat() if self.stats['last_failure'] else None,
            'consecutive_failures': self.consecutive_failures
        }
    
    def generate_report(self, period_hours=24):
        """Generate periodic report"""
        report = {
            'period': f"last_{period_hours}_hours",
            'generated_at': datetime.now().isoformat(),
            'statistics': self.get_current_stats(),
            'performance_summary': self.get_performance_summary(period_hours),
            'recommendations': self.generate_recommendations()
        }
        
        # Save report
        filename = f"reports/{self.bot_name}_{datetime.now().strftime('%Y%m%d_%H%M')}.json"
        with open(filename, 'w') as f:
            json.dump(report, f, indent=2)
        
        return report
    
    def get_performance_summary(self, period_hours):
        """Get performance summary for period"""
        cutoff_time = datetime.now() - timedelta(hours=period_hours)
        
        recent_metrics = [
            m for m in self.stats['performance_metrics']
            if datetime.fromisoformat(m['timestamp']) > cutoff_time
        ]
        
        if not recent_metrics:
            return None
        
        durations = [m['duration'] for m in recent_metrics]
        
        return {
            'count': len(recent_metrics),
            'average_duration': sum(durations) / len(durations),
            'min_duration': min(durations),
            'max_duration': max(durations),
            'p95_duration': sorted(durations)[int(len(durations) * 0.95)]
        }
    
    def generate_recommendations(self):
        """Generate recommendations based on statistics"""
        recommendations = []
        
        total_tasks = self.stats['tasks_processed'] + self.stats['tasks_failed']
        
        if total_tasks > 0:
            error_rate = self.stats['tasks_failed'] / total_tasks
            
            if error_rate > self.alert_thresholds['error_rate']:
                recommendations.append({
                    'type': 'error_rate_high',
                    'message': f"Error rate ({error_rate:.1%}) exceeds threshold ({self.alert_thresholds['error_rate']:.1%})",
                    'suggestion': "Review error logs and implement better error handling"
                })
        
        if self.consecutive_failures > 0:
            recommendations.append({
                'type': 'consecutive_failures',
                'message': f"{self.consecutive_failures} consecutive failures",
                'suggestion': "Check if external services are down or if there's a configuration issue"
            })
        
        # Check for common error patterns
        common_errors = sorted(
            self.stats['errors_by_type'].items(),
            key=lambda x: x[1],
            reverse=True
        )[:3]
        
        for error_type, count in common_errors:
            recommendations.append({
                'type': 'common_error',
                'message': f"Most common error: {error_type} ({count} occurrences)",
                'suggestion': f"Add specific handling for {error_type} errors"
            })
        
        return recommendations

# Example: Monitored Bot
class MonitoredBot:
    def __init__(self, name):
        self.name = name
        self.monitor = BotMonitor(name)
        
        # Health check registry
        self.health_checks = []
        
        # Register default health checks
        self.register_health_check(self.check_disk_space, interval_minutes=60)
        self.register_health_check(self.check_memory_usage, interval_minutes=30)
        self.register_health_check(self.check_external_services, interval_minutes=5)
    
    def register_health_check(self, check_function, interval_minutes=5):
        """Register a health check function"""
        self.health_checks.append({
            'function': check_function,
            'interval': interval_minutes * 60,
            'last_run': 0
        })
    
    def run_health_checks(self):
        """Run all registered health checks"""
        current_time = time.time()
        
        for check in self.health_checks:
            if current_time - check['last_run'] > check['interval']:
                try:
                    result = check['function']()
                    check['last_run'] = current_time
                    
                    if not result.get('healthy', True):
                        self.monitor.send_alert('health_check', 
                                              f"Health check failed: {result.get('message', 'Unknown')}")
                
                except Exception as e:
                    self.monitor.logger.error(f"Health check failed: {e}")
    
    def check_disk_space(self):
        """Check disk space"""
        import shutil
        
        total, used, free = shutil.disk_usage("/")
        free_percent = free / total
        
        return {
            'healthy': free_percent > 0.1,  # At least 10% free
            'message': f"Disk space: {free_percent:.1%} free",
            'free_percent': free_percent
        }
    
    def check_memory_usage(self):
        """Check memory usage"""
        import psutil
        
        memory = psutil.virtual_memory()
        
        return {
            'healthy': memory.percent < 90,  # Less than 90% used
            'message': f"Memory usage: {memory.percent}%",
            'usage_percent': memory.percent
        }
    
    def check_external_services(self):
        """Check external services"""
        services_to_check = [
            ('Google', 'https://www.google.com'),
            ('GitHub', 'https://api.github.com'),
            # Add your bot's dependencies
        ]
        
        results = []
        import requests
        
        for name, url in services_to_check:
            try:
                response = requests.get(url, timeout=5)
                results.append({
                    'service': name,
                    'healthy': response.status_code == 200,
                    'status_code': response.status_code
                })
            except Exception as e:
                results.append({
                    'service': name,
                    'healthy': False,
                    'error': str(e)
                })
        
        unhealthy = [r for r in results if not r['healthy']]
        
        return {
            'healthy': len(unhealthy) == 0,
            'message': f"{len(unhealthy)} services unhealthy",
            'results': results,
            'unhealthy_services': [r['service'] for r in unhealthy]
        }
    
    def execute_task(self, task_function, task_id, task_data):
        """Execute a task with monitoring"""
        self.monitor.log_task_start(task_id, task_function.__name__, task_data)
        
        try:
            result = task_function(task_data)
            self.monitor.log_task_success(result)
            return result
        
        except Exception as e:
            self.monitor.log_task_error(e, task_data)
            raise

# Usage example
if __name__ == "__main__":
    # Create monitored bot
    bot = MonitoredBot("ExampleBot")
    
    # Define a task
    def sample_task(data):
        """Sample task that processes data"""
        print(f"Processing: {data}")
        time.sleep(1)  # Simulate work
        return {'processed': True, 'items': len(data)}
    
    # Execute tasks with monitoring
    for i in range(5):
        task_id = f"task_{i}"
        task_data = {'numbers': list(range(i * 10, (i + 1) * 10))}
        
        try:
            result = bot.execute_task(sample_task, task_id, task_data)
            print(f"âœ… Task {task_id} completed: {result}")
        
        except Exception as e:
            print(f"âŒ Task {task_id} failed: {e}")
    
    # Run health checks
    bot.run_health_checks()
    
    # Generate report
    report = bot.monitor.generate_report(period_hours=1)
    print(f"\nğŸ“Š Report generated with {len(report.get('recommendations', []))} recommendations")
            </pre>
        </div>
    </div>
</div>

<h2>ğŸ¯ Today's Hands-On Exercises (3 Hours)</h2>
<div style="background-color: #f0f8ff; padding: 20px; margin: 15px 0; border-radius: 10px;">
    
    <div style="background: #e8f5e8; padding: 15px; border-radius: 5px; margin-bottom: 15px;">
        <h3>ğŸ† Exercise 1: Deploy a Bot to Cloud (60 minutes)</h3>
        <p><b>Deploy one of your bots to a cloud platform</b></p>
        
        <b>Choose One Platform:</b>
        <ol>
            <li>ğŸš€ <b>Heroku:</b> Deploy a web scraping bot</li>
            <li>âš¡ <b>AWS Lambda:</b> Deploy a serverless processing bot</li>
            <li>ğŸ³ <b>Docker + Cloud Run:</b> Containerize and deploy any bot</li>
            <li>ğŸ”„ <b>GitHub Actions:</b> Set up scheduled bot execution</li>
            <li>ğŸ’» <b>PythonAnywhere:</b> Deploy a scheduled task bot</li>
        </ol>
        
        <div style="background: white; padding: 10px; border-radius: 3px; margin-top: 10px;">
            <b>ğŸš€ Heroku Deployment Checklist:</b>
            <pre style="background: #f5f5f5; padding: 10px;">
1. Create requirements.txt
2. Create Procfile
3. Create runtime.txt (python-3.9.13)
4. Initialize git repository
5. Create Heroku app: heroku create bot-name
6. Add buildpacks if needed
7. Set environment variables
8. Deploy: git push heroku main
9. Scale: heroku ps:scale worker=1
10. View logs: heroku logs --tail

# Procfile example
worker: python bot.py

# For web bots with GUI, you might need:
web: xvfb-run -a python bot.py

# Or for scheduled tasks:
worker: python scheduler.py
            </pre>
        </div>
    </div>
    
    <div style="background: #ffeaa7; padding: 15px; border-radius: 5px; margin-bottom: 15px;">
        <h3>ğŸ† Exercise 2: Build a Bot Dashboard (60 minutes)</h3>
        <p><b>Create a web dashboard to monitor your bots</b></p>
        
        <b>Requirements:</b>
        <ol>
            <li>ğŸ“Š Show real-time bot statistics and status</li>
            <li>ğŸ“ˆ Display performance charts and graphs</li>
            <li>ğŸš¨ Implement alert system with notifications</li>
            <li>ğŸ¯ Add bot control features (start/stop/restart)</li>
            <li>ğŸ“ View logs and error messages</li>
            <li>âš™ï¸ Configure bot settings through dashboard</li>
        </ol>
        
        <div style="background: white; padding: 10px; border-radius: 3px; margin-top: 10px;">
            <b>ğŸ“± Simple Flask Dashboard:</b>
            <pre style="background: #f5f5f5; padding: 10px;">
from flask import Flask, render_template, jsonify
import psutil
import datetime

app = Flask(__name__)

class BotDashboard:
    def __init__(self):
        self.bots = {}
    
    def register_bot(self, bot_name, bot_instance):
        self.bots[bot_name] = bot_instance
    
    def get_system_stats(self):
        return {
            'cpu_percent': psutil.cpu_percent(),
            'memory_percent': psutil.virtual_memory().percent,
            'disk_percent': psutil.disk_usage('/').percent,
            'uptime': str(datetime.datetime.now() - datetime.datetime.fromtimestamp(psutil.boot_time()))
        }

dashboard = BotDashboard()

@app.route('/')
def index():
    return render_template('dashboard.html')

@app.route('/api/stats')
def get_stats():
    stats = {
        'system': dashboard.get_system_stats(),
        'bots': {}
    }
    
    for name, bot in dashboard.bots.items():
        stats['bots'][name] = bot.monitor.get_current_stats()
    
    return jsonify(stats)

@app.route('/api/bot/<name>/control/<action>')
def control_bot(name, action):
    if name in dashboard.bots:
        bot = dashboard.bots[name]
        
        if action == 'start':
            bot.start()
            return jsonify({'status': 'started'})
        elif action == 'stop':
            bot.stop()
            return jsonify({'status': 'stopped'})
        elif action == 'restart':
            bot.restart()
            return jsonify({'status': 'restarted'})
    
    return jsonify({'error': 'Bot not found'}), 404
            </pre>
        </div>
    </div>
    
    <div style="background: #ffcccb; padding: 15px; border-radius: 5px;">
        <h3>ğŸ† Exercise 3: Scalable Bot Architecture Design (60 minutes)</h3>
        <p><b>Design a system for thousands of concurrent bots</b></p>
        
        <b>Design Challenges:</b>
        <ul>
            <li>ğŸ—ï¸ Design architecture for 10,000+ concurrent bot instances</li>
            <li>âš–ï¸ Implement load balancing and task distribution</li>
            <li>ğŸ—„ï¸ Design database schema for bot state and results</li>
            <li>ğŸ”’ Implement security and authentication system</li>
            <li>ğŸ“Š Design monitoring and alerting for large scale</li>
            <li>ğŸ’° Estimate costs for different cloud providers</li>
            <li>ğŸ”„ Design failover and disaster recovery</li>
            <li>ğŸ“± Create API for bot management and control</li>
        </ul>
        
        <b>Deliverables:</b>
        <ul>
            <li>ğŸ“ System architecture diagram</li>
            <li>ğŸ—„ï¸ Database schema design</li>
            <li>âš™ï¸ Configuration management plan</li>
            <li>ğŸ“Š Scaling strategy document</li>
            <li>ğŸ’° Cost estimation spreadsheet</li>
            <li>ğŸ”’ Security implementation plan</li>
        </ul>
    </div>
</div>

<h2>ğŸ  Homework Assignment</h2>
<div style="background-color: #fff0e6; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <h3>ğŸ¢ Build a "Bot-as-a-Service" Platform</h3>
    
    <b>ğŸ¯ Project Goal:</b>
    <p>Create a complete platform where users can deploy, manage, and monitor their automation bots without any technical knowledge.</p>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 15px 0;">
        <div>
            <h4>ğŸ¯ Platform Features:</h4>
            <ul>
                <li><b>Bot Marketplace:</b> Pre-built bots for common tasks</li>
                <li><b>Visual Bot Builder:</b> Create bots without coding</li>
                <li><b>One-Click Deployment:</b> Deploy bots to cloud with one click</li>
                <li><b>Monitoring Dashboard:</b> Real-time bot performance</li>
                <li><b>Alert System:</b> Get notified of bot issues</li>
                <li><b>Team Collaboration:</b> Share and manage bots with team</li>
                <li><b>API Access:</b> Programmatic bot management</li>
                <li><b>Analytics:</b> Bot performance and ROI tracking</li>
            </ul>
        </div>
        
        <div>
            <h4>ğŸ”§ Technical Architecture:</h4>
            <ul>
                <li>Microservices architecture</li>
                <li>Container orchestration (Kubernetes)</li>
                <li>Multi-cloud deployment</li>
                <li>Real-time monitoring with WebSockets</li>
                <li>Secure sandbox for user bots</li>
                <li>Automated scaling based on usage</li>
                <li>Comprehensive logging and auditing</li>
                <li>Disaster recovery and backups</li>
            </ul>
        </div>
    </div>
    
    <b>ğŸ“‹ Minimum Viable Product (MVP):</b>
    <div style="background: #f8f9fa; padding: 15px; border-radius: 5px; margin: 10px 0;">
        <ol>
            <li><b>User can:</b> Sign up and create account</li>
            <li><b>User can:</b> Choose from 3 pre-built bots</li>
            <li><b>User can:</b> Configure bot with simple form</li>
            <li><b>System can:</b> Deploy bot to cloud automatically</li>
            <li><b>User can:</b> View bot status and logs</li>
            <li><b>User can:</b> Start/stop their bots</li>
            <li><b>System can:</b> Send email alerts for bot failures</li>
        </ol>
    </div>
    
    <b>ğŸ¨ Platform Architecture Diagram:</b>
    <div style="background: white; padding: 15px; border-radius: 5px; margin: 10px 0; text-align: center;">
        <pre style="background: #f5f5f5; padding: 15px; border-radius: 5px;">
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    User Interface Layer                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â€¢ Web Dashboard (React/Vue)                                â”‚
â”‚  â€¢ Mobile App (React Native/Flutter)                        â”‚
â”‚  â€¢ REST API (FastAPI/Flask)                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Management Layer                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â€¢ User Management (Auth, Billing)                         â”‚
â”‚  â€¢ Bot Configuration & Templates                           â”‚
â”‚  â€¢ Task Scheduler & Orchestrator                           â”‚
â”‚  â€¢ Monitoring & Alert Manager                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Execution Layer                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â€¢ Bot Runner (Docker/Kubernetes)                          â”‚
â”‚  â€¢ Worker Pool Manager                                     â”‚
â”‚  â€¢ Resource Allocator                                      â”‚
â”‚  â€¢ Health Checker                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Data Layer                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â€¢ PostgreSQL (User data, Bot config)                      â”‚
â”‚  â€¢ Redis (Caching, Task queues)                            â”‚
â”‚  â€¢ MongoDB (Logs, Analytics)                               â”‚
â”‚  â€¢ S3/MinIO (File storage, Bot outputs)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        </pre>
    </div>
</div>

<h2>ğŸ“š Key Learning Points</h2>
<div style="background-color: #e8f5e8; padding: 20px; margin: 15px 0; border-radius: 10px;">
    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px;">
        <div>
            <h3>âœ… Deployment & Scaling Mastered:</h3>
            <ul>
                <li>ğŸ³ Containerizing bots with Docker</li>
                <li>â˜ï¸ Deploying to cloud platforms (AWS, Heroku, etc.)</li>
                <li>âš¡ Serverless bot architecture with AWS Lambda</li>
                <li>ğŸ“ˆ Horizontal and vertical scaling strategies</li>
                <li>ğŸ—ï¸ Distributed bot systems with message queues</li>
                <li>ğŸ“Š Comprehensive monitoring and logging</li>
                <li>ğŸš¨ Alerting and notification systems</li>
                <li>ğŸ”§ CI/CD pipelines for bot deployment</li>
            </ul>
        </div>
        
        <div>
            <h3>ğŸš€ Production-Ready Skills:</h3>
            <ul>
                <li>ğŸ¢ Designing scalable bot architectures</li>
                <li>ğŸ”’ Implementing security best practices</li>
                <li>ğŸ’° Cost optimization and management</li>
                <li>ğŸ“± Building bot management dashboards</li>
                <li>ğŸ”„ Implementing zero-downtime deployments</li>
                <li>ğŸ“ˆ Performance monitoring and optimization</li>
                <li>ğŸ›¡ï¸ Disaster recovery and backup strategies</li>
                <li>ğŸ‘¥ Team collaboration and bot sharing</li>
            </ul>
        </div>
    </div>
</div>

<div style="background-color: #4A90E2; color: white; padding: 20px; margin: 20px 0; border-radius: 10px; text-align: center;">
    <h2>ğŸ‰ Congratulations, Bot Architect!</h2>
    <p>You can now build, deploy, and scale professional automation bot systems that work reliably in production!</p>
    <div style="display: flex; justify-content: center; gap: 20px; margin-top: 15px;">
        <span>ğŸ—ï¸ Architect systems</span>
        <span>ğŸš€ Deploy globally</span>
        <span>ğŸ“ˆ Scale infinitely</span>
    </div>
</div>

<h3>ğŸ› ï¸ Deployment & Scaling Cheat Sheet</h3>
<pre style="background: #2d3748; color: #e2e8f0; padding: 15px; border-radius: 5px; overflow-x: auto;">
# =========== DEPLOYMENT & SCALING CHEAT SHEET ===========

# 1. Docker Commands
# Build image
docker build -t my-bot:latest .

# Run container
docker run -d --name my-bot my-bot:latest

# Run with environment variables
docker run -d --name my-bot \
  -e API_KEY=your_key \
  -e BOT_MODE=production \
  my-bot:latest

# Run with volume
docker run -d --name my-bot \
  -v $(pwd)/data:/app/data \
  my-bot:latest

# View logs
docker logs -f my-bot

# Execute command in running container
docker exec -it my-bot bash

# Stop and remove
docker stop my-bot && docker rm my-bot

# Clean up unused resources
docker system prune -a

# 2. Docker Compose
# Start services
docker-compose up -d

# View logs
docker-compose logs -f

# Stop services
docker-compose down

# Rebuild and restart
docker-compose up -d --build

# Scale a service
docker-compose up -d --scale worker=5

# 3. Heroku Commands
# Create app
heroku create bot-name

# Set environment variables
heroku config:set API_KEY=your_key

# Deploy
git push heroku main

# View logs
heroku logs --tail

# Scale dynos
heroku ps:scale worker=1

# Run one-off command
heroku run python script.py

# 4. AWS CLI Commands
# Configure AWS CLI
aws configure

# Deploy to Lambda
aws lambda create-function \
  --function-name my-bot \
  --runtime python3.9 \
  --handler lambda_function.lambda_handler \
  --role arn:aws:iam::account-id:role/lambda-role \
  --zip-file fileb://deployment-package.zip

# Update Lambda function
aws lambda update-function-code \
  --function-name my-bot \
  --zip-file fileb://deployment-package.zip

# Invoke Lambda
aws lambda invoke \
  --function-name my-bot \
  --payload '{"key": "value"}' \
  response.json

# 5. Kubernetes Basics
# Apply configuration
kubectl apply -f deployment.yaml

# View pods
kubectl get pods

# View logs
kubectl logs -f deployment/my-bot

# Scale deployment
kubectl scale deployment/my-bot --replicas=5

# Port forward
kubectl port-forward deployment/my-bot 8080:80

# Delete deployment
kubectl delete -f deployment.yaml

# 6. Monitoring Commands
# Check system resources
top
htop
df -h
free -h

# Check running processes
ps aux | grep python

# Check network connections
netstat -tulpn

# Check disk I/O
iotop

# 7. Log Management
# View last lines of log
tail -f bot.log

# Search in logs
grep "ERROR" bot.log

# Count errors
grep -c "ERROR" bot.log

# View logs from last hour
awk -v d1="$(date --date="-1 hour" "+%Y-%m-%d %H:%M:%S")" -v d2="$(date "+%Y-%m-%d %H:%M:%S")" '$0 > d1 && $0 < d2' bot.log

# Rotate logs (using logrotate)
# /etc/logrotate.d/my-bot
/var/log/my-bot.log {
    daily
    rotate 7
    compress
    delaycompress
    missingok
    notifempty
    create 644 root root
}

# 8. Process Management
# Start bot in background
nohup python bot.py > bot.log 2>&1 &

# Check if bot is running
pgrep -f "python bot.py"

# Stop bot
pkill -f "python bot.py"

# Start with process manager (pm2)
pm2 start bot.py --name my-bot
pm2 logs my-bot
pm2 stop my-bot
pm2 restart my-bot
pm2 delete my-bot

# 9. Scheduled Tasks (Cron)
# Edit crontab
crontab -e

# Cron examples
# Every minute
* * * * * python /path/to/bot.py

# Every hour at minute 0
0 * * * * python /path/to/bot.py

# Every day at 2 AM
0 2 * * * python /path/to/bot.py

# Every Monday at 3 AM
0 3 * * 1 python /path/to/bot.py

# Every 15 minutes
*/15 * * * * python /path/to/bot.py

# 10. Security Best Practices
# Use environment variables for secrets
import os
API_KEY = os.getenv('API_KEY')

# Never commit secrets to git
# Add to .gitignore:
.env
*.key
*.pem
secrets/

# Use secure connections
import requests
response = requests.get('https://example.com', verify=True)

# Validate input
def safe_input(user_input):
    # Remove potentially dangerous characters
    import re
    return re.sub(r'[^a-zA-Z0-9\s]', '', user_input)

# Implement rate limiting
import time
class RateLimiter:
    def __init__(self, max_calls, period):
        self.max_calls = max_calls
        self.period = period
        self.calls = []
    
    def __call__(self):
        now = time.time()
        self.calls = [call for call in self.calls if call > now - self.period]
        
        if len(self.calls) >= self.max_calls:
            raise Exception("Rate limit exceeded")
        
        self.calls.append(now)

# 11. Error Handling in Production
def safe_execute(bot_function, max_retries=3, delay=5):
    """Execute bot function with retries"""
    for attempt in range(max_retries):
        try:
            return bot_function()
        except Exception as e:
            print(f"Attempt {attempt + 1} failed: {e}")
            
            if attempt == max_retries - 1:
                # Log critical error
                log_critical_error(e)
                # Send alert
                send_alert(f"Bot failed after {max_retries} attempts: {e}")
                raise
            
            time.sleep(delay * (2 ** attempt))  # Exponential backoff

# 12. Performance Optimization
import cProfile
import pstats

# Profile bot performance
def profile_bot():
    profiler = cProfile.Profile()
    profiler.enable()
    
    # Run bot code
    main()
    
    profiler.disable()
    
    # Save results
    stats = pstats.Stats(profiler)
    stats.sort_stats('cumulative')
    stats.print_stats(20)  # Top 20 functions
    
    # Save to file
    stats.dump_stats('bot_profile.prof')

# 13. Database Optimization
# Use connection pooling
from sqlalchemy import create_engine
from sqlalchemy.pool import QueuePool

engine = create_engine(
    'postgresql://user:pass@localhost/db',
    poolclass=QueuePool,
    pool_size=10,
    max_overflow=20,
    pool_recycle=3600
)

# Use indexes for frequent queries
# Batch operations instead of individual queries
# Use transactions for multiple related operations

# 14. Memory Management
import gc
import tracemalloc

# Track memory usage
tracemalloc.start()

# ... bot code ...

snapshot = tracemalloc.take_snapshot()
top_stats = snapshot.statistics('lineno')

print("[ Top 10 memory consumers ]")
for stat in top_stats[:10]:
    print(stat)

# Force garbage collection
gc.collect()

# 15. Cost Optimization
# Shut down unused resources
# Use spot instances for non-critical bots
# Implement auto-scaling based on demand
# Monitor and set budget alerts
# Use serverless for sporadic workloads

# 16. Backup Strategies
import shutil
from datetime import datetime

def backup_data(source_dir, backup_dir):
    """Backup bot data"""
    timestamp = datetime.now().strftime('%Y%m%d_%H%M%S')
    backup_path = f"{backup_dir}/backup_{timestamp}"
    
    shutil.copytree(source_dir, backup_path)
    
    # Keep only last 7 backups
    backups = sorted([d for d in os.listdir(backup_dir) if d.startswith('backup_')])
    
    if len(backups) > 7:
        for old_backup in backups[:-7]:
            shutil.rmtree(os.path.join(backup_dir, old_backup))
    
    return backup_path

# Schedule regular backups
# Test restore process periodically
# Store backups in different location/cloud

# 17. Documentation
class BotDocumentation:
    """Auto-generate bot documentation"""
    
    @classmethod
    def generate_readme(cls, bot_class):
        """Generate README from bot class docstring"""
        readme = f"# {bot_class.__name__}\n\n"
        
        if bot_class.__doc__:
            readme += bot_class.__doc__ + "\n\n"
        
        readme += "## Configuration\n\n"
        readme += "Environment variables:\n"
        
        # Extract from __init__ docstring or annotations
        # ... implementation ...
        
        return readme

# 18. Testing in Production
# A/B testing for bot algorithms
# Canary deployments
# Feature flags
# Gradual rollouts

# 19. Legal & Compliance
# Terms of Service for bot usage
# Privacy policy for data handling
# GDPR compliance for EU users
# Data retention policies
# Abuse prevention mechanisms

# 20. Continuous Improvement
# Collect feedback from bot usage
# Monitor success metrics
# Regularly update dependencies
# Security vulnerability scanning
# Performance benchmarking
</pre>
`
},

            "10-37": {
  icon: "fa-project-diagram",
  title: "Capstone Kickoff â€“ Find a Real Problem",
  html: `<h1>Month 10, Week 1: Capstone Kickoff â€“ Find a Real Problem</h1>
<p>Welcome to <b>Quarter 4: The Professional!</b> This is where we take everything weâ€™ve learned and build something real for a real person or business. Today we start by finding the right problem to solve.</p>

<div class="analogy-box">
    <b>Analogy: The Architect's Blueprint ğŸ“</b><br/>
    Problem â†’ Building site<br/>
    Requirements â†’ Blueprint<br/>
    Code â†’ Building materials<br/>
    Testing â†’ Inspection<br/>
    Deployment â†’ Grand opening<br/>
    User feedback â†’ Living in the building
</div>

<h3>What is a Capstone Project?</h3>
<div style="background-color: #f0f8ff; padding: 20px; border-radius: 10px;">
    <p>A capstone project is a <b>real-world software project</b> that solves a real problem for a real user. Itâ€™s not just a school assignmentâ€”itâ€™s something you could show to a future employer or even sell!</p>
    
    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin-top: 15px;">
        <div style="background: #e3f2fd; padding: 15px; border-radius: 8px;">
            <h4>ğŸ¯ Goal</h4>
            <p>Build a complete, useful tool from scratch.</p>
        </div>
        <div style="background: #f3e5f5; padding: 15px; border-radius: 8px;">
            <h4>ğŸ‘¥ User</h4>
            <p>Someone other than you will use it.</p>
        </div>
        <div style="background: #e8f5e8; padding: 15px; border-radius: 8px;">
            <h4>ğŸ Outcome</h4>
            <p>A working app, a presentation, and a certificate.</p>
        </div>
    </div>
</div>

<h3>Step 1: Brainstorm Problems</h3>
<p>Think about people or businesses around you. Whatâ€™s annoying, slow, or messy that software could fix?</p>

<div style="background-color: #fff3cd; padding: 20px; border-radius: 10px; margin: 20px 0;">
    <h4>ğŸ’¡ Example Problems from Past Students:</h4>
    <ul>
        <li><b>Local Tailor:</b> â€œI lose track of customer measurements and due dates.â€</li>
        <li><b>School Librarian:</b> â€œIt takes too long to check books in and out by hand.â€</li>
        <li><b>Restaurant Owner:</b> â€œI need a simple menu and ordering system for my food truck.â€</li>
        <li><b>Sports Coach:</b> â€œI want to track player stats and attendance.â€</li>
        <li><b>Music Teacher:</b> â€œI need to schedule lessons and send reminders.â€</li>
    </ul>
</div>

<h3>Step 2: Problem Interview Template</h3>
<p>Talk to your potential user and ask these questions:</p>

<table style="width:100%; border-collapse: collapse; margin: 20px 0;">
    <tr style="background: #4A90E2; color: white;">
        <th style="padding: 12px;">Question</th>
        <th style="padding: 12px;">Why It Matters</th>
        <th style="padding: 12px;">Example Answer</th>
    </tr>
    <tr style="background: #f8f9fa;">
        <td style="padding: 10px; border: 1px solid #ddd;">Whatâ€™s the biggest hassle in your daily work?</td>
        <td style="padding: 10px; border: 1px solid #ddd;">Finds the pain point</td>
        <td style="padding: 10px; border: 1px solid #ddd;">â€œI forget which customer ordered what.â€</td>
    </tr>
    <tr style="background: white;">
        <td style="padding: 10px; border: 1px solid #ddd;">How do you solve it now?</td>
        <td style="padding: 10px; border: 1px solid #ddd;">Understands current process</td>
        <td style="padding: 10px; border: 1px solid #ddd;">â€œI use a paper notebook.â€</td>
    </tr>
    <tr style="background: #f8f9fa;">
        <td style="padding: 10px; border: 1px solid #ddd;">What would a perfect solution do?</td>
        <td style="padding: 10px; border: 1px solid #ddd;">Defines the dream features</td>
        <td style="padding: 10px; border: 1px solid #ddd;">â€œRemind me when orders are due.â€</td>
    </tr>
    <tr style="background: white;">
        <td style="padding: 10px; border: 1px solid #ddd;">Who else would use it?</td>
        <td style="padding: 10px; border: 1px solid #ddd;">Identifies more users</td>
        <td style="padding: 10px; border: 1px solid #ddd;">â€œMy assistant and maybe my customers.â€</td>
    </tr>
</table>

<h3>Step 3: Project Canvas â€“ Fill This Out!</h3>
<div style="background-color: #e8f5e8; padding: 20px; border-radius: 10px;">
    <h4>ğŸ“‹ Project Canvas Template</h4>
    <pre style="background: white; padding: 15px; border-left: 5px solid #2E7D32;">
<b>Project Name:</b> [e.g., â€œStitchTrack â€“ Tailor Management Systemâ€]

<b>Problem:</b> [Whatâ€™s the pain?]
Example: â€œTailors lose paper measurement slips and forget deadlines.â€

<b>Target User:</b> [Who will use it?]
Example: â€œSmall tailor shop owners, 1â€“3 employees.â€

<b>Core Features (MVP):</b>
1. Add customer + measurements
2. Track order status (pending, in progress, done)
3. Due date reminders

<b>Nice-to-Have Features:</b>
1. Send SMS reminders
2. Photo upload of designs
3. Invoice printing

<b>Tech Stack:</b>
â€¢ Backend: Python + Flask
â€¢ Database: SQLite
â€¢ Frontend: HTML/CSS (from Year 2)
â€¢ Hosting: PythonAnywhere (free)

<b>Timeline:</b>
â€¢ Week 1â€“2: Design & plan
â€¢ Week 3â€“6: Build core features
â€¢ Week 7â€“8: Test & fix bugs
â€¢ Week 9â€“10: Deploy & present
</pre>
</div>

<h3>Step 4: Choose Your Project Category</h3>
<p>Pick one type to focus your ideas:</p>

<div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; margin: 20px 0;">
    <div style="background: #ffe6e6; padding: 15px; border-radius: 10px;">
        <h4>ğŸ“¦ Inventory & Sales</h4>
        <ul>
            <li>Store inventory tracker</li>
            <li>Restaurant menu + orders</li>
            <li>Book library system</li>
            <li>Ticket sales for events</li>
        </ul>
    </div>
    <div style="background: #e6f7ff; padding: 15px; border-radius: 10px;">
        <h4>ğŸ“… Scheduling & Booking</h4>
        <ul>
            <li>Appointment scheduler</li>
            <li>Class or lesson planner</li>
            <li>Sports team manager</li>
            <li>Hotel room booking</li>
        </ul>
    </div>
    <div style="background: #f0ffe6; padding: 15px; border-radius: 10px;">
        <h4>ğŸ“Š Tracking & Reporting</h4>
        <ul>
            <li>Expense tracker</li>
            <li>Habit builder app</li>
            <li>Plant watering reminder</li>
            <li>Homework deadline tracker</li>
        </ul>
    </div>
    <div style="background: #fff0e6; padding: 15px; border-radius: 10px;">
        <h4>ğŸ® Fun & Games</h4>
        <ul>
            <li>Quiz game with scoreboard</li>
            <li>Personalized story generator</li>
            <li>Music playlist builder</li>
            <li>Pixel art drawing tool</li>
        </ul>
    </div>
</div>

<h3>Todayâ€™s Hands-On Workshop</h3>
<div style="background-color: #f0f8ff; padding: 20px; border-radius: 10px;">
    <b>Activity 1: Problem Hunt (45 minutes)</b>
    <p>Interview a family member, teacher, or neighbor. Use the Problem Interview Template above. Write down their answers.</p>
    
    <b>Activity 2: Idea Pitch (45 minutes)</b>
    <p>Prepare a 2-minute pitch for your project. Include:</p>
    <ul>
        <li>Problem statement</li>
        <li>Who it helps</li>
        <li>3 core features</li>
        <li>Why youâ€™re excited to build it</li>
    </ul>
    
    <b>Activity 3: Draw Your App (30 minutes)</b>
    <p>Sketch what the main screen of your app will look like. Use paper or a simple drawing tool. Label buttons and features.</p>
</div>

<h3>Homework: Project Proposal</h3>
<div style="background-color: #fff0e6; padding: 20px; border-radius: 10px;">
    <p>Write a one-page project proposal using the Project Canvas above. Submit it next week.</p>
    
    <b>Required Sections:</b>
    <ol>
        <li>Project Title & Tagline</li>
        <li>Problem Description</li>
        <li>User Persona (name, age, job, frustration)</li>
        <li>3 MVP Features</li>
        <li>Tech Stack Plan</li>
        <li>Sketch of 1 main screen</li>
    </ol>
</div>

<h3>Key Takeaways</h3>
<div style="background-color: #e8f5e8; padding: 20px; border-radius: 10px;">
    <ul>
        <li>âœ… A good project solves a <b>real pain</b> for a <b>real person</b>.</li>
        <li>âœ… Start smallâ€”3 core features are enough for MVP.</li>
        <li>âœ… Talk to your user before writing any code.</li>
        <li>âœ… Sketch your idea to make it visual.</li>
        <li>âœ… Choose tools you already know (Python, SQL, HTML).</li>
    </ul>
</div>

<h3>ğŸ¤ Teacherâ€™s Notes:</h3>
<p>This week is about <b>ideation and validation</b>. Help students choose projects that are:</p>
<ul>
    <li><b>Scoped small</b> (can be built in 8â€“10 weeks)</li>
    <li><b>Personally meaningful</b> (they care about the user)</li>
    <li><b>Technically achievable</b> (uses skills from Year 2â€“3)</li>
</ul>
<p>Encourage creativityâ€”even a â€œplant watering reminderâ€ can be a great capstone if itâ€™s used by a real gardener!</p>
`
},
            "10-38": {
  icon: "fa-clipboard-list",
  title: "Define Requirements & User Stories",
  html: `<h1>Month 10, Week 2: Define Requirements & User Stories</h1>
<p>Now that we have a problem to solve, letâ€™s turn it into a clear plan. This week weâ€™ll define exactly what our app should doâ€”and what it shouldnâ€™t!</p>

<div class="analogy-box">
    <b>Analogy: The Recipe for a Great App ğŸ“</b><br/>
    Requirements â†’ Recipe ingredients<br/>
    User Stories â†’ Cooking steps<br/>
    Features â†’ Finished dishes<br/>
    Priorities â†’ Most important meals first<br/>
    Scope â†’ Donâ€™t try to cook everything at once!
</div>

<h3>What are Requirements?</h3>
<div style="background-color: #f0f8ff; padding: 20px; border-radius: 10px;">
    <p>Requirements are the <b>must-have</b> things your app needs to do. They come from talking to your user and understanding their needs.</p>
    
    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin-top: 15px;">
        <div style="background: #e3f2fd; padding: 15px; border-radius: 8px;">
            <h4>âœ… Functional Requirements</h4>
            <p>What the app <b>does</b></p>
            <ul>
                <li>User can log in</li>
                <li>System saves data to database</li>
                <li>App sends email reminders</li>
            </ul>
        </div>
        <div style="background: #f3e5f5; padding: 15px; border-radius: 8px;">
            <h4>ğŸ¨ Non-Functional Requirements</h4>
            <p>How the app <b>performs</b></p>
            <ul>
                <li>Loads in under 3 seconds</li>
                <li>Works on mobile phones</li>
                <li>Keeps data secure</li>
            </ul>
        </div>
    </div>
</div>

<h3>Writing User Stories</h3>
<p>User stories are simple sentences that describe what users want to do with your app. They follow this format:</p>

<div style="background-color: #fff3cd; padding: 20px; border-radius: 10px; margin: 20px 0;">
    <h4>ğŸ“– User Story Template:</h4>
    <div style="background: white; padding: 15px; border-left: 5px solid #FF9800; margin: 10px 0;">
        <b>As a</b> [type of user]<br/>
        <b>I want to</b> [perform some task]<br/>
        <b>So that</b> [achieve some goal/value]
    </div>
    
    <h5>Real Examples:</h5>
    <ul>
        <li><b>As a</b> tailor<br/><b>I want to</b> add customer measurements<br/><b>So that</b> I don't lose paper slips</li>
        <li><b>As a</b> restaurant owner<br/><b>I want to</b> see today's orders<br/><b>So that</b> I can prepare food on time</li>
        <li><b>As a</b> student<br/><b>I want to</b> set homework reminders<br/><b>So that</b> I don't forget deadlines</li>
    </ul>
</div>

<h3>Prioritizing with MoSCoW Method</h3>
<p>Not all features are equally important. Use this simple system to decide what to build first:</p>

<table style="width:100%; border-collapse: collapse; margin: 20px 0;">
    <tr style="background: #4A90E2; color: white;">
        <th style="padding: 12px;">Priority</th>
        <th style="padding: 12px;">Meaning</th>
        <th style="padding: 12px;">Examples</th>
        <th style="padding: 12px;">Color Code</th>
    </tr>
    <tr style="background: #ffebee;">
        <td style="padding: 10px; border: 1px solid #ddd;"><b>MUST HAVE</b></td>
        <td style="padding: 10px; border: 1px solid #ddd;">App won't work without it</td>
        <td style="padding: 10px; border: 1px solid #ddd;">Save data, basic search</td>
        <td style="padding: 10px; border: 1px solid #ddd;">ğŸ”´ RED</td>
    </tr>
    <tr style="background: #fff8e1;">
        <td style="padding: 10px; border: 1px solid #ddd;"><b>SHOULD HAVE</b></td>
        <td style="padding: 10px; border: 1px solid #ddd;">Important but not critical</td>
        <td style="padding: 10px; border: 1px solid #ddd;">Email notifications, reports</td>
        <td style="padding: 10px; border: 1px solid #ddd;">ğŸŸ¡ YELLOW</td>
    </tr>
    <tr style="background: #e8f5e8;">
        <td style="padding: 10px; border: 1px solid #ddd;"><b>COULD HAVE</b></td>
        <td style="padding: 10px; border: 1px solid #ddd;">Nice but can wait</td>
        <td style="padding: 10px; border: 1px solid #ddd;">Dark mode, fancy charts</td>
        <td style="padding: 10px; border: 1px solid #ddd;">ğŸŸ¢ GREEN</td>
    </tr>
    <tr style="background: #f5f5f5;">
        <td style="padding: 10px; border: 1px solid #ddd;"><b>WON'T HAVE</b></td>
        <td style="padding: 10px; border: 1px solid #ddd;">Not in this version</td>
        <td style="padding: 10px; border: 1px solid #ddd;">Mobile app, AI features</td>
        <td style="padding: 10px; border: 1px solid #ddd;">âš« BLACK</td>
    </tr>
</table>

<h3>Create Your Requirements Document</h3>
<div style="background-color: #e8f5e8; padding: 20px; border-radius: 10px;">
    <h4>ğŸ“‹ Requirements Template - Fill This Out!</h4>
    <pre style="background: white; padding: 15px; border-left: 5px solid #2E7D32;">
<b>Project:</b> [Your project name]

<b>MVP Goal:</b> [One-sentence summary]
Example: "A web app where tailors can track customer orders and measurements."

<b>MUST HAVE Features (ğŸ”´):</b>
1. User can add new customer
2. User can enter measurements for each order
3. User can mark order as completed
4. Data saves to database

<b>SHOULD HAVE Features (ğŸŸ¡):</b>
1. Send email reminder 1 day before due date
2. Search customers by name
3. Print simple receipt

<b>COULD HAVE Features (ğŸŸ¢):</b>
1. Upload photo of clothing design
2. Multiple user accounts
3. Dashboard with statistics

<b>WON'T HAVE This Time (âš«):</b>
1. Mobile app version
2. Online payments
3. Social media sharing

<b>Success Metrics:</b>
â€¢ User can complete order in under 2 minutes
â€¢ Data never gets lost
â€¢ Works on Chrome and Firefox
</pre>
</div>

<h3>Todayâ€™s Hands-On Workshop</h3>
<div style="background-color: #f0f8ff; padding: 20px; border-radius: 10px;">
    <b>Activity 1: Write 10 User Stories (45 minutes)</b>
    <p>For your project, write 10 user stories. Include stories for different types of users if applicable.</p>
    
    <b>Activity 2: Priority Sorting Game (45 minutes)</b>
    <p>Write each feature on a sticky note or card. Sort them into MoSCoW categories with your partner.</p>
    
    <b>Activity 3: Create Your MVP List (30 minutes)</b>
    <p>Based on your sorting, write down your 3-5 MUST HAVE features. These will be your focus for the next few weeks.</p>
</div>

<h3>Homework: Complete Requirements Document</h3>
<div style="background-color: #fff0e6; padding: 20px; border-radius: 10px;">
    <p>Fill out the complete Requirements Template above. Be specific about what you WILL build and what you WON'T build.</p>
    
    <b>Bonus Challenge:</b>
    <p>Create a simple flowchart showing how a user will move through your app. You can use:
    <ul>
        <li>Paper and pencil</li>
        <li>Draw.io (free online tool)</li>
        <li>Even PowerPoint/Google Slides shapes!</li>
    </ul>
</div>

<h3>Key Takeaways</h3>
<div style="background-color: #e8f5e8; padding: 20px; border-radius: 10px;">
    <ul>
        <li>âœ… Requirements tell us WHAT to build</li>
        <li>âœ… User stories keep us focused on USER needs</li>
        <li>âœ… Prioritization helps us build the important stuff first</li>
        <li>âœ… Saying "no" to features is just as important as saying "yes"</li>
        <li>âœ… An MVP (Minimum Viable Product) has only MUST HAVE features</li>
    </ul>
</div>

<h3>ğŸ¤ Teacherâ€™s Notes:</h3>
<p>This week is about <b>scope control</b>. Kids often want to build EVERYTHING. Help them focus on a small, achievable MVP. Use the MoSCoW method to make tough decisions. Remind them: "We can always add more features later!"</p>
`
},
            "10-39": {
  icon: "fa-database",
  title: "Design Your Database Schema",
  html: `<h1>Month 10, Week 3: Design Your Database Schema</h1>
<p>Every great app needs a great database! This week we'll design how our data will be organized and stored.</p>

<div class="analogy-box">
    <b>Analogy: The Digital Filing Cabinet ğŸ“‚</b><br/>
    Database â†’ Filing cabinet<br/>
    Tables â†’ Drawers in the cabinet<br/>
    Rows â†’ Files in the drawer<br/>
    Columns â†’ Information on each file<br/>
    Relationships â†’ Connecting files with strings<br/>
    Queries â†’ Finding files quickly
</div>

<h3>What is a Database Schema?</h3>
<div style="background-color: #f0f8ff; padding: 20px; border-radius: 10px;">
    <p>A schema is the <b>blueprint</b> of your database. It defines what tables you need, what data goes in them, and how they connect to each other.</p>
    
    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin-top: 15px;">
        <div style="background: #e3f2fd; padding: 15px; border-radius: 8px;">
            <h4>ğŸ“Š Table = One Type of Thing</h4>
            <p>Examples:</p>
            <ul>
                <li>Customers table</li>
                <li>Products table</li>
                <li>Orders table</li>
                <li>Users table</li>
            </ul>
        </div>
        <div style="background: #f3e5f5; padding: 15px; border-radius: 8px;">
            <h4>ğŸ“ Columns = Information About That Thing</h4>
            <p>For a Customers table:</p>
            <ul>
                <li>customer_id</li>
                <li>name</li>
                <li>email</li>
                <li>phone</li>
                <li>created_date</li>
            </ul>
        </div>
    </div>
</div>

<h3>Database Design Rules</h3>
<p>Follow these simple rules to design a good database:</p>

<div style="background-color: #fff3cd; padding: 20px; border-radius: 10px; margin: 20px 0;">
    <h4>ğŸ“ Rule 1: One Table, One Job</h4>
    <p>Each table should store information about ONE type of thing.</p>
    
    <h4>ğŸ”‘ Rule 2: Every Table Needs an ID</h4>
    <p>Every table should have a unique ID column (like customer_id, order_id). This is called a <b>primary key</b>.</p>
    
    <h4>ğŸ¤ Rule 3: Connect Tables with IDs</h4>
    <p>When one table needs to reference another table, use the ID. This is called a <b>foreign key</b>.</p>
    
    <h4>ğŸ“¦ Rule 4: Keep Data Small</h4>
    <p>Don't repeat the same information in multiple places. This is called <b>normalization</b>.</p>
</div>

<h3>Example: Tailor Shop Database</h3>
<p>Let's look at a complete example for our tailor shop project:</p>

<div style="background-color: #e8f5e8; padding: 20px; border-radius: 10px;">
    <h4>ğŸ§µ Tailor Shop Database Schema</h4>
    
    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin: 20px 0;">
        <div style="background: white; padding: 15px; border-radius: 8px; border: 2px solid #4CAF50;">
            <h5>ğŸ‘¤ customers Table</h5>
            <pre style="background: #f5f5f5; padding: 10px;">
customer_id (PK)
name
phone
email
address
notes
created_date</pre>
        </div>
        
        <div style="background: white; padding: 15px; border-radius: 8px; border: 2px solid #2196F3;">
            <h5>ğŸ‘• orders Table</h5>
            <pre style="background: #f5f5f5; padding: 10px;">
order_id (PK)
customer_id (FK)
description
measurements
due_date
status
price
created_date</pre>
        </div>
        
        <div style="background: white; padding: 15px; border-radius: 8px; border: 2px solid #FF9800;">
            <h5>ğŸ‘¥ users Table</h5>
            <pre style="background: #f5f5f5; padding: 10px;">
user_id (PK)
username
password_hash
full_name
role
created_date</pre>
        </div>
    </div>
    
    <h5>ğŸ”— How They Connect:</h5>
    <div style="text-align: center; margin: 20px 0;">
        <div style="background: white; display: inline-block; padding: 15px; border-radius: 10px; border: 2px solid #4CAF50; margin: 10px;">
            customers<br/>â¬‡<br/>customer_id
        </div>
        <div style="display: inline-block; padding: 10px;">â†’ links to â†’</div>
        <div style="background: white; display: inline-block; padding: 15px; border-radius: 10px; border: 2px solid #2196F3; margin: 10px;">
            orders<br/>â¬†<br/>customer_id
        </div>
    </div>
    <p><b>Translation:</b> Each order is connected to ONE customer through the customer_id.</p>
</div>

<h3>Data Types Matter!</h3>
<p>Each column needs the right data type:</p>

<table style="width:100%; border-collapse: collapse; margin: 20px 0;">
    <tr style="background: #4A90E2; color: white;">
        <th style="padding: 12px;">Data Type</th>
        <th style="padding: 12px;">What It Holds</th>
        <th style="padding: 12px;">Example</th>
        <th style="padding: 12px;">Size/Format</th>
    </tr>
    <tr style="background: #f8f9fa;">
        <td style="padding: 10px; border: 1px solid #ddd;"><b>INTEGER</b></td>
        <td style="padding: 10px; border: 1px solid #ddd;">Whole numbers</td>
        <td style="padding: 10px; border: 1px solid #ddd;">Age, quantity, ID numbers</td>
        <td style="padding: 10px; border: 1px solid #ddd;">-2, 0, 15, 1000</td>
    </tr>
    <tr style="background: white;">
        <td style="padding: 10px; border: 1px solid #ddd;"><b>VARCHAR</b></td>
        <td style="padding: 10px; border: 1px solid #ddd;">Text (variable length)</td>
        <td style="padding: 10px; border: 1px solid #ddd;">Names, addresses, emails</td>
        <td style="padding: 10px; border: 1px solid #ddd;">VARCHAR(100) = up to 100 chars</td>
    </tr>
    <tr style="background: #f8f9fa;">
        <td style="padding: 10px; border: 1px solid #ddd;"><b>DATE</b></td>
        <td style="padding: 10px; border: 1px solid #ddd;">Dates only</td>
        <td style="padding: 10px; border: 1px solid #ddd;">Birthdays, due dates</td>
        <td style="padding: 10px; border: 1px solid #ddd;">YYYY-MM-DD</td>
    </tr>
    <tr style="background: white;">
        <td style="padding: 10px; border: 1px solid #ddd;"><b>DATETIME</b></td>
        <td style="padding: 10px; border: 1px solid #ddd;">Date + time</td>
        <td style="padding: 10px; border: 1px solid #ddd;">Order time, login time</td>
        <td style="padding: 10px; border: 1px solid #ddd;">YYYY-MM-DD HH:MM:SS</td>
    </tr>
    <tr style="background: #f8f9fa;">
        <td style="padding: 10px; border: 1px solid #ddd;"><b>BOOLEAN</b></td>
        <td style="padding: 10px; border: 1px solid #ddd;">True/False</td>
        <td style="padding: 10px; border: 1px solid #ddd;">Is active, is completed</td>
        <td style="padding: 10px; border: 1px solid #ddd;">TRUE or FALSE</td>
    </tr>
    <tr style="background: white;">
        <td style="padding: 10px; border: 1px solid #ddd;"><b>DECIMAL</b></td>
        <td style="padding: 10px; border: 1px solid #ddd;">Exact numbers</td>
        <td style="padding: 10px; border: 1px solid #ddd;">Prices, measurements</td>
        <td style="padding: 10px; border: 1px solid #ddd;">DECIMAL(10,2) = 12345678.99</td>
    </tr>
</table>

<h3>Design Your Own Database Schema</h3>
<div style="background-color: #e8f5e8; padding: 20px; border-radius: 10px;">
    <h4>ğŸ“‹ Database Design Worksheet</h4>
    <p>For YOUR project, design your database:</p>
    
    <div style="background: white; padding: 15px; border-radius: 8px; margin: 10px 0;">
        <h5>Step 1: List Your Tables</h5>
        <p>What types of things will your app store? (Examples: users, products, orders, posts, comments)</p>
        <p>My tables: ___________________________________________________</p>
    </div>
    
    <div style="background: white; padding: 15px; border-radius: 8px; margin: 10px 0;">
        <h5>Step 2: Design Each Table</h5>
        <p>For each table, list the columns with data types:</p>
        <pre style="background: #f5f5f5; padding: 10px;">
Table: [Your first table]
Columns:
â€¢ id (INTEGER, PRIMARY KEY)
â€¢ name (VARCHAR(100))
â€¢ email (VARCHAR(100))
â€¢ created_at (DATETIME)
â€¢ [Add your own...]</pre>
    </div>
    
    <div style="background: white; padding: 15px; border-radius: 8px; margin: 10px 0;">
        <h5>Step 3: Draw the Connections</h5>
        <p>How do your tables connect? Draw arrows between them:</p>
        <p>Example: customers â†’ orders (one customer can have many orders)</p>
    </div>
</div>

<h3>Today's Hands-On Workshop</h3>
<div style="background-color: #f0f8ff; padding: 20px; border-radius: 10px;">
    <b>Activity 1: Paper Database Design (60 minutes)</b>
    <p>Using index cards or paper, create physical cards for each table. Write columns on each card. Use string or drawn lines to connect related tables.</p>
    
    <b>Activity 2: SQL CREATE TABLE Practice (45 minutes)</b>
    <p>Write the SQL commands to create your tables:</p>
    <pre style="background: #36454f; color: white; padding: 15px; border-radius: 5px;">
-- Example for customers table
CREATE TABLE customers (
    customer_id INTEGER PRIMARY KEY AUTOINCREMENT,
    name VARCHAR(100) NOT NULL,
    email VARCHAR(100),
    phone VARCHAR(20),
    created_date DATETIME DEFAULT CURRENT_TIMESTAMP
);</pre>
    
    <b>Activity 3: Test with Sample Data (15 minutes)</b>
    <p>Write INSERT statements to add sample data to your tables:</p>
    <pre style="background: #36454f; color: white; padding: 15px; border-radius: 5px;">
INSERT INTO customers (name, email, phone)
VALUES ('Alice Smith', 'alice@email.com', '555-1234');</pre>
</div>

<h3>Homework: Complete Database Design</h3>
<div style="background-color: #fff0e6; padding: 20px; border-radius: 10px;">
    <p>Create a complete database design for your project including:</p>
    <ol>
        <li>List of all tables (2-4 tables is perfect for MVP)</li>
        <li>All columns with data types for each table</li>
        <li>Primary keys marked with (PK)</li>
        <li>Foreign keys marked with (FK)</li>
        <li>A diagram showing how tables connect</li>
        <li>SQL CREATE TABLE statements for all tables</li>
    </ol>
    
    <b>Tools You Can Use:</b>
    <ul>
        <li><b>Draw.io</b> (free diagram tool)</li>
        <li><b>Lucidchart</b> (free for students)</li>
        <li><b>Pen and paper</b> (take a photo)</li>
        <li><b>dbdiagram.io</b> (specifically for databases)</li>
    </ul>
</div>

<h3>Key Takeaways</h3>
<div style="background-color: #e8f5e8; padding: 20px; border-radius: 10px;">
    <ul>
        <li>âœ… Good database design makes coding easier later</li>
        <li>âœ… Each table = one type of thing</li>
        <li>âœ… Every table needs a primary key (ID)</li>
        <li>âœ… Connect tables with foreign keys</li>
        <li>âœ… Choose the right data type for each column</li>
        <li>âœ… Start with 2-4 tables for your MVP</li>
    </ul>
</div>

<h3>ğŸ¤ Teacher's Notes:</h3>
<p>Database design can be abstract for kids. Use lots of physical analogies (filing cabinets, index cards). Have them actually draw their tables on large paper. Emphasize that getting the database right now will save headaches later. For complex relationships, start with just 2 tables that clearly connect (like customers and orders).</p>
`
},
            "10-40": {
  icon: "fa-code",
  title: "Plan Your Code Structure & Setup",
  html: `<h1>Month 10, Week 4: Plan Your Code Structure & Setup</h1>
<p>Time to plan how our code will be organized! Good structure makes coding easier and debugging faster.</p>

<div class="analogy-box">
    <b>Analogy: Building a House ğŸ </b><br/>
    Folders â†’ Rooms in the house<br/>
    Files â†’ Furniture in each room<br/>
    Functions â†’ Tools in the toolbox<br/>
    Imports â†’ Inviting guests over<br/>
    Main file â†’ Front door<br/>
    Config files â†’ House blueprints
</div>

<h3>Why Code Structure Matters</h3>
<div style="background-color: #f0f8ff; padding: 20px; border-radius: 10px;">
    <p>A well-organized project is:</p>
    
    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin-top: 15px;">
        <div style="background: #e3f2fd; padding: 15px; border-radius: 8px;">
            <h4>ğŸ” Easy to Navigate</h4>
            <p>Find files quickly when you need them</p>
        </div>
        <div style="background: #f3e5f5; padding: 15px; border-radius: 8px;">
            <h4>ğŸ‘¥ Team-Friendly</h4>
            <p>Others can understand your code</p>
        </div>
        <div style="background: #e8f5e8; padding: 15px; border-radius: 8px;">
            <h4>ğŸ› Easy to Debug</h4>
            <p>Problems are easier to find and fix</p>
        </div>
    </div>
</div>

<h3>Standard Project Structure</h3>
<p>Most Python web projects follow this basic structure:</p>

<div style="background-color: #fff3cd; padding: 20px; border-radius: 10px; margin: 20px 0;">
    <pre style="background: white; padding: 15px; border-radius: 8px; font-family: monospace;">
my_capstone_project/
â”‚
â”œâ”€â”€ app.py                    # Main application file
â”œâ”€â”€ requirements.txt          # List of Python packages needed
â”œâ”€â”€ README.md                 # Project documentation
â”œâ”€â”€ .gitignore                # Files to ignore in Git
â”‚
â”œâ”€â”€ static/                   # CSS, JavaScript, images
â”‚   â”œâ”€â”€ css/
â”‚   â”‚   â””â”€â”€ style.css
â”‚   â”œâ”€â”€ js/
â”‚   â”‚   â””â”€â”€ script.js
â”‚   â””â”€â”€ images/
â”‚
â”œâ”€â”€ templates/                # HTML templates
â”‚   â”œâ”€â”€ base.html            # Base template
â”‚   â”œâ”€â”€ index.html           # Home page
â”‚   â”œâ”€â”€ login.html           # Login page
â”‚   â””â”€â”€ [your other pages]
â”‚
â”œâ”€â”€ database/                 # Database files
â”‚   â”œâ”€â”€ schema.sql           # SQL to create tables
â”‚   â”œâ”€â”€ seed_data.sql        # Sample data
â”‚   â””â”€â”€ app.db               # SQLite database file
â”‚
â””â”€â”€ modules/                  # Python modules
    â”œâ”€â”€ __init__.py
    â”œâ”€â”€ auth.py              # Authentication functions
    â”œâ”€â”€ database.py          # Database functions
    â””â”€â”€ utils.py             # Helper functions</pre>
</div>

<h3>Planning Your File Structure</h3>
<p>Let's plan YOUR project's structure:</p>

<div style="background-color: #e8f5e8; padding: 20px; border-radius: 10px;">
    <h4>ğŸ“‹ File Structure Planner</h4>
    
    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; margin: 20px 0;">
        <div style="background: white; padding: 15px; border-radius: 8px;">
            <h5>ğŸ¯ Core Files</h5>
            <ul>
                <li><b>app.py</b> - Main application</li>
                <li><b>config.py</b> - Settings & configuration</li>
                <li><b>requirements.txt</b> - Dependencies</li>
                <li><b>README.md</b> - Instructions</li>
                <li><b>.env</b> - Environment variables</li>
            </ul>
        </div>
        
        <div style="background: white; padding: 15px; border-radius: 8px;">
            <h5>ğŸ“ Key Folders</h5>
            <ul>
                <li><b>templates/</b> - HTML pages</li>
                <li><b>static/</b> - CSS/JS/images</li>
                <li><b>database/</b> - SQL files & DB</li>
                <li><b>modules/</b> - Python code modules</li>
                <li><b>tests/</b> - Test files</li>
            </ul>
        </div>
    </div>
</div>

<h3>Choosing Your Tech Stack</h3>
<p>Based on what we've learned in Year 3, here's our recommended stack:</p>

<table style="width:100%; border-collapse: collapse; margin: 20px 0;">
    <tr style="background: #4A90E2; color: white;">
        <th style="padding: 12px;">Category</th>
        <th style="padding: 12px;">Technology</th>
        <th style="padding: 12px;">Why We Use It</th>
        <th style="padding: 12px;">Difficulty</th>
    </tr>
    <tr style="background: #f8f9fa;">
        <td style="padding: 10px; border: 1px solid #ddd;"><b>Backend</b></td>
        <td style="padding: 10px; border: 1px solid #ddd;">Python + Flask</td>
        <td style="padding: 10px; border: 1px solid #ddd;">Simple, lightweight, great for beginners</td>
        <td style="padding: 10px; border: 1px solid #ddd;">â­â˜†â˜†â˜†â˜†</td>
    </tr>
    <tr style="background: white;">
        <td style="padding: 10px; border: 1px solid #ddd;"><b>Database</b></td>
        <td style="padding: 10px; border: 1px solid #ddd;">SQLite</td>
        <td style="padding: 10px; border: 1px solid #ddd;">No setup needed, single file</td>
        <td style="padding: 10px; border: 1px solid #ddd;">â­â˜†â˜†â˜†â˜†</td>
    </tr>
    <tr style="background: #f8f9fa;">
        <td style="padding: 10px; border: 1px solid #ddd;"><b>Frontend</b></td>
        <td style="padding: 10px; border: 1px solid #ddd;">HTML + CSS + JavaScript</td>
        <td style="padding: 10px; border: 1px solid #ddd;">What we learned in Year 2</td>
        <td style="padding: 10px; border: 1px solid #ddd;">â­â­â˜†â˜†â˜†</td>
    </tr>
    <tr style="background: white;">
        <td style="padding: 10px; border: 1px solid #ddd;"><b>Hosting</b></td>
        <td style="padding: 10px; border: 1px solid #ddd;">PythonAnywhere</td>
        <td style="padding: 10px; border: 1px solid #ddd;">Free for small projects, easy setup</td>
        <td style="padding: 10px; border: 1px solid #ddd;">â­â­â˜†â˜†â˜†</td>
    </tr>
</table>

<h3>Creating Your requirements.txt</h3>
<p>This file tells Python what packages your project needs:</p>

<div style="background-color: #fff3cd; padding: 20px; border-radius: 10px; margin: 20px 0;">
    <h4>ğŸ“¦ Example requirements.txt</h4>
    <pre style="background: white; padding: 15px; border-radius: 8px;">
# Web Framework
Flask==2.3.3

# Database
Flask-SQLAlchemy==3.0.5

# Forms & Security
Flask-WTF==1.1.1
Werkzeug==2.3.7

# For APIs (if needed)
requests==2.31.0

# For sending emails
python-dotenv==1.0.0</pre>
    
    <p><b>How to install:</b> Run <code>pip install -r requirements.txt</code></p>
</div>

<h3>Setting Up Your Development Environment</h3>
<p>Let's get everything ready to start coding next month!</p>

<div style="background-color: #e8f5e8; padding: 20px; border-radius: 10px;">
    <h4>ğŸš€ Setup Checklist</h4>
    
    <div style="background: white; padding: 15px; border-radius: 8px; margin: 10px 0;">
        <h5>âœ… Step 1: Create Project Folder</h5>
        <pre style="background: #f5f5f5; padding: 10px;">
mkdir my_capstone_project
cd my_capstone_project</pre>
    </div>
    
    <div style="background: white; padding: 15px; border-radius: 8px; margin: 10px 0;">
        <h5>âœ… Step 2: Create Virtual Environment</h5>
        <pre style="background: #f5f5f5; padding: 10px;">
# Windows
python -m venv venv
venv\Scripts\activate

# Mac/Linux
python3 -m venv venv
source venv/bin/activate</pre>
    </div>
    
    <div style="background: white; padding: 15px; border-radius: 8px; margin: 10px 0;">
        <h5>âœ… Step 3: Create Folder Structure</h5>
        <pre style="background: #f5f5f5; padding: 10px;">
mkdir static templates database modules tests
mkdir static/css static/js static/images</pre>
    </div>
    
    <div style="background: white; padding: 15px; border-radius: 8px; margin: 10px 0;">
        <h5>âœ… Step 4: Create Key Files</h5>
        <pre style="background: #f5f5f5; padding: 10px;">
touch app.py requirements.txt README.md .gitignore
touch static/css/style.css static/js/script.js
touch templates/base.html templates/index.html
touch database/schema.sql database/seed_data.sql</pre>
    </div>
</div>

<h3>Today's Hands-On Workshop</h3>
<div style="background-color: #f0f8ff; padding: 20px; border-radius: 10px;">
    <b>Activity 1: Create Your Project Structure (60 minutes)</b>
    <p>Follow the setup checklist above to create your complete project folder structure.</p>
    
    <b>Activity 2: Write Your First app.py (45 minutes)</b>
    <p>Create a simple Flask app that shows "Hello World":</p>
    <pre style="background: #36454f; color: white; padding: 15px; border-radius: 5px;">
from flask import Flask, render_template

app = Flask(__name__)

@app.route('/')
def home():
    return render_template('index.html', title='My Capstone Project')

if __name__ == '__main__':
    app.run(debug=True)</pre>
    
    <b>Activity 3: Create requirements.txt (15 minutes)</b>
    <p>Based on what your project needs, create your requirements.txt file.</p>
</div>

<h3>Homework: Complete Project Setup</h3>
<div style="background-color: #fff0e6; padding: 20px; border-radius: 10px;">
    <p>Complete ALL setup steps and create:</p>
    <ol>
        <li>Full project folder structure</li>
        <li>Working Flask app (app.py runs without errors)</li>
        <li>Complete requirements.txt</li>
        <li>Basic HTML template (templates/index.html)</li>
        <li>Simple CSS file (static/css/style.css)</li>
        <li>Database schema file (database/schema.sql)</li>
        <li>README.md with project description</li>
    </ol>
    
    <b>Bonus Challenge:</b>
    <p>Set up Git repository and make your first commit:</p>
    <pre style="background: #f5f5f5; padding: 10px;">
git init
git add .
git commit -m "Initial project setup"</pre>
</div>

<h3>Key Takeaways</h3>
<div style="background-color: #e8f5e8; padding: 20px; border-radius: 10px;">
    <ul>
        <li>âœ… Good structure = easier coding</li>
        <li>âœ… Use virtual environments to keep projects separate</li>
        <li>âœ… Flask + SQLite = perfect for beginner capstones</li>
        <li>âœ… requirements.txt keeps track of dependencies</li>
        <li>âœ… Setup takes time but saves time later</li>
        <li>âœ… Test your setup works before moving on</li>
    </ul>
</div>

<h3>ğŸ¤ Teacher's Notes:</h3>
<p>This week is about <b>preparation</b>. Many students want to jump straight into coding. Emphasize that good setup prevents problems later. Walk through the setup checklist together. Help troubleshoot any installation issues. Make sure every student has a working Flask app by the end of the session. Next month, we start BUILDING!</p>
`
},

            "11-41": {
  icon: "fa-layer-group",
  title: "Build Database & Core Models",
  html: `<h1>Month 11, Week 1: Build Database & Core Models</h1>
<p>Time to start building! This week we'll turn our database design into real, working code.</p>

<div class="analogy-box">
    <b>Analogy: Building the Foundation ğŸ—ï¸</b><br/>
    Database tables â†’ Building foundation<br/>
    Models â†’ Building blueprints<br/>
    CRUD operations â†’ Construction tools<br/>
    Relationships â†’ Connecting rooms<br/>
    Data validation â†’ Building inspections
</div>

<h3>What are Models?</h3>
<div style="background-color: #f0f8ff; padding: 20px; border-radius: 10px;">
    <p>In programming, a <b>model</b> is a Python class that represents a database table. It's like a blueprint that tells Python how to work with your data.</p>
    
    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin-top: 15px;">
        <div style="background: #e3f2fd; padding: 15px; border-radius: 8px;">
            <h4>ğŸ“Š Database Table</h4>
            <pre>
Table: customers
Columns:
- id (INTEGER)
- name (TEXT)
- email (TEXT)
- created_at (DATETIME)</pre>
        </div>
        <div style="background: #f3e5f5; padding: 15px; border-radius: 8px;">
            <h4>ğŸ Python Model</h4>
            <pre>
class Customer:
    id = Integer
    name = String
    email = String
    created_at = DateTime</pre>
        </div>
    </div>
</div>

<h3>Setting Up SQLAlchemy</h3>
<p>We'll use Flask-SQLAlchemy to connect Python to our database:</p>

<div style="background-color: #fff3cd; padding: 20px; border-radius: 10px; margin: 20px 0;">
    <h4>ğŸ”§ Step-by-Step Database Setup</h4>
    
    <div style="background: white; padding: 15px; border-radius: 8px; margin: 10px 0;">
        <h5>1. Update requirements.txt</h5>
        <pre style="background: #f5f5f5; padding: 10px;">
Flask==2.3.3
Flask-SQLAlchemy==3.0.5
python-dotenv==1.0.0</pre>
    </div>
    
    <div style="background: white; padding: 15px; border-radius: 8px; margin: 10px 0;">
        <h5>2. Create config.py</h5>
        <pre style="background: #36454f; color: white; padding: 15px; border-radius: 5px;">
import os
from dotenv import load_dotenv

load_dotenv()

class Config:
    SECRET_KEY = os.getenv('SECRET_KEY', 'dev-secret-key')
    SQLALCHEMY_DATABASE_URI = 'sqlite:///app.db'
    SQLALCHEMY_TRACK_MODIFICATIONS = False</pre>
    </div>
    
    <div style="background: white; padding: 15px; border-radius: 8px; margin: 10px 0;">
        <h5>3. Update app.py with Database</h5>
        <pre style="background: #36454f; color: white; padding: 15px; border-radius: 5px;">
from flask import Flask
from flask_sqlalchemy import SQLAlchemy
from config import Config

app = Flask(__name__)
app.config.from_object(Config)

db = SQLAlchemy(app)

# Import models here
from models import Customer, Order, User</pre>
    </div>
</div>

<h3>Creating Your First Model</h3>
<p>Let's create the Customer model for our tailor shop example:</p>

<div style="background-color: #e8f5e8; padding: 20px; border-radius: 10px;">
    <h4>ğŸ‘¤ Complete Customer Model</h4>
    
    <div style="background: white; padding: 15px; border-radius: 8px; margin: 10px 0;">
        <h5>Create models.py file:</h5>
        <pre style="background: #36454f; color: white; padding: 15px; border-radius: 5px;">
from app import db
from datetime import datetime

class Customer(db.Model):
    """Customer model for storing customer information"""
    
    __tablename__ = 'customers'
    
    # Columns
    id = db.Column(db.Integer, primary_key=True)
    name = db.Column(db.String(100), nullable=False)
    email = db.Column(db.String(100), unique=True)
    phone = db.Column(db.String(20))
    address = db.Column(db.Text)
    notes = db.Column(db.Text)
    created_at = db.Column(db.DateTime, default=datetime.utcnow)
    
    # Relationship to Orders
    orders = db.relationship('Order', backref='customer', lazy=True)
    
    def __repr__(self):
        return f'&lt;Customer {self.name}&gt;'
    
    def to_dict(self):
        """Convert model to dictionary for API responses"""
        return {
            'id': self.id,
            'name': self.name,
            'email': self.email,
            'phone': self.phone,
            'created_at': self.created_at.isoformat()
        }</pre>
    </div>
</div>

<h3>Creating Related Models</h3>
<p>Now let's create the Order model that connects to Customer:</p>

<div style="background-color: #fff3cd; padding: 20px; border-radius: 10px; margin: 20px 0;">
    <h4>ğŸ‘• Order Model with Relationship</h4>
    <pre style="background: #36454f; color: white; padding: 15px; border-radius: 5px;">
class Order(db.Model):
    """Order model for storing customer orders"""
    
    __tablename__ = 'orders'
    
    # Status options
    STATUS_CHOICES = ['pending', 'in_progress', 'completed', 'cancelled']
    
    # Columns
    id = db.Column(db.Integer, primary_key=True)
    customer_id = db.Column(db.Integer, db.ForeignKey('customers.id'), nullable=False)
    description = db.Column(db.Text, nullable=False)
    measurements = db.Column(db.Text)
    due_date = db.Column(db.Date)
    status = db.Column(db.String(20), default='pending')
    price = db.Column(db.Float)
    created_at = db.Column(db.DateTime, default=datetime.utcnow)
    
    def __repr__(self):
        return f'&lt;Order {self.id}: {self.description[:50]}...&gt;'
    
    def is_overdue(self):
        """Check if order is past due date"""
        if self.due_date:
            from datetime import date
            return self.due_date &lt; date.today() and self.status != 'completed'
        return False</pre>
</div>

<h3>Database Initialization Script</h3>
<p>Let's create a script to set up our database:</p>

<div style="background-color: #e8f5e8; padding: 20px; border-radius: 10px;">
    <h4>ğŸ—ƒï¸ Create init_db.py</h4>
    <pre style="background: #36454f; color: white; padding: 15px; border-radius: 5px;">
from app import app, db
from models import Customer, Order, User

def init_database():
    """Initialize the database with tables"""
    with app.app_context():
        # Create all tables
        db.create_all()
        print("âœ… Database tables created successfully!")
        
        # Add sample data for testing
        add_sample_data()
        
def add_sample_data():
    """Add some sample data for testing"""
    
    # Check if we already have data
    if Customer.query.count() > 0:
        print("âš ï¸ Database already has data. Skipping sample data.")
        return
    
    # Create sample customers
    customer1 = Customer(
        name="Alice Johnson",
        email="alice@example.com",
        phone="555-1234",
        address="123 Main St, Cityville",
        notes="Prefers natural fabrics"
    )
    
    customer2 = Customer(
        name="Bob Smith",
        email="bob@example.com",
        phone="555-5678",
        address="456 Oak Ave, Townsville",
        notes="Needs alterations every 6 months"
    )
    
    # Add customers to database
    db.session.add(customer1)
    db.session.add(customer2)
    db.session.commit()
    
    # Create sample orders
    order1 = Order(
        customer_id=customer1.id,
        description="Summer dress with floral pattern",
        measurements="Bust: 36, Waist: 28, Hips: 38, Length: 45",
        due_date=datetime(2024, 6, 15).date(),
        status="in_progress",
        price=120.50
    )
    
    order2 = Order(
        customer_id=customer2.id,
        description="Business suit - navy blue",
        measurements="Chest: 42, Waist: 36, Sleeve: 34",
        due_date=datetime(2024, 6, 20).date(),
        status="pending",
        price=250.00
    )
    
    db.session.add(order1)
    db.session.add(order2)
    db.session.commit()
    
    print(f"âœ… Added {Customer.query.count()} customers and {Order.query.count()} orders")
    
if __name__ == '__main__':
    init_database()</pre>
</div>

<h3>Today's Hands-On Workshop</h3>
<div style="background-color: #f0f8ff; padding: 20px; border-radius: 10px;">
    <b>Activity 1: Create Your Models (60 minutes)</b>
    <p>Create models.py with at least 2 models for your project. Make sure they have:</p>
    <ul>
        <li>Proper column definitions</li>
        <li>Primary keys</li>
        <li>Foreign keys if needed</li>
        <li>__repr__ method</li>
        <li>Relationships between models</li>
    </ul>
    
    <b>Activity 2: Initialize Database (45 minutes)</b>
    <p>Create init_db.py and run it to create your database tables. Test that it works by:</p>
    <pre style="background: #36454f; color: white; padding: 15px; border-radius: 5px; margin: 10px 0;">
# Run the script
python init_db.py

# Check if database file was created
ls -la app.db

# File should be created and have some size</pre>
    
    <b>Activity 3: Test CRUD Operations (45 minutes)</b>
    <p>Create test_crud.py and practice basic operations:</p>
    <pre style="background: #36454f; color: white; padding: 15px; border-radius: 5px; margin: 10px 0;">
# Create
new_customer = Customer(name="Test User", email="test@test.com")
db.session.add(new_customer)
db.session.commit()

# Read
customers = Customer.query.all()
print(f"Total customers: {len(customers)}")

# Update
customer = Customer.query.first()
customer.name = "Updated Name"
db.session.commit()

# Delete
db.session.delete(customer)
db.session.commit()</pre>
</div>

<h3>Homework: Complete Database Setup</h3>
<div style="background-color: #fff0e6; padding: 20px; border-radius: 10px;">
    <p>Complete your database implementation:</p>
    <ol>
        <li>All models created in models.py</li>
        <li>Database initialization script working</li>
        <li>Sample data added for testing</li>
        <li>Test CRUD operations for each model</li>
        <li>Create a simple API endpoint to list data</li>
    </ol>
    
    <b>API Endpoint Example:</b>
    <pre style="background: #f5f5f5; padding: 10px;">
@app.route('/api/customers')
def get_customers():
    customers = Customer.query.all()
    return jsonify([c.to_dict() for c in customers])</pre>
    
    <b>Bonus Challenge:</b>
    <p>Add validation to your models (e.g., email format, phone number length, price must be positive).</p>
</div>

<h3>Key Takeaways</h3>
<div style="background-color: #e8f5e8; padding: 20px; border-radius: 10px;">
    <ul>
        <li>âœ… Models = Python classes that represent database tables</li>
        <li>âœ… Flask-SQLAlchemy makes database work easier</li>
        <li>âœ… Relationships connect models together</li>
        <li>âœ… Always initialize database before first use</li>
        <li>âœ… Test CRUD operations to ensure everything works</li>
        <li>âœ… Sample data helps with testing and development</li>
    </ul>
</div>

<h3>ğŸ¤ Teacher's Notes:</h3>
<p>This is a <b>foundational week</b>. If students get their models right, everything else becomes easier. Walk through the Customer model example line by line. Help students translate their database designs from last week into Python models. Emphasize testing - have them create, read, update, and delete records to build confidence. Next week: User authentication!</p>
`
},
            "11-42": {
  icon: "fa-user-lock",
  title: "User Authentication System",
  html: `<h1>Month 11, Week 2: User Authentication System</h1>
<p>Most apps need users to log in. This week we'll build a secure authentication system to protect our app.</p>

<div class="analogy-box">
    <b>Analogy: The Clubhouse Security ğŸšª</b><br/>
    Username/Password â†’ Club membership card<br/>
    Database â†’ Membership records<br/>
    Hashing â†’ Secret membership code<br/>
    Sessions â†’ Day pass wristband<br/>
    Login required â†’ Bouncer at the door<br/>
    Logout â†’ Returning the wristband
</div>

<h3>Why Authentication Matters</h3>
<div style="background-color: #f0f8ff; padding: 20px; border-radius: 10px;">
    <p>Authentication keeps your app secure by:</p>
    
    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin-top: 15px;">
        <div style="background: #e3f2fd; padding: 15px; border-radius: 8px;">
            <h4>ğŸ”’ Protecting Data</h4>
            <p>Only authorized users can see sensitive information</p>
        </div>
        <div style="background: #f3e5f5; padding: 15px; border-radius: 8px;">
            <h4>ğŸ‘¤ Personalization</h4>
            <p>Each user sees their own data and settings</p>
        </div>
        <div style="background: #e8f5e8; padding: 15px; border-radius: 8px;">
            <h4>ğŸ“Š Tracking Activity</h4>
            <p>Know who did what in your app</p>
        </div>
    </div>
</div>

<h3>Password Security 101</h3>
<p><b>NEVER store passwords in plain text!</b> Always hash them:</p>

<div style="background-color: #fff3cd; padding: 20px; border-radius: 10px; margin: 20px 0;">
    <h4>ğŸ” How Password Hashing Works</h4>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 15px;">
        <div style="background: white; padding: 15px; border-radius: 8px;">
            <h5>âŒ WRONG: Plain Text</h5>
            <pre>
User: alice
Password: mypassword123
â†’ Stored as: mypassword123</pre>
            <p style="color: red; font-weight: bold;">Hacker can read it directly!</p>
        </div>
        
        <div style="background: white; padding: 15px; border-radius: 8px;">
            <h5>âœ… RIGHT: Hashed</h5>
            <pre>
User: alice
Password: mypassword123
â†’ Stored as: 
$2b$12$N9qo8uLOickgx2ZMRZoMy.MrUv...
            </pre>
            <p style="color: green; font-weight: bold;">Hacker sees only gibberish!</p>
        </div>
    </div>
    
    <div style="margin-top: 20px; background: #e8f5e8; padding: 15px; border-radius: 8px;">
        <h5>ğŸ¯ Key Security Rules:</h5>
        <ul>
            <li><b>Hash passwords</b> with bcrypt or similar</li>
            <li><b>Add salt</b> to make each hash unique</li>
            <li><b>Never store</b> passwords in logs or emails</li>
            <li><b>Use HTTPS</b> to encrypt login traffic</li>
            <li><b>Limit login attempts</b> to prevent brute force</li>
        </ul>
    </div>
</div>

<h3>User Model with Password Hashing</h3>
<p>Let's create a secure User model:</p>

<div style="background-color: #e8f5e8; padding: 20px; border-radius: 10px;">
    <h4>ğŸ‘¤ Secure User Model</h4>
    
    <div style="background: white; padding: 15px; border-radius: 8px; margin: 10px 0;">
        <h5>1. Install required packages</h5>
        <pre style="background: #f5f5f5; padding: 10px;">
# Update requirements.txt
Flask-Bcrypt==1.0.1
Flask-Login==0.6.2</pre>
    </div>
    
    <div style="background: white; padding: 15px; border-radius: 8px; margin: 10px 0;">
        <h5>2. Create User model in models.py</h5>
        <pre style="background: #36454f; color: white; padding: 15px; border-radius: 5px;">
from flask_login import UserMixin
from app import db, bcrypt
from datetime import datetime

class User(UserMixin, db.Model):
    """User model for authentication"""
    
    __tablename__ = 'users'
    
    id = db.Column(db.Integer, primary_key=True)
    username = db.Column(db.String(64), unique=True, nullable=False)
    email = db.Column(db.String(120), unique=True, nullable=False)
    password_hash = db.Column(db.String(128), nullable=False)
    full_name = db.Column(db.String(100))
    role = db.Column(db.String(20), default='user')
    is_active = db.Column(db.Boolean, default=True)
    created_at = db.Column(db.DateTime, default=datetime.utcnow)
    last_login = db.Column(db.DateTime)
    
    def __repr__(self):
        return f'&lt;User {self.username}&gt;'
    
    @property
    def password(self):
        """Prevent password from being accessed"""
        raise AttributeError('password is not a readable attribute')
    
    @password.setter
    def password(self, password):
        """Hash the password before storing"""
        self.password_hash = bcrypt.generate_password_hash(password).decode('utf-8')
    
    def verify_password(self, password):
        """Check if provided password matches stored hash"""
        return bcrypt.check_password_hash(self.password_hash, password)
    
    def update_last_login(self):
        """Update last login timestamp"""
        self.last_login = datetime.utcnow()
        db.session.commit()</pre>
    </div>
</div>

<h3>Setting Up Flask-Login</h3>
<p>Flask-Login handles session management for us:</p>

<div style="background-color: #fff3cd; padding: 20px; border-radius: 10px; margin: 20px 0;">
    <h4>ğŸ”§ Configure Flask-Login in app.py</h4>
    <pre style="background: #36454f; color: white; padding: 15px; border-radius: 5px;">
from flask import Flask
from flask_sqlalchemy import SQLAlchemy
from flask_bcrypt import Bcrypt
from flask_login import LoginManager
from config import Config

app = Flask(__name__)
app.config.from_object(Config)

# Initialize extensions
db = SQLAlchemy(app)
bcrypt = Bcrypt(app)
login_manager = LoginManager(app)
login_manager.login_view = 'auth.login'
login_manager.login_message = 'Please log in to access this page.'
login_manager.login_message_category = 'info'

@login_manager.user_loader
def load_user(user_id):
    """Reload user object from user ID stored in session"""
    from models import User
    return User.query.get(int(user_id))</pre>
</div>

<h3>Authentication Routes</h3>
<p>Now let's create the routes for login, registration, and logout:</p>

<div style="background-color: #e8f5e8; padding: 20px; border-radius: 10px;">
    <h4>ğŸ›£ï¸ Create auth_routes.py</h4>
    
    <div style="background: white; padding: 15px; border-radius: 8px; margin: 10px 0;">
        <h5>Registration Route</h5>
        <pre style="background: #36454f; color: white; padding: 15px; border-radius: 5px;">
from flask import Blueprint, render_template, redirect, url_for, flash, request
from flask_login import login_user, logout_user, login_required, current_user
from app import db, bcrypt
from models import User

auth = Blueprint('auth', __name__)

@auth.route('/register', methods=['GET', 'POST'])
def register():
    """Handle user registration"""
    if current_user.is_authenticated:
        return redirect(url_for('main.home'))
    
    if request.method == 'POST':
        username = request.form.get('username')
        email = request.form.get('email')
        password = request.form.get('password')
        confirm_password = request.form.get('confirm_password')
        full_name = request.form.get('full_name')
        
        # Validation
        if password != confirm_password:
            flash('Passwords do not match!', 'danger')
            return redirect(url_for('auth.register'))
        
        if User.query.filter_by(username=username).first():
            flash('Username already exists!', 'danger')
            return redirect(url_for('auth.register'))
        
        if User.query.filter_by(email=email).first():
            flash('Email already registered!', 'danger')
            return redirect(url_for('auth.register'))
        
        # Create new user
        new_user = User(
            username=username,
            email=email,
            full_name=full_name
        )
        new_user.password = password  # This triggers the hash
        
        db.session.add(new_user)
        db.session.commit()
        
        flash('Registration successful! Please log in.', 'success')
        return redirect(url_for('auth.login'))
    
    return render_template('auth/register.html')</pre>
    </div>
    
    <div style="background: white; padding: 15px; border-radius: 8px; margin: 10px 0;">
        <h5>Login Route</h5>
        <pre style="background: #36454f; color: white; padding: 15px; border-radius: 5px;">
@auth.route('/login', methods=['GET', 'POST'])
def login():
    """Handle user login"""
    if current_user.is_authenticated:
        return redirect(url_for('main.home'))
    
    if request.method == 'POST':
        username = request.form.get('username')
        password = request.form.get('password')
        remember = request.form.get('remember', False)
        
        user = User.query.filter_by(username=username).first()
        
        if user and user.verify_password(password):
            if user.is_active:
                login_user(user, remember=remember)
                user.update_last_login()
                
                flash(f'Welcome back, {user.username}!', 'success')
                
                # Redirect to next page if provided
                next_page = request.args.get('next')
                return redirect(next_page) if next_page else redirect(url_for('main.home'))
            else:
                flash('Account is deactivated. Contact administrator.', 'danger')
        else:
            flash('Invalid username or password!', 'danger')
    
    return render_template('auth/login.html')</pre>
    </div>
    
    <div style="background: white; padding: 15px; border-radius: 8px; margin: 10px 0;">
        <h5>Logout Route</h5>
        <pre style="background: #36454f; color: white; padding: 15px; border-radius: 5px;">
@auth.route('/logout')
@login_required
def logout():
    """Handle user logout"""
    logout_user()
    flash('You have been logged out.', 'info')
    return redirect(url_for('main.home'))</pre>
    </div>
</div>

<h3>Protecting Routes with Decorators</h3>
<p>Use decorators to control access to your pages:</p>

<div style="background-color: #fff3cd; padding: 20px; border-radius: 10px; margin: 20px 0;">
    <h4>ğŸ”’ Route Protection Examples</h4>
    <pre style="background: #36454f; color: white; padding: 15px; border-radius: 5px;">
from flask_login import login_required, current_user

# Basic login protection
@app.route('/dashboard')
@login_required
def dashboard():
    return render_template('dashboard.html')

# Role-based protection
def admin_required(f):
    """Decorator to require admin role"""
    @wraps(f)
    def decorated_function(*args, **kwargs):
        if not current_user.is_authenticated or current_user.role != 'admin':
            flash('Admin access required!', 'danger')
            return redirect(url_for('auth.login'))
        return f(*args, **kwargs)
    return decorated_function

@app.route('/admin')
@admin_required
def admin_panel():
    return render_template('admin.html')

# In template: check current user
# {% if current_user.is_authenticated %}
#   Welcome, {{ current_user.username }}!
# {% endif %}</pre>
</div>

<h3>Today's Hands-On Workshop</h3>
<div style="background-color: #f0f8ff; padding: 20px; border-radius: 10px;">
    <b>Activity 1: Create User Model & Authentication (60 minutes)</b>
    <p>Implement the complete User model with password hashing and update your database initialization.</p>
    
    <b>Activity 2: Build Login & Registration Forms (60 minutes)</b>
    <p>Create HTML templates for:</p>
    <ul>
        <li>login.html with username/password fields</li>
        <li>register.html with validation fields</li>
        <li>Include CSRF protection with Flask-WTF</li>
    </ul>
    
    <b>Activity 3: Implement Route Protection (30 minutes)</b>
    <p>Protect at least 3 routes in your app:</p>
    <ol>
        <li>One route requiring login</li>
        <li>One public route (homepage)</li>
        <li>One route with conditional display based on login status</li>
    </ol>
</div>

<h3>Homework: Complete Authentication System</h3>
<div style="background-color: #fff0e6; padding: 20px; border-radius: 10px;">
    <p>Finish your authentication implementation:</p>
    <ol>
        <li>Complete User model with proper hashing</li>
        <li>Working registration system with validation</li>
        <li>Secure login/logout functionality</li>
        <li>Protected routes using @login_required</li>
        <li>User session management</li>
        <li>Flash messages for user feedback</li>
    </ol>
    
    <b>Security Checklist:</b>
    <ul>
        <li>âœ… Passwords are hashed (not stored plain text)</li>
        <li>âœ… Login attempts are limited (bonus feature)</li>
        <li>âœ… Session timeout after inactivity</li>
        <li>âœ… CSRF protection on forms</li>
        <li>âœ… HTTPS/SSL for production</li>
        <li>âœ… Password strength requirements</li>
    </ul>
    
    <b>Bonus Challenge:</b>
    <p>Implement "Remember Me" functionality and password reset via email.</p>
</div>

<h3>Key Takeaways</h3>
<div style="background-color: #e8f5e8; padding: 20px; border-radius: 10px;">
    <ul>
        <li>âœ… <b>NEVER</b> store passwords in plain text</li>
        <li>âœ… Use bcrypt for secure password hashing</li>
        <li>âœ… Flask-Login simplifies session management</li>
        <li>âœ… Protect sensitive routes with @login_required</li>
        <li>âœ… Always validate user input</li>
        <li>âœ… Provide clear feedback with flash messages</li>
    </ul>
</div>

<h3>ğŸ¤ Teacher's Notes:</h3>
<p>Security is <b>critical</b> but can be abstract for kids. Use the clubhouse analogy throughout. Demonstrate what happens when passwords are stored plain text vs hashed. Have students try to "hack" a weak system vs a strong one. Emphasize that authentication is about <b>trust</b> - we need to verify users are who they say they are. Next week: Building the main app features!</p>
`
},
            "11-43": {
  icon: "fa-cogs",
  title: "Build Core Features & CRUD",
  html: `<h1>Month 11, Week 3: Build Core Features & CRUD</h1>
<p>Now that we have users, let's build the main features of our app! This week we'll implement Create, Read, Update, Delete (CRUD) operations.</p>

<div class="analogy-box">
    <b>Analogy: The Restaurant Kitchen ğŸ½ï¸</b><br/>
    Create â†’ Taking new orders<br/>
    Read â†’ Checking order tickets<br/>
    Update â†’ Modifying an order<br/>
    Delete â†’ Cancelling an order<br/>
    Database â†’ Order management system<br/>
    Forms â†’ Order taking pads
</div>

<h3>What is CRUD?</h3>
<div style="background-color: #f0f8ff; padding: 20px; border-radius: 10px;">
    <p>CRUD represents the four basic operations you can perform on data:</p>
    
    <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin-top: 15px;">
        <div style="background: #e3f2fd; padding: 15px; border-radius: 8px; text-align: center;">
            <h4>â• CREATE</h4>
            <p>Add new records</p>
            <code>INSERT</code>
        </div>
        <div style="background: #f3e5f5; padding: 15px; border-radius: 8px; text-align: center;">
            <h4>ğŸ“– READ</h4>
            <p>View/search records</p>
            <code>SELECT</code>
        </div>
        <div style="background: #e8f5e8; padding: 15px; border-radius: 8px; text-align: center;">
            <h4>âœï¸ UPDATE</h4>
            <p>Modify existing records</p>
            <code>UPDATE</code>
        </div>
        <div style="background: #ffe6e6; padding: 15px; border-radius: 8px; text-align: center;">
            <h4>ğŸ—‘ï¸ DELETE</h4>
            <p>Remove records</p>
            <code>DELETE</code>
        </div>
    </div>
</div>

<h3>Setting Up Forms with Flask-WTF</h3>
<p>We'll use Flask-WTF for secure form handling:</p>

<div style="background-color: #fff3cd; padding: 20px; border-radius: 10px; margin: 20px 0;">
    <h4>ğŸ“ Install and Configure Flask-WTF</h4>
    
    <div style="background: white; padding: 15px; border-radius: 8px; margin: 10px 0;">
        <h5>1. Update requirements.txt</h5>
        <pre style="background: #f5f5f5; padding: 10px;">
Flask-WTF==1.1.1
WTForms==3.0.1</pre>
    </div>
    
    <div style="background: white; padding: 15px; border-radius: 8px; margin: 10px 0;">
        <h5>2. Create forms.py</h5>
        <pre style="background: #36454f; color: white; padding: 15px; border-radius: 5px;">
from flask_wtf import FlaskForm
from wtforms import StringField, TextAreaField, DateField, FloatField, SelectField
from wtforms.validators import DataRequired, Email, Length, Optional
from datetime import date

class CustomerForm(FlaskForm):
    """Form for creating/editing customers"""
    name = StringField('Full Name', validators=[DataRequired(), Length(min=2, max=100)])
    email = StringField('Email', validators=[Optional(), Email()])
    phone = StringField('Phone', validators=[Optional(), Length(min=10, max=20)])
    address = TextAreaField('Address', validators=[Optional(), Length(max=500)])
    notes = TextAreaField('Notes', validators=[Optional(), Length(max=1000)])

class OrderForm(FlaskForm):
    """Form for creating/editing orders"""
    customer_id = SelectField('Customer', coerce=int, validators=[DataRequired()])
    description = TextAreaField('Order Description', validators=[DataRequired(), Length(min=10, max=1000)])
    measurements = TextAreaField('Measurements', validators=[Optional(), Length(max=500)])
    due_date = DateField('Due Date', validators=[Optional()], default=date.today)
    status = SelectField('Status', choices=[
        ('pending', 'Pending'),
        ('in_progress', 'In Progress'),
        ('completed', 'Completed'),
        ('cancelled', 'Cancelled')
    ], default='pending')
    price = FloatField('Price ($)', validators=[Optional()])</pre>
    </div>
</div>

<h3>Building the Customer CRUD Interface</h3>
<p>Let's create routes for managing customers:</p>

<div style="background-color: #e8f5e8; padding: 20px; border-radius: 10px;">
    <h4>ğŸ‘¥ Customer Management Routes</h4>
    
    <div style="background: white; padding: 15px; border-radius: 8px; margin: 10px 0;">
        <h5>List All Customers (READ)</h5>
        <pre style="background: #36454f; color: white; padding: 15px; border-radius: 5px;">
@app.route('/customers')
@login_required
def customer_list():
    """Display all customers"""
    page = request.args.get('page', 1, type=int)
    search = request.args.get('search', '')
    
    query = Customer.query
    
    if search:
        query = query.filter(
            Customer.name.ilike(f'%{search}%') |
            Customer.email.ilike(f'%{search}%') |
            Customer.phone.ilike(f'%{search}%')
        )
    
    customers = query.order_by(Customer.name.asc()).paginate(
        page=page, per_page=10, error_out=False
    )
    
    return render_template('customers/list.html', 
                         customers=customers, 
                         search=search)</pre>
    </div>
    
    <div style="background: white; padding: 15px; border-radius: 8px; margin: 10px 0;">
        <h5>Create New Customer (CREATE)</h5>
        <pre style="background: #36454f; color: white; padding: 15px; border-radius: 5px;">
@app.route('/customers/new', methods=['GET', 'POST'])
@login_required
def customer_create():
    """Create a new customer"""
    form = CustomerForm()
    
    if form.validate_on_submit():
        customer = Customer(
            name=form.name.data,
            email=form.email.data,
            phone=form.phone.data,
            address=form.address.data,
            notes=form.notes.data
        )
        
        db.session.add(customer)
        db.session.commit()
        
        flash(f'Customer "{customer.name}" created successfully!', 'success')
        return redirect(url_for('customer_detail', id=customer.id))
    
    return render_template('customers/form.html', 
                         form=form, 
                         title='Add New Customer')</pre>
    </div>
    
    <div style="background: white; padding: 15px; border-radius: 8px; margin: 10px 0;">
        <h5>View Customer Details (READ Single)</h5>
        <pre style="background: #36454f; color: white; padding: 15px; border-radius: 5px;">
@app.route('/customers/&lt;int:id&gt;')
@login_required
def customer_detail(id):
    """View customer details and their orders"""
    customer = Customer.query.get_or_404(id)
    
    # Get customer's orders
    orders = Order.query.filter_by(customer_id=id)\
                       .order_by(Order.due_date.asc())\
                       .all()
    
    # Statistics
    total_orders = len(orders)
    completed_orders = sum(1 for o in orders if o.status == 'completed')
    total_spent = sum(o.price or 0 for o in orders if o.price)
    
    return render_template('customers/detail.html',
                         customer=customer,
                         orders=orders,
                         total_orders=total_orders,
                         completed_orders=completed_orders,
                         total_spent=total_spent)</pre>
    </div>
</div>

<h3>Update and Delete Operations</h3>
<p>Completing the full CRUD cycle:</p>

<div style="background-color: #fff3cd; padding: 20px; border-radius: 10px; margin: 20px 0;">
    <h4>âœï¸ Update and ğŸ—‘ï¸ Delete Routes</h4>
    
    <div style="background: white; padding: 15px; border-radius: 8px; margin: 10px 0;">
        <h5>Edit Customer (UPDATE)</h5>
        <pre style="background: #36454f; color: white; padding: 15px; border-radius: 5px;">
@app.route('/customers/&lt;int:id&gt;/edit', methods=['GET', 'POST'])
@login_required
def customer_edit(id):
    """Edit an existing customer"""
    customer = Customer.query.get_or_404(id)
    form = CustomerForm(obj=customer)
    
    if form.validate_on_submit():
        form.populate_obj(customer)
        db.session.commit()
        
        flash(f'Customer "{customer.name}" updated successfully!', 'success')
        return redirect(url_for('customer_detail', id=customer.id))
    
    return render_template('customers/form.html',
                         form=form,
                         title=f'Edit {customer.name}',
                         customer=customer)</pre>
    </div>
    
    <div style="background: white; padding: 15px; border-radius: 8px; margin: 10px 0;">
        <h5>Delete Customer (DELETE)</h5>
        <pre style="background: #36454f; color: white; padding: 15px; border-radius: 5px;">
@app.route('/customers/&lt;int:id&gt;/delete', methods=['POST'])
@login_required
def customer_delete(id):
    """Delete a customer (with confirmation)"""
    customer = Customer.query.get_or_404(id)
    customer_name = customer.name
    
    # Check if customer has orders
    order_count = Order.query.filter_by(customer_id=id).count()
    
    if order_count > 0:
        flash(f'Cannot delete {customer_name} - they have {order_count} orders!', 'danger')
        return redirect(url_for('customer_detail', id=id))
    
    db.session.delete(customer)
    db.session.commit()
    
    flash(f'Customer "{customer_name}" deleted successfully!', 'success')
    return redirect(url_for('customer_list'))</pre>
    </div>
</div>

<h3>Building HTML Templates</h3>
<p>Create templates that work with our routes:</p>

<div style="background-color: #e8f5e8; padding: 20px; border-radius: 10px;">
    <h4>ğŸ“„ Template Structure for CRUD</h4>
    
    <div style="background: white; padding: 15px; border-radius: 8px; margin: 10px 0;">
        <h5>Base Template (templates/base.html)</h5>
        <pre style="background: #f5f5f5; padding: 10px;">
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;{% block title %}My App{% endblock %}&lt;/title&gt;
    &lt;link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}"&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;nav&gt;... navigation ...&lt;/nav&gt;
    
    &lt;div class="container"&gt;
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, message in messages %}
                    &lt;div class="alert alert-{{ category }}"&gt;{{ message }}&lt;/div&gt;
                {% endfor %}
            {% endif %}
        {% endwith %}
        
        {% block content %}{% endblock %}
    &lt;/div&gt;
    
    &lt;script src="{{ url_for('static', filename='js/script.js') }}"&gt;&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
    </div>
    
    <div style="background: white; padding: 15px; border-radius: 8px; margin: 10px 0;">
        <h5>Customer Form Template (templates/customers/form.html)</h5>
        <pre style="background: #f5f5f5; padding: 10px;">
{% extends "base.html" %}

{% block title %}{{ title }}{% endblock %}

{% block content %}
&lt;div class="form-container"&gt;
    &lt;h1&gt;{{ title }}&lt;/h1&gt;
    
    &lt;form method="POST"&gt;
        {{ form.hidden_tag() }}
        
        &lt;div class="form-group"&gt;
            {{ form.name.label }}
            {{ form.name(class="form-control") }}
            {% if form.name.errors %}
                &lt;div class="errors"&gt;
                    {% for error in form.name.errors %}
                        &lt;span class="error"&gt;{{ error }}&lt;/span&gt;
                    {% endfor %}
                &lt;/div&gt;
            {% endif %}
        &lt;/div&gt;
        
        &lt;!-- More form fields here --&gt;
        
        &lt;div class="form-actions"&gt;
            &lt;button type="submit" class="btn btn-primary"&gt;Save&lt;/button&gt;
            &lt;a href="{{ url_for('customer_list') }}" class="btn btn-secondary"&gt;Cancel&lt;/a&gt;
        &lt;/div&gt;
    &lt;/form&gt;
&lt;/div&gt;
{% endblock %}</pre>
    </div>
</div>

<h3>Today's Hands-On Workshop</h3>
<div style="background-color: #f0f8ff; padding: 20px; border-radius: 10px;">
    <b>Activity 1: Create Forms for Your Models (60 minutes)</b>
    <p>Create forms.py with forms for your main models. Include validation for all fields.</p>
    
    <b>Activity 2: Implement CRUD Routes (60 minutes)</b>
    <p>Create routes for your main model that include:</p>
    <ul>
        <li>List view with search and pagination</li>
        <li>Create new record</li>
        <li>View single record with details</li>
        <li>Edit existing record</li>
        <li>Delete with confirmation</li>
    </ul>
    
    <b>Activity 3: Build Basic Templates (30 minutes)</b>
    <p>Create at least 3 templates:</p>
    <ol>
        <li>List template with table</li>
        <li>Form template for create/edit</li>
        <li>Detail template for viewing</li>
    </ol>
</div>

<h3>Homework: Complete Core Features</h3>
<div style="background-color: #fff0e6; padding: 20px; border-radius: 10px;">
    <p>Finish implementing CRUD for your main models:</p>
    <ol>
        <li>Complete forms with validation</li>
        <li>All CRUD routes working</li>
        <li>Templates for each operation</li>
        <li>Search and filtering functionality</li>
        <li>Pagination for list views</li>
        <li>Flash messages for user feedback</li>
    </ol>
    
    <b>Quality Checklist:</b>
    <ul>
        <li>âœ… All forms have CSRF protection</li>
        <li>âœ… Proper validation on all inputs</li>
        <li>âœ… Delete operations require confirmation</li>
        <li>âœ… Error handling for missing records</li>
        <li>âœ… Clean, user-friendly templates</li>
        <li>âœ… Responsive design works on mobile</li>
    </ul>
    
    <b>Bonus Challenge:</b>
    <p>Add bulk operations (select multiple records and delete/update them).</p>
</div>

<h3>Key Takeaways</h3>
<div style="background-color: #e8f5e8; padding: 20px; border-radius: 10px;">
    <ul>
        <li>âœ… CRUD = Create, Read, Update, Delete</li>
        <li>âœ… Flask-WTF makes form handling secure and easy</li>
        <li>âœ… Always validate user input</li>
        <li>âœ… Use pagination for large datasets</li>
        <li>âœ… Provide clear feedback after operations</li>
        <li>âœ… Templates should be reusable and clean</li>
    </ul>
</div>

<h3>ğŸ¤ Teacher's Notes:</h3>
<p>This week is about <b>pattern recognition</b>. Show students that CRUD operations follow similar patterns across different models. Create template code they can reuse. Emphasize the importance of validation - what happens if someone enters letters in a phone number field? Have students test each other's forms with bad data. Next week: Advanced features and polish!</p>
`
},
            "11-44": {
  icon: "fa-chart-line",
  title: "Advanced Features & Polish",
  html: `<h1>Month 11, Week 4: Advanced Features & Polish</h1>
<p>Time to add the finishing touches! This week we'll implement advanced features that make our app truly professional.</p>

<div class="analogy-box">
    <b>Analogy: The Car Factory ğŸš—</b><br/>
    Basic features â†’ Car engine and wheels<br/>
    Advanced features â†’ Air conditioning, GPS, stereo<br/>
    Polish â†’ Paint job, interior cleaning<br/>
    Testing â†’ Quality inspection<br/>
    Deployment â†’ Car delivery to customer
</div>

<h3>Dashboard & Analytics</h3>
<div style="background-color: #f0f8ff; padding: 20px; border-radius: 10px;">
    <p>A dashboard gives users a quick overview of important information. Let's build one for our tailor shop:</p>
    
    <div style="background: white; padding: 15px; border-radius: 8px; margin: 10px 0;">
        <h5>Dashboard Route with Statistics</h5>
        <pre style="background: #36454f; color: white; padding: 15px; border-radius: 5px;">
@app.route('/dashboard')
@login_required
def dashboard():
    """Main dashboard with analytics"""
    
    # Customer statistics
    total_customers = Customer.query.count()
    new_customers_this_month = Customer.query.filter(
        Customer.created_at >= datetime.now().replace(day=1)
    ).count()
    
    # Order statistics
    total_orders = Order.query.count()
    pending_orders = Order.query.filter_by(status='pending').count()
    in_progress_orders = Order.query.filter_by(status='in_progress').count()
    completed_orders = Order.query.filter_by(status='completed').count()
    
    # Revenue calculations
    completed_orders_revenue = db.session.query(
        db.func.sum(Order.price)
    ).filter_by(status='completed').scalar() or 0
    
    # Overdue orders
    from datetime import date
    overdue_orders = Order.query.filter(
        Order.due_date &lt; date.today(),
        Order.status.in_(['pending', 'in_progress'])
    ).count()
    
    # Recent activity
    recent_orders = Order.query.order_by(
        Order.created_at.desc()
    ).limit(5).all()
    
    # Chart data (for JavaScript charts)
    order_status_data = {
        'pending': pending_orders,
        'in_progress': in_progress_orders,
        'completed': completed_orders
    }
    
    return render_template('dashboard.html',
                         total_customers=total_customers,
                         new_customers_this_month=new_customers_this_month,
                         total_orders=total_orders,
                         pending_orders=pending_orders,
                         in_progress_orders=in_progress_orders,
                         completed_orders=completed_orders,
                         completed_orders_revenue=completed_orders_revenue,
                         overdue_orders=overdue_orders,
                         recent_orders=recent_orders,
                         order_status_data=order_status_data)</pre>
    </div>
</div>

<h3>Search & Filtering System</h3>
<p>Let's enhance our search capabilities:</p>

<div style="background-color: #fff3cd; padding: 20px; border-radius: 10px; margin: 20px 0;">
    <h4>ğŸ” Advanced Search Functionality</h4>
    
    <div style="background: white; padding: 15px; border-radius: 8px; margin: 10px 0;">
        <h5>Search Form with Multiple Criteria</h5>
        <pre style="background: #36454f; color: white; padding: 15px; border-radius: 5px;">
class OrderSearchForm(FlaskForm):
    """Form for advanced order searching"""
    customer_name = StringField('Customer Name', validators=[Optional()])
    status = SelectField('Status', choices=[
        ('', 'Any Status'),
        ('pending', 'Pending'),
        ('in_progress', 'In Progress'),
        ('completed', 'Completed')
    ], validators=[Optional()])
    date_from = DateField('From Date', validators=[Optional()])
    date_to = DateField('To Date', validators=[Optional()])
    min_price = FloatField('Minimum Price', validators=[Optional()])
    max_price = FloatField('Maximum Price', validators=[Optional()])</pre>
    </div>
    
    <div style="background: white; padding: 15px; border-radius: 8px; margin: 10px 0;">
        <h5>Advanced Search Route</h5>
        <pre style="background: #36454f; color: white; padding: 15px; border-radius: 5px;">
@app.route('/orders/search', methods=['GET', 'POST'])
@login_required
def order_search():
    """Advanced order search"""
    form = OrderSearchForm()
    results = []
    
    if form.validate_on_submit() or request.args:
        # Start with base query
        query = Order.query.join(Customer)
        
        # Apply filters
        if form.customer_name.data:
            query = query.filter(
                Customer.name.ilike(f'%{form.customer_name.data}%')
            )
        
        if form.status.data:
            query = query.filter(Order.status == form.status.data)
        
        if form.date_from.data:
            query = query.filter(Order.due_date >= form.date_from.data)
        
        if form.date_to.data:
            query = query.filter(Order.due_date &lt;= form.date_to.data)
        
        if form.min_price.data:
            query = query.filter(Order.price >= form.min_price.data)
        
        if form.max_price.data:
            query = query.filter(Order.price &lt;= form.max_price.data)
        
        # Execute query
        results = query.order_by(Order.due_date.asc()).all()
        
        # If form was submitted via GET (URL parameters)
        if request.args:
            flash(f'Found {len(results)} orders matching your criteria.', 'info')
    
    return render_template('orders/search.html',
                         form=form,
                         results=results)</pre>
    </div>
</div>

<h3>Export Data Functionality</h3>
<p>Users often want to export data to Excel or CSV:</p>

<div style="background-color: #e8f5e8; padding: 20px; border-radius: 10px;">
    <h4>ğŸ“Š Export to CSV and Excel</h4>
    
    <div style="background: white; padding: 15px; border-radius: 8px; margin: 10px 0;">
        <h5>CSV Export Route</h5>
        <pre style="background: #36454f; color: white; padding: 15px; border-radius: 5px;">
import csv
from io import StringIO
from flask import make_response

@app.route('/customers/export/csv')
@login_required
def export_customers_csv():
    """Export customers to CSV"""
    
    # Create in-memory file
    si = StringIO()
    cw = csv.writer(si)
    
    # Write headers
    cw.writerow(['ID', 'Name', 'Email', 'Phone', 'Address', 'Created Date'])
    
    # Write data
    customers = Customer.query.order_by(Customer.name.asc()).all()
    for customer in customers:
        cw.writerow([
            customer.id,
            customer.name,
            customer.email or '',
            customer.phone or '',
            customer.address or '',
            customer.created_at.strftime('%Y-%m-%d')
        ])
    
    # Create response
    output = make_response(si.getvalue())
    output.headers["Content-Disposition"] = "attachment; filename=customers.csv"
    output.headers["Content-type"] = "text/csv"
    
    return output</pre>
    </div>
    
    <div style="background: white; padding: 15px; border-radius: 8px; margin: 10px 0;">
        <h5>Excel Export with Pandas (Optional)</h5>
        <pre style="background: #36454f; color: white; padding: 15px; border-radius: 5px;">
# Add to requirements.txt: pandas==2.0.3 openpyxl==3.1.2

import pandas as pd
from io import BytesIO

@app.route('/orders/export/excel')
@login_required
def export_orders_excel():
    """Export orders to Excel"""
    
    # Query data with joins
    orders = db.session.query(
        Order.id,
        Customer.name.label('customer_name'),
        Order.description,
        Order.status,
        Order.due_date,
        Order.price,
        Order.created_at
    ).join(Customer).order_by(Order.due_date.asc()).all()
    
    # Convert to DataFrame
    df = pd.DataFrame([{
        'Order ID': o.id,
        'Customer': o.customer_name,
        'Description': o.description,
        'Status': o.status,
        'Due Date': o.due_date,
        'Price': o.price,
        'Created': o.created_at
    } for o in orders])
    
    # Create Excel file in memory
    output = BytesIO()
    with pd.ExcelWriter(output, engine='openpyxl') as writer:
        df.to_excel(writer, sheet_name='Orders', index=False)
    
    output.seek(0)
    
    # Create response
    response = make_response(output.getvalue())
    response.headers['Content-Disposition'] = 'attachment; filename=orders.xlsx'
    response.headers['Content-type'] = 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'
    
    return response</pre>
    </div>
</div>

<h3>Email Notifications</h3>
<p>Keep users informed with email notifications:</p>

<div style="background-color: #fff3cd; padding: 20px; border-radius: 10px; margin: 20px 0;">
    <h4>ğŸ“§ Email Setup and Notifications</h4>
    
    <div style="background: white; padding: 15px; border-radius: 8px; margin: 10px 0;">
        <h5>Email Configuration</h5>
        <pre style="background: #36454f; color: white; padding: 15px; border-radius: 5px;">
# Update requirements.txt
Flask-Mail==0.9.1

# In config.py
import os

class Config:
    # ... existing config ...
    MAIL_SERVER = os.getenv('MAIL_SERVER', 'smtp.gmail.com')
    MAIL_PORT = int(os.getenv('MAIL_PORT', 587))
    MAIL_USE_TLS = os.getenv('MAIL_USE_TLS', True)
    MAIL_USERNAME = os.getenv('MAIL_USERNAME')
    MAIL_PASSWORD = os.getenv('MAIL_PASSWORD')
    MAIL_DEFAULT_SENDER = os.getenv('MAIL_DEFAULT_SENDER', 'noreply@yourapp.com')

# In app.py
from flask_mail import Mail
mail = Mail(app)</pre>
    </div>
    
    <div style="background: white; padding: 15px; border-radius: 8px; margin: 10px 0;">
        <h5>Send Order Due Reminder</h5>
        <pre style="background: #36454f; color: white; padding: 15px; border-radius: 5px;">
from flask_mail import Message
from threading import Thread

def send_order_reminder(order):
    """Send email reminder about due order"""
    msg = Message(
        subject=f'Order Reminder: {order.description[:50]}...',
        recipients=[order.customer.email],
        sender=current_app.config['MAIL_DEFAULT_SENDER']
    )
    
    msg.body = f"""
Dear {order.customer.name},

This is a reminder about your order:
Description: {order.description}
Due Date: {order.due_date}
Status: {order.status}

Please contact us if you have any questions.

Best regards,
Your Tailor Shop Team
"""
    
    # Send in background thread
    Thread(target=send_async_email, args=(current_app._get_current_object(), msg)).start()

def send_async_email(app, msg):
    """Send email in background thread"""
    with app.app_context():
        mail.send(msg)

# Route to send reminder
@app.route('/orders/&lt;int:id&gt;/send-reminder')
@login_required
def send_order_reminder_email(id):
    order = Order.query.get_or_404(id)
    
    if not order.customer.email:
        flash('Customer has no email address!', 'warning')
        return redirect(url_for('order_detail', id=id))
    
    send_order_reminder(order)
    flash(f'Reminder email sent to {order.customer.email}', 'success')
    return redirect(url_for('order_detail', id=id))</pre>
    </div>
</div>

<h3>Responsive Design with CSS</h3>
<p>Make your app look good on all devices:</p>

<div style="background-color: #e8f5e8; padding: 20px; border-radius: 10px;">
    <h4>ğŸ“± Responsive CSS Framework</h4>
    
    <div style="background: white; padding: 15px; border-radius: 8px; margin: 10px 0;">
        <h5>Simple CSS Framework (static/css/style.css)</h5>
        <pre style="background: #f5f5f5; padding: 10px;">
/* Responsive Container */
.container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 20px;
}

/* Mobile First Design */
@media (max-width: 768px) {
    .container {
        padding: 10px;
    }
    
    .desktop-only {
        display: none;
    }
    
    table {
        font-size: 14px;
    }
}

/* Cards for Dashboard */
.card {
    background: white;
    border-radius: 8px;
    padding: 20px;
    margin-bottom: 20px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.card h3 {
    margin-top: 0;
    color: #333;
}

/* Stats Cards */
.stat-card {
    text-align: center;
    padding: 15px;
}

.stat-number {
    font-size: 2em;
    font-weight: bold;
    color: #4A90E2;
}

.stat-label {
    color: #666;
    font-size: 0.9em;
}

/* Form Styles */
.form-group {
    margin-bottom: 15px;
}

.form-control {
    width: 100%;
    padding: 8px;
    border: 1px solid #ddd;
    border-radius: 4px;
}

/* Alert Messages */
.alert {
    padding: 10px 15px;
    border-radius: 4px;
    margin-bottom: 15px;
}

.alert-success {
    background-color: #d4edda;
    color: #155724;
    border: 1px solid #c3e6cb;
}

.alert-danger {
    background-color: #f8d7da;
    color: #721c24;
    border: 1px solid #f5c6cb;
}</pre>
    </div>
</div>

<h3>Today's Hands-On Workshop</h3>
<div style="background-color: #f0f8ff; padding: 20px; border-radius: 10px;">
    <b>Activity 1: Build a Dashboard (60 minutes)</b>
    <p>Create a dashboard for your app with:</p>
    <ul>
        <li>Key statistics (counts, sums, averages)</li>
        <li>Recent activity list</li>
        <li>Visual charts (use Chart.js or simple HTML/CSS)</li>
        <li>Quick action buttons</li>
    </ul>
    
    <b>Activity 2: Implement Advanced Search (45 minutes)</b>
    <p>Add advanced search to your main model with:</p>
    <ol>
        <li>Multiple search criteria</li>
        <li>Date range filtering</li>
        <li>Status/type filtering</li>
        <li>Export results option</li>
    </ol>
    
    <b>Activity 3: Add Polish Features (45 minutes)</b>
    <p>Choose 2-3 polish features to implement:</p>
    <ul>
        <li>Data export (CSV/Excel)</li>
        <li>Email notifications</li>
        <li>Responsive design improvements</li>
        <li>Bulk operations</li>
        <li>Keyboard shortcuts</li>
    </ul>
</div>

<h3>Homework: Polish Your App</h3>
<div style="background-color: #fff0e6; padding: 20px; border-radius: 10px;">
    <p>Add at least 3 advanced features to your app:</p>
    <ol>
        <li>Dashboard with meaningful statistics</li>
        <li>Advanced search with multiple criteria</li>
        <li>Data export functionality</li>
        <li>Email notifications system</li>
        <li>Responsive design improvements</li>
    </ol>
    
    <b>Polish Checklist:</b>
    <ul>
        <li>âœ… All pages work on mobile and desktop</li>
        <li>âœ… Clear navigation and user flows</li>
        <li>âœ… Helpful error messages</li>
        <li>âœ… Loading indicators for slow operations</li>
        <li>âœ… Consistent styling throughout</li>
        <li>âœ… Keyboard navigation support</li>
    </ul>
    
    <b>Bonus Challenge:</b>
    <p>Implement real-time updates using WebSockets or AJAX polling.</p>
</div>

<h3>Key Takeaways</h3>
<div style="background-color: #e8f5e8; padding: 20px; border-radius: 10px;">
    <ul>
        <li>âœ… Dashboards help users understand their data</li>
        <li>âœ… Advanced search makes large datasets manageable</li>
        <li>âœ… Data export is a common user requirement</li>
        <li>âœ… Email notifications keep users engaged</li>
        <li>âœ… Responsive design is essential for modern apps</li>
        <li>âœ… Polish features differentiate good apps from great ones</li>
    </ul>
</div>

<h3>ğŸ¤ Teacher's Notes:</h3>
<p>This week is about <b>user experience</b>. Ask students: "What would make YOUR app easier/more enjoyable to use?" Have them test each other's apps and provide feedback. Emphasize that polish features don't need to be complex - even small improvements (like better error messages) make a big difference. Next month: Testing and deployment!</p>
`
},

            "12-45": {
  icon: "fa-bug",
  title: "Testing & Debugging",
  html: `<h1>Month 12, Week 1: Testing & Debugging</h1>
<p>Before we share our app with the world, we need to make sure it works properly! This week we'll learn how to test and debug our code.</p>

<div class="analogy-box">
    <b>Analogy: The Car Quality Inspection ğŸ”§</b><br/>
    Code â†’ Car being built<br/>
    Bugs â†’ Manufacturing defects<br/>
    Testing â†’ Quality inspection<br/>
    Debugging â†’ Repairing defects<br/>
    Test cases â†’ Inspection checklist<br/>
    Logs â†’ Maintenance records
</div>

<h3>Why Testing Matters</h3>
<div style="background-color: #f0f8ff; padding: 20px; border-radius: 10px;">
    <p>Testing helps us catch bugs before users do. It saves time and builds confidence in our code.</p>
    
    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin-top: 15px;">
        <div style="background: #e3f2fd; padding: 15px; border-radius: 8px;">
            <h4>ğŸ› Catch Bugs Early</h4>
            <p>Find problems before they affect users</p>
        </div>
        <div style="background: #f3e5f5; padding: 15px; border-radius: 8px;">
            <h4>ğŸ›¡ï¸ Prevent Regressions</h4>
            <p>Make sure new code doesn't break old features</p>
        </div>
        <div style="background: #e8f5e8; padding: 15px; border-radius: 8px;">
            <h4>ğŸ“š Document Behavior</h4>
            <p>Tests show how your code should work</p>
        </div>
    </div>
</div>

<h3>Types of Tests</h3>
<p>Different tests serve different purposes:</p>

<table style="width:100%; border-collapse: collapse; margin: 20px 0;">
    <tr style="background: #4A90E2; color: white;">
        <th style="padding: 12px;">Test Type</th>
        <th style="padding: 12px;">What It Tests</th>
        <th style="padding: 12px;">Example</th>
        <th style="padding: 12px;">When to Use</th>
    </tr>
    <tr style="background: #f8f9fa;">
        <td style="padding: 10px; border: 1px solid #ddd;"><b>Unit Tests</b></td>
        <td style="padding: 10px; border: 1px solid #ddd;">Individual functions/classes</td>
        <td style="padding: 10px; border: 1px solid #ddd;">Does calculate_total() return correct sum?</td>
        <td style="padding: 10px; border: 1px solid #ddd;">After writing each function</td>
    </tr>
    <tr style="background: white;">
        <td style="padding: 10px; border: 1px solid #ddd;"><b>Integration Tests</b></td>
        <td style="padding: 10px; border: 1px solid #ddd;">Multiple components working together</td>
        <td style="padding: 10px; border: 1px solid #ddd;">Can user login and create an order?</td>
        <td style="padding: 10px; border: 1px solid #ddd;">After connecting different parts</td>
    </tr>
    <tr style="background: #f8f9fa;">
        <td style="padding: 10px; border: 1px solid #ddd;"><b>Functional Tests</b></td>
        <td style="padding: 10px; border: 1px solid #ddd;">Complete user workflows</td>
        <td style="padding: 10px; border: 1px solid #ddd;">Full order creation process</td>
        <td style="padding: 10px; border: 1px solid #ddd;">Before releasing to users</td>
    </tr>
</table>

<h3>Setting Up Testing Environment</h3>
<p>Let's prepare our project for testing:</p>

<div style="background-color: #fff3cd; padding: 20px; border-radius: 10px; margin: 20px 0;">
    <h4>ğŸ”§ Testing Setup Configuration</h4>
    
    <div style="background: white; padding: 15px; border-radius: 8px; margin: 10px 0;">
        <h5>1. Create test folder structure</h5>
        <pre style="background: #f5f5f5; padding: 10px;">
tests/
â”œâ”€â”€ __init__.py
â”œâ”€â”€ conftest.py          # Test configuration
â”œâ”€â”€ test_models.py       # Model tests
â”œâ”€â”€ test_auth.py         # Authentication tests
â”œâ”€â”€ test_crud.py         # CRUD operation tests
â””â”€â”€ test_routes.py       # Route/endpoint tests</pre>
    </div>
    
    <div style="background: white; padding: 15px; border-radius: 8px; margin: 10px 0;">
        <h5>2. Update requirements.txt</h5>
        <pre style="background: #f5f5f5; padding: 10px;">
pytest==7.4.3
pytest-flask==1.2.0
coverage==7.3.2</pre>
    </div>
    
    <div style="background: white; padding: 15px; border-radius: 8px; margin: 10px 0;">
        <h5>3. Create test configuration (conftest.py)</h5>
        <pre style="background: #36454f; color: white; padding: 15px; border-radius: 5px;">
import pytest
from app import create_app, db
from models import User, Customer, Order

@pytest.fixture
def app():
    """Create test application"""
    app = create_app('testing')
    
    with app.app_context():
        db.create_all()
        yield app
        db.session.remove()
        db.drop_all()

@pytest.fixture
def client(app):
    """Create test client"""
    return app.test_client()

@pytest.fixture
def auth_client(client):
    """Create authenticated test client"""
    # Create test user
    user = User(username='testuser', email='test@test.com')
    user.password = 'password123'
    db.session.add(user)
    db.session.commit()
    
    # Login
    client.post('/login', data={
        'username': 'testuser',
        'password': 'password123'
    })
    
    return client</pre>
    </div>
</div>

<h3>Writing Your First Tests</h3>
<p>Let's start with simple unit tests for our models:</p>

<div style="background-color: #e8f5e8; padding: 20px; border-radius: 10px;">
    <h4>ğŸ§ª Model Unit Tests Example</h4>
    
    <div style="background: white; padding: 15px; border-radius: 8px; margin: 10px 0;">
        <h5>test_models.py - Testing Customer Model</h5>
        <pre style="background: #36454f; color: white; padding: 15px; border-radius: 5px;">
import pytest
from datetime import datetime
from models import Customer, Order, User

def test_create_customer(app):
    """Test creating a new customer"""
    with app.app_context():
        customer = Customer(
            name="Test Customer",
            email="test@example.com",
            phone="555-1234"
        )
        
        db.session.add(customer)
        db.session.commit()
        
        # Verify customer was created
        assert customer.id is not None
        assert customer.name == "Test Customer"
        assert customer.email == "test@example.com"
        assert isinstance(customer.created_at, datetime)

def test_customer_relationships(app):
    """Test customer-order relationship"""
    with app.app_context():
        # Create customer
        customer = Customer(name="Parent Customer")
        db.session.add(customer)
        db.session.commit()
        
        # Create order for customer
        order = Order(
            customer_id=customer.id,
            description="Test Order",
            price=100.00
        )
        db.session.add(order)
        db.session.commit()
        
        # Test relationship
        assert len(customer.orders) == 1
        assert customer.orders[0].id == order.id
        assert order.customer.id == customer.id

def test_user_password_hashing(app):
    """Test password hashing and verification"""
    with app.app_context():
        user = User(username="testuser", email="test@test.com")
        user.password = "securepassword123"
        
        db.session.add(user)
        db.session.commit()
        
        # Verify password was hashed
        assert user.password_hash != "securepassword123"
        assert len(user.password_hash) > 20
        
        # Verify password checking works
        assert user.verify_password("securepassword123") == True
        assert user.verify_password("wrongpassword") == False</pre>
    </div>
</div>

<h3>Testing Routes and Endpoints</h3>
<p>Now let's test our web routes:</p>

<div style="background-color: #fff3cd; padding: 20px; border-radius: 10px; margin: 20px 0;">
    <h4>ğŸŒ Route Testing Examples</h4>
    
    <div style="background: white; padding: 15px; border-radius: 8px; margin: 10px 0;">
        <h5>test_routes.py - Testing Web Routes</h5>
        <pre style="background: #36454f; color: white; padding: 15px; border-radius: 5px;">
def test_home_page(client):
    """Test home page loads successfully"""
    response = client.get('/')
    assert response.status_code == 200
    assert b'Welcome' in response.data

def test_login_page(client):
    """Test login page accessibility"""
    response = client.get('/login')
    assert response.status_code == 200
    assert b'Login' in response.data
    assert b'Username' in response.data
    assert b'Password' in response.data

def test_protected_route_redirect(client):
    """Test that protected routes redirect to login"""
    response = client.get('/dashboard', follow_redirects=False)
    assert response.status_code == 302  # Redirect
    assert '/login' in response.location

def test_customer_crud_flow(auth_client):
    """Test full customer CRUD workflow"""
    
    # 1. Create new customer
    response = auth_client.post('/customers/new', data={
        'name': 'Test Customer CRUD',
        'email': 'crud@test.com',
        'phone': '555-9999'
    }, follow_redirects=True)
    
    assert response.status_code == 200
    assert b'Test Customer CRUD' in response.data
    
    # 2. Get customer ID from response (simplified)
    # In real test, we'd parse the response or query DB
    
    # 3. Test customer list includes new customer
    response = auth_client.get('/customers')
    assert response.status_code == 200
    assert b'Test Customer CRUD' in response.data
    
    # 4. Test search functionality
    response = auth_client.get('/customers?search=CRUD')
    assert response.status_code == 200
    assert b'Test Customer CRUD' in response.data

def test_invalid_form_submission(auth_client):
    """Test form validation errors"""
    response = auth_client.post('/customers/new', data={
        'name': '',  # Empty name should fail
        'email': 'not-an-email'
    }, follow_redirects=True)
    
    assert response.status_code == 200
    assert b'This field is required' in response.data</pre>
    </div>
</div>

<h3>Debugging Techniques</h3>
<p>When tests fail, we need to debug. Here are essential debugging skills:</p>

<div style="background-color: #e8f5e8; padding: 20px; border-radius: 10px;">
    <h4>ğŸ Debugging Toolbox</h4>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">
        <div style="background: white; padding: 15px; border-radius: 8px;">
            <h5>1. Print Debugging</h5>
            <pre style="background: #f5f5f5; padding: 10px;">
def calculate_total(items):
    print(f"DEBUG: Items received: {items}")
    total = 0
    for item in items:
        print(f"DEBUG: Processing item: {item}")
        total += item.price
    print(f"DEBUG: Total calculated: {total}")
    return total</pre>
        </div>
        
        <div style="background: white; padding: 15px; border-radius: 8px;">
            <h5>2. Logging</h5>
            <pre style="background: #f5f5f5; padding: 10px;">
import logging

logging.basicConfig(level=logging.DEBUG)
logger = logging.getLogger(__name__)

def process_order(order):
    logger.debug(f"Processing order: {order.id}")
    try:
        # process order
        logger.info(f"Order {order.id} processed")
    except Exception as e:
        logger.error(f"Failed to process order: {e}")
        raise</pre>
        </div>
    </div>
    
    <div style="background: white; padding: 15px; border-radius: 8px; margin: 10px 0;">
        <h5>3. Using Python Debugger (pdb)</h5>
        <pre style="background: #f5f5f5; padding: 10px;">
def buggy_function(x, y):
    import pdb; pdb.set_trace()  # Debugger starts here
    result = x / y  # What if y is 0?
    return result

# Commands in pdb:
# n - next line
# c - continue
# p variable - print variable
# l - list code
# q - quit</pre>
    </div>
</div>

<h3>Today's Hands-On Workshop</h3>
<div style="background-color: #f0f8ff; padding: 20px; border-radius: 10px;">
    <b>Activity 1: Set Up Testing Environment (60 minutes)</b>
    <p>Create your test folder structure and write configuration files.</p>
    
    <b>Activity 2: Write Unit Tests (60 minutes)</b>
    <p>Write tests for:</p>
    <ul>
        <li>Your main model (create, read, update, delete)</li>
        <li>Any calculation functions</li>
        <li>Form validation logic</li>
    </ul>
    
    <b>Activity 3: Debug a Buggy Program (30 minutes)</b>
    <p>Debug this intentionally buggy code:</p>
    <pre style="background: #36454f; color: white; padding: 15px; border-radius: 5px; margin: 10px 0;">
def calculate_average(numbers):
    total = 0
    for num in numbers:
        total =+ num  # Bug here!
    return total / len(numbers)

# Test it:
print(calculate_average([10, 20, 30]))  # Should print 20</pre>
</div>

<h3>Homework: Test Your App</h3>
<div style="background-color: #fff0e6; padding: 20px; border-radius: 10px;">
    <p>Write comprehensive tests for your app:</p>
    <ol>
        <li>At least 5 unit tests for models</li>
        <li>At least 3 route tests (including authentication)</li>
        <li>1 integration test for a complete user workflow</li>
        <li>Test edge cases (empty data, invalid inputs, etc.)</li>
    </ol>
    
    <b>Test Coverage Report:</b>
    <p>Generate a test coverage report:</p>
    <pre style="background: #f5f5f5; padding: 10px;">
# Install coverage
pip install coverage

# Run tests with coverage
coverage run -m pytest

# Generate report
coverage report -m
coverage html  # Creates HTML report in htmlcov/</pre>
    
    <b>Bonus Challenge:</b>
    <p>Set up continuous integration with GitHub Actions to run tests automatically.</p>
</div>

<h3>Key Takeaways</h3>
<div style="background-color: #e8f5e8; padding: 20px; border-radius: 10px;">
    <ul>
        <li>âœ… Testing saves time by catching bugs early</li>
        <li>âœ… Write tests for models, routes, and user workflows</li>
        <li>âœ… Use pytest for organized, readable tests</li>
        <li>âœ… Debug with print statements, logging, and pdb</li>
        <li>âœ… Test edge cases and invalid inputs</li>
        <li>âœ… Coverage reports show what code needs testing</li>
    </ul>
</div>

<h3>ğŸ¤ Teacher's Notes:</h3>
<p>Testing can feel tedious but is <b>essential</b> for professional apps. Frame it as "quality assurance" rather than "extra work." Have students create a bug intentionally, then write a test to catch it. Show how good tests can prevent future bugs. Emphasize that even simple apps benefit from basic tests. Next week: Preparing for deployment!</p>
`
},
            "12-46": {
  icon: "fa-rocket",
  title: "Deployment Preparation",
  html: `<h1>Month 12, Week 2: Deployment Preparation</h1>
<p>Our app is tested and working locally. Now let's get it ready for the real world! This week we'll prepare our app for deployment.</p>

<div class="analogy-box">
    <b>Analogy: The Rocket Launch Preparation ğŸš€</b><br/>
    Local app â†’ Rocket in hangar<br/>
    Production environment â†’ Launch pad<br/>
    Configuration â†’ Flight computer setup<br/>
    Security checks â†’ Pre-flight safety inspection<br/>
    Backup plan â†’ Emergency abort system<br/>
    Launch â†’ Deployment to cloud
</div>

<h3>What Changes for Production?</h3>
<div style="background-color: #f0f8ff; padding: 20px; border-radius: 10px;">
    <p>Production environments are different from development. We need to adjust our app accordingly:</p>
    
    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin-top: 15px;">
        <div style="background: #ffe6e6; padding: 15px; border-radius: 8px;">
            <h4>ğŸ’» Development</h4>
            <ul>
                <li>Debug mode ON</li>
                <li>SQLite database</li>
                <li>Localhost server</li>
                <li>Test/example data</li>
                <li>No SSL/HTTPS</li>
            </ul>
        </div>
        <div style="background: #e6ffe6; padding: 15px; border-radius: 8px;">
            <h4>ğŸŒ Production</h4>
            <ul>
                <li>Debug mode OFF</li>
                <li>Production database</li>
                <li>Real domain name</li>
                <li>Real user data</li>
                <li>SSL/HTTPS required</li>
            </ul>
        </div>
    </div>
</div>

<h3>Configuration Management</h3>
<p>We need different configurations for different environments:</p>

<div style="background-color: #fff3cd; padding: 20px; border-radius: 10px; margin: 20px 0;">
    <h4>âš™ï¸ Multi-Environment Configuration</h4>
    
    <div style="background: white; padding: 15px; border-radius: 8px; margin: 10px 0;">
        <h5>config.py - Updated for Multiple Environments</h5>
        <pre style="background: #36454f; color: white; padding: 15px; border-radius: 5px;">
import os
from dotenv import load_dotenv

load_dotenv()

class Config:
    """Base configuration"""
    SECRET_KEY = os.getenv('SECRET_KEY', 'dev-secret-key-change-in-production')
    SQLALCHEMY_TRACK_MODIFICATIONS = False
    WTF_CSRF_ENABLED = True
    
    # Email configuration
    MAIL_SERVER = os.getenv('MAIL_SERVER', 'smtp.gmail.com')
    MAIL_PORT = int(os.getenv('MAIL_PORT', 587))
    MAIL_USE_TLS = os.getenv('MAIL_USE_TLS', True)
    MAIL_USERNAME = os.getenv('MAIL_USERNAME')
    MAIL_PASSWORD = os.getenv('MAIL_PASSWORD')
    MAIL_DEFAULT_SENDER = os.getenv('MAIL_DEFAULT_SENDER')
    
    # Pagination
    ITEMS_PER_PAGE = 10

class DevelopmentConfig(Config):
    """Development configuration"""
    DEBUG = True
    SQLALCHEMY_DATABASE_URI = 'sqlite:///app.db'
    WTF_CSRF_ENABLED = False  # Easier for development

class TestingConfig(Config):
    """Testing configuration"""
    TESTING = True
    SQLALCHEMY_DATABASE_URI = 'sqlite:///:memory:'  # In-memory DB for tests
    WTF_CSRF_ENABLED = False

class ProductionConfig(Config):
    """Production configuration"""
    DEBUG = False
    # Use environment variable or default to SQLite
    SQLALCHEMY_DATABASE_URI = os.getenv('DATABASE_URL', 'sqlite:///app.db')
    
    # Security settings for production
    SESSION_COOKIE_SECURE = True  # Only send cookie over HTTPS
    REMEMBER_COOKIE_SECURE = True
    SESSION_COOKIE_HTTPONLY = True
    REMEMBER_COOKIE_HTTPONLY = True
    
# Configuration dictionary
config = {
    'development': DevelopmentConfig,
    'testing': TestingConfig,
    'production': ProductionConfig,
    'default': DevelopmentConfig
}</pre>
    </div>
</div>

<h3>Environment Variables with .env</h3>
<p>Never hardcode secrets! Use environment variables:</p>

<div style="background-color: #e8f5e8; padding: 20px; border-radius: 10px;">
    <h4>ğŸ” Secure Configuration with .env</h4>
    
    <div style="background: white; padding: 15px; border-radius: 8px; margin: 10px 0;">
        <h5>.env.example (Template for users)</h5>
        <pre style="background: #f5f5f5; padding: 10px;">
# Copy this file to .env and fill in your values
# NEVER commit .env to version control!

# Flask
FLASK_APP=app.py
FLASK_ENV=development
SECRET_KEY=your-super-secret-key-here-change-this

# Database
DATABASE_URL=sqlite:///app.db

# Email (for password resets, notifications)
MAIL_SERVER=smtp.gmail.com
MAIL_PORT=587
MAIL_USE_TLS=true
MAIL_USERNAME=your-email@gmail.com
MAIL_PASSWORD=your-app-password
MAIL_DEFAULT_SENDER=your-email@gmail.com

# Optional: External services
GOOGLE_MAPS_API_KEY=your-google-maps-api-key
WEATHER_API_KEY=your-weather-api-key</pre>
    </div>
    
    <div style="background: white; padding: 15px; border-radius: 8px; margin: 10px 0;">
        <h5>.gitignore - Add These Lines</h5>
        <pre style="background: #f5f5f5; padding: 10px;">
# Environment variables
.env
.env.local
.env.*.local

# Secrets
secrets/
keys/

# Database files (except for SQLite in dev)
*.db
*.sqlite3

# PyCharm/VS Code
.idea/
.vscode/

# Python
__pycache__/
*.py[cod]
*.so
.Python
venv/
env/
ENV/

# Logs
logs/
*.log</pre>
    </div>
</div>

<h3>Database Migration Setup</h3>
<p>For production, we need database migration tools:</p>

<div style="background-color: #fff3cd; padding: 20px; border-radius: 10px; margin: 20px 0;">
    <h4>ğŸ—ƒï¸ Flask-Migrate for Database Changes</h4>
    
    <div style="background: white; padding: 15px; border-radius: 8px; margin: 10px 0;">
        <h5>1. Install Flask-Migrate</h5>
        <pre style="background: #f5f5f5; padding: 10px;">
# Add to requirements.txt
Flask-Migrate==4.0.5</pre>
    </div>
    
    <div style="background: white; padding: 15px; border-radius: 8px; margin: 10px 0;">
        <h5>2. Update app.py</h5>
        <pre style="background: #36454f; color: white; padding: 15px; border-radius: 5px;">
from flask_migrate import Migrate

app = Flask(__name__)
app.config.from_object(config[os.getenv('FLASK_ENV', 'default')])

db = SQLAlchemy(app)
migrate = Migrate(app, db)  # Add this line</pre>
    </div>
    
    <div style="background: white; padding: 15px; border-radius: 8px; margin: 10px 0;">
        <h5>3. Initialize and Use Migrations</h5>
        <pre style="background: #f5f5f5; padding: 10px;">
# Initialize migrations (run once)
flask db init

# Create migration after model changes
flask db migrate -m "Add customer phone field"

# Apply migration to database
flask db upgrade

# Rollback if needed
flask db downgrade</pre>
    </div>
</div>

<h3>Production-Ready App Structure</h3>
<p>Organize your project for production deployment:</p>

<div style="background-color: #e8f5e8; padding: 20px; border-radius: 10px;">
    <h4>ğŸ“ Final Project Structure</h4>
    <pre style="background: white; padding: 15px; border-radius: 8px; font-family: monospace;">
my_capstone_project/
â”‚
â”œâ”€â”€ app.py                      # Main application factory
â”œâ”€â”€ config.py                   # Configuration classes
â”œâ”€â”€ requirements.txt            # Production dependencies
â”œâ”€â”€ requirements-dev.txt        # Development dependencies
â”œâ”€â”€ runtime.txt                 # Python version (for hosting)
â”œâ”€â”€ Procfile                    # Process file (for hosting)
â”œâ”€â”€ README.md                   # Project documentation
â”œâ”€â”€ LICENSE                     # Open source license
â”‚
â”œâ”€â”€ .env.example                # Environment template
â”œâ”€â”€ .gitignore                  # Files to ignore
â”œâ”€â”€ .python-version             # Python version (optional)
â”‚
â”œâ”€â”€ migrations/                 # Database migrations
â”‚   â”œâ”€â”€ versions/
â”‚   â”œâ”€â”€ alembic.ini
â”‚   â””â”€â”€ env.py
â”‚
â”œâ”€â”€ instance/                   # Instance folder (local config, DB)
â”‚   â””â”€â”€ config.py              # Local overrides
â”‚
â”œâ”€â”€ app/                        # Application package
â”‚   â”œâ”€â”€ __init__.py           # App factory
â”‚   â”œâ”€â”€ models.py             # Database models
â”‚   â”œâ”€â”€ forms.py              # WTForms
â”‚   â”œâ”€â”€ routes.py             # All routes
â”‚   â”œâ”€â”€ auth.py               # Authentication routes
â”‚   â””â”€â”€ utils.py              # Helper functions
â”‚
â”œâ”€â”€ static/                     # Static files
â”‚   â”œâ”€â”€ css/
â”‚   â”‚   â”œâ”€â”€ style.css
â”‚   â”‚   â””â”€â”€ dashboard.css
â”‚   â”œâ”€â”€ js/
â”‚   â”‚   â”œâ”€â”€ main.js
â”‚   â”‚   â””â”€â”€ charts.js
â”‚   â””â”€â”€ images/
â”‚       â”œâ”€â”€ logo.png
â”‚       â””â”€â”€ favicon.ico
â”‚
â”œâ”€â”€ templates/                  # Jinja2 templates
â”‚   â”œâ”€â”€ base.html
â”‚   â”œâ”€â”€ index.html
â”‚   â”œâ”€â”€ auth/
â”‚   â”‚   â”œâ”€â”€ login.html
â”‚   â”‚   â””â”€â”€ register.html
â”‚   â””â”€â”€ customers/
â”‚       â”œâ”€â”€ list.html
â”‚       â”œâ”€â”€ form.html
â”‚       â””â”€â”€ detail.html
â”‚
â”œâ”€â”€ tests/                      # Test files
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ conftest.py
â”‚   â”œâ”€â”€ test_models.py
â”‚   â””â”€â”€ test_routes.py
â”‚
â””â”€â”€ docs/                       # Documentation
    â”œâ”€â”€ deployment.md
    â”œâ”€â”€ api.md
    â””â”€â”€ user_guide.md</pre>
</div>

<h3>Creating Production Requirements</h3>
<p>Separate development and production dependencies:</p>

<div style="background-color: #fff3cd; padding: 20px; border-radius: 10px; margin: 20px 0;">
    <h4>ğŸ“¦ Dependency Management</h4>
    
    <div style="background: white; padding: 15px; border-radius: 8px; margin: 10px 0;">
        <h5>requirements.txt (Production)</h5>
        <pre style="background: #f5f5f5; padding: 10px;">
# Web Framework
Flask==2.3.3
Werkzeug==2.3.7

# Database
Flask-SQLAlchemy==3.0.5
Flask-Migrate==4.0.5

# Authentication & Security
Flask-Login==0.6.2
Flask-Bcrypt==1.0.1
Flask-WTF==1.1.1

# Email
Flask-Mail==0.9.1
python-dotenv==1.0.0

# Production server (choose one)
gunicorn==21.2.0
# OR
waitress==2.1.2</pre>
    </div>
    
    <div style="background: white; padding: 15px; border-radius: 8px; margin: 10px 0;">
        <h5>requirements-dev.txt (Development)</h5>
        <pre style="background: #f5f5f5; padding: 10px;">
# Include all production requirements
-r requirements.txt

# Development tools
pytest==7.4.3
pytest-flask==1.2.0
coverage==7.3.2

# Code quality
flake8==6.1.0
black==23.9.1
isort==5.12.0

# Debugging
python-dotenv==1.0.0
Flask-DebugToolbar==0.13.1

# Optional: Data analysis/export
pandas==2.0.3
openpyxl==3.1.2</pre>
    </div>
</div>

<h3>Today's Hands-On Workshop</h3>
<div style="background-color: #f0f8ff; padding: 20px; border-radius: 10px;">
    <b>Activity 1: Configure Multi-Environment Setup (60 minutes)</b>
    <p>Update your config.py to support development, testing, and production environments.</p>
    
    <b>Activity 2: Set Up Environment Variables (45 minutes)</b>
    <p>Create .env.example and .env files. Move all secrets to environment variables.</p>
    
    <b>Activity 3: Prepare for Database Migrations (45 minutes)</b>
    <p>Install Flask-Migrate and create your first migration:</p>
    <pre style="background: #36454f; color: white; padding: 15px; border-radius: 5px; margin: 10px 0;">
# Initialize migrations
flask db init

# Create initial migration
flask db migrate -m "Initial tables"

# Apply migration
flask db upgrade

# Verify database structure
sqlite3 app.db ".schema"</pre>
</div>

<h3>Homework: Production Preparation</h3>
<div style="background-color: #fff0e6; padding: 20px; border-radius: 10px;">
    <p>Complete all production preparation steps:</p>
    <ol>
        <li>Multi-environment configuration working</li>
        <li>All secrets moved to environment variables</li>
        <li>Database migrations set up</li>
        <li>Production and development requirements files</li>
        <li>Complete project structure organized</li>
        <li>Security checklist completed</li>
    </ol>
    
    <b>Security Checklist:</b>
    <ul>
        <li>âœ… DEBUG = False in production</li>
        <li>âœ… Strong SECRET_KEY set via environment variable</li>
        <li>âœ… Database uses strong password</li>
        <li>âœ… CSRF protection enabled</li>
        <li>âœ… HTTPS/SSL configured</li>
        <li>âœ… Input validation on all forms</li>
        <li>âœ… SQL injection prevented (using ORM)</li>
        <li>âœ… Passwords hashed with bcrypt</li>
    </ul>
    
    <b>Bonus Challenge:</b>
    <p>Create a deployment script that automates the setup process.</p>
</div>

<h3>Key Takeaways</h3>
<div style="background-color: #e8f5e8; padding: 20px; border-radius: 10px;">
    <ul>
        <li>âœ… Production needs different configuration than development</li>
        <li>âœ… NEVER commit secrets to version control</li>
        <li>âœ… Use environment variables for configuration</li>
        <li>âœ… Database migrations manage schema changes</li>
        <li>âœ… Separate development and production dependencies</li>
        <li>âœ… Security is critical in production</li>
    </ul>
</div>

<h3>ğŸ¤ Teacher's Notes:</h3>
<p>This week is about <b>professional practices</b>. Emphasize that these steps separate hobby projects from professional applications. Show what happens when secrets are leaked (demonstrate with a fake API key). Have students practice the migration workflow by adding a new field to a model. Next week: Actual deployment to the cloud!</p>
`
},
            "12-47": {
  icon: "fa-cloud-upload-alt",
  title: "Deployment to Cloud",
  html: `<h1>Month 12, Week 3: Deployment to Cloud</h1>
<p>It's launch day! This week we'll deploy our app to the cloud so the whole world can use it.</p>

<div class="analogy-box">
    <b>Analogy: Opening a Restaurant ğŸª</b><br/>
    Local app â†’ Home kitchen<br/>
    Cloud server â†’ Restaurant building<br/>
    Domain name â†’ Restaurant sign<br/>
    SSL certificate â†’ Health department certificate<br/>
    Deployment â†’ Grand opening<br/>
    Monitoring â†’ Restaurant inspections
</div>

<h3>Choosing a Hosting Platform</h3>
<div style="background-color: #f0f8ff; padding: 20px; border-radius: 10px;">
    <p>Different platforms suit different needs. For student projects, we recommend these free options:</p>
    
    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin-top: 15px;">
        <div style="background: #e3f2fd; padding: 15px; border-radius: 8px; text-align: center;">
            <h4>ğŸ PythonAnywhere</h4>
            <p><b>Best for:</b> Beginner Flask apps</p>
            <p><b>Free tier:</b> âœ… Yes</p>
            <p><b>Easy setup:</b> â­â­â­â­â­</p>
        </div>
        <div style="background: #f3e5f5; padding: 15px; border-radius: 8px; text-align: center;">
            <h4>ğŸŒ€ Render</h4>
            <p><b>Best for:</b> Modern web apps</p>
            <p><b>Free tier:</b> âœ… Yes</p>
            <p><b>Easy setup:</b> â­â­â­â­â˜†</p>
        </div>
        <div style="background: #e8f5e8; padding: 15px; border-radius: 8px; text-align: center;">
            <h4>â˜ï¸ Railway</h4>
            <p><b>Best for:</b> Full-stack apps</p>
            <p><b>Free tier:</b> âœ… Yes</p>
            <p><b>Easy setup:</b> â­â­â­â­â˜†</p>
        </div>
    </div>
</div>

<h3>Deployment to PythonAnywhere</h3>
<p>Let's deploy to PythonAnywhere (easiest for beginners):</p>

<div style="background-color: #fff3cd; padding: 20px; border-radius: 10px; margin: 20px 0;">
    <h4>ğŸš€ Step-by-Step PythonAnywhere Deployment</h4>
    
    <div style="background: white; padding: 15px; border-radius: 8px; margin: 10px 0;">
        <h5>Step 1: Create Required Files</h5>
        <pre style="background: #f5f5f5; padding: 10px;">
# Create runtime.txt (Python version)
echo "python-3.10" > runtime.txt

# Create Procfile (tells PythonAnywhere how to run)
echo "web: gunicorn app:app" > Procfile

# Create wsgi.py (Web Server Gateway Interface)
cat > wsgi.py << 'EOF'
import sys
import os

# Add your app directory to path
path = os.path.dirname(os.path.abspath(__file__))
if path not in sys.path:
    sys.path.append(path)

from app import app as application

if __name__ == "__main__":
    application.run()
EOF</pre>
    </div>
    
    <div style="background: white; padding: 15px; border-radius: 8px; margin: 10px 0;">
        <h5>Step 2: Push to GitHub</h5>
        <pre style="background: #f5f5f5; padding: 10px;">
# Initialize git if not already done
git init

# Add all files
git add .

# Commit
git commit -m "Ready for deployment"

# Create GitHub repository (through website)
# Then connect and push
git remote add origin https://github.com/yourusername/your-repo.git
git branch -M main
git push -u origin main</pre>
    </div>
    
    <div style="background: white; padding: 15px; border-radius: 8px; margin: 10px 0;">
        <h5>Step 3: PythonAnywhere Setup</h5>
        <ol>
            <li>Go to <a href="https://www.pythonanywhere.com" target="_blank">pythonanywhere.com</a></li>
            <li>Create free account</li>
            <li>Go to Dashboard â†’ Web tab</li>
            <li>Click "Add a new web app"</li>
            <li>Choose "Manual configuration"</li>
            <li>Select Python 3.10</li>
            <li>Click Next</li>
        </ol>
    </div>
    
    <div style="background: white; padding: 15px; border-radius: 8px; margin: 10px 0;">
        <h5>Step 4: Configure Web App</h5>
        <pre style="background: #f5f5f5; padding: 10px;">
# In PythonAnywhere Bash console:
cd ~
git clone https://github.com/yourusername/your-repo.git
cd your-repo

# Install dependencies
pip install -r requirements.txt

# Go back to Web tab configuration:
# - Source code: /home/yourusername/your-repo
# - Working directory: /home/yourusername/your-repo
# - WSGI file: /home/yourusername/your-repo/wsgi.py

# Click Reload to deploy!</pre>
    </div>
</div>

<h3>Deployment to Render (Alternative)</h3>
<p>Render is another great option with automatic deployments:</p>

<div style="background-color: #e8f5e8; padding: 20px; border-radius: 10px;">
    <h4>ğŸŒ€ Render Deployment Guide</h4>
    
    <div style="background: white; padding: 15px; border-radius: 8px; margin: 10px 0;">
        <h5>1. Create render.yaml</h5>
        <pre style="background: #f5f5f5; padding: 10px;">
# render.yaml
services:
  - type: web
    name: my-capstone-app
    env: python
    plan: free
    region: oregon
    buildCommand: |
      pip install -r requirements.txt
    startCommand: |
      gunicorn app:app
    envVars:
      - key: FLASK_ENV
        value: production
      - key: SECRET_KEY
        generateValue: true
      - key: DATABASE_URL
        fromDatabase:
          name: my-database
          property: connectionString

databases:
  - name: my-database
    plan: free</pre>
    </div>
    
    <div style="background: white; padding: 15px; border-radius: 8px; margin: 10px 0;">
        <h5>2. Deploy to Render</h5>
        <ol>
            <li>Push code to GitHub</li>
            <li>Go to <a href="https://render.com" target="_blank">render.com</a></li>
            <li>Sign up with GitHub</li>
            <li>Click "New +" â†’ "Web Service"</li>
            <li>Connect your GitHub repository</li>
            <li>Render will detect render.yaml automatically</li>
            <li>Click "Create Web Service"</li>
            <li>Wait for deployment (5-10 minutes)</li>
        </ol>
    </div>
</div>

<h3>Setting Up a Custom Domain (Optional)</h3>
<p>Make your app accessible at your own domain name:</p>

<div style="background-color: #fff3cd; padding: 20px; border-radius: 10px; margin: 20px 0;">
    <h4>ğŸŒ Custom Domain Configuration</h4>
    
    <div style="background: white; padding: 15px; border-radius: 8px; margin: 10px 0;">
        <h5>PythonAnywhere Custom Domain</h5>
        <pre style="background: #f5f5f5; padding: 10px;">
1. Buy domain from Namecheap, GoDaddy, etc.
2. In PythonAnywhere Web tab:
   - Scroll to "Static files"
   - Add your domain in "Add a new domain"
3. At domain registrar:
   - Add CNAME record pointing to yourusername.pythonanywhere.com
4. Wait for DNS propagation (up to 48 hours)
5. Enable HTTPS in PythonAnywhere SSL tab</pre>
    </div>
    
    <div style="background: white; padding: 15px; border-radius: 8px; margin: 10px 0;">
        <h5>Render Custom Domain</h5>
        <pre style="background: #f5f5f5; padding: 10px;">
1. In Render dashboard, go to your service
2. Click "Settings" â†’ "Custom Domain"
3. Add your domain
4. Render shows DNS records to add
5. Add these at your domain registrar
6. Render automatically provisions SSL certificate
7. Wait for propagation</pre>
    </div>
</div>

<h3>Database Setup in Production</h3>
<p>Production needs a proper database, not SQLite:</p>

<div style="background-color: #e8f5e8; padding: 20px; border-radius: 10px;">
    <h4>ğŸ—„ï¸ Production Database Options</h4>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">
        <div style="background: white; padding: 15px; border-radius: 8px;">
            <h5>PostgreSQL (Recommended)</h5>
            <pre style="background: #f5f5f5; padding: 10px;">
# Update requirements.txt
psycopg2-binary==2.9.9
# or for newer Python
pg8000==1.30.3

# Production database URL format:
# postgresql://username:password@host:port/database

# Many hosting providers offer free PostgreSQL:
# - Render (free tier)
# - Railway (free tier)
# - ElephantSQL (free tier)
# - Neon.tech (free tier)</pre>
        </div>
        
        <div style="background: white; padding: 15px; border-radius: 8px;">
            <h5>MySQL</h5>
            <pre style="background: #f5f5f5; padding: 10px;">
# Update requirements.txt
mysqlclient==2.2.0
# or
pymysql==1.1.0

# Production database URL format:
# mysql://username:password@host:port/database

# Free MySQL options:
# - PlanetScale (free tier)
# - Aiven (free trial)
# - Clever Cloud (free tier)</pre>
        </div>
    </div>
    
    <div style="background: white; padding: 15px; border-radius: 8px; margin: 10px 0;">
        <h5>Database Configuration in Production</h5>
        <pre style="background: #36454f; color: white; padding: 15px; border-radius: 5px;">
# In config.py ProductionConfig
import os

class ProductionConfig(Config):
    DEBUG = False
    
    # Get database URL from environment variable
    # Providers automatically set DATABASE_URL
    SQLALCHEMY_DATABASE_URI = os.getenv('DATABASE_URL')
    
    # If DATABASE_URL starts with postgres://, change to postgresql://
    if SQLALCHEMY_DATABASE_URI and SQLALCHEMY_DATABASE_URI.startswith('postgres://'):
        SQLALCHEMY_DATABASE_URI = SQLALCHEMY_DATABASE_URI.replace(
            'postgres://', 'postgresql://', 1
        )

# In deployment, set environment variable:
# DATABASE_URL=postgresql://user:pass@host:port/dbname</pre>
    </div>
</div>

<h3>Monitoring Your Deployed App</h3>
<p>After deployment, monitor to ensure everything works:</p>

<div style="background-color: #fff3cd; padding: 20px; border-radius: 10px; margin: 20px 0;">
    <h4>ğŸ‘€ Basic Monitoring Setup</h4>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">
        <div style="background: white; padding: 15px; border-radius: 8px;">
            <h5>Health Check Endpoint</h5>
            <pre style="background: #f5f5f5; padding: 10px;">
@app.route('/health')
def health_check():
    """Health check endpoint for monitoring"""
    try:
        # Check database connection
        db.session.execute('SELECT 1')
        database_status = 'healthy'
    except Exception as e:
        database_status = f'unhealthy: {str(e)}'
    
    return {
        'status': 'ok',
        'timestamp': datetime.utcnow().isoformat(),
        'database': database_status,
        'version': '1.0.0'
    }, 200</pre>
        </div>
        
        <div style="background: white; padding: 15px; border-radius: 8px;">
            <h5>Error Logging in Production</h5>
            <pre style="background: #f5f5f5; padding: 10px;">
import logging
from logging.handlers import RotatingFileHandler

def setup_logging(app):
    """Configure logging for production"""
    if not app.debug:
        # File handler (rotates when gets too large)
        file_handler = RotatingFileHandler(
            'logs/app.log',
            maxBytes=10240,
            backupCount=10
        )
        file_handler.setFormatter(logging.Formatter(
            '%(asctime)s %(levelname)s: %(message)s '
            '[in %(pathname)s:%(lineno)d]'
        ))
        file_handler.setLevel(logging.INFO)
        app.logger.addHandler(file_handler)
        
        app.logger.setLevel(logging.INFO)
        app.logger.info('Application startup')</pre>
        </div>
    </div>
</div>

<h3>Today's Hands-On Workshop</h3>
<div style="background-color: #f0f8ff; padding: 20px; border-radius: 10px;">
    <b>Activity 1: Prepare Deployment Files (60 minutes)</b>
    <p>Create all necessary deployment files for your chosen platform:</p>
    <ul>
        <li>wsgi.py (for PythonAnywhere)</li>
        <li>Procfile</li>
        <li>runtime.txt</li>
        <li>render.yaml (if using Render)</li>
        <li>Update requirements.txt</li>
    </ul>
    
    <b>Activity 2: Deploy to Cloud (60 minutes)</b>
    <p>Follow the step-by-step guide to deploy your app. Choose either:</p>
    <ol>
        <li>PythonAnywhere (easier for beginners)</li>
        <li>Render (more modern, automatic deployments)</li>
    </ol>
    
    <b>Activity 3: Test Your Deployed App (30 minutes)</b>
    <p>Test everything works in production:</p>
    <ul>
        <li>Visit your live URL</li>
        <li>Test login/registration</li>
        <li>Test main features</li>
        <li>Check /health endpoint</li>
        <li>Test on mobile device</li>
    </ul>
</div>

<h3>Homework: Complete Deployment</h3>
<div style="background-color: #fff0e6; padding: 20px; border-radius: 10px;">
    <p>Successfully deploy your app and complete these tasks:</p>
    <ol>
        <li>App deployed and accessible via public URL</li>
        <li>All features working in production</li>
        <li>Database migrated and working</li>
        <li>HTTPS/SSL enabled</li>
        <li>Health check endpoint implemented</li>
        <li>Basic error logging set up</li>
    </ol>
    
    <b>Deployment Checklist:</b>
    <ul>
        <li>âœ… App loads without errors</li>
        <li>âœ… Database connections work</li>
        <li>âœ… Static files (CSS, JS, images) load</li>
        <li>âœ… Forms submit correctly</li>
        <li>âœ… User authentication works</li>
        <li>âœ… HTTPS is enforced</li>
        <li>âœ… No debug information exposed</li>
        <li>âœ… Error pages look professional</li>
    </ul>
    
    <b>Bonus Challenge:</b>
    <p>Set up automatic deployments from GitHub (when you push code, it auto-deploys).</p>
</div>

<h3>Key Takeaways</h3>
<div style="background-color: #e8f5e8; padding: 20px; border-radius: 10px;">
    <ul>
        <li>âœ… PythonAnywhere is easiest for beginner Flask apps</li>
        <li>âœ… Render offers automatic deployments and free PostgreSQL</li>
        <li>âœ… Production needs proper database (PostgreSQL/MySQL, not SQLite)</li>
        <li>âœ… Always use HTTPS in production</li>
        <li>âœ… Monitor your app with health checks</li>
        <li>âœ… Test everything thoroughly after deployment</li>
    </ul>
</div>

<h3>ğŸ¤ Teacher's Notes:</h3>
<p>This is an <b>exciting week</b> - students see their apps go live! Walk through deployment step-by-step together. Have a "deployment party" where everyone deploys simultaneously. Emphasize that deployment is iterative - the first version doesn't need to be perfect. Help troubleshoot common issues (database connections, static files, environment variables). Next week: Graduation and presentation!</p>
`
},
            "12-48": {
  icon: "fa-graduation-cap",
  title: "Graduation & Presentation",
  html: `<h1>Month 12, Week 4: Graduation & Presentation ğŸ“</h1>
<p>Congratulations! You've built and deployed a real-world application. This week we'll celebrate your achievements and prepare for your professional future.</p>

<div class="analogy-box">
    <b>Analogy: The Movie Premiere ğŸ¬</b><br/>
    Capstone project â†’ Movie production<br/>
    Testing â†’ Film editing<br/>
    Deployment â†’ Theater release<br/>
    Presentation â†’ Premiere night<br/>
    Portfolio â†’ Film festival entry<br/>
    Graduation â†’ Oscar awards ceremony
</div>

<h3>Preparing Your Final Presentation</h3>
<div style="background-color: #f0f8ff; padding: 20px; border-radius: 10px;">
    <p>Your presentation tells the story of your project. Follow this structure:</p>
    
    <div style="background: white; padding: 15px; border-radius: 8px; margin: 10px 0;">
        <h5>ğŸ¯ Presentation Structure (5-7 minutes)</h5>
        <table style="width:100%; border-collapse: collapse;">
            <tr style="background: #4A90E2; color: white;">
                <th style="padding: 10px;">Time</th>
                <th style="padding: 10px;">Section</th>
                <th style="padding: 10px;">What to Show</th>
            </tr>
            <tr style="background: #f8f9fa;">
                <td style="padding: 8px; border: 1px solid #ddd;">1 min</td>
                <td style="padding: 8px; border: 1px solid #ddd;">Introduction</td>
                <td style="padding: 8px; border: 1px solid #ddd;">Project name, tagline, live URL</td>
            </tr>
            <tr style="background: white;">
                <td style="padding: 8px; border: 1px solid #ddd;">1 min</td>
                <td style="padding: 8px; border: 1px solid #ddd;">The Problem</td>
                <td style="padding: 8px; border: 1px solid #ddd;">Who has this problem? Why does it matter?</td>
            </tr>
            <tr style="background: #f8f9fa;">
                <td style="padding: 8px; border: 1px solid #ddd;">2 min</td>
                <td style="padding: 8px; border: 1px solid #ddd;">Demo</td>
                <td style="padding: 8px; border: 1px solid #ddd;">Live demo of 3 key features</td>
            </tr>
            <tr style="background: white;">
                <td style="padding: 8px; border: 1px solid #ddd;">1 min</td>
                <td style="padding: 8px; border: 1px solid #ddd;">Technical Highlights</td>
                <td style="padding: 8px; border: 1px solid #ddd;">1-2 cool technical challenges you solved</td>
            </tr>
            <tr style="background: #f8f9fa;">
                <td style="padding: 8px; border: 1px solid #ddd;">1 min</td>
                <td style="padding: 8px; border: 1px solid #ddd;">Learnings</td>
                <td style="padding: 8px; border: 1px solid #ddd;">What you learned, challenges overcome</td>
            </tr>
            <tr style="background: white;">
                <td style="padding: 8px; border: 1px solid #ddd;">1 min</td>
                <td style="padding: 8px; border: 1px solid #ddd;">Future & Q&A</td>
                <td style="padding: 8px; border: 1px solid #ddd;">What's next? Questions from audience</td>
            </tr>
        </table>
    </div>
</div>

<h3>Creating Your Portfolio</h3>
<p>Your capstone project becomes the centerpiece of your coding portfolio:</p>

<div style="background-color: #fff3cd; padding: 20px; border-radius: 10px; margin: 20px 0;">
    <h4>ğŸ“ Portfolio Project Page Template</h4>
    
    <div style="background: white; padding: 15px; border-radius: 8px; margin: 10px 0;">
        <h5>README.md - Project Documentation</h5>
        <pre style="background: #f5f5f5; padding: 10px;">
# Project Name

![Project Screenshot](screenshot.png)

## ğŸ¯ Overview
Brief description (1-2 sentences) of what your project does and who it's for.

## âœ¨ Live Demo
[Click here to try the live app](https://your-app-url.com)

## ğŸš€ Features
- **Feature 1:** Description of what it does and why it's useful
- **Feature 2:** Description of what it does and why it's useful
- **Feature 3:** Description of what it does and why it's useful

## ğŸ› ï¸ Tech Stack
- **Backend:** Python, Flask
- **Database:** SQLite/PostgreSQL with SQLAlchemy
- **Frontend:** HTML, CSS, JavaScript
- **Authentication:** Flask-Login with bcrypt hashing
- **Deployment:** PythonAnywhere/Render
- **Other:** List any other libraries or services

## ğŸ“¦ Installation
bash
# Clone repository
git clone https://github.com/yourusername/project-name.git

# Create virtual environment
python -m venv venv
source venv/bin/activate  # On Windows: venv\Scripts\activate

# Install dependencies
pip install -r requirements.txt

# Set up environment variables
cp .env.example .env
# Edit .env with your values

# Initialize database
flask db upgrade

# Run the app
flask run

# Your project structure here

ğŸ“ What I Learned
Key technical skills acquired

Problem-solving approaches

Project management experience

Collaboration/communication skills

ğŸ“¸ Screenshots
Add 2-3 screenshots showing different parts of your app

ğŸ”® Future Improvements
Features you'd like to add

Technical improvements planned

Scaling considerations

ğŸ“ License
MIT License</pre>
</div>


</div>
<h3>Creating a Project Video Demo</h3> 
<p>A short video demo is great for your portfolio:</p>
<div style="background-color: #e8f5e8; padding: 20px; border-radius: 10px;"> <h4>ğŸ¥ Video Demo Guide (1-2 minutes)</h4>

<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">
    <div style="background: white; padding: 15px; border-radius: 8px;">
        <h5>What to Include</h5>
        <ul>
            <li><b>0-20s:</b> Title screen with project name</li>
            <li><b>20-40s:</b> Show the problem you're solving</li>
            <li><b>40-90s:</b> Demo 2-3 key features</li>
            <li><b>90-120s:</b> Show it working on mobile</li>
            <li><b>Final:</b> Call to action (visit URL, GitHub)</li>
        </ul>
    </div>
    
    <div style="background: white; padding: 15px; border-radius: 8px;">
        <h5>Recording Tips</h5>
        <ul>
            <li>Use <b>OBS Studio</b> (free) or <b>QuickTime</b> (Mac)</li>
            <li>Speak clearly and enthusiastically</li>
            <li>Practice your demo flow first</li>
            <li>Keep cursor movements smooth</li>
            <li>Edit with <b>DaVinci Resolve</b> (free) or <b>iMovie</b></li>
            <li>Add background music (keep it low)</li>
        </ul>
    </div>
</div>


</div><h3>Preparing for Questions</h3> <p>Be ready to answer questions about your project:</p>
<div style="background-color: #fff3cd; padding: 20px; border-radius: 10px; margin: 20px 0;">
 <h4>â“ Common Presentation Questions</h4>

 <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">
    <div style="background: white; padding: 15px; border-radius: 8px;">
        <h5>Technical Questions</h5>
        <ul>
            <li><b>"Why did you choose Flask over Django?"</b><br>
            <i>Answer:</i> "Flask is lightweight and gave me more control over the architecture."</li>
            
            <li><b>"How do you handle user authentication?"</b><br>
            <i>Answer:</i> "I use Flask-Login with bcrypt password hashing for security."</li>
            
            <li><b>"What was the most challenging bug you fixed?"</b><br>
            <i>Answer:</i> Have a specific example ready!</li>
        </ul>
    </div>
    
    <div style="background: white; padding: 15px; border-radius: 8px;">
        <h5>Project Questions</h5>
        <ul>
            <li><b>"Who is your target user?"</b><br>
            <i>Answer:</i> Be specific about who would use your app.</li>
            
            <li><b>"What would you add if you had more time?"</b><br>
            <i>Answer:</i> Mention 1-2 features from your future plans.</li>
            
            <li><b>"What did you learn from this project?"</b><br>
            <i>Answer:</i> Mention both technical and soft skills.</li>
        </ul>
    </div>
</div>

</div><h3>Graduation Certificate</h3> <p>You've earned your certification! Here's what you've accomplished:</p>
<div style="background-color: #e8f5e8; padding: 20px; border-radius: 10px;"> 
<h4>ğŸ† Year 3: The Professional Apprentice - Certification</h4>

<div style="background: white; padding: 20px; border-radius: 8px; text-align: center; border: 3px solid gold; margin: 20px 0;">
    <h2 style="color: #4A90E2;">CERTIFICATE OF COMPLETION</h2>
    <h3>Year 3: The Professional Apprentice</h3>
    <p>This certifies that</p>
    <h1 style="color: #2E7D32; font-size: 2.5em;">[Student Name]</h1>
    <p>has successfully completed the Professional Apprentice program, demonstrating proficiency in:</p>
    
    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin: 20px 0;">
        <div style="background: #f0f8ff; padding: 10px; border-radius: 5px;">
            <h5>Backend Development</h5>
            <p>Python, Flask, REST APIs</p>
        </div>
        <div style="background: #fff0e6; padding: 10px; border-radius: 5px;">
            <h5>Database Design</h5>
            <p>SQL, SQLAlchemy, Data Modeling</p>
        </div>
        <div style="background: #f0ffe6; padding: 10px; border-radius: 5px;">
            <h5>Full-Stack Deployment</h5>
            <p>Cloud hosting, Production setup</p>
        </div>
    </div>
    
    <p>By building and deploying a real-world application:</p>
    <h4 style="color: #FF9800;">"[Project Name]"</h4>
    <p>Available at: [Your Live URL]</p>
    
    <div style="margin-top: 30px; display: flex; justify-content: space-around;">
        <div>
            <p>_________________________</p>
            <p>Instructor</p>
        </div>
        <div>
            <p>_________________________</p>
            <p>Date</p>
        </div>
    </div>
</div>


</div><h3>Next Steps in Your Coding Journey</h3> <p>Where do you go from here?</p>
<div style="background-color: #fff3cd; padding: 20px; border-radius: 10px; margin: 20px 0;">
 <h4>ğŸš€ Continuing Your Development Journey</h4>

<div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin-top: 15px;">
    <div style="background: #e3f2fd; padding: 15px; border-radius: 8px;">
        <h5>ğŸ’¼ Build Portfolio</h5>
        <ul>
            <li>Add 2-3 more projects</li>
            <li>Contribute to open source</li>
            <li>Write technical blog posts</li>
            <li>Create GitHub profile README</li>
        </ul>
    </div>
    
    <div style="background: #f3e5f5; padding: 15px; border-radius: 8px;">
        <h5>ğŸ“š Continue Learning</h5>
        <ul>
            <li>Learn a frontend framework (React, Vue)</li>
            <li>Study algorithms & data structures</li>
            <li>Explore DevOps (Docker, CI/CD)</li>
            <li>Try mobile development</li>
        </ul>
    </div>
    
    <div style="background: #e8f5e8; padding: 15px; border-radius: 8px;">
        <h5>ğŸ¤ Get Experience</h5>
        <ul>
            <li>Freelance projects</li>
            <li>Internships</li>
            <li>Hackathons</li>
            <li>Tech meetups</li>
        </ul>
    </div>
</div>

</div><h3>Today's Hands-On Workshop</h3> 
<div style="background-color: #f0f8ff; padding: 20px; border-radius: 10px;"> 
<b>Activity 1: Practice Your Presentation (60 minutes)</b> 
<p>Practice your 5-7 minute presentation with a partner. Give each other feedback.</p>


<b>Activity 2: Create Portfolio Materials (60 minutes)</b>
<p>Create or update:</p>
<ul>
    <li>README.md for your project</li>
    <li>Project screenshots (3-5 images)</li>
    <li>30-second elevator pitch</li>
    <li>List of technical achievements</li>
</ul>

<b>Activity 3: Mock Interview Practice (30 minutes)</b>
<p>Practice answering common questions about your project in pairs.</p>

</div><h3>Final Assignment: Complete Your Portfolio</h3> 
<div style="background-color: #fff0e6; padding: 20px; border-radius: 10px;"> 
<p>Complete all graduation requirements:</p> 
<ol> <li><b>Live deployed application</b> (URL working)</li> <li><b>Complete project documentation</b> (README.md)</li> <li><b>Portfolio-ready presentation</b> (5-7 minutes)</li> <li><b>Code repository</b> (GitHub with clean code)</li> <li><b>Project video demo</b> (1-2 minutes, optional but recommended)</li> 
<li><b>Reflection essay</b> (What you learned, challenges overcome)</li> 
</ol>

<b>Graduation Checklist:</b>
<ul>
    <li>âœ… Project solves a real problem</li>
    <li>âœ… Code is clean and well-organized</li>
    <li>âœ… App is deployed and publicly accessible</li>
    <li>âœ… Documentation is complete</li>
    <li>âœ… You can explain your project clearly</li>
    <li>âœ… You're proud of what you built!</li>
</ul>

<b>Bonus Challenge:</b>
<p>Submit your project to a student showcase or local tech fair.</p>


</div>
<h3>Key Takeaways</h3>
 <div style="background-color: #e8f5e8; padding: 20px; border-radius: 10px;"> 
 <ul> <li>âœ… You've built a REAL application from scratch</li> <li>âœ… Presentation skills are as important as coding skills</li> <li>âœ… Your project is now part of your professional portfolio</li> <li>âœ… Continuous learning is the key to growth</li> <li>âœ… Collaboration and feedback make you better</li> <li>âœ… Be proud of your accomplishment!</li> 
 </ul>
  </div>


 <h3>ğŸ¤ Teacher's Final Notes:</h3> 
 <div style="background-color: #f0f8ff; padding: 20px; border-radius: 10px; border-left: 5px solid #4A90E2;"> <p><b>Congratulations to each and every one of you!</b> ğŸ‰</p>

<p>Over the past year, you've transformed from beginners to capable developers who can:</p>
<ul>
    <li>ğŸ”§ <b>Design and implement</b> database schemas</li>
    <li>ğŸ” <b>Build secure</b> authentication systems</li>
    <li>ğŸ–¥ï¸ <b>Create full-stack</b> web applications</li>
    <li>â˜ï¸ <b>Deploy and maintain</b> production applications</li>
    <li>ğŸ› <b>Debug and test</b> complex systems</li>
</ul>

<p>Your capstone project is proof of these skills. But more importantly, you've learned how to <b>learn</b>, how to <b>problem-solve</b>, and how to <b>persist</b> through challenges.</p>

<p>Remember: This is not the end of your journey, but the beginning of your career as a developer. Keep building, keep learning, and most importantly, keep sharing your knowledge with others.</p>

<div style="text-align: center; margin-top: 20px;">
    <h3 style="color: #2E7D32;">ğŸŒŸ Congratulations, Graduates! ğŸŒŸ</h3>
    <p>You are now <b>Professional Apprentices</b> ready to take on the tech world!</p>
</div>


</div> ` 
}


        };

        function showDashboard() {
            const display = document.getElementById('main-content');
            document.querySelectorAll('.nav-item').forEach(item => item.classList.remove('active'));

            let gridHtml = `<h1>Kids Coding | Tier 3: 48-Week Curriculum</h1>
    <p>Navigate through the levels below to access instructor notes and analogies.</p>
    <div class="topic-grid">`;

            for (const key in contentData) {
                if (contentData.hasOwnProperty(key)) {
                    gridHtml += `
                <div class="grid-card" onclick="loadContent(${key.split('-')[0]}, ${key.split('-')[1]})">
                    <i class="${contentData[key].icon.startsWith('fab') ? 'fab' : 'fa-solid'} ${contentData[key].icon}"></i>
                    <span>${contentData[key].title}</span>
                </div>
            `;
                }
            }

            gridHtml += `</div>`;
            display.innerHTML = gridHtml;
        }

        function loadContent(week, day) {
            const key = week + "-" + day;
            console.log("Loading content for key:", key); // Debug line
            console.log("Content exists?", key in contentData); // Debug line
            const data = contentData[key];
            const display = document.getElementById('main-content');
            document.querySelectorAll('.nav-item').forEach(item => item.classList.remove('active'));
            const activeNav = document.getElementById('nav-' + key);
            if (activeNav) activeNav.classList.add('active');

            if (data) {
                display.innerHTML = data.html;
            } else {
                display.innerHTML = `<h1>Week ${day} - Month ${week} Content</h1><p>Lesson plan for Week ${day}, Month ${week}  following the curriculum schedule: 3 hours of lab practice based on the previous lecture.</p>`;
            }
            display.scrollTop = 0;
        }

        window.onload = showDashboard;
    </script>
</body>

</html>